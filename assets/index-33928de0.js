var x0=Object.defineProperty;var v0=(t,e,n)=>e in t?x0(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Ks=(t,e,n)=>(v0(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function y0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var kh={exports:{}},po={},jh={exports:{}},K={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ds=Symbol.for("react.element"),w0=Symbol.for("react.portal"),S0=Symbol.for("react.fragment"),b0=Symbol.for("react.strict_mode"),k0=Symbol.for("react.profiler"),j0=Symbol.for("react.provider"),C0=Symbol.for("react.context"),T0=Symbol.for("react.forward_ref"),P0=Symbol.for("react.suspense"),E0=Symbol.for("react.memo"),N0=Symbol.for("react.lazy"),Yc=Symbol.iterator;function _0(t){return t===null||typeof t!="object"?null:(t=Yc&&t[Yc]||t["@@iterator"],typeof t=="function"?t:null)}var Ch={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Th=Object.assign,Ph={};function Rr(t,e,n){this.props=t,this.context=e,this.refs=Ph,this.updater=n||Ch}Rr.prototype.isReactComponent={};Rr.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Rr.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Eh(){}Eh.prototype=Rr.prototype;function Rl(t,e,n){this.props=t,this.context=e,this.refs=Ph,this.updater=n||Ch}var Dl=Rl.prototype=new Eh;Dl.constructor=Rl;Th(Dl,Rr.prototype);Dl.isPureReactComponent=!0;var Jc=Array.isArray,Nh=Object.prototype.hasOwnProperty,Il={current:null},_h={key:!0,ref:!0,__self:!0,__source:!0};function Ah(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Nh.call(e,r)&&!_h.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var c=Array(a),u=0;u<a;u++)c[u]=arguments[u+2];s.children=c}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Ds,type:t,key:i,ref:o,props:s,_owner:Il.current}}function A0(t,e){return{$$typeof:Ds,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Ol(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ds}function M0(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Zc=/\/+/g;function Go(t,e){return typeof t=="object"&&t!==null&&t.key!=null?M0(""+t.key):e.toString(36)}function vi(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ds:case w0:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Go(o,0):r,Jc(s)?(n="",t!=null&&(n=t.replace(Zc,"$&/")+"/"),vi(s,e,n,"",function(u){return u})):s!=null&&(Ol(s)&&(s=A0(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Zc,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Jc(t))for(var a=0;a<t.length;a++){i=t[a];var c=r+Go(i,a);o+=vi(i,e,n,c,s)}else if(c=_0(t),typeof c=="function")for(t=c.call(t),a=0;!(i=t.next()).done;)i=i.value,c=r+Go(i,a++),o+=vi(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Qs(t,e,n){if(t==null)return t;var r=[],s=0;return vi(t,r,"","",function(i){return e.call(n,i,s++)}),r}function L0(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Fe={current:null},yi={transition:null},R0={ReactCurrentDispatcher:Fe,ReactCurrentBatchConfig:yi,ReactCurrentOwner:Il};function Mh(){throw Error("act(...) is not supported in production builds of React.")}K.Children={map:Qs,forEach:function(t,e,n){Qs(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Qs(t,function(){e++}),e},toArray:function(t){return Qs(t,function(e){return e})||[]},only:function(t){if(!Ol(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};K.Component=Rr;K.Fragment=S0;K.Profiler=k0;K.PureComponent=Rl;K.StrictMode=b0;K.Suspense=P0;K.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R0;K.act=Mh;K.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Th({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Il.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)Nh.call(e,c)&&!_h.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var u=0;u<c;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Ds,type:t.type,key:s,ref:i,props:r,_owner:o}};K.createContext=function(t){return t={$$typeof:C0,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:j0,_context:t},t.Consumer=t};K.createElement=Ah;K.createFactory=function(t){var e=Ah.bind(null,t);return e.type=t,e};K.createRef=function(){return{current:null}};K.forwardRef=function(t){return{$$typeof:T0,render:t}};K.isValidElement=Ol;K.lazy=function(t){return{$$typeof:N0,_payload:{_status:-1,_result:t},_init:L0}};K.memo=function(t,e){return{$$typeof:E0,type:t,compare:e===void 0?null:e}};K.startTransition=function(t){var e=yi.transition;yi.transition={};try{t()}finally{yi.transition=e}};K.unstable_act=Mh;K.useCallback=function(t,e){return Fe.current.useCallback(t,e)};K.useContext=function(t){return Fe.current.useContext(t)};K.useDebugValue=function(){};K.useDeferredValue=function(t){return Fe.current.useDeferredValue(t)};K.useEffect=function(t,e){return Fe.current.useEffect(t,e)};K.useId=function(){return Fe.current.useId()};K.useImperativeHandle=function(t,e,n){return Fe.current.useImperativeHandle(t,e,n)};K.useInsertionEffect=function(t,e){return Fe.current.useInsertionEffect(t,e)};K.useLayoutEffect=function(t,e){return Fe.current.useLayoutEffect(t,e)};K.useMemo=function(t,e){return Fe.current.useMemo(t,e)};K.useReducer=function(t,e,n){return Fe.current.useReducer(t,e,n)};K.useRef=function(t){return Fe.current.useRef(t)};K.useState=function(t){return Fe.current.useState(t)};K.useSyncExternalStore=function(t,e,n){return Fe.current.useSyncExternalStore(t,e,n)};K.useTransition=function(){return Fe.current.useTransition()};K.version="18.3.1";jh.exports=K;var y=jh.exports;const ce=y0(y);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D0=y,I0=Symbol.for("react.element"),O0=Symbol.for("react.fragment"),F0=Object.prototype.hasOwnProperty,G0=D0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,V0={key:!0,ref:!0,__self:!0,__source:!0};function Lh(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)F0.call(e,r)&&!V0.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:I0,type:t,key:i,ref:o,props:s,_owner:G0.current}}po.Fragment=O0;po.jsx=Lh;po.jsxs=Lh;kh.exports=po;var l=kh.exports,Ea={},Rh={exports:{}},Je={},Dh={exports:{}},Ih={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(P,M){var O=P.length;P.push(M);e:for(;0<O;){var I=O-1>>>1,q=P[I];if(0<s(q,M))P[I]=M,P[O]=q,O=I;else break e}}function n(P){return P.length===0?null:P[0]}function r(P){if(P.length===0)return null;var M=P[0],O=P.pop();if(O!==M){P[0]=O;e:for(var I=0,q=P.length,Ve=q>>>1;I<Ve;){var Re=2*(I+1)-1,et=P[Re],W=Re+1,X=P[W];if(0>s(et,O))W<q&&0>s(X,et)?(P[I]=X,P[W]=O,I=W):(P[I]=et,P[Re]=O,I=Re);else if(W<q&&0>s(X,O))P[I]=X,P[W]=O,I=W;else break e}}return M}function s(P,M){var O=P.sortIndex-M.sortIndex;return O!==0?O:P.id-M.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var c=[],u=[],h=1,d=null,f=3,g=!1,v=!1,w=!1,b=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(P){for(var M=n(u);M!==null;){if(M.callback===null)r(u);else if(M.startTime<=P)r(u),M.sortIndex=M.expirationTime,e(c,M);else break;M=n(u)}}function S(P){if(w=!1,x(P),!v)if(n(c)!==null)v=!0,L(j);else{var M=n(u);M!==null&&$(S,M.startTime-P)}}function j(P,M){v=!1,w&&(w=!1,m(T),T=-1),g=!0;var O=f;try{for(x(M),d=n(c);d!==null&&(!(d.expirationTime>M)||P&&!z());){var I=d.callback;if(typeof I=="function"){d.callback=null,f=d.priorityLevel;var q=I(d.expirationTime<=M);M=t.unstable_now(),typeof q=="function"?d.callback=q:d===n(c)&&r(c),x(M)}else r(c);d=n(c)}if(d!==null)var Ve=!0;else{var Re=n(u);Re!==null&&$(S,Re.startTime-M),Ve=!1}return Ve}finally{d=null,f=O,g=!1}}var k=!1,C=null,T=-1,E=5,A=-1;function z(){return!(t.unstable_now()-A<E)}function Q(){if(C!==null){var P=t.unstable_now();A=P;var M=!0;try{M=C(!0,P)}finally{M?F():(k=!1,C=null)}}else k=!1}var F;if(typeof p=="function")F=function(){p(Q)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,V=H.port2;H.port1.onmessage=Q,F=function(){V.postMessage(null)}}else F=function(){b(Q,0)};function L(P){C=P,k||(k=!0,F())}function $(P,M){T=b(function(){P(t.unstable_now())},M)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(P){P.callback=null},t.unstable_continueExecution=function(){v||g||(v=!0,L(j))},t.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<P?Math.floor(1e3/P):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(P){switch(f){case 1:case 2:case 3:var M=3;break;default:M=f}var O=f;f=M;try{return P()}finally{f=O}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(P,M){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var O=f;f=P;try{return M()}finally{f=O}},t.unstable_scheduleCallback=function(P,M,O){var I=t.unstable_now();switch(typeof O=="object"&&O!==null?(O=O.delay,O=typeof O=="number"&&0<O?I+O:I):O=I,P){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=O+q,P={id:h++,callback:M,priorityLevel:P,startTime:O,expirationTime:q,sortIndex:-1},O>I?(P.sortIndex=O,e(u,P),n(c)===null&&P===n(u)&&(w?(m(T),T=-1):w=!0,$(S,O-I))):(P.sortIndex=q,e(c,P),v||g||(v=!0,L(j))),P},t.unstable_shouldYield=z,t.unstable_wrapCallback=function(P){var M=f;return function(){var O=f;f=M;try{return P.apply(this,arguments)}finally{f=O}}}})(Ih);Dh.exports=Ih;var B0=Dh.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H0=y,Xe=B0;function _(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Oh=new Set,ps={};function Kn(t,e){kr(t,e),kr(t+"Capture",e)}function kr(t,e){for(ps[t]=e,t=0;t<e.length;t++)Oh.add(e[t])}var Gt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Na=Object.prototype.hasOwnProperty,z0=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,eu={},tu={};function U0(t){return Na.call(tu,t)?!0:Na.call(eu,t)?!1:z0.test(t)?tu[t]=!0:(eu[t]=!0,!1)}function $0(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function W0(t,e,n,r){if(e===null||typeof e>"u"||$0(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ge(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Pe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Pe[t]=new Ge(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Pe[e]=new Ge(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Pe[t]=new Ge(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Pe[t]=new Ge(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Pe[t]=new Ge(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Pe[t]=new Ge(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Pe[t]=new Ge(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Pe[t]=new Ge(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Pe[t]=new Ge(t,5,!1,t.toLowerCase(),null,!1,!1)});var Fl=/[\-:]([a-z])/g;function Gl(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Fl,Gl);Pe[e]=new Ge(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Fl,Gl);Pe[e]=new Ge(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Fl,Gl);Pe[e]=new Ge(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Pe[t]=new Ge(t,1,!1,t.toLowerCase(),null,!1,!1)});Pe.xlinkHref=new Ge("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Pe[t]=new Ge(t,1,!1,t.toLowerCase(),null,!0,!0)});function Vl(t,e,n,r){var s=Pe.hasOwnProperty(e)?Pe[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(W0(e,n,s,r)&&(n=null),r||s===null?U0(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ut=H0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Xs=Symbol.for("react.element"),Zn=Symbol.for("react.portal"),er=Symbol.for("react.fragment"),Bl=Symbol.for("react.strict_mode"),_a=Symbol.for("react.profiler"),Fh=Symbol.for("react.provider"),Gh=Symbol.for("react.context"),Hl=Symbol.for("react.forward_ref"),Aa=Symbol.for("react.suspense"),Ma=Symbol.for("react.suspense_list"),zl=Symbol.for("react.memo"),Kt=Symbol.for("react.lazy"),Vh=Symbol.for("react.offscreen"),nu=Symbol.iterator;function Gr(t){return t===null||typeof t!="object"?null:(t=nu&&t[nu]||t["@@iterator"],typeof t=="function"?t:null)}var he=Object.assign,Vo;function Qr(t){if(Vo===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Vo=e&&e[1]||""}return`
`+Vo+t}var Bo=!1;function Ho(t,e){if(!t||Bo)return"";Bo=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=a);break}}}finally{Bo=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Qr(t):""}function q0(t){switch(t.tag){case 5:return Qr(t.type);case 16:return Qr("Lazy");case 13:return Qr("Suspense");case 19:return Qr("SuspenseList");case 0:case 2:case 15:return t=Ho(t.type,!1),t;case 11:return t=Ho(t.type.render,!1),t;case 1:return t=Ho(t.type,!0),t;default:return""}}function La(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case er:return"Fragment";case Zn:return"Portal";case _a:return"Profiler";case Bl:return"StrictMode";case Aa:return"Suspense";case Ma:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Gh:return(t.displayName||"Context")+".Consumer";case Fh:return(t._context.displayName||"Context")+".Provider";case Hl:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case zl:return e=t.displayName||null,e!==null?e:La(t.type)||"Memo";case Kt:e=t._payload,t=t._init;try{return La(t(e))}catch{}}return null}function K0(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return La(e);case 8:return e===Bl?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function hn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Bh(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Q0(t){var e=Bh(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ys(t){t._valueTracker||(t._valueTracker=Q0(t))}function Hh(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Bh(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Li(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ra(t,e){var n=e.checked;return he({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function ru(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=hn(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function zh(t,e){e=e.checked,e!=null&&Vl(t,"checked",e,!1)}function Da(t,e){zh(t,e);var n=hn(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ia(t,e.type,n):e.hasOwnProperty("defaultValue")&&Ia(t,e.type,hn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function su(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Ia(t,e,n){(e!=="number"||Li(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Xr=Array.isArray;function gr(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+hn(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Oa(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(_(91));return he({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function iu(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(_(92));if(Xr(n)){if(1<n.length)throw Error(_(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:hn(n)}}function Uh(t,e){var n=hn(e.value),r=hn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function ou(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function $h(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Fa(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?$h(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Js,Wh=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Js=Js||document.createElement("div"),Js.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Js.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ms(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var es={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},X0=["Webkit","ms","Moz","O"];Object.keys(es).forEach(function(t){X0.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),es[e]=es[t]})});function qh(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||es.hasOwnProperty(t)&&es[t]?(""+e).trim():e+"px"}function Kh(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=qh(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var Y0=he({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ga(t,e){if(e){if(Y0[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(_(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(_(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(_(61))}if(e.style!=null&&typeof e.style!="object")throw Error(_(62))}}function Va(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ba=null;function Ul(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ha=null,xr=null,vr=null;function au(t){if(t=Fs(t)){if(typeof Ha!="function")throw Error(_(280));var e=t.stateNode;e&&(e=yo(e),Ha(t.stateNode,t.type,e))}}function Qh(t){xr?vr?vr.push(t):vr=[t]:xr=t}function Xh(){if(xr){var t=xr,e=vr;if(vr=xr=null,au(t),e)for(t=0;t<e.length;t++)au(e[t])}}function Yh(t,e){return t(e)}function Jh(){}var zo=!1;function Zh(t,e,n){if(zo)return t(e,n);zo=!0;try{return Yh(t,e,n)}finally{zo=!1,(xr!==null||vr!==null)&&(Jh(),Xh())}}function gs(t,e){var n=t.stateNode;if(n===null)return null;var r=yo(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(_(231,e,typeof n));return n}var za=!1;if(Gt)try{var Vr={};Object.defineProperty(Vr,"passive",{get:function(){za=!0}}),window.addEventListener("test",Vr,Vr),window.removeEventListener("test",Vr,Vr)}catch{za=!1}function J0(t,e,n,r,s,i,o,a,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(h){this.onError(h)}}var ts=!1,Ri=null,Di=!1,Ua=null,Z0={onError:function(t){ts=!0,Ri=t}};function eg(t,e,n,r,s,i,o,a,c){ts=!1,Ri=null,J0.apply(Z0,arguments)}function tg(t,e,n,r,s,i,o,a,c){if(eg.apply(this,arguments),ts){if(ts){var u=Ri;ts=!1,Ri=null}else throw Error(_(198));Di||(Di=!0,Ua=u)}}function Qn(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function ef(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function lu(t){if(Qn(t)!==t)throw Error(_(188))}function ng(t){var e=t.alternate;if(!e){if(e=Qn(t),e===null)throw Error(_(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return lu(s),t;if(i===r)return lu(s),e;i=i.sibling}throw Error(_(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(_(189))}}if(n.alternate!==r)throw Error(_(190))}if(n.tag!==3)throw Error(_(188));return n.stateNode.current===n?t:e}function tf(t){return t=ng(t),t!==null?nf(t):null}function nf(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=nf(t);if(e!==null)return e;t=t.sibling}return null}var rf=Xe.unstable_scheduleCallback,cu=Xe.unstable_cancelCallback,rg=Xe.unstable_shouldYield,sg=Xe.unstable_requestPaint,ve=Xe.unstable_now,ig=Xe.unstable_getCurrentPriorityLevel,$l=Xe.unstable_ImmediatePriority,sf=Xe.unstable_UserBlockingPriority,Ii=Xe.unstable_NormalPriority,og=Xe.unstable_LowPriority,of=Xe.unstable_IdlePriority,mo=null,Ct=null;function ag(t){if(Ct&&typeof Ct.onCommitFiberRoot=="function")try{Ct.onCommitFiberRoot(mo,t,void 0,(t.current.flags&128)===128)}catch{}}var gt=Math.clz32?Math.clz32:ug,lg=Math.log,cg=Math.LN2;function ug(t){return t>>>=0,t===0?32:31-(lg(t)/cg|0)|0}var Zs=64,ei=4194304;function Yr(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Oi(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Yr(a):(i&=o,i!==0&&(r=Yr(i)))}else o=n&~s,o!==0?r=Yr(o):i!==0&&(r=Yr(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-gt(e),s=1<<n,r|=t[n],e&=~s;return r}function dg(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function hg(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-gt(i),a=1<<o,c=s[o];c===-1?(!(a&n)||a&r)&&(s[o]=dg(a,e)):c<=e&&(t.expiredLanes|=a),i&=~a}}function $a(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function af(){var t=Zs;return Zs<<=1,!(Zs&4194240)&&(Zs=64),t}function Uo(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Is(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-gt(e),t[e]=n}function fg(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-gt(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Wl(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-gt(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var te=0;function lf(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var cf,ql,uf,df,hf,Wa=!1,ti=[],tn=null,nn=null,rn=null,xs=new Map,vs=new Map,Yt=[],pg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function uu(t,e){switch(t){case"focusin":case"focusout":tn=null;break;case"dragenter":case"dragleave":nn=null;break;case"mouseover":case"mouseout":rn=null;break;case"pointerover":case"pointerout":xs.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":vs.delete(e.pointerId)}}function Br(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Fs(e),e!==null&&ql(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function mg(t,e,n,r,s){switch(e){case"focusin":return tn=Br(tn,t,e,n,r,s),!0;case"dragenter":return nn=Br(nn,t,e,n,r,s),!0;case"mouseover":return rn=Br(rn,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return xs.set(i,Br(xs.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,vs.set(i,Br(vs.get(i)||null,t,e,n,r,s)),!0}return!1}function ff(t){var e=_n(t.target);if(e!==null){var n=Qn(e);if(n!==null){if(e=n.tag,e===13){if(e=ef(n),e!==null){t.blockedOn=e,hf(t.priority,function(){uf(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function wi(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=qa(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Ba=r,n.target.dispatchEvent(r),Ba=null}else return e=Fs(n),e!==null&&ql(e),t.blockedOn=n,!1;e.shift()}return!0}function du(t,e,n){wi(t)&&n.delete(e)}function gg(){Wa=!1,tn!==null&&wi(tn)&&(tn=null),nn!==null&&wi(nn)&&(nn=null),rn!==null&&wi(rn)&&(rn=null),xs.forEach(du),vs.forEach(du)}function Hr(t,e){t.blockedOn===e&&(t.blockedOn=null,Wa||(Wa=!0,Xe.unstable_scheduleCallback(Xe.unstable_NormalPriority,gg)))}function ys(t){function e(s){return Hr(s,t)}if(0<ti.length){Hr(ti[0],t);for(var n=1;n<ti.length;n++){var r=ti[n];r.blockedOn===t&&(r.blockedOn=null)}}for(tn!==null&&Hr(tn,t),nn!==null&&Hr(nn,t),rn!==null&&Hr(rn,t),xs.forEach(e),vs.forEach(e),n=0;n<Yt.length;n++)r=Yt[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Yt.length&&(n=Yt[0],n.blockedOn===null);)ff(n),n.blockedOn===null&&Yt.shift()}var yr=Ut.ReactCurrentBatchConfig,Fi=!0;function xg(t,e,n,r){var s=te,i=yr.transition;yr.transition=null;try{te=1,Kl(t,e,n,r)}finally{te=s,yr.transition=i}}function vg(t,e,n,r){var s=te,i=yr.transition;yr.transition=null;try{te=4,Kl(t,e,n,r)}finally{te=s,yr.transition=i}}function Kl(t,e,n,r){if(Fi){var s=qa(t,e,n,r);if(s===null)ea(t,e,r,Gi,n),uu(t,r);else if(mg(s,t,e,n,r))r.stopPropagation();else if(uu(t,r),e&4&&-1<pg.indexOf(t)){for(;s!==null;){var i=Fs(s);if(i!==null&&cf(i),i=qa(t,e,n,r),i===null&&ea(t,e,r,Gi,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else ea(t,e,r,null,n)}}var Gi=null;function qa(t,e,n,r){if(Gi=null,t=Ul(r),t=_n(t),t!==null)if(e=Qn(t),e===null)t=null;else if(n=e.tag,n===13){if(t=ef(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Gi=t,null}function pf(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ig()){case $l:return 1;case sf:return 4;case Ii:case og:return 16;case of:return 536870912;default:return 16}default:return 16}}var Zt=null,Ql=null,Si=null;function mf(){if(Si)return Si;var t,e=Ql,n=e.length,r,s="value"in Zt?Zt.value:Zt.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Si=s.slice(t,1<r?1-r:void 0)}function bi(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ni(){return!0}function hu(){return!1}function Ze(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ni:hu,this.isPropagationStopped=hu,this}return he(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ni)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ni)},persist:function(){},isPersistent:ni}),e}var Dr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xl=Ze(Dr),Os=he({},Dr,{view:0,detail:0}),yg=Ze(Os),$o,Wo,zr,go=he({},Os,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Yl,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==zr&&(zr&&t.type==="mousemove"?($o=t.screenX-zr.screenX,Wo=t.screenY-zr.screenY):Wo=$o=0,zr=t),$o)},movementY:function(t){return"movementY"in t?t.movementY:Wo}}),fu=Ze(go),wg=he({},go,{dataTransfer:0}),Sg=Ze(wg),bg=he({},Os,{relatedTarget:0}),qo=Ze(bg),kg=he({},Dr,{animationName:0,elapsedTime:0,pseudoElement:0}),jg=Ze(kg),Cg=he({},Dr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Tg=Ze(Cg),Pg=he({},Dr,{data:0}),pu=Ze(Pg),Eg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ng={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_g={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ag(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=_g[t])?!!e[t]:!1}function Yl(){return Ag}var Mg=he({},Os,{key:function(t){if(t.key){var e=Eg[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=bi(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Ng[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Yl,charCode:function(t){return t.type==="keypress"?bi(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?bi(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Lg=Ze(Mg),Rg=he({},go,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mu=Ze(Rg),Dg=he({},Os,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Yl}),Ig=Ze(Dg),Og=he({},Dr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Fg=Ze(Og),Gg=he({},go,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Vg=Ze(Gg),Bg=[9,13,27,32],Jl=Gt&&"CompositionEvent"in window,ns=null;Gt&&"documentMode"in document&&(ns=document.documentMode);var Hg=Gt&&"TextEvent"in window&&!ns,gf=Gt&&(!Jl||ns&&8<ns&&11>=ns),gu=String.fromCharCode(32),xu=!1;function xf(t,e){switch(t){case"keyup":return Bg.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vf(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var tr=!1;function zg(t,e){switch(t){case"compositionend":return vf(e);case"keypress":return e.which!==32?null:(xu=!0,gu);case"textInput":return t=e.data,t===gu&&xu?null:t;default:return null}}function Ug(t,e){if(tr)return t==="compositionend"||!Jl&&xf(t,e)?(t=mf(),Si=Ql=Zt=null,tr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return gf&&e.locale!=="ko"?null:e.data;default:return null}}var $g={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vu(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!$g[t.type]:e==="textarea"}function yf(t,e,n,r){Qh(r),e=Vi(e,"onChange"),0<e.length&&(n=new Xl("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var rs=null,ws=null;function Wg(t){_f(t,0)}function xo(t){var e=sr(t);if(Hh(e))return t}function qg(t,e){if(t==="change")return e}var wf=!1;if(Gt){var Ko;if(Gt){var Qo="oninput"in document;if(!Qo){var yu=document.createElement("div");yu.setAttribute("oninput","return;"),Qo=typeof yu.oninput=="function"}Ko=Qo}else Ko=!1;wf=Ko&&(!document.documentMode||9<document.documentMode)}function wu(){rs&&(rs.detachEvent("onpropertychange",Sf),ws=rs=null)}function Sf(t){if(t.propertyName==="value"&&xo(ws)){var e=[];yf(e,ws,t,Ul(t)),Zh(Wg,e)}}function Kg(t,e,n){t==="focusin"?(wu(),rs=e,ws=n,rs.attachEvent("onpropertychange",Sf)):t==="focusout"&&wu()}function Qg(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return xo(ws)}function Xg(t,e){if(t==="click")return xo(e)}function Yg(t,e){if(t==="input"||t==="change")return xo(e)}function Jg(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var vt=typeof Object.is=="function"?Object.is:Jg;function Ss(t,e){if(vt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Na.call(e,s)||!vt(t[s],e[s]))return!1}return!0}function Su(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function bu(t,e){var n=Su(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Su(n)}}function bf(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?bf(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function kf(){for(var t=window,e=Li();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Li(t.document)}return e}function Zl(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Zg(t){var e=kf(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&bf(n.ownerDocument.documentElement,n)){if(r!==null&&Zl(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=bu(n,i);var o=bu(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var ex=Gt&&"documentMode"in document&&11>=document.documentMode,nr=null,Ka=null,ss=null,Qa=!1;function ku(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Qa||nr==null||nr!==Li(r)||(r=nr,"selectionStart"in r&&Zl(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ss&&Ss(ss,r)||(ss=r,r=Vi(Ka,"onSelect"),0<r.length&&(e=new Xl("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=nr)))}function ri(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var rr={animationend:ri("Animation","AnimationEnd"),animationiteration:ri("Animation","AnimationIteration"),animationstart:ri("Animation","AnimationStart"),transitionend:ri("Transition","TransitionEnd")},Xo={},jf={};Gt&&(jf=document.createElement("div").style,"AnimationEvent"in window||(delete rr.animationend.animation,delete rr.animationiteration.animation,delete rr.animationstart.animation),"TransitionEvent"in window||delete rr.transitionend.transition);function vo(t){if(Xo[t])return Xo[t];if(!rr[t])return t;var e=rr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in jf)return Xo[t]=e[n];return t}var Cf=vo("animationend"),Tf=vo("animationiteration"),Pf=vo("animationstart"),Ef=vo("transitionend"),Nf=new Map,ju="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function vn(t,e){Nf.set(t,e),Kn(e,[t])}for(var Yo=0;Yo<ju.length;Yo++){var Jo=ju[Yo],tx=Jo.toLowerCase(),nx=Jo[0].toUpperCase()+Jo.slice(1);vn(tx,"on"+nx)}vn(Cf,"onAnimationEnd");vn(Tf,"onAnimationIteration");vn(Pf,"onAnimationStart");vn("dblclick","onDoubleClick");vn("focusin","onFocus");vn("focusout","onBlur");vn(Ef,"onTransitionEnd");kr("onMouseEnter",["mouseout","mouseover"]);kr("onMouseLeave",["mouseout","mouseover"]);kr("onPointerEnter",["pointerout","pointerover"]);kr("onPointerLeave",["pointerout","pointerover"]);Kn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Kn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Kn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Kn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Kn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Kn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Jr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rx=new Set("cancel close invalid load scroll toggle".split(" ").concat(Jr));function Cu(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,tg(r,e,void 0,t),t.currentTarget=null}function _f(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,u=a.currentTarget;if(a=a.listener,c!==i&&s.isPropagationStopped())break e;Cu(s,a,u),i=c}else for(o=0;o<r.length;o++){if(a=r[o],c=a.instance,u=a.currentTarget,a=a.listener,c!==i&&s.isPropagationStopped())break e;Cu(s,a,u),i=c}}}if(Di)throw t=Ua,Di=!1,Ua=null,t}function se(t,e){var n=e[el];n===void 0&&(n=e[el]=new Set);var r=t+"__bubble";n.has(r)||(Af(e,t,2,!1),n.add(r))}function Zo(t,e,n){var r=0;e&&(r|=4),Af(n,t,r,e)}var si="_reactListening"+Math.random().toString(36).slice(2);function bs(t){if(!t[si]){t[si]=!0,Oh.forEach(function(n){n!=="selectionchange"&&(rx.has(n)||Zo(n,!1,t),Zo(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[si]||(e[si]=!0,Zo("selectionchange",!1,e))}}function Af(t,e,n,r){switch(pf(e)){case 1:var s=xg;break;case 4:s=vg;break;default:s=Kl}n=s.bind(null,e,n,t),s=void 0,!za||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function ea(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;a!==null;){if(o=_n(a),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}a=a.parentNode}}r=r.return}Zh(function(){var u=i,h=Ul(n),d=[];e:{var f=Nf.get(t);if(f!==void 0){var g=Xl,v=t;switch(t){case"keypress":if(bi(n)===0)break e;case"keydown":case"keyup":g=Lg;break;case"focusin":v="focus",g=qo;break;case"focusout":v="blur",g=qo;break;case"beforeblur":case"afterblur":g=qo;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=fu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=Sg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=Ig;break;case Cf:case Tf:case Pf:g=jg;break;case Ef:g=Fg;break;case"scroll":g=yg;break;case"wheel":g=Vg;break;case"copy":case"cut":case"paste":g=Tg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=mu}var w=(e&4)!==0,b=!w&&t==="scroll",m=w?f!==null?f+"Capture":null:f;w=[];for(var p=u,x;p!==null;){x=p;var S=x.stateNode;if(x.tag===5&&S!==null&&(x=S,m!==null&&(S=gs(p,m),S!=null&&w.push(ks(p,S,x)))),b)break;p=p.return}0<w.length&&(f=new g(f,v,null,n,h),d.push({event:f,listeners:w}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",f&&n!==Ba&&(v=n.relatedTarget||n.fromElement)&&(_n(v)||v[Vt]))break e;if((g||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,g?(v=n.relatedTarget||n.toElement,g=u,v=v?_n(v):null,v!==null&&(b=Qn(v),v!==b||v.tag!==5&&v.tag!==6)&&(v=null)):(g=null,v=u),g!==v)){if(w=fu,S="onMouseLeave",m="onMouseEnter",p="mouse",(t==="pointerout"||t==="pointerover")&&(w=mu,S="onPointerLeave",m="onPointerEnter",p="pointer"),b=g==null?f:sr(g),x=v==null?f:sr(v),f=new w(S,p+"leave",g,n,h),f.target=b,f.relatedTarget=x,S=null,_n(h)===u&&(w=new w(m,p+"enter",v,n,h),w.target=x,w.relatedTarget=b,S=w),b=S,g&&v)t:{for(w=g,m=v,p=0,x=w;x;x=Jn(x))p++;for(x=0,S=m;S;S=Jn(S))x++;for(;0<p-x;)w=Jn(w),p--;for(;0<x-p;)m=Jn(m),x--;for(;p--;){if(w===m||m!==null&&w===m.alternate)break t;w=Jn(w),m=Jn(m)}w=null}else w=null;g!==null&&Tu(d,f,g,w,!1),v!==null&&b!==null&&Tu(d,b,v,w,!0)}}e:{if(f=u?sr(u):window,g=f.nodeName&&f.nodeName.toLowerCase(),g==="select"||g==="input"&&f.type==="file")var j=qg;else if(vu(f))if(wf)j=Yg;else{j=Qg;var k=Kg}else(g=f.nodeName)&&g.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(j=Xg);if(j&&(j=j(t,u))){yf(d,j,n,h);break e}k&&k(t,f,u),t==="focusout"&&(k=f._wrapperState)&&k.controlled&&f.type==="number"&&Ia(f,"number",f.value)}switch(k=u?sr(u):window,t){case"focusin":(vu(k)||k.contentEditable==="true")&&(nr=k,Ka=u,ss=null);break;case"focusout":ss=Ka=nr=null;break;case"mousedown":Qa=!0;break;case"contextmenu":case"mouseup":case"dragend":Qa=!1,ku(d,n,h);break;case"selectionchange":if(ex)break;case"keydown":case"keyup":ku(d,n,h)}var C;if(Jl)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else tr?xf(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(gf&&n.locale!=="ko"&&(tr||T!=="onCompositionStart"?T==="onCompositionEnd"&&tr&&(C=mf()):(Zt=h,Ql="value"in Zt?Zt.value:Zt.textContent,tr=!0)),k=Vi(u,T),0<k.length&&(T=new pu(T,t,null,n,h),d.push({event:T,listeners:k}),C?T.data=C:(C=vf(n),C!==null&&(T.data=C)))),(C=Hg?zg(t,n):Ug(t,n))&&(u=Vi(u,"onBeforeInput"),0<u.length&&(h=new pu("onBeforeInput","beforeinput",null,n,h),d.push({event:h,listeners:u}),h.data=C))}_f(d,e)})}function ks(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Vi(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=gs(t,n),i!=null&&r.unshift(ks(t,i,s)),i=gs(t,e),i!=null&&r.push(ks(t,i,s))),t=t.return}return r}function Jn(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Tu(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,c=a.alternate,u=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&u!==null&&(a=u,s?(c=gs(n,i),c!=null&&o.unshift(ks(n,c,a))):s||(c=gs(n,i),c!=null&&o.push(ks(n,c,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var sx=/\r\n?/g,ix=/\u0000|\uFFFD/g;function Pu(t){return(typeof t=="string"?t:""+t).replace(sx,`
`).replace(ix,"")}function ii(t,e,n){if(e=Pu(e),Pu(t)!==e&&n)throw Error(_(425))}function Bi(){}var Xa=null,Ya=null;function Ja(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Za=typeof setTimeout=="function"?setTimeout:void 0,ox=typeof clearTimeout=="function"?clearTimeout:void 0,Eu=typeof Promise=="function"?Promise:void 0,ax=typeof queueMicrotask=="function"?queueMicrotask:typeof Eu<"u"?function(t){return Eu.resolve(null).then(t).catch(lx)}:Za;function lx(t){setTimeout(function(){throw t})}function ta(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),ys(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);ys(e)}function sn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Nu(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ir=Math.random().toString(36).slice(2),kt="__reactFiber$"+Ir,js="__reactProps$"+Ir,Vt="__reactContainer$"+Ir,el="__reactEvents$"+Ir,cx="__reactListeners$"+Ir,ux="__reactHandles$"+Ir;function _n(t){var e=t[kt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Vt]||n[kt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Nu(t);t!==null;){if(n=t[kt])return n;t=Nu(t)}return e}t=n,n=t.parentNode}return null}function Fs(t){return t=t[kt]||t[Vt],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function sr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(_(33))}function yo(t){return t[js]||null}var tl=[],ir=-1;function yn(t){return{current:t}}function ie(t){0>ir||(t.current=tl[ir],tl[ir]=null,ir--)}function ne(t,e){ir++,tl[ir]=t.current,t.current=e}var fn={},Le=yn(fn),ze=yn(!1),On=fn;function jr(t,e){var n=t.type.contextTypes;if(!n)return fn;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Ue(t){return t=t.childContextTypes,t!=null}function Hi(){ie(ze),ie(Le)}function _u(t,e,n){if(Le.current!==fn)throw Error(_(168));ne(Le,e),ne(ze,n)}function Mf(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(_(108,K0(t)||"Unknown",s));return he({},n,r)}function zi(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||fn,On=Le.current,ne(Le,t),ne(ze,ze.current),!0}function Au(t,e,n){var r=t.stateNode;if(!r)throw Error(_(169));n?(t=Mf(t,e,On),r.__reactInternalMemoizedMergedChildContext=t,ie(ze),ie(Le),ne(Le,t)):ie(ze),ne(ze,n)}var Nt=null,wo=!1,na=!1;function Lf(t){Nt===null?Nt=[t]:Nt.push(t)}function dx(t){wo=!0,Lf(t)}function wn(){if(!na&&Nt!==null){na=!0;var t=0,e=te;try{var n=Nt;for(te=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Nt=null,wo=!1}catch(s){throw Nt!==null&&(Nt=Nt.slice(t+1)),rf($l,wn),s}finally{te=e,na=!1}}return null}var or=[],ar=0,Ui=null,$i=0,it=[],ot=0,Fn=null,At=1,Mt="";function Cn(t,e){or[ar++]=$i,or[ar++]=Ui,Ui=t,$i=e}function Rf(t,e,n){it[ot++]=At,it[ot++]=Mt,it[ot++]=Fn,Fn=t;var r=At;t=Mt;var s=32-gt(r)-1;r&=~(1<<s),n+=1;var i=32-gt(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,At=1<<32-gt(e)+s|n<<s|r,Mt=i+t}else At=1<<i|n<<s|r,Mt=t}function ec(t){t.return!==null&&(Cn(t,1),Rf(t,1,0))}function tc(t){for(;t===Ui;)Ui=or[--ar],or[ar]=null,$i=or[--ar],or[ar]=null;for(;t===Fn;)Fn=it[--ot],it[ot]=null,Mt=it[--ot],it[ot]=null,At=it[--ot],it[ot]=null}var Qe=null,Ke=null,ae=!1,mt=null;function Df(t,e){var n=at(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Mu(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Qe=t,Ke=sn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Qe=t,Ke=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Fn!==null?{id:At,overflow:Mt}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=at(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Qe=t,Ke=null,!0):!1;default:return!1}}function nl(t){return(t.mode&1)!==0&&(t.flags&128)===0}function rl(t){if(ae){var e=Ke;if(e){var n=e;if(!Mu(t,e)){if(nl(t))throw Error(_(418));e=sn(n.nextSibling);var r=Qe;e&&Mu(t,e)?Df(r,n):(t.flags=t.flags&-4097|2,ae=!1,Qe=t)}}else{if(nl(t))throw Error(_(418));t.flags=t.flags&-4097|2,ae=!1,Qe=t}}}function Lu(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Qe=t}function oi(t){if(t!==Qe)return!1;if(!ae)return Lu(t),ae=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ja(t.type,t.memoizedProps)),e&&(e=Ke)){if(nl(t))throw If(),Error(_(418));for(;e;)Df(t,e),e=sn(e.nextSibling)}if(Lu(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(_(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ke=sn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ke=null}}else Ke=Qe?sn(t.stateNode.nextSibling):null;return!0}function If(){for(var t=Ke;t;)t=sn(t.nextSibling)}function Cr(){Ke=Qe=null,ae=!1}function nc(t){mt===null?mt=[t]:mt.push(t)}var hx=Ut.ReactCurrentBatchConfig;function Ur(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(_(309));var r=n.stateNode}if(!r)throw Error(_(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(_(284));if(!n._owner)throw Error(_(290,t))}return t}function ai(t,e){throw t=Object.prototype.toString.call(e),Error(_(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Ru(t){var e=t._init;return e(t._payload)}function Of(t){function e(m,p){if(t){var x=m.deletions;x===null?(m.deletions=[p],m.flags|=16):x.push(p)}}function n(m,p){if(!t)return null;for(;p!==null;)e(m,p),p=p.sibling;return null}function r(m,p){for(m=new Map;p!==null;)p.key!==null?m.set(p.key,p):m.set(p.index,p),p=p.sibling;return m}function s(m,p){return m=cn(m,p),m.index=0,m.sibling=null,m}function i(m,p,x){return m.index=x,t?(x=m.alternate,x!==null?(x=x.index,x<p?(m.flags|=2,p):x):(m.flags|=2,p)):(m.flags|=1048576,p)}function o(m){return t&&m.alternate===null&&(m.flags|=2),m}function a(m,p,x,S){return p===null||p.tag!==6?(p=ca(x,m.mode,S),p.return=m,p):(p=s(p,x),p.return=m,p)}function c(m,p,x,S){var j=x.type;return j===er?h(m,p,x.props.children,S,x.key):p!==null&&(p.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Kt&&Ru(j)===p.type)?(S=s(p,x.props),S.ref=Ur(m,p,x),S.return=m,S):(S=Ni(x.type,x.key,x.props,null,m.mode,S),S.ref=Ur(m,p,x),S.return=m,S)}function u(m,p,x,S){return p===null||p.tag!==4||p.stateNode.containerInfo!==x.containerInfo||p.stateNode.implementation!==x.implementation?(p=ua(x,m.mode,S),p.return=m,p):(p=s(p,x.children||[]),p.return=m,p)}function h(m,p,x,S,j){return p===null||p.tag!==7?(p=In(x,m.mode,S,j),p.return=m,p):(p=s(p,x),p.return=m,p)}function d(m,p,x){if(typeof p=="string"&&p!==""||typeof p=="number")return p=ca(""+p,m.mode,x),p.return=m,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case Xs:return x=Ni(p.type,p.key,p.props,null,m.mode,x),x.ref=Ur(m,null,p),x.return=m,x;case Zn:return p=ua(p,m.mode,x),p.return=m,p;case Kt:var S=p._init;return d(m,S(p._payload),x)}if(Xr(p)||Gr(p))return p=In(p,m.mode,x,null),p.return=m,p;ai(m,p)}return null}function f(m,p,x,S){var j=p!==null?p.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return j!==null?null:a(m,p,""+x,S);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Xs:return x.key===j?c(m,p,x,S):null;case Zn:return x.key===j?u(m,p,x,S):null;case Kt:return j=x._init,f(m,p,j(x._payload),S)}if(Xr(x)||Gr(x))return j!==null?null:h(m,p,x,S,null);ai(m,x)}return null}function g(m,p,x,S,j){if(typeof S=="string"&&S!==""||typeof S=="number")return m=m.get(x)||null,a(p,m,""+S,j);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Xs:return m=m.get(S.key===null?x:S.key)||null,c(p,m,S,j);case Zn:return m=m.get(S.key===null?x:S.key)||null,u(p,m,S,j);case Kt:var k=S._init;return g(m,p,x,k(S._payload),j)}if(Xr(S)||Gr(S))return m=m.get(x)||null,h(p,m,S,j,null);ai(p,S)}return null}function v(m,p,x,S){for(var j=null,k=null,C=p,T=p=0,E=null;C!==null&&T<x.length;T++){C.index>T?(E=C,C=null):E=C.sibling;var A=f(m,C,x[T],S);if(A===null){C===null&&(C=E);break}t&&C&&A.alternate===null&&e(m,C),p=i(A,p,T),k===null?j=A:k.sibling=A,k=A,C=E}if(T===x.length)return n(m,C),ae&&Cn(m,T),j;if(C===null){for(;T<x.length;T++)C=d(m,x[T],S),C!==null&&(p=i(C,p,T),k===null?j=C:k.sibling=C,k=C);return ae&&Cn(m,T),j}for(C=r(m,C);T<x.length;T++)E=g(C,m,T,x[T],S),E!==null&&(t&&E.alternate!==null&&C.delete(E.key===null?T:E.key),p=i(E,p,T),k===null?j=E:k.sibling=E,k=E);return t&&C.forEach(function(z){return e(m,z)}),ae&&Cn(m,T),j}function w(m,p,x,S){var j=Gr(x);if(typeof j!="function")throw Error(_(150));if(x=j.call(x),x==null)throw Error(_(151));for(var k=j=null,C=p,T=p=0,E=null,A=x.next();C!==null&&!A.done;T++,A=x.next()){C.index>T?(E=C,C=null):E=C.sibling;var z=f(m,C,A.value,S);if(z===null){C===null&&(C=E);break}t&&C&&z.alternate===null&&e(m,C),p=i(z,p,T),k===null?j=z:k.sibling=z,k=z,C=E}if(A.done)return n(m,C),ae&&Cn(m,T),j;if(C===null){for(;!A.done;T++,A=x.next())A=d(m,A.value,S),A!==null&&(p=i(A,p,T),k===null?j=A:k.sibling=A,k=A);return ae&&Cn(m,T),j}for(C=r(m,C);!A.done;T++,A=x.next())A=g(C,m,T,A.value,S),A!==null&&(t&&A.alternate!==null&&C.delete(A.key===null?T:A.key),p=i(A,p,T),k===null?j=A:k.sibling=A,k=A);return t&&C.forEach(function(Q){return e(m,Q)}),ae&&Cn(m,T),j}function b(m,p,x,S){if(typeof x=="object"&&x!==null&&x.type===er&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Xs:e:{for(var j=x.key,k=p;k!==null;){if(k.key===j){if(j=x.type,j===er){if(k.tag===7){n(m,k.sibling),p=s(k,x.props.children),p.return=m,m=p;break e}}else if(k.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Kt&&Ru(j)===k.type){n(m,k.sibling),p=s(k,x.props),p.ref=Ur(m,k,x),p.return=m,m=p;break e}n(m,k);break}else e(m,k);k=k.sibling}x.type===er?(p=In(x.props.children,m.mode,S,x.key),p.return=m,m=p):(S=Ni(x.type,x.key,x.props,null,m.mode,S),S.ref=Ur(m,p,x),S.return=m,m=S)}return o(m);case Zn:e:{for(k=x.key;p!==null;){if(p.key===k)if(p.tag===4&&p.stateNode.containerInfo===x.containerInfo&&p.stateNode.implementation===x.implementation){n(m,p.sibling),p=s(p,x.children||[]),p.return=m,m=p;break e}else{n(m,p);break}else e(m,p);p=p.sibling}p=ua(x,m.mode,S),p.return=m,m=p}return o(m);case Kt:return k=x._init,b(m,p,k(x._payload),S)}if(Xr(x))return v(m,p,x,S);if(Gr(x))return w(m,p,x,S);ai(m,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,p!==null&&p.tag===6?(n(m,p.sibling),p=s(p,x),p.return=m,m=p):(n(m,p),p=ca(x,m.mode,S),p.return=m,m=p),o(m)):n(m,p)}return b}var Tr=Of(!0),Ff=Of(!1),Wi=yn(null),qi=null,lr=null,rc=null;function sc(){rc=lr=qi=null}function ic(t){var e=Wi.current;ie(Wi),t._currentValue=e}function sl(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function wr(t,e){qi=t,rc=lr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(He=!0),t.firstContext=null)}function ct(t){var e=t._currentValue;if(rc!==t)if(t={context:t,memoizedValue:e,next:null},lr===null){if(qi===null)throw Error(_(308));lr=t,qi.dependencies={lanes:0,firstContext:t}}else lr=lr.next=t;return e}var An=null;function oc(t){An===null?An=[t]:An.push(t)}function Gf(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,oc(e)):(n.next=s.next,s.next=n),e.interleaved=n,Bt(t,r)}function Bt(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Qt=!1;function ac(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Vf(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function It(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function on(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Y&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Bt(t,n)}return s=r.interleaved,s===null?(e.next=e,oc(r)):(e.next=s.next,s.next=e),r.interleaved=e,Bt(t,n)}function ki(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Wl(t,n)}}function Du(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ki(t,e,n,r){var s=t.updateQueue;Qt=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var c=a,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=u:a.next=u,h.lastBaseUpdate=c))}if(i!==null){var d=s.baseState;o=0,h=u=c=null,a=i;do{var f=a.lane,g=a.eventTime;if((r&f)===f){h!==null&&(h=h.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=t,w=a;switch(f=e,g=n,w.tag){case 1:if(v=w.payload,typeof v=="function"){d=v.call(g,d,f);break e}d=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=w.payload,f=typeof v=="function"?v.call(g,d,f):v,f==null)break e;d=he({},d,f);break e;case 2:Qt=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else g={eventTime:g,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(u=h=g,c=d):h=h.next=g,o|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(1);if(h===null&&(c=d),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Vn|=o,t.lanes=o,t.memoizedState=d}}function Iu(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(_(191,s));s.call(r)}}}var Gs={},Tt=yn(Gs),Cs=yn(Gs),Ts=yn(Gs);function Mn(t){if(t===Gs)throw Error(_(174));return t}function lc(t,e){switch(ne(Ts,e),ne(Cs,t),ne(Tt,Gs),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Fa(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Fa(e,t)}ie(Tt),ne(Tt,e)}function Pr(){ie(Tt),ie(Cs),ie(Ts)}function Bf(t){Mn(Ts.current);var e=Mn(Tt.current),n=Fa(e,t.type);e!==n&&(ne(Cs,t),ne(Tt,n))}function cc(t){Cs.current===t&&(ie(Tt),ie(Cs))}var le=yn(0);function Qi(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ra=[];function uc(){for(var t=0;t<ra.length;t++)ra[t]._workInProgressVersionPrimary=null;ra.length=0}var ji=Ut.ReactCurrentDispatcher,sa=Ut.ReactCurrentBatchConfig,Gn=0,de=null,Se=null,ke=null,Xi=!1,is=!1,Ps=0,fx=0;function Ee(){throw Error(_(321))}function dc(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!vt(t[n],e[n]))return!1;return!0}function hc(t,e,n,r,s,i){if(Gn=i,de=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ji.current=t===null||t.memoizedState===null?xx:vx,t=n(r,s),is){i=0;do{if(is=!1,Ps=0,25<=i)throw Error(_(301));i+=1,ke=Se=null,e.updateQueue=null,ji.current=yx,t=n(r,s)}while(is)}if(ji.current=Yi,e=Se!==null&&Se.next!==null,Gn=0,ke=Se=de=null,Xi=!1,e)throw Error(_(300));return t}function fc(){var t=Ps!==0;return Ps=0,t}function bt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ke===null?de.memoizedState=ke=t:ke=ke.next=t,ke}function ut(){if(Se===null){var t=de.alternate;t=t!==null?t.memoizedState:null}else t=Se.next;var e=ke===null?de.memoizedState:ke.next;if(e!==null)ke=e,Se=t;else{if(t===null)throw Error(_(310));Se=t,t={memoizedState:Se.memoizedState,baseState:Se.baseState,baseQueue:Se.baseQueue,queue:Se.queue,next:null},ke===null?de.memoizedState=ke=t:ke=ke.next=t}return ke}function Es(t,e){return typeof e=="function"?e(t):e}function ia(t){var e=ut(),n=e.queue;if(n===null)throw Error(_(311));n.lastRenderedReducer=t;var r=Se,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,c=null,u=i;do{var h=u.lane;if((Gn&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(a=c=d,o=r):c=c.next=d,de.lanes|=h,Vn|=h}u=u.next}while(u!==null&&u!==i);c===null?o=r:c.next=a,vt(r,e.memoizedState)||(He=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,de.lanes|=i,Vn|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function oa(t){var e=ut(),n=e.queue;if(n===null)throw Error(_(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);vt(i,e.memoizedState)||(He=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Hf(){}function zf(t,e){var n=de,r=ut(),s=e(),i=!vt(r.memoizedState,s);if(i&&(r.memoizedState=s,He=!0),r=r.queue,pc(Wf.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||ke!==null&&ke.memoizedState.tag&1){if(n.flags|=2048,Ns(9,$f.bind(null,n,r,s,e),void 0,null),je===null)throw Error(_(349));Gn&30||Uf(n,e,s)}return s}function Uf(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=de.updateQueue,e===null?(e={lastEffect:null,stores:null},de.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function $f(t,e,n,r){e.value=n,e.getSnapshot=r,qf(e)&&Kf(t)}function Wf(t,e,n){return n(function(){qf(e)&&Kf(t)})}function qf(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!vt(t,n)}catch{return!0}}function Kf(t){var e=Bt(t,1);e!==null&&xt(e,t,1,-1)}function Ou(t){var e=bt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Es,lastRenderedState:t},e.queue=t,t=t.dispatch=gx.bind(null,de,t),[e.memoizedState,t]}function Ns(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=de.updateQueue,e===null?(e={lastEffect:null,stores:null},de.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Qf(){return ut().memoizedState}function Ci(t,e,n,r){var s=bt();de.flags|=t,s.memoizedState=Ns(1|e,n,void 0,r===void 0?null:r)}function So(t,e,n,r){var s=ut();r=r===void 0?null:r;var i=void 0;if(Se!==null){var o=Se.memoizedState;if(i=o.destroy,r!==null&&dc(r,o.deps)){s.memoizedState=Ns(e,n,i,r);return}}de.flags|=t,s.memoizedState=Ns(1|e,n,i,r)}function Fu(t,e){return Ci(8390656,8,t,e)}function pc(t,e){return So(2048,8,t,e)}function Xf(t,e){return So(4,2,t,e)}function Yf(t,e){return So(4,4,t,e)}function Jf(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Zf(t,e,n){return n=n!=null?n.concat([t]):null,So(4,4,Jf.bind(null,e,t),n)}function mc(){}function ep(t,e){var n=ut();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&dc(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function tp(t,e){var n=ut();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&dc(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function np(t,e,n){return Gn&21?(vt(n,e)||(n=af(),de.lanes|=n,Vn|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,He=!0),t.memoizedState=n)}function px(t,e){var n=te;te=n!==0&&4>n?n:4,t(!0);var r=sa.transition;sa.transition={};try{t(!1),e()}finally{te=n,sa.transition=r}}function rp(){return ut().memoizedState}function mx(t,e,n){var r=ln(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},sp(t))ip(e,n);else if(n=Gf(t,e,n,r),n!==null){var s=Oe();xt(n,t,r,s),op(n,e,r)}}function gx(t,e,n){var r=ln(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(sp(t))ip(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,vt(a,o)){var c=e.interleaved;c===null?(s.next=s,oc(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=Gf(t,e,s,r),n!==null&&(s=Oe(),xt(n,t,r,s),op(n,e,r))}}function sp(t){var e=t.alternate;return t===de||e!==null&&e===de}function ip(t,e){is=Xi=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function op(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Wl(t,n)}}var Yi={readContext:ct,useCallback:Ee,useContext:Ee,useEffect:Ee,useImperativeHandle:Ee,useInsertionEffect:Ee,useLayoutEffect:Ee,useMemo:Ee,useReducer:Ee,useRef:Ee,useState:Ee,useDebugValue:Ee,useDeferredValue:Ee,useTransition:Ee,useMutableSource:Ee,useSyncExternalStore:Ee,useId:Ee,unstable_isNewReconciler:!1},xx={readContext:ct,useCallback:function(t,e){return bt().memoizedState=[t,e===void 0?null:e],t},useContext:ct,useEffect:Fu,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ci(4194308,4,Jf.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ci(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ci(4,2,t,e)},useMemo:function(t,e){var n=bt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=bt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=mx.bind(null,de,t),[r.memoizedState,t]},useRef:function(t){var e=bt();return t={current:t},e.memoizedState=t},useState:Ou,useDebugValue:mc,useDeferredValue:function(t){return bt().memoizedState=t},useTransition:function(){var t=Ou(!1),e=t[0];return t=px.bind(null,t[1]),bt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=de,s=bt();if(ae){if(n===void 0)throw Error(_(407));n=n()}else{if(n=e(),je===null)throw Error(_(349));Gn&30||Uf(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Fu(Wf.bind(null,r,i,t),[t]),r.flags|=2048,Ns(9,$f.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=bt(),e=je.identifierPrefix;if(ae){var n=Mt,r=At;n=(r&~(1<<32-gt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ps++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=fx++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},vx={readContext:ct,useCallback:ep,useContext:ct,useEffect:pc,useImperativeHandle:Zf,useInsertionEffect:Xf,useLayoutEffect:Yf,useMemo:tp,useReducer:ia,useRef:Qf,useState:function(){return ia(Es)},useDebugValue:mc,useDeferredValue:function(t){var e=ut();return np(e,Se.memoizedState,t)},useTransition:function(){var t=ia(Es)[0],e=ut().memoizedState;return[t,e]},useMutableSource:Hf,useSyncExternalStore:zf,useId:rp,unstable_isNewReconciler:!1},yx={readContext:ct,useCallback:ep,useContext:ct,useEffect:pc,useImperativeHandle:Zf,useInsertionEffect:Xf,useLayoutEffect:Yf,useMemo:tp,useReducer:oa,useRef:Qf,useState:function(){return oa(Es)},useDebugValue:mc,useDeferredValue:function(t){var e=ut();return Se===null?e.memoizedState=t:np(e,Se.memoizedState,t)},useTransition:function(){var t=oa(Es)[0],e=ut().memoizedState;return[t,e]},useMutableSource:Hf,useSyncExternalStore:zf,useId:rp,unstable_isNewReconciler:!1};function ft(t,e){if(t&&t.defaultProps){e=he({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function il(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:he({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var bo={isMounted:function(t){return(t=t._reactInternals)?Qn(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Oe(),s=ln(t),i=It(r,s);i.payload=e,n!=null&&(i.callback=n),e=on(t,i,s),e!==null&&(xt(e,t,s,r),ki(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Oe(),s=ln(t),i=It(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=on(t,i,s),e!==null&&(xt(e,t,s,r),ki(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Oe(),r=ln(t),s=It(n,r);s.tag=2,e!=null&&(s.callback=e),e=on(t,s,r),e!==null&&(xt(e,t,r,n),ki(e,t,r))}};function Gu(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Ss(n,r)||!Ss(s,i):!0}function ap(t,e,n){var r=!1,s=fn,i=e.contextType;return typeof i=="object"&&i!==null?i=ct(i):(s=Ue(e)?On:Le.current,r=e.contextTypes,i=(r=r!=null)?jr(t,s):fn),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=bo,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Vu(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&bo.enqueueReplaceState(e,e.state,null)}function ol(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},ac(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=ct(i):(i=Ue(e)?On:Le.current,s.context=jr(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(il(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&bo.enqueueReplaceState(s,s.state,null),Ki(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Er(t,e){try{var n="",r=e;do n+=q0(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function aa(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function al(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var wx=typeof WeakMap=="function"?WeakMap:Map;function lp(t,e,n){n=It(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Zi||(Zi=!0,xl=r),al(t,e)},n}function cp(t,e,n){n=It(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){al(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){al(t,e),typeof r!="function"&&(an===null?an=new Set([this]):an.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Bu(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new wx;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=Rx.bind(null,t,e,n),e.then(t,t))}function Hu(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function zu(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=It(-1,1),e.tag=2,on(n,e,1))),n.lanes|=1),t)}var Sx=Ut.ReactCurrentOwner,He=!1;function Ie(t,e,n,r){e.child=t===null?Ff(e,null,n,r):Tr(e,t.child,n,r)}function Uu(t,e,n,r,s){n=n.render;var i=e.ref;return wr(e,s),r=hc(t,e,n,r,i,s),n=fc(),t!==null&&!He?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ht(t,e,s)):(ae&&n&&ec(e),e.flags|=1,Ie(t,e,r,s),e.child)}function $u(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!kc(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,up(t,e,i,r,s)):(t=Ni(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Ss,n(o,r)&&t.ref===e.ref)return Ht(t,e,s)}return e.flags|=1,t=cn(i,r),t.ref=e.ref,t.return=e,e.child=t}function up(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Ss(i,r)&&t.ref===e.ref)if(He=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(He=!0);else return e.lanes=t.lanes,Ht(t,e,s)}return ll(t,e,n,r,s)}function dp(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ne(ur,qe),qe|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ne(ur,qe),qe|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,ne(ur,qe),qe|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,ne(ur,qe),qe|=r;return Ie(t,e,s,n),e.child}function hp(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function ll(t,e,n,r,s){var i=Ue(n)?On:Le.current;return i=jr(e,i),wr(e,s),n=hc(t,e,n,r,i,s),r=fc(),t!==null&&!He?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ht(t,e,s)):(ae&&r&&ec(e),e.flags|=1,Ie(t,e,n,s),e.child)}function Wu(t,e,n,r,s){if(Ue(n)){var i=!0;zi(e)}else i=!1;if(wr(e,s),e.stateNode===null)Ti(t,e),ap(e,n,r),ol(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=ct(u):(u=Ue(n)?On:Le.current,u=jr(e,u));var h=n.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||c!==u)&&Vu(e,o,r,u),Qt=!1;var f=e.memoizedState;o.state=f,Ki(e,r,o,s),c=e.memoizedState,a!==r||f!==c||ze.current||Qt?(typeof h=="function"&&(il(e,n,h,r),c=e.memoizedState),(a=Qt||Gu(e,n,a,r,f,c,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Vf(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:ft(e.type,a),o.props=u,d=e.pendingProps,f=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=ct(c):(c=Ue(n)?On:Le.current,c=jr(e,c));var g=n.getDerivedStateFromProps;(h=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==c)&&Vu(e,o,r,c),Qt=!1,f=e.memoizedState,o.state=f,Ki(e,r,o,s);var v=e.memoizedState;a!==d||f!==v||ze.current||Qt?(typeof g=="function"&&(il(e,n,g,r),v=e.memoizedState),(u=Qt||Gu(e,n,u,r,f,v,c)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),o.props=r,o.state=v,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return cl(t,e,n,r,i,s)}function cl(t,e,n,r,s,i){hp(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Au(e,n,!1),Ht(t,e,i);r=e.stateNode,Sx.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Tr(e,t.child,null,i),e.child=Tr(e,null,a,i)):Ie(t,e,a,i),e.memoizedState=r.state,s&&Au(e,n,!0),e.child}function fp(t){var e=t.stateNode;e.pendingContext?_u(t,e.pendingContext,e.pendingContext!==e.context):e.context&&_u(t,e.context,!1),lc(t,e.containerInfo)}function qu(t,e,n,r,s){return Cr(),nc(s),e.flags|=256,Ie(t,e,n,r),e.child}var ul={dehydrated:null,treeContext:null,retryLane:0};function dl(t){return{baseLanes:t,cachePool:null,transitions:null}}function pp(t,e,n){var r=e.pendingProps,s=le.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),ne(le,s&1),t===null)return rl(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Co(o,r,0,null),t=In(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=dl(n),e.memoizedState=ul,t):gc(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return bx(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=cn(s,c),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=cn(a,i):(i=In(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?dl(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=ul,r}return i=t.child,t=i.sibling,r=cn(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function gc(t,e){return e=Co({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function li(t,e,n,r){return r!==null&&nc(r),Tr(e,t.child,null,n),t=gc(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function bx(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=aa(Error(_(422))),li(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Co({mode:"visible",children:r.children},s,0,null),i=In(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Tr(e,t.child,null,o),e.child.memoizedState=dl(o),e.memoizedState=ul,i);if(!(e.mode&1))return li(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(_(419)),r=aa(i,r,void 0),li(t,e,o,r)}if(a=(o&t.childLanes)!==0,He||a){if(r=je,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Bt(t,s),xt(r,t,s,-1))}return bc(),r=aa(Error(_(421))),li(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=Dx.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Ke=sn(s.nextSibling),Qe=e,ae=!0,mt=null,t!==null&&(it[ot++]=At,it[ot++]=Mt,it[ot++]=Fn,At=t.id,Mt=t.overflow,Fn=e),e=gc(e,r.children),e.flags|=4096,e)}function Ku(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),sl(t.return,e,n)}function la(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function mp(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Ie(t,e,r.children,n),r=le.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ku(t,n,e);else if(t.tag===19)Ku(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ne(le,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Qi(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),la(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Qi(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}la(e,!0,n,null,i);break;case"together":la(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ti(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ht(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Vn|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(_(153));if(e.child!==null){for(t=e.child,n=cn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=cn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function kx(t,e,n){switch(e.tag){case 3:fp(e),Cr();break;case 5:Bf(e);break;case 1:Ue(e.type)&&zi(e);break;case 4:lc(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;ne(Wi,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ne(le,le.current&1),e.flags|=128,null):n&e.child.childLanes?pp(t,e,n):(ne(le,le.current&1),t=Ht(t,e,n),t!==null?t.sibling:null);ne(le,le.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return mp(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ne(le,le.current),r)break;return null;case 22:case 23:return e.lanes=0,dp(t,e,n)}return Ht(t,e,n)}var gp,hl,xp,vp;gp=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};hl=function(){};xp=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Mn(Tt.current);var i=null;switch(n){case"input":s=Ra(t,s),r=Ra(t,r),i=[];break;case"select":s=he({},s,{value:void 0}),r=he({},r,{value:void 0}),i=[];break;case"textarea":s=Oa(t,s),r=Oa(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Bi)}Ga(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ps.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(a=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==a&&(c!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ps.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&se("scroll",t),i||a===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};vp=function(t,e,n,r){n!==r&&(e.flags|=4)};function $r(t,e){if(!ae)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ne(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function jx(t,e,n){var r=e.pendingProps;switch(tc(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ne(e),null;case 1:return Ue(e.type)&&Hi(),Ne(e),null;case 3:return r=e.stateNode,Pr(),ie(ze),ie(Le),uc(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(oi(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,mt!==null&&(wl(mt),mt=null))),hl(t,e),Ne(e),null;case 5:cc(e);var s=Mn(Ts.current);if(n=e.type,t!==null&&e.stateNode!=null)xp(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(_(166));return Ne(e),null}if(t=Mn(Tt.current),oi(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[kt]=e,r[js]=i,t=(e.mode&1)!==0,n){case"dialog":se("cancel",r),se("close",r);break;case"iframe":case"object":case"embed":se("load",r);break;case"video":case"audio":for(s=0;s<Jr.length;s++)se(Jr[s],r);break;case"source":se("error",r);break;case"img":case"image":case"link":se("error",r),se("load",r);break;case"details":se("toggle",r);break;case"input":ru(r,i),se("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},se("invalid",r);break;case"textarea":iu(r,i),se("invalid",r)}Ga(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&ii(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&ii(r.textContent,a,t),s=["children",""+a]):ps.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&se("scroll",r)}switch(n){case"input":Ys(r),su(r,i,!0);break;case"textarea":Ys(r),ou(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Bi)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=$h(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[kt]=e,t[js]=r,gp(t,e,!1,!1),e.stateNode=t;e:{switch(o=Va(n,r),n){case"dialog":se("cancel",t),se("close",t),s=r;break;case"iframe":case"object":case"embed":se("load",t),s=r;break;case"video":case"audio":for(s=0;s<Jr.length;s++)se(Jr[s],t);s=r;break;case"source":se("error",t),s=r;break;case"img":case"image":case"link":se("error",t),se("load",t),s=r;break;case"details":se("toggle",t),s=r;break;case"input":ru(t,r),s=Ra(t,r),se("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=he({},r,{value:void 0}),se("invalid",t);break;case"textarea":iu(t,r),s=Oa(t,r),se("invalid",t);break;default:s=r}Ga(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var c=a[i];i==="style"?Kh(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Wh(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&ms(t,c):typeof c=="number"&&ms(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ps.hasOwnProperty(i)?c!=null&&i==="onScroll"&&se("scroll",t):c!=null&&Vl(t,i,c,o))}switch(n){case"input":Ys(t),su(t,r,!1);break;case"textarea":Ys(t),ou(t);break;case"option":r.value!=null&&t.setAttribute("value",""+hn(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?gr(t,!!r.multiple,i,!1):r.defaultValue!=null&&gr(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Bi)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ne(e),null;case 6:if(t&&e.stateNode!=null)vp(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(_(166));if(n=Mn(Ts.current),Mn(Tt.current),oi(e)){if(r=e.stateNode,n=e.memoizedProps,r[kt]=e,(i=r.nodeValue!==n)&&(t=Qe,t!==null))switch(t.tag){case 3:ii(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ii(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[kt]=e,e.stateNode=r}return Ne(e),null;case 13:if(ie(le),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ae&&Ke!==null&&e.mode&1&&!(e.flags&128))If(),Cr(),e.flags|=98560,i=!1;else if(i=oi(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(_(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(_(317));i[kt]=e}else Cr(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ne(e),i=!1}else mt!==null&&(wl(mt),mt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||le.current&1?be===0&&(be=3):bc())),e.updateQueue!==null&&(e.flags|=4),Ne(e),null);case 4:return Pr(),hl(t,e),t===null&&bs(e.stateNode.containerInfo),Ne(e),null;case 10:return ic(e.type._context),Ne(e),null;case 17:return Ue(e.type)&&Hi(),Ne(e),null;case 19:if(ie(le),i=e.memoizedState,i===null)return Ne(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)$r(i,!1);else{if(be!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Qi(t),o!==null){for(e.flags|=128,$r(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ne(le,le.current&1|2),e.child}t=t.sibling}i.tail!==null&&ve()>Nr&&(e.flags|=128,r=!0,$r(i,!1),e.lanes=4194304)}else{if(!r)if(t=Qi(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),$r(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!ae)return Ne(e),null}else 2*ve()-i.renderingStartTime>Nr&&n!==1073741824&&(e.flags|=128,r=!0,$r(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=ve(),e.sibling=null,n=le.current,ne(le,r?n&1|2:n&1),e):(Ne(e),null);case 22:case 23:return Sc(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?qe&1073741824&&(Ne(e),e.subtreeFlags&6&&(e.flags|=8192)):Ne(e),null;case 24:return null;case 25:return null}throw Error(_(156,e.tag))}function Cx(t,e){switch(tc(e),e.tag){case 1:return Ue(e.type)&&Hi(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Pr(),ie(ze),ie(Le),uc(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return cc(e),null;case 13:if(ie(le),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(_(340));Cr()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ie(le),null;case 4:return Pr(),null;case 10:return ic(e.type._context),null;case 22:case 23:return Sc(),null;case 24:return null;default:return null}}var ci=!1,Ae=!1,Tx=typeof WeakSet=="function"?WeakSet:Set,D=null;function cr(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){pe(t,e,r)}else n.current=null}function fl(t,e,n){try{n()}catch(r){pe(t,e,r)}}var Qu=!1;function Px(t,e){if(Xa=Fi,t=kf(),Zl(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,u=0,h=0,d=t,f=null;t:for(;;){for(var g;d!==n||s!==0&&d.nodeType!==3||(a=o+s),d!==i||r!==0&&d.nodeType!==3||(c=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(g=d.firstChild)!==null;)f=d,d=g;for(;;){if(d===t)break t;if(f===n&&++u===s&&(a=o),f===i&&++h===r&&(c=o),(g=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=g}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ya={focusedElem:t,selectionRange:n},Fi=!1,D=e;D!==null;)if(e=D,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,D=t;else for(;D!==null;){e=D;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var w=v.memoizedProps,b=v.memoizedState,m=e.stateNode,p=m.getSnapshotBeforeUpdate(e.elementType===e.type?w:ft(e.type,w),b);m.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(_(163))}}catch(S){pe(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,D=t;break}D=e.return}return v=Qu,Qu=!1,v}function os(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&fl(e,n,i)}s=s.next}while(s!==r)}}function ko(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function pl(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function yp(t){var e=t.alternate;e!==null&&(t.alternate=null,yp(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[kt],delete e[js],delete e[el],delete e[cx],delete e[ux])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function wp(t){return t.tag===5||t.tag===3||t.tag===4}function Xu(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||wp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ml(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Bi));else if(r!==4&&(t=t.child,t!==null))for(ml(t,e,n),t=t.sibling;t!==null;)ml(t,e,n),t=t.sibling}function gl(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(gl(t,e,n),t=t.sibling;t!==null;)gl(t,e,n),t=t.sibling}var Ce=null,pt=!1;function $t(t,e,n){for(n=n.child;n!==null;)Sp(t,e,n),n=n.sibling}function Sp(t,e,n){if(Ct&&typeof Ct.onCommitFiberUnmount=="function")try{Ct.onCommitFiberUnmount(mo,n)}catch{}switch(n.tag){case 5:Ae||cr(n,e);case 6:var r=Ce,s=pt;Ce=null,$t(t,e,n),Ce=r,pt=s,Ce!==null&&(pt?(t=Ce,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ce.removeChild(n.stateNode));break;case 18:Ce!==null&&(pt?(t=Ce,n=n.stateNode,t.nodeType===8?ta(t.parentNode,n):t.nodeType===1&&ta(t,n),ys(t)):ta(Ce,n.stateNode));break;case 4:r=Ce,s=pt,Ce=n.stateNode.containerInfo,pt=!0,$t(t,e,n),Ce=r,pt=s;break;case 0:case 11:case 14:case 15:if(!Ae&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&fl(n,e,o),s=s.next}while(s!==r)}$t(t,e,n);break;case 1:if(!Ae&&(cr(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){pe(n,e,a)}$t(t,e,n);break;case 21:$t(t,e,n);break;case 22:n.mode&1?(Ae=(r=Ae)||n.memoizedState!==null,$t(t,e,n),Ae=r):$t(t,e,n);break;default:$t(t,e,n)}}function Yu(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Tx),e.forEach(function(r){var s=Ix.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function dt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ce=a.stateNode,pt=!1;break e;case 3:Ce=a.stateNode.containerInfo,pt=!0;break e;case 4:Ce=a.stateNode.containerInfo,pt=!0;break e}a=a.return}if(Ce===null)throw Error(_(160));Sp(i,o,s),Ce=null,pt=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){pe(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)bp(e,t),e=e.sibling}function bp(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(dt(e,t),yt(t),r&4){try{os(3,t,t.return),ko(3,t)}catch(w){pe(t,t.return,w)}try{os(5,t,t.return)}catch(w){pe(t,t.return,w)}}break;case 1:dt(e,t),yt(t),r&512&&n!==null&&cr(n,n.return);break;case 5:if(dt(e,t),yt(t),r&512&&n!==null&&cr(n,n.return),t.flags&32){var s=t.stateNode;try{ms(s,"")}catch(w){pe(t,t.return,w)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&zh(s,i),Va(a,o);var u=Va(a,i);for(o=0;o<c.length;o+=2){var h=c[o],d=c[o+1];h==="style"?Kh(s,d):h==="dangerouslySetInnerHTML"?Wh(s,d):h==="children"?ms(s,d):Vl(s,h,d,u)}switch(a){case"input":Da(s,i);break;case"textarea":Uh(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?gr(s,!!i.multiple,g,!1):f!==!!i.multiple&&(i.defaultValue!=null?gr(s,!!i.multiple,i.defaultValue,!0):gr(s,!!i.multiple,i.multiple?[]:"",!1))}s[js]=i}catch(w){pe(t,t.return,w)}}break;case 6:if(dt(e,t),yt(t),r&4){if(t.stateNode===null)throw Error(_(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(w){pe(t,t.return,w)}}break;case 3:if(dt(e,t),yt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ys(e.containerInfo)}catch(w){pe(t,t.return,w)}break;case 4:dt(e,t),yt(t);break;case 13:dt(e,t),yt(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(yc=ve())),r&4&&Yu(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Ae=(u=Ae)||h,dt(e,t),Ae=u):dt(e,t),yt(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(D=t,h=t.child;h!==null;){for(d=D=h;D!==null;){switch(f=D,g=f.child,f.tag){case 0:case 11:case 14:case 15:os(4,f,f.return);break;case 1:cr(f,f.return);var v=f.stateNode;if(typeof v.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(w){pe(r,n,w)}}break;case 5:cr(f,f.return);break;case 22:if(f.memoizedState!==null){Zu(d);continue}}g!==null?(g.return=f,D=g):Zu(d)}h=h.sibling}e:for(h=null,d=t;;){if(d.tag===5){if(h===null){h=d;try{s=d.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=qh("display",o))}catch(w){pe(t,t.return,w)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(w){pe(t,t.return,w)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:dt(e,t),yt(t),r&4&&Yu(t);break;case 21:break;default:dt(e,t),yt(t)}}function yt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(wp(n)){var r=n;break e}n=n.return}throw Error(_(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(ms(s,""),r.flags&=-33);var i=Xu(t);gl(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Xu(t);ml(t,a,o);break;default:throw Error(_(161))}}catch(c){pe(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Ex(t,e,n){D=t,kp(t)}function kp(t,e,n){for(var r=(t.mode&1)!==0;D!==null;){var s=D,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||ci;if(!o){var a=s.alternate,c=a!==null&&a.memoizedState!==null||Ae;a=ci;var u=Ae;if(ci=o,(Ae=c)&&!u)for(D=s;D!==null;)o=D,c=o.child,o.tag===22&&o.memoizedState!==null?ed(s):c!==null?(c.return=o,D=c):ed(s);for(;i!==null;)D=i,kp(i),i=i.sibling;D=s,ci=a,Ae=u}Ju(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,D=i):Ju(t)}}function Ju(t){for(;D!==null;){var e=D;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ae||ko(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ae)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:ft(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Iu(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Iu(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&ys(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(_(163))}Ae||e.flags&512&&pl(e)}catch(f){pe(e,e.return,f)}}if(e===t){D=null;break}if(n=e.sibling,n!==null){n.return=e.return,D=n;break}D=e.return}}function Zu(t){for(;D!==null;){var e=D;if(e===t){D=null;break}var n=e.sibling;if(n!==null){n.return=e.return,D=n;break}D=e.return}}function ed(t){for(;D!==null;){var e=D;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ko(4,e)}catch(c){pe(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){pe(e,s,c)}}var i=e.return;try{pl(e)}catch(c){pe(e,i,c)}break;case 5:var o=e.return;try{pl(e)}catch(c){pe(e,o,c)}}}catch(c){pe(e,e.return,c)}if(e===t){D=null;break}var a=e.sibling;if(a!==null){a.return=e.return,D=a;break}D=e.return}}var Nx=Math.ceil,Ji=Ut.ReactCurrentDispatcher,xc=Ut.ReactCurrentOwner,lt=Ut.ReactCurrentBatchConfig,Y=0,je=null,we=null,Te=0,qe=0,ur=yn(0),be=0,_s=null,Vn=0,jo=0,vc=0,as=null,Be=null,yc=0,Nr=1/0,Et=null,Zi=!1,xl=null,an=null,ui=!1,en=null,eo=0,ls=0,vl=null,Pi=-1,Ei=0;function Oe(){return Y&6?ve():Pi!==-1?Pi:Pi=ve()}function ln(t){return t.mode&1?Y&2&&Te!==0?Te&-Te:hx.transition!==null?(Ei===0&&(Ei=af()),Ei):(t=te,t!==0||(t=window.event,t=t===void 0?16:pf(t.type)),t):1}function xt(t,e,n,r){if(50<ls)throw ls=0,vl=null,Error(_(185));Is(t,n,r),(!(Y&2)||t!==je)&&(t===je&&(!(Y&2)&&(jo|=n),be===4&&Jt(t,Te)),$e(t,r),n===1&&Y===0&&!(e.mode&1)&&(Nr=ve()+500,wo&&wn()))}function $e(t,e){var n=t.callbackNode;hg(t,e);var r=Oi(t,t===je?Te:0);if(r===0)n!==null&&cu(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&cu(n),e===1)t.tag===0?dx(td.bind(null,t)):Lf(td.bind(null,t)),ax(function(){!(Y&6)&&wn()}),n=null;else{switch(lf(r)){case 1:n=$l;break;case 4:n=sf;break;case 16:n=Ii;break;case 536870912:n=of;break;default:n=Ii}n=Ap(n,jp.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function jp(t,e){if(Pi=-1,Ei=0,Y&6)throw Error(_(327));var n=t.callbackNode;if(Sr()&&t.callbackNode!==n)return null;var r=Oi(t,t===je?Te:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=to(t,r);else{e=r;var s=Y;Y|=2;var i=Tp();(je!==t||Te!==e)&&(Et=null,Nr=ve()+500,Dn(t,e));do try{Mx();break}catch(a){Cp(t,a)}while(1);sc(),Ji.current=i,Y=s,we!==null?e=0:(je=null,Te=0,e=be)}if(e!==0){if(e===2&&(s=$a(t),s!==0&&(r=s,e=yl(t,s))),e===1)throw n=_s,Dn(t,0),Jt(t,r),$e(t,ve()),n;if(e===6)Jt(t,r);else{if(s=t.current.alternate,!(r&30)&&!_x(s)&&(e=to(t,r),e===2&&(i=$a(t),i!==0&&(r=i,e=yl(t,i))),e===1))throw n=_s,Dn(t,0),Jt(t,r),$e(t,ve()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(_(345));case 2:Tn(t,Be,Et);break;case 3:if(Jt(t,r),(r&130023424)===r&&(e=yc+500-ve(),10<e)){if(Oi(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Oe(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Za(Tn.bind(null,t,Be,Et),e);break}Tn(t,Be,Et);break;case 4:if(Jt(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-gt(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=ve()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Nx(r/1960))-r,10<r){t.timeoutHandle=Za(Tn.bind(null,t,Be,Et),r);break}Tn(t,Be,Et);break;case 5:Tn(t,Be,Et);break;default:throw Error(_(329))}}}return $e(t,ve()),t.callbackNode===n?jp.bind(null,t):null}function yl(t,e){var n=as;return t.current.memoizedState.isDehydrated&&(Dn(t,e).flags|=256),t=to(t,e),t!==2&&(e=Be,Be=n,e!==null&&wl(e)),t}function wl(t){Be===null?Be=t:Be.push.apply(Be,t)}function _x(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!vt(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Jt(t,e){for(e&=~vc,e&=~jo,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-gt(e),r=1<<n;t[n]=-1,e&=~r}}function td(t){if(Y&6)throw Error(_(327));Sr();var e=Oi(t,0);if(!(e&1))return $e(t,ve()),null;var n=to(t,e);if(t.tag!==0&&n===2){var r=$a(t);r!==0&&(e=r,n=yl(t,r))}if(n===1)throw n=_s,Dn(t,0),Jt(t,e),$e(t,ve()),n;if(n===6)throw Error(_(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Tn(t,Be,Et),$e(t,ve()),null}function wc(t,e){var n=Y;Y|=1;try{return t(e)}finally{Y=n,Y===0&&(Nr=ve()+500,wo&&wn())}}function Bn(t){en!==null&&en.tag===0&&!(Y&6)&&Sr();var e=Y;Y|=1;var n=lt.transition,r=te;try{if(lt.transition=null,te=1,t)return t()}finally{te=r,lt.transition=n,Y=e,!(Y&6)&&wn()}}function Sc(){qe=ur.current,ie(ur)}function Dn(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,ox(n)),we!==null)for(n=we.return;n!==null;){var r=n;switch(tc(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Hi();break;case 3:Pr(),ie(ze),ie(Le),uc();break;case 5:cc(r);break;case 4:Pr();break;case 13:ie(le);break;case 19:ie(le);break;case 10:ic(r.type._context);break;case 22:case 23:Sc()}n=n.return}if(je=t,we=t=cn(t.current,null),Te=qe=e,be=0,_s=null,vc=jo=Vn=0,Be=as=null,An!==null){for(e=0;e<An.length;e++)if(n=An[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}An=null}return t}function Cp(t,e){do{var n=we;try{if(sc(),ji.current=Yi,Xi){for(var r=de.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Xi=!1}if(Gn=0,ke=Se=de=null,is=!1,Ps=0,xc.current=null,n===null||n.return===null){be=1,_s=e,we=null;break}e:{var i=t,o=n.return,a=n,c=e;if(e=Te,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var g=Hu(o);if(g!==null){g.flags&=-257,zu(g,o,a,i,e),g.mode&1&&Bu(i,u,e),e=g,c=u;var v=e.updateQueue;if(v===null){var w=new Set;w.add(c),e.updateQueue=w}else v.add(c);break e}else{if(!(e&1)){Bu(i,u,e),bc();break e}c=Error(_(426))}}else if(ae&&a.mode&1){var b=Hu(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),zu(b,o,a,i,e),nc(Er(c,a));break e}}i=c=Er(c,a),be!==4&&(be=2),as===null?as=[i]:as.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var m=lp(i,c,e);Du(i,m);break e;case 1:a=c;var p=i.type,x=i.stateNode;if(!(i.flags&128)&&(typeof p.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(an===null||!an.has(x)))){i.flags|=65536,e&=-e,i.lanes|=e;var S=cp(i,a,e);Du(i,S);break e}}i=i.return}while(i!==null)}Ep(n)}catch(j){e=j,we===n&&n!==null&&(we=n=n.return);continue}break}while(1)}function Tp(){var t=Ji.current;return Ji.current=Yi,t===null?Yi:t}function bc(){(be===0||be===3||be===2)&&(be=4),je===null||!(Vn&268435455)&&!(jo&268435455)||Jt(je,Te)}function to(t,e){var n=Y;Y|=2;var r=Tp();(je!==t||Te!==e)&&(Et=null,Dn(t,e));do try{Ax();break}catch(s){Cp(t,s)}while(1);if(sc(),Y=n,Ji.current=r,we!==null)throw Error(_(261));return je=null,Te=0,be}function Ax(){for(;we!==null;)Pp(we)}function Mx(){for(;we!==null&&!rg();)Pp(we)}function Pp(t){var e=_p(t.alternate,t,qe);t.memoizedProps=t.pendingProps,e===null?Ep(t):we=e,xc.current=null}function Ep(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Cx(n,e),n!==null){n.flags&=32767,we=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{be=6,we=null;return}}else if(n=jx(n,e,qe),n!==null){we=n;return}if(e=e.sibling,e!==null){we=e;return}we=e=t}while(e!==null);be===0&&(be=5)}function Tn(t,e,n){var r=te,s=lt.transition;try{lt.transition=null,te=1,Lx(t,e,n,r)}finally{lt.transition=s,te=r}return null}function Lx(t,e,n,r){do Sr();while(en!==null);if(Y&6)throw Error(_(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(_(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(fg(t,i),t===je&&(we=je=null,Te=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ui||(ui=!0,Ap(Ii,function(){return Sr(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=lt.transition,lt.transition=null;var o=te;te=1;var a=Y;Y|=4,xc.current=null,Px(t,n),bp(n,t),Zg(Ya),Fi=!!Xa,Ya=Xa=null,t.current=n,Ex(n),sg(),Y=a,te=o,lt.transition=i}else t.current=n;if(ui&&(ui=!1,en=t,eo=s),i=t.pendingLanes,i===0&&(an=null),ag(n.stateNode),$e(t,ve()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Zi)throw Zi=!1,t=xl,xl=null,t;return eo&1&&t.tag!==0&&Sr(),i=t.pendingLanes,i&1?t===vl?ls++:(ls=0,vl=t):ls=0,wn(),null}function Sr(){if(en!==null){var t=lf(eo),e=lt.transition,n=te;try{if(lt.transition=null,te=16>t?16:t,en===null)var r=!1;else{if(t=en,en=null,eo=0,Y&6)throw Error(_(331));var s=Y;for(Y|=4,D=t.current;D!==null;){var i=D,o=i.child;if(D.flags&16){var a=i.deletions;if(a!==null){for(var c=0;c<a.length;c++){var u=a[c];for(D=u;D!==null;){var h=D;switch(h.tag){case 0:case 11:case 15:os(8,h,i)}var d=h.child;if(d!==null)d.return=h,D=d;else for(;D!==null;){h=D;var f=h.sibling,g=h.return;if(yp(h),h===u){D=null;break}if(f!==null){f.return=g,D=f;break}D=g}}}var v=i.alternate;if(v!==null){var w=v.child;if(w!==null){v.child=null;do{var b=w.sibling;w.sibling=null,w=b}while(w!==null)}}D=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,D=o;else e:for(;D!==null;){if(i=D,i.flags&2048)switch(i.tag){case 0:case 11:case 15:os(9,i,i.return)}var m=i.sibling;if(m!==null){m.return=i.return,D=m;break e}D=i.return}}var p=t.current;for(D=p;D!==null;){o=D;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,D=x;else e:for(o=p;D!==null;){if(a=D,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:ko(9,a)}}catch(j){pe(a,a.return,j)}if(a===o){D=null;break e}var S=a.sibling;if(S!==null){S.return=a.return,D=S;break e}D=a.return}}if(Y=s,wn(),Ct&&typeof Ct.onPostCommitFiberRoot=="function")try{Ct.onPostCommitFiberRoot(mo,t)}catch{}r=!0}return r}finally{te=n,lt.transition=e}}return!1}function nd(t,e,n){e=Er(n,e),e=lp(t,e,1),t=on(t,e,1),e=Oe(),t!==null&&(Is(t,1,e),$e(t,e))}function pe(t,e,n){if(t.tag===3)nd(t,t,n);else for(;e!==null;){if(e.tag===3){nd(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(an===null||!an.has(r))){t=Er(n,t),t=cp(e,t,1),e=on(e,t,1),t=Oe(),e!==null&&(Is(e,1,t),$e(e,t));break}}e=e.return}}function Rx(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Oe(),t.pingedLanes|=t.suspendedLanes&n,je===t&&(Te&n)===n&&(be===4||be===3&&(Te&130023424)===Te&&500>ve()-yc?Dn(t,0):vc|=n),$e(t,e)}function Np(t,e){e===0&&(t.mode&1?(e=ei,ei<<=1,!(ei&130023424)&&(ei=4194304)):e=1);var n=Oe();t=Bt(t,e),t!==null&&(Is(t,e,n),$e(t,n))}function Dx(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Np(t,n)}function Ix(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(_(314))}r!==null&&r.delete(e),Np(t,n)}var _p;_p=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||ze.current)He=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return He=!1,kx(t,e,n);He=!!(t.flags&131072)}else He=!1,ae&&e.flags&1048576&&Rf(e,$i,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ti(t,e),t=e.pendingProps;var s=jr(e,Le.current);wr(e,n),s=hc(null,e,r,t,s,n);var i=fc();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ue(r)?(i=!0,zi(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,ac(e),s.updater=bo,e.stateNode=s,s._reactInternals=e,ol(e,r,t,n),e=cl(null,e,r,!0,i,n)):(e.tag=0,ae&&i&&ec(e),Ie(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ti(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=Fx(r),t=ft(r,t),s){case 0:e=ll(null,e,r,t,n);break e;case 1:e=Wu(null,e,r,t,n);break e;case 11:e=Uu(null,e,r,t,n);break e;case 14:e=$u(null,e,r,ft(r.type,t),n);break e}throw Error(_(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ft(r,s),ll(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ft(r,s),Wu(t,e,r,s,n);case 3:e:{if(fp(e),t===null)throw Error(_(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Vf(t,e),Ki(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Er(Error(_(423)),e),e=qu(t,e,r,n,s);break e}else if(r!==s){s=Er(Error(_(424)),e),e=qu(t,e,r,n,s);break e}else for(Ke=sn(e.stateNode.containerInfo.firstChild),Qe=e,ae=!0,mt=null,n=Ff(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Cr(),r===s){e=Ht(t,e,n);break e}Ie(t,e,r,n)}e=e.child}return e;case 5:return Bf(e),t===null&&rl(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Ja(r,s)?o=null:i!==null&&Ja(r,i)&&(e.flags|=32),hp(t,e),Ie(t,e,o,n),e.child;case 6:return t===null&&rl(e),null;case 13:return pp(t,e,n);case 4:return lc(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Tr(e,null,r,n):Ie(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ft(r,s),Uu(t,e,r,s,n);case 7:return Ie(t,e,e.pendingProps,n),e.child;case 8:return Ie(t,e,e.pendingProps.children,n),e.child;case 12:return Ie(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,ne(Wi,r._currentValue),r._currentValue=o,i!==null)if(vt(i.value,o)){if(i.children===s.children&&!ze.current){e=Ht(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=It(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),sl(i.return,n,e),a.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(_(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),sl(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Ie(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,wr(e,n),s=ct(s),r=r(s),e.flags|=1,Ie(t,e,r,n),e.child;case 14:return r=e.type,s=ft(r,e.pendingProps),s=ft(r.type,s),$u(t,e,r,s,n);case 15:return up(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ft(r,s),Ti(t,e),e.tag=1,Ue(r)?(t=!0,zi(e)):t=!1,wr(e,n),ap(e,r,s),ol(e,r,s,n),cl(null,e,r,!0,t,n);case 19:return mp(t,e,n);case 22:return dp(t,e,n)}throw Error(_(156,e.tag))};function Ap(t,e){return rf(t,e)}function Ox(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function at(t,e,n,r){return new Ox(t,e,n,r)}function kc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Fx(t){if(typeof t=="function")return kc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Hl)return 11;if(t===zl)return 14}return 2}function cn(t,e){var n=t.alternate;return n===null?(n=at(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ni(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")kc(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case er:return In(n.children,s,i,e);case Bl:o=8,s|=8;break;case _a:return t=at(12,n,e,s|2),t.elementType=_a,t.lanes=i,t;case Aa:return t=at(13,n,e,s),t.elementType=Aa,t.lanes=i,t;case Ma:return t=at(19,n,e,s),t.elementType=Ma,t.lanes=i,t;case Vh:return Co(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Fh:o=10;break e;case Gh:o=9;break e;case Hl:o=11;break e;case zl:o=14;break e;case Kt:o=16,r=null;break e}throw Error(_(130,t==null?t:typeof t,""))}return e=at(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function In(t,e,n,r){return t=at(7,t,r,e),t.lanes=n,t}function Co(t,e,n,r){return t=at(22,t,r,e),t.elementType=Vh,t.lanes=n,t.stateNode={isHidden:!1},t}function ca(t,e,n){return t=at(6,t,null,e),t.lanes=n,t}function ua(t,e,n){return e=at(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Gx(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Uo(0),this.expirationTimes=Uo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Uo(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function jc(t,e,n,r,s,i,o,a,c){return t=new Gx(t,e,n,a,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=at(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ac(i),t}function Vx(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Zn,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Mp(t){if(!t)return fn;t=t._reactInternals;e:{if(Qn(t)!==t||t.tag!==1)throw Error(_(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ue(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(_(171))}if(t.tag===1){var n=t.type;if(Ue(n))return Mf(t,n,e)}return e}function Lp(t,e,n,r,s,i,o,a,c){return t=jc(n,r,!0,t,s,i,o,a,c),t.context=Mp(null),n=t.current,r=Oe(),s=ln(n),i=It(r,s),i.callback=e??null,on(n,i,s),t.current.lanes=s,Is(t,s,r),$e(t,r),t}function To(t,e,n,r){var s=e.current,i=Oe(),o=ln(s);return n=Mp(n),e.context===null?e.context=n:e.pendingContext=n,e=It(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=on(s,e,o),t!==null&&(xt(t,s,o,i),ki(t,s,o)),o}function no(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function rd(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Cc(t,e){rd(t,e),(t=t.alternate)&&rd(t,e)}function Bx(){return null}var Rp=typeof reportError=="function"?reportError:function(t){console.error(t)};function Tc(t){this._internalRoot=t}Po.prototype.render=Tc.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(_(409));To(t,e,null,null)};Po.prototype.unmount=Tc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Bn(function(){To(null,t,null,null)}),e[Vt]=null}};function Po(t){this._internalRoot=t}Po.prototype.unstable_scheduleHydration=function(t){if(t){var e=df();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Yt.length&&e!==0&&e<Yt[n].priority;n++);Yt.splice(n,0,t),n===0&&ff(t)}};function Pc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Eo(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function sd(){}function Hx(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=no(o);i.call(u)}}var o=Lp(e,r,t,0,null,!1,!1,"",sd);return t._reactRootContainer=o,t[Vt]=o.current,bs(t.nodeType===8?t.parentNode:t),Bn(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var u=no(c);a.call(u)}}var c=jc(t,0,!1,null,null,!1,!1,"",sd);return t._reactRootContainer=c,t[Vt]=c.current,bs(t.nodeType===8?t.parentNode:t),Bn(function(){To(e,c,n,r)}),c}function No(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var c=no(o);a.call(c)}}To(e,o,t,s)}else o=Hx(n,e,t,s,r);return no(o)}cf=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Yr(e.pendingLanes);n!==0&&(Wl(e,n|1),$e(e,ve()),!(Y&6)&&(Nr=ve()+500,wn()))}break;case 13:Bn(function(){var r=Bt(t,1);if(r!==null){var s=Oe();xt(r,t,1,s)}}),Cc(t,1)}};ql=function(t){if(t.tag===13){var e=Bt(t,134217728);if(e!==null){var n=Oe();xt(e,t,134217728,n)}Cc(t,134217728)}};uf=function(t){if(t.tag===13){var e=ln(t),n=Bt(t,e);if(n!==null){var r=Oe();xt(n,t,e,r)}Cc(t,e)}};df=function(){return te};hf=function(t,e){var n=te;try{return te=t,e()}finally{te=n}};Ha=function(t,e,n){switch(e){case"input":if(Da(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=yo(r);if(!s)throw Error(_(90));Hh(r),Da(r,s)}}}break;case"textarea":Uh(t,n);break;case"select":e=n.value,e!=null&&gr(t,!!n.multiple,e,!1)}};Yh=wc;Jh=Bn;var zx={usingClientEntryPoint:!1,Events:[Fs,sr,yo,Qh,Xh,wc]},Wr={findFiberByHostInstance:_n,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Ux={bundleType:Wr.bundleType,version:Wr.version,rendererPackageName:Wr.rendererPackageName,rendererConfig:Wr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ut.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=tf(t),t===null?null:t.stateNode},findFiberByHostInstance:Wr.findFiberByHostInstance||Bx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var di=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!di.isDisabled&&di.supportsFiber)try{mo=di.inject(Ux),Ct=di}catch{}}Je.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zx;Je.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Pc(e))throw Error(_(200));return Vx(t,e,null,n)};Je.createRoot=function(t,e){if(!Pc(t))throw Error(_(299));var n=!1,r="",s=Rp;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=jc(t,1,!1,null,null,n,!1,r,s),t[Vt]=e.current,bs(t.nodeType===8?t.parentNode:t),new Tc(e)};Je.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(_(188)):(t=Object.keys(t).join(","),Error(_(268,t)));return t=tf(e),t=t===null?null:t.stateNode,t};Je.flushSync=function(t){return Bn(t)};Je.hydrate=function(t,e,n){if(!Eo(e))throw Error(_(200));return No(null,t,e,!0,n)};Je.hydrateRoot=function(t,e,n){if(!Pc(t))throw Error(_(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=Rp;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Lp(e,null,t,1,n??null,s,!1,i,o),t[Vt]=e.current,bs(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Po(e)};Je.render=function(t,e,n){if(!Eo(e))throw Error(_(200));return No(null,t,e,!1,n)};Je.unmountComponentAtNode=function(t){if(!Eo(t))throw Error(_(40));return t._reactRootContainer?(Bn(function(){No(null,null,t,!1,function(){t._reactRootContainer=null,t[Vt]=null})}),!0):!1};Je.unstable_batchedUpdates=wc;Je.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Eo(n))throw Error(_(200));if(t==null||t._reactInternals===void 0)throw Error(_(38));return No(t,e,n,!1,r)};Je.version="18.3.1-next-f1338f8080-20240426";function Dp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Dp)}catch(t){console.error(t)}}Dp(),Rh.exports=Je;var $x=Rh.exports,id=$x;Ea.createRoot=id.createRoot,Ea.hydrateRoot=id.hydrateRoot;const Wx="modulepreload",qx=function(t){return"/cat-tetris/"+t},od={},Ip=function(e,n,r){if(!n||n.length===0)return e();const s=document.getElementsByTagName("link");return Promise.all(n.map(i=>{if(i=qx(i),i in od)return;od[i]=!0;const o=i.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!r)for(let h=s.length-1;h>=0;h--){const d=s[h];if(d.href===i&&(!o||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${a}`))return;const u=document.createElement("link");if(u.rel=o?"stylesheet":Wx,o||(u.as="script",u.crossOrigin=""),u.href=i,document.head.appendChild(u),o)return new Promise((h,d)=>{u.addEventListener("load",h),u.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>e()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})},Op=y.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),_o=y.createContext({}),Ao=y.createContext(null),Mo=typeof document<"u",Ec=Mo?y.useLayoutEffect:y.useEffect,Fp=y.createContext({strict:!1}),Nc=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),Kx="framerAppearId",Gp="data-"+Nc(Kx);function Qx(t,e,n,r){const{visualElement:s}=y.useContext(_o),i=y.useContext(Fp),o=y.useContext(Ao),a=y.useContext(Op).reducedMotion,c=y.useRef();r=r||i.renderer,!c.current&&r&&(c.current=r(t,{visualState:e,parent:s,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:a}));const u=c.current;y.useInsertionEffect(()=>{u&&u.update(n,o)});const h=y.useRef(!!(n[Gp]&&!window.HandoffComplete));return Ec(()=>{u&&(u.render(),h.current&&u.animationState&&u.animationState.animateChanges())}),y.useEffect(()=>{u&&(u.updateFeatures(),!h.current&&u.animationState&&u.animationState.animateChanges(),h.current&&(h.current=!1,window.HandoffComplete=!0))}),u}function dr(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function Xx(t,e,n){return y.useCallback(r=>{r&&t.mount&&t.mount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):dr(n)&&(n.current=r))},[e])}function As(t){return typeof t=="string"||Array.isArray(t)}function Lo(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const _c=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Ac=["initial",..._c];function Ro(t){return Lo(t.animate)||Ac.some(e=>As(t[e]))}function Vp(t){return!!(Ro(t)||t.variants)}function Yx(t,e){if(Ro(t)){const{initial:n,animate:r}=t;return{initial:n===!1||As(n)?n:void 0,animate:As(r)?r:void 0}}return t.inherit!==!1?e:{}}function Jx(t){const{initial:e,animate:n}=Yx(t,y.useContext(_o));return y.useMemo(()=>({initial:e,animate:n}),[ad(e),ad(n)])}function ad(t){return Array.isArray(t)?t.join(" "):t}const ld={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ms={};for(const t in ld)Ms[t]={isEnabled:e=>ld[t].some(n=>!!e[n])};function Zx(t){for(const e in t)Ms[e]={...Ms[e],...t[e]}}const Mc=y.createContext({}),Bp=y.createContext({}),ev=Symbol.for("motionComponentSymbol");function tv({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:s}){t&&Zx(t);function i(a,c){let u;const h={...y.useContext(Op),...a,layoutId:nv(a)},{isStatic:d}=h,f=Jx(a),g=r(a,d);if(!d&&Mo){f.visualElement=Qx(s,g,h,e);const v=y.useContext(Bp),w=y.useContext(Fp).strict;f.visualElement&&(u=f.visualElement.loadFeatures(h,w,t,v))}return y.createElement(_o.Provider,{value:f},u&&f.visualElement?y.createElement(u,{visualElement:f.visualElement,...h}):null,n(s,a,Xx(g,f.visualElement,c),g,d,f.visualElement))}const o=y.forwardRef(i);return o[ev]=s,o}function nv({layoutId:t}){const e=y.useContext(Mc).id;return e&&t!==void 0?e+"-"+t:t}function rv(t){function e(r,s={}){return tv(t(r,s))}if(typeof Proxy>"u")return e;const n=new Map;return new Proxy(e,{get:(r,s)=>(n.has(s)||n.set(s,e(s)),n.get(s))})}const sv=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Lc(t){return typeof t!="string"||t.includes("-")?!1:!!(sv.indexOf(t)>-1||/[A-Z]/.test(t))}const ro={};function iv(t){Object.assign(ro,t)}const Vs=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Xn=new Set(Vs);function Hp(t,{layout:e,layoutId:n}){return Xn.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!ro[t]||t==="opacity")}const We=t=>!!(t&&t.getVelocity),ov={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},av=Vs.length;function lv(t,{enableHardwareAcceleration:e=!0,allowTransformNone:n=!0},r,s){let i="";for(let o=0;o<av;o++){const a=Vs[o];if(t[a]!==void 0){const c=ov[a]||a;i+=`${c}(${t[a]}) `}}return e&&!t.z&&(i+="translateZ(0)"),i=i.trim(),s?i=s(t,r?"":i):n&&r&&(i="none"),i}const zp=t=>e=>typeof e=="string"&&e.startsWith(t),Up=zp("--"),Sl=zp("var(--"),cv=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,uv=(t,e)=>e&&typeof t=="number"?e.transform(t):t,pn=(t,e,n)=>Math.min(Math.max(n,t),e),Yn={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},cs={...Yn,transform:t=>pn(0,1,t)},hi={...Yn,default:1},us=t=>Math.round(t*1e5)/1e5,Do=/(-)?([\d]*\.?[\d])+/g,$p=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,dv=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Bs(t){return typeof t=="string"}const Hs=t=>({test:e=>Bs(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Wt=Hs("deg"),Pt=Hs("%"),U=Hs("px"),hv=Hs("vh"),fv=Hs("vw"),cd={...Pt,parse:t=>Pt.parse(t)/100,transform:t=>Pt.transform(t*100)},ud={...Yn,transform:Math.round},Wp={borderWidth:U,borderTopWidth:U,borderRightWidth:U,borderBottomWidth:U,borderLeftWidth:U,borderRadius:U,radius:U,borderTopLeftRadius:U,borderTopRightRadius:U,borderBottomRightRadius:U,borderBottomLeftRadius:U,width:U,maxWidth:U,height:U,maxHeight:U,size:U,top:U,right:U,bottom:U,left:U,padding:U,paddingTop:U,paddingRight:U,paddingBottom:U,paddingLeft:U,margin:U,marginTop:U,marginRight:U,marginBottom:U,marginLeft:U,rotate:Wt,rotateX:Wt,rotateY:Wt,rotateZ:Wt,scale:hi,scaleX:hi,scaleY:hi,scaleZ:hi,skew:Wt,skewX:Wt,skewY:Wt,distance:U,translateX:U,translateY:U,translateZ:U,x:U,y:U,z:U,perspective:U,transformPerspective:U,opacity:cs,originX:cd,originY:cd,originZ:U,zIndex:ud,fillOpacity:cs,strokeOpacity:cs,numOctaves:ud};function Rc(t,e,n,r){const{style:s,vars:i,transform:o,transformOrigin:a}=t;let c=!1,u=!1,h=!0;for(const d in e){const f=e[d];if(Up(d)){i[d]=f;continue}const g=Wp[d],v=uv(f,g);if(Xn.has(d)){if(c=!0,o[d]=v,!h)continue;f!==(g.default||0)&&(h=!1)}else d.startsWith("origin")?(u=!0,a[d]=v):s[d]=v}if(e.transform||(c||r?s.transform=lv(t.transform,n,h,r):s.transform&&(s.transform="none")),u){const{originX:d="50%",originY:f="50%",originZ:g=0}=a;s.transformOrigin=`${d} ${f} ${g}`}}const Dc=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function qp(t,e,n){for(const r in e)!We(e[r])&&!Hp(r,n)&&(t[r]=e[r])}function pv({transformTemplate:t},e,n){return y.useMemo(()=>{const r=Dc();return Rc(r,e,{enableHardwareAcceleration:!n},t),Object.assign({},r.vars,r.style)},[e])}function mv(t,e,n){const r=t.style||{},s={};return qp(s,r,t),Object.assign(s,pv(t,e,n)),t.transformValues?t.transformValues(s):s}function gv(t,e,n){const r={},s=mv(t,e,n);return t.drag&&t.dragListener!==!1&&(r.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=s,r}const xv=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function so(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||xv.has(t)}let Kp=t=>!so(t);function vv(t){t&&(Kp=e=>e.startsWith("on")?!so(e):t(e))}try{vv(require("@emotion/is-prop-valid").default)}catch{}function yv(t,e,n){const r={};for(const s in t)s==="values"&&typeof t.values=="object"||(Kp(s)||n===!0&&so(s)||!e&&!so(s)||t.draggable&&s.startsWith("onDrag"))&&(r[s]=t[s]);return r}function dd(t,e,n){return typeof t=="string"?t:U.transform(e+n*t)}function wv(t,e,n){const r=dd(e,t.x,t.width),s=dd(n,t.y,t.height);return`${r} ${s}`}const Sv={offset:"stroke-dashoffset",array:"stroke-dasharray"},bv={offset:"strokeDashoffset",array:"strokeDasharray"};function kv(t,e,n=1,r=0,s=!0){t.pathLength=1;const i=s?Sv:bv;t[i.offset]=U.transform(-r);const o=U.transform(e),a=U.transform(n);t[i.array]=`${o} ${a}`}function Ic(t,{attrX:e,attrY:n,attrScale:r,originX:s,originY:i,pathLength:o,pathSpacing:a=1,pathOffset:c=0,...u},h,d,f){if(Rc(t,u,h,f),d){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:g,style:v,dimensions:w}=t;g.transform&&(w&&(v.transform=g.transform),delete g.transform),w&&(s!==void 0||i!==void 0||v.transform)&&(v.transformOrigin=wv(w,s!==void 0?s:.5,i!==void 0?i:.5)),e!==void 0&&(g.x=e),n!==void 0&&(g.y=n),r!==void 0&&(g.scale=r),o!==void 0&&kv(g,o,a,c,!1)}const Qp=()=>({...Dc(),attrs:{}}),Oc=t=>typeof t=="string"&&t.toLowerCase()==="svg";function jv(t,e,n,r){const s=y.useMemo(()=>{const i=Qp();return Ic(i,e,{enableHardwareAcceleration:!1},Oc(r),t.transformTemplate),{...i.attrs,style:{...i.style}}},[e]);if(t.style){const i={};qp(i,t.style,t),s.style={...i,...s.style}}return s}function Cv(t=!1){return(n,r,s,{latestValues:i},o)=>{const c=(Lc(n)?jv:gv)(r,i,o,n),h={...yv(r,typeof n=="string",t),...c,ref:s},{children:d}=r,f=y.useMemo(()=>We(d)?d.get():d,[d]);return y.createElement(n,{...h,children:f})}}function Xp(t,{style:e,vars:n},r,s){Object.assign(t.style,e,s&&s.getProjectionStyles(r));for(const i in n)t.style.setProperty(i,n[i])}const Yp=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Jp(t,e,n,r){Xp(t,e,void 0,r);for(const s in e.attrs)t.setAttribute(Yp.has(s)?s:Nc(s),e.attrs[s])}function Fc(t,e){const{style:n}=t,r={};for(const s in n)(We(n[s])||e.style&&We(e.style[s])||Hp(s,t))&&(r[s]=n[s]);return r}function Zp(t,e){const n=Fc(t,e);for(const r in t)if(We(t[r])||We(e[r])){const s=Vs.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[s]=t[r]}return n}function Gc(t,e,n,r={},s={}){return typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,s)),typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,s)),e}function em(t){const e=y.useRef(null);return e.current===null&&(e.current=t()),e.current}const io=t=>Array.isArray(t),Tv=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),Pv=t=>io(t)?t[t.length-1]||0:t;function _i(t){const e=We(t)?t.get():t;return Tv(e)?e.toValue():e}function Ev({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},r,s,i){const o={latestValues:Nv(r,s,i,t),renderState:e()};return n&&(o.mount=a=>n(r,a,o)),o}const tm=t=>(e,n)=>{const r=y.useContext(_o),s=y.useContext(Ao),i=()=>Ev(t,e,r,s);return n?i():em(i)};function Nv(t,e,n,r){const s={},i=r(t,{});for(const f in i)s[f]=_i(i[f]);let{initial:o,animate:a}=t;const c=Ro(t),u=Vp(t);e&&u&&!c&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let h=n?n.initial===!1:!1;h=h||o===!1;const d=h?a:o;return d&&typeof d!="boolean"&&!Lo(d)&&(Array.isArray(d)?d:[d]).forEach(g=>{const v=Gc(t,g);if(!v)return;const{transitionEnd:w,transition:b,...m}=v;for(const p in m){let x=m[p];if(Array.isArray(x)){const S=h?x.length-1:0;x=x[S]}x!==null&&(s[p]=x)}for(const p in w)s[p]=w[p]}),s}const me=t=>t;class hd{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const n=this.order.indexOf(e);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function _v(t){let e=new hd,n=new hd,r=0,s=!1,i=!1;const o=new WeakSet,a={schedule:(c,u=!1,h=!1)=>{const d=h&&s,f=d?e:n;return u&&o.add(c),f.add(c)&&d&&s&&(r=e.order.length),c},cancel:c=>{n.remove(c),o.delete(c)},process:c=>{if(s){i=!0;return}if(s=!0,[e,n]=[n,e],n.clear(),r=e.order.length,r)for(let u=0;u<r;u++){const h=e.order[u];h(c),o.has(h)&&(a.schedule(h),t())}s=!1,i&&(i=!1,a.process(c))}};return a}const fi=["prepare","read","update","preRender","render","postRender"],Av=40;function Mv(t,e){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=fi.reduce((d,f)=>(d[f]=_v(()=>n=!0),d),{}),o=d=>i[d].process(s),a=()=>{const d=performance.now();n=!1,s.delta=r?1e3/60:Math.max(Math.min(d-s.timestamp,Av),1),s.timestamp=d,s.isProcessing=!0,fi.forEach(o),s.isProcessing=!1,n&&e&&(r=!1,t(a))},c=()=>{n=!0,r=!0,s.isProcessing||t(a)};return{schedule:fi.reduce((d,f)=>{const g=i[f];return d[f]=(v,w=!1,b=!1)=>(n||c(),g.schedule(v,w,b)),d},{}),cancel:d=>fi.forEach(f=>i[f].cancel(d)),state:s,steps:i}}const{schedule:re,cancel:zt,state:_e,steps:da}=Mv(typeof requestAnimationFrame<"u"?requestAnimationFrame:me,!0),Lv={useVisualState:tm({scrapeMotionValuesFromProps:Zp,createRenderState:Qp,onMount:(t,e,{renderState:n,latestValues:r})=>{re.read(()=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),re.render(()=>{Ic(n,r,{enableHardwareAcceleration:!1},Oc(e.tagName),t.transformTemplate),Jp(e,n)})}})},Rv={useVisualState:tm({scrapeMotionValuesFromProps:Fc,createRenderState:Dc})};function Dv(t,{forwardMotionProps:e=!1},n,r){return{...Lc(t)?Lv:Rv,preloadedFeatures:n,useRender:Cv(e),createVisualElement:r,Component:t}}function Lt(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}const nm=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function Io(t,e="page"){return{point:{x:t[e+"X"],y:t[e+"Y"]}}}const Iv=t=>e=>nm(e)&&t(e,Io(e));function Ot(t,e,n,r){return Lt(t,e,Iv(n),r)}const Ov=(t,e)=>n=>e(t(n)),un=(...t)=>t.reduce(Ov);function rm(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const fd=rm("dragHorizontal"),pd=rm("dragVertical");function sm(t){let e=!1;if(t==="y")e=pd();else if(t==="x")e=fd();else{const n=fd(),r=pd();n&&r?e=()=>{n(),r()}:(n&&n(),r&&r())}return e}function im(){const t=sm(!0);return t?(t(),!1):!0}class Sn{constructor(e){this.isMounted=!1,this.node=e}update(){}}function md(t,e){const n="pointer"+(e?"enter":"leave"),r="onHover"+(e?"Start":"End"),s=(i,o)=>{if(i.pointerType==="touch"||im())return;const a=t.getProps();t.animationState&&a.whileHover&&t.animationState.setActive("whileHover",e),a[r]&&re.update(()=>a[r](i,o))};return Ot(t.current,n,s,{passive:!t.getProps()[r]})}class Fv extends Sn{mount(){this.unmount=un(md(this.node,!0),md(this.node,!1))}unmount(){}}class Gv extends Sn{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=un(Lt(this.node.current,"focus",()=>this.onFocus()),Lt(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const om=(t,e)=>e?t===e?!0:om(t,e.parentElement):!1;function ha(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,Io(n))}class Vv extends Sn{constructor(){super(...arguments),this.removeStartListeners=me,this.removeEndListeners=me,this.removeAccessibleListeners=me,this.startPointerPress=(e,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),i=Ot(window,"pointerup",(a,c)=>{if(!this.checkPressEnd())return;const{onTap:u,onTapCancel:h,globalTapTarget:d}=this.node.getProps();re.update(()=>{!d&&!om(this.node.current,a.target)?h&&h(a,c):u&&u(a,c)})},{passive:!(r.onTap||r.onPointerUp)}),o=Ot(window,"pointercancel",(a,c)=>this.cancelPress(a,c),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=un(i,o),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=i=>{if(i.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||ha("up",(c,u)=>{const{onTap:h}=this.node.getProps();h&&re.update(()=>h(c,u))})};this.removeEndListeners(),this.removeEndListeners=Lt(this.node.current,"keyup",o),ha("down",(a,c)=>{this.startPress(a,c)})},n=Lt(this.node.current,"keydown",e),r=()=>{this.isPressing&&ha("cancel",(i,o)=>this.cancelPress(i,o))},s=Lt(this.node.current,"blur",r);this.removeAccessibleListeners=un(n,s)}}startPress(e,n){this.isPressing=!0;const{onTapStart:r,whileTap:s}=this.node.getProps();s&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&re.update(()=>r(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!im()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&re.update(()=>r(e,n))}mount(){const e=this.node.getProps(),n=Ot(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=Lt(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=un(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const bl=new WeakMap,fa=new WeakMap,Bv=t=>{const e=bl.get(t.target);e&&e(t)},Hv=t=>{t.forEach(Bv)};function zv({root:t,...e}){const n=t||document;fa.has(n)||fa.set(n,{});const r=fa.get(n),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(Hv,{root:t,...e})),r[s]}function Uv(t,e,n){const r=zv(e);return bl.set(t,n),r.observe(t),()=>{bl.delete(t),r.unobserve(t)}}const $v={some:0,all:1};class Wv extends Sn{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:i}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:$v[s]},a=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,i&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:h,onViewportLeave:d}=this.node.getProps(),f=u?h:d;f&&f(c)};return Uv(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(qv(e,n))&&this.startObserver()}unmount(){}}function qv({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const Kv={inView:{Feature:Wv},tap:{Feature:Vv},focus:{Feature:Gv},hover:{Feature:Fv}};function am(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function Qv(t){const e={};return t.values.forEach((n,r)=>e[r]=n.get()),e}function Xv(t){const e={};return t.values.forEach((n,r)=>e[r]=n.getVelocity()),e}function Oo(t,e,n){const r=t.getProps();return Gc(r,e,n!==void 0?n:r.custom,Qv(t),Xv(t))}let Yv=me,Vc=me;const dn=t=>t*1e3,Ft=t=>t/1e3,Jv={current:!1},lm=t=>Array.isArray(t)&&typeof t[0]=="number";function cm(t){return!!(!t||typeof t=="string"&&um[t]||lm(t)||Array.isArray(t)&&t.every(cm))}const Zr=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,um={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Zr([0,.65,.55,1]),circOut:Zr([.55,0,1,.45]),backIn:Zr([.31,.01,.66,-.59]),backOut:Zr([.33,1.53,.69,.99])};function dm(t){if(t)return lm(t)?Zr(t):Array.isArray(t)?t.map(dm):um[t]}function Zv(t,e,n,{delay:r=0,duration:s,repeat:i=0,repeatType:o="loop",ease:a,times:c}={}){const u={[e]:n};c&&(u.offset=c);const h=dm(a);return Array.isArray(h)&&(u.easing=h),t.animate(u,{delay:r,duration:s,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"})}function ey(t,{repeat:e,repeatType:n="loop"}){const r=e&&n!=="loop"&&e%2===1?0:t.length-1;return t[r]}const hm=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,ty=1e-7,ny=12;function ry(t,e,n,r,s){let i,o,a=0;do o=e+(n-e)/2,i=hm(o,r,s)-t,i>0?n=o:e=o;while(Math.abs(i)>ty&&++a<ny);return o}function zs(t,e,n,r){if(t===e&&n===r)return me;const s=i=>ry(i,0,1,t,n);return i=>i===0||i===1?i:hm(s(i),e,r)}const sy=zs(.42,0,1,1),iy=zs(0,0,.58,1),fm=zs(.42,0,.58,1),oy=t=>Array.isArray(t)&&typeof t[0]!="number",pm=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,mm=t=>e=>1-t(1-e),Bc=t=>1-Math.sin(Math.acos(t)),gm=mm(Bc),ay=pm(Bc),xm=zs(.33,1.53,.69,.99),Hc=mm(xm),ly=pm(Hc),cy=t=>(t*=2)<1?.5*Hc(t):.5*(2-Math.pow(2,-10*(t-1))),uy={linear:me,easeIn:sy,easeInOut:fm,easeOut:iy,circIn:Bc,circInOut:ay,circOut:gm,backIn:Hc,backInOut:ly,backOut:xm,anticipate:cy},gd=t=>{if(Array.isArray(t)){Vc(t.length===4);const[e,n,r,s]=t;return zs(e,n,r,s)}else if(typeof t=="string")return uy[t];return t},zc=(t,e)=>n=>!!(Bs(n)&&dv.test(n)&&n.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(n,e)),vm=(t,e,n)=>r=>{if(!Bs(r))return r;const[s,i,o,a]=r.match(Do);return{[t]:parseFloat(s),[e]:parseFloat(i),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},dy=t=>pn(0,255,t),pa={...Yn,transform:t=>Math.round(dy(t))},Ln={test:zc("rgb","red"),parse:vm("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+pa.transform(t)+", "+pa.transform(e)+", "+pa.transform(n)+", "+us(cs.transform(r))+")"};function hy(t){let e="",n="",r="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const kl={test:zc("#"),parse:hy,transform:Ln.transform},hr={test:zc("hsl","hue"),parse:vm("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Pt.transform(us(e))+", "+Pt.transform(us(n))+", "+us(cs.transform(r))+")"},De={test:t=>Ln.test(t)||kl.test(t)||hr.test(t),parse:t=>Ln.test(t)?Ln.parse(t):hr.test(t)?hr.parse(t):kl.parse(t),transform:t=>Bs(t)?t:t.hasOwnProperty("red")?Ln.transform(t):hr.transform(t)},ue=(t,e,n)=>-n*t+n*e+t;function ma(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function fy({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let s=0,i=0,o=0;if(!e)s=i=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,c=2*n-a;s=ma(c,a,t+1/3),i=ma(c,a,t),o=ma(c,a,t-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:r}}const ga=(t,e,n)=>{const r=t*t;return Math.sqrt(Math.max(0,n*(e*e-r)+r))},py=[kl,Ln,hr],my=t=>py.find(e=>e.test(t));function xd(t){const e=my(t);let n=e.parse(t);return e===hr&&(n=fy(n)),n}const ym=(t,e)=>{const n=xd(t),r=xd(e),s={...n};return i=>(s.red=ga(n.red,r.red,i),s.green=ga(n.green,r.green,i),s.blue=ga(n.blue,r.blue,i),s.alpha=ue(n.alpha,r.alpha,i),Ln.transform(s))};function gy(t){var e,n;return isNaN(t)&&Bs(t)&&(((e=t.match(Do))===null||e===void 0?void 0:e.length)||0)+(((n=t.match($p))===null||n===void 0?void 0:n.length)||0)>0}const wm={regex:cv,countKey:"Vars",token:"${v}",parse:me},Sm={regex:$p,countKey:"Colors",token:"${c}",parse:De.parse},bm={regex:Do,countKey:"Numbers",token:"${n}",parse:Yn.parse};function xa(t,{regex:e,countKey:n,token:r,parse:s}){const i=t.tokenised.match(e);i&&(t["num"+n]=i.length,t.tokenised=t.tokenised.replace(e,r),t.values.push(...i.map(s)))}function oo(t){const e=t.toString(),n={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&xa(n,wm),xa(n,Sm),xa(n,bm),n}function km(t){return oo(t).values}function jm(t){const{values:e,numColors:n,numVars:r,tokenised:s}=oo(t),i=e.length;return o=>{let a=s;for(let c=0;c<i;c++)c<r?a=a.replace(wm.token,o[c]):c<r+n?a=a.replace(Sm.token,De.transform(o[c])):a=a.replace(bm.token,us(o[c]));return a}}const xy=t=>typeof t=="number"?0:t;function vy(t){const e=km(t);return jm(t)(e.map(xy))}const mn={test:gy,parse:km,createTransformer:jm,getAnimatableNone:vy},Cm=(t,e)=>n=>`${n>0?e:t}`;function Tm(t,e){return typeof t=="number"?n=>ue(t,e,n):De.test(t)?ym(t,e):t.startsWith("var(")?Cm(t,e):Em(t,e)}const Pm=(t,e)=>{const n=[...t],r=n.length,s=t.map((i,o)=>Tm(i,e[o]));return i=>{for(let o=0;o<r;o++)n[o]=s[o](i);return n}},yy=(t,e)=>{const n={...t,...e},r={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(r[s]=Tm(t[s],e[s]));return s=>{for(const i in r)n[i]=r[i](s);return n}},Em=(t,e)=>{const n=mn.createTransformer(e),r=oo(t),s=oo(e);return r.numVars===s.numVars&&r.numColors===s.numColors&&r.numNumbers>=s.numNumbers?un(Pm(r.values,s.values),n):Cm(t,e)},Ls=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},vd=(t,e)=>n=>ue(t,e,n);function wy(t){return typeof t=="number"?vd:typeof t=="string"?De.test(t)?ym:Em:Array.isArray(t)?Pm:typeof t=="object"?yy:vd}function Sy(t,e,n){const r=[],s=n||wy(t[0]),i=t.length-1;for(let o=0;o<i;o++){let a=s(t[o],t[o+1]);if(e){const c=Array.isArray(e)?e[o]||me:e;a=un(c,a)}r.push(a)}return r}function Nm(t,e,{clamp:n=!0,ease:r,mixer:s}={}){const i=t.length;if(Vc(i===e.length),i===1)return()=>e[0];t[0]>t[i-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=Sy(e,r,s),a=o.length,c=u=>{let h=0;if(a>1)for(;h<t.length-2&&!(u<t[h+1]);h++);const d=Ls(t[h],t[h+1],u);return o[h](d)};return n?u=>c(pn(t[0],t[i-1],u)):c}function by(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const s=Ls(0,e,r);t.push(ue(n,1,s))}}function ky(t){const e=[0];return by(e,t.length-1),e}function jy(t,e){return t.map(n=>n*e)}function Cy(t,e){return t.map(()=>e||fm).splice(0,t.length-1)}function ao({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const s=oy(r)?r.map(gd):gd(r),i={done:!1,value:e[0]},o=jy(n&&n.length===e.length?n:ky(e),t),a=Nm(o,e,{ease:Array.isArray(s)?s:Cy(e,s)});return{calculatedDuration:t,next:c=>(i.value=a(c),i.done=c>=t,i)}}function _m(t,e){return e?t*(1e3/e):0}const Ty=5;function Am(t,e,n){const r=Math.max(e-Ty,0);return _m(n-t(r),e-r)}const va=.001,Py=.01,yd=10,Ey=.05,Ny=1;function _y({duration:t=800,bounce:e=.25,velocity:n=0,mass:r=1}){let s,i;Yv(t<=dn(yd));let o=1-e;o=pn(Ey,Ny,o),t=pn(Py,yd,Ft(t)),o<1?(s=u=>{const h=u*o,d=h*t,f=h-n,g=jl(u,o),v=Math.exp(-d);return va-f/g*v},i=u=>{const d=u*o*t,f=d*n+n,g=Math.pow(o,2)*Math.pow(u,2)*t,v=Math.exp(-d),w=jl(Math.pow(u,2),o);return(-s(u)+va>0?-1:1)*((f-g)*v)/w}):(s=u=>{const h=Math.exp(-u*t),d=(u-n)*t+1;return-va+h*d},i=u=>{const h=Math.exp(-u*t),d=(n-u)*(t*t);return h*d});const a=5/t,c=My(s,i,a);if(t=dn(t),isNaN(c))return{stiffness:100,damping:10,duration:t};{const u=Math.pow(c,2)*r;return{stiffness:u,damping:o*2*Math.sqrt(r*u),duration:t}}}const Ay=12;function My(t,e,n){let r=n;for(let s=1;s<Ay;s++)r=r-t(r)/e(r);return r}function jl(t,e){return t*Math.sqrt(1-e*e)}const Ly=["duration","bounce"],Ry=["stiffness","damping","mass"];function wd(t,e){return e.some(n=>t[n]!==void 0)}function Dy(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!wd(t,Ry)&&wd(t,Ly)){const n=_y(t);e={...e,...n,mass:1},e.isResolvedFromDuration=!0}return e}function Mm({keyframes:t,restDelta:e,restSpeed:n,...r}){const s=t[0],i=t[t.length-1],o={done:!1,value:s},{stiffness:a,damping:c,mass:u,duration:h,velocity:d,isResolvedFromDuration:f}=Dy({...r,velocity:-Ft(r.velocity||0)}),g=d||0,v=c/(2*Math.sqrt(a*u)),w=i-s,b=Ft(Math.sqrt(a/u)),m=Math.abs(w)<5;n||(n=m?.01:2),e||(e=m?.005:.5);let p;if(v<1){const x=jl(b,v);p=S=>{const j=Math.exp(-v*b*S);return i-j*((g+v*b*w)/x*Math.sin(x*S)+w*Math.cos(x*S))}}else if(v===1)p=x=>i-Math.exp(-b*x)*(w+(g+b*w)*x);else{const x=b*Math.sqrt(v*v-1);p=S=>{const j=Math.exp(-v*b*S),k=Math.min(x*S,300);return i-j*((g+v*b*w)*Math.sinh(k)+x*w*Math.cosh(k))/x}}return{calculatedDuration:f&&h||null,next:x=>{const S=p(x);if(f)o.done=x>=h;else{let j=g;x!==0&&(v<1?j=Am(p,x,S):j=0);const k=Math.abs(j)<=n,C=Math.abs(i-S)<=e;o.done=k&&C}return o.value=o.done?i:S,o}}}function Sd({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:a,max:c,restDelta:u=.5,restSpeed:h}){const d=t[0],f={done:!1,value:d},g=T=>a!==void 0&&T<a||c!==void 0&&T>c,v=T=>a===void 0?c:c===void 0||Math.abs(a-T)<Math.abs(c-T)?a:c;let w=n*e;const b=d+w,m=o===void 0?b:o(b);m!==b&&(w=m-d);const p=T=>-w*Math.exp(-T/r),x=T=>m+p(T),S=T=>{const E=p(T),A=x(T);f.done=Math.abs(E)<=u,f.value=f.done?m:A};let j,k;const C=T=>{g(f.value)&&(j=T,k=Mm({keyframes:[f.value,v(f.value)],velocity:Am(x,T,f.value),damping:s,stiffness:i,restDelta:u,restSpeed:h}))};return C(0),{calculatedDuration:null,next:T=>{let E=!1;return!k&&j===void 0&&(E=!0,S(T),C(T)),j!==void 0&&T>j?k.next(T-j):(!E&&S(T),f)}}}const Iy=t=>{const e=({timestamp:n})=>t(n);return{start:()=>re.update(e,!0),stop:()=>zt(e),now:()=>_e.isProcessing?_e.timestamp:performance.now()}},bd=2e4;function kd(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<bd;)e+=n,r=t.next(e);return e>=bd?1/0:e}const Oy={decay:Sd,inertia:Sd,tween:ao,keyframes:ao,spring:Mm};function lo({autoplay:t=!0,delay:e=0,driver:n=Iy,keyframes:r,type:s="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:a="loop",onPlay:c,onStop:u,onComplete:h,onUpdate:d,...f}){let g=1,v=!1,w,b;const m=()=>{b=new Promise(I=>{w=I})};m();let p;const x=Oy[s]||ao;let S;x!==ao&&typeof r[0]!="number"&&(S=Nm([0,100],r,{clamp:!1}),r=[0,100]);const j=x({...f,keyframes:r});let k;a==="mirror"&&(k=x({...f,keyframes:[...r].reverse(),velocity:-(f.velocity||0)}));let C="idle",T=null,E=null,A=null;j.calculatedDuration===null&&i&&(j.calculatedDuration=kd(j));const{calculatedDuration:z}=j;let Q=1/0,F=1/0;z!==null&&(Q=z+o,F=Q*(i+1)-o);let H=0;const V=I=>{if(E===null)return;g>0&&(E=Math.min(E,I)),g<0&&(E=Math.min(I-F/g,E)),T!==null?H=T:H=Math.round(I-E)*g;const q=H-e*(g>=0?1:-1),Ve=g>=0?q<0:q>F;H=Math.max(q,0),C==="finished"&&T===null&&(H=F);let Re=H,et=j;if(i){const J=Math.min(H,F)/Q;let Z=Math.floor(J),tt=J%1;!tt&&J>=1&&(tt=1),tt===1&&Z--,Z=Math.min(Z,i+1),!!(Z%2)&&(a==="reverse"?(tt=1-tt,o&&(tt-=o/Q)):a==="mirror"&&(et=k)),Re=pn(0,1,tt)*Q}const W=Ve?{done:!1,value:r[0]}:et.next(Re);S&&(W.value=S(W.value));let{done:X}=W;!Ve&&z!==null&&(X=g>=0?H>=F:H<=0);const fe=T===null&&(C==="finished"||C==="running"&&X);return d&&d(W.value),fe&&P(),W},L=()=>{p&&p.stop(),p=void 0},$=()=>{C="idle",L(),w(),m(),E=A=null},P=()=>{C="finished",h&&h(),L(),w()},M=()=>{if(v)return;p||(p=n(V));const I=p.now();c&&c(),T!==null?E=I-T:(!E||C==="finished")&&(E=I),C==="finished"&&m(),A=E,T=null,C="running",p.start()};t&&M();const O={then(I,q){return b.then(I,q)},get time(){return Ft(H)},set time(I){I=dn(I),H=I,T!==null||!p||g===0?T=I:E=p.now()-I/g},get duration(){const I=j.calculatedDuration===null?kd(j):j.calculatedDuration;return Ft(I)},get speed(){return g},set speed(I){I===g||!p||(g=I,O.time=Ft(H))},get state(){return C},play:M,pause:()=>{C="paused",T=H},stop:()=>{v=!0,C!=="idle"&&(C="idle",u&&u(),$())},cancel:()=>{A!==null&&V(A),$()},complete:()=>{C="finished"},sample:I=>(E=0,V(I))};return O}function Fy(t){let e;return()=>(e===void 0&&(e=t()),e)}const Gy=Fy(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Vy=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),pi=10,By=2e4,Hy=(t,e)=>e.type==="spring"||t==="backgroundColor"||!cm(e.ease);function zy(t,e,{onUpdate:n,onComplete:r,...s}){if(!(Gy()&&Vy.has(e)&&!s.repeatDelay&&s.repeatType!=="mirror"&&s.damping!==0&&s.type!=="inertia"))return!1;let o=!1,a,c,u=!1;const h=()=>{c=new Promise(x=>{a=x})};h();let{keyframes:d,duration:f=300,ease:g,times:v}=s;if(Hy(e,s)){const x=lo({...s,repeat:0,delay:0});let S={done:!1,value:d[0]};const j=[];let k=0;for(;!S.done&&k<By;)S=x.sample(k),j.push(S.value),k+=pi;v=void 0,d=j,f=k-pi,g="linear"}const w=Zv(t.owner.current,e,d,{...s,duration:f,ease:g,times:v}),b=()=>{u=!1,w.cancel()},m=()=>{u=!0,re.update(b),a(),h()};return w.onfinish=()=>{u||(t.set(ey(d,s)),r&&r(),m())},{then(x,S){return c.then(x,S)},attachTimeline(x){return w.timeline=x,w.onfinish=null,me},get time(){return Ft(w.currentTime||0)},set time(x){w.currentTime=dn(x)},get speed(){return w.playbackRate},set speed(x){w.playbackRate=x},get duration(){return Ft(f)},play:()=>{o||(w.play(),zt(b))},pause:()=>w.pause(),stop:()=>{if(o=!0,w.playState==="idle")return;const{currentTime:x}=w;if(x){const S=lo({...s,autoplay:!1});t.setWithVelocity(S.sample(x-pi).value,S.sample(x).value,pi)}m()},complete:()=>{u||w.finish()},cancel:m}}function Uy({keyframes:t,delay:e,onUpdate:n,onComplete:r}){const s=()=>(n&&n(t[t.length-1]),r&&r(),{time:0,speed:1,duration:0,play:me,pause:me,stop:me,then:i=>(i(),Promise.resolve()),cancel:me,complete:me});return e?lo({keyframes:[0,1],duration:0,delay:e,onComplete:s}):s()}const $y={type:"spring",stiffness:500,damping:25,restSpeed:10},Wy=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),qy={type:"keyframes",duration:.8},Ky={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Qy=(t,{keyframes:e})=>e.length>2?qy:Xn.has(t)?t.startsWith("scale")?Wy(e[1]):$y:Ky,Cl=(t,e)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(mn.test(e)||e==="0")&&!e.startsWith("url(")),Xy=new Set(["brightness","contrast","saturate","opacity"]);function Yy(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(Do)||[];if(!r)return t;const s=n.replace(r,"");let i=Xy.has(e)?1:0;return r!==n&&(i*=100),e+"("+i+s+")"}const Jy=/([a-z-]*)\(.*?\)/g,Tl={...mn,getAnimatableNone:t=>{const e=t.match(Jy);return e?e.map(Yy).join(" "):t}},Zy={...Wp,color:De,backgroundColor:De,outlineColor:De,fill:De,stroke:De,borderColor:De,borderTopColor:De,borderRightColor:De,borderBottomColor:De,borderLeftColor:De,filter:Tl,WebkitFilter:Tl},Uc=t=>Zy[t];function Lm(t,e){let n=Uc(t);return n!==Tl&&(n=mn),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const Rm=t=>/^0[^.\s]+$/.test(t);function ew(t){if(typeof t=="number")return t===0;if(t!==null)return t==="none"||t==="0"||Rm(t)}function tw(t,e,n,r){const s=Cl(e,n);let i;Array.isArray(n)?i=[...n]:i=[null,n];const o=r.from!==void 0?r.from:t.get();let a;const c=[];for(let u=0;u<i.length;u++)i[u]===null&&(i[u]=u===0?o:i[u-1]),ew(i[u])&&c.push(u),typeof i[u]=="string"&&i[u]!=="none"&&i[u]!=="0"&&(a=i[u]);if(s&&c.length&&a)for(let u=0;u<c.length;u++){const h=c[u];i[h]=Lm(e,a)}return i}function nw({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:a,from:c,elapsed:u,...h}){return!!Object.keys(h).length}function $c(t,e){return t[e]||t.default||t}const rw={skipAnimations:!1},Wc=(t,e,n,r={})=>s=>{const i=$c(r,t)||{},o=i.delay||r.delay||0;let{elapsed:a=0}=r;a=a-dn(o);const c=tw(e,t,n,i),u=c[0],h=c[c.length-1],d=Cl(t,u),f=Cl(t,h);let g={keyframes:c,velocity:e.getVelocity(),ease:"easeOut",...i,delay:-a,onUpdate:v=>{e.set(v),i.onUpdate&&i.onUpdate(v)},onComplete:()=>{s(),i.onComplete&&i.onComplete()}};if(nw(i)||(g={...g,...Qy(t,g)}),g.duration&&(g.duration=dn(g.duration)),g.repeatDelay&&(g.repeatDelay=dn(g.repeatDelay)),!d||!f||Jv.current||i.type===!1||rw.skipAnimations)return Uy(g);if(!r.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const v=zy(e,t,g);if(v)return v}return lo(g)};function co(t){return!!(We(t)&&t.add)}const Dm=t=>/^\-?\d*\.?\d+$/.test(t);function qc(t,e){t.indexOf(e)===-1&&t.push(e)}function Kc(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Qc{constructor(){this.subscriptions=[]}add(e){return qc(this.subscriptions,e),()=>Kc(this.subscriptions,e)}notify(e,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,r);else for(let i=0;i<s;i++){const o=this.subscriptions[i];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const sw=t=>!isNaN(parseFloat(t));class iw{constructor(e,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,s=!0)=>{this.prev=this.current,this.current=r;const{delta:i,timestamp:o}=_e;this.lastUpdated!==o&&(this.timeDelta=i,this.lastUpdated=o,re.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>re.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=sw(this.current),this.owner=n.owner}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Qc);const r=this.events[e].add(n);return e==="change"?()=>{r(),re.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=e,this.timeDelta=r}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?_m(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function _r(t,e){return new iw(t,e)}const Im=t=>e=>e.test(t),ow={test:t=>t==="auto",parse:t=>t},Om=[Yn,U,Pt,Wt,fv,hv,ow],qr=t=>Om.find(Im(t)),aw=[...Om,De,mn],lw=t=>aw.find(Im(t));function cw(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,_r(n))}function uw(t,e){const n=Oo(t,e);let{transitionEnd:r={},transition:s={},...i}=n?t.makeTargetAnimatable(n,!1):{};i={...i,...r};for(const o in i){const a=Pv(i[o]);cw(t,o,a)}}function dw(t,e,n){var r,s;const i=Object.keys(e).filter(a=>!t.hasValue(a)),o=i.length;if(o)for(let a=0;a<o;a++){const c=i[a],u=e[c];let h=null;Array.isArray(u)&&(h=u[0]),h===null&&(h=(s=(r=n[c])!==null&&r!==void 0?r:t.readValue(c))!==null&&s!==void 0?s:e[c]),h!=null&&(typeof h=="string"&&(Dm(h)||Rm(h))?h=parseFloat(h):!lw(h)&&mn.test(u)&&(h=Lm(c,u)),t.addValue(c,_r(h,{owner:t})),n[c]===void 0&&(n[c]=h),h!==null&&t.setBaseTarget(c,h))}}function hw(t,e){return e?(e[t]||e.default||e).from:void 0}function fw(t,e,n){const r={};for(const s in t){const i=hw(s,e);if(i!==void 0)r[s]=i;else{const o=n.getValue(s);o&&(r[s]=o.get())}}return r}function pw({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function mw(t,e){const n=t.get();if(Array.isArray(e)){for(let r=0;r<e.length;r++)if(e[r]!==n)return!0}else return n!==e}function Fm(t,e,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:i=t.getDefaultTransition(),transitionEnd:o,...a}=t.makeTargetAnimatable(e);const c=t.getValue("willChange");r&&(i=r);const u=[],h=s&&t.animationState&&t.animationState.getState()[s];for(const d in a){const f=t.getValue(d),g=a[d];if(!f||g===void 0||h&&pw(h,d))continue;const v={delay:n,elapsed:0,...$c(i||{},d)};if(window.HandoffAppearAnimations){const m=t.getProps()[Gp];if(m){const p=window.HandoffAppearAnimations(m,d,f,re);p!==null&&(v.elapsed=p,v.isHandoff=!0)}}let w=!v.isHandoff&&!mw(f,g);if(v.type==="spring"&&(f.getVelocity()||v.velocity)&&(w=!1),f.animation&&(w=!1),w)continue;f.start(Wc(d,f,g,t.shouldReduceMotion&&Xn.has(d)?{type:!1}:v));const b=f.animation;co(c)&&(c.add(d),b.then(()=>c.remove(d))),u.push(b)}return o&&Promise.all(u).then(()=>{o&&uw(t,o)}),u}function Pl(t,e,n={}){const r=Oo(t,e,n.custom);let{transition:s=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const i=r?()=>Promise.all(Fm(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:h,staggerDirection:d}=s;return gw(t,e,u+c,h,d,n)}:()=>Promise.resolve(),{when:a}=s;if(a){const[c,u]=a==="beforeChildren"?[i,o]:[o,i];return c().then(()=>u())}else return Promise.all([i(),o(n.delay)])}function gw(t,e,n=0,r=0,s=1,i){const o=[],a=(t.variantChildren.size-1)*r,c=s===1?(u=0)=>u*r:(u=0)=>a-u*r;return Array.from(t.variantChildren).sort(xw).forEach((u,h)=>{u.notify("AnimationStart",e),o.push(Pl(u,e,{...i,delay:n+c(h)}).then(()=>u.notify("AnimationComplete",e)))}),Promise.all(o)}function xw(t,e){return t.sortNodePosition(e)}function vw(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(i=>Pl(t,i,n));r=Promise.all(s)}else if(typeof e=="string")r=Pl(t,e,n);else{const s=typeof e=="function"?Oo(t,e,n.custom):e;r=Promise.all(Fm(t,s,n))}return r.then(()=>t.notify("AnimationComplete",e))}const yw=[..._c].reverse(),ww=_c.length;function Sw(t){return e=>Promise.all(e.map(({animation:n,options:r})=>vw(t,n,r)))}function bw(t){let e=Sw(t);const n=jw();let r=!0;const s=(c,u)=>{const h=Oo(t,u);if(h){const{transition:d,transitionEnd:f,...g}=h;c={...c,...g,...f}}return c};function i(c){e=c(t)}function o(c,u){const h=t.getProps(),d=t.getVariantContext(!0)||{},f=[],g=new Set;let v={},w=1/0;for(let m=0;m<ww;m++){const p=yw[m],x=n[p],S=h[p]!==void 0?h[p]:d[p],j=As(S),k=p===u?x.isActive:null;k===!1&&(w=m);let C=S===d[p]&&S!==h[p]&&j;if(C&&r&&t.manuallyAnimateOnMount&&(C=!1),x.protectedKeys={...v},!x.isActive&&k===null||!S&&!x.prevProp||Lo(S)||typeof S=="boolean")continue;let E=kw(x.prevProp,S)||p===u&&x.isActive&&!C&&j||m>w&&j,A=!1;const z=Array.isArray(S)?S:[S];let Q=z.reduce(s,{});k===!1&&(Q={});const{prevResolvedValues:F={}}=x,H={...F,...Q},V=L=>{E=!0,g.has(L)&&(A=!0,g.delete(L)),x.needsAnimating[L]=!0};for(const L in H){const $=Q[L],P=F[L];if(v.hasOwnProperty(L))continue;let M=!1;io($)&&io(P)?M=!am($,P):M=$!==P,M?$!==void 0?V(L):g.add(L):$!==void 0&&g.has(L)?V(L):x.protectedKeys[L]=!0}x.prevProp=S,x.prevResolvedValues=Q,x.isActive&&(v={...v,...Q}),r&&t.blockInitialAnimation&&(E=!1),E&&(!C||A)&&f.push(...z.map(L=>({animation:L,options:{type:p,...c}})))}if(g.size){const m={};g.forEach(p=>{const x=t.getBaseTarget(p);x!==void 0&&(m[p]=x)}),f.push({animation:m})}let b=!!f.length;return r&&(h.initial===!1||h.initial===h.animate)&&!t.manuallyAnimateOnMount&&(b=!1),r=!1,b?e(f):Promise.resolve()}function a(c,u,h){var d;if(n[c].isActive===u)return Promise.resolve();(d=t.variantChildren)===null||d===void 0||d.forEach(g=>{var v;return(v=g.animationState)===null||v===void 0?void 0:v.setActive(c,u)}),n[c].isActive=u;const f=o(h,c);for(const g in n)n[g].protectedKeys={};return f}return{animateChanges:o,setActive:a,setAnimateFunction:i,getState:()=>n}}function kw(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!am(e,t):!1}function kn(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function jw(){return{animate:kn(!0),whileInView:kn(),whileHover:kn(),whileTap:kn(),whileDrag:kn(),whileFocus:kn(),exit:kn()}}class Cw extends Sn{constructor(e){super(e),e.animationState||(e.animationState=bw(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),Lo(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let Tw=0;class Pw extends Sn{constructor(){super(...arguments),this.id=Tw++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n,custom:r}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===s)return;const i=this.node.animationState.setActive("exit",!e,{custom:r??this.node.getProps().custom});n&&!e&&i.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const Ew={animation:{Feature:Cw},exit:{Feature:Pw}},jd=(t,e)=>Math.abs(t-e);function Nw(t,e){const n=jd(t.x,e.x),r=jd(t.y,e.y);return Math.sqrt(n**2+r**2)}class Gm{constructor(e,n,{transformPagePoint:r,contextWindow:s,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=wa(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,g=Nw(d.offset,{x:0,y:0})>=3;if(!f&&!g)return;const{point:v}=d,{timestamp:w}=_e;this.history.push({...v,timestamp:w});const{onStart:b,onMove:m}=this.handlers;f||(b&&b(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),m&&m(this.lastMoveEvent,d)},this.handlePointerMove=(d,f)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=ya(f,this.transformPagePoint),re.update(this.updatePoint,!0)},this.handlePointerUp=(d,f)=>{this.end();const{onEnd:g,onSessionEnd:v,resumeAnimation:w}=this.handlers;if(this.dragSnapToOrigin&&w&&w(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const b=wa(d.type==="pointercancel"?this.lastMoveEventInfo:ya(f,this.transformPagePoint),this.history);this.startEvent&&g&&g(d,b),v&&v(d,b)},!nm(e))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.contextWindow=s||window;const o=Io(e),a=ya(o,this.transformPagePoint),{point:c}=a,{timestamp:u}=_e;this.history=[{...c,timestamp:u}];const{onSessionStart:h}=n;h&&h(e,wa(a,this.history)),this.removeListeners=un(Ot(this.contextWindow,"pointermove",this.handlePointerMove),Ot(this.contextWindow,"pointerup",this.handlePointerUp),Ot(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),zt(this.updatePoint)}}function ya(t,e){return e?{point:e(t.point)}:t}function Cd(t,e){return{x:t.x-e.x,y:t.y-e.y}}function wa({point:t},e){return{point:t,delta:Cd(t,Vm(e)),offset:Cd(t,_w(e)),velocity:Aw(e,.1)}}function _w(t){return t[0]}function Vm(t){return t[t.length-1]}function Aw(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const s=Vm(t);for(;n>=0&&(r=t[n],!(s.timestamp-r.timestamp>dn(e)));)n--;if(!r)return{x:0,y:0};const i=Ft(s.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const o={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function Ye(t){return t.max-t.min}function El(t,e=0,n=.01){return Math.abs(t-e)<=n}function Td(t,e,n,r=.5){t.origin=r,t.originPoint=ue(e.min,e.max,t.origin),t.scale=Ye(n)/Ye(e),(El(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=ue(n.min,n.max,t.origin)-t.originPoint,(El(t.translate)||isNaN(t.translate))&&(t.translate=0)}function ds(t,e,n,r){Td(t.x,e.x,n.x,r?r.originX:void 0),Td(t.y,e.y,n.y,r?r.originY:void 0)}function Pd(t,e,n){t.min=n.min+e.min,t.max=t.min+Ye(e)}function Mw(t,e,n){Pd(t.x,e.x,n.x),Pd(t.y,e.y,n.y)}function Ed(t,e,n){t.min=e.min-n.min,t.max=t.min+Ye(e)}function hs(t,e,n){Ed(t.x,e.x,n.x),Ed(t.y,e.y,n.y)}function Lw(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?ue(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?ue(n,t,r.max):Math.min(t,n)),t}function Nd(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function Rw(t,{top:e,left:n,bottom:r,right:s}){return{x:Nd(t.x,n,s),y:Nd(t.y,e,r)}}function _d(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function Dw(t,e){return{x:_d(t.x,e.x),y:_d(t.y,e.y)}}function Iw(t,e){let n=.5;const r=Ye(t),s=Ye(e);return s>r?n=Ls(e.min,e.max-r,t.min):r>s&&(n=Ls(t.min,t.max-s,e.min)),pn(0,1,n)}function Ow(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Nl=.35;function Fw(t=Nl){return t===!1?t=0:t===!0&&(t=Nl),{x:Ad(t,"left","right"),y:Ad(t,"top","bottom")}}function Ad(t,e,n){return{min:Md(t,e),max:Md(t,n)}}function Md(t,e){return typeof t=="number"?t:t[e]||0}const Ld=()=>({translate:0,scale:1,origin:0,originPoint:0}),fr=()=>({x:Ld(),y:Ld()}),Rd=()=>({min:0,max:0}),ye=()=>({x:Rd(),y:Rd()});function st(t){return[t("x"),t("y")]}function Bm({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function Gw({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function Vw(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Sa(t){return t===void 0||t===1}function _l({scale:t,scaleX:e,scaleY:n}){return!Sa(t)||!Sa(e)||!Sa(n)}function Pn(t){return _l(t)||Hm(t)||t.z||t.rotate||t.rotateX||t.rotateY}function Hm(t){return Dd(t.x)||Dd(t.y)}function Dd(t){return t&&t!=="0%"}function uo(t,e,n){const r=t-n,s=e*r;return n+s}function Id(t,e,n,r,s){return s!==void 0&&(t=uo(t,s,r)),uo(t,n,r)+e}function Al(t,e=0,n=1,r,s){t.min=Id(t.min,e,n,r,s),t.max=Id(t.max,e,n,r,s)}function zm(t,{x:e,y:n}){Al(t.x,e.translate,e.scale,e.originPoint),Al(t.y,n.translate,n.scale,n.originPoint)}function Bw(t,e,n,r=!1){const s=n.length;if(!s)return;e.x=e.y=1;let i,o;for(let a=0;a<s;a++){i=n[a],o=i.projectionDelta;const c=i.instance;c&&c.style&&c.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&pr(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,zm(t,o)),r&&Pn(i.latestValues)&&pr(t,i.latestValues))}e.x=Od(e.x),e.y=Od(e.y)}function Od(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function Xt(t,e){t.min=t.min+e,t.max=t.max+e}function Fd(t,e,[n,r,s]){const i=e[s]!==void 0?e[s]:.5,o=ue(t.min,t.max,i);Al(t,e[n],e[r],o,e.scale)}const Hw=["x","scaleX","originX"],zw=["y","scaleY","originY"];function pr(t,e){Fd(t.x,e,Hw),Fd(t.y,e,zw)}function Um(t,e){return Bm(Vw(t.getBoundingClientRect(),e))}function Uw(t,e,n){const r=Um(t,n),{scroll:s}=e;return s&&(Xt(r.x,s.offset.x),Xt(r.y,s.offset.y)),r}const $m=({current:t})=>t?t.ownerDocument.defaultView:null,$w=new WeakMap;class Ww{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ye(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=h=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Io(h,"page").point)},i=(h,d)=>{const{drag:f,dragPropagation:g,onDragStart:v}=this.getProps();if(f&&!g&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=sm(f),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),st(b=>{let m=this.getAxisMotionValue(b).get()||0;if(Pt.test(m)){const{projection:p}=this.visualElement;if(p&&p.layout){const x=p.layout.layoutBox[b];x&&(m=Ye(x)*(parseFloat(m)/100))}}this.originPoint[b]=m}),v&&re.update(()=>v(h,d),!1,!0);const{animationState:w}=this.visualElement;w&&w.setActive("whileDrag",!0)},o=(h,d)=>{const{dragPropagation:f,dragDirectionLock:g,onDirectionLock:v,onDrag:w}=this.getProps();if(!f&&!this.openGlobalLock)return;const{offset:b}=d;if(g&&this.currentDirection===null){this.currentDirection=qw(b),this.currentDirection!==null&&v&&v(this.currentDirection);return}this.updateAxis("x",d.point,b),this.updateAxis("y",d.point,b),this.visualElement.render(),w&&w(h,d)},a=(h,d)=>this.stop(h,d),c=()=>st(h=>{var d;return this.getAnimationState(h)==="paused"&&((d=this.getAxisMotionValue(h).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new Gm(e,{onSessionStart:s,onStart:i,onMove:o,onSessionEnd:a,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:$m(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:s}=n;this.startAnimation(s);const{onDragEnd:i}=this.getProps();i&&re.update(()=>i(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:s}=this.getProps();if(!r||!mi(e,s,this.currentDirection))return;const i=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=Lw(o,this.constraints[e],this.elastic[e])),i.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,i=this.constraints;n&&dr(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&s?this.constraints=Rw(s.layoutBox,n):this.constraints=!1,this.elastic=Fw(r),i!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&st(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=Ow(s.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!dr(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=Uw(r,s.root,this.visualElement.getTransformPagePoint());let o=Dw(s.layout.layoutBox,i);if(n){const a=n(Gw(o));this.hasMutatedConstraints=!!a,a&&(o=Bm(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),c=this.constraints||{},u=st(h=>{if(!mi(h,n,this.currentDirection))return;let d=c&&c[h]||{};o&&(d={min:0,max:0});const f=s?200:1e6,g=s?40:1e7,v={type:"inertia",velocity:r?e[h]:0,bounceStiffness:f,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...i,...d};return this.startAxisValueAnimation(h,v)});return Promise.all(u).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return r.start(Wc(e,r,0,n))}stopAnimation(){st(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){st(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n="_drag"+e.toUpperCase(),r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){st(n=>{const{drag:r}=this.getProps();if(!mi(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(n);if(s&&s.layout){const{min:o,max:a}=s.layout.layoutBox[n];i.set(e[n]-ue(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!dr(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};st(o=>{const a=this.getAxisMotionValue(o);if(a){const c=a.get();s[o]=Iw({min:c,max:c},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),st(o=>{if(!mi(o,e,null))return;const a=this.getAxisMotionValue(o),{min:c,max:u}=this.constraints[o];a.set(ue(c,u,s[o]))})}addListeners(){if(!this.visualElement.current)return;$w.set(this.visualElement,this);const e=this.visualElement.current,n=Ot(e,"pointerdown",c=>{const{drag:u,dragListener:h=!0}=this.getProps();u&&h&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();dr(c)&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),r();const o=Lt(window,"resize",()=>this.scalePositionWithinConstraints()),a=s.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(st(h=>{const d=this.getAxisMotionValue(h);d&&(this.originPoint[h]+=c[h].translate,d.set(d.get()+c[h].translate))}),this.visualElement.render())});return()=>{o(),n(),i(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:o=Nl,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:i,dragElastic:o,dragMomentum:a}}}function mi(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function qw(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class Kw extends Sn{constructor(e){super(e),this.removeGroupControls=me,this.removeListeners=me,this.controls=new Ww(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||me}unmount(){this.removeGroupControls(),this.removeListeners()}}const Gd=t=>(e,n)=>{t&&re.update(()=>t(e,n))};class Qw extends Sn{constructor(){super(...arguments),this.removePointerDownListener=me}onPointerDown(e){this.session=new Gm(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:$m(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:Gd(e),onStart:Gd(n),onMove:r,onEnd:(i,o)=>{delete this.session,s&&re.update(()=>s(i,o))}}}mount(){this.removePointerDownListener=Ot(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function Xw(){const t=y.useContext(Ao);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:r}=t,s=y.useId();return y.useEffect(()=>r(s),[]),!e&&n?[!1,()=>n&&n(s)]:[!0]}const Ai={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Vd(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Kr={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(U.test(t))t=parseFloat(t);else return t;const n=Vd(t,e.target.x),r=Vd(t,e.target.y);return`${n}% ${r}%`}},Yw={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,s=mn.parse(t);if(s.length>5)return r;const i=mn.createTransformer(t),o=typeof s[0]!="number"?1:0,a=n.x.scale*e.x,c=n.y.scale*e.y;s[0+o]/=a,s[1+o]/=c;const u=ue(a,c,.5);return typeof s[2+o]=="number"&&(s[2+o]/=u),typeof s[3+o]=="number"&&(s[3+o]/=u),i(s)}};class Jw extends ce.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:i}=e;iv(Zw),i&&(n.group&&n.group.add(i),r&&r.register&&s&&r.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Ai.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:s,isPresent:i}=this.props,o=r.projection;return o&&(o.isPresent=i,s||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?o.promote():o.relegate()||re.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Wm(t){const[e,n]=Xw(),r=y.useContext(Mc);return ce.createElement(Jw,{...t,layoutGroup:r,switchLayoutGroup:y.useContext(Bp),isPresent:e,safeToRemove:n})}const Zw={borderRadius:{...Kr,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Kr,borderTopRightRadius:Kr,borderBottomLeftRadius:Kr,borderBottomRightRadius:Kr,boxShadow:Yw},qm=["TopLeft","TopRight","BottomLeft","BottomRight"],e1=qm.length,Bd=t=>typeof t=="string"?parseFloat(t):t,Hd=t=>typeof t=="number"||U.test(t);function t1(t,e,n,r,s,i){s?(t.opacity=ue(0,n.opacity!==void 0?n.opacity:1,n1(r)),t.opacityExit=ue(e.opacity!==void 0?e.opacity:1,0,r1(r))):i&&(t.opacity=ue(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<e1;o++){const a=`border${qm[o]}Radius`;let c=zd(e,a),u=zd(n,a);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||Hd(c)===Hd(u)?(t[a]=Math.max(ue(Bd(c),Bd(u),r),0),(Pt.test(u)||Pt.test(c))&&(t[a]+="%")):t[a]=u}(e.rotate||n.rotate)&&(t.rotate=ue(e.rotate||0,n.rotate||0,r))}function zd(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const n1=Km(0,.5,gm),r1=Km(.5,.95,me);function Km(t,e,n){return r=>r<t?0:r>e?1:n(Ls(t,e,r))}function Ud(t,e){t.min=e.min,t.max=e.max}function nt(t,e){Ud(t.x,e.x),Ud(t.y,e.y)}function $d(t,e,n,r,s){return t-=e,t=uo(t,1/n,r),s!==void 0&&(t=uo(t,1/s,r)),t}function s1(t,e=0,n=1,r=.5,s,i=t,o=t){if(Pt.test(e)&&(e=parseFloat(e),e=ue(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=ue(i.min,i.max,r);t===i&&(a-=e),t.min=$d(t.min,e,n,a,s),t.max=$d(t.max,e,n,a,s)}function Wd(t,e,[n,r,s],i,o){s1(t,e[n],e[r],e[s],e.scale,i,o)}const i1=["x","scaleX","originX"],o1=["y","scaleY","originY"];function qd(t,e,n,r){Wd(t.x,e,i1,n?n.x:void 0,r?r.x:void 0),Wd(t.y,e,o1,n?n.y:void 0,r?r.y:void 0)}function Kd(t){return t.translate===0&&t.scale===1}function Qm(t){return Kd(t.x)&&Kd(t.y)}function a1(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}function Xm(t,e){return Math.round(t.x.min)===Math.round(e.x.min)&&Math.round(t.x.max)===Math.round(e.x.max)&&Math.round(t.y.min)===Math.round(e.y.min)&&Math.round(t.y.max)===Math.round(e.y.max)}function Qd(t){return Ye(t.x)/Ye(t.y)}class l1{constructor(){this.members=[]}add(e){qc(this.members,e),e.scheduleRender()}remove(e){if(Kc(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Xd(t,e,n){let r="";const s=t.x.translate/e.x,i=t.y.translate/e.y;if((s||i)&&(r=`translate3d(${s}px, ${i}px, 0) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{rotate:c,rotateX:u,rotateY:h}=n;c&&(r+=`rotate(${c}deg) `),u&&(r+=`rotateX(${u}deg) `),h&&(r+=`rotateY(${h}deg) `)}const o=t.x.scale*e.x,a=t.y.scale*e.y;return(o!==1||a!==1)&&(r+=`scale(${o}, ${a})`),r||"none"}const c1=(t,e)=>t.depth-e.depth;class u1{constructor(){this.children=[],this.isDirty=!1}add(e){qc(this.children,e),this.isDirty=!0}remove(e){Kc(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(c1),this.isDirty=!1,this.children.forEach(e)}}function d1(t,e){const n=performance.now(),r=({timestamp:s})=>{const i=s-n;i>=e&&(zt(r),t(i-e))};return re.read(r,!0),()=>zt(r)}function h1(t){window.MotionDebug&&window.MotionDebug.record(t)}function f1(t){return t instanceof SVGElement&&t.tagName!=="svg"}function p1(t,e,n){const r=We(t)?t:_r(t);return r.start(Wc("",r,e,n)),r.animation}const Yd=["","X","Y","Z"],m1={visibility:"hidden"},Jd=1e3;let g1=0;const En={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function Ym({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(o={},a=e==null?void 0:e()){this.id=g1++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,En.totalNodes=En.resolvedTargetDeltas=En.recalculatedProjection=0,this.nodes.forEach(y1),this.nodes.forEach(j1),this.nodes.forEach(C1),this.nodes.forEach(w1),h1(En)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new u1)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Qc),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const c=this.eventHandlers.get(o);c&&c.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=f1(o),this.instance=o;const{layoutId:c,layout:u,visualElement:h}=this.options;if(h&&!h.current&&h.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(u||c)&&(this.isLayoutDirty=!0),t){let d;const f=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=d1(f,250),Ai.hasAnimatedSinceResize&&(Ai.hasAnimatedSinceResize=!1,this.nodes.forEach(eh))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&h&&(c||u)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:f,hasRelativeTargetChanged:g,layout:v})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const w=this.options.transition||h.getDefaultTransition()||_1,{onLayoutAnimationStart:b,onLayoutAnimationComplete:m}=h.getProps(),p=!this.targetLayout||!Xm(this.targetLayout,v)||g,x=!f&&g;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||x||f&&(p||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,x);const S={...$c(w,"layout"),onPlay:b,onComplete:m};(h.shouldReduceMotion||this.options.layoutRoot)&&(S.delay=0,S.type=!1),this.startAnimation(S)}else f||eh(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=v})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,zt(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(T1),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const d=this.path[h];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:a,layout:c}=this.options;if(a===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Zd);return}this.isUpdating||this.nodes.forEach(b1),this.isUpdating=!1,this.nodes.forEach(k1),this.nodes.forEach(x1),this.nodes.forEach(v1),this.clearAllSnapshots();const a=performance.now();_e.delta=pn(0,1e3/60,a-_e.timestamp),_e.timestamp=a,_e.isProcessing=!0,da.update.process(_e),da.preRender.process(_e),da.render.process(_e),_e.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(S1),this.sharedNodes.forEach(P1)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,re.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){re.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ye(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:r(this.instance),offset:n(this.instance)})}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform,a=this.projectionDelta&&!Qm(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,h=u!==this.prevTransformTemplateValue;o&&(a||Pn(this.latestValues)||h)&&(s(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let c=this.removeElementScroll(a);return o&&(c=this.removeTransform(c)),A1(c),{animationId:this.root.animationId,measuredBox:a,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return ye();const a=o.measureViewportBox(),{scroll:c}=this.root;return c&&(Xt(a.x,c.offset.x),Xt(a.y,c.offset.y)),a}removeElementScroll(o){const a=ye();nt(a,o);for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:h,options:d}=u;if(u!==this.root&&h&&d.layoutScroll){if(h.isRoot){nt(a,o);const{scroll:f}=this.root;f&&(Xt(a.x,-f.offset.x),Xt(a.y,-f.offset.y))}Xt(a.x,h.offset.x),Xt(a.y,h.offset.y)}}return a}applyTransform(o,a=!1){const c=ye();nt(c,o);for(let u=0;u<this.path.length;u++){const h=this.path[u];!a&&h.options.layoutScroll&&h.scroll&&h!==h.root&&pr(c,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),Pn(h.latestValues)&&pr(c,h.latestValues)}return Pn(this.latestValues)&&pr(c,this.latestValues),c}removeTransform(o){const a=ye();nt(a,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!Pn(u.latestValues))continue;_l(u.latestValues)&&u.updateSnapshot();const h=ye(),d=u.measurePageBox();nt(h,d),qd(a,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,h)}return Pn(this.latestValues)&&qd(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==_e.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==c;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:d,layoutId:f}=this.options;if(!(!this.layout||!(d||f))){if(this.resolvedRelativeTargetAt=_e.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ye(),this.relativeTargetOrigin=ye(),hs(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),nt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=ye(),this.targetWithTransforms=ye()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Mw(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):nt(this.target,this.layout.layoutBox),zm(this.target,this.targetDelta)):nt(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ye(),this.relativeTargetOrigin=ye(),hs(this.relativeTargetOrigin,this.target,g.target),nt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}En.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||_l(this.parent.latestValues)||Hm(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),c=!!this.resumingFrom||this!==a;let u=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(u=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===_e.timestamp&&(u=!1),u)return;const{layout:h,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||d))return;nt(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,g=this.treeScale.y;Bw(this.layoutCorrected,this.treeScale,this.path,c),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox);const{target:v}=a;if(!v){this.projectionTransform&&(this.projectionDelta=fr(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=fr(),this.projectionDeltaWithTransform=fr());const w=this.projectionTransform;ds(this.projectionDelta,this.layoutCorrected,v,this.latestValues),this.projectionTransform=Xd(this.projectionDelta,this.treeScale),(this.projectionTransform!==w||this.treeScale.x!==f||this.treeScale.y!==g)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",v)),En.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,a=!1){const c=this.snapshot,u=c?c.latestValues:{},h={...this.latestValues},d=fr();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const f=ye(),g=c?c.source:void 0,v=this.layout?this.layout.source:void 0,w=g!==v,b=this.getStack(),m=!b||b.members.length<=1,p=!!(w&&!m&&this.options.crossfade===!0&&!this.path.some(N1));this.animationProgress=0;let x;this.mixTargetDelta=S=>{const j=S/1e3;th(d.x,o.x,j),th(d.y,o.y,j),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(hs(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),E1(this.relativeTarget,this.relativeTargetOrigin,f,j),x&&a1(this.relativeTarget,x)&&(this.isProjectionDirty=!1),x||(x=ye()),nt(x,this.relativeTarget)),w&&(this.animationValues=h,t1(h,u,this.latestValues,j,p,m)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=j},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(zt(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=re.update(()=>{Ai.hasAnimatedSinceResize=!0,this.currentAnimation=p1(0,Jd,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Jd),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:c,layout:u,latestValues:h}=o;if(!(!a||!c||!u)){if(this!==o&&this.layout&&u&&Jm(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||ye();const d=Ye(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+d;const f=Ye(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+f}nt(a,c),pr(a,h),ds(this.projectionDeltaWithTransform,this.layoutCorrected,a,h)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new l1),this.sharedNodes.get(o).add(a);const u=a.options.initialPromotionConfig;a.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:c}=o;if((c.rotate||c.rotateX||c.rotateY||c.rotateZ)&&(a=!0),!a)return;const u={};for(let h=0;h<Yd.length;h++){const d="rotate"+Yd[h];c[d]&&(u[d]=c[d],o.setStaticValue(d,0))}o.render();for(const h in u)o.setStaticValue(h,u[h]);o.scheduleRender()}getProjectionStyles(o){var a,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return m1;const u={visibility:""},h=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=_i(o==null?void 0:o.pointerEvents)||"",u.transform=h?h(this.latestValues,""):"none",u;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const w={};return this.options.layoutId&&(w.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,w.pointerEvents=_i(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Pn(this.latestValues)&&(w.transform=h?h({},""):"none",this.hasProjected=!1),w}const f=d.animationValues||d.latestValues;this.applyTransformsToTarget(),u.transform=Xd(this.projectionDeltaWithTransform,this.treeScale,f),h&&(u.transform=h(f,u.transform));const{x:g,y:v}=this.projectionDelta;u.transformOrigin=`${g.origin*100}% ${v.origin*100}% 0`,d.animationValues?u.opacity=d===this?(c=(a=f.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:u.opacity=d===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const w in ro){if(f[w]===void 0)continue;const{correct:b,applyTo:m}=ro[w],p=u.transform==="none"?f[w]:b(f[w],d);if(m){const x=m.length;for(let S=0;S<x;S++)u[m[S]]=p}else u[w]=p}return this.options.layoutId&&(u.pointerEvents=d===this?_i(o==null?void 0:o.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(Zd),this.root.sharedNodes.clear()}}}function x1(t){t.updateLayout()}function v1(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=t.layout,{animationType:i}=t.options,o=n.source!==t.layout.source;i==="size"?st(d=>{const f=o?n.measuredBox[d]:n.layoutBox[d],g=Ye(f);f.min=r[d].min,f.max=f.min+g}):Jm(i,n.layoutBox,r)&&st(d=>{const f=o?n.measuredBox[d]:n.layoutBox[d],g=Ye(r[d]);f.max=f.min+g,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[d].max=t.relativeTarget[d].min+g)});const a=fr();ds(a,r,n.layoutBox);const c=fr();o?ds(c,t.applyTransform(s,!0),n.measuredBox):ds(c,r,n.layoutBox);const u=!Qm(a);let h=!1;if(!t.resumeFrom){const d=t.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:f,layout:g}=d;if(f&&g){const v=ye();hs(v,n.layoutBox,f.layoutBox);const w=ye();hs(w,r,g.layoutBox),Xm(v,w)||(h=!0),d.options.layoutRoot&&(t.relativeTarget=w,t.relativeTargetOrigin=v,t.relativeParent=d)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:c,layoutDelta:a,hasLayoutChanged:u,hasRelativeTargetChanged:h})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function y1(t){En.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function w1(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function S1(t){t.clearSnapshot()}function Zd(t){t.clearMeasurements()}function b1(t){t.isLayoutDirty=!1}function k1(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function eh(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function j1(t){t.resolveTargetDelta()}function C1(t){t.calcProjection()}function T1(t){t.resetRotation()}function P1(t){t.removeLeadSnapshot()}function th(t,e,n){t.translate=ue(e.translate,0,n),t.scale=ue(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function nh(t,e,n,r){t.min=ue(e.min,n.min,r),t.max=ue(e.max,n.max,r)}function E1(t,e,n,r){nh(t.x,e.x,n.x,r),nh(t.y,e.y,n.y,r)}function N1(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const _1={duration:.45,ease:[.4,0,.1,1]},rh=t=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(t),sh=rh("applewebkit/")&&!rh("chrome/")?Math.round:me;function ih(t){t.min=sh(t.min),t.max=sh(t.max)}function A1(t){ih(t.x),ih(t.y)}function Jm(t,e,n){return t==="position"||t==="preserve-aspect"&&!El(Qd(e),Qd(n),.2)}const M1=Ym({attachResizeListener:(t,e)=>Lt(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),ba={current:void 0},Zm=Ym({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!ba.current){const t=new M1({});t.mount(window),t.setOptions({layoutScroll:!0}),ba.current=t}return ba.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),L1={pan:{Feature:Qw},drag:{Feature:Kw,ProjectionNode:Zm,MeasureLayout:Wm}},R1=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function D1(t){const e=R1.exec(t);if(!e)return[,];const[,n,r]=e;return[n,r]}function Ml(t,e,n=1){const[r,s]=D1(t);if(!r)return;const i=window.getComputedStyle(e).getPropertyValue(r);if(i){const o=i.trim();return Dm(o)?parseFloat(o):o}else return Sl(s)?Ml(s,e,n+1):s}function I1(t,{...e},n){const r=t.current;if(!(r instanceof Element))return{target:e,transitionEnd:n};n&&(n={...n}),t.values.forEach(s=>{const i=s.get();if(!Sl(i))return;const o=Ml(i,r);o&&s.set(o)});for(const s in e){const i=e[s];if(!Sl(i))continue;const o=Ml(i,r);o&&(e[s]=o,n||(n={}),n[s]===void 0&&(n[s]=i))}return{target:e,transitionEnd:n}}const O1=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),e0=t=>O1.has(t),F1=t=>Object.keys(t).some(e0),oh=t=>t===Yn||t===U,ah=(t,e)=>parseFloat(t.split(", ")[e]),lh=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const s=r.match(/^matrix3d\((.+)\)$/);if(s)return ah(s[1],e);{const i=r.match(/^matrix\((.+)\)$/);return i?ah(i[1],t):0}},G1=new Set(["x","y","z"]),V1=Vs.filter(t=>!G1.has(t));function B1(t){const e=[];return V1.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e.length&&t.render(),e}const Ar={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:lh(4,13),y:lh(5,14)};Ar.translateX=Ar.x;Ar.translateY=Ar.y;const H1=(t,e,n)=>{const r=e.measureViewportBox(),s=e.current,i=getComputedStyle(s),{display:o}=i,a={};o==="none"&&e.setStaticValue("display",t.display||"block"),n.forEach(u=>{a[u]=Ar[u](r,i)}),e.render();const c=e.measureViewportBox();return n.forEach(u=>{const h=e.getValue(u);h&&h.jump(a[u]),t[u]=Ar[u](c,i)}),t},z1=(t,e,n={},r={})=>{e={...e},r={...r};const s=Object.keys(e).filter(e0);let i=[],o=!1;const a=[];if(s.forEach(c=>{const u=t.getValue(c);if(!t.hasValue(c))return;let h=n[c],d=qr(h);const f=e[c];let g;if(io(f)){const v=f.length,w=f[0]===null?1:0;h=f[w],d=qr(h);for(let b=w;b<v&&f[b]!==null;b++)g?Vc(qr(f[b])===g):g=qr(f[b])}else g=qr(f);if(d!==g)if(oh(d)&&oh(g)){const v=u.get();typeof v=="string"&&u.set(parseFloat(v)),typeof f=="string"?e[c]=parseFloat(f):Array.isArray(f)&&g===U&&(e[c]=f.map(parseFloat))}else d!=null&&d.transform&&(g!=null&&g.transform)&&(h===0||f===0)?h===0?u.set(g.transform(h)):e[c]=d.transform(f):(o||(i=B1(t),o=!0),a.push(c),r[c]=r[c]!==void 0?r[c]:e[c],u.jump(f))}),a.length){const c=a.indexOf("height")>=0?window.pageYOffset:null,u=H1(e,t,a);return i.length&&i.forEach(([h,d])=>{t.getValue(h).set(d)}),t.render(),Mo&&c!==null&&window.scrollTo({top:c}),{target:u,transitionEnd:r}}else return{target:e,transitionEnd:r}};function U1(t,e,n,r){return F1(e)?z1(t,e,n,r):{target:e,transitionEnd:r}}const $1=(t,e,n,r)=>{const s=I1(t,e,r);return e=s.target,r=s.transitionEnd,U1(t,e,n,r)},Ll={current:null},t0={current:!1};function W1(){if(t0.current=!0,!!Mo)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Ll.current=t.matches;t.addListener(e),e()}else Ll.current=!1}function q1(t,e,n){const{willChange:r}=e;for(const s in e){const i=e[s],o=n[s];if(We(i))t.addValue(s,i),co(r)&&r.add(s);else if(We(o))t.addValue(s,_r(i,{owner:t})),co(r)&&r.remove(s);else if(o!==i)if(t.hasValue(s)){const a=t.getValue(s);!a.hasAnimated&&a.set(i)}else{const a=t.getStaticValue(s);t.addValue(s,_r(a!==void 0?a:i,{owner:t}))}}for(const s in n)e[s]===void 0&&t.removeValue(s);return e}const ch=new WeakMap,n0=Object.keys(Ms),K1=n0.length,uh=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],Q1=Ac.length;class X1{constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:s,visualState:i},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>re.render(this.render,!1,!0);const{latestValues:a,renderState:c}=i;this.latestValues=a,this.baseTarget={...a},this.initialValues=n.initial?{...a}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=o,this.isControllingVariants=Ro(n),this.isVariantNode=Vp(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:u,...h}=this.scrapeMotionValuesFromProps(n,{});for(const d in h){const f=h[d];a[d]!==void 0&&We(f)&&(f.set(a[d],!1),co(u)&&u.add(d))}}scrapeMotionValuesFromProps(e,n){return{}}mount(e){this.current=e,ch.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),t0.current||W1(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Ll.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){ch.delete(this.current),this.projection&&this.projection.unmount(),zt(this.notifyUpdate),zt(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,n){const r=Xn.has(e),s=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&re.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),i=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{s(),i()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...n},r,s,i){let o,a;for(let c=0;c<K1;c++){const u=n0[c],{isEnabled:h,Feature:d,ProjectionNode:f,MeasureLayout:g}=Ms[u];f&&(o=f),h(n)&&(!this.features[u]&&d&&(this.features[u]=new d(this)),g&&(a=g))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:c,layout:u,drag:h,dragConstraints:d,layoutScroll:f,layoutRoot:g}=n;this.projection.setOptions({layoutId:c,layout:u,alwaysMeasureLayout:!!h||d&&dr(d),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof u=="string"?u:"both",initialPromotionConfig:i,layoutScroll:f,layoutRoot:g})}return a}updateFeatures(){for(const e in this.features){const n=this.features[e];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ye()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}makeTargetAnimatable(e,n=!0){return this.makeTargetAnimatableFromInstance(e,this.props,n)}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<uh.length;r++){const s=uh[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i=e["on"+s];i&&(this.propEventSubscriptions[s]=this.on(s,i))}this.prevMotionValues=q1(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const n={};for(let r=0;r<Q1;r++){const s=Ac[r],i=this.props[s];(As(i)||i===!1)&&(n[s]=i)}return n}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){n!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,n)),this.values.set(e,n),this.latestValues[e]=n.get()}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=_r(n,{owner:this}),this.addValue(e,r)),r}readValue(e){var n;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(n=this.getBaseTargetFromProps(this.props,e))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props,s=typeof r=="string"||typeof r=="object"?(n=Gc(this.props,r))===null||n===void 0?void 0:n[e]:void 0;if(r&&s!==void 0)return s;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!We(i)?i:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Qc),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class r0 extends X1{sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:n,...r},{transformValues:s},i){let o=fw(r,e||{},this);if(s&&(n&&(n=s(n)),r&&(r=s(r)),o&&(o=s(o))),i){dw(this,r,o);const a=$1(this,r,o,n);n=a.transitionEnd,r=a.target}return{transition:e,transitionEnd:n,...r}}}function Y1(t){return window.getComputedStyle(t)}class J1 extends r0{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,n){if(Xn.has(n)){const r=Uc(n);return r&&r.default||0}else{const r=Y1(e),s=(Up(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return Um(e,n)}build(e,n,r,s){Rc(e,n,r,s.transformTemplate)}scrapeMotionValuesFromProps(e,n){return Fc(e,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;We(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(e,n,r,s){Xp(e,n,r,s)}}class Z1 extends r0{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Xn.has(n)){const r=Uc(n);return r&&r.default||0}return n=Yp.has(n)?n:Nc(n),e.getAttribute(n)}measureInstanceViewportBox(){return ye()}scrapeMotionValuesFromProps(e,n){return Zp(e,n)}build(e,n,r,s){Ic(e,n,r,this.isSVGTag,s.transformTemplate)}renderInstance(e,n,r,s){Jp(e,n,r,s)}mount(e){this.isSVGTag=Oc(e.tagName),super.mount(e)}}const eS=(t,e)=>Lc(t)?new Z1(e,{enableHardwareAcceleration:!1}):new J1(e,{enableHardwareAcceleration:!0}),tS={layout:{ProjectionNode:Zm,MeasureLayout:Wm}},nS={...Ew,...Kv,...L1,...tS},N=rv((t,e)=>Dv(t,e,nS,eS));function s0(){const t=y.useRef(!1);return Ec(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function rS(){const t=s0(),[e,n]=y.useState(0),r=y.useCallback(()=>{t.current&&n(e+1)},[e]);return[y.useCallback(()=>re.postRender(r),[r]),e]}class sS extends y.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function iS({children:t,isPresent:e}){const n=y.useId(),r=y.useRef(null),s=y.useRef({width:0,height:0,top:0,left:0});return y.useInsertionEffect(()=>{const{width:i,height:o,top:a,left:c}=s.current;if(e||!r.current||!i||!o)return;r.current.dataset.motionPopId=n;const u=document.createElement("style");return document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${i}px !important;
            height: ${o}px !important;
            top: ${a}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[e]),y.createElement(sS,{isPresent:e,childRef:r,sizeRef:s},y.cloneElement(t,{ref:r}))}const ka=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:i,mode:o})=>{const a=em(oS),c=y.useId(),u=y.useMemo(()=>({id:c,initial:e,isPresent:n,custom:s,onExitComplete:h=>{a.set(h,!0);for(const d of a.values())if(!d)return;r&&r()},register:h=>(a.set(h,!1),()=>a.delete(h))}),i?void 0:[n]);return y.useMemo(()=>{a.forEach((h,d)=>a.set(d,!1))},[n]),y.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),o==="popLayout"&&(t=y.createElement(iS,{isPresent:n},t)),y.createElement(Ao.Provider,{value:u},t)};function oS(){return new Map}function aS(t){return y.useEffect(()=>()=>t(),[])}const Nn=t=>t.key||"";function lS(t,e){t.forEach(n=>{const r=Nn(n);e.set(r,n)})}function cS(t){const e=[];return y.Children.forEach(t,n=>{y.isValidElement(n)&&e.push(n)}),e}const xe=({children:t,custom:e,initial:n=!0,onExitComplete:r,exitBeforeEnter:s,presenceAffectsLayout:i=!0,mode:o="sync"})=>{const a=y.useContext(Mc).forceRender||rS()[0],c=s0(),u=cS(t);let h=u;const d=y.useRef(new Map).current,f=y.useRef(h),g=y.useRef(new Map).current,v=y.useRef(!0);if(Ec(()=>{v.current=!1,lS(u,g),f.current=h}),aS(()=>{v.current=!0,g.clear(),d.clear()}),v.current)return y.createElement(y.Fragment,null,h.map(p=>y.createElement(ka,{key:Nn(p),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:i,mode:o},p)));h=[...h];const w=f.current.map(Nn),b=u.map(Nn),m=w.length;for(let p=0;p<m;p++){const x=w[p];b.indexOf(x)===-1&&!d.has(x)&&d.set(x,void 0)}return o==="wait"&&d.size&&(h=[]),d.forEach((p,x)=>{if(b.indexOf(x)!==-1)return;const S=g.get(x);if(!S)return;const j=w.indexOf(x);let k=p;if(!k){const C=()=>{d.delete(x);const T=Array.from(g.keys()).filter(E=>!b.includes(E));if(T.forEach(E=>g.delete(E)),f.current=u.filter(E=>{const A=Nn(E);return A===x||T.includes(A)}),!d.size){if(c.current===!1)return;a(),r&&r()}};k=y.createElement(ka,{key:Nn(S),isPresent:!1,onExitComplete:C,custom:e,presenceAffectsLayout:i,mode:o},S),d.set(x,k)}h.splice(j,0,k)}),h=h.map(p=>{const x=p.key;return d.has(x)?p:y.createElement(ka,{key:Nn(p),isPresent:!0,presenceAffectsLayout:i,mode:o},p)}),y.createElement(y.Fragment,null,d.size?h:h.map(p=>y.cloneElement(p)))},jn={I:"I",O:"O",T:"T",S:"S",Z:"Z",J:"J",L:"L"},i0={[jn.I]:{shape:[[0,0,0,0],[1,1,1,1],[0,0,0,0],[0,0,0,0]],color:"#00f5ff",emoji:"",name:"I-Piece"},[jn.O]:{shape:[[1,1],[1,1]],color:"#ffff00",emoji:"",name:"O-Piece"},[jn.T]:{shape:[[0,1,0],[1,1,1],[0,0,0]],color:"#a000f0",emoji:"",name:"T-Piece"},[jn.S]:{shape:[[0,1,1],[1,1,0],[0,0,0]],color:"#00f000",emoji:"",name:"S-Piece"},[jn.Z]:{shape:[[1,1,0],[0,1,1],[0,0,0]],color:"#f00000",emoji:"",name:"Z-Piece"},[jn.J]:{shape:[[1,0,0],[1,1,1],[0,0,0]],color:"#0000f0",emoji:"",name:"J-Piece"},[jn.L]:{shape:[[0,0,1],[1,1,1],[0,0,0]],color:"#ff7f00",emoji:"",name:"L-Piece"}};let Rt={...i0};function dh(t){if(!t||!t.pieces){Rt={...i0};return}Object.keys(Rt).forEach(e=>{t.pieces[e]&&(Rt[e]={...Rt[e],color:t.pieces[e].color,emoji:t.pieces[e].emoji})})}if(typeof window<"u"){window.addEventListener("themeEquipped",t=>{dh(t.detail.theme)});try{const t=localStorage.getItem("cat-tetris-shopInventory");if(t){const n=JSON.parse(t).equippedTheme;Ip(()=>Promise.resolve().then(()=>QS),void 0).then(({PIECE_THEMES:r})=>{r[n]&&dh(r[n])})}}catch{}}function br(t){return{"#00f5ff":"#00f5ff","#ffff00":"#ffff00","#a000f0":"#a000f0","#00f000":"#00f000","#f00000":"#f00000","#0000f0":"#0000f0","#ff7f00":"#ff7f00"}[t]||t}class uS{constructor(){this.events={}}on(e,n){this.events[e]||(this.events[e]=[]),this.events[e].push(n)}off(e,n){this.events[e]&&(this.events[e]=this.events[e].filter(r=>r!==n))}emit(e,n){this.events[e]&&this.events[e].forEach(r=>{try{r(n)}catch(s){typeof window<"u"&&window.__ERROR_LOGGER__&&window.__ERROR_LOGGER__.logError("EventEmitter",`emit:${e}`,s.message,{event:e,stack:s.stack})}})}clear(){this.events={}}}const R=new uS,G={GAME_INITIALIZED:"game_initialized",PIECE_MOVED:"piece_moved",PIECE_ROTATED:"piece_rotated",PIECE_PLACED:"piece_placed",PIECE_HELD:"piece_held",HARD_DROP:"hard_drop",LINE_CLEARED:"line_cleared",T_SPIN:"t_spin",BACK_TO_BACK:"back_to_back",SCORE_UPDATED:"score_updated",LEVEL_UP:"level_up",GAME_OVER:"game_over",GAME_PAUSED:"game_paused",GAME_RESUMED:"game_resumed"},Mi=2;function dS({text:t,color:e,id:n}){return l.jsx(N.div,{initial:{opacity:1,y:0,scale:.5},animate:{opacity:0,y:-60,scale:1.3},exit:{opacity:0},transition:{duration:1.2,ease:"easeOut"},className:"absolute left-1/2 top-1/3 -translate-x-1/2 pointer-events-none font-black text-lg drop-shadow-lg whitespace-nowrap",style:{color:e,zIndex:50,textShadow:`0 0 12px ${e}`},children:t},n)}function hS({lines:t}){const e=y.useMemo(()=>{const n=[];return t.forEach(r=>{for(let s=0;s<14;s++)n.push({id:`${r}-${s}`,startX:Math.random()*220,startY:(r+Mi)*21+10,endX:(Math.random()-.5)*300,endY:-(Math.random()*120+40),size:Math.random()*5+2,color:["#FFD700","#FF6B6B","#4ECDC4","#A78BFA","#F472B6","#34D399"][Math.floor(Math.random()*6)],delay:Math.random()*.15})}),n},[t]);return l.jsx("div",{className:"absolute inset-0 pointer-events-none overflow-visible",style:{zIndex:35},children:e.map(n=>l.jsx(N.div,{initial:{x:n.startX,y:n.startY,scale:1,opacity:1},animate:{x:n.startX+n.endX,y:n.startY+n.endY,scale:0,opacity:0},transition:{duration:.8,delay:n.delay,ease:"easeOut"},className:"absolute rounded-full",style:{width:n.size,height:n.size,backgroundColor:n.color,boxShadow:`0 0 ${n.size+4}px ${n.color}`}},n.id))})}const fS=({board:t,currentPiece:e,dropPreview:n,gameOver:r})=>{var w;const[s,i]=y.useState([]),[o,a]=y.useState([]),[c,u]=y.useState(0),h=y.useRef(0),d=y.useRef(null),f=((w=t==null?void 0:t[0])==null?void 0:w.length)||10,g=y.useMemo(()=>[...Array(Mi).fill(null).map(()=>Array(f).fill(null)),...t],[t,f]);y.useEffect(()=>{const b=()=>{u(.12),setTimeout(()=>u(0),150)};return R.on("hard_drop",b),()=>R.off("hard_drop",b)},[]),y.useEffect(()=>{const b=[];for(let m=0;m<t.length;m++)t[m]&&t[m].every(p=>p!==null)&&b.push(m);b.length>0&&(i(b),u(b.length>=4?.3:.18),setTimeout(()=>u(0),250),setTimeout(()=>i([]),800))},[t]),y.useEffect(()=>{const b=m=>{const p=(m==null?void 0:m.linesCleared)||0;if(p<=0)return;let x,S;p===1?(x="Single",S="#4ECDC4"):p===2?(x="Double!",S="#A78BFA"):p===3?(x="Triple!!",S="#F472B6"):(x=" TETRIS!! ",S="#FFD700");const j=++h.current;a(k=>[...k,{id:j,text:x,color:S}]),setTimeout(()=>a(k=>k.filter(C=>C.id!==j)),1400)};return R.on("line_cleared",b),()=>R.off("line_cleared",b)},[]),y.useEffect(()=>{const b=m=>{const p=(m==null?void 0:m.combo)||0;if(p>=2){const x=++h.current;a(S=>[...S,{id:x,text:`${p}x Combo! `,color:"#FF6B6B"}]),setTimeout(()=>a(S=>S.filter(j=>j.id!==x)),1400)}};return R.on("score_updated",b),()=>R.off("score_updated",b)},[]),y.useEffect(()=>{const b=()=>{const m=++h.current;a(p=>[...p,{id:m,text:" Back-to-Back!",color:"#FBBF24"}]),setTimeout(()=>a(p=>p.filter(x=>x.id!==m)),1400)};return R.on("back_to_back",b),()=>R.off("back_to_back",b)},[]),y.useEffect(()=>{const b=()=>{const m=++h.current;a(p=>[...p,{id:m,text:"T-SPIN!",color:"#C084FC"}]),setTimeout(()=>a(p=>p.filter(x=>x.id!==m)),1400)};return R.on("t_spin",b),()=>R.off("t_spin",b)},[]);const v=y.useCallback((b,m,p,x)=>{let S=null,j=null;const k=s.includes(p);if(e){const{position:{x:C,y:T},shape:E}=e;for(let A=0;A<E.length;A++){for(let z=0;z<E[A].length;z++)E[A][z]&&C+z===m&&T+A===p&&(S=e);if(S)break}}if(n&&n!==e){const{position:{x:C,y:T},shape:E}=n;for(let A=0;A<E.length;A++){for(let z=0;z<E[A].length;z++)E[A][z]&&C+z===m&&T+A===p&&(j=n);if(j)break}}if(S){const C=br(S.color);return l.jsx("div",{className:"tetris-cell rounded-sm flex items-center justify-center border border-white/40",style:{backgroundColor:C,boxShadow:`0 0 6px ${C}80, inset 0 1px 0 rgba(255,255,255,0.3)`},children:l.jsx("span",{className:"text-xs drop-shadow",children:S.emoji})},`${m}-${p}`)}if(j){const C=br(j.color);return l.jsx("div",{className:"tetris-cell rounded-sm flex items-center justify-center border-2 border-dashed",style:{borderColor:C+"50",backgroundColor:C+"12"},children:l.jsx("span",{className:"text-xs opacity-30",children:j.emoji})},`${m}-${p}`)}if(b){const C=br(b.color);return l.jsx("div",{className:`cat-block tetris-cell rounded-sm flex items-center justify-center ${k?"line-clearing":""}`,style:{backgroundColor:k?"#fff":C,borderColor:"rgba(255, 255, 255, 0.35)",boxShadow:k?`0 0 20px #fff, 0 0 40px ${C}`:"inset 0 1px 0 rgba(255,255,255,0.25), 0 1px 3px rgba(0,0,0,0.3)",transform:k?"scale(1.1)":void 0,transition:"all 0.15s ease-out",zIndex:k?10:1},children:l.jsx("span",{className:`text-xs ${k?"opacity-0":""}`,children:b.emoji})},`${m}-${p}`)}return l.jsx("div",{className:`tetris-cell rounded-sm ${x?"bg-gray-900/30 border border-gray-500/10":"border border-white/[0.06] bg-white/[0.02]"}`},`${m}-${p}`)},[e,n,s]);return l.jsx("div",{className:"flex flex-col items-center",children:l.jsx("div",{className:"relative bg-gray-900/60 p-3 rounded-xl border-2 border-white/15 shadow-2xl overflow-hidden flex-shrink-0",ref:d,style:{width:"fit-content"},children:l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"tetris-grid",children:g.map((b,m)=>{const p=m-Mi,x=m<Mi;return b.map((S,j)=>v(S,j,p,x))})}),s.length>0&&l.jsx(l.Fragment,{children:l.jsx(hS,{lines:s})}),l.jsx(xe,{children:c>0&&l.jsx(N.div,{initial:{opacity:c},animate:{opacity:0},exit:{opacity:0},transition:{duration:.3},className:"absolute inset-0 rounded-lg pointer-events-none",style:{background:"white",zIndex:20}},"flash")}),l.jsx(xe,{children:o.map(b=>l.jsx(dS,{id:b.id,text:b.text,color:b.color},b.id))}),r&&l.jsx(N.div,{initial:{opacity:0},animate:{opacity:1},className:"absolute inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center rounded-lg",style:{zIndex:50},children:l.jsxs(N.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",damping:12},className:"text-center",children:[l.jsx("div",{className:"text-5xl mb-2",children:""}),l.jsx("div",{className:"text-white font-black text-xl drop-shadow-lg",children:"Game Over!"})]})})]})})})},gn=ce.memo(fS);class pS{constructor(){this.HIGH_SCORE_KEY="tetris_high_score"}getHighScore(){try{const e=localStorage.getItem(this.HIGH_SCORE_KEY);return e?parseInt(e,10):0}catch{return 0}}saveHighScore(e){try{const n=this.getHighScore();return e>n?(localStorage.setItem(this.HIGH_SCORE_KEY,e.toString()),!0):!1}catch{return!1}}clearHighScore(){try{localStorage.removeItem(this.HIGH_SCORE_KEY)}catch{}}}const hh=new pS,mS=({score:t,level:e,lines:n,combo:r})=>{const[s,i]=y.useState(0);return y.useEffect(()=>{i(hh.getHighScore())},[]),y.useEffect(()=>{hh.saveHighScore(t)&&i(t)},[t]),l.jsxs("div",{className:"bg-gray-900/50 p-2 rounded-xl border-2 border-white/20 shadow-2xl w-28",children:[l.jsx("h2",{className:"text-xs font-bold text-white mb-1 text-center",children:" Pontuao"}),l.jsxs("div",{className:"space-y-0.5 text-xs",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-white/70",children:"Pontos:"}),l.jsx("span",{className:"text-yellow-400 font-bold",children:t.toLocaleString()})]}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-white/70",children:"Recorde:"}),l.jsx("span",{className:"text-green-400 font-bold",children:s.toLocaleString()})]}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-white/70",children:"Nvel:"}),l.jsx("span",{className:"text-blue-400 font-bold",children:e})]}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-white/70",children:"Linhas:"}),l.jsx("span",{className:"text-purple-400 font-bold",children:n})]}),r>0&&l.jsxs("div",{className:"flex justify-between items-center bg-orange-500/20 px-1.5 py-0.5 rounded border border-orange-400/30 mt-0.5",children:[l.jsx("span",{className:"text-white/90",children:"Combo:"}),l.jsxs("span",{className:"text-orange-400 font-bold",children:[r,"x"]})]})]})]})},Hn=ce.memo(mS),gS=({onMove:t,onRotate:e,onHardDrop:n,onPause:r,onHold:s,isPaused:i,gameOver:o,canHold:a})=>{const c=u=>{if(!o)switch(u){case"left":t("left");break;case"right":t("right");break;case"down":t("down");break;case"rotate":e();break;case"hardDrop":n();break;case"hold":s();break;case"pause":r();break}};return l.jsxs("div",{className:"flex flex-col items-center gap-1",children:[l.jsx("div",{className:"hidden lg:block",children:l.jsx("div",{className:"text-center text-white/50 text-[11px]",children:l.jsx("p",{children:"  mover |  girar |  soft | Espao = hard drop | C = hold"})})}),l.jsxs("div",{className:"lg:hidden",children:[l.jsxs("div",{className:"grid grid-cols-3 gap-3 max-w-xs",children:[l.jsx("div",{}),l.jsx(N.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>c("rotate"),disabled:o,className:"bg-blue-500 text-white p-4 rounded-full shadow-lg hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed",children:""}),l.jsx("div",{}),l.jsx(N.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>c("left"),disabled:o,className:"bg-gray-600 text-white p-4 rounded-full shadow-lg hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:""}),l.jsx(N.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>c("down"),disabled:o,className:"bg-gray-600 text-white p-4 rounded-full shadow-lg hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:""}),l.jsx(N.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>c("right"),disabled:o,className:"bg-gray-600 text-white p-4 rounded-full shadow-lg hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:""}),l.jsx(N.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>c("hardDrop"),disabled:o,className:"bg-red-500 text-white p-4 rounded-full shadow-lg hover:bg-red-600 disabled:opacity-50 disabled:cursor-not-allowed",children:""}),l.jsx(N.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>c("hold"),disabled:o||!a,className:`p-4 rounded-full shadow-lg disabled:opacity-50 disabled:cursor-not-allowed ${a?"bg-green-500 text-white hover:bg-green-600":"bg-gray-500 text-white"}`,children:""})]}),l.jsx("div",{className:"mt-4 flex justify-center",children:l.jsx(N.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>c("pause"),disabled:o,className:"bg-yellow-500 text-white px-6 py-3 rounded-lg shadow-lg hover:bg-yellow-600 disabled:opacity-50 disabled:cursor-not-allowed",children:i?" Continuar":" Pausar"})}),l.jsxs("div",{className:"mt-4 text-center text-white/60 text-xs",children:[l.jsx("p",{children:" Controles touch-friendly"}),l.jsx("p",{children:" Use a sombra para planejar!"})]})]})]})};function xS({scoreData:t,onClose:e}){const[n,r]=y.useState(!1),s=` Cat Tetris!
 ${t.score.toLocaleString()} pontos
 Nvel ${t.level}
 ${t.lines} linhas

Consegue me superar? `,i=async()=>{try{await navigator.clipboard.writeText(s),r(!0),setTimeout(()=>r(!1),2e3)}catch{}},o=async()=>{if(navigator.share)try{await navigator.share({title:"Minha pontuao no Cat Tetris",text:s})}catch(u){u.name}},a=()=>{const u=`https://twitter.com/intent/tweet?text=${encodeURIComponent(s)}`;window.open(u,"_blank","width=600,height=400")},c=()=>{const u=`https://wa.me/?text=${encodeURIComponent(s)}`;window.open(u,"_blank")};return l.jsxs(N.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-black/40 rounded-lg p-4 mt-4",children:[l.jsx("div",{className:"text-white/80 text-sm mb-3 text-center",children:"Compartilhe sua pontuao:"}),l.jsxs("div",{className:"flex flex-wrap gap-2 justify-center",children:[navigator.share&&l.jsx(N.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:o,className:"bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-lg font-bold flex items-center gap-2 transition-colors",children:" Compartilhar"}),l.jsx(N.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:i,className:`${n?"bg-green-600":"bg-gray-600 hover:bg-gray-500"} text-white px-4 py-2 rounded-lg font-bold flex items-center gap-2 transition-colors`,children:n?" Copiado!":" Copiar"}),l.jsx(N.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:a,className:"bg-[#1DA1F2] hover:bg-[#1a8cd8] text-white px-4 py-2 rounded-lg font-bold flex items-center gap-2 transition-colors",children:" Twitter"}),l.jsx(N.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:c,className:"bg-[#25D366] hover:bg-[#20bd5a] text-white px-4 py-2 rounded-lg font-bold flex items-center gap-2 transition-colors",children:" WhatsApp"})]}),e&&l.jsx("div",{className:"text-center mt-3",children:l.jsx("button",{onClick:e,className:"text-white/60 hover:text-white text-sm transition-colors",children:"Fechar"})})]})}const vS=({score:t,onRestart:e,onBackToMenu:n})=>{const r=typeof t=="number"?t:t.points,s=typeof t=="object"?t.level:1,i=typeof t=="object"?t.lines:0,o=c=>c<1e3?"No desista! Cada tentativa te torna melhor! ":c<5e3?"Bom trabalho! Continue praticando! ":c<1e4?"Excelente! Voc est ficando muito bom! ":"Incrvel! Voc  um mestre do Cat Tetris! ",a=c=>c<1e3?"":c<5e3?"":c<1e4?"":"";return l.jsx(N.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",children:l.jsx(N.div,{initial:{scale:.8,y:20},animate:{scale:1,y:0},transition:{type:"spring",damping:15},className:"bg-gray-900/90 p-8 rounded-2xl border-2 border-white/20 shadow-2xl max-w-md w-full mx-4 max-h-[90vh] overflow-y-auto",children:l.jsxs("div",{className:"text-center",children:[l.jsx(N.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring"},className:"text-6xl mb-4",children:a(r)}),l.jsx(N.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"text-3xl font-cat font-bold text-white mb-2",children:"Game Over!"}),l.jsxs(N.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-gradient-to-r from-yellow-400 to-orange-400 text-gray-900 font-bold text-xl p-3 rounded-lg mb-4",children:[r.toLocaleString()," pontos"]}),l.jsx(N.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"text-white/80 mb-6 text-lg",children:o(r)}),l.jsx(N.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.55},children:l.jsx(xS,{scoreData:{score:r,level:s,lines:i}})}),l.jsxs(N.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"space-y-3 mt-4",children:[l.jsx(N.button,{onClick:c=>{c.stopPropagation(),e()},whileHover:{scale:1.05},whileTap:{scale:.95},className:"w-full bg-gradient-to-r from-green-500 to-emerald-600 text-white font-bold py-3 px-6 rounded-lg hover:from-green-400 hover:to-emerald-500 transition-all duration-300 shadow-lg",children:" Jogar Novamente"}),l.jsx(N.button,{onClick:c=>{c.stopPropagation(),n()},whileHover:{scale:1.05},whileTap:{scale:.95},className:"w-full bg-gradient-to-r from-blue-500 to-cyan-600 text-white font-bold py-3 px-6 rounded-lg hover:from-blue-400 hover:to-cyan-500 transition-all duration-300 shadow-lg",children:" Voltar ao Menu"})]}),l.jsxs(N.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},className:"mt-6 text-center text-white/60 text-sm",children:[l.jsx("p",{children:" Dica: Use a sombra para planejar melhor!"}),l.jsx("p",{children:" Tente fazer combos para mais pontos!"})]})]})})})},yS=({pieces:t})=>{const e=(n,r)=>{if(!n)return null;const s=Math.max(...n.shape.map(o=>o.length)),i=n.shape.length;return l.jsx("div",{className:"bg-gray-800/50 p-1.5 rounded-lg border border-white/20",children:l.jsx("div",{className:"flex justify-center",children:l.jsx("div",{className:"grid gap-1",style:{gridTemplateColumns:`repeat(${s}, 1fr)`,gridTemplateRows:`repeat(${i}, 1fr)`},children:n.shape.map((o,a)=>o.map((c,u)=>l.jsx("div",{className:`w-5 h-5 rounded-sm flex items-center justify-center ${c?"border border-white/40 shadow-sm":""}`,style:{backgroundColor:c?br(n.color):"transparent"},children:c&&c!==0?l.jsx("span",{className:"text-xs leading-none",children:n.emoji}):null},`${u}-${a}`)))})})},r)};return l.jsxs("div",{className:"bg-gray-900/50 p-2 rounded-xl border-2 border-white/20 shadow-2xl w-24",children:[l.jsxs("h2",{className:"text-xs font-bold text-white mb-1 text-center flex items-center justify-center gap-1",children:[l.jsx("span",{children:""}),l.jsx("span",{className:"hidden lg:inline",children:"Prximas"})]}),l.jsx("div",{className:"space-y-1.5",children:t.map((n,r)=>e(n,r))})]})},zn=ce.memo(yS),wS=({heldPiece:t,canHold:e})=>{const n=()=>{if(!t)return l.jsx("div",{className:"bg-gray-800/50 p-2 lg:p-4 rounded-lg border-2 border-dashed border-white/20 flex items-center justify-center",children:l.jsx("span",{className:"text-white/40 text-xs lg:text-sm",children:"Vazio"})});const r=Math.max(...t.shape.map(i=>i.length)),s=t.shape.length;return l.jsx("div",{className:"bg-gray-800/50 p-1.5 rounded-lg border border-white/20",children:l.jsx("div",{className:"flex justify-center",children:l.jsx("div",{className:"grid gap-1",style:{gridTemplateColumns:`repeat(${r}, 1fr)`,gridTemplateRows:`repeat(${s}, 1fr)`},children:t.shape.map((i,o)=>i.map((a,c)=>l.jsx("div",{className:`w-5 h-5 rounded-sm flex items-center justify-center ${a?"border border-white/40 shadow-sm":""}`,style:{backgroundColor:a?br(t.color):"transparent"},children:a&&a!==0?l.jsx("span",{className:"text-xs leading-none",children:t.emoji}):null},`${c}-${o}`)))})})})};return l.jsxs("div",{className:"bg-gray-900/50 p-2 rounded-xl border-2 border-white/20 shadow-2xl w-24",children:[l.jsxs("h2",{className:"text-xs font-bold text-white mb-1 text-center flex items-center justify-center gap-1",children:[l.jsx("span",{children:""}),l.jsx("span",{className:"hidden lg:inline",children:"Guardada"})]}),l.jsx("div",{children:n()})]})},Un=ce.memo(wS),fh=500,ja="cat_tetris_error_log";class SS{constructor(){this.logs=this._loadLogs(),this.sessionId=`session_${Date.now()}_${Math.random().toString(36).substr(2,6)}`,this._gameStateProvider=null,this._setupGlobalHandlers()}_loadLogs(){try{const e=localStorage.getItem(ja);return e?JSON.parse(e):[]}catch{return[]}}_saveLogs(){try{this.logs.length>fh&&(this.logs=this.logs.slice(-fh)),localStorage.setItem(ja,JSON.stringify(this.logs))}catch{this.logs=this.logs.slice(-50);try{localStorage.setItem(ja,JSON.stringify(this.logs))}catch{}}}_setupGlobalHandlers(){typeof window>"u"||(window.addEventListener("error",e=>{var n;this.logError("window","uncaughtError",e.message,{filename:e.filename,lineno:e.lineno,colno:e.colno,stack:(n=e.error)==null?void 0:n.stack})}),window.addEventListener("unhandledrejection",e=>{var n;this.logError("window","unhandledRejection",String(e.reason),{stack:(n=e.reason)==null?void 0:n.stack,type:typeof e.reason})}))}setGameStateProvider(e){this._gameStateProvider=e}_getGameStateSnapshot(){var e,n,r,s,i,o;if(!this._gameStateProvider)return null;try{const a=this._gameStateProvider();return a?{isPlaying:a.isPlaying,isPaused:a.isPaused,gameOver:a.gameOver,score:(e=a.score)==null?void 0:e.points,level:(n=a.score)==null?void 0:n.level,lines:(r=a.score)==null?void 0:r.lines,currentPiece:(s=a.currentPiece)==null?void 0:s.type,gameMode:((i=a.gameMode)==null?void 0:i.id)||((o=a.gameMode)==null?void 0:o.name)||null}:null}catch(a){return{snapshotError:a.message}}}logError(e,n,r,s=null){const i={id:`${Date.now()}_${Math.random().toString(36).substr(2,4)}`,timestamp:new Date().toISOString(),sessionId:this.sessionId,level:"error",source:e,action:n,message:r,details:s,gameState:this._getGameStateSnapshot()};return this.logs.push(i),this._saveLogs(),i}logWarn(e,n,r,s=null){const i={id:`${Date.now()}_${Math.random().toString(36).substr(2,4)}`,timestamp:new Date().toISOString(),sessionId:this.sessionId,level:"warn",source:e,action:n,message:r,details:s,gameState:this._getGameStateSnapshot()};return this.logs.push(i),this._saveLogs(),i}getErrors(){return this.logs.filter(e=>e.level==="error")}clearLogs(){this.logs=[],this._saveLogs()}}const Dt=new SS;class bS extends ce.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){Dt.logError("ErrorBoundary","componentDidCatch",e.message,{stack:e.stack,componentStack:n==null?void 0:n.componentStack}),Dt.saveForExternalAccess()}render(){return this.state.hasError?l.jsx("div",{className:"min-h-screen cat-bg flex items-center justify-center p-4",children:l.jsxs("div",{className:"game-container rounded-2xl p-6 shadow-2xl text-center",children:[l.jsx("h1",{className:"text-3xl font-cat font-bold text-white mb-4",children:" Ops! Algo deu errado"}),l.jsx("p",{className:"text-white/80 mb-4",children:"O jogo encontrou um problema inesperado."}),l.jsx("button",{onClick:()=>window.location.reload(),className:"bg-gradient-to-r from-cat-green to-cat-blue text-white font-bold py-3 px-6 rounded-xl hover:from-cat-blue hover:to-cat-green transition-all duration-200 border-2 border-white/30",children:" Reiniciar Jogo "}),!1]})}):this.props.children}}let _t=null,ph=!1;function kS(){_t&&_t.state==="suspended"&&_t.resume().catch(()=>{})}function jS(){ph||(ph=!0,["click","touchstart","keydown"].forEach(t=>{document.addEventListener(t,kS,{once:!1,passive:!0})}))}function Mr(){if(_t)return _t.state==="suspended"&&_t.resume().catch(()=>{}),_t;try{return _t=new(window.AudioContext||window.webkitAudioContext),jS(),_t}catch{return null}}function CS(){const t=y.useCallback((a,c,u="sine")=>{const h=Mr();if(h)try{const d=h.createOscillator(),f=h.createGain();d.connect(f),f.connect(h.destination),d.frequency.setValueAtTime(a,h.currentTime),d.type=u,f.gain.setValueAtTime(.1,h.currentTime),f.gain.exponentialRampToValueAtTime(.001,h.currentTime+c),d.start(h.currentTime),d.stop(h.currentTime+c)}catch{}},[]),e=y.useCallback(()=>{t(523,.1)},[t]),n=y.useCallback(()=>{t(659,.2),setTimeout(()=>t(784,.15),50)},[t]),r=y.useCallback(()=>{t(440,.15),setTimeout(()=>t(330,.1),80)},[t]),s=y.useCallback(()=>{t(392,.1),setTimeout(()=>t(494,.1),100),setTimeout(()=>t(588,.15),200)},[t]),i=y.useCallback(()=>{const a=Mr();if(a)try{((h,d,f=.3)=>{h.forEach(g=>{const v=a.createOscillator(),w=a.createGain();v.connect(w),w.connect(a.destination),v.frequency.setValueAtTime(g,a.currentTime),v.type="triangle",w.gain.setValueAtTime(.05,a.currentTime+d),w.gain.exponentialRampToValueAtTime(.001,a.currentTime+d+f),v.start(a.currentTime+d),v.stop(a.currentTime+d+f)})})([523,659,784,1047],0,.5)}catch{}},[]),o=y.useCallback(()=>{t(698,.15),setTimeout(()=>t(880,.15),100),setTimeout(()=>t(1047,.2),200)},[t]);return{playMenuHover:e,playMenuSelect:n,playMenuBack:r,playMenuOpen:s,playGameStart:i,playPWAInstall:o}}class TS{constructor(){this.services=new Map,this.singletons=new Map}register(e,n,r={}){this.services.set(e,{factory:n,singleton:r.singleton||!1,dependencies:r.dependencies||[]})}resolve(e){const n=this.services.get(e);if(!n)throw new Error(`Service '${e}' not found in container`);if(n.singleton&&this.singletons.has(e))return this.singletons.get(e);const r=n.dependencies.map(i=>this.resolve(i)),s=n.factory(...r);return n.singleton&&this.singletons.set(e,s),s}registerSingleton(e,n,r=[]){this.register(e,n,{singleton:!0,dependencies:r})}registerTransient(e,n,r=[]){this.register(e,n,{singleton:!1,dependencies:r})}has(e){return this.services.has(e)}clear(){this.services.clear(),this.singletons.clear()}}class PS{initializeGame(){throw new Error("Must be implemented")}movePiece(e){throw new Error("Must be implemented")}rotatePiece(){throw new Error("Must be implemented")}rotatePieceLeft(){throw new Error("Must be implemented")}placePiece(){throw new Error("Must be implemented")}holdPiece(){throw new Error("Must be implemented")}hardDrop(){throw new Error("Must be implemented")}updateGame(e){throw new Error("Must be implemented")}pause(){throw new Error("Must be implemented")}resume(){throw new Error("Must be implemented")}restart(){throw new Error("Must be implemented")}getDropPreview(){throw new Error("Must be implemented")}}class ho{constructor(e=10,n=20){this.width=e,this.height=n,this.bufferHeight=4,this.grid=this.createEmptyGrid(),this._buffer=this.createEmptyBuffer()}createEmptyGrid(){return Array(this.height).fill(null).map(()=>Array(this.width).fill(null))}createEmptyBuffer(){return Array(this.bufferHeight).fill(null).map(()=>Array(this.width).fill(null))}clone(){const e=new ho(this.width,this.height);return e.grid=this.grid.map(n=>[...n]),e._buffer=this._buffer.map(n=>[...n]),e}isWithinBounds(e,n){return e>=0&&e<this.width&&n>=-this.bufferHeight&&n<this.height}getCell(e,n){if(!(e<0||e>=this.width)&&!(n<-this.bufferHeight||n>=this.height))return n<0?this._buffer[this.bufferHeight+n][e]:this.grid[n][e]}setCell(e,n,r){return e<0||e>=this.width||n<-this.bufferHeight||n>=this.height?!1:n<0?(this._buffer[this.bufferHeight+n][e]=r,!0):(this.grid[n][e]=r,!0)}clearCell(e,n){return this.setCell(e,n,null)}placePiece(e){e.getCells().forEach(r=>{this.setCell(r.x,r.y,{type:r.type,color:r.color,emoji:r.emoji})})}canPlacePiece(e){return e.getCells().every(r=>r.x<0||r.x>=this.width||r.y>=this.height||r.y<-this.bufferHeight?!1:this.getCell(r.x,r.y)===null)}clearLines(){const e=[...this._buffer,...this.grid],n=[];let r=0;for(let s=e.length-1;s>=0;s--)e[s].every(o=>o!==null)?r++:n.unshift(e[s]);for(;n.length<e.length;)n.unshift(Array(this.width).fill(null));return this._buffer=n.slice(0,this.bufferHeight),this.grid=n.slice(this.bufferHeight),r}getFilledRows(){const e=[];for(let n=0;n<this.height;n++)this.grid[n].every(r=>r!==null)&&e.push(n);return e}isGameOver(){return this._buffer.some(e=>e.some(n=>n!==null))}getBoardState(){return this.grid.map(e=>[...e])}setBoardState(e){this.grid=e.map(n=>[...n]),this._buffer=this.createEmptyBuffer()}clear(){this.grid=this.createEmptyGrid(),this._buffer=this.createEmptyBuffer()}addGarbageLines(e,n=-1){if(e<=0)return!1;const r=n>=0?n:Math.floor(Math.random()*this.width),s=[];for(let c=0;c<e;c++){const u=Array(this.width).fill(null).map((h,d)=>d===r?null:{type:"garbage",color:"#808080",emoji:""});s.push(u)}const i=this.grid.splice(0,e),o=this._buffer.splice(0,e);return this._buffer.push(...i),this.grid.push(...s),o.some(c=>c.some(u=>u!==null))}}class fo{constructor(){this.points=0,this.level=1,this.lines=0,this.combo=0,this.tSpins=0,this.backToBack=0,this.tetrisCount=0,this._fixedLevel=null}addPoints(e){this.points+=e}addLines(e){this.lines+=e,this.updateLevel()}incrementCombo(){this.combo++}resetCombo(){this.combo=0}addTSpin(){this.tSpins++}addBackToBack(){this.backToBack++}addTetris(){this.tetrisCount++}updateLevel(){this._fixedLevel||(this.level=Math.min(15,Math.floor(this.lines/10)+1))}getLevel(){return this.level}getDropTime(){const e=this._fixedLevel||this.level;return[1e3,793,618,473,355,262,190,135,94,64,43,28,18,11,7][Math.min(e,15)-1]||7}reset(){this.points=0,this.level=1,this.lines=0,this.combo=0,this.tSpins=0,this.backToBack=0,this.tetrisCount=0,this._fixedLevel=null}clone(){const e=new fo;return e.points=this.points,e.level=this.level,e.lines=this.lines,e.combo=this.combo,e.tSpins=this.tSpins,e.backToBack=this.backToBack,e.tetrisCount=this.tetrisCount,e}toJSON(){return{points:this.points,level:this.level,lines:this.lines,combo:this.combo,tSpins:this.tSpins,backToBack:this.backToBack,tetrisCount:this.tetrisCount}}}class jt{constructor(e,n,r,s,i,o=!1,a=0){this.type=e,this.shape=n,this.color=r,this.emoji=s,this.position=i,this.isTSpin=o,this.rotationState=a}move(e,n){return new jt(this.type,this.shape,this.color,this.emoji,{x:this.position.x+e,y:this.position.y+n},this.isTSpin,this.rotationState)}rotate(){const e=this.shape[0].map((n,r)=>this.shape.map(s=>s[r]).reverse());return new jt(this.type,e,this.color,this.emoji,this.position,this.isTSpin,(this.rotationState+1)%4)}setTSpin(e){return new jt(this.type,this.shape,this.color,this.emoji,this.position,e,this.rotationState)}clone(){return new jt(this.type,this.shape.map(e=>[...e]),this.color,this.emoji,{...this.position},this.isTSpin,this.rotationState)}reset(e,n,r,s,i,o=!1){return this.type=e,this.shape=n,this.color=r,this.emoji=s,this.position=i,this.isTSpin=o,this.rotationState=0,this}getWidth(){var e;return((e=this.shape[0])==null?void 0:e.length)||0}getHeight(){return this.shape.length||0}getCells(){const e=[];return this.shape.forEach((n,r)=>{n.forEach((s,i)=>{s&&e.push({x:this.position.x+i,y:this.position.y+r,type:this.type,color:this.color,emoji:this.emoji})})}),e}}class ES{calculateScore(e,n,r,s,i){throw new Error("Must be implemented")}calculateSoftDropPoints(){throw new Error("Must be implemented")}calculateTSpinBonus(e){throw new Error("Must be implemented")}calculateBackToBackBonus(e){throw new Error("Must be implemented")}calculateComboBonus(e){throw new Error("Must be implemented")}}class xn extends ES{calculateScore(e,n,r,s,i){let o=this.getBasePoints(e);return s&&(o=this.calculateTSpinBonus(e)),i&&(o=this.calculateBackToBackBonus(o)),o*=n,o+=this.calculateComboBonus(r),o}calculateSoftDropPoints(){return 1}calculateTSpinBonus(e){return[0,800,1200,1600,2e3][e]||0}calculateBackToBackBonus(e){return Math.floor(e*1.5)}calculateComboBonus(e){return e*50}getBasePoints(e){return[0,100,300,500,800][e]||0}}const Me={BOARD_WIDTH:10,BOARD_HEIGHT:20,BUFFER_ROWS:4,INITIAL_DROP_TIME:1e3,LOCK_DELAY:500,SOFT_DROP_MULTIPLIER:20,NEXT_PIECES_COUNT:3,BAG_SIZE:7,KICK_OFFSETS:[{x:-1,y:0},{x:1,y:0},{x:0,y:-1},{x:-1,y:-1},{x:1,y:-1}],SRS_KICKS_CW:{"0>1":[{x:-1,y:0},{x:-1,y:-1},{x:0,y:2},{x:-1,y:2}],"1>2":[{x:1,y:0},{x:1,y:1},{x:0,y:-2},{x:1,y:-2}],"2>3":[{x:1,y:0},{x:1,y:-1},{x:0,y:2},{x:1,y:2}],"3>0":[{x:-1,y:0},{x:-1,y:1},{x:0,y:-2},{x:-1,y:-2}]},SRS_KICKS_CCW:{"1>0":[{x:1,y:0},{x:1,y:1},{x:0,y:-2},{x:1,y:-2}],"2>1":[{x:-1,y:0},{x:-1,y:-1},{x:0,y:2},{x:-1,y:2}],"3>2":[{x:-1,y:0},{x:-1,y:1},{x:0,y:-2},{x:-1,y:-2}],"0>3":[{x:1,y:0},{x:1,y:-1},{x:0,y:2},{x:1,y:2}]},DROP_TIMES:[1e3,850,700,600,500,400,350,300,250,200,150,100,80,60,50],LEVEL_LINES_REQUIREMENT:10,MAX_LEVEL:15};class $n extends PS{constructor(e,n,r,s=new xn){super(),this.pieceFactory=e,this.movementStrategyFactory=n,this.gameRepository=r,this.scoringService=s,this.board=new ho(Me.BOARD_WIDTH,Me.BOARD_HEIGHT),this.score=new fo,this.currentPiece=null,this.nextPieces=[],this.heldPiece=null,this.canHold=!0,this.isPlaying=!1,this.isPaused=!1,this.gameOver=!1,this.lastDropTime=0,this.backToBack=!1,this._lockDelayActive=!1,this._lockDelayElapsed=0,this._lockDelayResets=0,this._lockDelayMax=Me.LOCK_DELAY,this._lockDelayMaxResets=15,this.gameMode=null,this.modeTimeElapsed=0,this.modeStartTime=0,this.pendingGarbage=0,this._lastAttack=0,this._dirty=!0,this._cachedState=null}_markDirty(){this._dirty=!0,this._cachedState=null}get isDirty(){return this._dirty}clearDirty(){this._dirty=!1}initializeGame(){this.pieceFactory.resetBag(),this.board=new ho(Me.BOARD_WIDTH,Me.BOARD_HEIGHT),this.score=new fo,this.currentPiece=this.pieceFactory.createRandomPiece(),this.nextPieces=this.pieceFactory.createNextPieces(Me.NEXT_PIECES_COUNT),this.heldPiece=null,this.canHold=!0,this.isPlaying=!1,this.isPaused=!1,this.gameOver=!1,this.lastDropTime=0,this.backToBack=!1,this._lockDelayActive=!1,this._lockDelayElapsed=0,this._lockDelayResets=0,this.modeTimeElapsed=0,this.modeStartTime=Date.now(),this.pendingGarbage=0,this._lastAttack=0,this.applyGameMode(),R.emit(G.GAME_INITIALIZED),this._markDirty()}setGameMode(e){this.gameMode=e}applyGameMode(){if(!this.gameMode||!this.gameMode.rules)return;const e=this.gameMode.rules;e.startLevel&&(this.score.level=e.startLevel),e.fixedLevel?this.score._fixedLevel=e.fixedLevel:this.score._fixedLevel=null,this._modeRules=e}movePiece(e){var n,r;if(!(!this.currentPiece||this.gameOver||this.isPaused))try{const s=this.movementStrategyFactory.createStrategy(e),i=s.execute(this.currentPiece,this.board.grid);if(i!==this.currentPiece){if(this.currentPiece=i,this._markDirty(),e==="down"){if(this._lockDelayActive=!1,this._lockDelayElapsed=0,this.lastDropTime=0,s.getSoftDropPoints){const o=this.scoringService.calculateSoftDropPoints();this.score.addPoints(o)}}else(e==="left"||e==="right")&&(this._resetLockDelay(),this._checkUngrounded());R.emit(G.PIECE_MOVED,{direction:e,piece:i})}else e==="down"&&(this._markDirty(),this._lockDelayActive||(this._lockDelayActive=!0,this._lockDelayElapsed=0,this._lockDelayResets=0))}catch(s){Dt.logError("GameService","movePiece",s.message,{direction:e,pieceType:(n=this.currentPiece)==null?void 0:n.type,piecePos:(r=this.currentPiece)==null?void 0:r.position,stack:s.stack})}}rotatePiece(){var e,n;if(!(!this.currentPiece||this.gameOver||this.isPaused))try{const s=this.movementStrategyFactory.createStrategy("rotate").execute(this.currentPiece,this.board.grid);s!==this.currentPiece&&(this.currentPiece=s,this._markDirty(),this._resetLockDelay(),this._checkUngrounded(),R.emit(G.PIECE_ROTATED,{piece:s}))}catch(r){Dt.logError("GameService","rotatePiece",r.message,{pieceType:(e=this.currentPiece)==null?void 0:e.type,piecePos:(n=this.currentPiece)==null?void 0:n.position,stack:r.stack})}}rotatePieceLeft(){if(!this.currentPiece||this.gameOver||this.isPaused)return;const n=this.movementStrategyFactory.createStrategy("rotateLeft").execute(this.currentPiece,this.board.grid);n!==this.currentPiece&&(this.currentPiece=n,this._markDirty(),this._resetLockDelay(),this._checkUngrounded(),R.emit(G.PIECE_ROTATED,{piece:n}))}placePiece(){var n,r;if(!this.currentPiece)return;this._markDirty(),this._lockDelayActive=!1,this._lockDelayElapsed=0,this._lockDelayResets=0,this._lastAttack=0,this.board.placePiece(this.currentPiece);const e=this.board.clearLines();if(e>0){this.score.addLines(e),this.score.incrementCombo();const s=this.currentPiece.isTSpin,i=this.scoringService.calculateScore(e,this.score.getLevel(),this.score.combo,s,this.backToBack);if(this.score.addPoints(i),s||e===4?(this.backToBack&&R.emit(G.BACK_TO_BACK),this.backToBack=!0,s&&(this.score.addTSpin(),R.emit(G.T_SPIN,{linesCleared:e}))):this.backToBack=!1,R.emit(G.LINE_CLEARED,{linesCleared:e}),R.emit(G.SCORE_UPDATED,{score:this.score.points,level:this.score.level,combo:this.score.combo,points:i,isTSpin:s}),this._lastAttack=this._calculateAttack(e,s,this.score.combo,this.backToBack),this._lastAttack>0&&this.pendingGarbage>0){const o=Math.min(this._lastAttack,this.pendingGarbage);this._lastAttack-=o,this.pendingGarbage-=o}}else this.score.resetCombo();if(R.emit(G.PIECE_PLACED,{piece:this.currentPiece,linesCleared:e}),this.pendingGarbage>0){const s=this.board.addGarbageLines(this.pendingGarbage);if(this.pendingGarbage=0,s&&this.board.isGameOver()){this.gameOver=!0,R.emit(G.GAME_OVER);return}}if(this.getNextPiece(),this.canHold=!0,(n=this._modeRules)!=null&&n.lineGoal&&this.score.lines>=this._modeRules.lineGoal){this.gameOver=!0,R.emit(G.GAME_OVER);return}if(((r=this._modeRules)==null?void 0:r.gameOver)===!1){if(this.board.isGameOver()){this.board._buffer=this.board.createEmptyBuffer();for(let s=0;s<4;s++)for(let i=0;i<this.board.width;i++)this.board.clearCell(i,s)}}else this.board.isGameOver()&&(this.gameOver=!0,R.emit(G.GAME_OVER))}_calculateAttack(e,n,r,s){if(e===0)return 0;let i=0;if(n?i=[0,2,4,6][e]||0:i=[0,0,1,2,4][e]||0,s&&(n||e===4)&&(i+=1),r>=1){const a=[0,0,1,1,2,2,3,3,4,4];i+=a[Math.min(r,a.length-1)]||4}return this.board.grid.every(a=>a.every(c=>c===null))&&(i=10),i}receiveGarbage(e){e>0&&(this.pendingGarbage+=e,this._markDirty())}consumeAttack(){const e=this._lastAttack;return this._lastAttack=0,e}holdPiece(){var e,n;if(!(!this.canHold||!this.currentPiece)){this._lockDelayActive=!1,this._lockDelayElapsed=0,this._lockDelayResets=0;try{const r=this.heldPiece,s=this.currentPiece.type,i=Rt[s];if(this.heldPiece=new jt(s,i.shape,i.color,i.emoji,{x:3,y:0},!1,0),r){const o=r.type==="I"?{x:3,y:-2}:{x:3,y:0},a=Rt[r.type];this.currentPiece=new jt(r.type,a.shape,a.color,a.emoji,o,!1,0)}else this.getNextPiece();this.canHold=!1,this._markDirty(),R.emit(G.PIECE_HELD,{heldPiece:this.heldPiece})}catch(r){Dt.logError("GameService","holdPiece",r.message,{currentPieceType:(e=this.currentPiece)==null?void 0:e.type,heldPieceType:(n=this.heldPiece)==null?void 0:n.type,stack:r.stack})}}}hardDrop(){var e,n;if(!(!this.currentPiece||this.gameOver||this.isPaused))try{this._lockDelayActive=!1,this._lockDelayElapsed=0;const s=this.movementStrategyFactory.createStrategy("hardDrop").execute(this.currentPiece,this.board.grid);this.currentPiece=s.piece,this.score.addPoints(s.dropDistance),this._markDirty();const i=this.currentPiece;R.emit(G.HARD_DROP,{dropDistance:s.dropDistance}),R.emit(G.PIECE_MOVED,{direction:"hardDrop",piece:i}),this.placePiece()}catch(r){Dt.logError("GameService","hardDrop",r.message,{pieceType:(e=this.currentPiece)==null?void 0:e.type,piecePos:(n=this.currentPiece)==null?void 0:n.position,stack:r.stack})}}updateGame(e){var n;if(!(!this.isPlaying||this.gameOver||this.isPaused)){if((n=this._modeRules)!=null&&n.timeLimit&&(this.modeTimeElapsed=(Date.now()-this.modeStartTime)/1e3,this.modeTimeElapsed>=this._modeRules.timeLimit)){this.gameOver=!0,this._markDirty(),R.emit(G.GAME_OVER);return}if(this._lockDelayActive){if(this._lockDelayElapsed+=e,this._lockDelayElapsed>=this._lockDelayMax){this._lockDelayActive=!1,this._lockDelayElapsed=0,this.placePiece(),this.lastDropTime=0;return}return}this.lastDropTime+=e,this.lastDropTime>=this.score.getDropTime()&&(this.movePiece("down"),this.lastDropTime=0)}}_resetLockDelay(){this._lockDelayActive&&this._lockDelayResets<this._lockDelayMaxResets&&(this._lockDelayElapsed=0,this._lockDelayResets++)}_checkUngrounded(){if(!this._lockDelayActive||!this.currentPiece)return;this.board.canPlacePiece(this.currentPiece.move(0,1))&&(this._lockDelayActive=!1,this._lockDelayElapsed=0,this._lockDelayResets=0)}pause(){this.isPaused=!0,this._markDirty(),R.emit(G.GAME_PAUSED)}resume(){this.isPaused=!1,this.isPlaying=!0,this._markDirty(),R.emit(G.GAME_RESUMED)}restart(){this.initializeGame(),this.isPlaying=!0,this.isPaused=!1,this.modeStartTime=Date.now(),this._markDirty()}getDropPreview(){if(!this.currentPiece)return null;let e=this.currentPiece,n=0;const r=20;for(;n<r&&this.board.canPlacePiece(e.move(0,1));)e=e.move(0,1),n++;return e}getNextPiece(){const e=this.nextPieces.shift();this.nextPieces.push(this.pieceFactory.createRandomPiece()),this.currentPiece=e,this.currentPiece&&!this.board.canPlacePiece(this.currentPiece)&&(this.gameOver=!0,this._markDirty(),R.emit(G.GAME_OVER))}getGameState(){var e;return this._cachedState&&!this._dirty?this._cachedState:(this._cachedState={board:this.board.grid.map(n=>[...n]),currentPiece:this.currentPiece,nextPieces:[...this.nextPieces],heldPiece:this.heldPiece,canHold:this.canHold,score:this.score.toJSON(),isPlaying:this.isPlaying,isPaused:this.isPaused,gameOver:this.gameOver,backToBack:this.backToBack,gameMode:this.gameMode,modeTimeElapsed:(e=this._modeRules)!=null&&e.timeLimit?Math.max(0,this._modeRules.timeLimit-(Date.now()-this.modeStartTime)/1e3):null},this._cachedState)}setGameState(e){this.board.setBoardState(e.board),this.currentPiece=e.currentPiece,this.nextPieces=e.nextPieces,this.heldPiece=e.heldPiece,this.canHold=e.canHold,this.isPlaying=e.isPlaying,this.isPaused=e.isPaused,this.gameOver=e.gameOver,this.backToBack=e.backToBack,Object.assign(this.score,e.score)}}class NS{saveHighScore(e){throw new Error("Must be implemented")}getHighScore(){throw new Error("Must be implemented")}saveSettings(e){throw new Error("Must be implemented")}getSettings(){throw new Error("Must be implemented")}saveGameState(e){throw new Error("Must be implemented")}getGameState(){throw new Error("Must be implemented")}clearGameState(){throw new Error("Must be implemented")}}class _S extends NS{constructor(){super(),this.highScoreKey="cat-tetris-high-score",this.settingsKey="cat-tetris-settings",this.gameStateKey="cat-tetris-game-state"}saveHighScore(e){localStorage.setItem(this.highScoreKey,e.toString())}getHighScore(){return parseInt(localStorage.getItem(this.highScoreKey)||"0")}saveSettings(e){localStorage.setItem(this.settingsKey,JSON.stringify(e))}getSettings(){const e=localStorage.getItem(this.settingsKey);return e?JSON.parse(e):{volume:80,gameSpeed:"normal",soundEnabled:!0,particlesEnabled:!0}}saveGameState(e){localStorage.setItem(this.gameStateKey,JSON.stringify(e))}getGameState(){const e=localStorage.getItem(this.gameStateKey);return e?JSON.parse(e):null}clearGameState(){localStorage.removeItem(this.gameStateKey)}load(e){const n=localStorage.getItem(`cat-tetris-${e}`);return n?JSON.parse(n):null}save(e,n){localStorage.setItem(`cat-tetris-${e}`,JSON.stringify(n))}remove(e){localStorage.removeItem(`cat-tetris-${e}`)}}class AS{createPiece(e,n){throw new Error("Must be implemented")}createRandomPiece(){throw new Error("Must be implemented")}createNextPieces(e){throw new Error("Must be implemented")}}class MS{execute(e,n){throw new Error("Must be implemented")}}class Or extends MS{execute(e,n){throw new Error("execute method must be implemented")}movePiece(e,n,r,s){if(!e||!n||!Array.isArray(n))return e;const i={x:e.position.x+r,y:e.position.y+s};return this.isValidMove(e,n,i)?e.move(r,s):e}isValidMove(e,n,r){return!e||!e.shape||!n||!Array.isArray(n)?!1:e.shape.every((s,i)=>Array.isArray(s)?s.every((o,a)=>{if(!o)return!0;const c=r.x+a,u=r.y+i;return c<0||c>=Me.BOARD_WIDTH||u>=Me.BOARD_HEIGHT?!1:u<0?!0:n[u]&&Array.isArray(n[u])&&!n[u][c]}):!0)}}class LS extends Or{execute(e,n){return this.movePiece(e,n,-1,0)}}class RS extends Or{execute(e,n){return this.movePiece(e,n,1,0)}}class DS extends Or{execute(e,n){if(!e||!n)return e;const r={x:e.position.x,y:e.position.y+1};return this.isValidMove(e,n,r)?e.move(0,1):e}getSoftDropPoints(){return 1}}class IS extends Or{execute(e,n){var u;if(!e||!e.shape||!n)return e;const r=this.rotatePiece(e);let s=!1;if(this.isValidMove(r,n,r.position))return s=this.detectTSpin(r,n),r.setTSpin(s);const i=e.rotationState??0,o=(i+1)%4,a=`${i}>${o}`,c=((u=Me.SRS_KICKS_CW)==null?void 0:u[a])||Me.KICK_OFFSETS;for(const h of c){const d={x:r.position.x+h.x,y:r.position.y+h.y};if(this.isValidMove(r,n,d)){const f=r.move(h.x,h.y);return s=this.detectTSpin(f,n),f.setTSpin(s)}}return e}detectTSpin(e,n){return e.type!=="T"?!1:this.getCornerPositions(e).filter(o=>o.x<0||o.x>=Me.BOARD_WIDTH||o.y<0||o.y>=Me.BOARD_HEIGHT||n[o.y]&&n[o.y][o.x]).length>=3}getCornerPositions(e){const n=[],r=e.position.x,s=e.position.y;return n.push({x:r,y:s}),n.push({x:r+2,y:s}),n.push({x:r,y:s+2}),n.push({x:r+2,y:s+2}),n}rotatePiece(e){return!e||!e.shape||!Array.isArray(e.shape)||e.shape.length===0?e:e.rotate()}}class OS extends Or{execute(e,n){var u;if(!e||!e.shape||!n)return e;const r=this.rotatePieceLeft(e);let s=!1;if(this.isValidMove(r,n,r.position))return s=this.detectTSpin(r,n),r.setTSpin(s);const i=e.rotationState??0,o=(i+3)%4,a=`${i}>${o}`,c=((u=Me.SRS_KICKS_CCW)==null?void 0:u[a])||Me.KICK_OFFSETS;for(const h of c){const d={x:r.position.x+h.x,y:r.position.y+h.y};if(this.isValidMove(r,n,d)){const f=r.move(h.x,h.y);return s=this.detectTSpin(f,n),f.setTSpin(s)}}return e}detectTSpin(e,n){return e.type!=="T"?!1:this.getCornerPositions(e).filter(o=>o.x<0||o.x>=Me.BOARD_WIDTH||o.y<0||o.y>=Me.BOARD_HEIGHT||n[o.y]&&n[o.y][o.x]).length>=3}getCornerPositions(e){const n=[],r=e.position.x,s=e.position.y;return n.push({x:r,y:s}),n.push({x:r+2,y:s}),n.push({x:r,y:s+2}),n.push({x:r+2,y:s+2}),n}rotatePieceLeft(e){if(!e||!e.shape||!Array.isArray(e.shape)||e.shape.length===0)return e;const n=e.shape[0].map((r,s)=>e.shape.map(i=>i[i.length-1-s]));return new jt(e.type,n,e.color,e.emoji,e.position,e.isTSpin,(e.rotationState+3)%4)}}class FS extends Or{execute(e,n){if(!e||!n)return{piece:e,dropDistance:0};let r=e,s=0;for(;;){const i={x:r.position.x,y:r.position.y+1};if(this.isValidMove(r,n,i))r=r.move(0,1),s++;else break}return{piece:r,dropDistance:s}}}class mh{constructor(){this.reset()}reset(){return this.piece={type:null,shape:[],color:"#000000",emoji:"",position:{x:3,y:0},isTSpin:!1},this}setType(e){return this.piece.type=e,this}setShape(e){return this.piece.shape=e,this}setColor(e){return this.piece.color=e,this}setEmoji(e){return this.piece.emoji=e,this}setPosition(e,n){return this.piece.position={x:e,y:n},this}setTSpin(e){return this.piece.isTSpin=e,this}build(){const e=new jt(this.piece.type,this.piece.shape,this.piece.color,this.piece.emoji,this.piece.position,this.piece.isTSpin);return this.reset(),e}}class Wn extends AS{constructor(){super(),this.pieceConfigs=Rt,this._bag=[],this._bagIndex=0}_refillBag(){this._bag=Object.keys(this.pieceConfigs);for(let e=this._bag.length-1;e>0;e--){const n=Math.floor(Math.random()*(e+1));[this._bag[e],this._bag[n]]=[this._bag[n],this._bag[e]]}this._bagIndex=0}resetBag(){this._bag=[],this._bagIndex=0}_getNextType(){return this._bagIndex>=this._bag.length&&this._refillBag(),this._bag[this._bagIndex++]}createPiece(e,n={x:3,y:0}){const r=this.pieceConfigs[e];if(!r)throw new Error(`Tipo de pea invlido: ${e}`);return new mh().setType(e).setShape(r.shape).setColor(r.color).setEmoji(r.emoji).setPosition(n.x,n.y).build()}createRandomPiece(){const e=this._getNextType(),n=this.pieceConfigs[e];let r={x:3,y:0};return e==="I"&&(r={x:3,y:-2}),new mh().setType(e).setShape(n.shape).setColor(n.color).setEmoji(n.emoji).setPosition(r.x,r.y).build()}createNextPieces(e=3){const n=[];for(let r=0;r<e;r++)n.push(this.createRandomPiece());return n}registerPieceType(e,n){this.pieceConfigs[e]=n}getPieceTypes(){return Object.keys(this.pieceConfigs)}}class qn{constructor(){this.strategies=new Map,this.registerDefaultStrategies()}registerDefaultStrategies(){this.strategies.set("left",()=>new LS),this.strategies.set("right",()=>new RS),this.strategies.set("down",()=>new DS),this.strategies.set("rotate",()=>new IS),this.strategies.set("rotateLeft",()=>new OS),this.strategies.set("hardDrop",()=>new FS)}createStrategy(e){const n=this.strategies.get(e);if(!n)throw new Error(`Strategy type '${e}' not found`);return n()}registerStrategy(e,n){if(typeof n!="function")throw new Error("Strategy factory must be a function");this.strategies.set(e,n)}unregisterStrategy(e){this.strategies.delete(e)}getAvailableStrategies(){return Array.from(this.strategies.keys())}hasStrategy(e){return this.strategies.has(e)}}class GS{getSettings(){throw new Error("Method getSettings must be implemented")}saveSettings(e){throw new Error("Method saveSettings must be implemented")}updateSetting(e,n){throw new Error("Method updateSetting must be implemented")}resetSettings(){throw new Error("Method resetSettings must be implemented")}}class VS extends GS{constructor(){super(),this.storageKey="cat-tetris-settings",this.defaultSettings={volume:80,gameSpeed:"normal",soundEnabled:!0,particlesEnabled:!0}}getSettings(){try{const e=localStorage.getItem(this.storageKey);return e?{...this.defaultSettings,...JSON.parse(e)}:this.defaultSettings}catch{return this.defaultSettings}}saveSettings(e){try{const n={...this.defaultSettings,...e};return localStorage.setItem(this.storageKey,JSON.stringify(n)),n}catch{throw new Error("Failed to save settings")}}resetSettings(){try{return localStorage.removeItem(this.storageKey),this.defaultSettings}catch{throw new Error("Failed to reset settings")}}updateSetting(e,n){const s={...this.getSettings(),[e]:n};return this.saveSettings(s)}}class BS{getStats(){throw new Error("Method getStats must be implemented")}incrementPlayTime(){throw new Error("Method incrementPlayTime must be implemented")}incrementPiecesPlaced(){throw new Error("Method incrementPiecesPlaced must be implemented")}addLinesCleared(e){throw new Error("Method addLinesCleared must be implemented")}incrementTSpins(){throw new Error("Method incrementTSpins must be implemented")}updateMaxCombo(e){throw new Error("Method updateMaxCombo must be implemented")}reset(){throw new Error("Method reset must be implemented")}}class HS extends BS{constructor(){super(),this.stats={playTime:0,piecesPlaced:0,linesCleared:0,tSpins:0,backToBack:0,maxCombo:0,tetrisCount:0,linesPerSecond:0},this.sessionStartTime=Date.now()}getStats(){return{...this.stats}}incrementPlayTime(){this.stats.playTime+=1,this.calculateLinesPerSecond()}incrementPiecesPlaced(){this.stats.piecesPlaced+=1}addLinesCleared(e){this.stats.linesCleared+=e,e===4&&(this.stats.tetrisCount+=1),this.calculateLinesPerSecond()}incrementTSpins(){this.stats.tSpins+=1}incrementBackToBack(){this.stats.backToBack+=1}updateMaxCombo(e){e>this.stats.maxCombo&&(this.stats.maxCombo=e)}calculateLinesPerSecond(){this.stats.playTime>0?this.stats.linesPerSecond=this.stats.linesCleared/this.stats.playTime:this.stats.linesPerSecond=0}reset(){this.stats={playTime:0,piecesPlaced:0,linesCleared:0,tSpins:0,backToBack:0,maxCombo:0,tetrisCount:0,linesPerSecond:0},this.sessionStartTime=Date.now()}getSessionDuration(){return Date.now()-this.sessionStartTime}}class zS{registerHandler(e,n){throw new Error("Method registerHandler must be implemented")}unregisterHandler(e,n){throw new Error("Method unregisterHandler must be implemented")}startListening(){throw new Error("Method startListening must be implemented")}stopListening(){throw new Error("Method stopListening must be implemented")}setKeyMapping(e,n){throw new Error("Method setKeyMapping must be implemented")}getKeyMappings(){throw new Error("Method getKeyMappings must be implemented")}}class US extends zS{constructor(){super();Ks(this,"_handleKeyDown",n=>{if(this.preventDefaultKeys.includes(n.key)&&n.preventDefault(),n.repeat)return;const r=this.keyMappings[n.key];r&&(this._fireAction(r),this._dasActions.has(r)&&this._pressedKeys.set(n.key,{action:r,dasTimer:0,arrTimer:0,dasTriggered:!1}))});Ks(this,"_handleKeyUp",n=>{this._pressedKeys.delete(n.key)});Ks(this,"_handleBlur",()=>{this._pressedKeys.clear()});this.keyMappings={ArrowLeft:"moveLeft",ArrowRight:"moveRight",ArrowDown:"moveDown",ArrowUp:"rotate",x:"rotate",X:"rotate",z:"rotateLeft",Z:"rotateLeft"," ":"hardDrop",c:"hold",C:"hold",Shift:"hold",p:"pause",P:"pause",Escape:"pause"},this.preventDefaultKeys=["ArrowLeft","ArrowRight","ArrowDown","ArrowUp"," "],this.handlers=new Map,this.isListening=!1,this.das=167,this.arr=33,this.sdf=5,this._dasActions=new Set(["moveLeft","moveRight","moveDown"]),this._pressedKeys=new Map,this._rafId=null,this._lastTime=0}setDAS(n){this.das=Math.max(0,n)}setARR(n){this.arr=Math.max(0,n)}getDAS(){return this.das}getARR(){return this.arr}registerHandler(n,r){this.handlers.has(n)||this.handlers.set(n,[]),this.handlers.get(n).push(r)}unregisterHandler(n,r){if(this.handlers.has(n)){const s=this.handlers.get(n),i=s.indexOf(r);i>-1&&s.splice(i,1)}}_fireAction(n){this.handlers.has(n)&&this.handlers.get(n).forEach(r=>{try{r()}catch{}})}startListening(){this.isListening||(window.addEventListener("keydown",this._handleKeyDown),window.addEventListener("keyup",this._handleKeyUp),window.addEventListener("blur",this._handleBlur),this.isListening=!0,this._startLoop())}stopListening(){this.isListening&&(window.removeEventListener("keydown",this._handleKeyDown),window.removeEventListener("keyup",this._handleKeyUp),window.removeEventListener("blur",this._handleBlur),this.isListening=!1,this._stopLoop(),this._pressedKeys.clear())}_startLoop(){this._lastTime=performance.now();const n=r=>{const s=r-this._lastTime;this._lastTime=r,this._updateDAS(s),this._rafId=requestAnimationFrame(n)};this._rafId=requestAnimationFrame(n)}_stopLoop(){this._rafId&&(cancelAnimationFrame(this._rafId),this._rafId=null)}_updateDAS(n){for(const[r,s]of this._pressedKeys)if(s.dasTriggered)if(s.arrTimer+=n,this.arr===0){for(let i=0;i<20;i++)this._fireAction(s.action);s.arrTimer=0}else for(;s.arrTimer>=this.arr;)s.arrTimer-=this.arr,this._fireAction(s.action);else if(s.dasTimer+=n,s.dasTimer>=this.das)if(s.dasTriggered=!0,s.arrTimer=0,this.arr===0)for(let i=0;i<20;i++)this._fireAction(s.action);else this._fireAction(s.action)}setKeyMapping(n,r){this.keyMappings[n]=r}removeKeyMapping(n){delete this.keyMappings[n]}getKeyMappings(){return{...this.keyMappings}}clear(){this.handlers.clear(),this.stopListening()}}class $S{constructor(e){this.gameRepository=e,this.currency=this.loadCurrency()}loadCurrency(){return this.gameRepository.load("playerCurrency")||{fish:0,totalEarned:0,totalSpent:0}}save(){this.gameRepository.save("playerCurrency",this.currency)}getFish(){return this.currency.fish}getCurrency(){return{...this.currency}}addFish(e,n="unknown"){return e<=0?!1:(this.currency.fish+=e,this.currency.totalEarned+=e,this.save(),!0)}spendFish(e,n="unknown"){return e<=0||this.currency.fish<e?!1:(this.currency.fish-=e,this.currency.totalSpent+=e,this.save(),!0)}canAfford(e){return this.currency.fish>=e}reset(){this.currency={fish:0,totalEarned:0,totalSpent:0},this.save()}getStats(){return{currentFish:this.currency.fish,totalEarned:this.currency.totalEarned,totalSpent:this.currency.totalSpent,netWorth:this.currency.totalEarned-this.currency.totalSpent}}}const oe={CLEAR_LINES:"clear_lines",T_SPINS:"t_spins",COMBOS:"combos",SURVIVE_TIME:"survive_time",REACH_LEVEL:"reach_level",SCORE_POINTS:"score_points",PLACE_PIECES:"place_pieces",BACK_TO_BACK:"back_to_back",TETRIS_CLEAR:"tetris_clear"},Ca=[{type:oe.CLEAR_LINES,target:20,reward:100,difficulty:"easy",title:"Limpeza Bsica",description:"Limpe 20 linhas"},{type:oe.PLACE_PIECES,target:30,reward:100,difficulty:"easy",title:"Gato Trabalhador",description:"Coloque 30 peas"},{type:oe.SURVIVE_TIME,target:180,reward:120,difficulty:"easy",title:"Sobrevivente",description:"Sobreviva por 3 minutos"},{type:oe.SCORE_POINTS,target:5e3,reward:150,difficulty:"easy",title:"Fazendo Pontos",description:"Alcance 5.000 pontos"},{type:oe.CLEAR_LINES,target:40,reward:200,difficulty:"medium",title:"Limpeza Profunda",description:"Limpe 40 linhas em uma partida"},{type:oe.T_SPINS,target:3,reward:250,difficulty:"medium",title:"Mestre do T-Spin",description:"Faa 3 T-Spins"},{type:oe.COMBOS,target:7,reward:200,difficulty:"medium",title:"Combo Felino",description:"Alcance um combo de 7x"},{type:oe.REACH_LEVEL,target:8,reward:180,difficulty:"medium",title:"Subindo de Nvel",description:"Alcance o nvel 8"},{type:oe.TETRIS_CLEAR,target:2,reward:220,difficulty:"medium",title:"Tetris Duplo",description:"Faa 2 Tetris (4 linhas)"},{type:oe.T_SPINS,target:5,reward:350,difficulty:"hard",title:"Ninja T-Spin",description:"Faa 5 T-Spins em uma partida"},{type:oe.COMBOS,target:10,reward:300,difficulty:"hard",title:"Combo Insano",description:"Alcance um combo de 10x"},{type:oe.SURVIVE_TIME,target:600,reward:400,difficulty:"hard",title:"Resistncia Felina",description:"Sobreviva por 10 minutos"},{type:oe.REACH_LEVEL,target:12,reward:350,difficulty:"hard",title:"Mestre dos Gatos",description:"Alcance o nvel 12"},{type:oe.SCORE_POINTS,target:5e4,reward:400,difficulty:"hard",title:"Pontuao Lendria",description:"Alcance 50.000 pontos"},{type:oe.BACK_TO_BACK,target:3,reward:380,difficulty:"hard",title:"Back-to-Back Master",description:"Faa 3 back-to-backs"}];class WS{constructor(e,n){this.gameRepository=e,this.currencyService=n,this.missions=this.loadMissions(),this.checkAndResetDaily()}loadMissions(){return this.gameRepository.load("dailyMissions")||this.generateNewMissions()}save(){this.gameRepository.save("dailyMissions",this.missions)}checkAndResetDaily(){const n=new Date().toDateString();this.missions.lastResetDate!==n&&(this.missions=this.generateNewMissions(),this.save())}generateNewMissions(){const e=Ca.filter(o=>o.difficulty==="easy"),n=Ca.filter(o=>o.difficulty==="medium"),r=Ca.filter(o=>o.difficulty==="hard"),s=[this.selectRandomMission(e),this.selectRandomMission(n),this.selectRandomMission(r)],i=new Date;return{lastResetDate:i.toDateString(),missions:s.map((o,a)=>({id:`mission_${i.getTime()}_${a}`,...o,progress:0,completed:!1,claimed:!1}))}}selectRandomMission(e){return e[Math.floor(Math.random()*e.length)]}getMissions(){return this.checkAndResetDaily(),this.missions.missions}updateProgress(e,n){let r=!1;return this.missions.missions.forEach(s=>{s.type===e&&!s.completed&&(s.progress=Math.max(s.progress,n),s.progress>=s.target&&(s.completed=!0,r=!0))}),r&&this.save(),r}incrementProgress(e,n=1){let r=!1;return this.missions.missions.forEach(s=>{s.type===e&&!s.completed&&(s.progress+=n,s.progress>=s.target&&(s.completed=!0,r=!0))}),r&&this.save(),r}claimReward(e){const n=this.missions.missions.find(r=>r.id===e);return n?n.completed?n.claimed?{success:!1,error:"Already claimed"}:(n.claimed=!0,this.currencyService.addFish(n.reward,`Mission: ${n.title}`),this.save(),{success:!0,reward:n.reward,title:n.title}):{success:!1,error:"Mission not completed"}:{success:!1,error:"Mission not found"}}getStats(){const e=this.missions.missions.length,n=this.missions.missions.filter(o=>o.completed).length,r=this.missions.missions.filter(o=>o.claimed).length,s=this.missions.missions.reduce((o,a)=>o+a.reward,0),i=this.missions.missions.filter(o=>o.claimed).reduce((o,a)=>o+a.reward,0);return{total:e,completed:n,claimed:r,totalRewards:s,claimedRewards:i,allCompleted:n===e,allClaimed:r===e}}reset(){this.missions=this.generateNewMissions(),this.save()}}const Ta=[{id:"first_line",title:" Primeira Linha",description:"Limpe sua primeira linha",requirement:{type:"lines_total",value:1},reward:50,tier:"bronze"},{id:"first_game",title:" Primeira Partida",description:"Complete sua primeira partida",requirement:{type:"games_played",value:1},reward:50,tier:"bronze"},{id:"scorer",title:" Pontuador",description:"Alcance 10.000 pontos em uma partida",requirement:{type:"score_single",value:1e4},reward:100,tier:"bronze"},{id:"combo_starter",title:" Combo Starter",description:"Alcance um combo de 5x",requirement:{type:"max_combo",value:5},reward:150,tier:"silver"},{id:"tspin_novice",title:" Aprendiz T-Spin",description:"Faa seu primeiro T-Spin",requirement:{type:"tspins_total",value:1},reward:150,tier:"silver"},{id:"survivor",title:" Sobrevivente",description:"Sobreviva por 5 minutos",requirement:{type:"survive_time",value:300},reward:150,tier:"silver"},{id:"level_5",title:" Nvel 5",description:"Alcance o nvel 5",requirement:{type:"max_level",value:5},reward:100,tier:"silver"},{id:"line_clearer",title:" Limpador",description:"Limpe 100 linhas no total",requirement:{type:"lines_total",value:100},reward:200,tier:"silver"},{id:"combo_master",title:" Combo Master",description:"Alcance um combo de 10x",requirement:{type:"max_combo",value:10},reward:300,tier:"gold"},{id:"tspin_master",title:" Mestre T-Spin",description:"Faa 50 T-Spins no total",requirement:{type:"tspins_total",value:50},reward:400,tier:"gold"},{id:"speed_demon",title:" Speed Demon",description:"Alcance o nvel 15",requirement:{type:"max_level",value:15},reward:350,tier:"gold"},{id:"high_scorer",title:" Alto Pontuador",description:"Alcance 100.000 pontos em uma partida",requirement:{type:"score_single",value:1e5},reward:400,tier:"gold"},{id:"dedicated",title:" Dedicado",description:"Jogue 50 partidas",requirement:{type:"games_played",value:50},reward:300,tier:"gold"},{id:"marathon",title:" Maratonista",description:"Limpe 500 linhas no total",requirement:{type:"lines_total",value:500},reward:350,tier:"gold"},{id:"cat_king",title:" Rei dos Gatos",description:"Alcance 1.000.000 de pontos em uma partida",requirement:{type:"score_single",value:1e6},reward:1e3,tier:"platinum"},{id:"immortal",title:" Imortal",description:"Alcance o nvel 20",requirement:{type:"max_level",value:20},reward:800,tier:"platinum"},{id:"combo_legend",title:" Lenda do Combo",description:"Alcance um combo de 15x",requirement:{type:"max_combo",value:15},reward:700,tier:"platinum"},{id:"tspin_legend",title:" Lenda T-Spin",description:"Faa 200 T-Spins no total",requirement:{type:"tspins_total",value:200},reward:800,tier:"platinum"},{id:"veteran",title:" Veterano",description:"Jogue 200 partidas",requirement:{type:"games_played",value:200},reward:600,tier:"platinum"},{id:"ultimate_cleaner",title:" Limpador Supremo",description:"Limpe 2.000 linhas no total",requirement:{type:"lines_total",value:2e3},reward:700,tier:"platinum"}];class qS{constructor(e,n,r){this.gameRepository=e,this.currencyService=n,this.statisticsService=r,this.achievements=this.loadAchievements()}loadAchievements(){const e=this.gameRepository.load("achievements");if(!e)return Ta.map(r=>({...r,unlocked:!1,unlockedAt:null,progress:0}));const n=new Map(e.map(r=>[r.id,r]));return Ta.map(r=>n.get(r.id)||{...r,unlocked:!1,unlockedAt:null,progress:0})}save(){this.gameRepository.save("achievements",this.achievements)}getAchievements(){return[...this.achievements]}getUnlocked(){return this.achievements.filter(e=>e.unlocked)}getLocked(){return this.achievements.filter(e=>!e.unlocked)}getByTier(e){return this.achievements.filter(n=>n.tier===e)}checkAchievements(e){const n=[];return this.achievements.forEach(r=>{if(r.unlocked)return;const{type:s,value:i}=r.requirement;let o=0;switch(s){case"lines_total":o=e.linesCleared||0;break;case"games_played":o=e.gamesPlayed||0;break;case"score_single":o=e.highScore||0;break;case"max_combo":o=e.maxCombo||0;break;case"tspins_total":o=e.tSpins||0;break;case"survive_time":o=e.longestGame||0;break;case"max_level":o=e.maxLevel||0;break}r.progress=Math.min(o,i),o>=i&&(r.unlocked=!0,r.unlockedAt=new Date().toISOString(),this.currencyService.addFish(r.reward,`Achievement: ${r.title}`),n.push(r))}),n.length>0&&this.save(),n}getStats(){const e=this.achievements.length,n=this.achievements.filter(o=>o.unlocked).length,r=this.achievements.reduce((o,a)=>o+a.reward,0),s=this.achievements.filter(o=>o.unlocked).reduce((o,a)=>o+a.reward,0),i={bronze:this.getByTier("bronze").filter(o=>o.unlocked).length,silver:this.getByTier("silver").filter(o=>o.unlocked).length,gold:this.getByTier("gold").filter(o=>o.unlocked).length,platinum:this.getByTier("platinum").filter(o=>o.unlocked).length};return{total:e,unlocked:n,percentage:Math.floor(n/e*100),totalRewards:r,earnedRewards:s,byTier:i}}reset(){this.achievements=Ta.map(e=>({...e,unlocked:!1,unlockedAt:null,progress:0})),this.save()}}class KS{constructor(e){this.gameRepository=e,this.stats=this.loadStats()}loadStats(){return this.gameRepository.load("playerStats")||{gamesPlayed:0,linesCleared:0,piecesPlaced:0,tSpins:0,backToBack:0,totalPlayTime:0,highScore:0,maxLevel:0,maxCombo:0,longestGame:0,mostLinesInGame:0,lastUpdated:new Date().toISOString(),lastPlayedDate:null,currentStreak:0,longestStreak:0}}save(){this.stats.lastUpdated=new Date().toISOString(),this.gameRepository.save("playerStats",this.stats)}getStats(){return{...this.stats}}updateAfterGame(e){this.stats.gamesPlayed+=1,this.stats.linesCleared+=e.linesCleared||0,this.stats.piecesPlaced+=e.piecesPlaced||0,this.stats.tSpins+=e.tSpins||0,this.stats.backToBack+=e.backToBack||0,this.stats.totalPlayTime+=e.playTime||0,e.score>this.stats.highScore&&(this.stats.highScore=e.score),e.level>this.stats.maxLevel&&(this.stats.maxLevel=e.level),e.maxCombo>this.stats.maxCombo&&(this.stats.maxCombo=e.maxCombo),e.playTime>this.stats.longestGame&&(this.stats.longestGame=e.playTime),e.linesCleared>this.stats.mostLinesInGame&&(this.stats.mostLinesInGame=e.linesCleared),this.updateStreak(),this.save()}updateStreak(){const e=new Date().toDateString(),n=this.stats.lastPlayedDate;if(n!==e){if(!n)this.stats.currentStreak=1,this.stats.longestStreak=1;else{const r=new Date(n),s=new Date(e);Math.floor((s-r)/(1e3*60*60*24))===1?(this.stats.currentStreak+=1,this.stats.currentStreak>this.stats.longestStreak&&(this.stats.longestStreak=this.stats.currentStreak)):this.stats.currentStreak=1}this.stats.lastPlayedDate=e}}incrementStat(e,n=1){this.stats.hasOwnProperty(e)&&(this.stats[e]+=n,this.save())}updateRecord(e,n){return this.stats.hasOwnProperty(e)&&n>this.stats[e]?(this.stats[e]=n,this.save(),!0):!1}reset(){this.stats={gamesPlayed:0,linesCleared:0,piecesPlaced:0,tSpins:0,backToBack:0,totalPlayTime:0,highScore:0,maxLevel:0,maxCombo:0,longestGame:0,mostLinesInGame:0,lastUpdated:new Date().toISOString(),lastPlayedDate:null,currentStreak:0,longestStreak:0},this.save()}}const qt={classic:{id:"classic",name:" Tetris Clssico",description:"Cores oficiais do Tetris",price:0,default:!0,pieces:{I:{emoji:"",color:"#00F0F0"},O:{emoji:"",color:"#F0F000"},T:{emoji:"",color:"#A000F0"},S:{emoji:"",color:"#00F000"},Z:{emoji:"",color:"#F00000"},J:{emoji:"",color:"#0000F0"},L:{emoji:"",color:"#F0A000"}}},cats:{id:"cats",name:" Gatos Clssicos",description:"Os gatinhos originais do Cat Tetris",price:0,default:!0,pieces:{I:{emoji:"",color:"#00f0f0"},O:{emoji:"",color:"#f0f000"},T:{emoji:"",color:"#a000f0"},S:{emoji:"",color:"#00f000"},Z:{emoji:"",color:"#f00000"},J:{emoji:"",color:"#f0a000"},L:{emoji:"",color:"#ffc0cb"}}},dogs:{id:"dogs",name:" Cachorros Felizes",description:"Amigos caninos adorveis",price:500,pieces:{I:{emoji:"",color:"#8B4513"},O:{emoji:"",color:"#D2691E"},T:{emoji:"",color:"#CD853F"},S:{emoji:"",color:"#DEB887"},Z:{emoji:"",color:"#F4A460"},J:{emoji:"",color:"#FFDEAD"},L:{emoji:"",color:"#FFE4B5"}}},pandas:{id:"pandas",name:" Pandas Fofos",description:"Ursinhos preto e branco",price:600,pieces:{I:{emoji:"",color:"#000000"},O:{emoji:"",color:"#808080"},T:{emoji:"",color:"#A0A0A0"},S:{emoji:"",color:"#FFFFFF"},Z:{emoji:"",color:"#D3D3D3"},J:{emoji:"",color:"#90EE90"},L:{emoji:"",color:"#98FB98"}}},foxes:{id:"foxes",name:" Raposas Astutas",description:"Raposinhas espertas e geis",price:700,pieces:{I:{emoji:"",color:"#FF4500"},O:{emoji:"",color:"#FF6347"},T:{emoji:"",color:"#FF7F50"},S:{emoji:"",color:"#CD5C5C"},Z:{emoji:"",color:"#D2691E"},J:{emoji:"",color:"#8B4513"},L:{emoji:"",color:"#DAA520"}}},unicorns:{id:"unicorns",name:" Unicrnios Mgicos",description:"Criaturas msticas e coloridas",price:900,pieces:{I:{emoji:"",color:"#FF00FF"},O:{emoji:"",color:"#FFD700"},T:{emoji:"",color:"#87CEEB"},S:{emoji:"",color:"#FF69B4"},Z:{emoji:"",color:"#9370DB"},J:{emoji:"",color:"#DA70D6"},L:{emoji:"",color:"#FFC0CB"}}},robots:{id:"robots",name:" Robs Futuristas",description:"Tecnologia do futuro",price:800,pieces:{I:{emoji:"",color:"#708090"},O:{emoji:"",color:"#778899"},T:{emoji:"",color:"#4682B4"},S:{emoji:"",color:"#5F9EA0"},Z:{emoji:"",color:"#00CED1"},J:{emoji:"",color:"#1E90FF"},L:{emoji:"",color:"#4169E1"}}},foods:{id:"foods",name:" Comidas Deliciosas",description:"Para quem joga com fome",price:750,pieces:{I:{emoji:"",color:"#FF6347"},O:{emoji:"",color:"#FFD700"},T:{emoji:"",color:"#FFA500"},S:{emoji:"",color:"#FF4500"},Z:{emoji:"",color:"#FFB6C1"},J:{emoji:"",color:"#DDA0DD"},L:{emoji:"",color:"#D2691E"}}},crystals:{id:"crystals",name:" Cristais Brilhantes",description:"Gemas preciosas reluzentes",price:1e3,premium:!0,pieces:{I:{emoji:"",color:"#00FFFF"},O:{emoji:"",color:"#FFD700"},T:{emoji:"",color:"#9370DB"},S:{emoji:"",color:"#00FF00"},Z:{emoji:"",color:"#FF0000"},J:{emoji:"",color:"#FFA500"},L:{emoji:"",color:"#FF1493"}}},ocean:{id:"ocean",name:" Mundo Marinho",description:"Criaturas do oceano",price:850,pieces:{I:{emoji:"",color:"#1E90FF"},O:{emoji:"",color:"#00CED1"},T:{emoji:"",color:"#4682B4"},S:{emoji:"",color:"#87CEEB"},Z:{emoji:"",color:"#5F9EA0"},J:{emoji:"",color:"#6495ED"},L:{emoji:"",color:"#FF6347"}}},space:{id:"space",name:" Espao Sideral",description:"Explorao espacial",price:950,pieces:{I:{emoji:"",color:"#4169E1"},O:{emoji:"",color:"#00FFFF"},T:{emoji:"",color:"#32CD32"},S:{emoji:"",color:"#FFD700"},Z:{emoji:"",color:"#FFFF00"},J:{emoji:"",color:"#FF8C00"},L:{emoji:"",color:"#FF4500"}}}};class o0{constructor(e,n){this.gameRepository=e,this.currencyService=n,this.inventory=this.loadInventory()}loadInventory(){const e=this.gameRepository.load("shopInventory");if(e){const n=Object.values(qt).filter(s=>s.price===0).map(s=>s.id);let r=!1;for(const s of n)e.ownedThemes.includes(s)||(e.ownedThemes.push(s),r=!0);return r&&this.gameRepository.save("shopInventory",e),e}return{ownedThemes:["cats","classic"],equippedTheme:"cats",purchaseHistory:[]}}save(){this.gameRepository.save("shopInventory",this.inventory)}getAllThemes(){return Object.values(qt).map(e=>({...e,owned:this.inventory.ownedThemes.includes(e.id),equipped:this.inventory.equippedTheme===e.id}))}getOwnedThemes(){return this.inventory.ownedThemes.map(e=>qt[e])}getEquippedTheme(){return qt[this.inventory.equippedTheme]}ownsTheme(e){return this.inventory.ownedThemes.includes(e)}purchaseTheme(e){const n=qt[e];return n?this.ownsTheme(e)?{success:!1,error:"Already owned"}:this.currencyService.canAfford(n.price)?this.currencyService.spendFish(n.price,`Theme: ${n.name}`)?(this.inventory.ownedThemes.push(e),this.inventory.purchaseHistory.push({themeId:e,purchasedAt:new Date().toISOString(),price:n.price}),this.save(),{success:!0,theme:n}):{success:!1,error:"Purchase failed"}:{success:!1,error:"Insufficient funds"}:{success:!1,error:"Theme not found"}}equipTheme(e){if(!this.ownsTheme(e))return{success:!1,error:"Theme not owned"};this.inventory.equippedTheme=e,this.save();const n=qt[e];return window.dispatchEvent(new CustomEvent("themeEquipped",{detail:{themeId:e,theme:n}})),{success:!0,theme:n}}getStats(){return{totalThemes:Object.keys(qt).length,ownedThemes:this.inventory.ownedThemes.length,totalSpent:this.inventory.purchaseHistory.reduce((e,n)=>e+n.price,0),equippedTheme:this.inventory.equippedTheme}}reset(){this.inventory={ownedThemes:["cats"],equippedTheme:"cats",purchaseHistory:[]},this.save()}}const QS=Object.freeze(Object.defineProperty({__proto__:null,PIECE_THEMES:qt,ShopService:o0},Symbol.toStringTag,{value:"Module"})),ht={CLASSIC:{id:"classic",name:" Clssico",description:"O Tetris tradicional",icon:"",rules:{gameOver:!0,timeLimit:!1,lineGoal:!1,speedIncrease:!0}},SPRINT:{id:"sprint",name:" Sprint 40",description:"Limpe 40 linhas o mais rpido possvel",icon:"",rules:{gameOver:!1,timeLimit:!1,lineGoal:40,speedIncrease:!1,fixedLevel:1}},ULTRA:{id:"ultra",name:" Ultra 3min",description:"Mximo de pontos em 3 minutos",icon:"",rules:{gameOver:!1,timeLimit:180,lineGoal:!1,speedIncrease:!0}},ZEN:{id:"zen",name:" Zen",description:"Jogue sem presso, sem game over",icon:"",rules:{gameOver:!1,timeLimit:!1,lineGoal:!1,speedIncrease:!1,fixedLevel:1,relaxed:!0}},SURVIVAL:{id:"survival",name:" Sobrevivncia",description:"Comece no nvel 10, quanto tempo aguenta?",icon:"",rules:{gameOver:!0,timeLimit:!1,lineGoal:!1,speedIncrease:!0,startLevel:10}}};class XS{constructor(e){this.gameRepository=e,this.currentMode=ht.CLASSIC,this.modeStats=this.loadModeStats()}loadModeStats(){return this.gameRepository.load("gameModesStats")||this.initializeStats()}initializeStats(){const e={};return Object.keys(ht).forEach(n=>{const r=ht[n];e[r.id]={gamesPlayed:0,bestScore:0,bestTime:r.rules.timeLimit?r.rules.timeLimit:0,bestLines:0,totalGames:0}}),e}save(){this.gameRepository.save("gameModesStats",this.modeStats)}getAllModes(){return Object.values(ht)}getCurrentMode(){return this.currentMode}setMode(e){const n=Object.values(ht).find(r=>r.id===e);return n?(this.currentMode=n,!0):!1}getModeStats(e){return this.modeStats[e]||null}getAllStats(){return{...this.modeStats}}updateStats(e,n){if(!this.modeStats[e])return;const r=this.modeStats[e];r.gamesPlayed+=1,r.totalGames+=1,n.score>r.bestScore&&(r.bestScore=n.score),n.time&&(r.bestTime===0||n.time<r.bestTime)&&(r.bestTime=n.time),n.lines>r.bestLines&&(r.bestLines=n.lines),this.save()}checkGoal(e,n){return e.rules?e.rules.lineGoal?n.score.lines>=e.rules.lineGoal:(e.rules.timeLimit,!1):!1}getRecommendedOrder(){return[ht.CLASSIC,ht.ZEN,ht.SPRINT,ht.ULTRA,ht.SURVIVAL]}reset(){this.modeStats=this.initializeStats(),this.currentMode=ht.CLASSIC,this.save()}}const gh=[{id:"bot1",name:"MeowMaster",score:25e4,level:18,lines:120,country:"BR"},{id:"bot2",name:"NyanCat",score:18e4,level:15,lines:95,country:"US"},{id:"bot3",name:"FelixPro",score:15e4,level:14,lines:85,country:"JP"},{id:"bot4",name:"WhiskerKing",score:12e4,level:12,lines:75,country:"KR"},{id:"bot5",name:"PawsGaming",score:1e5,level:11,lines:68,country:"FR"},{id:"bot6",name:"CatNinja",score:85e3,level:10,lines:60,country:"DE"},{id:"bot7",name:"TigerClaw",score:7e4,level:9,lines:55,country:"BR"},{id:"bot8",name:"LionHeart",score:65e3,level:8,lines:50,country:"UK"},{id:"bot9",name:"CheetahSpeed",score:55e3,level:8,lines:45,country:"ES"},{id:"bot10",name:"PantherShadow",score:5e4,level:7,lines:42,country:"IT"},{id:"bot11",name:"JaguarForce",score:45e3,level:7,lines:40,country:"MX"},{id:"bot12",name:"LynxSwift",score:4e4,level:6,lines:38,country:"CA"},{id:"bot13",name:"OcelotPro",score:35e3,level:6,lines:35,country:"AR"},{id:"bot14",name:"BobcatGamer",score:3e4,level:5,lines:32,country:"AU"},{id:"bot15",name:"CougarRush",score:28e3,level:5,lines:30,country:"NZ"}];class YS{constructor(e,n){this.gameRepository=e,this.playerStatsService=n,this.playerName=this.loadPlayerName(),this.playerId=this.loadPlayerId()}loadPlayerName(){const e=this.gameRepository.load("playerProfile");return(e==null?void 0:e.name)||"Jogador"}loadPlayerId(){let e=this.gameRepository.load("playerProfile");return(!e||!e.id)&&(e={...e,id:`player_${Date.now()}_${Math.random().toString(36).substr(2,9)}`},this.gameRepository.save("playerProfile",e)),e.id}setPlayerName(e){const n=this.gameRepository.load("playerProfile")||{};n.name=e,n.id=this.playerId,this.gameRepository.save("playerProfile",n),this.playerName=e}getPlayerName(){return this.playerName}getGlobalLeaderboard(e=100){const n=this.playerStatsService.getStats(),r={id:this.playerId,name:this.playerName,score:n.highScore,level:n.maxLevel,lines:n.linesCleared,country:"BR",isPlayer:!0},s=[...gh,r];return s.sort((i,o)=>o.score-i.score),s.slice(0,e)}getWeeklyLeaderboard(e=50){return this.getGlobalLeaderboard(e)}getCountryLeaderboard(e="BR",n=50){return this.getGlobalLeaderboard(200).filter(s=>s.country===e).slice(0,n)}getPlayerRank(){const e=this.getGlobalLeaderboard(1e3),n=e.findIndex(r=>r.id===this.playerId);return n===-1?{rank:e.length+1,total:e.length,percentile:0}:{rank:n+1,total:e.length,percentile:Math.floor((e.length-n)/e.length*100)}}getAroundPlayer(e=5){const n=this.getGlobalLeaderboard(1e3),r=n.findIndex(o=>o.id===this.playerId);if(r===-1)return[];const s=Math.max(0,r-e),i=Math.min(n.length,r+e+1);return n.slice(s,i)}submitScore(e){return Promise.resolve({success:!0})}getModeLeaderboard(e,n=50){return this.getGlobalLeaderboard(n)}getFriendsLeaderboard(){return gh.slice(0,5)}getLeaderboardStats(){const e=this.getPlayerRank(),n=this.playerStatsService.getStats();return{playerName:this.playerName,rank:e.rank,total:e.total,percentile:e.percentile,score:n.highScore,level:n.maxLevel,lines:n.linesCleared}}}class JS{constructor(e){this.playerStatsService=e}generateShareText(e){const{score:n,level:r,lines:s,mode:i}=e;return` Cat Tetris${i?` no modo ${i}`:""}!
 Pontuao: ${n.toLocaleString()}
 Nvel: ${r}
 Linhas: ${s}

Consegue me superar? `}generateShareURL(e){const n=window.location.origin+window.location.pathname,r=new URLSearchParams({score:e.score,level:e.level,lines:e.lines});return`${n}?${r.toString()}`}async copyToClipboard(e){try{return await navigator.clipboard.writeText(e),{success:!0}}catch(n){return{success:!1,error:n.message}}}async shareNative(e){if(!navigator.share)return{success:!1,error:"Web Share API not supported"};try{const n=this.generateShareText(e),r=this.generateShareURL(e);return await navigator.share({title:"Minha pontuao no Cat Tetris",text:n,url:r}),{success:!0}}catch(n){return n.name==="AbortError"?{success:!1,error:"Share cancelled"}:{success:!1,error:n.message}}}shareToTwitter(e){const n=this.generateShareText(e),r=this.generateShareURL(e),s=`https://twitter.com/intent/tweet?text=${encodeURIComponent(n)}&url=${encodeURIComponent(r)}`;return window.open(s,"_blank","width=600,height=400"),{success:!0}}shareToFacebook(e){const n=this.generateShareURL(e),r=`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(n)}`;return window.open(r,"_blank","width=600,height=400"),{success:!0}}shareToWhatsApp(e){const n=this.generateShareText(e),r=this.generateShareURL(e),s=`${n}

${r}`,i=`https://wa.me/?text=${encodeURIComponent(s)}`;return window.open(i,"_blank"),{success:!0}}async takeScreenshot(e){return{success:!1,error:"Not implemented"}}getAvailableMethods(){return{native:!!navigator.share,clipboard:!!navigator.clipboard,twitter:!0,facebook:!0,whatsapp:!0}}}class fs{constructor(){this.difficulty="medium",this.thinkingTime=100,this.lastDecision=Date.now(),this._actionQueue=[],this._isExpert=!1,this._visualMode=!1,this._visualActionDelay=40}setDifficulty(e){switch(this.difficulty=e,this._isExpert=e.startsWith("expert"),e){case"easy":this.thinkingTime=250;break;case"medium":this.thinkingTime=120;break;case"hard":this.thinkingTime=60;break;case"expert":this.thinkingTime=20;break;default:this.thinkingTime=120}}setVisualMode(e){this._visualMode=e}decideNextMove(e){const n=Date.now(),r=this._visualMode?this._visualActionDelay:this.thinkingTime;if(this._actionQueue.length>0)return this._isExpert&&!this._visualMode?this._actionQueue.shift():n-this.lastDecision<r?null:(this.lastDecision=n,this._actionQueue.shift());if(!this._isExpert&&n-this.lastDecision<r||this._visualMode&&n-this.lastDecision<r)return null;this.lastDecision=n;const{currentPiece:s,board:i,heldPiece:o,canHold:a,nextPieces:c}=e;if(!s)return null;try{const u=(c==null?void 0:c[0])||null;let h=this._findBestMoveWithLookahead(s,i,u),d=!1;if(a){const f=o||u;if(f&&f.type!==s.type){const g=o?u:(c==null?void 0:c[1])||null,v=this._findBestMoveWithLookahead(f,i,g);v&&(!h||v.score>h.score)&&(h=v,d=!0)}}if(!h)this._actionQueue=[{action:"drop"}];else{const f=[];d&&f.push({action:"hold"});const g=d?o||(c==null?void 0:c[0]):s;f.push(...this._buildActionSequence(g,h.rotations,h.targetX,d)),this._actionQueue=f}}catch{this._actionQueue=[{action:"drop"}]}return this._actionQueue.length>0?this._actionQueue.shift():{action:"down"}}_findBestMoveWithLookahead(e,n,r){var u;let s=-1/0,i=null;const o=n.length,a=((u=n[0])==null?void 0:u.length)||10,c=this._isExpert&&r;for(let h=0;h<4;h++){const d=this._rotateShape(e.shape,h),f=d[0].length;for(let g=-2;g<=a-f+2;g++){const v=this._findLandingRow(d,n,g,o,a);if(v===null||v<0)continue;const w=this._placeOnBoard(d,n,g,v);if(!w)continue;const{board:b}=this._simulateClear(w);let m=this._evaluate(w,e);if(c){let p=-1/0;for(let x=0;x<4;x++){const S=this._rotateShape(r.shape,x),j=S[0].length;for(let k=-2;k<=a-j+2;k++){const C=this._findLandingRow(S,b,k,o,a);if(C===null||C<0)continue;const T=this._placeOnBoard(S,b,k,C);if(!T)continue;const E=this._evaluate(T,r);E>p&&(p=E)}}p>-1/0&&(m=m*(1-.45)+p*.45)}this.difficulty==="easy"?m+=(Math.random()-.5)*1200:this.difficulty==="medium"&&Math.random()<.2&&(m+=(Math.random()-.5)*500),m>s&&(s=m,i={rotations:h,targetX:g,score:s})}}return i}_evaluate(e,n){switch(this.difficulty){case"expert":return this._evalSurvival(e,n);default:return this._evalDefault(e,n)}}_simulateClear(e){const n=e[0].length,r=[];let s=0;for(const i of e)i.every(o=>o!=null)?s++:r.push([...i]);for(;r.length<e.length;)r.unshift(new Array(n).fill(null));return{board:r,cleared:s}}_evalDefault(e,n){const{board:r,cleared:s}=this._simulateClear(e);let i=0;return i+=s*800,i-=this._getHeight(r)*45,i-=this._countHoles(r)*400,i-=this._getBumpiness(r)*35,i-=this._getRowTransitions(r)*15,i-=this._getColTransitions(r)*10,this.difficulty==="hard"&&(i+=s>=2?s*400:0,i-=this._countHoles(r)*200,i-=this._getCoveredHoles(r)*100,i-=this._getHeight(r)*30,this._countHoles(r)===0&&(i+=300),this._getHeight(r)<=6&&(i+=200)),i}_evalSurvival(e){const{board:n,cleared:r}=this._simulateClear(e),s=this._getHeight(n),i=this._countHoles(n),o=this._getBumpiness(n),a=this._getCoveredHoles(n),c=this._getColumnHeights(n),u=Math.max(...c),h=Math.min(...c),d=this._getRowTransitions(n),f=this._getColTransitions(n),g=this._getWellDepths(n);let v=0;v+=r*5e3,r>=2&&(v+=r*r*1500),r===3&&(v+=8e3),r===4&&(v+=25e3),s>10&&(v+=r*8e3,r>=2&&(v+=r*5e3)),s>14&&(v+=r*2e4),v-=s*s*25,v-=s*300,v-=u*u*15,v-=i*4e3,v-=i*i*500,v-=a*1200,v-=o*250;const w=c.reduce((x,S)=>x+S,0)/c.length,b=c.reduce((x,S)=>x+(S-w)**2,0)/c.length;v-=b*80;const m=u-h;m>4&&(v-=(m-4)*800),m>6&&(v-=(m-6)*1500),v-=d*60,v-=f*50,v-=g*200,s===0?v+=15e3:s<=2?v+=6e3:s<=4?v+=3e3:s<=6&&(v+=1500),i===0&&(v+=5e3),i===0&&s<=4&&(v+=3e3),o<=1?v+=2e3:o<=3&&(v+=800),s>10&&(v-=(s-10)*2e3),s>12&&(v-=(s-12)*(s-12)*800),s>14&&(v-=(s-14)*(s-14)*1500),s>16&&(v-=6e4),s>18&&(v-=2e5);const p=this._countNearCompleteLines(n);return s>8&&(v+=p*1500),v}_evalCombo(e,n){const{board:r,cleared:s}=this._simulateClear(e),i=r[0].length,o=this._getHeight(r),a=this._countHoles(r),c=this._getBumpiness(r),u=this._getCoveredHoles(r);let h=0;s===1?h+=6e3:s===2?h+=3500:s===3?h+=2500:s===4&&(h+=2e3);let d=0,f=0,g=0;const v={};for(let b=r.length-1;b>=0;b--){let m=0,p=-1;for(let x=0;x<i;x++)r[b][x]!=null?m++:p=x;m===i-1?(d++,f++,g=Math.max(g,f),p>=0&&(v[p]=(v[p]||0)+1)):m>=i-2?(d+=.5,f++,g=Math.max(g,f)):f=0}h+=d*2500,h+=g*g*600;let w=0;for(const b in v)v[b]>w&&(w=v[b]);return w>=2&&(h+=w*w*500),h-=a*2500,h-=u*700,h-=o*100,h-=c*120,h-=this._getRowTransitions(r)*35,h-=this._getColTransitions(r)*25,a===0&&(h+=1500),o<=6&&(h+=600),o>12&&(h-=(o-12)*800),o>15&&(h-=(o-15)*2e3),o>18&&(h-=25e3),h}_evalTetris(e,n){const{board:r,cleared:s}=this._simulateClear(e),i=r[0].length,o=r.length,a=this._getColumnHeights(r);this._getHeight(r);const c=this._countHoles(r),u=this._getCoveredHoles(r);let h=0;const d=i-1;s===4?h+=2e5:s>0&&(h-=s*15e3);let f=0;for(let S=0;S<o;S++)r[S][d]!=null&&f++;h-=f*6e3;const g=[];for(let S=0;S<i;S++)S!==d&&g.push(a[S]);const v=g.reduce((S,j)=>S+j,0)/g.length,w=v-a[d];h+=Math.max(0,w)*600,w>=4?h+=25e3:w>=3?h+=12e3:w>=2?h+=5e3:w>=1&&(h+=1e3);let b=0;for(let S=0;S<g.length-1;S++)b+=Math.abs(g[S]-g[S+1]);h-=b*500;const m=g.reduce((S,j)=>S+(j-v)**2,0)/g.length;h-=m*150,b===0?h+=6e3:b<=1?h+=2500:b<=2&&(h+=800);const p=this._countNearFullLinesExcluding(r,d);h+=p*5e3,p>=4?h+=2e4:p>=3?h+=8e3:p>=2&&(h+=3e3);for(let S=0;S<i;S++){if(S===d)continue;const j=a[S],k=S>0?a[S-1]:o,C=S<i-1?a[S+1]:o,T=Math.min(k,C)-j;T>1&&(h-=T*2e3)}n.type==="I"&&(s===4?h+=5e4:w<4&&(h-=2e4)),h-=c*5e3,h-=u*2e3,h-=this._getRowTransitions(r)*40,h-=this._getColTransitions(r)*30;const x=Math.max(...g);return x>14&&(h-=(x-14)*3e3),x>16&&(h-=(x-16)*6e3),x>18&&(h-=4e4),c===0&&(h+=4e3),v<=6&&(h+=1500),h}_countLines(e){let n=0;for(const r of e)r.every(s=>s!=null)&&n++;return n}_getHeight(e){for(let n=0;n<e.length;n++)if(e[n].some(r=>r!=null))return e.length-n;return 0}_countHoles(e){let n=0;const r=e[0].length;for(let s=0;s<r;s++){let i=!1;for(let o=0;o<e.length;o++)e[o][s]!=null?i=!0:i&&n++}return n}_getBumpiness(e){const n=this._getColumnHeights(e);let r=0;for(let s=0;s<n.length-1;s++)r+=Math.abs(n[s]-n[s+1]);return r}_getBumpinessExcluding(e,n){const r=this._getColumnHeights(e);let s=0;for(let i=0;i<r.length-1;i++)i===n||i+1===n||(s+=Math.abs(r[i]-r[i+1]));return s}_getColumnHeights(e){const n=e[0].length,r=[];for(let s=0;s<n;s++){let i=!1;for(let o=0;o<e.length;o++)if(e[o][s]!=null){r.push(e.length-o),i=!0;break}i||r.push(0)}return r}_getFlatness(e){const n=this._getColumnHeights(e),r=n.reduce((i,o)=>i+o,0)/n.length,s=n.reduce((i,o)=>i+(o-r)**2,0)/n.length;return Math.max(0,100-s)}_getWellDepths(e){const n=this._getColumnHeights(e);let r=0;for(let s=0;s<n.length;s++){const i=s>0?n[s-1]:20,o=s<n.length-1?n[s+1]:20,a=Math.min(i,o)-n[s];a>0&&(r+=a)}return r}_getRowTransitions(e){let n=0;const r=e[0].length;for(let s=0;s<e.length;s++){for(let i=0;i<r-1;i++){const o=e[s][i]!=null,a=e[s][i+1]!=null;o!==a&&n++}e[s][0]==null&&n++,e[s][r-1]==null&&n++}return n}_getColTransitions(e){let n=0;const r=e[0].length;for(let s=0;s<r;s++){for(let i=0;i<e.length-1;i++){const o=e[i][s]!=null,a=e[i+1][s]!=null;o!==a&&n++}e[e.length-1][s]==null&&n++}return n}_getCoveredHoles(e){let n=0;const r=e[0].length;for(let s=0;s<r;s++){let i=0;for(let o=0;o<e.length;o++)e[o][s]!=null?i++:i>0&&(n+=i)}return n}_countNearCompleteLines(e){let n=0;for(const r of e){const s=r.filter(i=>i!=null).length;s>=r.length-1&&s<r.length&&n++}return n}_countNearFullLinesExcluding(e,n){let r=0;for(const s of e){let i=0,o=-1;for(let a=0;a<s.length;a++)s[a]==null&&(i++,o=a);i===1&&o===n&&r++}return r}_buildActionSequence(e,n,r,s){var h;const i=[],o=n%4;for(let d=0;d<o;d++)i.push({action:"rotate"});const a=s?3:((h=e.position)==null?void 0:h.x)??3,c=r-a,u=c>0?"right":"left";for(let d=0;d<Math.abs(c);d++)i.push({action:u});return i.push({action:"drop"}),i}_rotateShape(e,n){let r=e;for(let s=0;s<n%4;s++)r=r[0].map((i,o)=>r.map(a=>a[o]).reverse());return r}_findLandingRow(e,n,r,s,i){for(let o=-e.length;o<s;o++)if(this._collides(e,n,r,o+1,s,i))return o;return s-e.length}_collides(e,n,r,s,i,o){for(let a=0;a<e.length;a++)for(let c=0;c<e[0].length;c++){if(!e[a][c])continue;const u=r+c,h=s+a;if(u<0||u>=o||h>=i||h>=0&&n[h][u]!=null)return!0}return!1}_placeOnBoard(e,n,r,s){const i=n.length,o=n[0].length,a=n.map(c=>[...c]);for(let c=0;c<e.length;c++)for(let u=0;u<e[0].length;u++){if(!e[c][u])continue;const h=r+u,d=s+c;if(h<0||h>=o||d<0||d>=i||a[d][h]!=null)return null;a[d][h]=1}return a}getDifficulties(){return[{id:"easy",name:"Fcil",emoji:"",description:"IA iniciante"},{id:"medium",name:"Mdio",emoji:"",description:"IA intermediria"},{id:"hard",name:"Difcil",emoji:"",description:"IA avanada"},{id:"expert",name:"Expert",emoji:"",description:"Mantm o board o mais baixo possvel"}]}}class ZS{constructor(e){this.gameRepository=e,this.currentMode=null,this.players=[],this.matchState=null}startLocalMatch(e="Jogador 1",n="Jogador 2"){return this.currentMode="1v1-local",this.players=[{id:"p1",name:e,score:0,level:1,lines:0,gameState:null,alive:!0},{id:"p2",name:n,score:0,level:1,lines:0,gameState:null,alive:!0}],this.matchState={startTime:Date.now(),status:"playing",winner:null},{mode:this.currentMode,players:this.players,matchId:`local_${Date.now()}`}}startAIMatch(e="Jogador",n="medium"){return this.currentMode="vs-ai",this.players=[{id:"p1",name:e,score:0,level:1,lines:0,gameState:null,alive:!0,isHuman:!0},{id:"ai",name:this.getAIName(n),score:0,level:1,lines:0,gameState:null,alive:!0,isAI:!0,difficulty:n}],this.matchState={startTime:Date.now(),status:"playing",winner:null,aiDifficulty:n},{mode:"vsAI",aiDifficulty:n,players:this.players,matchId:`ai_${Date.now()}`}}updatePlayerState(e,n){var s,i;const r=this.players.find(o=>o.id===e);r&&(r.gameState=n,r.score=((s=n.score)==null?void 0:s.points)||0,r.level=((i=n.score)==null?void 0:i.level)||1,r.lines=n.linesCleared||0,r.alive=!n.gameOver,this.checkWinCondition())}checkWinCondition(){const e=this.players.filter(n=>n.alive);return e.length===1?(this.matchState.status="finished",this.matchState.winner=e[0],this.matchState.endTime=Date.now(),this.matchState.duration=this.matchState.endTime-this.matchState.startTime,this.saveMatchResult(),{hasWinner:!0,winner:this.matchState.winner}):{hasWinner:!1}}saveMatchResult(){const e=this.gameRepository.load("multiplayerStats")||{localMatches:0,aiMatches:0,wins:0,losses:0,draws:0,totalTime:0};this.currentMode==="1v1-local"?e.localMatches++:this.currentMode==="vs-ai"&&(e.aiMatches++,this.matchState.winner.isHuman?e.wins++:this.matchState.winner.isAI&&e.losses++),e.totalTime+=this.matchState.duration,this.gameRepository.save("multiplayerStats",e)}getStats(){const e=this.gameRepository.load("multiplayerStats")||{localMatches:0,aiMatches:0,wins:0,losses:0,draws:0,totalTime:0};return{...e,winRate:e.aiMatches>0?(e.wins/e.aiMatches*100).toFixed(1):0,avgMatchTime:e.localMatches+e.aiMatches>0?Math.floor(e.totalTime/(e.localMatches+e.aiMatches)/1e3):0}}getMatchState(){return{...this.matchState,players:this.players,mode:this.currentMode}}endMatch(){const e={mode:this.currentMode,players:this.players,winner:this.matchState.winner,duration:Date.now()-this.matchState.startTime};return this.currentMode=null,this.players=[],this.matchState=null,e}startAIvsAIMatch(e="expert",n="expert"){return this.currentMode="ai-vs-ai",this.players=[{id:"ai1",name:this.getAIName(e),score:0,level:1,lines:0,gameState:null,alive:!0,isAI:!0,difficulty:e},{id:"ai2",name:this.getAIName(n),score:0,level:1,lines:0,gameState:null,alive:!0,isAI:!0,difficulty:n}],this.matchState={startTime:Date.now(),status:"playing",winner:null,ai1Difficulty:e,ai2Difficulty:n},{mode:"aiVsAI",ai1Difficulty:e,ai2Difficulty:n,players:this.players,matchId:`aivai_${Date.now()}`}}getAIName(e){return{easy:" MeowBot Iniciante",medium:" CatAI Intermedirio",hard:" FelineBot Avanado",expert:" NyanMaster Survival"}[e]||"IA"}getAvailableModes(){return[{id:"vs-ai",name:"vs IA",emoji:"",description:"Enfrente o bot",players:1,type:"ai",difficulties:["easy","medium","hard","expert"]},{id:"ai-vs-ai",name:"IA vs IA",emoji:"",description:"Assista duas IAs se enfrentando (debug)",players:0,type:"debug"}]}}const wt={FUNDAMENTALS:"fundamentals",INTERMEDIATE:"intermediate",ADVANCED:"advanced",PRO:"pro"};class eb{constructor(e){this.gameRepository=e,this.lessons=this._buildLessons(),this.progress=this._loadProgress()}_buildLessons(){return[{id:1,module:wt.FUNDAMENTALS,title:"Movimentao",description:"Mover, rotacionar e dropar peas",difficulty:"beginner",estimatedTime:"2 min",intro:["   Setas movem a pea para os lados","  Seta para cima rotaciona a pea","  Seta para baixo = soft drop (desce rpido)","  Espao = hard drop (cai instantaneamente)","A sombra mostra onde a pea vai pousar"],practice:{objective:"Limpe 3 linhas usando os controles",validate:e=>{const n=e.linesCleared||0;return{complete:n>=3,progress:Math.min(1,n/3),feedback:n>=3?" timo! Voc dominou os controles!":`${n}/3 linhas`}}},rewards:{fishCoins:100,xp:50,badge:"first_move",unlocks:[2]}},{id:2,module:wt.FUNDAMENTALS,title:"Hold Piece",description:"Segure uma pea para usar depois",difficulty:"beginner",estimatedTime:"2 min",intro:["Aperte C ou Shift para guardar a pea atual","A pea guardada aparece no canto esquerdo","Voc pode trocar 1 vez por turno","Dica: guarde peas valiosas como I e T","Isso ajuda quando a pea atual no encaixa bem"],practice:{objective:"Use o hold e limpe 3 linhas",validate:e=>{const n=e.hasUsedHold,r=e.linesCleared||0;return n?{complete:r>=3,progress:Math.min(1,r/3),feedback:r>=3?" Hold dominado!":` Hold usado! ${r}/3 linhas`}:{complete:!1,progress:0,feedback:"Aperte C para segurar a pea!"}}},rewards:{fishCoins:100,xp:50,badge:"hold_learner",unlocks:[3]}},{id:3,module:wt.FUNDAMENTALS,title:"Planejamento",description:"Use o painel Next para planejar jogadas",difficulty:"beginner",estimatedTime:"3 min",intro:["O painel NEXT mostra as prximas peas","Olhe as prximas 2-3 peas antes de agir","Se vem uma pea I, deixe espao vertical","Pensar  frente = menos buracos = mais linhas","Tente limpar muitas linhas sem criar buracos!"],practice:{objective:"Limpe 8 linhas (planeje bem!)",validate:e=>{const n=e.linesCleared||0;return{complete:n>=8,progress:Math.min(1,n/8),feedback:n>=8?" Excelente planejamento!":`${n}/8 linhas`}}},rewards:{fishCoins:150,xp:75,badge:"planner",unlocks:[4]}},{id:4,module:wt.INTERMEDIATE,title:"Combos",description:"Limpe linhas consecutivas para bnus",difficulty:"intermediate",estimatedTime:"4 min",intro:["Combo = limpar linhas em peas consecutivas","Cada combo seguido d +50 pontos de bnus","Combo 5x = +250 pontos extras!","Dica: empilhe baixo e limpe 1 linha por vez","Foque em manter o ritmo, sem pausas"],practice:{objective:"Consiga um combo de 3 ou mais",validate:e=>{const n=e.currentCombo||0,r=e.maxCombo||n,s=Math.max(n,r);return{complete:s>=3,progress:Math.min(1,s/3),feedback:s>=3?" Combo master!":`Melhor combo: ${s}x (precisa 3)`}}},rewards:{fishCoins:200,xp:100,badge:"combo_starter",unlocks:[5]}},{id:5,module:wt.INTERMEDIATE,title:"Tetris (4 linhas)",description:"Limpe 4 linhas de uma vez para 800pts",difficulty:"intermediate",estimatedTime:"5 min",intro:["Tetris = limpar 4 linhas ao mesmo tempo","Vale 800 pontos  o clear mais valioso!","Deixe uma coluna vazia (geralmente a da direita)","Preencha as outras 9 colunas em 4 linhas","Use a pea I (barra) para completar o Tetris"],practice:{objective:"Alcance 2.000 pontos",validate:e=>{const n=e.score||0;return{complete:n>=2e3,progress:Math.min(1,n/2e3),feedback:n>=2e3?" Pontuao alta!":`${n.toLocaleString()}/2.000 pts`}}},rewards:{fishCoins:250,xp:125,badge:"tetris_scorer",unlocks:[6]}},{id:6,module:wt.ADVANCED,title:"T-Spin",description:"Rotacione o T no ltimo momento para bnus",difficulty:"advanced",estimatedTime:"6 min",intro:["T-Spin = rotacionar a pea T em espao apertado","Vale pontos extras e ativa back-to-back!",'Crie um buraco em forma de "T" na pilha',"Deslize a pea T para dentro e rotacione"," difcil, mas d muitos pontos!"],practice:{objective:"Faa pelo menos 1 T-Spin e 4.000 pontos",validate:e=>{const n=e.tSpins||0,r=e.score||0;return n===0?{complete:!1,progress:Math.min(.5,r/8e3),feedback:"Tente rotacionar o T em espao apertado!"}:{complete:r>=4e3,progress:Math.min(1,r/4e3),feedback:r>=4e3?` T-Spin pro! (${n} T-Spins)`:` T-Spin! ${r.toLocaleString()}/4.000 pts`}}},rewards:{fishCoins:400,xp:250,badge:"tspin_learner",unlocks:[7]}},{id:7,module:wt.ADVANCED,title:"Back-to-Back",description:"Tetris ou T-Spin seguidos do 50% bnus",difficulty:"advanced",estimatedTime:"6 min",intro:["Back-to-Back = dois clears difceis seguidos","Conta como: Tetris (4 linhas) ou T-Spin","Cada B2B seguido d +50% de pontos!","Limpar 1-3 linhas normais quebra a cadeia","Combine T-Spins e Tetris para pontuao mxima"],practice:{objective:"Alcance 6.000 pontos com back-to-back",validate:e=>{const n=e.score||0,r=e.backToBackActive;return{complete:n>=6e3,progress:Math.min(1,n/6e3),feedback:n>=6e3?" Back-to-back dominado!":r?` B2B ativo! ${n.toLocaleString()}/6.000 pts`:`${n.toLocaleString()}/6.000 pts`}}},rewards:{fishCoins:500,xp:300,badge:"b2b_learner",unlocks:[8]}},{id:8,module:wt.PRO,title:"Desafio Final",description:"Prove que domina o Tetris!",difficulty:"pro",estimatedTime:"10 min",intro:["Use TUDO que aprendeu at aqui","Movimentao, hold, combos, T-Spins, B2B...","O objetivo  alcanar uma pontuao alta","No tenha pressa  planeje cada jogada","Boa sorte, mestre! "],practice:{objective:"Alcance 15.000 pontos",validate:e=>{const n=e.score||0;return{complete:n>=15e3,progress:Math.min(1,n/15e3),feedback:n>=15e3?" MESTRE DO TETRIS!":`${n.toLocaleString()}/15.000 pts`}}},rewards:{fishCoins:1e3,xp:500,badge:"tetris_master",unlocks:[]}}]}_loadProgress(){var n,r;return((r=(n=this.gameRepository)==null?void 0:n.load)==null?void 0:r.call(n,"tutorialProgress"))||{completedLessons:[],unlockedLessons:[1],badges:[],totalXP:0,currentModule:wt.FUNDAMENTALS}}_saveProgress(){var e,n;(n=(e=this.gameRepository)==null?void 0:e.save)==null||n.call(e,"tutorialProgress",this.progress)}getProgress(){return this.progress}getLessonById(e){return this.lessons.find(n=>n.id===e)}getAvailableLessons(){return this.lessons.filter(e=>this.progress.unlockedLessons.includes(e.id))}completeLesson(e,n){var s;const r=this.getLessonById(e);return r?(this.progress.completedLessons.includes(e)||this.progress.completedLessons.push(e),(r.rewards.unlocks||[]).forEach(i=>{this.progress.unlockedLessons.includes(i)||this.progress.unlockedLessons.push(i)}),r.rewards.badge&&!this.progress.badges.includes(r.rewards.badge)&&this.progress.badges.push(r.rewards.badge),this.progress.totalXP+=r.rewards.xp||0,this._saveProgress(),{completed:!0,lessonId:e,lessonTitle:r.title,rewards:r.rewards,nextLesson:((s=r.rewards.unlocks)==null?void 0:s[0])||null,performance:n}):null}resetProgress(){this.progress={completedLessons:[],unlockedLessons:[1],badges:[],totalXP:0,currentModule:wt.FUNDAMENTALS},this._saveProgress()}}function tb(t=new TS){return t.registerSingleton("gameRepository",()=>new _S),t.registerSingleton("settingsService",()=>new VS),t.registerSingleton("statisticsService",()=>new HS),t.registerSingleton("scoringService",()=>new xn),t.registerSingleton("pieceFactory",()=>new Wn),t.registerSingleton("movementStrategyFactory",()=>new qn),t.registerSingleton("keyboardInputService",()=>new US),t.registerSingleton("playerStatsService",e=>new KS(e),["gameRepository"]),t.registerSingleton("currencyService",e=>new $S(e),["gameRepository"]),t.registerSingleton("missionsService",(e,n)=>new WS(e,n),["gameRepository","currencyService"]),t.registerSingleton("achievementsService",(e,n,r)=>new qS(e,n,r),["gameRepository","currencyService","playerStatsService"]),t.registerSingleton("shopService",(e,n)=>new o0(e,n),["gameRepository","currencyService"]),t.registerSingleton("gameModesService",e=>new XS(e),["gameRepository"]),t.registerSingleton("leaderboardService",(e,n)=>new YS(e,n),["gameRepository","playerStatsService"]),t.registerSingleton("shareService",e=>new JS(e),["playerStatsService"]),t.registerSingleton("aiOpponentService",()=>new fs),t.registerSingleton("multiplayerService",e=>new ZS(e),["gameRepository"]),t.registerSingleton("tutorialService",e=>new eb(e),["gameRepository"]),t.registerSingleton("gameService",(e,n,r,s)=>new $n(e,n,r,s),["pieceFactory","movementStrategyFactory","gameRepository","scoringService"]),t}const B=tb();function a0(){const[t,e]=y.useState(null),[n,r]=y.useState(!0);y.useEffect(()=>{try{const a=B.resolve("currencyService");e(a.getCurrency()),r(!1);const c=()=>{e(a.getCurrency())};return window.addEventListener("currencyUpdated",c),()=>{window.removeEventListener("currencyUpdated",c)}}catch{r(!1)}},[]);const s=y.useCallback((a,c)=>{try{const u=B.resolve("currencyService"),h=u.addFish(a,c);return h&&(e(u.getCurrency()),window.dispatchEvent(new Event("currencyUpdated"))),h}catch{return!1}},[]),i=y.useCallback((a,c)=>{try{const u=B.resolve("currencyService"),h=u.spendFish(a,c);return h&&(e(u.getCurrency()),window.dispatchEvent(new Event("currencyUpdated"))),h}catch{return!1}},[]),o=y.useCallback(a=>{try{return B.resolve("currencyService").canAfford(a)}catch{return!1}},[]);return{currency:t,loading:n,addFish:s,spendFish:i,canAfford:o}}function nb({className:t=""}){const{currency:e,loading:n}=a0();return n||!e?l.jsxs("div",{className:`flex items-center gap-2 ${t}`,children:[l.jsx("div",{className:"text-2xl",children:""}),l.jsx("div",{className:"text-white/60",children:"..."})]}):l.jsxs(N.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:`flex items-center gap-2 bg-black/30 px-4 py-2 rounded-lg backdrop-blur-sm ${t}`,children:[l.jsx("span",{className:"text-2xl",children:""}),l.jsx(N.span,{initial:{scale:1.2,color:"#fbbf24"},animate:{scale:1,color:"#ffffff"},transition:{duration:.3},className:"text-xl font-bold",children:e.fish.toLocaleString()},e.fish)]})}function rb({onStartGame:t,onNewGame:e,onShowSettings:n,onShowShop:r,onShowMissions:s,onShowAchievements:i,onShowMultiplayer:o,onShowTutorial:a,onShowTutorialHub:c,onShowAIShowcase:u,onShowCreatorMode:h,onShowInstallPrompt:d,canInstallPWA:f,hasActiveGame:g,gameState:v}){var S,j;const[w,b]=y.useState(!0),m=CS(),p=y.useCallback(k=>{var C;w&&((C=m.playMenuSelect)==null||C.call(m)),k==null||k()},[w,m]);y.useEffect(()=>{const k=C=>{C.key==="Enter"&&(C.preventDefault(),p(t))};return window.addEventListener("keydown",k),()=>window.removeEventListener("keydown",k)},[p,t]);const x=(k=0)=>({initial:{opacity:0,y:16},animate:{opacity:1,y:0},transition:{duration:.35,delay:k,ease:"easeOut"}});return l.jsxs("div",{className:"h-screen bg-gradient-to-b from-slate-900 via-purple-950 to-slate-900 flex flex-col items-center justify-center p-4 relative overflow-hidden",children:[l.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[l.jsx("div",{className:"absolute top-1/4 -left-32 w-64 h-64 bg-purple-600/10 rounded-full blur-3xl"}),l.jsx("div",{className:"absolute bottom-1/4 -right-32 w-64 h-64 bg-blue-600/10 rounded-full blur-3xl"})]}),l.jsx("div",{className:"fixed top-3 right-3 z-50",children:l.jsx(nb,{})}),l.jsxs("div",{className:"w-full max-w-sm relative z-10 flex flex-col items-center",children:[l.jsxs(N.div,{...x(0),className:"text-center mb-4",children:[l.jsx("h1",{className:"text-4xl font-extrabold text-white tracking-tight drop-shadow-lg select-none",children:" Cat Tetris"}),l.jsx("p",{className:"text-white/50 text-xs mt-1",children:"Empilhe blocos com seus amigos felinos"})]}),l.jsx(N.div,{...x(.1),className:"w-full space-y-2 mb-4",children:g?l.jsxs(l.Fragment,{children:[l.jsxs("button",{onClick:()=>p(t),className:"w-full py-4 rounded-xl bg-emerald-500 hover:bg-emerald-400 active:scale-[0.98] text-white font-bold text-lg shadow-lg shadow-emerald-500/20 transition-all duration-150",children:[" Continuar",l.jsxs("span",{className:"block text-emerald-100/70 text-xs font-normal mt-0.5",children:["Nvel ",((S=v==null?void 0:v.score)==null?void 0:S.level)||1,"  ",(((j=v==null?void 0:v.score)==null?void 0:j.points)||0).toLocaleString()," pts"]})]}),l.jsx("button",{onClick:()=>p(e),className:"w-full py-3 rounded-xl bg-white/10 hover:bg-white/15 active:scale-[0.98] text-white font-semibold text-base border border-white/10 transition-all duration-150",children:"Novo Jogo"})]}):l.jsx("button",{onClick:()=>p(t),className:"w-full py-5 rounded-xl bg-gradient-to-r from-emerald-500 to-green-500 hover:from-emerald-400 hover:to-green-400 active:scale-[0.98] text-white font-bold text-xl shadow-lg shadow-emerald-500/25 transition-all duration-150",children:" Jogar"})}),l.jsxs(N.div,{...x(.18),className:"w-full grid grid-cols-2 gap-2 mb-4",children:[l.jsx(gi,{icon:"",label:"VS IA",sub:"Desafie o bot",onClick:()=>p(o)}),l.jsx(gi,{icon:"",label:"Tutorial",sub:"Aprenda a jogar",onClick:()=>p(c)}),l.jsx(gi,{icon:"",label:"Criador",sub:"Treine T-Spins",onClick:()=>p(h)}),l.jsx(gi,{icon:"",label:"IA Expert",sub:"Assista a IA jogar",onClick:()=>p(u)})]}),l.jsxs(N.div,{...x(.25),className:"w-full grid grid-cols-4 gap-1 mb-4",children:[l.jsx(xi,{icon:"",label:"Loja",onClick:()=>p(r)}),l.jsx(xi,{icon:"",label:"Misses",onClick:()=>p(s)}),l.jsx(xi,{icon:"",label:"Conquistas",onClick:()=>p(i)}),l.jsx(xi,{icon:"",label:"Config",onClick:()=>p(n)})]}),l.jsxs(N.div,{...x(.3),className:"flex items-center gap-3 text-xs text-white/25",children:[l.jsx("button",{onClick:()=>b(!w),className:"hover:text-white/50 transition-colors",children:w?"":""}),f&&l.jsx("button",{onClick:()=>p(d),className:"hover:text-white/50 transition-colors",children:" Instalar"}),l.jsx("span",{className:"select-none",children:"v1.0"})]})]})]})}function gi({icon:t,label:e,sub:n,onClick:r}){return l.jsxs("button",{onClick:r,className:"flex flex-col items-center text-center p-3 rounded-xl bg-white/[0.06] hover:bg-white/[0.1] border border-white/[0.06] hover:border-white/[0.12] active:scale-[0.97] transition-all duration-150",children:[l.jsx("span",{className:"text-2xl mb-1",children:t}),l.jsx("span",{className:"text-white font-semibold text-sm leading-tight",children:e}),l.jsx("span",{className:"text-white/40 text-[10px] mt-0.5 leading-tight",children:n})]})}function xi({icon:t,label:e,onClick:n}){return l.jsxs("button",{onClick:n,className:"flex flex-col items-center gap-1 px-2 py-2 rounded-lg hover:bg-white/[0.07] active:scale-95 transition-all duration-150",children:[l.jsx("span",{className:"text-lg",children:t}),l.jsx("span",{className:"text-white/40 text-[10px] leading-none",children:e})]})}function sb({onClose:t}){const[e,n]=y.useState(null),[r,s]=y.useState(!0),[i,o]=y.useState(!1);y.useEffect(()=>{const u=d=>{d.preventDefault(),n(d)},h=()=>{o(!0),s(!1),n(null),localStorage.setItem("cat-tetris-installed","true"),t&&t()};return window.addEventListener("beforeinstallprompt",u),window.addEventListener("appinstalled",h),window.matchMedia("(display-mode: standalone)").matches&&(o(!0),t&&t()),()=>{window.removeEventListener("beforeinstallprompt",u),window.removeEventListener("appinstalled",h)}},[t]);const a=async()=>{if(!e)return;e.prompt();const{outcome:u}=await e.userChoice;u==="accepted"&&(s(!1),t&&t()),localStorage.setItem("cat-tetris-install-prompt-seen","true"),n(null)},c=()=>{s(!1),localStorage.setItem("cat-tetris-install-prompt-seen","true"),t&&t()};return i?null:e?l.jsx(xe,{children:r&&l.jsx(N.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:l.jsx(N.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},className:"bg-gradient-to-br from-purple-900 to-blue-900 rounded-2xl p-6 max-w-md w-full shadow-2xl border-2 border-purple-500/30",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-6xl mb-4",children:""}),l.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Instalar Cat Tetris"}),l.jsx("p",{className:"text-purple-200 mb-6",children:"Instale o Cat Tetris na sua tela inicial para jogar offline a qualquer momento! Funciona como um app nativo."}),l.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-6 text-sm",children:[l.jsxs("div",{className:"bg-white/10 rounded-lg p-3",children:[l.jsx("div",{className:"text-green-400 mb-1",children:" Acesso Rpido"}),l.jsx("div",{className:"text-purple-200",children:"cone na tela inicial"})]}),l.jsxs("div",{className:"bg-white/10 rounded-lg p-3",children:[l.jsx("div",{className:"text-green-400 mb-1",children:" Offline"}),l.jsx("div",{className:"text-purple-200",children:"Jogue sem internet"})]}),l.jsxs("div",{className:"bg-white/10 rounded-lg p-3",children:[l.jsx("div",{className:"text-green-400 mb-1",children:" Performance"}),l.jsx("div",{className:"text-purple-200",children:"Carregamento instantneo"})]}),l.jsxs("div",{className:"bg-white/10 rounded-lg p-3",children:[l.jsx("div",{className:"text-green-400 mb-1",children:" Experincia"}),l.jsx("div",{className:"text-purple-200",children:"Como app nativo"})]})]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx(N.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:c,className:"flex-1 bg-gray-600 hover:bg-gray-700 text-white py-3 px-4 rounded-xl font-semibold transition-colors",children:"Agora no"}),l.jsx(N.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:a,className:"flex-1 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white py-3 px-4 rounded-xl font-semibold transition-all shadow-lg",children:" Instalar"})]})]})})})}):l.jsx(N.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:l.jsx(N.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},className:"bg-gradient-to-br from-purple-900 to-blue-900 rounded-2xl p-6 max-w-md w-full shadow-2xl border-2 border-purple-500/30",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-6xl mb-4",children:""}),l.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"PWA no disponvel"}),l.jsx("p",{className:"text-purple-200 mb-6",children:"Este dispositivo no suporta instalao de PWA ou o app j est instalado."}),l.jsx(N.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:c,className:"w-full bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white py-3 px-4 rounded-xl font-semibold transition-all shadow-lg",children:" Entendi"})]})})})}function l0(){const[t,e]=y.useState([]),[n,r]=y.useState(!0);y.useEffect(()=>{try{const o=B.resolve("missionsService");e(o.getMissions()),r(!1);const a=()=>{e(o.getMissions())},c=({linesCleared:g})=>{o.incrementProgress(oe.CLEAR_LINES,g),g===4&&o.incrementProgress(oe.TETRIS_CLEAR,1),a()},u=()=>{o.incrementProgress(oe.T_SPINS,1),a()},h=()=>{o.incrementProgress(oe.PLACE_PIECES,1),a()},d=({score:g,level:v,combo:w})=>{g&&o.updateProgress(oe.SCORE_POINTS,g),v&&o.updateProgress(oe.REACH_LEVEL,v),w&&o.updateProgress(oe.COMBOS,w),a()},f=()=>{o.incrementProgress(oe.BACK_TO_BACK,1),a()};return R.on(G.LINE_CLEARED,c),R.on(G.T_SPIN,u),R.on(G.PIECE_PLACED,h),R.on(G.SCORE_UPDATED,d),R.on(G.BACK_TO_BACK,f),()=>{R.off(G.LINE_CLEARED,c),R.off(G.T_SPIN,u),R.off(G.PIECE_PLACED,h),R.off(G.SCORE_UPDATED,d),R.off(G.BACK_TO_BACK,f)}}catch{r(!1)}},[]),y.useEffect(()=>{if(n)return;const o=setInterval(()=>{try{const a=B.resolve("missionsService"),u=B.resolve("statisticsService").getStats();u.playTime>0&&(a.updateProgress(oe.SURVIVE_TIME,u.playTime),e(a.getMissions()))}catch{}},1e3);return()=>clearInterval(o)},[n]);const s=y.useCallback(o=>{try{const a=B.resolve("missionsService"),c=a.claimReward(o);return c.success&&(e(a.getMissions()),window.dispatchEvent(new Event("currencyUpdated"))),c}catch(a){return{success:!1,error:a.message}}},[]),i=y.useCallback(()=>{try{return B.resolve("missionsService").getStats()}catch{return null}},[]);return{missions:t,loading:n,claimReward:s,getMissionsStats:i}}function c0({trigger:t,duration:e=3e3,message:n}){const[r,s]=y.useState(!1),[i,o]=y.useState([]);return y.useEffect(()=>{if(t){s(!0);const a=[];for(let c=0;c<50;c++)a.push({id:c,x:Math.random()*100,y:-10,rotation:Math.random()*360,color:["#FFD700","#FF6B6B","#4ECDC4","#45B7D1","#FFA07A","#98D8C8"][Math.floor(Math.random()*6)],size:Math.random()*10+5,delay:Math.random()*.5});o(a),setTimeout(()=>{s(!1),o([])},e)}},[t,e]),r?l.jsxs("div",{className:"fixed inset-0 pointer-events-none z-[9999] overflow-hidden",children:[i.map(a=>l.jsx(N.div,{initial:{x:`${a.x}vw`,y:a.y,rotate:a.rotation,opacity:1},animate:{y:"110vh",rotate:a.rotation+720,opacity:0},transition:{duration:2+Math.random(),delay:a.delay,ease:"easeIn"},style:{position:"absolute",width:a.size,height:a.size,backgroundColor:a.color,borderRadius:Math.random()>.5?"50%":"0"}},a.id)),n&&l.jsx(N.div,{initial:{scale:0,y:"50vh"},animate:{scale:1,y:"40vh"},exit:{scale:0,opacity:0},transition:{type:"spring",stiffness:200,damping:20},className:"absolute inset-x-0 flex justify-center",children:l.jsx("div",{className:"bg-gradient-to-r from-yellow-400 to-orange-500 text-white font-bold text-4xl px-8 py-4 rounded-2xl shadow-2xl border-4 border-white",children:n})}),l.jsx(N.div,{initial:{opacity:0},animate:{opacity:[0,1,0]},transition:{duration:1,repeat:3},className:"absolute inset-0 bg-gradient-to-b from-yellow-400/20 via-transparent to-transparent"})]}):null}function ib(){const[t,e]=y.useState([]);y.useEffect(()=>{const s=i=>{const{message:o,type:a="info",duration:c=3e3}=i.detail,u={id:`toast_${Date.now()}_${Math.random()}`,message:o,type:a,duration:c};e(h=>[...h,u]),setTimeout(()=>{e(h=>h.filter(d=>d.id!==u.id))},c)};return window.addEventListener("showToast",s),()=>window.removeEventListener("showToast",s)},[]);const n=s=>{switch(s){case"success":return"from-green-600 to-emerald-600 border-green-400";case"error":return"from-red-600 to-rose-600 border-red-400";case"warning":return"from-yellow-600 to-amber-600 border-yellow-400";case"info":default:return"from-blue-600 to-cyan-600 border-blue-400"}},r=s=>{switch(s){case"success":return"";case"error":return"";case"warning":return"";case"info":default:return""}};return l.jsx("div",{className:"fixed top-4 right-4 z-[9999] flex flex-col gap-2 pointer-events-none",children:l.jsx(xe,{children:t.map(s=>l.jsx(N.div,{initial:{opacity:0,x:100,scale:.8},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:100,scale:.8},className:`bg-gradient-to-r ${n(s.type)} border-2 rounded-lg px-4 py-3 shadow-2xl min-w-[250px] max-w-[400px] pointer-events-auto`,children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("span",{className:"text-white text-xl font-bold",children:r(s.type)}),l.jsx("span",{className:"text-white font-medium flex-1",children:s.message})]})},s.id))})})}function mr(t,e="info",n=3e3){window.dispatchEvent(new CustomEvent("showToast",{detail:{message:t,type:e,duration:n}}))}function ob({onClose:t}){const{missions:e,loading:n,claimReward:r,getMissionsStats:s}=l0(),[i,o]=ce.useState(!1),a=s(),c=d=>{const f=r(d);f.success?(mr(` Recompensa coletada: +${f.reward} `,"success"),s().allClaimed&&(o(!0),setTimeout(()=>o(!1),3e3))):mr(` ${f.error}`,"error")},u=d=>{switch(d){case"easy":return"text-green-400";case"medium":return"text-yellow-400";case"hard":return"text-red-400";default:return"text-white"}},h=d=>{switch(d){case"easy":return" Fcil";case"medium":return" Mdio";case"hard":return" Difcil";default:return d}};return n?l.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",children:l.jsx("div",{className:"text-white text-xl",children:"Carregando misses..."})}):l.jsxs(N.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:t,children:[l.jsxs(N.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},className:"bg-gradient-to-br from-purple-900/95 to-blue-900/95 rounded-2xl p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto border-2 border-white/20 shadow-2xl",onClick:d=>d.stopPropagation(),children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-3xl font-bold text-white flex items-center gap-2",children:" Misses Dirias"}),l.jsx("p",{className:"text-white/60 text-sm mt-1",children:"Complete misses para ganhar  Peixes"})]}),l.jsx("button",{onClick:t,className:"text-white/60 hover:text-white text-2xl transition-colors",children:""})]}),a&&l.jsxs("div",{className:"bg-black/30 rounded-lg p-4 mb-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-white/80",children:"Progresso Dirio:"}),l.jsxs("span",{className:"text-white font-bold",children:[a.completed,"/",a.total," completas"]})]}),l.jsxs("div",{className:"flex justify-between items-center mt-2",children:[l.jsx("span",{className:"text-white/80",children:"Recompensas Disponveis:"}),l.jsxs("span",{className:"text-yellow-400 font-bold flex items-center gap-1",children:[" ",a.claimedRewards,"/",a.totalRewards]})]})]}),l.jsx("div",{className:"space-y-4",children:e.map((d,f)=>{const g=Math.min(d.progress,d.target),v=g/d.target*100;return l.jsxs(N.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:f*.1},className:`bg-black/40 rounded-lg p-4 border-2 ${d.completed?"border-green-500/50":"border-white/10"}`,children:[l.jsxs("div",{className:"flex justify-between items-start mb-2",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx("h3",{className:"text-white font-bold text-lg",children:d.title}),d.completed&&!d.claimed&&l.jsx("span",{className:"text-green-400 text-xl animate-pulse",children:""}),d.claimed&&l.jsx("span",{className:"text-white/40 text-sm",children:"(Coletado)"})]}),l.jsx("p",{className:"text-white/60 text-sm",children:d.description}),l.jsx("span",{className:`text-xs ${u(d.difficulty)}`,children:h(d.difficulty)})]}),l.jsx("div",{className:"text-right",children:l.jsxs("div",{className:"text-yellow-400 font-bold flex items-center gap-1",children:[l.jsx("span",{className:"text-2xl",children:""}),l.jsx("span",{children:d.reward})]})})]}),l.jsxs("div",{className:"mt-3",children:[l.jsxs("div",{className:"flex justify-between text-sm text-white/60 mb-1",children:[l.jsx("span",{children:"Progresso"}),l.jsxs("span",{children:[g,"/",d.target]})]}),l.jsx("div",{className:"w-full bg-gray-700 rounded-full h-3 overflow-hidden",children:l.jsx(N.div,{initial:{width:0},animate:{width:`${v}%`},transition:{duration:.5},className:`h-full ${d.completed?"bg-green-500":"bg-blue-500"}`})})]}),d.completed&&!d.claimed&&l.jsx(N.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>c(d.id),className:"w-full mt-3 bg-green-600 hover:bg-green-500 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:" Coletar Recompensa"})]},d.id)})}),l.jsx("div",{className:"mt-6 text-center text-white/40 text-sm",children:"As misses resetam todos os dias s 00:00"})]}),l.jsx(c0,{trigger:i,message:" Todas as misses completas! ",duration:3e3})]})}function u0(){const[t,e]=y.useState([]),[n,r]=y.useState([]),[s,i]=y.useState(!0);y.useEffect(()=>{try{const h=B.resolve("achievementsService");e(h.getAchievements()),i(!1);const d=setInterval(()=>{const g=B.resolve("playerStatsService").getStats(),v=h.checkAchievements(g);v.length>0&&(e(h.getAchievements()),r(v),window.dispatchEvent(new CustomEvent("achievementsUnlocked",{detail:v})),setTimeout(()=>{r([])},5e3))},2e3);return()=>clearInterval(d)}catch{i(!1)}},[]);const o=y.useCallback(h=>{try{return B.resolve("achievementsService").getByTier(h)}catch{return[]}},[]),a=y.useCallback(()=>{try{return B.resolve("achievementsService").getUnlocked()}catch{return[]}},[]),c=y.useCallback(()=>{try{return B.resolve("achievementsService").getLocked()}catch{return[]}},[]),u=y.useCallback(()=>{try{return B.resolve("achievementsService").getStats()}catch{return null}},[]);return{achievements:t,newUnlocks:n,loading:s,getAchievementsByTier:o,getUnlocked:a,getLocked:c,getStats:u}}function ab({onClose:t}){const{achievements:e,loading:n,getStats:r,getAchievementsByTier:s}=u0(),[i,o]=y.useState("all"),a=r(),c={bronze:"from-amber-700 to-amber-900",silver:"from-gray-400 to-gray-600",gold:"from-yellow-400 to-yellow-600",platinum:"from-cyan-400 to-blue-600"},u={bronze:"",silver:"",gold:"",platinum:""},h=i==="all"?e:s(i);return n?l.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",children:l.jsx("div",{className:"text-white text-xl",children:"Carregando conquistas..."})}):l.jsx(N.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:t,children:l.jsxs(N.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},className:"bg-gradient-to-br from-indigo-900/95 to-purple-900/95 rounded-2xl p-6 max-w-4xl w-full max-h-[90vh] overflow-y-auto border-2 border-white/20 shadow-2xl",onClick:d=>d.stopPropagation(),children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-3xl font-bold text-white flex items-center gap-2",children:" Conquistas"}),l.jsx("p",{className:"text-white/60 text-sm mt-1",children:"Desbloqueie conquistas para ganhar  Peixes"})]}),l.jsx("button",{onClick:t,className:"text-white/60 hover:text-white text-2xl transition-colors",children:""})]}),a&&l.jsxs("div",{className:"bg-black/30 rounded-lg p-4 mb-6",children:[l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-2xl font-bold text-white",children:[a.unlocked,"/",a.total]}),l.jsx("div",{className:"text-white/60 text-sm",children:"Desbloqueadas"})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-2xl font-bold text-green-400",children:[a.percentage,"%"]}),l.jsx("div",{className:"text-white/60 text-sm",children:"Completo"})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-2xl font-bold text-yellow-400 flex items-center justify-center gap-1",children:[" ",a.earnedRewards.toLocaleString()]}),l.jsx("div",{className:"text-white/60 text-sm",children:"Ganhos"})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-2xl font-bold text-white/40 flex items-center justify-center gap-1",children:[" ",a.totalRewards.toLocaleString()]}),l.jsx("div",{className:"text-white/60 text-sm",children:"Total"})]})]}),l.jsxs("div",{className:"flex justify-around mt-4 pt-4 border-t border-white/10",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-lg",children:""}),l.jsx("div",{className:"text-white/80 text-sm",children:a.byTier.bronze})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-lg",children:""}),l.jsx("div",{className:"text-white/80 text-sm",children:a.byTier.silver})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-lg",children:""}),l.jsx("div",{className:"text-white/80 text-sm",children:a.byTier.gold})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-lg",children:""}),l.jsx("div",{className:"text-white/80 text-sm",children:a.byTier.platinum})]})]})]}),l.jsxs("div",{className:"flex gap-2 mb-4 overflow-x-auto",children:[l.jsx("button",{onClick:()=>o("all"),className:`px-4 py-2 rounded-lg font-bold transition-colors whitespace-nowrap ${i==="all"?"bg-white text-black":"bg-white/20 text-white hover:bg-white/30"}`,children:"Todas"}),Object.keys(u).map(d=>l.jsxs("button",{onClick:()=>o(d),className:`px-4 py-2 rounded-lg font-bold transition-colors whitespace-nowrap ${i===d?`bg-gradient-to-r ${c[d]} text-white`:"bg-white/20 text-white hover:bg-white/30"}`,children:[u[d]," ",d.charAt(0).toUpperCase()+d.slice(1)]},d))]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:h.map((d,f)=>{const g=d.progress||0,v=d.requirement.value,w=Math.min(g/v*100,100);return l.jsxs(N.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:f*.05},className:`bg-black/40 rounded-lg p-4 border-2 relative overflow-hidden ${d.unlocked?`border-transparent bg-gradient-to-br ${c[d.tier]}`:"border-white/10"}`,children:[d.unlocked&&l.jsx("div",{className:"absolute top-2 right-2 text-3xl",children:""}),l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:"text-4xl",children:u[d.tier]}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:`font-bold text-lg mb-1 ${d.unlocked?"text-white":"text-white/60"}`,children:d.title}),l.jsx("p",{className:`text-sm mb-2 ${d.unlocked?"text-white/90":"text-white/40"}`,children:d.description}),l.jsxs("div",{className:`flex items-center gap-1 text-sm font-bold ${d.unlocked?"text-yellow-300":"text-white/40"}`,children:[" ",d.reward]}),!d.unlocked&&l.jsxs("div",{className:"mt-2",children:[l.jsxs("div",{className:"flex justify-between text-xs text-white/40 mb-1",children:[l.jsx("span",{children:"Progresso"}),l.jsxs("span",{children:[g,"/",v]})]}),l.jsx("div",{className:"w-full bg-gray-700/50 rounded-full h-2",children:l.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${w}%`}})})]}),d.unlocked&&d.unlockedAt&&l.jsxs("div",{className:"text-xs text-white/60 mt-2",children:["Desbloqueado em ",new Date(d.unlockedAt).toLocaleDateString()]})]})]})]},d.id)})}),h.length===0&&l.jsx("div",{className:"text-center text-white/40 py-8",children:"Nenhuma conquista nesta categoria"})]})})}function lb(){const[t,e]=y.useState([]),[n,r]=y.useState(!1);y.useEffect(()=>{const o=a=>{const c=a.detail;c.some(h=>h.tier==="platinum")&&(r(!0),setTimeout(()=>r(!1),3e3)),c.forEach((h,d)=>{setTimeout(()=>{const f={id:`${h.id}_${Date.now()}`,achievement:h};e(g=>[...g,f]),setTimeout(()=>{e(g=>g.filter(v=>v.id!==f.id))},5e3)},d*500)})};return window.addEventListener("achievementsUnlocked",o),()=>{window.removeEventListener("achievementsUnlocked",o)}},[]);const s={bronze:"",silver:"",gold:"",platinum:""},i={bronze:"from-amber-700 to-amber-900",silver:"from-gray-400 to-gray-600",gold:"from-yellow-400 to-yellow-600",platinum:"from-cyan-400 to-blue-600"};return l.jsxs("div",{className:"fixed top-4 right-4 z-[9999] pointer-events-none",children:[l.jsx(xe,{children:t.map(o=>{const{achievement:a}=o;return l.jsx(N.div,{initial:{opacity:0,x:100,scale:.8},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:100,scale:.8},transition:{type:"spring",stiffness:200,damping:20},className:`bg-gradient-to-r ${i[a.tier]} rounded-lg p-4 shadow-2xl mb-3 border-2 border-white/30 pointer-events-auto max-w-sm`,children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"text-5xl",children:s[a.tier]}),l.jsxs("div",{className:"flex-1",children:[l.jsx("div",{className:"text-white/90 text-sm font-bold mb-1",children:" CONQUISTA DESBLOQUEADA!"}),l.jsx("h3",{className:"text-white font-bold text-lg",children:a.title}),l.jsx("p",{className:"text-white/80 text-sm",children:a.description}),l.jsxs("div",{className:"flex items-center gap-1 mt-2 text-yellow-200 font-bold",children:[l.jsx("span",{className:"text-xl",children:""}),l.jsxs("span",{children:["+",a.reward]})]})]})]})},o.id)})}),l.jsx(c0,{trigger:n,message:" Conquista Lendria! ",duration:3e3})]})}function cb({mode:t,aiDifficulty:e,ai1Difficulty:n,ai2Difficulty:r,onExit:s}){var S,j,k,C,T,E,A,z,Q,F,H,V,L,$,P,M,O,I,q,Ve,Re,et;const[i,o]=y.useState(null),[a,c]=y.useState(null),[u,h]=y.useState(null),[d,f]=y.useState(0),[g,v]=y.useState(0),w=y.useRef({p1:null,p2:null,ai:null,ai1:null,ai2:null}),b=y.useRef(0),m=y.useRef(null);y.useEffect(()=>{const W=new $n(new Wn,new qn,null,new xn),X=new $n(new Wn,new qn,null,new xn);let fe=null,J=null,Z=null;if(t==="vsAI")try{fe=new fs,fe.setDifficulty(e||"medium"),e==="expert"&&(X.score._fixedLevel=1)}catch{}else t==="aiVsAI"&&(J=new fs,J.setDifficulty(n||"expert"),J.setVisualMode(!0),Z=new fs,Z.setDifficulty(r||"expert"),Z.setVisualMode(!0),(n||"expert")==="expert"&&(W.score._fixedLevel=1),(r||"expert")==="expert"&&(X.score._fixedLevel=1));return W.initializeGame(),W.isPlaying=!0,X.initializeGame(),X.isPlaying=!0,t==="vsAI"&&e==="expert"?(X._lockDelayMax=2e3,X._lockDelayMaxResets=50):t==="aiVsAI"&&((n||"expert")==="expert"&&(W._lockDelayMax=2e3,W._lockDelayMaxResets=50),(r||"expert")==="expert"&&(X._lockDelayMax=2e3,X._lockDelayMaxResets=50)),w.current={p1:W,p2:X,ai:fe,ai1:J,ai2:Z},o(W.getGameState()),c(X.getGameState()),()=>{m.current&&cancelAnimationFrame(m.current)}},[t,e,n,r]),y.useEffect(()=>{const W=X=>{b.current||(b.current=X);const fe=X-b.current;b.current=X;const{p1:J,p2:Z,ai:tt,ai1:Us,ai2:$s}=w.current;if(!J||!Z){m.current=requestAnimationFrame(W);return}if(J.gameOver||Z.gameOver){J.gameOver||(J.gameOver=!0,J._markDirty()),Z.gameOver||(Z.gameOver=!0,Z._markDirty()),J.isDirty&&(o(J.getGameState()),J.clearDirty()),Z.isDirty&&(c(Z.getGameState()),Z.clearDirty());return}J.isPaused||J.updateGame(fe),Z.isPaused||Z.updateGame(fe);const Ws=J.consumeAttack();Ws>0&&!Z.gameOver&&Z.receiveGarbage(Ws);const qs=Z.consumeAttack();qs>0&&!J.gameOver&&J.receiveGarbage(qs);const Fr=(ee,ge)=>{if(!(!ee||ge.gameOver))try{const g0=t==="aiVsAI"?3:ee._isExpert?20:1;for(let Xc=0;Xc<g0;Xc++){const Fo=ee.decideNextMove(ge.getGameState());if(!Fo)break;switch(Fo.action){case"left":ge.movePiece("left");break;case"right":ge.movePiece("right");break;case"rotate":ge.rotatePiece();break;case"down":ge.movePiece("down");break;case"drop":ge.hardDrop();break;case"hold":ge.holdPiece();break}if(Fo.action==="drop")break}}catch{}};t==="aiVsAI"?(Fr(Us,J),Fr($s,Z)):t==="vsAI"&&Fr(tt,Z),J.isDirty&&(o(J.getGameState()),f(J.pendingGarbage),J.clearDirty()),Z.isDirty&&(c(Z.getGameState()),v(Z.pendingGarbage),Z.clearDirty()),m.current=requestAnimationFrame(W)};return m.current=requestAnimationFrame(W),()=>{m.current&&cancelAnimationFrame(m.current)}},[t]),y.useEffect(()=>{var W,X;u||!i||!a||(i.gameOver&&!a.gameOver?h("player2"):a.gameOver&&!i.gameOver?h("player1"):i.gameOver&&a.gameOver&&h((((W=i.score)==null?void 0:W.points)||0)>=(((X=a.score)==null?void 0:X.points)||0)?"player1":"player2"))},[i==null?void 0:i.gameOver,a==null?void 0:a.gameOver,u]),y.useEffect(()=>{if(u||t==="aiVsAI")return;const W=X=>{const fe=w.current.p1;if(!(!fe||fe.gameOver))switch(X.key){case"ArrowLeft":X.preventDefault(),fe.movePiece("left");break;case"ArrowRight":X.preventDefault(),fe.movePiece("right");break;case"ArrowDown":X.preventDefault(),fe.movePiece("down");break;case"ArrowUp":X.preventDefault(),fe.rotatePiece();break;case"z":case"Z":fe.rotatePiece("left");break;case"c":case"C":case"Shift":fe.holdPiece();break;case" ":X.preventDefault(),fe.hardDrop();break}};return window.addEventListener("keydown",W),()=>window.removeEventListener("keydown",W)},[u]);const p=ce.useMemo(()=>{var W;if(!(i!=null&&i.currentPiece)||i!=null&&i.gameOver)return null;try{return(W=w.current.p1)==null?void 0:W.getDropPreview()}catch{return null}},[(j=(S=i==null?void 0:i.currentPiece)==null?void 0:S.position)==null?void 0:j.x,(C=(k=i==null?void 0:i.currentPiece)==null?void 0:k.position)==null?void 0:C.y,(T=i==null?void 0:i.currentPiece)==null?void 0:T.type,(E=i==null?void 0:i.currentPiece)==null?void 0:E.rotationState]),x=ce.useMemo(()=>{var W;if(!(a!=null&&a.currentPiece)||a!=null&&a.gameOver)return null;try{return(W=w.current.p2)==null?void 0:W.getDropPreview()}catch{return null}},[(z=(A=a==null?void 0:a.currentPiece)==null?void 0:A.position)==null?void 0:z.x,(F=(Q=a==null?void 0:a.currentPiece)==null?void 0:Q.position)==null?void 0:F.y,(H=a==null?void 0:a.currentPiece)==null?void 0:H.type,(V=a==null?void 0:a.currentPiece)==null?void 0:V.rotationState]);return!i||!a?l.jsx("div",{className:"h-screen flex items-center justify-center bg-gradient-to-br from-purple-900 to-blue-900",children:l.jsx("div",{className:"text-white text-2xl",children:"Carregando multiplayer..."})}):l.jsxs("div",{className:"h-screen flex flex-col items-center bg-gradient-to-br from-purple-900 to-blue-900 p-2 overflow-hidden",children:[l.jsxs("div",{className:"flex justify-between items-center w-full max-w-5xl mb-2",children:[l.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-white",children:t==="aiVsAI"?" IA vs IA (Debug)":t==="vsAI"?" vs IA":" 1v1 Local"}),l.jsx("button",{onClick:s,className:"bg-red-600 hover:bg-red-700 text-white px-3 py-1.5 rounded-lg transition-colors text-sm font-bold",children:" Voltar"})]}),l.jsxs("div",{className:"flex gap-2 sm:gap-4 items-start justify-center flex-wrap",children:[l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("div",{className:"bg-blue-600 text-white px-4 py-1 rounded-t-lg font-bold text-sm sm:text-base",children:t==="aiVsAI"?` IA1 (${(n==null?void 0:n.toUpperCase())||"EXPERT"})`:t==="vsAI"?" VOC":" P1"}),l.jsx("div",{className:"bg-black/40 p-2 rounded-b-lg",children:l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx(Un,{heldPiece:i.heldPiece,canHold:i.canHold}),t!=="aiVsAI"&&l.jsxs("div",{className:"text-white/60 text-[10px] leading-tight",children:[" mover",l.jsx("br",{})," rotacionar",l.jsx("br",{}),"C segurar",l.jsx("br",{}),"Espao dropar"]})]}),l.jsx(gn,{board:i.board,currentPiece:i.currentPiece,dropPreview:p,gameOver:i.gameOver}),d>0&&l.jsx(xh,{count:d}),l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx(zn,{pieces:i.nextPieces||[]}),l.jsx(Hn,{score:((L=i.score)==null?void 0:L.points)||0,level:(($=i.score)==null?void 0:$.level)||1,lines:((P=i.score)==null?void 0:P.lines)||0,combo:((M=i.score)==null?void 0:M.combo)||0})]})]})})]}),l.jsx("div",{className:"flex items-center justify-center self-center",children:l.jsx("div",{className:"bg-yellow-500 text-black font-bold text-2xl sm:text-3xl px-4 py-2 rounded-full shadow-2xl animate-pulse",children:"VS"})}),l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("div",{className:"bg-red-600 text-white px-4 py-1 rounded-t-lg font-bold text-sm sm:text-base",children:t==="aiVsAI"?` IA2 (${(r==null?void 0:r.toUpperCase())||"EXPERT"})`:t==="vsAI"?` IA (${(e==null?void 0:e.toUpperCase())||"MEDIUM"})`:" P2"}),l.jsx("div",{className:"bg-black/40 p-2 rounded-b-lg",children:l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx(Un,{heldPiece:a.heldPiece,canHold:a.canHold}),t==="1v1"&&l.jsxs("div",{className:"text-white/60 text-[10px] leading-tight",children:["Setas mover",l.jsx("br",{})," rotacionar",l.jsx("br",{}),"Ctrl segurar",l.jsx("br",{}),"Enter dropar"]})]}),l.jsx(gn,{board:a.board,currentPiece:a.currentPiece,dropPreview:x,gameOver:a.gameOver}),g>0&&l.jsx(xh,{count:g}),l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx(zn,{pieces:a.nextPieces||[]}),l.jsx(Hn,{score:((O=a.score)==null?void 0:O.points)||0,level:((I=a.score)==null?void 0:I.level)||1,lines:((q=a.score)==null?void 0:q.lines)||0,combo:((Ve=a.score)==null?void 0:Ve.combo)||0})]})]})})]})]}),l.jsx(xe,{children:u&&l.jsx(N.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/90 flex items-center justify-center z-50",children:l.jsxs(N.div,{initial:{scale:.8,y:50},animate:{scale:1,y:0},className:"bg-gradient-to-br from-yellow-500 to-orange-600 rounded-2xl p-12 text-center",children:[l.jsx("div",{className:"text-8xl mb-4",children:u==="player1"||t==="aiVsAI"?"":""}),l.jsx("h2",{className:"text-5xl font-bold text-white mb-4",children:t==="aiVsAI"?u==="player1"?"IA 1 VENCEU!":"IA 2 VENCEU!":u==="player1"?"VITRIA!":"DERROTA!"}),l.jsx("p",{className:"text-2xl text-white/80 mb-8",children:t==="aiVsAI"?`${u==="player1"?n==null?void 0:n.toUpperCase():r==null?void 0:r.toUpperCase()}  superior!`:u==="player1"?t==="vsAI"?"Voc venceu a IA!":"Player 1 venceu!":t==="vsAI"?"IA venceu!":"Player 2 venceu!"}),l.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-8 text-white",children:[l.jsxs("div",{className:"bg-black/30 rounded-lg p-4",children:[l.jsx("div",{className:"text-sm opacity-60",children:t==="aiVsAI"?`IA1 (${n})`:"Player 1"}),l.jsx("div",{className:"text-3xl font-bold",children:(((Re=i.score)==null?void 0:Re.points)||0).toLocaleString()})]}),l.jsxs("div",{className:"bg-black/30 rounded-lg p-4",children:[l.jsx("div",{className:"text-sm opacity-60",children:t==="aiVsAI"?`IA2 (${r})`:t==="vsAI"?"IA":"Player 2"}),l.jsx("div",{className:"text-3xl font-bold",children:(((et=a.score)==null?void 0:et.points)||0).toLocaleString()})]})]}),l.jsxs("div",{className:"flex gap-4",children:[l.jsx("button",{onClick:()=>window.location.reload(),className:"bg-green-600 hover:bg-green-700 text-white px-8 py-3 rounded-lg font-bold text-xl transition-colors",children:" Jogar Novamente"}),l.jsx("button",{onClick:s,className:"bg-gray-700 hover:bg-gray-800 text-white px-8 py-3 rounded-lg font-bold text-xl transition-colors",children:" Menu"})]})]})})})]})}function xh({count:t}){const n=Math.min(t,20);return l.jsx("div",{className:"flex flex-col-reverse justify-end w-3 rounded overflow-hidden",style:{height:"calc(var(--cell) * 22 + 22px)"},children:Array.from({length:n},(r,s)=>l.jsx("div",{className:"w-full",style:{height:`${100/20}%`,backgroundColor:t>8?"#ef4444":t>4?"#f59e0b":"#ef4444",opacity:.7+s/n*.3}},s))})}class ub{constructor(){this._actionQueue=[],this._lastPieceType=null,this._holdCooldown=0,this._comboCount=0,this.thinkingTime=0,this.lastDecision=0}setDifficulty(){}decideNextMove(e){var d;const n=Date.now();if(n-this.lastDecision<this.thinkingTime)return null;this.lastDecision=n;const{currentPiece:r,board:s,heldPiece:i,canHold:o}=e;if(!r||!s)return null;const a=r.type;if(a!==this._lastPieceType&&(this._lastPieceType=a,this._actionQueue=[],this._holdCooldown>0&&this._holdCooldown--),this._actionQueue.length>0)return this._actionQueue.shift();const c=s.length,u=((d=s[0])==null?void 0:d.length)||10,h=this._findBestMove(r,s,c,u);if(o&&this._holdCooldown<=0&&i){const f=this._findBestMove(i,s,c,u);if(f&&(!h||f.score>h.score+500))return this._holdCooldown=1,{action:"hold"}}return!h&&o&&this._holdCooldown<=0?(this._holdCooldown=1,{action:"hold"}):(h?this._actionQueue=this._buildActionSequence(r,h.rotations,h.targetX):this._actionQueue=[{action:"drop"}],this._actionQueue.shift()||{action:"drop"})}_findBestMove(e,n,r,s){let i=-1/0,o=null;for(let a=0;a<4;a++){const c=this._rotateShape(e.shape,a),u=c[0].length;for(let h=-1;h<=s-u+1;h++){const d=this._findLandingRow(c,n,h,r,s);if(d==null||d<0)continue;const f=this._placeOnBoard(c,n,h,d);if(!f)continue;const g=this._evaluate(f,n,d);g>i&&(i=g,o={rotations:a,targetX:h,score:g})}}return o}_evaluate(e,n,r){const s=e.length,i=e[0].length;let o=0;const a=this._countCompleteLines(e);a===1&&(o+=1e4),a===2&&(o+=25e3),a===3&&(o+=5e4),a>=4&&(o+=1e5);const c=this._removeCompleteLines(e);let u=0,h=0;for(let p=0;p<i;p++){let x=!1,S=0;for(let j=0;j<s;j++)c[j][p]!=null?(x=!0,S++):x&&(u++,h+=S)}o-=u*1e4,o-=h*1e3;const d=[];for(let p=0;p<i;p++){let x=0;for(let S=0;S<s;S++)if(c[S][p]!=null){x=s-S;break}d.push(x)}const f=Math.max(...d),g=d.reduce((p,x)=>p+x,0);o-=g*50,o-=f*100,f>12&&(o-=(f-12)*(f-12)*500),f>16&&(o-=1e5);let v=0;for(let p=0;p<i-1;p++)p===i-2?v+=Math.abs(d[p]-d[p+1])*.3:v+=Math.abs(d[p]-d[p+1]);o-=v*200;let w=0;for(let p=0;p<s;p++)if(c[p].filter(S=>S!=null).length!==0){for(let S=0;S<i-1;S++){const j=c[p][S]!=null,k=c[p][S+1]!=null;j!==k&&w++}c[p][0]==null&&w++,c[p][i-1]==null&&w++}o-=w*100;let b=0;for(let p=0;p<i;p++){for(let x=0;x<s-1;x++){const S=c[x][p]!=null,j=c[x+1][p]!=null;S!==j&&b++}c[s-1][p]==null&&b++}o-=b*80;const m=i-1;if(d[m]<d[m-1]){const p=d[m-1]-d[m];p>=1&&p<=4&&f<=12&&(o+=p*300)}for(let p=0;p<s;p++){const x=c[p].filter(S=>S!=null).length;x===9&&(o+=500),x===8&&(o+=200)}return o-=r>0?0:(s-r)*30,f>14&&(o+=a*5e4),o}_buildActionSequence(e,n,r){var u;const s=[],i=n%4;for(let h=0;h<i;h++)s.push({action:"rotate"});const o=((u=e.position)==null?void 0:u.x)??3,a=r-o,c=a>0?"right":"left";for(let h=0;h<Math.abs(a);h++)s.push({action:c});return s.push({action:"drop"}),s}_rotateShape(e,n){let r=e;for(let s=0;s<n%4;s++)r=r[0].map((i,o)=>r.map(a=>a[o]).reverse());return r}_findLandingRow(e,n,r,s,i){const o=e.length;for(let a=-o;a<s;a++)if(this._collides(e,n,r,a+1,s,i))return a;return s-o}_collides(e,n,r,s,i,o){for(let a=0;a<e.length;a++)for(let c=0;c<e[0].length;c++){if(!e[a][c])continue;const u=r+c,h=s+a;if(u<0||u>=o||h>=i||h>=0&&n[h][u]!=null)return!0}return!1}_placeOnBoard(e,n,r,s){const i=n.length,o=n[0].length,a=n.map(c=>[...c]);for(let c=0;c<e.length;c++)for(let u=0;u<e[0].length;u++){if(!e[c][u])continue;const h=r+u,d=s+c;if(h<0||h>=o||d<0||d>=i||a[d][h]!=null)return null;a[d][h]=1}return a}_removeCompleteLines(e){const n=e[0].length,r=e.filter(s=>!s.every(i=>i!=null));for(;r.length<e.length;)r.unshift(new Array(n).fill(null));return r}_countCompleteLines(e){return e.filter(n=>n.every(r=>r!=null)).length}_countHoles(e){let n=0;const r=e[0].length;for(let s=0;s<r;s++){let i=!1;for(let o=0;o<e.length;o++)e[o][s]!=null?i=!0:i&&n++}return n}_getMaxHeight(e){var s;const n=e.length,r=((s=e[0])==null?void 0:s.length)||10;for(let i=0;i<n;i++)for(let o=0;o<r;o++)if(e[i][o]!=null)return n-i;return 0}}const db=50;function hb(t){const[e,n]=y.useState(null),[r,s]=y.useState({lines:0,combos:0,tetrises:0,maxCombo:0}),[i,o]=y.useState(!1),[a,c]=y.useState(!1),u=y.useRef(null),h=y.useRef(null),d=y.useRef(null),f=y.useRef(0),g=y.useRef(0),v=y.useRef({lines:0,combos:0,tetrises:0,maxCombo:0,currentCombo:0}),w=y.useCallback(()=>{const m=new $n(new Wn,new qn,null,new xn);m.initializeGame(),m.isPlaying=!0;const p=new ub;u.current=m,h.current=p,g.current=0,f.current=0,v.current.currentCombo=0,n(m.getGameState()),c(!0)},[]);y.useEffect(()=>{if(!t){d.current&&cancelAnimationFrame(d.current),u.current=null,h.current=null,c(!1),n(null),s({lines:0,combos:0,tetrises:0,maxCombo:0}),v.current={lines:0,combos:0,tetrises:0,maxCombo:0,currentCombo:0};return}w();const m=({linesCleared:x})=>{const S=v.current;S.lines+=x,S.currentCombo++,S.currentCombo>1&&(S.combos++,S.currentCombo>S.maxCombo&&(S.maxCombo=S.currentCombo),o(!0),setTimeout(()=>o(!1),600)),x>=4&&S.tetrises++,s({lines:S.lines,combos:S.combos,tetrises:S.tetrises,maxCombo:S.maxCombo})},p=({linesCleared:x})=>{x===0&&(v.current.currentCombo=0)};return R.on(G.LINE_CLEARED,m),R.on(G.PIECE_PLACED,p),()=>{d.current&&cancelAnimationFrame(d.current),R.off(G.LINE_CLEARED,m),R.off(G.PIECE_PLACED,p),u.current=null,h.current=null}},[t,w]),y.useEffect(()=>{if(!a||!u.current||!t)return;const m=p=>{f.current||(f.current=p);let x=p-f.current;f.current=p,x>200&&(x=16);const S=u.current,j=h.current;if(!(!S||!j)){if(S.gameOver){w(),d.current=requestAnimationFrame(m);return}if(S.isPlaying&&!S.isPaused&&S.updateGame(x),g.current+=x,g.current>=db){g.current=0;try{const k=S.getGameState(),C=j.decideNextMove(k);if(C)switch(C.action){case"left":S.movePiece("left");break;case"right":S.movePiece("right");break;case"rotate":S.rotatePiece();break;case"rotateLeft":S.rotatePieceLeft();break;case"down":S.movePiece("down");break;case"drop":S.hardDrop();break;case"hold":S.holdPiece();break}n(S.getGameState())}catch{}}d.current=requestAnimationFrame(m)}};return d.current=requestAnimationFrame(m),()=>{d.current&&cancelAnimationFrame(d.current)}},[a,t,w]);const b=y.useCallback(()=>{var m;try{return((m=u.current)==null?void 0:m.getDropPreview())||null}catch{return null}},[]);return{gameState:e,stats:r,comboFlash:i,isRunning:a,getDropPreview:b}}function fb({onClose:t}){const{gameState:e,stats:n,comboFlash:r,getDropPreview:s}=hb(!0),i=y.useMemo(()=>s(),[e,s]);if(!e)return l.jsx("div",{className:"h-screen bg-gradient-to-b from-slate-950 via-violet-950 to-slate-950 flex items-center justify-center overflow-hidden",children:l.jsx("p",{className:"text-white/50 animate-pulse",children:"Preparando IA Expert..."})});const o=e.score;return l.jsxs("div",{className:"h-screen bg-gradient-to-b from-slate-950 via-violet-950 to-slate-950 flex flex-col overflow-hidden select-none",children:[l.jsx("div",{className:"absolute inset-0 pointer-events-none overflow-hidden",children:l.jsx("div",{className:"absolute top-1/3 left-1/2 -translate-x-1/2 w-[500px] h-[500px] bg-cyan-600/10 rounded-full blur-[120px]"})}),l.jsxs("div",{className:"flex items-center justify-between px-3 py-1.5 bg-black/30 backdrop-blur-sm border-b border-white/10 shrink-0 relative z-10",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(N.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:t,className:"bg-white/15 hover:bg-white/25 text-white p-1.5 rounded-lg transition-colors",children:l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"})})}),l.jsx("span",{className:"text-sm font-bold text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-400",children:" Cat Tetris AI"})]}),l.jsxs("div",{className:`flex items-center gap-3 text-xs px-3 py-1 rounded-full transition-colors duration-300 ${r?"bg-cyan-500/30 text-cyan-300":"text-white/60"}`,children:[l.jsxs("span",{className:"font-bold",children:[n.lines," linhas"]}),l.jsxs("span",{children:["T:",n.tetrises]}),l.jsxs("span",{children:["C:",n.combos]}),l.jsxs("span",{children:["Max:",n.maxCombo]})]}),l.jsxs("div",{className:"text-xs text-white/50",children:[l.jsx("span",{className:"text-yellow-400 font-bold",children:((o==null?void 0:o.points)||0).toLocaleString()}),l.jsxs("span",{className:"ml-2",children:["Nv.",(o==null?void 0:o.level)||1]})]})]}),l.jsx(xe,{children:r&&l.jsx(N.div,{initial:{opacity:0,scale:.7,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:1.2,y:-20},transition:{duration:.4,ease:"easeOut"},className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-50 pointer-events-none",children:l.jsx("div",{className:"text-5xl font-black text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 via-blue-400 to-yellow-300 drop-shadow-[0_0_30px_rgba(34,211,238,0.7)]",children:"COMBO!"})})}),l.jsx("div",{className:"flex-1 flex items-center justify-center overflow-hidden p-2 relative z-10",children:l.jsxs("div",{className:"flex gap-2 justify-center items-start",children:[l.jsx(Un,{heldPiece:e.heldPiece,canHold:e.canHold}),l.jsx(gn,{board:e.board,currentPiece:e.currentPiece,dropPreview:i,gameOver:e.gameOver}),l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx(zn,{pieces:e.nextPieces||[]}),l.jsx(Hn,{score:(o==null?void 0:o.points)||0,level:(o==null?void 0:o.level)||1,lines:(o==null?void 0:o.lines)||0,combo:(o==null?void 0:o.combo)||0})]})]})})]})}const pb=[{x:-1,y:0},{x:1,y:0},{x:0,y:-1},{x:-1,y:-1},{x:1,y:-1}],mb={"0>1":[{x:-1,y:0},{x:-1,y:-1},{x:0,y:2},{x:-1,y:2}],"1>2":[{x:1,y:0},{x:1,y:1},{x:0,y:-2},{x:1,y:-2}],"2>3":[{x:1,y:0},{x:1,y:-1},{x:0,y:2},{x:1,y:2}],"3>0":[{x:-1,y:0},{x:-1,y:1},{x:0,y:-2},{x:-1,y:-2}]},Pa=[[[0,1,0],[1,1,1],[0,0,0]],[[0,1,0],[0,1,1],[0,1,0]],[[0,0,0],[1,1,1],[0,1,0]],[[0,1,0],[1,1,0],[0,1,0]]];class gb{constructor(){this._actionQueue=[],this._holdCooldown=0,this._lastPieceType=null,this._piecesPlaced=0,this._tspinState=null,this.thinkingTime=0,this.lastDecision=0}setDifficulty(){}decideNextMove(e){const n=Date.now();if(n-this.lastDecision<this.thinkingTime)return null;this.lastDecision=n;const{currentPiece:r,board:s,heldPiece:i,canHold:o}=e;if(!r||!s)return null;const a=r.type;if(a!==this._lastPieceType&&(this._lastPieceType=a,this._actionQueue=[],this._tspinState=null,this._holdCooldown>0&&this._holdCooldown--),this._tspinState)return this._executeTSpinStep(e);if(this._actionQueue.length>0)return this._actionQueue.shift();const c=this._getMaxHeight(s),u=c>=14,d=this._countHoles(s)<=2;if(o&&this._holdCooldown<=0&&!u){if(a==="T"){const g=this._findBestTSpinMove(s);if(g&&g.isTSpin&&g.linesCleared>=2&&d)return this._startTSpinExecution(g),this._piecesPlaced++,this._executeTSpinStep(e);if(d&&c>=3&&(!i||i.type!=="T"))return this._holdCooldown=2,{action:"hold"};if(g&&g.isTSpin&&g.linesCleared>=1&&d)return this._startTSpinExecution(g),this._piecesPlaced++,this._executeTSpinStep(e)}if((i==null?void 0:i.type)==="T"&&a!=="T"&&d){const g=this._findBestTSpinMove(s);if(g&&g.isTSpin&&g.linesCleared>=2)return this._holdCooldown=2,{action:"hold"}}}if(a==="T"&&!u&&d){const g=this._findBestTSpinMove(s);if(g&&g.isTSpin&&g.linesCleared>=1)return this._startTSpinExecution(g),this._piecesPlaced++,this._executeTSpinStep(e)}const f=this._findBestMove(r,s);return f?(this._actionQueue=this._buildNormalActionSequence(r,f.rotations,f.targetX),this._piecesPlaced++):this._actionQueue=[{action:"drop"}],this._actionQueue.shift()||{action:"down"}}_startTSpinExecution(e){this._tspinState={phase:"move",startCol:e.startCol,targetRot:e.targetRot,stopRow:e.stopRow,rotationsLeft:e.targetRot,dropCount:0},this._actionQueue=[]}_executeTSpinStep(e){var a,c,u;const{currentPiece:n,board:r}=e;if(!n||!r)return this._tspinState=null,null;if(n.type!=="T")return this._tspinState=null,null;const s=this._tspinState,i=r.length,o=((a=r[0])==null?void 0:a.length)||10;switch(s.phase){case"move":{const h=((c=n.position)==null?void 0:c.x)??3;return h<s.startCol?{action:"right"}:h>s.startCol?{action:"left"}:(s.phase="drop",this._executeTSpinStep(e))}case"drop":return(((u=n.position)==null?void 0:u.y)??0)>=s.stopRow?(s.phase="rotate",s.rotationsLeft=s.targetRot,this._executeTSpinStep(e)):this._canPieceMoveDown(n,r,i,o)?(s.dropCount++,{action:"down"}):(s.phase="rotate",s.rotationsLeft=s.targetRot,this._executeTSpinStep(e));case"rotate":return s.rotationsLeft>0?(s.rotationsLeft--,{action:"rotate"}):(s.phase="lock",this._tspinState=null,{action:"drop"});default:return this._tspinState=null,null}}_canPieceMoveDown(e,n,r,s){const i=e.shape,o=e.position;if(!i||!o)return!1;for(let a=0;a<i.length;a++)for(let c=0;c<i[0].length;c++){if(!i[a][c])continue;const u=o.x+c,h=o.y+a+1;if(u<0||u>=s||h>=r||h>=0&&n[h][u]!=null)return!1}return!0}_findBestTSpinMove(e){var a;const n=e.length,r=((a=e[0])==null?void 0:a.length)||10;let s=-1/0,i=null;const o=Pa[0];for(let c=-1;c<=r;c++){if(this._collides(o,e,c,0,n,r)&&this._collides(o,e,c,-1,n,r)&&this._collides(o,e,c,-2,n,r))continue;const u=this._findLandingRow(o,e,c,n,r);if(u==null)continue;const h=Math.max(0,u-4);for(let d=u;d>=h;d--)if(!this._collides(o,e,c,d,n,r))for(let f=1;f<4;f++){const g=this._simulateTSpinAtHeight(e,c,d,f,n,r);if(!g)continue;const{finalCol:v,finalRow:w,isTSpin:b,sim:m,kickedRow:p}=g;if(!m)continue;const x=this._countCompleteLines(m);let S=this._evaluateForTSpin(m);b&&x>=3?S+=4e4:b&&x>=2?S+=3e4:b&&x>=1?S+=12e3:b&&(S+=500),S>s&&(s=S,i={startCol:c,targetRot:f,stopRow:d,finalCol:v,finalRow:w,isTSpin:b&&x>0,linesCleared:x})}}return i}_simulateTSpinAtHeight(e,n,r,s,i,o){let a=0,c=n,u=r;for(;a!==s;){const w=(a+1)%4,b=Pa[w],m=`${a}>${w}`,p=mb[m]||pb;let x=!1;if(!this._collides(b,e,c,u,i,o))a=w,x=!0;else for(const S of p){const j=c+S.x,k=u+S.y;if(!this._collides(b,e,j,k,i,o)){c=j,u=k,a=w,x=!0;break}}if(!x)return null}const h=Pa[a],d=this._findLandingRow(h,e,c,i,o);if(d==null)return null;const f=Math.max(u,d),g=this._checkTSpinCorners(c,u,e,i,o),v=this._placeOnBoard(h,e,c,f);return v?{finalCol:c,finalRow:f,isTSpin:g,sim:v,kickedRow:u}:null}_findBestMove(e,n){var a;let r=-1/0,s=null;const i=n.length,o=((a=n[0])==null?void 0:a.length)||10;for(let c=0;c<4;c++){const u=this._rotateShape(e.shape,c),h=u[0].length;for(let d=-1;d<=o-h+1;d++){const f=this._findLandingRow(u,n,d,i,o);if(f==null||f<0)continue;const g=this._placeOnBoard(u,n,d,f);if(!g)continue;const v=this._evaluate(g,n);v>r&&(r=v,s={rotations:c,targetX:d})}}return s}_evaluate(e,n){let r=0;const s=e.length,i=e[0].length,o=this._countCompleteLines(e);r+=o*15e3,o>=2&&(r+=5e3),o>=4&&(r+=25e3);const a=this._removeCompleteLines(e),c=this._getColumnHeights(a),u=Math.max(...c),h=c.reduce((k,C)=>k+C,0),d=h/i;let f=-1,g=1/0;for(let k=1;k<i-1;k++)c[k]<g&&(g=c[k],f=k);const v=f>0?c[f-1]:0,w=f<i-1?c[f+1]:0,b=Math.min(v,w)-g,m=b>=2&&f>=1&&f<=i-2,p=this._countHoles(a);r-=p*6e3;let x=0;for(let k=0;k<i;k++){let C=!1,T=0;for(let E=0;E<s;E++)a[E][k]!=null?(C=!0,T=0):C&&(T++,x+=T)}r-=x*400,r-=h*30,r-=u*150,u>10&&(r-=(u-10)*(u-10)*300),u>15&&(r-=6e4);let S=0;for(let k=0;k<i-1;k++){const C=Math.abs(c[k]-c[k+1]);m&&(k===f||k===f-1)?S+=C*.3:S+=C}r-=S*200;for(const k of[0,i-1])c[k]===0&&d>2?r-=4e3:c[k]<d-3&&d>3&&(r-=1500);for(let k=1;k<i-1;k++)m&&k===f||c[k]===0&&d>2&&(r-=2e3);if(u>14)return r+=o*2e4,r;const j=u<=10?1:Math.max(0,1-(u-10)*.2);if(j>0&&p<=1){m&&(b>=2&&b<=4?r+=1500*j:b>=5&&(r+=500*j));let k=0;for(let T=Math.max(0,s-8);T<s;T++){const E=this._rowFilled(a[T]);E===9?m&&a[T][f]==null?(k++,r+=1200*j):r+=300*j:E===8&&(r+=150*j)}if(k>=2&&(r+=3e3*j),m)for(let T=Math.max(1,s-6);T<s;T++){const E=f;E>0&&a[T][E-1]!=null&&a[T][E]==null&&T>0&&a[T-1][E]==null&&(r+=800*j),E<i-1&&a[T][E+1]!=null&&a[T][E]==null&&T>0&&a[T-1][E]==null&&(r+=800*j)}const C=this._countTSpinSlotsQuick(a);r+=C*500*j}for(let k=s-1;k>=0;k--){const C=this._rowFilled(a[k]);if(C===0)break;C>=1&&C<=5&&(r-=(10-C)*40)}return r}_evaluateForTSpin(e){const n=this._removeCompleteLines(e);let r=0;const s=this._countHoles(n);r-=s*5e3;const i=this._getColumnHeights(n),o=Math.max(...i),a=i.reduce((h,d)=>h+d,0);r-=o*200,r-=a*30,o>12&&(r-=(o-12)*(o-12)*500);let c=0;for(let h=0;h<i.length-1;h++)c+=Math.abs(i[h]-i[h+1]);r-=c*150;const u=a/i.length;return r+=Math.max(0,8-u)*200,r}_countTSpinSlotsQuick(e){var i;const n=e.length,r=((i=e[0])==null?void 0:i.length)||10;let s=0;for(let o=Math.max(0,n-8);o<n-1;o++){const a=this._rowFilled(e[o]),c=this._rowFilled(e[o+1]);if((a===7&&c===9||a===9&&c===7)&&(s+=2),(a===8&&c===9||a===9&&c===8)&&(s+=1),o+2<n){const u=this._rowFilled(e[o+2]);a===9&&c===8&&u===9&&(s+=3)}}for(let o=Math.max(2,n-6);o<n;o++)for(let a=0;a<r;a++){if(e[o][a]!=null)continue;let c=0;(a===0||e[o][a-1]!=null)&&c++,(a===r-1||e[o][a+1]!=null)&&c++,(o===n-1||e[o+1][a]!=null)&&c++,c>=2&&(o===0||e[o-1][a]==null)&&(s+=1)}return s}_countOverhangPatterns(e){var i;const n=e.length,r=((i=e[0])==null?void 0:i.length)||10;let s=0;for(let o=2;o<n-1;o++)for(let a=0;a<r;a++)e[o][a]!=null&&o+1<n&&e[o+1][a]==null&&(a>0&&e[o+1][a-1]==null||a<r-1&&e[o+1][a+1]==null)&&s++;return s}_checkTSpinCorners(e,n,r,s,i){let o=0;const a=(c,u)=>c<0||c>=i||u<0||u>=s?!0:r[u][c]!=null;return a(e,n)&&o++,a(e+2,n)&&o++,a(e,n+2)&&o++,a(e+2,n+2)&&o++,o>=3}_buildNormalActionSequence(e,n,r){var u;const s=[],i=n%4;for(let h=0;h<i;h++)s.push({action:"rotate"});const o=((u=e.position)==null?void 0:u.x)??3,a=r-o,c=a>0?"right":"left";for(let h=0;h<Math.abs(a);h++)s.push({action:c});return s.push({action:"drop"}),s}_rotateShape(e,n){let r=e;for(let s=0;s<n%4;s++)r=r[0].map((i,o)=>r.map(a=>a[o]).reverse());return r}_findLandingRow(e,n,r,s,i){const o=e.length;for(let a=-o;a<s;a++)if(this._collides(e,n,r,a+1,s,i))return a;return s-o}_collides(e,n,r,s,i,o){for(let a=0;a<e.length;a++)for(let c=0;c<e[0].length;c++){if(!e[a][c])continue;const u=r+c,h=s+a;if(u<0||u>=o||h>=i||h>=0&&n[h][u]!=null)return!0}return!1}_placeOnBoard(e,n,r,s){const i=n.length,o=n[0].length,a=n.map(c=>[...c]);for(let c=0;c<e.length;c++)for(let u=0;u<e[0].length;u++){if(!e[c][u])continue;const h=r+u,d=s+c;if(h<0||h>=o||d<0||d>=i||a[d][h]!=null)return null;a[d][h]=1}return a}_removeCompleteLines(e){const n=e[0].length,r=e.filter(s=>!s.every(i=>i!=null));for(;r.length<e.length;)r.unshift(new Array(n).fill(null));return r}_countCompleteLines(e){let n=0;for(const r of e)r.every(s=>s!=null)&&n++;return n}_countHoles(e){let n=0;const r=e[0].length;for(let s=0;s<r;s++){let i=!1;for(let o=0;o<e.length;o++)e[o][s]!=null?i=!0:i&&n++}return n}_getBumpiness(e){const n=this._getColumnHeights(e);let r=0;for(let s=0;s<n.length-1;s++)r+=Math.abs(n[s]-n[s+1]);return r}_getColumnHeights(e){const n=e[0].length,r=[];for(let s=0;s<n;s++){let i=0;for(let o=0;o<e.length;o++)if(e[o][s]!=null){i=e.length-o;break}r.push(i)}return r}_rowFilled(e){let n=0;for(let r=0;r<e.length;r++)e[r]!=null&&n++;return n}_countNearCompleteRows(e){let n=0;for(let r=0;r<e.length;r++)this._rowFilled(e[r])>=8&&n++;return n}_getMaxHeight(e){var s;const n=e.length,r=((s=e[0])==null?void 0:s.length)||10;for(let i=0;i<n;i++)for(let o=0;o<r;o++)if(e[i][o]!=null)return n-i;return 0}}const Lr=10,Rs=20,vh=["I","O","T","S","Z","J","L"],Rn={I:"#00f5ff",O:"#ffff00",T:"#a000f0",S:"#00f000",Z:"#f00000",J:"#0000f0",L:"#ff7f00",G:"#888888"},yh={hold:{icon:"",key:"C",label:"Hold"},rotate:{icon:"",key:"",label:"Girar"},left:{icon:"",key:"",label:"Esq"},right:{icon:"",key:"",label:"Dir"},down:{icon:"",key:"",label:"Baixo"},drop:{icon:"",key:"Espao",label:"Drop"}},xb=[{id:"tsd-right",name:"T-Spin Double",emoji:"",desc:"Gire o T e encaixe na cavidade",board:St(18,["GGG...GGGG","GGGG.GGGGG"]),queue:["T"],hint:"Gire o T 2x (fica de cabea pra baixo) e solte!",solution:["rotate","rotate","drop"]},{id:"tsd-left",name:"TSD Esquerda",emoji:"",desc:"T-Spin Double espelhado",board:St(18,["GGGG...GGG","GGGGG.GGGG"]),queue:["T"],hint:"Gire 2x e mova para a direita para encaixar!",solution:["rotate","rotate","right","right","drop"]},{id:"tst",name:"T-Spin Triple",emoji:"",desc:"Limpe 3 linhas com o T",board:St(17,["GGGG.GGGGG","GGGG..GGGG","GGGG.GGGGG"]),queue:["T"],hint:"Gire 1x (fica na vertical) e solte direto!",solution:["rotate","drop"]},{id:"ts-single",name:"T-Spin Single",emoji:"",desc:"O T-Spin mais simples  1 linha",board:St(19,["GG...GGGGG"]),queue:["T"],hint:"Mova 1x para esquerda e solte!",solution:["left","drop"]},{id:"tetris-right",name:"Tetris (4 linhas)",emoji:"",desc:"Poo na direita para pea I",board:St(16,["GGGGGGGGG.","GGGGGGGGG.","GGGGGGGGG.","GGGGGGGGG."]),queue:["I"],hint:"Gire a pea I e mova at o poo da direita!",solution:["rotate","right","right","right","right","drop"]},{id:"tetris-left",name:"Tetris Esquerda",emoji:"",desc:"Poo na esquerda para pea I",board:St(16,[".GGGGGGGGG",".GGGGGGGGG",".GGGGGGGGG",".GGGGGGGGG"]),queue:["I"],hint:"Gire e mova a pea I at o poo da esquerda!",solution:["rotate","left","left","left","left","left","drop"]},{id:"pc-simple",name:"Perfect Clear",emoji:"",desc:"Limpe 100% do tabuleiro",board:St(18,["GGGG..GGGG","GGGG..GGGG"]),queue:["O"],hint:"Mova o O para a direita e solte no buraco!",solution:["right","drop"]},{id:"tsd-chain",name:"TSD em Cadeia",emoji:"",desc:"Dois T-Spin Doubles seguidos",board:St(14,["GGG...GGGG","GGGG.GGGGG","..........","..........","GGGG...GGG","GGGGG.GGGG"]),queue:["T","T"],hint:"Primeiro T: gire 2x e solte. Segundo T: gire 2x, mova direita 2x e solte!",solution:["rotate","rotate","drop","_wait","rotate","rotate","right","right","drop"]},{id:"l-spin",name:"L-Spin",emoji:"",desc:"Encaixe o L no buraco",board:St(18,["GGGGGGG..G","GGGGGGG.GG"]),queue:["L"],hint:"Gire 2x e mova at o buraco!",solution:["rotate","rotate","right","right","right","drop"]},{id:"j-spin",name:"J-Spin",emoji:"",desc:"Encaixe o J no buraco",board:St(18,["G..GGGGGGG","GG.GGGGGGG"]),queue:["J"],hint:"Gire 2x e mova para a esquerda!",solution:["rotate","rotate","left","left","drop"]}];function St(t,e){const n=[];for(let r=0;r<Rs;r++)r>=t&&r<t+e.length?n.push(e[r-t]):n.push("..........");return n}function vb(t){return t.map(e=>Array.from(e).map(n=>n==="."||n===" "?null:{type:"G",color:Rn[n]||"#888",emoji:""}))}function d0(){return Array(Rs).fill(null).map(()=>Array(Lr).fill(null))}function h0(t){return t.map(e=>e.map(n=>n?{...n}:null))}function yb(t,e){const n=new $n(new Wn,new qn,null,new xn);n.initializeGame(),n.isPlaying=!0;for(let r=0;r<Rs;r++)for(let s=0;s<Lr;s++)t[r][s]&&n.board.setCell(s,r,t[r][s]);if(e.length>0){const r=s=>{const i=Rt[s],o=s==="I"?{x:3,y:-2}:{x:3,y:0};return new jt(s,i.shape,i.color,i.emoji,o,!1,0)};for(n.currentPiece=r(e[0]),n.nextPieces=e.slice(1).map(r);n.nextPieces.length<3;)n.nextPieces.push(n.pieceFactory.createRandomPiece())}return n._markDirty(),n}function wb({onExit:t}){const[e,n]=y.useState("menu"),[r,s]=y.useState(null),[i,o]=y.useState(!1),[a,c]=y.useState(d0),[u,h]=y.useState([]),[d,f]=y.useState("G"),g=y.useCallback((w,b)=>{s(w),o(b),n("play")},[]),v=y.useCallback(w=>{s({id:"custom",name:"Setup Personalizado",emoji:"",board:null,queue:[...u],hint:"",_rawBoard:h0(a)}),o(w),n("play")},[a,u]);return e==="play"&&r?l.jsx(kb,{template:r,aiDemo:i,onBack:()=>n(r.id==="custom"?"editor":"menu"),onExit:t}):e==="editor"?l.jsx(jb,{board:a,setBoard:c,queue:u,setQueue:h,selectedColor:d,setSelectedColor:f,onPlay:()=>v(!1),onAIDemo:()=>v(!0),onBack:()=>n("menu"),onExit:t}):l.jsxs("div",{className:"h-screen bg-gradient-to-b from-slate-900 via-indigo-950 to-slate-900 flex flex-col items-center p-4 overflow-auto",children:[l.jsxs("div",{className:"flex justify-between items-center w-full max-w-lg mb-4",children:[l.jsx("h1",{className:"text-2xl font-bold text-white",children:" Modo Criador"}),l.jsx("button",{onClick:t,className:"bg-red-600 hover:bg-red-700 text-white px-3 py-1.5 rounded-lg text-sm font-bold",children:" Voltar"})]}),l.jsx("p",{className:"text-white/50 text-sm mb-4 text-center max-w-md",children:"Pratique setups clssicos ou crie o seu!"}),l.jsxs(N.button,{whileHover:{scale:1.03},whileTap:{scale:.97},onClick:()=>n("editor"),className:"w-full max-w-lg mb-4 p-4 rounded-xl bg-gradient-to-r from-violet-600/30 to-fuchsia-600/30 hover:from-violet-600/40 hover:to-fuchsia-600/40 border border-violet-500/30 hover:border-violet-500/50 transition-all flex items-center gap-4",children:[l.jsx("span",{className:"text-4xl",children:""}),l.jsxs("div",{className:"text-left",children:[l.jsx("div",{className:"text-white font-bold text-base",children:"Criar Meu Setup"}),l.jsx("div",{className:"text-white/40 text-xs",children:"Monte o tabuleiro e a fila de peas do zero"})]})]}),l.jsx("div",{className:"text-white/40 text-xs font-semibold uppercase tracking-wide mb-3",children:"Templates Prontos"}),l.jsx("div",{className:"grid grid-cols-1 gap-2 w-full max-w-lg",children:xb.map(w=>l.jsx(Sb,{template:w,onPlay:()=>g(w,!1),onAI:()=>g(w,!0)},w.id))})]})}function Sb({template:t,onPlay:e,onAI:n}){return l.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl bg-white/[0.04] border border-white/[0.06] hover:bg-white/[0.07] transition-all",children:[l.jsx("div",{className:"flex flex-col items-center min-w-[44px]",children:l.jsx(bb,{boardRows:t.board})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-center gap-1.5",children:[l.jsx("span",{className:"text-lg",children:t.emoji}),l.jsx("span",{className:"text-white font-bold text-sm truncate",children:t.name})]}),l.jsx("p",{className:"text-white/40 text-[11px] mt-0.5 leading-tight",children:t.desc}),l.jsxs("div",{className:"flex items-center gap-1.5 mt-1.5",children:[l.jsx("span",{className:"text-white/30 text-[10px]",children:"Peas:"}),t.queue.map((r,s)=>l.jsx("span",{className:"inline-block w-4 h-4 rounded",style:{backgroundColor:Rn[r]},title:r},s))]})]}),l.jsxs("div",{className:"flex flex-col gap-1.5 shrink-0",children:[l.jsx("button",{onClick:e,className:"bg-emerald-600 hover:bg-emerald-500 text-white px-3 py-1.5 rounded-lg text-xs font-bold whitespace-nowrap transition-colors",children:" Jogar"}),l.jsx("button",{onClick:n,className:"bg-blue-600 hover:bg-blue-500 text-white px-3 py-1.5 rounded-lg text-xs font-bold whitespace-nowrap transition-colors",children:" IA Demo"})]})]})}function bb({boardRows:t}){const n=t.findIndex(s=>s!==".........."),r=t.slice(Math.max(n>=0?n:Rs-4,Rs-6));return l.jsx("div",{className:"bg-black/40 rounded border border-white/10 p-0.5",children:r.map((s,i)=>l.jsx("div",{className:"flex",children:Array.from(s).map((o,a)=>l.jsx("div",{style:{width:3,height:3,backgroundColor:o!=="."?"#888":"transparent"}},a))},i))})}function kb({template:t,aiDemo:e,onBack:n,onExit:r}){var x,S,j,k,C,T,E,A,z,Q;const[s,i]=y.useState(null),[o,a]=y.useState(0),[c,u]=y.useState([]),[h,d]=y.useState(null),f=y.useRef(null),g=y.useRef(null),v=y.useRef(0),w=y.useRef(null),b=y.useMemo(()=>t._rawBoard?h0(t._rawBoard):vb(t.board),[t]),m=y.useCallback(()=>{g.current&&cancelAnimationFrame(g.current),w.current&&clearTimeout(w.current);const F=yb(b,t.queue);f.current=F,i(F.getGameState()),u([]),d(null),v.current=0,a(H=>H+1)},[b,t.queue]);y.useEffect(()=>{m()},[m]),y.useEffect(()=>{const F=H=>{v.current||(v.current=H);const V=H-v.current;v.current=H;const L=f.current;L&&(!L.gameOver&&!L.isPaused&&L.updateGame(V),L.isDirty&&(i(L.getGameState()),L.clearDirty()),g.current=requestAnimationFrame(F))};return g.current=requestAnimationFrame(F),()=>{g.current&&cancelAnimationFrame(g.current)}},[o]),y.useEffect(()=>{if(!e)return;let F=!1;const H=400;if(t.solution){const V=[...t.solution];let L=0;const $=()=>{if(F||L>=V.length)return;const P=f.current;if(!P||P.gameOver)return;const M=V[L++];if(M==="_wait"){w.current=setTimeout($,800);return}d(M),u(O=>[...O,M].slice(-14)),wh(P,M),setTimeout(()=>{F||d(null)},250),w.current=setTimeout($,H)};w.current=setTimeout($,700)}else{const V=new gb,L=()=>{if(F)return;const $=f.current;if(!$||$.gameOver)return;const P=$.getGameState(),M=V.decideNextMove(P);M&&(d(M.action),u(O=>[...O,M.action].slice(-14)),wh($,M.action),setTimeout(()=>{F||d(null)},250)),w.current=setTimeout(L,H)};w.current=setTimeout(L,700)}return()=>{F=!0,w.current&&clearTimeout(w.current)}},[e,o,t.solution]),y.useEffect(()=>{if(e)return;const F=H=>{const V=f.current;if(!(!V||V.gameOver))switch(H.key){case"ArrowLeft":H.preventDefault(),V.movePiece("left");break;case"ArrowRight":H.preventDefault(),V.movePiece("right");break;case"ArrowDown":H.preventDefault(),V.movePiece("down");break;case"ArrowUp":H.preventDefault(),V.rotatePiece();break;case"z":case"Z":V.rotatePieceLeft();break;case"c":case"C":case"Shift":V.holdPiece();break;case" ":H.preventDefault(),V.hardDrop();break;case"r":case"R":m();break}};return window.addEventListener("keydown",F),()=>window.removeEventListener("keydown",F)},[e,m]);const p=y.useMemo(()=>{var F;if(!(s!=null&&s.currentPiece)||s!=null&&s.gameOver)return null;try{return(F=f.current)==null?void 0:F.getDropPreview()}catch{return null}},[(S=(x=s==null?void 0:s.currentPiece)==null?void 0:x.position)==null?void 0:S.x,(k=(j=s==null?void 0:s.currentPiece)==null?void 0:j.position)==null?void 0:k.y,(C=s==null?void 0:s.currentPiece)==null?void 0:C.type,(T=s==null?void 0:s.currentPiece)==null?void 0:T.rotationState]);return l.jsxs("div",{className:"h-screen bg-gradient-to-b from-slate-900 via-indigo-950 to-slate-900 flex flex-col items-center p-2 overflow-hidden",children:[l.jsxs("div",{className:"flex justify-between items-center w-full max-w-xl mb-2",children:[l.jsxs("h1",{className:"text-lg font-bold text-white truncate",children:[t.emoji," ",t.name," ",e&&l.jsx("span",{className:"text-blue-400 text-sm ml-1",children:" IA Demo"})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:m,className:"bg-yellow-600 hover:bg-yellow-700 text-white px-3 py-1 rounded-lg text-xs font-bold",children:" Replay"}),l.jsx("button",{onClick:n,className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded-lg text-xs font-bold",children:" Voltar"}),l.jsx("button",{onClick:r,className:"bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded-lg text-xs font-bold",children:"Sair"})]})]}),t.hint&&l.jsx("div",{className:"bg-yellow-500/15 border border-yellow-500/30 rounded-lg px-4 py-1.5 mb-2 max-w-xl",children:l.jsxs("p",{className:"text-yellow-200 text-xs text-center",children:[" ",t.hint]})}),s&&l.jsxs("div",{className:"flex gap-3 items-start justify-center",children:[l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx(Un,{heldPiece:s.heldPiece,canHold:s.canHold}),!e&&l.jsxs("div",{className:"text-white/50 text-[10px] leading-tight",children:[" mover",l.jsx("br",{})," girar",l.jsx("br",{}),"C hold",l.jsx("br",{}),"Espao drop",l.jsx("br",{}),"R replay"]})]}),l.jsx(gn,{board:s.board,currentPiece:s.currentPiece,dropPreview:p,gameOver:s.gameOver}),l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx(zn,{pieces:s.nextPieces||[]}),l.jsx(Hn,{score:((E=s.score)==null?void 0:E.points)||0,level:((A=s.score)==null?void 0:A.level)||1,lines:((z=s.score)==null?void 0:z.lines)||0,combo:((Q=s.score)==null?void 0:Q.combo)||0})]})]}),e&&l.jsxs("div",{className:"mt-3 w-full max-w-md",children:[l.jsx("div",{className:"text-white/40 text-[10px] font-semibold uppercase tracking-wide mb-1.5 text-center",children:"Botes da IA"}),l.jsx("div",{className:"flex justify-center gap-1.5 mb-2",children:["hold","left","right","rotate","drop"].map(F=>{const H=yh[F],V=h===F;return l.jsxs("div",{className:`flex flex-col items-center px-2.5 py-1.5 rounded-lg border transition-all duration-150 ${V?"bg-yellow-400/30 border-yellow-400/60 scale-110":"bg-white/[0.04] border-white/[0.08]"}`,children:[l.jsx("span",{className:`text-lg ${V?"text-yellow-300":"text-white/60"}`,children:H.icon}),l.jsx("span",{className:`text-[9px] font-bold ${V?"text-yellow-200":"text-white/30"}`,children:H.key})]},F)})}),l.jsx("div",{className:"flex flex-wrap justify-center gap-0.5",children:c.map((F,H)=>{const V=yh[F];return l.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded ${H===c.length-1?"bg-yellow-500/30 text-yellow-200 font-bold":"bg-white/[0.05] text-white/30"}`,children:(V==null?void 0:V.key)||F},H)})})]}),(s==null?void 0:s.gameOver)&&l.jsxs("div",{className:"mt-4 flex gap-3",children:[l.jsx("button",{onClick:m,className:"bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg font-bold text-lg",children:" Tentar Novamente"}),l.jsx("button",{onClick:n,className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-bold text-lg",children:" Voltar"})]})]})}function wh(t,e){switch(e){case"left":t.movePiece("left");break;case"right":t.movePiece("right");break;case"down":t.movePiece("down");break;case"rotate":t.rotatePiece();break;case"hold":t.holdPiece();break;case"drop":t.hardDrop();break}}function jb({board:t,setBoard:e,queue:n,setQueue:r,selectedColor:s,setSelectedColor:i,onPlay:o,onAIDemo:a,onBack:c,onExit:u}){const h=y.useCallback((g,v)=>{e(w=>{const b=w.map(m=>[...m]);return b[v][g]=b[v][g]?null:{type:s,color:Rn[s],emoji:""},b})},[s,e]),d=y.useCallback((g,v)=>{e(w=>{const b=w.map(m=>[...m]);for(let m=0;m<Lr;m++)b[g][m]=m===v?null:{type:"G",color:Rn.G,emoji:""};return b})},[e]),f=y.useCallback(g=>{e(v=>{const w=v.map(b=>[...b]);for(let b=0;b<Lr;b++)w[g][b]=null;return w})},[e]);return l.jsxs("div",{className:"h-screen bg-gradient-to-b from-slate-900 via-indigo-950 to-slate-900 flex flex-col items-center p-3 overflow-auto",children:[l.jsxs("div",{className:"flex justify-between items-center w-full max-w-2xl mb-3",children:[l.jsx("h1",{className:"text-xl font-bold text-white",children:" Criar Meu Setup"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:c,className:"bg-slate-600 hover:bg-slate-700 text-white px-3 py-1 rounded-lg text-sm font-bold",children:" Templates"}),l.jsx("button",{onClick:u,className:"bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded-lg text-sm font-bold",children:"Sair"})]})]}),l.jsxs("div",{className:"flex gap-4 items-start justify-center flex-wrap max-w-2xl",children:[l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx("div",{className:"text-white/60 text-xs font-semibold mb-1",children:"TABULEIRO (clique para editar)"}),l.jsx(Cb,{board:t,onToggle:h,onFillRow:d,onClearRow:f}),l.jsxs("div",{className:"flex gap-1 items-center mt-1",children:[l.jsx("span",{className:"text-white/50 text-xs mr-1",children:"Cor:"}),vh.map(g=>l.jsx("button",{onClick:()=>i(g),className:`w-6 h-6 rounded border-2 transition-all ${s===g?"border-white scale-110":"border-white/20"}`,style:{backgroundColor:Rn[g]},title:g},g)),l.jsx("button",{onClick:()=>i("G"),className:`w-6 h-6 rounded border-2 transition-all ${s==="G"?"border-white scale-110":"border-white/20"}`,style:{backgroundColor:Rn.G},title:"Cinza"})]}),l.jsx("button",{onClick:()=>e(d0()),className:"bg-red-700/60 hover:bg-red-700 text-white px-3 py-1 rounded text-xs font-semibold mt-1 w-fit",children:"Limpar Tudo"})]}),l.jsxs("div",{className:"flex flex-col gap-3 min-w-[160px]",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-white/60 text-xs font-semibold mb-2",children:"FILA DE PEAS"}),l.jsx("div",{className:"flex flex-wrap gap-1 mb-2",children:vh.map(g=>l.jsx("button",{onClick:()=>r(v=>[...v,g]),className:"flex items-center justify-center w-9 h-9 rounded-lg bg-white/10 hover:bg-white/20 border border-white/10 transition-all",title:`Adicionar ${g}`,children:l.jsx(Sh,{type:g})},g))}),l.jsxs("div",{className:"flex flex-col gap-1 min-h-[60px] bg-black/30 rounded-lg p-2",children:[n.length===0?l.jsxs("span",{className:"text-white/30 text-xs text-center py-2",children:["Clique nas peas acima",l.jsx("br",{}),"(vazio = fila aleatria)"]}):l.jsx("div",{className:"flex flex-wrap gap-1",children:n.map((g,v)=>l.jsxs("button",{onClick:()=>r(w=>w.filter((b,m)=>m!==v)),className:"flex items-center justify-center w-8 h-8 rounded bg-white/10 hover:bg-red-500/30 border border-white/10 transition-all group relative",title:"Remover",children:[l.jsx(Sh,{type:g,size:10}),l.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-[8px] rounded-full w-3 h-3 flex items-center justify-center opacity-0 group-hover:opacity-100",children:""})]},v))}),n.length>0&&l.jsx("button",{onClick:()=>r([]),className:"text-red-400 text-[10px] mt-1 hover:text-red-300",children:"Limpar fila"})]})]}),l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx("button",{onClick:o,className:"w-full py-3 rounded-xl bg-gradient-to-r from-emerald-500 to-green-500 hover:from-emerald-400 hover:to-green-400 text-white font-bold text-base shadow-lg shadow-emerald-500/25 transition-all active:scale-95",children:" Jogar"}),l.jsx("button",{onClick:a,className:"w-full py-2.5 rounded-xl bg-gradient-to-r from-blue-600 to-blue-500 hover:from-blue-500 hover:to-blue-400 text-white font-bold text-sm shadow-lg shadow-blue-500/25 transition-all active:scale-95",children:" IA Demo"})]})]})]})]})}function Cb({board:t,onToggle:e,onFillRow:n,onClearRow:r}){const[s,i]=y.useState(!1),[o,a]=y.useState(null),c=22,u=(f,g)=>{i(!0),a(t[g][f]?"erase":"place"),e(f,g)},h=(f,g)=>{s&&(o==="place"&&!t[g][f]&&e(f,g),o==="erase"&&t[g][f]&&e(f,g))},d=()=>{i(!1),a(null)};return y.useEffect(()=>(window.addEventListener("pointerup",d),()=>window.removeEventListener("pointerup",d)),[]),l.jsx("div",{className:"relative bg-black/50 rounded-lg border border-white/10 select-none",style:{width:c*Lr+2,padding:1},onContextMenu:f=>f.preventDefault(),children:t.map((f,g)=>l.jsxs("div",{className:"flex",style:{height:c},children:[f.map((v,w)=>l.jsx("div",{onPointerDown:()=>u(w,g),onPointerEnter:()=>h(w,g),className:"cursor-pointer border border-white/[0.04] hover:border-white/20 transition-colors",style:{width:c,height:c,backgroundColor:v?v.color:"transparent",opacity:v?.85:1}},w)),l.jsx("button",{onClick:()=>f.some(v=>v)?r(g):n(g,Math.floor(Math.random()*Lr)),className:"ml-0.5 text-white/20 hover:text-white/60 text-[9px] w-4 flex items-center justify-center",title:f.some(v=>v)?"Limpar linha":"Preencher linha",children:f.some(v=>v)?"":"+"})]},g))})}function Sh({type:t,size:e=12}){var a;const n=(a=Rt[t])==null?void 0:a.shape;if(!n)return null;const r=Rn[t],i=n.filter(c=>c.some(u=>u)).map(c=>{const u=c.indexOf(1),h=c.lastIndexOf(1);return c.slice(Math.max(0,u),h+1)}),o=Math.max(...i.map(c=>c.length));return l.jsx("div",{className:"flex flex-col items-center",children:i.map((c,u)=>l.jsx("div",{className:"flex",children:Array.from({length:o},(h,d)=>l.jsx("div",{style:{width:e,height:e,backgroundColor:c[d]?r:"transparent",borderRadius:1}},d))},u))})}function f0(){const[t,e]=y.useState([]),[n,r]=y.useState(null),[s,i]=y.useState(!0);y.useEffect(()=>{try{const u=B.resolve("shopService");e(u.getAllThemes()),r(u.getEquippedTheme()),i(!1);const h=f=>{r(f.detail.theme),e(u.getAllThemes())},d=()=>{e(u.getAllThemes())};return window.addEventListener("themeEquipped",h),window.addEventListener("currencyUpdated",d),()=>{window.removeEventListener("themeEquipped",h),window.removeEventListener("currencyUpdated",d)}}catch{i(!1)}},[]);const o=y.useCallback(u=>{try{const h=B.resolve("shopService"),d=h.purchaseTheme(u);return d.success&&(e(h.getAllThemes()),window.dispatchEvent(new Event("currencyUpdated"))),d}catch(h){return{success:!1,error:h.message}}},[]),a=y.useCallback(u=>{try{const h=B.resolve("shopService"),d=h.equipTheme(u);return d.success&&(r(d.theme),e(h.getAllThemes())),d}catch(h){return{success:!1,error:h.message}}},[]),c=y.useCallback(()=>{try{return B.resolve("shopService").getStats()}catch{return null}},[]);return{themes:t,equippedTheme:n,loading:s,purchaseTheme:o,equipTheme:a,getStats:c}}function Tb({onClose:t}){var g,v;const{themes:e,equippedTheme:n,loading:r,purchaseTheme:s,equipTheme:i,getStats:o}=f0(),{currency:a}=a0(),[c,u]=y.useState(null),h=o();if(r)return l.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",children:l.jsx("div",{className:"text-white text-lg",children:"Carregando loja..."})});if(!e||e.length===0)return l.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-red-900/90 text-white p-6 rounded-lg",children:[l.jsx("p",{className:"text-xl",children:" Erro ao carregar temas"}),l.jsx("button",{onClick:t,className:"mt-4 bg-white text-black px-4 py-2 rounded",children:"Fechar"})]})});const d=w=>{const b=s(w);b.success?mr(` ${b.theme.name} comprado com sucesso!`,"success"):mr(` ${b.error}`,"error")},f=w=>{const b=i(w);b.success?mr(` ${b.theme.name} equipado!`,"success"):mr(` ${b.error}`,"error")};return r?l.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",children:l.jsx("div",{className:"text-white text-xl",children:"Carregando loja..."})}):l.jsx(N.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:t,children:l.jsxs(N.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},className:"bg-gradient-to-br from-pink-900/95 to-purple-900/95 rounded-2xl p-6 max-w-6xl w-full max-h-[90vh] overflow-y-auto border-2 border-white/20 shadow-2xl",onClick:w=>w.stopPropagation(),children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-3xl font-bold text-white flex items-center gap-2",children:" Loja de Temas"}),l.jsx("p",{className:"text-white/60 text-sm mt-1",children:"Personalize suas peas de Tetris"})]}),l.jsx("button",{onClick:t,className:"text-white/60 hover:text-white text-2xl transition-colors",children:""})]}),l.jsx("div",{className:"bg-black/30 rounded-lg p-4 mb-6",children:l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-2xl font-bold text-yellow-400 flex items-center justify-center gap-1",children:[" ",((g=a==null?void 0:a.fish)==null?void 0:g.toLocaleString())||0]}),l.jsx("div",{className:"text-white/60 text-sm",children:"Seus Peixes"})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-2xl font-bold text-white",children:[h==null?void 0:h.ownedThemes,"/",h==null?void 0:h.totalThemes]}),l.jsx("div",{className:"text-white/60 text-sm",children:"Temas Desbloqueados"})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-2xl font-bold text-green-400",children:[Math.floor((h==null?void 0:h.ownedThemes)/(h==null?void 0:h.totalThemes)*100),"%"]}),l.jsx("div",{className:"text-white/60 text-sm",children:"Coleo"})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-2xl font-bold text-purple-400 flex items-center justify-center gap-1",children:[" ",((v=h==null?void 0:h.totalSpent)==null?void 0:v.toLocaleString())||0]}),l.jsx("div",{className:"text-white/60 text-sm",children:"Gasto Total"})]})]})}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map((w,b)=>{const m=!w.owned&&(a==null?void 0:a.fish)>=w.price;return l.jsxs(N.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:b*.05},className:`bg-black/40 rounded-lg p-4 border-2 relative ${w.equipped?"border-green-500 shadow-lg shadow-green-500/30":w.owned?"border-white/20":"border-white/10"}`,children:[w.equipped&&l.jsx("div",{className:"absolute top-2 right-2 bg-green-600 text-white text-xs px-2 py-1 rounded-full font-bold",children:" Equipado"}),w.premium&&l.jsx("div",{className:"absolute top-2 left-2 bg-gradient-to-r from-yellow-400 to-orange-500 text-white text-xs px-2 py-1 rounded-full font-bold",children:" Premium"}),l.jsxs("div",{className:"mb-4",children:[l.jsx("h3",{className:"text-white font-bold text-lg mb-1",children:w.name}),l.jsx("p",{className:"text-white/60 text-sm",children:w.description})]}),l.jsx("div",{className:"bg-black/30 rounded-lg p-3 mb-4",children:l.jsx("div",{className:"flex justify-center gap-2 flex-wrap",children:Object.entries(w.pieces).map(([p,x])=>l.jsx("div",{className:"w-12 h-12 rounded flex items-center justify-center text-2xl border border-white/10",style:{backgroundColor:x.color},children:x.emoji},p))})}),l.jsxs("div",{className:"flex gap-2",children:[w.owned?w.equipped?l.jsx("button",{disabled:!0,className:"flex-1 bg-green-600 text-white py-2 px-4 rounded-lg font-bold cursor-default",children:"Em Uso"}):l.jsx("button",{onClick:()=>f(w.id),className:"flex-1 bg-blue-600 hover:bg-blue-500 text-white py-2 px-4 rounded-lg font-bold transition-colors",children:"Equipar"}):l.jsx("button",{onClick:()=>d(w.id),disabled:!m,className:`flex-1 py-2 px-4 rounded-lg font-bold transition-colors ${m?"bg-yellow-600 hover:bg-yellow-500 text-white":"bg-gray-600 text-white/40 cursor-not-allowed"}`,children:w.default?"Gratuito":l.jsxs(l.Fragment,{children:[" ",w.price.toLocaleString()]})}),l.jsx("button",{onClick:()=>u(w),className:"bg-purple-600 hover:bg-purple-500 text-white py-2 px-4 rounded-lg font-bold transition-colors",children:""})]})]},w.id)})}),l.jsx(xe,{children:c&&l.jsx(N.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/90 flex items-center justify-center z-[60]",onClick:()=>u(null),children:l.jsxs(N.div,{initial:{scale:.8},animate:{scale:1},exit:{scale:.8},className:"bg-gray-900 rounded-xl p-6 max-w-md",onClick:w=>w.stopPropagation(),children:[l.jsx("h3",{className:"text-white font-bold text-2xl mb-4",children:c.name}),l.jsx("div",{className:"grid grid-cols-4 gap-3 mb-4",children:Object.entries(c.pieces).map(([w,b])=>l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"w-16 h-16 rounded-lg flex items-center justify-center text-3xl mb-2 border-2 border-white/20",style:{backgroundColor:b.color},children:b.emoji}),l.jsx("div",{className:"text-white/60 text-xs",children:w})]},w))}),l.jsx("button",{onClick:()=>u(null),className:"w-full bg-purple-600 hover:bg-purple-500 text-white py-2 rounded-lg font-bold",children:"Fechar"})]})})})]})})}function p0(){const[t,e]=y.useState([]),[n,r]=y.useState(null),[s,i]=y.useState(null),[o,a]=y.useState(!0);y.useEffect(()=>{try{const d=B.resolve("gameModesService");e(d.getAllModes()),r(d.getCurrentMode()),i(d.getAllStats()),a(!1)}catch{a(!1)}},[]);const c=y.useCallback(d=>{try{const f=B.resolve("gameModesService"),g=f.setMode(d);return g&&(r(f.getCurrentMode()),window.dispatchEvent(new CustomEvent("gameModeChanged",{detail:{mode:f.getCurrentMode()}}))),g}catch{return!1}},[]),u=y.useCallback(d=>{try{return B.resolve("gameModesService").getModeStats(d)}catch{return null}},[]),h=y.useCallback((d,f)=>{try{const g=B.resolve("gameModesService");g.updateStats(d,f),i(g.getAllStats())}catch{}},[]);return{modes:t,currentMode:n,modeStats:s,loading:o,selectMode:c,getModeStats:u,updateStats:h}}function Pb({onClose:t,onStartGame:e}){const{modes:n,currentMode:r,modeStats:s,loading:i,selectMode:o}=p0(),a=u=>{o(u),setTimeout(()=>{e(),t()},300)},c=u=>{const h=Math.floor(u/60),d=u%60;return`${h}:${d.toString().padStart(2,"0")}`};return i?l.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",children:l.jsx("div",{className:"text-white text-xl",children:"Carregando modos..."})}):!n||n.length===0?l.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-red-900/90 text-white p-6 rounded-lg",children:[l.jsx("p",{className:"text-xl",children:" Erro ao carregar modos"}),l.jsx("button",{onClick:t,className:"mt-4 bg-white text-black px-4 py-2 rounded",children:"Fechar"})]})}):l.jsx(N.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:t,children:l.jsxs(N.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},className:"bg-gradient-to-br from-blue-900/95 to-indigo-900/95 rounded-2xl p-6 max-w-4xl w-full max-h-[90vh] overflow-y-auto border-2 border-white/20 shadow-2xl",onClick:u=>u.stopPropagation(),children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-3xl font-bold text-white flex items-center gap-2",children:" Modos de Jogo"}),l.jsx("p",{className:"text-white/60 text-sm mt-1",children:"Escolha seu desafio"})]}),l.jsx("button",{onClick:t,className:"text-white/60 hover:text-white text-2xl transition-colors",children:""})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:n.map((u,h)=>{const d=s[u.id],f=(r==null?void 0:r.id)===u.id;return l.jsxs(N.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:h*.1},className:`bg-black/40 rounded-lg p-5 border-2 cursor-pointer transition-all hover:scale-105 ${f?"border-green-500 shadow-lg shadow-green-500/30":"border-white/10 hover:border-white/30"}`,onClick:()=>a(u.id),children:[f&&l.jsx("div",{className:"absolute top-3 right-3 bg-green-600 text-white text-xs px-2 py-1 rounded-full font-bold",children:" Selecionado"}),l.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[l.jsx("div",{className:"text-5xl",children:u.icon}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"text-white font-bold text-xl",children:u.name}),l.jsx("p",{className:"text-white/60 text-sm",children:u.description})]})]}),l.jsx("div",{className:"bg-black/30 rounded-lg p-3 mb-3",children:l.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[u.rules.lineGoal&&l.jsxs("div",{className:"text-white/80",children:[" Meta: ",u.rules.lineGoal," linhas"]}),u.rules.timeLimit&&l.jsxs("div",{className:"text-white/80",children:[" Tempo: ",c(u.rules.timeLimit)]}),u.rules.gameOver!==void 0&&l.jsx("div",{className:"text-white/80",children:u.rules.gameOver?" Game Over":" Sem Game Over"}),u.rules.speedIncrease!==void 0&&l.jsx("div",{className:"text-white/80",children:u.rules.speedIncrease?" Velocidade aumenta":" Velocidade fixa"}),u.rules.startLevel&&l.jsxs("div",{className:"text-white/80",children:[" Incio: Nvel ",u.rules.startLevel]}),u.rules.relaxed&&l.jsx("div",{className:"text-white/80",children:" Modo relaxado"})]})}),d&&d.gamesPlayed>0&&l.jsxs("div",{className:"bg-black/30 rounded-lg p-3",children:[l.jsx("div",{className:"text-white/60 text-xs mb-2",children:"Seus recordes:"}),l.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-yellow-400 font-bold",children:d.bestScore.toLocaleString()}),l.jsx("div",{className:"text-white/40 text-xs",children:"Melhor Pontuao"})]}),u.rules.lineGoal&&d.bestTime>0&&l.jsxs("div",{children:[l.jsx("div",{className:"text-green-400 font-bold",children:c(d.bestTime)}),l.jsx("div",{className:"text-white/40 text-xs",children:"Melhor Tempo"})]}),!u.rules.lineGoal&&l.jsxs("div",{children:[l.jsx("div",{className:"text-blue-400 font-bold",children:d.bestLines}),l.jsx("div",{className:"text-white/40 text-xs",children:"Mais Linhas"})]})]}),l.jsxs("div",{className:"text-white/40 text-xs mt-2",children:[d.gamesPlayed," partidas jogadas"]})]}),(!d||d.gamesPlayed===0)&&l.jsx("div",{className:"bg-black/30 rounded-lg p-3 text-center",children:l.jsx("div",{className:"text-white/40 text-sm",children:" Nenhum recorde ainda"})}),l.jsx(N.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"w-full mt-3 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-500 hover:to-emerald-500 text-white font-bold py-3 rounded-lg transition-colors",children:" Jogar"})]},u.id)})})]})})}function Eb(){const[t,e]=y.useState(null),[n,r]=y.useState([]),[s,i]=y.useState(null),[o,a]=y.useState(null);y.useEffect(()=>{try{const w=B.resolve("multiplayerService");a(w.getStats())}catch{}},[]);const c=y.useCallback((w,b)=>{try{const m=B.resolve("multiplayerService"),p=m.startLocalMatch(w,b);return e(p.mode),r(p.players),i(m.getMatchState()),p}catch{return null}},[]),u=y.useCallback((w,b)=>{try{const m=B.resolve("multiplayerService"),p=m.startAIMatch(w,b);return e(p.mode),r(p.players),i(m.getMatchState()),p}catch{return null}},[]),h=y.useCallback((w,b)=>{try{const m=B.resolve("multiplayerService"),p=m.startAIvsAIMatch(w,b);return e(p.mode),r(p.players),i(m.getMatchState()),p}catch{return null}},[]),d=y.useCallback((w,b)=>{try{const m=B.resolve("multiplayerService");m.updatePlayerState(w,b);const p=m.getMatchState();return i(p),r(p.players),p}catch{return null}},[]),f=y.useCallback(()=>{try{const w=B.resolve("multiplayerService"),b=w.endMatch();return e(null),r([]),i(null),a(w.getStats()),b}catch{return null}},[]),g=y.useCallback(()=>{try{return B.resolve("multiplayerService").getAvailableModes()}catch{return[]}},[]),v=y.useCallback(()=>{try{const w=B.resolve("multiplayerService");a(w.getStats())}catch{}},[]);return{currentMode:t,players:n,matchState:s,stats:o,startLocalMatch:c,startAIMatch:u,startAIvsAIMatch:h,updatePlayerState:d,endMatch:f,getAvailableModes:g,refreshStats:v}}function Nb(){const[t,e]=y.useState("medium"),[n,r]=y.useState(null);y.useEffect(()=>{try{const a=B.resolve("aiOpponentService");a.setDifficulty(t),r(a)}catch{}},[t]);const s=y.useCallback(a=>{if(!n)return null;try{return n.decideNextMove(a)}catch{return null}},[n]),i=y.useCallback(a=>{e(a),n&&n.setDifficulty(a)},[n]),o=y.useCallback(()=>n?n.getDifficulties():[],[n]);return{difficulty:t,changeDifficulty:i,getNextMove:s,getDifficulties:o}}function _b({onClose:t,onStartMatch:e}){const{getAvailableModes:n,stats:r,startLocalMatch:s,startAIMatch:i,startAIvsAIMatch:o}=Eb(),{getDifficulties:a}=Nb(),[c,u]=y.useState(null),[h,d]=y.useState("Jogador 1");y.useState("Jogador 2");const[f,g]=y.useState("medium"),[v,w]=y.useState("expert"),[b,m]=y.useState("expert"),p=n(),x=a();if(!p||p.length===0)return l.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-red-900/90 text-white p-6 rounded-lg",children:[l.jsx("p",{className:"text-xl",children:" Erro ao carregar multiplayer"}),l.jsx("button",{onClick:t,className:"mt-4 bg-white text-black px-4 py-2 rounded",children:"Fechar"})]})});const S=k=>{k.disabled||u(k)},j=()=>{let k=null;c.id==="vs-ai"?k=i(h,f):c.id==="ai-vs-ai"&&(k=o(v,b)),k&&e&&e(k)};return l.jsx(N.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:t,children:l.jsxs(N.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},className:"bg-gradient-to-br from-purple-900/95 to-indigo-900/95 rounded-2xl p-6 max-w-4xl w-full max-h-[90vh] overflow-y-auto border-2 border-white/20 shadow-2xl",onClick:k=>k.stopPropagation(),children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-3xl font-bold text-white flex items-center gap-2",children:" Multiplayer"}),l.jsx("p",{className:"text-white/60 text-sm mt-1",children:"Desafie amigos ou enfrente a IA"})]}),l.jsx("button",{onClick:t,className:"text-white/60 hover:text-white text-2xl transition-colors",children:""})]}),r&&l.jsxs("div",{className:"bg-black/30 rounded-lg p-4 mb-6 grid grid-cols-3 gap-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-white",children:r.aiMatches}),l.jsx("div",{className:"text-white/60 text-sm",children:"Partidas vs IA"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-green-400",children:r.wins}),l.jsx("div",{className:"text-white/60 text-sm",children:"Vitrias"})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-2xl font-bold text-yellow-400",children:[r.winRate,"%"]}),l.jsx("div",{className:"text-white/60 text-sm",children:"Taxa de Vitria"})]})]}),c?l.jsxs("div",{children:[l.jsx("button",{onClick:()=>u(null),className:"text-white/60 hover:text-white mb-4 flex items-center gap-2",children:" Voltar"}),l.jsxs("div",{className:"bg-black/30 rounded-lg p-6",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[l.jsx("span",{className:"text-5xl",children:c.emoji}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-2xl font-bold text-white",children:c.name}),l.jsx("p",{className:"text-white/60",children:c.description})]})]}),c.id==="vs-ai"&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-white/80 mb-2",children:"Seu Nome:"}),l.jsx("input",{type:"text",value:h,onChange:k=>d(k.target.value),className:"w-full bg-black/30 text-white px-4 py-2 rounded-lg border border-white/20 focus:border-blue-500 focus:outline-none",maxLength:20})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-white/80 mb-2",children:"Dificuldade da IA:"}),l.jsx("div",{className:"grid grid-cols-2 gap-3",children:x.map(k=>l.jsxs("button",{onClick:()=>g(k.id),className:`p-3 rounded-lg border-2 transition-all ${f===k.id?"bg-blue-600 border-blue-400":"bg-black/30 border-white/20 hover:border-white/40"}`,children:[l.jsx("div",{className:"text-2xl mb-1",children:k.emoji}),l.jsx("div",{className:"text-white font-bold",children:k.name}),l.jsx("div",{className:"text-white/60 text-xs",children:k.description})]},k.id))})]})]}),c.id==="ai-vs-ai"&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-white/80 mb-2",children:" IA 1 (Esquerda):"}),l.jsx("div",{className:"grid grid-cols-2 gap-3",children:x.map(k=>l.jsxs("button",{onClick:()=>w(k.id),className:`p-3 rounded-lg border-2 transition-all ${v===k.id?"bg-blue-600 border-blue-400":"bg-black/30 border-white/20 hover:border-white/40"}`,children:[l.jsx("div",{className:"text-2xl mb-1",children:k.emoji}),l.jsx("div",{className:"text-white font-bold",children:k.name}),l.jsx("div",{className:"text-white/60 text-xs",children:k.description})]},k.id))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-white/80 mb-2",children:" IA 2 (Direita):"}),l.jsx("div",{className:"grid grid-cols-2 gap-3",children:x.map(k=>l.jsxs("button",{onClick:()=>m(k.id),className:`p-3 rounded-lg border-2 transition-all ${b===k.id?"bg-red-600 border-red-400":"bg-black/30 border-white/20 hover:border-white/40"}`,children:[l.jsx("div",{className:"text-2xl mb-1",children:k.emoji}),l.jsx("div",{className:"text-white font-bold",children:k.name}),l.jsx("div",{className:"text-white/60 text-xs",children:k.description})]},k.id))})]})]}),l.jsx(N.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:j,className:"w-full mt-6 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-400 hover:to-emerald-500 text-white font-bold py-4 px-6 rounded-lg shadow-lg transition-all",children:" Iniciar Partida"})]})]}):l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:p.map(k=>l.jsxs(N.button,{whileHover:k.disabled?{}:{scale:1.02},whileTap:k.disabled?{}:{scale:.98},onClick:()=>S(k),disabled:k.disabled,className:`p-6 rounded-xl border-2 text-left transition-all ${k.disabled?"bg-gray-800/50 border-gray-700 opacity-50 cursor-not-allowed":"bg-gradient-to-br from-blue-600/30 to-purple-600/30 border-blue-500/50 hover:border-blue-400 cursor-pointer"}`,children:[l.jsx("div",{className:"text-4xl mb-3",children:k.emoji}),l.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:k.name}),l.jsx("p",{className:"text-white/70 text-sm mb-3",children:k.description}),l.jsx("div",{className:"flex items-center gap-2 text-white/50 text-sm",children:l.jsxs("span",{children:[" ",k.players," jogador",k.players>1?"es":""]})}),k.disabled&&l.jsx("div",{className:"mt-3 text-yellow-400 text-xs font-bold",children:" EM BREVE"})]},k.id))})]})})}function Ab({onComplete:t}){const[e,n]=y.useState(0),[r,s]=y.useState(!1);y.useEffect(()=>{localStorage.getItem("catTetris_tutorialCompleted")||s(!0)},[]);const i=[{title:" Bem-vindo ao Cat Tetris!",description:"Um Tetris com gatinhos e sistema de progresso viciante!",tips:[" Use as setas para mover as peas"," Seta para cima para rotacionar"," Seta para baixo para drop rpido","C para segurar pea (Hold)"]},{title:" Sistema de Moedas",description:"Ganhe Peixes () completando misses e conquistas!",tips:[" 3 misses dirias (resetam  meia-noite)"," 22 conquistas desbloqueveis"," Use  para comprar temas na loja"," Quanto mais voc joga, mais voc ganha!"]},{title:" Misses Dirias",description:"Complete desafios dirios para ganhar recompensas!",tips:[" Misso Fcil: 100"," Misso Mdia: 200"," Misso Difcil: 400"," Complete todas para celebrao especial!"]},{title:" Loja e Personalizao",description:"Customize suas peas com temas exclusivos!",tips:[" 10 temas diferentes disponveis"," Cristais e Espao so os mais caros"," Cada tema muda os emojis das peas"," Desbloqueie todos com suas moedas!"]},{title:" Ranking Global",description:"Compete com jogadores do mundo todo!",tips:[" Veja sua posio no ranking global"," 4 tipos de ranking: Global, Semanal, Pas, Ao Redor"," Compartilhe seus recordes"," Chegue ao Top 3 para medalha!"]},{title:" Pronto para Jogar!",description:"Agora voc sabe tudo. Divirta-se!",tips:[" Dica: Use a sombra da pea para planejar"," Faa combos para mais pontos"," T-Spins valem MUITO mais"," Modo Zen  perfeito para relaxar"]}],o=()=>{e<i.length-1?n(e+1):c()},a=()=>{c()},c=()=>{localStorage.setItem("catTetris_tutorialCompleted","true"),s(!1),t&&t()};if(!r)return null;const u=i[e],h=e===i.length-1;return l.jsx(N.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/90 backdrop-blur-sm flex items-center justify-center z-[100] p-4",children:l.jsxs(N.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-gradient-to-br from-purple-900/95 to-indigo-900/95 rounded-2xl p-8 max-w-lg w-full border-2 border-white/20 shadow-2xl max-h-[90vh] overflow-y-auto",children:[l.jsx("div",{className:"flex gap-2 mb-6",children:i.map((d,f)=>l.jsx("div",{className:`h-2 flex-1 rounded-full transition-colors ${f<=e?"bg-green-500":"bg-white/20"}`},f))}),l.jsx(N.h2,{initial:{y:-20},animate:{y:0},className:"text-3xl font-bold text-white mb-3",children:u.title}),l.jsx(N.p,{initial:{y:-10},animate:{y:0},className:"text-white/80 text-lg mb-6",children:u.description}),l.jsx(N.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},className:"bg-black/30 rounded-lg p-4 mb-6 space-y-2",children:u.tips.map((d,f)=>l.jsxs(N.div,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.3+f*.1},className:"text-white/90 flex items-start gap-2",children:[l.jsx("span",{className:"text-green-400 mt-0.5",children:""}),l.jsx("span",{children:d})]},f))}),l.jsxs("div",{className:"flex gap-3",children:[!h&&l.jsx("button",{onClick:a,className:"flex-1 bg-white/10 hover:bg-white/20 text-white font-bold py-3 px-6 rounded-lg transition-colors",children:"Pular Tutorial"}),l.jsx("button",{onClick:o,className:"flex-1 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-400 hover:to-emerald-500 text-white font-bold py-3 px-6 rounded-lg transition-all shadow-lg",children:h?" Comear a Jogar!":"Prximo "})]}),l.jsxs("div",{className:"text-center mt-4 text-white/40 text-sm",children:["Passo ",e+1," de ",i.length]})]},e)})}function Mb(t){const[e,n]=y.useState(null),[r,s]=y.useState(!1),i=y.useRef(null),o=y.useRef(0);y.useEffect(()=>{if(!t){n(null),s(!1),i.current=null,o.current=0;return}const d=new $n(new Wn,new qn,null,new xn);return d.initializeGame(),d.isPlaying=!0,o.current=0,i.current=d,n(d.getGameState()),s(!0),()=>{i.current=null,s(!1)}},[t]);const a=y.useRef(0),c=y.useRef(null);y.useEffect(()=>{if(!i.current||!r)return;a.current=0;const d=f=>{var w;a.current||(a.current=f);const g=f-a.current;a.current=f;const v=i.current;if(v){v.isPlaying&&!v.isPaused&&!v.gameOver&&v.updateGame(g);const b=v.getGameState(),m=((w=b.score)==null?void 0:w.combo)||0;m>o.current&&(o.current=m),n(b)}c.current=requestAnimationFrame(d)};return c.current=requestAnimationFrame(d),()=>{c.current&&cancelAnimationFrame(c.current)}},[r]);const u={movePiece:y.useCallback(d=>{var f;(f=i.current)==null||f.movePiece(d)},[]),rotatePiece:y.useCallback(()=>{var d;(d=i.current)==null||d.rotatePiece()},[]),rotatePieceLeft:y.useCallback(()=>{var d,f;(f=(d=i.current)==null?void 0:d.rotatePieceLeft)==null||f.call(d)},[]),hardDrop:y.useCallback(()=>{var d;(d=i.current)==null||d.hardDrop()},[]),holdPiece:y.useCallback(()=>{var d;(d=i.current)==null||d.holdPiece()},[]),pause:y.useCallback(()=>{var d;(d=i.current)==null||d.pause()},[]),resume:y.useCallback(()=>{var d;(d=i.current)==null||d.resume()},[]),restart:y.useCallback(()=>{i.current&&(i.current.restart(),o.current=0)},[]),getDropPreview:y.useCallback(()=>{var d;try{return((d=i.current)==null?void 0:d.getDropPreview())||null}catch{return null}},[])},h=y.useCallback(()=>{var d,f,g,v,w;return e?{score:((d=e.score)==null?void 0:d.points)||0,level:((f=e.score)==null?void 0:f.level)||1,linesCleared:((g=e.score)==null?void 0:g.lines)||0,currentPiece:e.currentPiece,hasCurrentPiece:!!e.currentPiece,heldPiece:e.heldPiece,hasUsedHold:!!e.heldPiece,currentCombo:((v=e.score)==null?void 0:v.combo)||0,maxCombo:o.current,backToBackActive:e.backToBack||!1,board:e.board,gameOver:e.gameOver,isPlaying:e.isPlaying,isPaused:e.isPaused,tSpins:((w=e.score)==null?void 0:w.tSpins)||0}:null},[e]);return{gameState:e,actions:u,isInitialized:r,getValidationState:h}}const bh={1:{difficulty:"easy",forceHold:!1,comboBoost:!1,label:"Movendo peas..."},2:{difficulty:"easy",forceHold:!0,comboBoost:!1,label:"Usando Hold (C)..."},3:{difficulty:"medium",forceHold:!1,comboBoost:!1,label:"Planejando jogadas..."},4:{difficulty:"medium",forceHold:!1,comboBoost:!0,label:"Buscando combos..."},5:{difficulty:"hard",forceHold:!1,comboBoost:!1,label:"Montando Tetris..."},6:{difficulty:"expert",forceHold:!0,comboBoost:!1,label:"Tentando T-Spins..."},7:{difficulty:"expert",forceHold:!0,comboBoost:!1,label:"Buscando Back-to-Back..."},8:{difficulty:"hard",forceHold:!0,comboBoost:!1,label:"Jogando no mximo..."}};function Lb(t,e){const[n,r]=y.useState(null),[s,i]=y.useState(!1),[o,a]=y.useState(!1),[c,u]=y.useState(""),h=y.useRef(null),d=y.useRef(null),f=y.useRef(0),g=y.useRef(null),v=y.useRef(0),w=y.useRef(0),b=y.useRef(0),m=y.useRef(null),p=250,x=25;y.useEffect(()=>{if(!t){r(null),i(!1),a(!1),u(""),h.current=null,d.current=null,w.current=0,b.current=0,g.current&&cancelAnimationFrame(g.current);return}const j=bh[e]||bh[1];m.current=j,u(j.label);const k=new $n(new Wn,new qn,null,new xn);k.initializeGame(),k.isPlaying=!0;const C=new fs;if(C.setDifficulty(j.difficulty),C.thinkingTime=0,j.comboBoost){const T=C._evaluateBoard.bind(C);C._evaluateBoard=(E,A)=>{let z=T(E,A);for(let Q=0;Q<E.length;Q++){const F=E[Q].filter(H=>H!=null).length;F>=8&&(z+=200),F>=9&&(z+=500)}return z}}return h.current=k,d.current=C,w.current=0,b.current=0,v.current=0,f.current=0,r(k.getGameState()),i(!0),a(!1),()=>{g.current&&cancelAnimationFrame(g.current),h.current=null,d.current=null}},[t,e]),y.useEffect(()=>{if(!h.current||!s||!t)return;f.current=0,v.current=0;let j=null;const k=C=>{var Q;f.current||(f.current=C);const T=C-f.current;f.current=C;const E=h.current,A=d.current,z=m.current;if(E&&A&&!E.gameOver){E.isPlaying&&!E.isPaused&&E.updateGame(T);const F=E.getGameState(),H=(Q=F.currentPiece)==null?void 0:Q.type;if(j&&H!==j&&(w.current++,b.current++,w.current>=x)){a(!0),r(F);return}if(j=H,v.current+=T,v.current>=p){if(v.current=0,z!=null&&z.forceHold&&b.current>=3&&F.currentPiece&&F.canHold!==!1){E.holdPiece(),b.current=0,r(E.getGameState()),g.current=requestAnimationFrame(k);return}const V=A.decideNextMove(F);if(V)switch(V.action){case"left":E.movePiece("left");break;case"right":E.movePiece("right");break;case"rotate":E.rotatePiece();break;case"down":E.movePiece("down");break;case"drop":E.hardDrop();break;case"hold":E.holdPiece();break}}r(F)}else if(E!=null&&E.gameOver){a(!0),r(E.getGameState());return}g.current=requestAnimationFrame(k)};return g.current=requestAnimationFrame(k),()=>{g.current&&cancelAnimationFrame(g.current)}},[s,t]);const S=y.useCallback(()=>{var j;try{return((j=h.current)==null?void 0:j.getDropPreview())||null}catch{return null}},[]);return{gameState:n,isInitialized:s,demoComplete:o,statusLabel:c,getDropPreview:S}}function m0(t,e,n=!0){const r=y.useRef(e);r.current=e;const s=y.useRef(t);s.current=t,y.useEffect(()=>{if(!(!t||!n))try{const d=B.resolve("keyboardInputService"),f=()=>{var j;return!((j=r.current)!=null&&j.gameOver)},g=()=>{f()&&s.current.movePiece("left")},v=()=>{f()&&s.current.movePiece("right")},w=()=>{f()&&s.current.movePiece("down")},b=()=>{f()&&s.current.rotatePiece()},m=()=>{var j,k;f()&&((k=(j=s.current).rotatePieceLeft)==null||k.call(j))},p=()=>{f()&&s.current.hardDrop()},x=()=>{f()&&s.current.holdPiece()},S=()=>{var j,k;(j=r.current)!=null&&j.gameOver||((k=r.current)!=null&&k.isPaused?s.current.resume():s.current.pause())};return d.registerHandler("moveLeft",g),d.registerHandler("moveRight",v),d.registerHandler("moveDown",w),d.registerHandler("rotate",b),d.registerHandler("rotateLeft",m),d.registerHandler("hardDrop",p),d.registerHandler("hold",x),d.registerHandler("pause",S),d.startListening(),()=>{d.unregisterHandler("moveLeft",g),d.unregisterHandler("moveRight",v),d.unregisterHandler("moveDown",w),d.unregisterHandler("rotate",b),d.unregisterHandler("rotateLeft",m),d.unregisterHandler("hardDrop",p),d.unregisterHandler("hold",x),d.unregisterHandler("pause",S),d.stopListening()}}catch{return()=>{}}},[n]);const i=y.useCallback((d,f)=>{try{B.resolve("keyboardInputService").setKeyMapping(d,f)}catch{}},[]),o=y.useCallback(()=>{try{return B.resolve("keyboardInputService").getKeyMappings()}catch{return{}}},[]),a=y.useCallback(d=>{try{B.resolve("keyboardInputService").setDAS(d)}catch{}},[]),c=y.useCallback(d=>{try{B.resolve("keyboardInputService").setARR(d)}catch{}},[]),u=y.useCallback(()=>{try{return B.resolve("keyboardInputService").getDAS()}catch{return 133}},[]),h=y.useCallback(()=>{try{return B.resolve("keyboardInputService").getARR()}catch{return 10}},[]);return{customizeKeyMapping:i,getKeyMappings:o,setDAS:a,setARR:c,getDAS:u,getARR:h}}function Rb({show:t,onComplete:e}){const[n,r]=y.useState([]);return y.useEffect(()=>{if(!t)return;const s=Array.from({length:50},(o,a)=>({id:a,x:Math.random()*window.innerWidth,y:-20,rotation:Math.random()*360,color:["#FF6B6B","#4ECDC4","#45B7D1","#FFA07A","#98D8C8","#F7DC6F","#BB8FCE","#85C1E2"][Math.floor(Math.random()*8)],size:Math.random()*10+5,delay:Math.random()*.5,duration:Math.random()*2+2,xOffset:(Math.random()-.5)*300}));r(s);const i=setTimeout(()=>{r([]),e&&e()},4e3);return()=>clearTimeout(i)},[t,e]),!t||n.length===0?null:l.jsx("div",{className:"fixed inset-0 pointer-events-none z-50 overflow-hidden",children:n.map(s=>l.jsx(N.div,{initial:{x:s.x,y:s.y,rotate:0,opacity:1},animate:{x:s.x+s.xOffset,y:window.innerHeight+100,rotate:s.rotation+720,opacity:0},transition:{duration:s.duration,delay:s.delay,ease:"easeIn"},style:{position:"absolute",width:s.size,height:s.size,backgroundColor:s.color,borderRadius:"50%"}},s.id))})}function Db({lesson:t,onStartDemo:e,onStartPractice:n}){return l.jsxs(N.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"max-w-lg mx-auto",children:[l.jsxs("div",{className:"bg-white/[0.06] border border-white/[0.08] rounded-xl p-6 mb-5 text-center",children:[l.jsx("div",{className:"text-4xl mb-3",children:""}),l.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:"Objetivo"}),l.jsx("p",{className:"text-white/70 text-base leading-relaxed",children:t.practice.objective})]}),t.intro&&t.intro.length>0&&l.jsxs("div",{className:"bg-white/[0.04] border border-white/[0.06] rounded-xl p-5 mb-5",children:[l.jsx("h4",{className:"text-sm font-semibold text-white/50 uppercase tracking-wide mb-3",children:"Como funciona"}),l.jsx("div",{className:"space-y-2.5",children:t.intro.map((r,s)=>l.jsxs(N.p,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:s*.08},className:"text-white/70 text-sm leading-relaxed flex items-start gap-2",children:[l.jsxs("span",{className:"text-white/25 font-mono text-xs mt-0.5 flex-shrink-0",children:[s+1,"."]}),l.jsx("span",{children:r})]},s))})]}),t.rewards&&l.jsxs("div",{className:"flex justify-center gap-4 mb-5 text-xs text-white/30",children:[l.jsxs("span",{children:[" ",t.rewards.fishCoins]}),l.jsxs("span",{children:[" ",t.rewards.xp," XP"]})]}),l.jsxs("div",{className:"flex flex-col items-center gap-3",children:[l.jsxs(N.button,{whileHover:{scale:1.03},whileTap:{scale:.97},onClick:e,className:`bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-500 hover:to-indigo-500
                   text-white px-8 py-3 rounded-xl font-bold text-sm shadow-lg shadow-blue-900/30 transition-all
                   flex items-center gap-2`,children:[l.jsx("span",{children:""}),l.jsx("span",{children:"Ver IA Jogar Primeiro"})]}),l.jsx("button",{onClick:n,className:"text-white/30 hover:text-white/50 text-xs transition-all",children:"Ir direto para prtica "})]})]},"intro")}function Ib({lesson:t,gameState:e,isInitialized:n,demoComplete:r,dropPreview:s,statusLabel:i,onSkip:o}){var c,u,h,d,f;if(!e||!n)return l.jsx("div",{className:"text-center text-white/40 text-sm py-12",children:"Preparando demonstrao..."});const a=y.useMemo(()=>{var w;if(!t.intro||t.intro.length===0)return null;const g=((w=e.score)==null?void 0:w.lines)||0,v=Math.min(Math.floor(g/2),t.intro.length-1);return t.intro[v]},[t.intro,(c=e.score)==null?void 0:c.lines]);return l.jsxs(N.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"text-center",children:[l.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-xl p-3 mb-3 max-w-md mx-auto",children:[l.jsxs("div",{className:"flex items-center justify-center gap-2",children:[l.jsx("span",{className:"text-lg",children:""}),l.jsx("p",{className:"text-sm font-semibold text-blue-300",children:"IA jogando  observe como ela faz!"})]}),i&&l.jsx("p",{className:"text-xs text-blue-400/70 mt-1",children:i})]}),a&&l.jsx(N.div,{initial:{opacity:0,y:-5},animate:{opacity:1,y:0},className:"bg-white/[0.04] border border-white/[0.06] rounded-lg p-2.5 mb-3 max-w-md mx-auto",children:l.jsxs("p",{className:"text-xs text-white/60",children:[" ",a]})},a),l.jsxs("div",{className:"flex gap-3 justify-center items-start",children:[l.jsx(Un,{heldPiece:e.heldPiece,canHold:e.canHold}),l.jsx(gn,{board:e.board,currentPiece:e.currentPiece,dropPreview:s,gameOver:e.gameOver}),l.jsxs("div",{className:"flex flex-col gap-3",children:[l.jsx(zn,{pieces:e.nextPieces||[]}),l.jsx(Hn,{score:((u=e.score)==null?void 0:u.points)||0,level:((h=e.score)==null?void 0:h.level)||1,lines:((d=e.score)==null?void 0:d.lines)||0,combo:((f=e.score)==null?void 0:f.combo)||0})]})]}),l.jsx("div",{className:"mt-4",children:r?l.jsx(N.button,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},whileHover:{scale:1.03},whileTap:{scale:.97},onClick:o,className:`bg-gradient-to-r from-emerald-600 to-green-600 hover:from-emerald-500 hover:to-green-500
                     text-white px-6 py-2.5 rounded-xl font-bold text-sm shadow-lg shadow-emerald-900/30 transition-all`,children:"  Agora  sua vez!"}):l.jsx("button",{onClick:o,className:"text-white/30 hover:text-white/50 text-xs transition-all",children:"Pular demonstrao "})})]},"demo")}function Ob({lesson:t,gameState:e,isInitialized:n,practiceState:r,onRestart:s,dropPreview:i}){var o,a,c,u;return!e||!n?l.jsx("div",{className:"text-center text-white/40 text-sm py-12",children:"Carregando..."}):l.jsxs(N.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"text-center",children:[l.jsxs("div",{className:"bg-white/[0.06] border border-white/[0.06] rounded-xl p-3 mb-3 max-w-md mx-auto",children:[l.jsxs("p",{className:"text-sm font-semibold text-white mb-2",children:[" ",t.practice.objective]}),r.progress>0&&l.jsxs("div",{children:[l.jsx("div",{className:"h-1.5 bg-white/[0.08] rounded-full overflow-hidden",children:l.jsx(N.div,{className:`h-full rounded-full ${r.complete?"bg-emerald-400":"bg-gradient-to-r from-blue-500 to-indigo-500"}`,initial:{width:0},animate:{width:`${Math.min(100,r.progress*100)}%`},transition:{duration:.3}})}),l.jsxs("div",{className:"text-white/30 text-[10px] mt-1",children:[Math.round(r.progress*100),"%"]})]})]}),l.jsxs("div",{className:"flex gap-3 justify-center items-start",children:[l.jsx(Un,{heldPiece:e.heldPiece,canHold:e.canHold}),l.jsx(gn,{board:e.board,currentPiece:e.currentPiece,dropPreview:i,gameOver:e.gameOver}),l.jsxs("div",{className:"flex flex-col gap-3",children:[l.jsx(zn,{pieces:e.nextPieces||[]}),l.jsx(Hn,{score:((o=e.score)==null?void 0:o.points)||0,level:((a=e.score)==null?void 0:a.level)||1,lines:((c=e.score)==null?void 0:c.lines)||0,combo:((u=e.score)==null?void 0:u.combo)||0})]})]}),l.jsx("div",{className:"mt-3 text-white/20 text-[10px]",children:" Mover   Rotao   Soft Drop  Espao: Hard Drop  C: Hold"}),r.feedback&&!r.complete&&l.jsx(N.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"mt-3 bg-white/[0.06] border border-white/[0.08] rounded-lg p-3 max-w-md mx-auto",children:l.jsx("p",{className:"text-sm text-white/70",children:r.feedback})},r.feedback),e.gameOver&&!r.complete&&l.jsxs(N.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"mt-4",children:[l.jsx("p",{className:"text-white/40 text-sm mb-2",children:"Game Over  tente de novo!"}),l.jsx("button",{onClick:s,className:"bg-white/[0.08] hover:bg-white/[0.12] text-white text-sm px-4 py-2 rounded-lg transition-all",children:" Recomear"})]}),r.complete&&l.jsxs(N.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",bounce:.4},className:"mt-4 bg-emerald-500/10 border border-emerald-500/20 rounded-xl p-6 max-w-sm mx-auto",children:[l.jsx("div",{className:"text-4xl mb-2",children:""}),l.jsx("h3",{className:"text-lg font-bold text-white mb-1",children:"Parabns!"}),l.jsx("p",{className:"text-emerald-300/70 text-sm",children:r.feedback})]})]},"practice")}function Fb({lesson:t,onComplete:e,onExit:n}){const[r,s]=y.useState("introduction"),[i,o]=y.useState({progress:0,feedback:"",complete:!1}),[a,c]=y.useState(!1),{gameState:u,isInitialized:h,demoComplete:d,statusLabel:f,getDropPreview:g}=Lb(r==="demo",t==null?void 0:t.id),v=y.useMemo(()=>r!=="demo"||!h?null:(g==null?void 0:g())||null,[r,h,g,u]),{gameState:w,actions:b,isInitialized:m,getValidationState:p}=Mb(r==="practice"?t:null);m0(b,w,r==="practice"&&m);const x=y.useMemo(()=>{var T;return r!=="practice"||!m?null:((T=b.getDropPreview)==null?void 0:T.call(b))||null},[r,m,b,w]);y.useEffect(()=>{var A;if(r!=="practice"||!m||!w)return;const T=p();if(!T||!((A=t.practice)!=null&&A.validate))return;const E=t.practice.validate(T);o(z=>({...z,progress:E.progress||0,feedback:E.feedback||"",complete:E.complete||!1})),E.complete&&!i.complete&&(c(!0),setTimeout(()=>{e(t.id,{score:T.score})},2e3))},[r,m,w,t,p,i.complete,e]);const S=y.useCallback(()=>{s("demo")},[]),j=y.useCallback(()=>{s("practice"),o({progress:0,feedback:"",complete:!1})},[]),k=y.useCallback(()=>{var T;(T=b.restart)==null||T.call(b),o({progress:0,feedback:"",complete:!1})},[b]),C=r==="introduction"?" Introduo":r==="demo"?" Demonstrao":" Prtica";return l.jsxs("div",{className:"fixed inset-0 bg-gradient-to-b from-slate-900 via-indigo-950 to-slate-900 z-50 flex flex-col",children:[l.jsx("div",{className:"bg-black/30 border-b border-white/[0.06] px-4 py-2 flex-shrink-0",children:l.jsxs("div",{className:"flex items-center justify-between max-w-4xl mx-auto",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("span",{className:"text-2xl",children:t.module==="fundamentals"?"":t.module==="intermediate"?"":t.module==="advanced"?"":""}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-bold text-white",children:t.title}),l.jsx("p",{className:"text-white/40 text-xs",children:t.description})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-xs text-white/30 bg-white/[0.06] px-2 py-1 rounded",children:C}),l.jsx("button",{onClick:n,className:"text-white/40 hover:text-white/70 bg-white/[0.06] hover:bg-white/[0.1] rounded-lg px-3 py-1.5 text-sm transition-all",children:" Sair"})]})]})}),l.jsx("div",{className:"flex-1 overflow-auto p-3",children:l.jsx("div",{className:"max-w-4xl w-full mx-auto",children:l.jsxs(xe,{mode:"wait",children:[r==="introduction"&&l.jsx(Db,{lesson:t,onStartDemo:S,onStartPractice:j}),r==="demo"&&l.jsx(Ib,{lesson:t,gameState:u,isInitialized:h,demoComplete:d,dropPreview:v,statusLabel:f,onSkip:j}),r==="practice"&&l.jsx(Ob,{lesson:t,gameState:w,isInitialized:m,practiceState:i,onRestart:k,dropPreview:x})]})})}),l.jsx(Rb,{show:a,onComplete:()=>c(!1)})]})}function Gb({tutorialService:t,onClose:e,onLessonComplete:n}){const[r,s]=y.useState(null),[i,o]=y.useState(t.getProgress()),[a,c]=y.useState("fundamentals"),u=t.lessons,h=[{key:"fundamentals",icon:"",name:"Fundamentos",desc:"O bsico do Tetris"},{key:"intermediate",icon:"",name:"Intermedirio",desc:"T-spins e combos"},{key:"advanced",icon:"",name:"Avanado",desc:"Setups e estratgias"},{key:"pro",icon:"",name:"Profissional",desc:"Tcnicas PRO"}],d=u.filter(x=>x.module===a),f=x=>{const S=u.filter(k=>k.module===x).map(k=>k.id);return{done:S.filter(k=>i.completedLessons.includes(k)).length,total:S.length}},g=(x,S)=>{const j=t.completeLesson(x,S);o(t.getProgress()),s(null),n&&n(j)},v=x=>i.unlockedLessons.includes(x),w=x=>i.completedLessons.includes(x);if(r)return l.jsx(Fb,{lesson:r,onComplete:g,onExit:()=>s(null)});const b=i.completedLessons.length,m=u.length,p=m>0?Math.round(b/m*100):0;return l.jsx(N.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-gradient-to-b from-slate-900 via-indigo-950 to-slate-900 z-40 overflow-y-auto",children:l.jsxs("div",{className:"min-h-screen max-w-lg mx-auto px-4 py-6 flex flex-col",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-extrabold text-white",children:" Tutorial"}),l.jsx("p",{className:"text-white/40 text-sm mt-0.5",children:"Aprenda do zero ao PRO"})]}),l.jsx("button",{onClick:e,className:"text-white/40 hover:text-white/70 bg-white/[0.06] hover:bg-white/[0.1] rounded-lg px-3 py-1.5 text-sm transition-all",children:" Voltar"})]}),l.jsxs("div",{className:"mb-6",children:[l.jsxs("div",{className:"flex justify-between text-xs text-white/40 mb-1.5",children:[l.jsx("span",{children:"Progresso geral"}),l.jsxs("span",{children:[b,"/",m," (",p,"%)"]})]}),l.jsx("div",{className:"h-2 bg-white/[0.08] rounded-full overflow-hidden",children:l.jsx(N.div,{className:"h-full bg-gradient-to-r from-emerald-500 to-green-400 rounded-full",initial:{width:0},animate:{width:`${p}%`},transition:{duration:.6,ease:"easeOut"}})})]}),l.jsx("div",{className:"flex gap-1.5 mb-5 overflow-x-auto pb-1 -mx-1 px-1",children:h.map(x=>{const S=f(x.key),j=a===x.key;return l.jsx("button",{onClick:()=>c(x.key),className:`flex-shrink-0 rounded-lg px-3 py-2 text-left transition-all duration-150 ${j?"bg-white/[0.12] border border-white/[0.15]":"bg-white/[0.04] border border-transparent hover:bg-white/[0.07]"}`,children:l.jsxs("div",{className:"flex items-center gap-1.5",children:[l.jsx("span",{className:"text-base",children:x.icon}),l.jsx("span",{className:`text-xs font-semibold ${j?"text-white":"text-white/50"}`,children:x.name}),l.jsxs("span",{className:`text-[10px] ml-1 ${S.done===S.total&&S.total>0?"text-emerald-400":"text-white/30"}`,children:[S.done,"/",S.total]})]})},x.key)})}),l.jsx("div",{className:"flex-1 space-y-2",children:l.jsx(xe,{mode:"wait",children:l.jsxs(N.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},transition:{duration:.2},className:"space-y-2",children:[d.map((x,S)=>{var C,T;const j=v(x.id),k=w(x.id);return l.jsxs(N.button,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:S*.04},disabled:!j,onClick:()=>j&&s(x),className:`w-full text-left rounded-xl p-4 transition-all duration-150 flex items-center gap-3 ${j?"bg-white/[0.06] hover:bg-white/[0.1] border border-white/[0.06] hover:border-white/[0.12] active:scale-[0.99]":"bg-white/[0.02] border border-white/[0.03] opacity-40 cursor-not-allowed"} ${k?"border-emerald-500/30":""}`,children:[l.jsx("div",{className:`w-9 h-9 rounded-lg flex items-center justify-center text-sm flex-shrink-0 ${k?"bg-emerald-500/20 text-emerald-400":j?"bg-white/[0.08] text-white/60":"bg-white/[0.04] text-white/20"}`,children:k?"":j?S+1:""}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("div",{className:"text-sm font-semibold text-white truncate",children:x.title}),l.jsx("div",{className:"text-xs text-white/35 mt-0.5 truncate",children:x.description}),l.jsxs("div",{className:"flex items-center gap-3 mt-1.5 text-[10px] text-white/25",children:[l.jsxs("span",{children:[" ",x.estimatedTime]}),l.jsxs("span",{children:[" ",((C=x.rewards)==null?void 0:C.fishCoins)||0]}),l.jsxs("span",{children:[" ",((T=x.rewards)==null?void 0:T.xp)||0," XP"]})]})]}),l.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[l.jsx("span",{className:`w-2 h-2 rounded-full ${x.difficulty==="beginner"?"bg-green-400":x.difficulty==="intermediate"?"bg-yellow-400":x.difficulty==="advanced"?"bg-red-400":"bg-purple-400"}`}),j&&l.jsx("svg",{className:"w-4 h-4 text-white/20",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]},x.id)}),d.length===0&&l.jsx("div",{className:"text-center py-12 text-white/20 text-sm",children:"Nenhuma lio neste mdulo"})]},a)})}),i.badges.length>0&&l.jsxs("div",{className:"mt-6 pt-4 border-t border-white/[0.06]",children:[l.jsx("div",{className:"text-xs text-white/30 mb-2",children:"Badges conquistadas"}),l.jsx("div",{className:"flex flex-wrap gap-2",children:i.badges.map(x=>l.jsxs("span",{className:"bg-amber-500/10 text-amber-300/70 text-[10px] px-2 py-1 rounded-md font-medium",children:[" ",x.replace(/_/g," ")]},x))})]})]})})}function Vb({reward:t,onClose:e}){var n,r,s;return ce.useEffect(()=>{const i=setTimeout(()=>{e()},5e3);return()=>clearTimeout(i)},[e]),t?l.jsx(N.div,{initial:{opacity:0,y:-50,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,scale:.9},className:"fixed top-24 right-6 z-[60] max-w-md",children:l.jsx("div",{className:"bg-gradient-to-br from-green-600 to-emerald-600 rounded-xl p-6 shadow-2xl border-2 border-white/20",children:l.jsxs("div",{className:"flex items-start gap-4",children:[l.jsx("div",{className:"text-4xl",children:""}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Lesson Completa!"}),t.lessonTitle&&l.jsx("p",{className:"text-white/90 text-sm mb-3",children:t.lessonTitle}),l.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[((n=t.rewards)==null?void 0:n.fishCoins)>0&&l.jsxs("div",{className:"bg-white/10 rounded-lg p-2 text-center",children:[l.jsx("div",{className:"text-xl",children:""}),l.jsxs("div",{className:"text-lg font-bold text-white",children:["+",t.rewards.fishCoins]}),l.jsx("div",{className:"text-xs text-white/70",children:"Peixes"})]}),((r=t.rewards)==null?void 0:r.xp)>0&&l.jsxs("div",{className:"bg-white/10 rounded-lg p-2 text-center",children:[l.jsx("div",{className:"text-xl",children:""}),l.jsxs("div",{className:"text-lg font-bold text-white",children:["+",t.rewards.xp]}),l.jsx("div",{className:"text-xs text-white/70",children:"XP"})]}),((s=t.rewards)==null?void 0:s.badge)&&l.jsxs("div",{className:"bg-white/10 rounded-lg p-2 text-center",children:[l.jsx("div",{className:"text-xl",children:""}),l.jsx("div",{className:"text-xs font-bold text-white mt-1",children:"Badge"}),l.jsx("div",{className:"text-xs text-white/70",children:t.rewards.badge.split("_")[0]})]})]})]}),l.jsx("button",{onClick:e,className:"text-white/60 hover:text-white transition-colors",children:""})]})})}):null}function Bb(){const[t,e]=y.useState(null),n=y.useRef(null),r=y.useRef(null),s=y.useRef(0),i=y.useRef(!1),o=y.useRef(!1);y.useEffect(()=>{if(!i.current){i.current=!0;try{const S=B.resolve("gameService");n.current=S,S.initializeGame(),e(S.getGameState());const j=()=>{o.current=!0};return Object.values(G).forEach(k=>{R.on(k,j)}),()=>{Object.values(G).forEach(k=>{R.off(k,j)}),r.current&&cancelAnimationFrame(r.current)}}catch(S){throw Dt.logError("useGameService","init",S.message,{stack:S.stack}),S}}},[]),y.useEffect(()=>{if(!n.current)return;const S=j=>{s.current||(s.current=j);const k=j-s.current;s.current=j,n.current&&(n.current.isPlaying&&!n.current.isPaused&&!n.current.gameOver&&n.current.updateGame(k),o.current&&(o.current=!1,e(n.current.getGameState()))),r.current=requestAnimationFrame(S)};return r.current=requestAnimationFrame(S),()=>{r.current&&cancelAnimationFrame(r.current)}},[]);const a=y.useCallback(S=>(...j)=>{if(n.current&&typeof n.current[S]=="function")try{return n.current[S](...j)}catch(k){if(Dt.logError("useGameService",S,k.message,{stack:k.stack,args:j.map(C=>String(C).slice(0,100))}),S==="getDropPreview")return null;throw k}},[]),c=y.useCallback(a("movePiece"),[a]),u=y.useCallback(a("rotatePiece"),[a]),h=y.useCallback(a("rotatePieceLeft"),[a]),d=y.useCallback(a("hardDrop"),[a]),f=y.useCallback(a("holdPiece"),[a]),g=y.useCallback(a("getDropPreview"),[a]),v=y.useCallback(a("pause"),[a]),w=y.useCallback(a("resume"),[a]),b=y.useCallback(a("restart"),[a]),m=y.useCallback(a("saveGame"),[a]),p=y.useCallback(a("loadGame"),[a]);return{gameState:t,actions:{movePiece:c,rotatePiece:u,rotatePieceLeft:h,hardDrop:d,holdPiece:f,getDropPreview:g,pause:v,resume:w,restart:b,saveGame:m,loadGame:p}}}function Hb(){const[t,e]=y.useState({volume:80,gameSpeed:"normal",soundEnabled:!0,particlesEnabled:!0,das:167,arr:33}),[n,r]=y.useState(!0),[s,i]=y.useState(null);y.useEffect(()=>{try{const h=B.resolve("settingsService").getSettings();e(h||{volume:80,gameSpeed:"normal",soundEnabled:!0,particlesEnabled:!0,das:167,arr:33}),r(!1)}catch(u){i(u.message),r(!1),e({volume:80,gameSpeed:"normal",soundEnabled:!0,particlesEnabled:!0,das:167,arr:33})}},[]);const o=y.useCallback(async u=>{try{i(null);const d=B.resolve("settingsService").saveSettings(u);return e(d),d}catch(h){throw i(h.message),h}},[]),a=y.useCallback(async(u,h)=>{try{i(null);const f=B.resolve("settingsService").updateSetting(u,h);return e(f),f}catch(d){throw i(d.message),d}},[]),c=y.useCallback(async()=>{try{i(null);const h=B.resolve("settingsService").resetSettings();return e(h),h}catch(u){throw i(u.message),u}},[]);return{settings:t,loading:n,error:s,updateSettings:o,updateSetting:a,resetSettings:c}}function zb(){const t=y.useCallback((b,m,p="sine",x=.1)=>{const S=Mr();if(S)try{const j=S.createOscillator(),k=S.createGain();j.connect(k),k.connect(S.destination),j.frequency.setValueAtTime(b,S.currentTime),j.type=p,k.gain.setValueAtTime(x,S.currentTime),k.gain.exponentialRampToValueAtTime(.001,S.currentTime+m),j.start(S.currentTime),j.stop(S.currentTime+m)}catch{}},[]),e=y.useCallback((b,m=.05)=>{const p=Mr();if(p)try{const x=p.sampleRate*b,S=p.createBuffer(1,x,p.sampleRate),j=S.getChannelData(0);for(let C=0;C<x;C++)j[C]=(Math.random()*2-1)*m;const k=p.createBufferSource();k.buffer=S,k.connect(p.destination),k.start()}catch{}},[]),n=y.useCallback(b=>{switch(b){case"I":[800,700,600,500].forEach((m,p)=>{setTimeout(()=>t(m,.1,"square",.08),p*50)});break;case"O":t(600,.1,"sine",.1),setTimeout(()=>t(600,.1,"sine",.1),80);break;case"T":t(523,.08,"triangle",.08),setTimeout(()=>t(659,.08,"triangle",.08),40),setTimeout(()=>t(523,.08,"triangle",.08),80);break;case"S":[440,494,523,587].forEach((m,p)=>{setTimeout(()=>t(m,.06,"sawtooth",.06),p*30)});break;case"Z":[587,523,494,440].forEach((m,p)=>{setTimeout(()=>t(m,.06,"sawtooth",.06),p*30)});break;case"J":[330,415,523].forEach((m,p)=>{setTimeout(()=>t(m,.15,"triangle",.07),p*20)});break;case"L":[392,494,659].forEach((m,p)=>{setTimeout(()=>t(m,.15,"sine",.08),p*30)});break;default:t(440,.1,"sine",.05)}},[t]),r=y.useCallback(b=>{switch(b){case 1:[440,494,523].forEach((m,p)=>{setTimeout(()=>t(m,.1,"triangle",.1),p*80)});break;case 2:[440,523,659,784].forEach((m,p)=>{setTimeout(()=>t(m,.12,"triangle",.1),p*60)});break;case 3:[523,659,784,1047,1319].forEach((m,p)=>{setTimeout(()=>t(m,.15,"triangle",.12),p*50)});break;case 4:e(.02),setTimeout(()=>{[262,330,392,523,659,784,1047].forEach((m,p)=>{setTimeout(()=>t(m,.2,"sawtooth",.15),p*40)})},50),setTimeout(()=>{[1047,1319,1568,2093].forEach((m,p)=>{setTimeout(()=>t(m,.3,"triangle",.2),p*30)})},350);break}},[t,e]),s=y.useCallback(()=>{[{freq:523,delay:0},{freq:659,delay:100},{freq:784,delay:200},{freq:1047,delay:300},{freq:784,delay:400},{freq:1047,delay:500},{freq:1319,delay:600},{freq:1568,delay:700}].forEach(m=>{setTimeout(()=>t(m.freq,.15,"triangle",.12),m.delay)}),setTimeout(()=>{[1047,1319,1568,2093].forEach((m,p)=>{setTimeout(()=>t(m,.4,"triangle",.15),p*50)})},800)},[t]),i=y.useCallback(()=>{t(200,.05,"square",.03),t(120,.06,"sine",.04)},[t]),o=y.useCallback(()=>{e(.04,.08),t(80,.08,"square",.12),t(60,.1,"sine",.1)},[t,e]),a=y.useCallback(()=>{e(.03,.04),[349,440,523,659,784].forEach((b,m)=>{setTimeout(()=>t(b,.2,"sawtooth",.1),m*40)}),setTimeout(()=>{t(1047,.4,"triangle",.15)},250)},[t,e]),c=y.useCallback(()=>{[660,880,1100,1320,1760].forEach((b,m)=>{setTimeout(()=>t(b,.12,"triangle",.08),m*50)})},[t]),u=y.useCallback(b=>{const m=400+b*80;t(m,.1,"triangle",.08),setTimeout(()=>t(m*1.25,.08,"triangle",.06),50)},[t]),h=y.useCallback(()=>{[523,494,440,392,349,330,294,262].forEach((m,p)=>{setTimeout(()=>t(m,.3,"sine",.1),p*150)})},[t]),d=y.useCallback(()=>{t(440,.2,"triangle",.08)},[t]),f=y.useCallback(()=>{t(523,.15,"triangle",.08),setTimeout(()=>t(659,.1,"triangle",.06),100)},[t]),g=y.useCallback(()=>{t(880,.1,"sine",.06),setTimeout(()=>t(1100,.08,"sine",.05),60)},[t]),v=y.useCallback(()=>{t(1200,.05,"square",.04)},[t]),w=y.useCallback(()=>{t(800,.03,"square",.02)},[t]);return{playPieceSound:n,playLineClear:r,playLevelUp:s,playPieceLand:i,playHardDrop:o,playTSpin:a,playBackToBack:c,playCombo:u,playGameOver:h,playPause:d,playResume:f,playHold:g,playRotate:v,playMove:w}}function Ub(){const t=zb(),e=y.useRef(t);e.current=t,y.useEffect(()=>{const n=()=>e.current,r=v=>{var w;n().playPieceLand(),(w=v==null?void 0:v.piece)!=null&&w.type&&n().playPieceSound(v.piece.type)},s=v=>{(v==null?void 0:v.linesCleared)>0&&n().playLineClear(v.linesCleared)},i=()=>n().playHardDrop(),o=()=>n().playTSpin(),a=()=>n().playBackToBack(),c=v=>{(v==null?void 0:v.combo)>=2&&n().playCombo(v.combo)},u=()=>n().playHold(),h=()=>n().playRotate(),d=()=>n().playMove(),f=()=>n().playGameOver(),g=()=>n().playLevelUp();return R.on(G.PIECE_PLACED,r),R.on(G.LINE_CLEARED,s),R.on(G.HARD_DROP,i),R.on(G.T_SPIN,o),R.on(G.BACK_TO_BACK,a),R.on(G.SCORE_UPDATED,c),R.on(G.PIECE_HELD,u),R.on(G.PIECE_ROTATED,h),R.on(G.PIECE_MOVED,d),R.on(G.GAME_OVER,f),R.on(G.LEVEL_UP,g),()=>{R.off(G.PIECE_PLACED,r),R.off(G.LINE_CLEARED,s),R.off(G.HARD_DROP,i),R.off(G.T_SPIN,o),R.off(G.BACK_TO_BACK,a),R.off(G.SCORE_UPDATED,c),R.off(G.PIECE_HELD,u),R.off(G.PIECE_ROTATED,h),R.off(G.PIECE_MOVED,d),R.off(G.GAME_OVER,f),R.off(G.LEVEL_UP,g)}},[])}function $b(){const[t,e]=y.useState(!1),[n,r]=y.useState(null),s=y.useRef(null),i=y.useRef([]),o=y.useRef(null),a=y.useCallback(()=>{s.current&&(s.current.pause(),s.current.currentTime=0),i.current.forEach(f=>{try{f.stop()}catch{}}),i.current=[],o.current&&(clearTimeout(o.current),o.current=null),e(!1),r(null)},[]),c=y.useCallback(async()=>{try{a();const f=new Audio("/cat-tetris/sounds/background-music.mp3");f.loop=!0,f.volume=.3,s.current=f,await f.play(),e(!0),r("background")}catch{h()}},[a]),u=y.useCallback(async()=>{try{a();const f=new Audio("/cat-tetris/sounds/game-music.mp3");f.loop=!0,f.volume=.4,s.current=f,await f.play(),e(!0),r("game")}catch{d()}},[a]),h=y.useCallback(()=>{a();try{const f=Mr();if(!f)return;const g=[{freq:523.25,duration:.4},{freq:587.33,duration:.4},{freq:659.25,duration:.4},{freq:698.46,duration:.4},{freq:783.99,duration:.6},{freq:659.25,duration:.4},{freq:523.25,duration:.8},{freq:587.33,duration:.4},{freq:659.25,duration:.4},{freq:698.46,duration:.4},{freq:783.99,duration:.6},{freq:880,duration:.4},{freq:783.99,duration:.8},{freq:659.25,duration:.4},{freq:698.46,duration:.4},{freq:783.99,duration:.4},{freq:880,duration:.6},{freq:987.77,duration:.4},{freq:1046.5,duration:.8}];let v=f.currentTime;g.forEach((w,b)=>{const m=f.createOscillator(),p=f.createGain();if(m.connect(p),p.connect(f.destination),m.frequency.setValueAtTime(w.freq,v),m.type="sine",p.gain.setValueAtTime(0,v),p.gain.linearRampToValueAtTime(.1,v+.05),p.gain.exponentialRampToValueAtTime(.01,v+w.duration),m.start(v),m.stop(v+w.duration),i.current.push(m),b<g.length-1){const x=f.createOscillator(),S=f.createGain();x.connect(S),S.connect(f.destination),x.frequency.setValueAtTime(w.freq*1.25,v),x.type="triangle",S.gain.setValueAtTime(0,v),S.gain.linearRampToValueAtTime(.05,v+.05),S.gain.exponentialRampToValueAtTime(.01,v+w.duration),x.start(v),x.stop(v+w.duration),i.current.push(x)}v+=w.duration}),o.current=setTimeout(()=>{s.current||h()},v*1e3+1e3),e(!0),r("cheerful-fallback")}catch{}},[a]),d=y.useCallback(()=>{a();try{const f=Mr();if(!f)return;const g=[{freq:261.63,duration:.2},{freq:329.63,duration:.2},{freq:392,duration:.2},{freq:523.25,duration:.3},{freq:392,duration:.1},{freq:523.25,duration:.3},{freq:293.66,duration:.2},{freq:369.99,duration:.2},{freq:440,duration:.2},{freq:587.33,duration:.3},{freq:440,duration:.1},{freq:587.33,duration:.3},{freq:329.63,duration:.2},{freq:415.3,duration:.2},{freq:493.88,duration:.2},{freq:659.25,duration:.4},{freq:493.88,duration:.2},{freq:659.25,duration:.4}];let v=f.currentTime;g.forEach((w,b)=>{const m=f.createOscillator(),p=f.createGain();if(m.connect(p),p.connect(f.destination),m.frequency.setValueAtTime(w.freq,v),m.type="square",p.gain.setValueAtTime(0,v),p.gain.linearRampToValueAtTime(.15,v+.02),p.gain.exponentialRampToValueAtTime(.01,v+w.duration),m.start(v),m.stop(v+w.duration),i.current.push(m),b%2===0){const x=f.createOscillator(),S=f.createGain();x.connect(S),S.connect(f.destination),x.frequency.setValueAtTime(w.freq*.5,v),x.type="sawtooth",S.gain.setValueAtTime(0,v),S.gain.linearRampToValueAtTime(.08,v+.02),S.gain.exponentialRampToValueAtTime(.01,v+w.duration),x.start(v),x.stop(v+w.duration),i.current.push(x)}v+=w.duration}),o.current=setTimeout(()=>{s.current||d()},v*1e3+500),e(!0),r("energetic-fallback")}catch{}},[a]);return{isPlaying:t,currentTrack:n,startBackgroundMusic:c,startGameMusic:u,stopMusic:a,playCheerfulMelody:h,playEnergeticMelody:d}}const rt={DPAD_UP:12,DPAD_DOWN:13,DPAD_LEFT:14,DPAD_RIGHT:15,FACE_BUTTON_BOTTOM:0,FACE_BUTTON_RIGHT:1,FACE_BUTTON_LEFT:2,FACE_BUTTON_TOP:3,BUMPER_LEFT:4,BUMPER_RIGHT:5,TRIGGER_LEFT:6,TRIGGER_RIGHT:7,BUTTON_BACK:8,BUTTON_START:9,STICK_LEFT:10,STICK_RIGHT:11},Wb=(t=null)=>{const[e,n]=y.useState([]),[r,s]=y.useState(!1),i=y.useRef({}),o=y.useRef(100),a=y.useRef({}),c=y.useRef({}),u=y.useRef(200);y.useEffect(()=>{const g=b=>{n(m=>[...m,b.gamepad]),s(!0),b.gamepad.vibrationActuator&&b.gamepad.vibrationActuator.playEffect("dual-rumble",{duration:200,strongMagnitude:.5,weakMagnitude:.5})},v=b=>{n(p=>p.filter(x=>x.id!==b.gamepad.id));const m=navigator.getGamepads().filter(p=>p&&p.connected);s(m.length>0)};return window.addEventListener("gamepadconnected",g),window.addEventListener("gamepaddisconnected",v),(()=>{const b=navigator.getGamepads(),m=Array.from(b).filter(p=>p&&p.connected);m.length>0&&(n(m),s(!0))})(),()=>{window.removeEventListener("gamepadconnected",g),window.removeEventListener("gamepaddisconnected",v)}},[]);const h=y.useCallback((g,v,w=.3)=>Math.abs(g)<w&&Math.abs(v)<w?null:Math.abs(g)>Math.abs(v)?g>0?"right":"left":v>0?"down":"up",[]),d=y.useCallback(()=>{var Q,F,H;if(!r||!t)return;const g=navigator.getGamepads(),v=Array.from(g).find(V=>V&&V.connected);if(!v)return;const w=Date.now(),{movePiece:b,rotatePiece:m,rotatePieceLeft:p,hardDrop:x,holdPiece:S,pause:j}=t;if(!b)return;const k=(V,L)=>{const $=`movement_${V}`,P=i.current[$]||0,M=c.current[$]||!1;if(L&&!M){c.current[$]=!0,i.current[$]=w,C(V);return}if(L&&M){const O=u.current,I=o.current,q=P===i.current[$]&&w-P>=O?O:I;w-P>=q&&(i.current[$]=w,C(V));return}!L&&M&&(c.current[$]=!1)},C=V=>{t.movePiece&&t.movePiece(V)},T=((Q=v.buttons[rt.DPAD_LEFT])==null?void 0:Q.pressed)||h(v.axes[0],v.axes[1])==="left",E=((F=v.buttons[rt.DPAD_RIGHT])==null?void 0:F.pressed)||h(v.axes[0],v.axes[1])==="right",A=((H=v.buttons[rt.DPAD_DOWN])==null?void 0:H.pressed)||h(v.axes[0],v.axes[1])==="down";k("left",T),k("right",E),k("down",A);const z={};[{button:rt.DPAD_UP,action:()=>x==null?void 0:x()},{button:rt.FACE_BUTTON_BOTTOM,action:()=>m==null?void 0:m()},{button:rt.FACE_BUTTON_RIGHT,action:()=>p==null?void 0:p()},{button:rt.FACE_BUTTON_LEFT,action:()=>m==null?void 0:m()},{button:rt.FACE_BUTTON_TOP,action:()=>m==null?void 0:m()},{button:rt.BUMPER_LEFT,action:()=>S==null?void 0:S()},{button:rt.BUMPER_RIGHT,action:()=>S==null?void 0:S()},{button:rt.BUTTON_START,action:()=>j==null?void 0:j()}].forEach(({button:V,action:L})=>{var M;const $=(M=v.buttons[V])==null?void 0:M.pressed,P=a.current[V];if(z[V]=$,$&&!P&&(L(),v.vibrationActuator)){const O=V===rt.DPAD_UP?.3:.1;v.vibrationActuator.playEffect("dual-rumble",{duration:50,strongMagnitude:O,weakMagnitude:O*.5})}}),a.current=z},[r,h,t]),f=y.useCallback(()=>{const g=navigator.getGamepads(),v=Array.from(g).find(w=>w&&w.connected);return v?{id:v.id,index:v.index,connected:v.connected,buttonsCount:v.buttons.length,axesCount:v.axes.length}:null},[]);return{isGamepadActive:r,connectedGamepads:e,processGamepadInput:d,getGamepadInfo:f,controllerCount:e.length}};function qb(){const[t,e]=y.useState(null),[n,r]=y.useState(!0);y.useEffect(()=>{try{const o=B.resolve("playerStatsService");e(o.getStats()),r(!1);const a=()=>{try{const c=B.resolve("statisticsService"),h=B.resolve("gameService").getGameState(),d=c.getStats(),f={score:h.score.points,level:h.score.level,linesCleared:d.linesCleared,piecesPlaced:d.piecesPlaced,tSpins:d.tSpins,backToBack:d.backToBack,maxCombo:d.maxCombo,playTime:d.playTime};o.updateAfterGame(f),e(o.getStats()),window.dispatchEvent(new Event("playerStatsUpdated"))}catch{}};return R.on(G.GAME_OVER,a),()=>{R.off(G.GAME_OVER,a)}}catch{r(!1)}},[]);const s=y.useCallback((o,a)=>{try{const c=B.resolve("playerStatsService"),u=c.updateRecord(o,a);return u&&(e(c.getStats()),window.dispatchEvent(new Event("playerStatsUpdated"))),u}catch{return!1}},[]),i=y.useCallback((o,a=1)=>{try{const c=B.resolve("playerStatsService");c.incrementStat(o,a),e(c.getStats()),window.dispatchEvent(new Event("playerStatsUpdated"))}catch{}},[]);return{playerStats:t,loading:n,updateRecord:s,incrementStat:i}}const Kb=({isConnected:t,controllerCount:e,gamepadInfo:n,className:r=""})=>{const[s,i]=y.useState(!1);return t?l.jsx("div",{className:`fixed top-4 right-4 z-50 ${r}`,children:l.jsxs(N.div,{initial:{opacity:0,scale:.8,x:20},animate:{opacity:1,scale:1,x:0},exit:{opacity:0,scale:.8,x:20},transition:{duration:.3},className:"bg-gray-900/90 backdrop-blur-sm text-white p-3 rounded-lg border border-green-500/30 shadow-lg",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(N.div,{animate:{rotate:[0,-10,10,-10,0],scale:[1,1.1,1]},transition:{duration:2,repeat:1/0,repeatDelay:3},children:""}),l.jsxs("div",{className:"text-sm",children:[l.jsxs("div",{className:"text-green-400 font-semibold",children:[e," Controle",e!==1?"s":""," Conectado",e!==1?"s":""]}),l.jsx("div",{className:"text-gray-300 text-xs",children:"Pronto para jogar!"})]}),l.jsx(N.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>i(!s),className:"ml-2 text-gray-400 hover:text-white transition-colors",title:"Mostrar controles",children:l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"})})})]}),l.jsx(xe,{children:s&&l.jsx(N.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},className:"mt-3 pt-3 border-t border-gray-700",children:l.jsxs("div",{className:"text-xs text-gray-300 space-y-1",children:[l.jsx("div",{className:"font-semibold text-white mb-2",children:" Controles:"}),l.jsxs("div",{className:"grid grid-cols-2 gap-1 text-xs",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-yellow-400",children:"D-Pad  "}),l.jsx("div",{className:"text-gray-400",children:"Mover"})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-yellow-400",children:"D-Pad "}),l.jsx("div",{className:"text-gray-400",children:"Acelerar"})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-yellow-400",children:"D-Pad "}),l.jsx("div",{className:"text-gray-400",children:"Hard Drop"})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-yellow-400",children:"A/B/X/Y"}),l.jsx("div",{className:"text-gray-400",children:"Girar"})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-yellow-400",children:"L/R"}),l.jsx("div",{className:"text-gray-400",children:"Guardar"})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-yellow-400",children:"Start"}),l.jsx("div",{className:"text-gray-400",children:"Pausar"})]})]}),l.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-700",children:[l.jsx("div",{className:"text-green-400 text-xs",children:" Analog Stick Esquerdo tambm funciona!"}),l.jsx("div",{className:"text-blue-400 text-xs",children:" Gatilhos L2/R2 para rotao"})]}),n&&n.length>0&&l.jsx("div",{className:"mt-2 pt-2 border-t border-gray-700",children:l.jsx("div",{className:"text-xs text-gray-400",children:n.map((o,a)=>l.jsxs("div",{className:"mb-1",children:[l.jsxs("div",{className:"font-semibold text-white",children:["Controle ",o.index+1,":"]}),l.jsx("div",{className:"text-gray-300 truncate",children:o.id.length>30?o.id.substring(0,30)+"...":o.id}),l.jsxs("div",{className:"flex gap-2 text-xs",children:[l.jsxs("span",{className:"text-blue-400",children:[o.buttons," botes"]}),l.jsxs("span",{className:"text-green-400",children:[o.axes," eixos"]}),o.vibration&&l.jsx("span",{className:"text-purple-400",children:" Vibrao"})]})]},a))})})]})})})]})}):null},Qb=y.lazy(()=>Ip(()=>import("./SettingsMenu-49fd8975.js"),[]));function Xb(){return l.jsx("div",{className:"flex items-center justify-center p-8",children:l.jsx(N.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"text-4xl",children:""})})}function Yb({gameState:t,actions:e,onBackToMenu:n,onRestart:r,isGamepadActive:s,controllerCount:i,getGamepadInfo:o}){var g,v,w,b,m,p;const a=ce.useMemo(()=>{if(!(t!=null&&t.currentPiece)||t!=null&&t.gameOver||t!=null&&t.isPaused)return null;try{return e.getDropPreview()}catch{return null}},[(v=(g=t==null?void 0:t.currentPiece)==null?void 0:g.position)==null?void 0:v.x,(b=(w=t==null?void 0:t.currentPiece)==null?void 0:w.position)==null?void 0:b.y,(m=t==null?void 0:t.currentPiece)==null?void 0:m.type,(p=t==null?void 0:t.currentPiece)==null?void 0:p.shape,t==null?void 0:t.gameOver,t==null?void 0:t.isPaused]),[c,u]=ce.useState({hardDrop:!1,hold:!1,pause:!1}),h=ce.useCallback(()=>{c.hardDrop||t!=null&&t.gameOver||(e.hardDrop(),u(x=>({...x,hardDrop:!0})),setTimeout(()=>{u(x=>({...x,hardDrop:!1}))},300))},[e,c.hardDrop,t==null?void 0:t.gameOver]),d=ce.useCallback(()=>{c.hold||t!=null&&t.gameOver||!(t!=null&&t.canHold)||(e.holdPiece(),u(x=>({...x,hold:!0})),setTimeout(()=>{u(x=>({...x,hold:!1}))},500))},[e,c.hold,t==null?void 0:t.gameOver,t==null?void 0:t.canHold]),f=ce.useCallback(()=>{c.pause||t!=null&&t.gameOver||(t!=null&&t.isPaused?e.resume():e.pause(),u(x=>({...x,pause:!0})),setTimeout(()=>{u(x=>({...x,pause:!1}))},300))},[e,c.pause,t==null?void 0:t.gameOver,t==null?void 0:t.isPaused]);return l.jsxs("div",{className:"h-screen cat-bg flex flex-col overflow-hidden",children:[l.jsxs("div",{className:"flex items-center justify-between px-3 py-1.5 bg-black/30 backdrop-blur-sm border-b border-white/10 shrink-0",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(N.button,{onClick:n,whileHover:{scale:1.05},whileTap:{scale:.95},className:"bg-white/15 hover:bg-white/25 text-white p-1.5 rounded-lg transition-colors",title:"Voltar ao Menu",children:l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"})})}),l.jsx("span",{className:"text-white font-bold text-sm",children:" Cat Tetris"})]}),l.jsxs("div",{className:"flex items-center gap-3 text-xs text-white/70",children:[l.jsxs("span",{className:"text-yellow-400 font-bold",children:[t.score.points.toLocaleString()," pts"]}),l.jsxs("span",{children:["Nv.",t.score.level]}),l.jsxs("span",{children:[t.score.lines," linhas"]})]}),l.jsx("div",{className:"flex items-center gap-1.5",children:l.jsx(N.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:t.isPaused?e.resume:e.pause,disabled:t.gameOver,className:"bg-white/10 hover:bg-white/20 text-white px-2.5 py-1 rounded-lg text-xs transition-colors disabled:opacity-50",children:t.isPaused?"":""})})]}),l.jsxs("div",{className:"flex-1 flex items-center justify-center overflow-hidden p-2",children:[l.jsxs("div",{className:"flex flex-col lg:flex-row gap-2 items-center justify-center",children:[l.jsxs("div",{className:"hidden lg:flex flex-col lg:flex-row gap-2 items-center justify-center",children:[l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx(Un,{heldPiece:t.heldPiece,canHold:t.canHold}),l.jsx(zn,{pieces:t.nextPieces})]}),l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx(gn,{board:t.board,currentPiece:t.currentPiece,dropPreview:a,gameOver:t.gameOver}),l.jsx(gS,{onMove:e.movePiece,onRotate:e.rotatePiece,onHardDrop:e.hardDrop,onPause:t.isPaused?e.resume:e.pause,onHold:e.holdPiece,isPaused:t.isPaused,gameOver:t.gameOver,canHold:t.canHold})]}),l.jsx("div",{className:"flex flex-col gap-2",children:l.jsx(Hn,{score:t.score.points,level:t.score.level,lines:t.score.lines,combo:t.score.combo})})]}),l.jsxs("div",{className:"flex lg:hidden flex-col w-full h-full","data-testid":"mobile-layout",children:[l.jsxs("div",{className:"flex justify-between items-center mb-2 px-2 bg-black/30 rounded-lg mx-2 py-1",children:[l.jsxs("div",{className:"text-white text-sm",children:[l.jsx("span",{className:"text-yellow-400 font-bold",children:t.score.points.toLocaleString()}),l.jsxs("span",{className:"text-white/60 ml-2",children:["Nv.",t.score.level]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[t.heldPiece&&l.jsx("div",{className:"text-xs text-white/60",children:""}),l.jsx("div",{className:"text-xs text-white/60",children:"Prxima:"}),l.jsx("div",{className:"bg-gray-800/50 p-1 rounded",children:t.nextPieces[0]?l.jsx("div",{className:"grid gap-0.5",style:{gridTemplateColumns:`repeat(${Math.max(...t.nextPieces[0].shape.map(x=>x.length))}, 8px)`,gridTemplateRows:`repeat(${t.nextPieces[0].shape.length}, 8px)`},children:t.nextPieces[0].shape.map((x,S)=>x.map((j,k)=>l.jsx("div",{className:"w-2 h-2 rounded-sm",style:{backgroundColor:j?br(t.nextPieces[0].color):"transparent",border:j?"1px solid rgba(255,255,255,0.3)":"none"},children:j&&t.nextPieces[0].emoji?l.jsx("span",{className:"text-[6px] leading-none block text-center",children:t.nextPieces[0].emoji}):null},`next-${k}-${S}`)))}):l.jsx("div",{className:"w-8 h-6 flex items-center justify-center",children:l.jsx("span",{className:"text-xs text-white/40",children:"?"})})})]})]}),l.jsxs("div",{className:"flex items-center justify-center flex-1 relative px-1",children:[l.jsxs("div",{className:"flex flex-col gap-1 mr-2",children:[l.jsx(N.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onTouchStart:()=>e.rotatePiece(),onClick:()=>e.rotatePiece(),disabled:t.gameOver,className:"bg-blue-500 text-white p-4 rounded-full shadow-lg hover:bg-blue-600 disabled:opacity-50 touch-manipulation text-lg",children:""}),l.jsx(N.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onTouchStart:()=>e.movePiece("left"),onClick:()=>e.movePiece("left"),disabled:t.gameOver,className:"bg-gray-600 text-white p-4 rounded-lg shadow-lg hover:bg-gray-700 disabled:opacity-50 touch-manipulation text-lg",children:""})]}),l.jsx("div",{className:"flex-shrink-0 mx-1",children:l.jsx(gn,{board:t.board,currentPiece:t.currentPiece,dropPreview:a,gameOver:t.gameOver})}),l.jsxs("div",{className:"flex flex-col gap-1 ml-2",children:[l.jsx(N.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onTouchStart:h,onClick:h,disabled:t.gameOver||c.hardDrop,className:`text-white p-4 rounded-full shadow-lg disabled:opacity-50 touch-manipulation text-lg ${c.hardDrop?"bg-red-400":"bg-red-500 hover:bg-red-600"}`,children:""}),l.jsx(N.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onTouchStart:()=>e.movePiece("right"),onClick:()=>e.movePiece("right"),disabled:t.gameOver,className:"bg-gray-600 text-white p-4 rounded-lg shadow-lg hover:bg-gray-700 disabled:opacity-50 touch-manipulation text-lg",children:""})]})]}),l.jsxs("div",{className:"flex justify-center gap-2 py-2 px-2",children:[l.jsx(N.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onTouchStart:()=>e.movePiece("down"),onClick:()=>e.movePiece("down"),disabled:t.gameOver,className:"bg-gray-700 text-white px-4 py-2 rounded-lg shadow-lg hover:bg-gray-600 disabled:opacity-50 touch-manipulation",children:" Acelerar"}),t.canHold&&l.jsx(N.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onTouchStart:d,onClick:d,disabled:t.gameOver||!t.canHold||c.hold,className:`text-white px-4 py-2 rounded-lg shadow-lg disabled:opacity-50 touch-manipulation ${c.hold?"bg-green-400":t.canHold?"bg-green-600 hover:bg-green-500":"bg-gray-500"}`,children:" Guardar"}),l.jsx(N.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onTouchStart:f,onClick:f,disabled:t.gameOver||c.pause,className:`text-white px-4 py-2 rounded-lg shadow-lg disabled:opacity-50 touch-manipulation ${c.pause?"bg-yellow-400":"bg-yellow-500 hover:bg-yellow-600"}`,children:t.isPaused?"":""})]})]})]}),l.jsx(xe,{children:t.gameOver&&l.jsx(vS,{score:t.score,onRestart:r,onBackToMenu:n})}),l.jsx(Kb,{isConnected:s,controllerCount:i,gamepadInfo:o()})]})]})}function Jb(){const[t,e]=y.useState("menu"),[n,r]=y.useState(!1),[s,i]=y.useState(!1),[o,a]=y.useState(!1),[c,u]=y.useState(!1),[h,d]=y.useState(!1),[f,g]=y.useState(!1),[v,w]=y.useState(!1),[b,m]=y.useState(!1),[p,x]=y.useState(!1),[S,j]=y.useState(!0),[k,C]=y.useState(!1),[T,E]=y.useState(null),[A,z]=y.useState(null),[Q,F]=y.useState(!1),[H,V]=y.useState(!1),{gameState:L,actions:$}=Bb();ce.useEffect(()=>{Dt.setGameStateProvider(()=>{try{return B.resolve("gameService").getGameState()}catch{return null}})},[]);const{settings:P,updateSettings:M}=Hb(),{startBackgroundMusic:O,startGameMusic:I,stopMusic:q}=$b(),{isGamepadActive:Ve,controllerCount:Re,processGamepadInput:et,getGamepadInfo:W}=Wb($);l0(),u0(),qb(),f0(),p0(),Ub();const X=t==="game",{setDAS:fe,setARR:J}=m0($,L,X);ce.useEffect(()=>{(P==null?void 0:P.das)!=null&&fe(P.das),(P==null?void 0:P.arr)!=null&&J(P.arr)},[P==null?void 0:P.das,P==null?void 0:P.arr,fe,J]),ce.useEffect(()=>{const ee=ge=>{try{B.resolve("gameService").setGameMode(ge.detail.mode)}catch{}};return window.addEventListener("gameModeChanged",ee),()=>window.removeEventListener("gameModeChanged",ee)},[]),ce.useEffect(()=>{L&&!L.gameOver&&L.score.points>0&&L.isPlaying?u(!0):u(!1)},[L]),ce.useEffect(()=>(O&&q&&(P!=null&&P.soundEnabled)?t==="menu"?O():t==="game"&&I():q(),()=>{q()}),[t,P==null?void 0:P.soundEnabled,O,I,q]),ce.useEffect(()=>{if(Ve&&t==="game"){const ee=setInterval(()=>{et()},16);return()=>clearInterval(ee)}},[Ve,t,et]),ce.useEffect(()=>{const ee=bn=>{bn.preventDefault(),a(!0)},ge=()=>{a(!1),i(!1)};return window.addEventListener("beforeinstallprompt",ee),window.addEventListener("appinstalled",ge),window.matchMedia("(display-mode: standalone)").matches&&a(!1),()=>{window.removeEventListener("beforeinstallprompt",ee),window.removeEventListener("appinstalled",ge)}},[]);const Z=ee=>{M(ee),ee.das!=null&&fe(ee.das),ee.arr!=null&&J(ee.arr),ee.soundEnabled?t==="menu"?O==null||O():t==="game"&&(I==null||I()):q==null||q()},tt=()=>{e("game"),P!=null&&P.soundEnabled&&(I==null||I()),L!=null&&L.gameOver?$.restart():L!=null&&L.isPaused?$.resume():L!=null&&L.isPlaying||$.restart()},Us=()=>{e("game"),P!=null&&P.soundEnabled&&(I==null||I()),L!=null&&L.isPaused&&$.resume()},$s=()=>{e("game"),P!=null&&P.soundEnabled&&(I==null||I()),$.restart()},Ws=()=>{$.restart(),e("game")},qs=()=>{e("menu"),P!=null&&P.soundEnabled&&(O==null||O()),L&&!L.gameOver&&$.pause()},Fr=()=>{i(!0)};return H?l.jsx(wb,{onExit:()=>V(!1)}):Q?l.jsx(fb,{onClose:()=>F(!1)}):A?l.jsx(cb,{mode:A.mode,aiDifficulty:A.aiDifficulty,ai1Difficulty:A.ai1Difficulty,ai2Difficulty:A.ai2Difficulty,onExit:()=>{z(null),e("menu")}}):t==="menu"?l.jsxs(l.Fragment,{children:[l.jsx(rb,{onStartGame:c?Us:tt,onNewGame:$s,onShowSettings:()=>r(!0),onShowGameModes:()=>m(!0),onShowShop:()=>w(!0),onShowMissions:()=>d(!0),onShowAchievements:()=>g(!0),onShowMultiplayer:()=>x(!0),onShowTutorial:()=>j(!0),onShowTutorialHub:()=>C(!0),onShowAIShowcase:()=>F(!0),onShowCreatorMode:()=>V(!0),onShowInstallPrompt:Fr,canInstallPWA:o,hasActiveGame:c,gameState:L}),l.jsx(xe,{children:p&&l.jsx(_b,{onClose:()=>x(!1),onStartMatch:ee=>{x(!1),z(ee)}})}),l.jsx(xe,{children:b&&l.jsx(Pb,{onClose:()=>m(!1),onStartGame:$s})}),l.jsx(xe,{children:v&&l.jsx(Tb,{onClose:()=>w(!1)})}),l.jsx(xe,{children:h&&l.jsx(ob,{onClose:()=>d(!1)})}),l.jsx(xe,{children:f&&l.jsx(ab,{onClose:()=>g(!1)})}),l.jsx(xe,{children:k&&l.jsx(Gb,{tutorialService:B.resolve("tutorialService"),onClose:()=>C(!1),onLessonComplete:ee=>{if(!(!ee||!ee.rewards)){try{const ge=B.resolve("currencyService");ee.rewards.fishCoins&&ge.addFish(ee.rewards.fishCoins,`Tutorial: ${ee.lessonTitle||"Lesson"}`)}catch{}try{ee.rewards.xp&&B.resolve("playerStatsService").incrementStat("totalPlayTime",ee.rewards.xp)}catch{}try{if(ee.rewards.achievement){const ge=B.resolve("achievementsService"),bn=B.resolve("playerStatsService");ge.checkAchievements(bn.getStats())}}catch{}E(ee)}}})}),l.jsx(xe,{children:l.jsx(y.Suspense,{fallback:l.jsx(Xb,{}),children:l.jsx(Qb,{isOpen:n,settings:P||{},onSettingsChange:Z,onClose:()=>r(!1)})})}),s&&l.jsx(sb,{onClose:()=>i(!1)}),l.jsx(lb,{}),l.jsx(xe,{children:T&&l.jsx(Vb,{reward:T,onClose:()=>E(null)})})]}):L?l.jsxs(l.Fragment,{children:[l.jsx(Yb,{gameState:L,actions:$,onBackToMenu:qs,onRestart:Ws,isGamepadActive:Ve,controllerCount:Re,getGamepadInfo:W}),l.jsx(xe,{children:S&&l.jsx(Ab,{onComplete:()=>j(!1)})})]}):l.jsx("div",{className:"h-screen cat-bg flex items-center justify-center overflow-hidden",children:l.jsx("div",{className:"text-white text-xl",children:"Carregando..."})})}function Zb(){return l.jsxs(bS,{children:[l.jsx(Jb,{}),l.jsx(ib,{})]})}Ea.createRoot(document.getElementById("root")).render(l.jsx(Zb,{}));export{xe as A,l as j,N as m,y as r};
