var r0=Object.defineProperty;var s0=(e,t,n)=>t in e?r0(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Hs=(e,t,n)=>(s0(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function i0(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var dh={exports:{}},ao={},hh={exports:{}},W={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ms=Symbol.for("react.element"),o0=Symbol.for("react.portal"),a0=Symbol.for("react.fragment"),l0=Symbol.for("react.strict_mode"),c0=Symbol.for("react.profiler"),u0=Symbol.for("react.provider"),d0=Symbol.for("react.context"),h0=Symbol.for("react.forward_ref"),f0=Symbol.for("react.suspense"),m0=Symbol.for("react.memo"),p0=Symbol.for("react.lazy"),Gc=Symbol.iterator;function g0(e){return e===null||typeof e!="object"?null:(e=Gc&&e[Gc]||e["@@iterator"],typeof e=="function"?e:null)}var fh={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},mh=Object.assign,ph={};function Mr(e,t,n){this.props=e,this.context=t,this.refs=ph,this.updater=n||fh}Mr.prototype.isReactComponent={};Mr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Mr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function gh(){}gh.prototype=Mr.prototype;function El(e,t,n){this.props=e,this.context=t,this.refs=ph,this.updater=n||fh}var Nl=El.prototype=new gh;Nl.constructor=El;mh(Nl,Mr.prototype);Nl.isPureReactComponent=!0;var $c=Array.isArray,vh=Object.prototype.hasOwnProperty,_l={current:null},yh={key:!0,ref:!0,__self:!0,__source:!0};function xh(e,t,n){var r,s={},i=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)vh.call(t,r)&&!yh.hasOwnProperty(r)&&(s[r]=t[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var c=Array(a),u=0;u<a;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Ms,type:e,key:i,ref:o,props:s,_owner:_l.current}}function v0(e,t){return{$$typeof:Ms,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Al(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ms}function y0(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Wc=/\/+/g;function Mo(e,t){return typeof e=="object"&&e!==null&&e.key!=null?y0(""+e.key):t.toString(36)}function di(e,t,n,r,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Ms:case o0:o=!0}}if(o)return o=e,s=s(o),e=r===""?"."+Mo(o,0):r,$c(s)?(n="",e!=null&&(n=e.replace(Wc,"$&/")+"/"),di(s,t,n,"",function(u){return u})):s!=null&&(Al(s)&&(s=v0(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Wc,"$&/")+"/")+e)),t.push(s)),1;if(o=0,r=r===""?".":r+":",$c(e))for(var a=0;a<e.length;a++){i=e[a];var c=r+Mo(i,a);o+=di(i,t,n,c,s)}else if(c=g0(e),typeof c=="function")for(e=c.call(e),a=0;!(i=e.next()).done;)i=i.value,c=r+Mo(i,a++),o+=di(i,t,n,c,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Us(e,t,n){if(e==null)return e;var r=[],s=0;return di(e,r,"","",function(i){return t.call(n,i,s++)}),r}function x0(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Be={current:null},hi={transition:null},w0={ReactCurrentDispatcher:Be,ReactCurrentBatchConfig:hi,ReactCurrentOwner:_l};function wh(){throw Error("act(...) is not supported in production builds of React.")}W.Children={map:Us,forEach:function(e,t,n){Us(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Us(e,function(){t++}),t},toArray:function(e){return Us(e,function(t){return t})||[]},only:function(e){if(!Al(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};W.Component=Mr;W.Fragment=a0;W.Profiler=c0;W.PureComponent=El;W.StrictMode=l0;W.Suspense=f0;W.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=w0;W.act=wh;W.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=mh({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=_l.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(c in t)vh.call(t,c)&&!yh.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&a!==void 0?a[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var u=0;u<c;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Ms,type:e.type,key:s,ref:i,props:r,_owner:o}};W.createContext=function(e){return e={$$typeof:d0,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:u0,_context:e},e.Consumer=e};W.createElement=xh;W.createFactory=function(e){var t=xh.bind(null,e);return t.type=e,t};W.createRef=function(){return{current:null}};W.forwardRef=function(e){return{$$typeof:h0,render:e}};W.isValidElement=Al;W.lazy=function(e){return{$$typeof:p0,_payload:{_status:-1,_result:e},_init:x0}};W.memo=function(e,t){return{$$typeof:m0,type:e,compare:t===void 0?null:t}};W.startTransition=function(e){var t=hi.transition;hi.transition={};try{e()}finally{hi.transition=t}};W.unstable_act=wh;W.useCallback=function(e,t){return Be.current.useCallback(e,t)};W.useContext=function(e){return Be.current.useContext(e)};W.useDebugValue=function(){};W.useDeferredValue=function(e){return Be.current.useDeferredValue(e)};W.useEffect=function(e,t){return Be.current.useEffect(e,t)};W.useId=function(){return Be.current.useId()};W.useImperativeHandle=function(e,t,n){return Be.current.useImperativeHandle(e,t,n)};W.useInsertionEffect=function(e,t){return Be.current.useInsertionEffect(e,t)};W.useLayoutEffect=function(e,t){return Be.current.useLayoutEffect(e,t)};W.useMemo=function(e,t){return Be.current.useMemo(e,t)};W.useReducer=function(e,t,n){return Be.current.useReducer(e,t,n)};W.useRef=function(e){return Be.current.useRef(e)};W.useState=function(e){return Be.current.useState(e)};W.useSyncExternalStore=function(e,t,n){return Be.current.useSyncExternalStore(e,t,n)};W.useTransition=function(){return Be.current.useTransition()};W.version="18.3.1";hh.exports=W;var y=hh.exports;const ce=i0(y);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S0=y,b0=Symbol.for("react.element"),k0=Symbol.for("react.fragment"),j0=Object.prototype.hasOwnProperty,C0=S0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,P0={key:!0,ref:!0,__self:!0,__source:!0};function Sh(e,t,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)j0.call(t,r)&&!P0.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:b0,type:e,key:i,ref:o,props:s,_owner:C0.current}}ao.Fragment=k0;ao.jsx=Sh;ao.jsxs=Sh;dh.exports=ao;var l=dh.exports,ba={},bh={exports:{}},tt={},kh={exports:{}},jh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(_,M){var I=_.length;_.push(M);e:for(;0<I;){var V=I-1>>>1,Y=_[V];if(0<s(Y,M))_[V]=M,_[I]=Y,I=V;else break e}}function n(_){return _.length===0?null:_[0]}function r(_){if(_.length===0)return null;var M=_[0],I=_.pop();if(I!==M){_[0]=I;e:for(var V=0,Y=_.length,Qe=Y>>>1;V<Qe;){var Re=2*(V+1)-1,ft=_[Re],$=Re+1,J=_[$];if(0>s(ft,I))$<Y&&0>s(J,ft)?(_[V]=J,_[$]=I,V=$):(_[V]=ft,_[Re]=I,V=Re);else if($<Y&&0>s(J,I))_[V]=J,_[$]=I,V=$;else break e}}return M}function s(_,M){var I=_.sortIndex-M.sortIndex;return I!==0?I:_.id-M.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var c=[],u=[],h=1,d=null,f=3,v=!1,x=!1,S=!1,b=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(_){for(var M=n(u);M!==null;){if(M.callback===null)r(u);else if(M.startTime<=_)r(u),M.sortIndex=M.expirationTime,t(c,M);else break;M=n(u)}}function w(_){if(S=!1,g(_),!x)if(n(c)!==null)x=!0,R(k);else{var M=n(u);M!==null&&te(w,M.startTime-_)}}function k(_,M){x=!1,S&&(S=!1,p(P),P=-1),v=!0;var I=f;try{for(g(M),d=n(c);d!==null&&(!(d.expirationTime>M)||_&&!H());){var V=d.callback;if(typeof V=="function"){d.callback=null,f=d.priorityLevel;var Y=V(d.expirationTime<=M);M=e.unstable_now(),typeof Y=="function"?d.callback=Y:d===n(c)&&r(c),g(M)}else r(c);d=n(c)}if(d!==null)var Qe=!0;else{var Re=n(u);Re!==null&&te(w,Re.startTime-M),Qe=!1}return Qe}finally{d=null,f=I,v=!1}}var j=!1,C=null,P=-1,E=5,A=-1;function H(){return!(e.unstable_now()-A<E)}function X(){if(C!==null){var _=e.unstable_now();A=_;var M=!0;try{M=C(!0,_)}finally{M?q():(j=!1,C=null)}}else j=!1}var q;if(typeof m=="function")q=function(){m(X)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,G=B.port2;B.port1.onmessage=X,q=function(){G.postMessage(null)}}else q=function(){b(X,0)};function R(_){C=_,j||(j=!0,q())}function te(_,M){P=b(function(){_(e.unstable_now())},M)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(_){_.callback=null},e.unstable_continueExecution=function(){x||v||(x=!0,R(k))},e.unstable_forceFrameRate=function(_){0>_||125<_?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<_?Math.floor(1e3/_):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(_){switch(f){case 1:case 2:case 3:var M=3;break;default:M=f}var I=f;f=M;try{return _()}finally{f=I}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(_,M){switch(_){case 1:case 2:case 3:case 4:case 5:break;default:_=3}var I=f;f=_;try{return M()}finally{f=I}},e.unstable_scheduleCallback=function(_,M,I){var V=e.unstable_now();switch(typeof I=="object"&&I!==null?(I=I.delay,I=typeof I=="number"&&0<I?V+I:V):I=V,_){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=I+Y,_={id:h++,callback:M,priorityLevel:_,startTime:I,expirationTime:Y,sortIndex:-1},I>V?(_.sortIndex=I,t(u,_),n(c)===null&&_===n(u)&&(S?(p(P),P=-1):S=!0,te(w,I-V))):(_.sortIndex=Y,t(c,_),x||v||(x=!0,R(k))),_},e.unstable_shouldYield=H,e.unstable_wrapCallback=function(_){var M=f;return function(){var I=f;f=M;try{return _.apply(this,arguments)}finally{f=I}}}})(jh);kh.exports=jh;var T0=kh.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E0=y,Ze=T0;function N(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ch=new Set,hs={};function zn(e,t){gr(e,t),gr(e+"Capture",t)}function gr(e,t){for(hs[e]=t,e=0;e<t.length;e++)Ch.add(t[e])}var Bt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ka=Object.prototype.hasOwnProperty,N0=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Kc={},qc={};function _0(e){return ka.call(qc,e)?!0:ka.call(Kc,e)?!1:N0.test(e)?qc[e]=!0:(Kc[e]=!0,!1)}function A0(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function M0(e,t,n,r){if(t===null||typeof t>"u"||A0(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ze(e,t,n,r,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var Te={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Te[e]=new ze(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Te[t]=new ze(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Te[e]=new ze(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Te[e]=new ze(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Te[e]=new ze(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Te[e]=new ze(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Te[e]=new ze(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Te[e]=new ze(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Te[e]=new ze(e,5,!1,e.toLowerCase(),null,!1,!1)});var Ml=/[\-:]([a-z])/g;function Ll(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Ml,Ll);Te[t]=new ze(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Ml,Ll);Te[t]=new ze(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Ml,Ll);Te[t]=new ze(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Te[e]=new ze(e,1,!1,e.toLowerCase(),null,!1,!1)});Te.xlinkHref=new ze("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Te[e]=new ze(e,1,!1,e.toLowerCase(),null,!0,!0)});function Dl(e,t,n,r){var s=Te.hasOwnProperty(t)?Te[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(M0(t,n,s,r)&&(n=null),r||s===null?_0(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var $t=E0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Gs=Symbol.for("react.element"),Wn=Symbol.for("react.portal"),Kn=Symbol.for("react.fragment"),Rl=Symbol.for("react.strict_mode"),ja=Symbol.for("react.profiler"),Ph=Symbol.for("react.provider"),Th=Symbol.for("react.context"),Il=Symbol.for("react.forward_ref"),Ca=Symbol.for("react.suspense"),Pa=Symbol.for("react.suspense_list"),Ol=Symbol.for("react.memo"),Qt=Symbol.for("react.lazy"),Eh=Symbol.for("react.offscreen"),Qc=Symbol.iterator;function Or(e){return e===null||typeof e!="object"?null:(e=Qc&&e[Qc]||e["@@iterator"],typeof e=="function"?e:null)}var he=Object.assign,Lo;function Kr(e){if(Lo===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Lo=t&&t[1]||""}return`
`+Lo+e}var Do=!1;function Ro(e,t){if(!e||Do)return"";Do=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var c=`
`+s[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=a);break}}}finally{Do=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Kr(e):""}function L0(e){switch(e.tag){case 5:return Kr(e.type);case 16:return Kr("Lazy");case 13:return Kr("Suspense");case 19:return Kr("SuspenseList");case 0:case 2:case 15:return e=Ro(e.type,!1),e;case 11:return e=Ro(e.type.render,!1),e;case 1:return e=Ro(e.type,!0),e;default:return""}}function Ta(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Kn:return"Fragment";case Wn:return"Portal";case ja:return"Profiler";case Rl:return"StrictMode";case Ca:return"Suspense";case Pa:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Th:return(e.displayName||"Context")+".Consumer";case Ph:return(e._context.displayName||"Context")+".Provider";case Il:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ol:return t=e.displayName||null,t!==null?t:Ta(e.type)||"Memo";case Qt:t=e._payload,e=e._init;try{return Ta(e(t))}catch{}}return null}function D0(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ta(t);case 8:return t===Rl?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function fn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Nh(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function R0(e){var t=Nh(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function $s(e){e._valueTracker||(e._valueTracker=R0(e))}function _h(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Nh(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Pi(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ea(e,t){var n=t.checked;return he({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Xc(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=fn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Ah(e,t){t=t.checked,t!=null&&Dl(e,"checked",t,!1)}function Na(e,t){Ah(e,t);var n=fn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?_a(e,t.type,n):t.hasOwnProperty("defaultValue")&&_a(e,t.type,fn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Yc(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function _a(e,t,n){(t!=="number"||Pi(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var qr=Array.isArray;function cr(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+fn(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Aa(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(N(91));return he({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Jc(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(N(92));if(qr(n)){if(1<n.length)throw Error(N(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:fn(n)}}function Mh(e,t){var n=fn(t.value),r=fn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Zc(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Lh(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ma(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Lh(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ws,Dh=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ws=Ws||document.createElement("div"),Ws.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ws.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function fs(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Jr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},I0=["Webkit","ms","Moz","O"];Object.keys(Jr).forEach(function(e){I0.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Jr[t]=Jr[e]})});function Rh(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Jr.hasOwnProperty(e)&&Jr[e]?(""+t).trim():t+"px"}function Ih(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Rh(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var O0=he({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function La(e,t){if(t){if(O0[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(N(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(N(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(N(61))}if(t.style!=null&&typeof t.style!="object")throw Error(N(62))}}function Da(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ra=null;function Fl(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ia=null,ur=null,dr=null;function eu(e){if(e=Rs(e)){if(typeof Ia!="function")throw Error(N(280));var t=e.stateNode;t&&(t=fo(t),Ia(e.stateNode,e.type,t))}}function Oh(e){ur?dr?dr.push(e):dr=[e]:ur=e}function Fh(){if(ur){var e=ur,t=dr;if(dr=ur=null,eu(e),t)for(e=0;e<t.length;e++)eu(t[e])}}function Vh(e,t){return e(t)}function Bh(){}var Io=!1;function zh(e,t,n){if(Io)return e(t,n);Io=!0;try{return Vh(e,t,n)}finally{Io=!1,(ur!==null||dr!==null)&&(Bh(),Fh())}}function ms(e,t){var n=e.stateNode;if(n===null)return null;var r=fo(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(N(231,t,typeof n));return n}var Oa=!1;if(Bt)try{var Fr={};Object.defineProperty(Fr,"passive",{get:function(){Oa=!0}}),window.addEventListener("test",Fr,Fr),window.removeEventListener("test",Fr,Fr)}catch{Oa=!1}function F0(e,t,n,r,s,i,o,a,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(h){this.onError(h)}}var Zr=!1,Ti=null,Ei=!1,Fa=null,V0={onError:function(e){Zr=!0,Ti=e}};function B0(e,t,n,r,s,i,o,a,c){Zr=!1,Ti=null,F0.apply(V0,arguments)}function z0(e,t,n,r,s,i,o,a,c){if(B0.apply(this,arguments),Zr){if(Zr){var u=Ti;Zr=!1,Ti=null}else throw Error(N(198));Ei||(Ei=!0,Fa=u)}}function Hn(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Hh(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function tu(e){if(Hn(e)!==e)throw Error(N(188))}function H0(e){var t=e.alternate;if(!t){if(t=Hn(e),t===null)throw Error(N(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return tu(s),e;if(i===r)return tu(s),t;i=i.sibling}throw Error(N(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(N(189))}}if(n.alternate!==r)throw Error(N(190))}if(n.tag!==3)throw Error(N(188));return n.stateNode.current===n?e:t}function Uh(e){return e=H0(e),e!==null?Gh(e):null}function Gh(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Gh(e);if(t!==null)return t;e=e.sibling}return null}var $h=Ze.unstable_scheduleCallback,nu=Ze.unstable_cancelCallback,U0=Ze.unstable_shouldYield,G0=Ze.unstable_requestPaint,ge=Ze.unstable_now,$0=Ze.unstable_getCurrentPriorityLevel,Vl=Ze.unstable_ImmediatePriority,Wh=Ze.unstable_UserBlockingPriority,Ni=Ze.unstable_NormalPriority,W0=Ze.unstable_LowPriority,Kh=Ze.unstable_IdlePriority,lo=null,Pt=null;function K0(e){if(Pt&&typeof Pt.onCommitFiberRoot=="function")try{Pt.onCommitFiberRoot(lo,e,void 0,(e.current.flags&128)===128)}catch{}}var xt=Math.clz32?Math.clz32:X0,q0=Math.log,Q0=Math.LN2;function X0(e){return e>>>=0,e===0?32:31-(q0(e)/Q0|0)|0}var Ks=64,qs=4194304;function Qr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function _i(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Qr(a):(i&=o,i!==0&&(r=Qr(i)))}else o=n&~s,o!==0?r=Qr(o):i!==0&&(r=Qr(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-xt(t),s=1<<n,r|=e[n],t&=~s;return r}function Y0(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function J0(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-xt(i),a=1<<o,c=s[o];c===-1?(!(a&n)||a&r)&&(s[o]=Y0(a,t)):c<=t&&(e.expiredLanes|=a),i&=~a}}function Va(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function qh(){var e=Ks;return Ks<<=1,!(Ks&4194240)&&(Ks=64),e}function Oo(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ls(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-xt(t),e[t]=n}function Z0(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-xt(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}function Bl(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-xt(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var ee=0;function Qh(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Xh,zl,Yh,Jh,Zh,Ba=!1,Qs=[],nn=null,rn=null,sn=null,ps=new Map,gs=new Map,Jt=[],eg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ru(e,t){switch(e){case"focusin":case"focusout":nn=null;break;case"dragenter":case"dragleave":rn=null;break;case"mouseover":case"mouseout":sn=null;break;case"pointerover":case"pointerout":ps.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":gs.delete(t.pointerId)}}function Vr(e,t,n,r,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},t!==null&&(t=Rs(t),t!==null&&zl(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function tg(e,t,n,r,s){switch(t){case"focusin":return nn=Vr(nn,e,t,n,r,s),!0;case"dragenter":return rn=Vr(rn,e,t,n,r,s),!0;case"mouseover":return sn=Vr(sn,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return ps.set(i,Vr(ps.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,gs.set(i,Vr(gs.get(i)||null,e,t,n,r,s)),!0}return!1}function ef(e){var t=En(e.target);if(t!==null){var n=Hn(t);if(n!==null){if(t=n.tag,t===13){if(t=Hh(n),t!==null){e.blockedOn=t,Zh(e.priority,function(){Yh(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function fi(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=za(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Ra=r,n.target.dispatchEvent(r),Ra=null}else return t=Rs(n),t!==null&&zl(t),e.blockedOn=n,!1;t.shift()}return!0}function su(e,t,n){fi(e)&&n.delete(t)}function ng(){Ba=!1,nn!==null&&fi(nn)&&(nn=null),rn!==null&&fi(rn)&&(rn=null),sn!==null&&fi(sn)&&(sn=null),ps.forEach(su),gs.forEach(su)}function Br(e,t){e.blockedOn===t&&(e.blockedOn=null,Ba||(Ba=!0,Ze.unstable_scheduleCallback(Ze.unstable_NormalPriority,ng)))}function vs(e){function t(s){return Br(s,e)}if(0<Qs.length){Br(Qs[0],e);for(var n=1;n<Qs.length;n++){var r=Qs[n];r.blockedOn===e&&(r.blockedOn=null)}}for(nn!==null&&Br(nn,e),rn!==null&&Br(rn,e),sn!==null&&Br(sn,e),ps.forEach(t),gs.forEach(t),n=0;n<Jt.length;n++)r=Jt[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Jt.length&&(n=Jt[0],n.blockedOn===null);)ef(n),n.blockedOn===null&&Jt.shift()}var hr=$t.ReactCurrentBatchConfig,Ai=!0;function rg(e,t,n,r){var s=ee,i=hr.transition;hr.transition=null;try{ee=1,Hl(e,t,n,r)}finally{ee=s,hr.transition=i}}function sg(e,t,n,r){var s=ee,i=hr.transition;hr.transition=null;try{ee=4,Hl(e,t,n,r)}finally{ee=s,hr.transition=i}}function Hl(e,t,n,r){if(Ai){var s=za(e,t,n,r);if(s===null)Ko(e,t,r,Mi,n),ru(e,r);else if(tg(s,e,t,n,r))r.stopPropagation();else if(ru(e,r),t&4&&-1<eg.indexOf(e)){for(;s!==null;){var i=Rs(s);if(i!==null&&Xh(i),i=za(e,t,n,r),i===null&&Ko(e,t,r,Mi,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Ko(e,t,r,null,n)}}var Mi=null;function za(e,t,n,r){if(Mi=null,e=Fl(r),e=En(e),e!==null)if(t=Hn(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Hh(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Mi=e,null}function tf(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($0()){case Vl:return 1;case Wh:return 4;case Ni:case W0:return 16;case Kh:return 536870912;default:return 16}default:return 16}}var en=null,Ul=null,mi=null;function nf(){if(mi)return mi;var e,t=Ul,n=t.length,r,s="value"in en?en.value:en.textContent,i=s.length;for(e=0;e<n&&t[e]===s[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===s[i-r];r++);return mi=s.slice(e,1<r?1-r:void 0)}function pi(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Xs(){return!0}function iu(){return!1}function nt(e){function t(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Xs:iu,this.isPropagationStopped=iu,this}return he(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Xs)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Xs)},persist:function(){},isPersistent:Xs}),t}var Lr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Gl=nt(Lr),Ds=he({},Lr,{view:0,detail:0}),ig=nt(Ds),Fo,Vo,zr,co=he({},Ds,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$l,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==zr&&(zr&&e.type==="mousemove"?(Fo=e.screenX-zr.screenX,Vo=e.screenY-zr.screenY):Vo=Fo=0,zr=e),Fo)},movementY:function(e){return"movementY"in e?e.movementY:Vo}}),ou=nt(co),og=he({},co,{dataTransfer:0}),ag=nt(og),lg=he({},Ds,{relatedTarget:0}),Bo=nt(lg),cg=he({},Lr,{animationName:0,elapsedTime:0,pseudoElement:0}),ug=nt(cg),dg=he({},Lr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),hg=nt(dg),fg=he({},Lr,{data:0}),au=nt(fg),mg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vg(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=gg[e])?!!t[e]:!1}function $l(){return vg}var yg=he({},Ds,{key:function(e){if(e.key){var t=mg[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=pi(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?pg[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$l,charCode:function(e){return e.type==="keypress"?pi(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?pi(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),xg=nt(yg),wg=he({},co,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),lu=nt(wg),Sg=he({},Ds,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$l}),bg=nt(Sg),kg=he({},Lr,{propertyName:0,elapsedTime:0,pseudoElement:0}),jg=nt(kg),Cg=he({},co,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pg=nt(Cg),Tg=[9,13,27,32],Wl=Bt&&"CompositionEvent"in window,es=null;Bt&&"documentMode"in document&&(es=document.documentMode);var Eg=Bt&&"TextEvent"in window&&!es,rf=Bt&&(!Wl||es&&8<es&&11>=es),cu=String.fromCharCode(32),uu=!1;function sf(e,t){switch(e){case"keyup":return Tg.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function of(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var qn=!1;function Ng(e,t){switch(e){case"compositionend":return of(t);case"keypress":return t.which!==32?null:(uu=!0,cu);case"textInput":return e=t.data,e===cu&&uu?null:e;default:return null}}function _g(e,t){if(qn)return e==="compositionend"||!Wl&&sf(e,t)?(e=nf(),mi=Ul=en=null,qn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return rf&&t.locale!=="ko"?null:t.data;default:return null}}var Ag={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function du(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Ag[e.type]:t==="textarea"}function af(e,t,n,r){Oh(r),t=Li(t,"onChange"),0<t.length&&(n=new Gl("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var ts=null,ys=null;function Mg(e){yf(e,0)}function uo(e){var t=Yn(e);if(_h(t))return e}function Lg(e,t){if(e==="change")return t}var lf=!1;if(Bt){var zo;if(Bt){var Ho="oninput"in document;if(!Ho){var hu=document.createElement("div");hu.setAttribute("oninput","return;"),Ho=typeof hu.oninput=="function"}zo=Ho}else zo=!1;lf=zo&&(!document.documentMode||9<document.documentMode)}function fu(){ts&&(ts.detachEvent("onpropertychange",cf),ys=ts=null)}function cf(e){if(e.propertyName==="value"&&uo(ys)){var t=[];af(t,ys,e,Fl(e)),zh(Mg,t)}}function Dg(e,t,n){e==="focusin"?(fu(),ts=t,ys=n,ts.attachEvent("onpropertychange",cf)):e==="focusout"&&fu()}function Rg(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return uo(ys)}function Ig(e,t){if(e==="click")return uo(t)}function Og(e,t){if(e==="input"||e==="change")return uo(t)}function Fg(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var St=typeof Object.is=="function"?Object.is:Fg;function xs(e,t){if(St(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!ka.call(t,s)||!St(e[s],t[s]))return!1}return!0}function mu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function pu(e,t){var n=mu(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=mu(n)}}function uf(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?uf(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function df(){for(var e=window,t=Pi();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Pi(e.document)}return t}function Kl(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Vg(e){var t=df(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&uf(n.ownerDocument.documentElement,n)){if(r!==null&&Kl(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=pu(n,i);var o=pu(n,r);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Bg=Bt&&"documentMode"in document&&11>=document.documentMode,Qn=null,Ha=null,ns=null,Ua=!1;function gu(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ua||Qn==null||Qn!==Pi(r)||(r=Qn,"selectionStart"in r&&Kl(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ns&&xs(ns,r)||(ns=r,r=Li(Ha,"onSelect"),0<r.length&&(t=new Gl("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Qn)))}function Ys(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Xn={animationend:Ys("Animation","AnimationEnd"),animationiteration:Ys("Animation","AnimationIteration"),animationstart:Ys("Animation","AnimationStart"),transitionend:Ys("Transition","TransitionEnd")},Uo={},hf={};Bt&&(hf=document.createElement("div").style,"AnimationEvent"in window||(delete Xn.animationend.animation,delete Xn.animationiteration.animation,delete Xn.animationstart.animation),"TransitionEvent"in window||delete Xn.transitionend.transition);function ho(e){if(Uo[e])return Uo[e];if(!Xn[e])return e;var t=Xn[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in hf)return Uo[e]=t[n];return e}var ff=ho("animationend"),mf=ho("animationiteration"),pf=ho("animationstart"),gf=ho("transitionend"),vf=new Map,vu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function vn(e,t){vf.set(e,t),zn(t,[e])}for(var Go=0;Go<vu.length;Go++){var $o=vu[Go],zg=$o.toLowerCase(),Hg=$o[0].toUpperCase()+$o.slice(1);vn(zg,"on"+Hg)}vn(ff,"onAnimationEnd");vn(mf,"onAnimationIteration");vn(pf,"onAnimationStart");vn("dblclick","onDoubleClick");vn("focusin","onFocus");vn("focusout","onBlur");vn(gf,"onTransitionEnd");gr("onMouseEnter",["mouseout","mouseover"]);gr("onMouseLeave",["mouseout","mouseover"]);gr("onPointerEnter",["pointerout","pointerover"]);gr("onPointerLeave",["pointerout","pointerover"]);zn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));zn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));zn("onBeforeInput",["compositionend","keypress","textInput","paste"]);zn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));zn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));zn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ug=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xr));function yu(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,z0(r,t,void 0,e),e.currentTarget=null}function yf(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,u=a.currentTarget;if(a=a.listener,c!==i&&s.isPropagationStopped())break e;yu(s,a,u),i=c}else for(o=0;o<r.length;o++){if(a=r[o],c=a.instance,u=a.currentTarget,a=a.listener,c!==i&&s.isPropagationStopped())break e;yu(s,a,u),i=c}}}if(Ei)throw e=Fa,Ei=!1,Fa=null,e}function se(e,t){var n=t[qa];n===void 0&&(n=t[qa]=new Set);var r=e+"__bubble";n.has(r)||(xf(t,e,2,!1),n.add(r))}function Wo(e,t,n){var r=0;t&&(r|=4),xf(n,e,r,t)}var Js="_reactListening"+Math.random().toString(36).slice(2);function ws(e){if(!e[Js]){e[Js]=!0,Ch.forEach(function(n){n!=="selectionchange"&&(Ug.has(n)||Wo(n,!1,e),Wo(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Js]||(t[Js]=!0,Wo("selectionchange",!1,t))}}function xf(e,t,n,r){switch(tf(t)){case 1:var s=rg;break;case 4:s=sg;break;default:s=Hl}n=s.bind(null,t,n,e),s=void 0,!Oa||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Ko(e,t,n,r,s){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;a!==null;){if(o=En(a),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}a=a.parentNode}}r=r.return}zh(function(){var u=i,h=Fl(n),d=[];e:{var f=vf.get(e);if(f!==void 0){var v=Gl,x=e;switch(e){case"keypress":if(pi(n)===0)break e;case"keydown":case"keyup":v=xg;break;case"focusin":x="focus",v=Bo;break;case"focusout":x="blur",v=Bo;break;case"beforeblur":case"afterblur":v=Bo;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=ou;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=ag;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=bg;break;case ff:case mf:case pf:v=ug;break;case gf:v=jg;break;case"scroll":v=ig;break;case"wheel":v=Pg;break;case"copy":case"cut":case"paste":v=hg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=lu}var S=(t&4)!==0,b=!S&&e==="scroll",p=S?f!==null?f+"Capture":null:f;S=[];for(var m=u,g;m!==null;){g=m;var w=g.stateNode;if(g.tag===5&&w!==null&&(g=w,p!==null&&(w=ms(m,p),w!=null&&S.push(Ss(m,w,g)))),b)break;m=m.return}0<S.length&&(f=new v(f,x,null,n,h),d.push({event:f,listeners:S}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",v=e==="mouseout"||e==="pointerout",f&&n!==Ra&&(x=n.relatedTarget||n.fromElement)&&(En(x)||x[zt]))break e;if((v||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,v?(x=n.relatedTarget||n.toElement,v=u,x=x?En(x):null,x!==null&&(b=Hn(x),x!==b||x.tag!==5&&x.tag!==6)&&(x=null)):(v=null,x=u),v!==x)){if(S=ou,w="onMouseLeave",p="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(S=lu,w="onPointerLeave",p="onPointerEnter",m="pointer"),b=v==null?f:Yn(v),g=x==null?f:Yn(x),f=new S(w,m+"leave",v,n,h),f.target=b,f.relatedTarget=g,w=null,En(h)===u&&(S=new S(p,m+"enter",x,n,h),S.target=g,S.relatedTarget=b,w=S),b=w,v&&x)t:{for(S=v,p=x,m=0,g=S;g;g=$n(g))m++;for(g=0,w=p;w;w=$n(w))g++;for(;0<m-g;)S=$n(S),m--;for(;0<g-m;)p=$n(p),g--;for(;m--;){if(S===p||p!==null&&S===p.alternate)break t;S=$n(S),p=$n(p)}S=null}else S=null;v!==null&&xu(d,f,v,S,!1),x!==null&&b!==null&&xu(d,b,x,S,!0)}}e:{if(f=u?Yn(u):window,v=f.nodeName&&f.nodeName.toLowerCase(),v==="select"||v==="input"&&f.type==="file")var k=Lg;else if(du(f))if(lf)k=Og;else{k=Rg;var j=Dg}else(v=f.nodeName)&&v.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(k=Ig);if(k&&(k=k(e,u))){af(d,k,n,h);break e}j&&j(e,f,u),e==="focusout"&&(j=f._wrapperState)&&j.controlled&&f.type==="number"&&_a(f,"number",f.value)}switch(j=u?Yn(u):window,e){case"focusin":(du(j)||j.contentEditable==="true")&&(Qn=j,Ha=u,ns=null);break;case"focusout":ns=Ha=Qn=null;break;case"mousedown":Ua=!0;break;case"contextmenu":case"mouseup":case"dragend":Ua=!1,gu(d,n,h);break;case"selectionchange":if(Bg)break;case"keydown":case"keyup":gu(d,n,h)}var C;if(Wl)e:{switch(e){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else qn?sf(e,n)&&(P="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(P="onCompositionStart");P&&(rf&&n.locale!=="ko"&&(qn||P!=="onCompositionStart"?P==="onCompositionEnd"&&qn&&(C=nf()):(en=h,Ul="value"in en?en.value:en.textContent,qn=!0)),j=Li(u,P),0<j.length&&(P=new au(P,e,null,n,h),d.push({event:P,listeners:j}),C?P.data=C:(C=of(n),C!==null&&(P.data=C)))),(C=Eg?Ng(e,n):_g(e,n))&&(u=Li(u,"onBeforeInput"),0<u.length&&(h=new au("onBeforeInput","beforeinput",null,n,h),d.push({event:h,listeners:u}),h.data=C))}yf(d,t)})}function Ss(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Li(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=ms(e,n),i!=null&&r.unshift(Ss(e,i,s)),i=ms(e,t),i!=null&&r.push(Ss(e,i,s))),e=e.return}return r}function $n(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function xu(e,t,n,r,s){for(var i=t._reactName,o=[];n!==null&&n!==r;){var a=n,c=a.alternate,u=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&u!==null&&(a=u,s?(c=ms(n,i),c!=null&&o.unshift(Ss(n,c,a))):s||(c=ms(n,i),c!=null&&o.push(Ss(n,c,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var Gg=/\r\n?/g,$g=/\u0000|\uFFFD/g;function wu(e){return(typeof e=="string"?e:""+e).replace(Gg,`
`).replace($g,"")}function Zs(e,t,n){if(t=wu(t),wu(e)!==t&&n)throw Error(N(425))}function Di(){}var Ga=null,$a=null;function Wa(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ka=typeof setTimeout=="function"?setTimeout:void 0,Wg=typeof clearTimeout=="function"?clearTimeout:void 0,Su=typeof Promise=="function"?Promise:void 0,Kg=typeof queueMicrotask=="function"?queueMicrotask:typeof Su<"u"?function(e){return Su.resolve(null).then(e).catch(qg)}:Ka;function qg(e){setTimeout(function(){throw e})}function qo(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),vs(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);vs(t)}function on(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function bu(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Dr=Math.random().toString(36).slice(2),Ct="__reactFiber$"+Dr,bs="__reactProps$"+Dr,zt="__reactContainer$"+Dr,qa="__reactEvents$"+Dr,Qg="__reactListeners$"+Dr,Xg="__reactHandles$"+Dr;function En(e){var t=e[Ct];if(t)return t;for(var n=e.parentNode;n;){if(t=n[zt]||n[Ct]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=bu(e);e!==null;){if(n=e[Ct])return n;e=bu(e)}return t}e=n,n=e.parentNode}return null}function Rs(e){return e=e[Ct]||e[zt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Yn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(N(33))}function fo(e){return e[bs]||null}var Qa=[],Jn=-1;function yn(e){return{current:e}}function ie(e){0>Jn||(e.current=Qa[Jn],Qa[Jn]=null,Jn--)}function ne(e,t){Jn++,Qa[Jn]=e.current,e.current=t}var mn={},De=yn(mn),$e=yn(!1),Dn=mn;function vr(e,t){var n=e.type.contextTypes;if(!n)return mn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function We(e){return e=e.childContextTypes,e!=null}function Ri(){ie($e),ie(De)}function ku(e,t,n){if(De.current!==mn)throw Error(N(168));ne(De,t),ne($e,n)}function wf(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(N(108,D0(e)||"Unknown",s));return he({},n,r)}function Ii(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||mn,Dn=De.current,ne(De,e),ne($e,$e.current),!0}function ju(e,t,n){var r=e.stateNode;if(!r)throw Error(N(169));n?(e=wf(e,t,Dn),r.__reactInternalMemoizedMergedChildContext=e,ie($e),ie(De),ne(De,e)):ie($e),ne($e,n)}var _t=null,mo=!1,Qo=!1;function Sf(e){_t===null?_t=[e]:_t.push(e)}function Yg(e){mo=!0,Sf(e)}function xn(){if(!Qo&&_t!==null){Qo=!0;var e=0,t=ee;try{var n=_t;for(ee=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}_t=null,mo=!1}catch(s){throw _t!==null&&(_t=_t.slice(e+1)),$h(Vl,xn),s}finally{ee=t,Qo=!1}}return null}var Zn=[],er=0,Oi=null,Fi=0,ot=[],at=0,Rn=null,Lt=1,Dt="";function kn(e,t){Zn[er++]=Fi,Zn[er++]=Oi,Oi=e,Fi=t}function bf(e,t,n){ot[at++]=Lt,ot[at++]=Dt,ot[at++]=Rn,Rn=e;var r=Lt;e=Dt;var s=32-xt(r)-1;r&=~(1<<s),n+=1;var i=32-xt(t)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Lt=1<<32-xt(t)+s|n<<s|r,Dt=i+e}else Lt=1<<i|n<<s|r,Dt=e}function ql(e){e.return!==null&&(kn(e,1),bf(e,1,0))}function Ql(e){for(;e===Oi;)Oi=Zn[--er],Zn[er]=null,Fi=Zn[--er],Zn[er]=null;for(;e===Rn;)Rn=ot[--at],ot[at]=null,Dt=ot[--at],ot[at]=null,Lt=ot[--at],ot[at]=null}var Je=null,Ye=null,ae=!1,yt=null;function kf(e,t){var n=lt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Cu(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Je=e,Ye=on(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Je=e,Ye=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Rn!==null?{id:Lt,overflow:Dt}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=lt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Je=e,Ye=null,!0):!1;default:return!1}}function Xa(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ya(e){if(ae){var t=Ye;if(t){var n=t;if(!Cu(e,t)){if(Xa(e))throw Error(N(418));t=on(n.nextSibling);var r=Je;t&&Cu(e,t)?kf(r,n):(e.flags=e.flags&-4097|2,ae=!1,Je=e)}}else{if(Xa(e))throw Error(N(418));e.flags=e.flags&-4097|2,ae=!1,Je=e}}}function Pu(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Je=e}function ei(e){if(e!==Je)return!1;if(!ae)return Pu(e),ae=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Wa(e.type,e.memoizedProps)),t&&(t=Ye)){if(Xa(e))throw jf(),Error(N(418));for(;t;)kf(e,t),t=on(t.nextSibling)}if(Pu(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(N(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Ye=on(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Ye=null}}else Ye=Je?on(e.stateNode.nextSibling):null;return!0}function jf(){for(var e=Ye;e;)e=on(e.nextSibling)}function yr(){Ye=Je=null,ae=!1}function Xl(e){yt===null?yt=[e]:yt.push(e)}var Jg=$t.ReactCurrentBatchConfig;function Hr(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(N(309));var r=n.stateNode}if(!r)throw Error(N(147,e));var s=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(N(284));if(!n._owner)throw Error(N(290,e))}return e}function ti(e,t){throw e=Object.prototype.toString.call(t),Error(N(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Tu(e){var t=e._init;return t(e._payload)}function Cf(e){function t(p,m){if(e){var g=p.deletions;g===null?(p.deletions=[m],p.flags|=16):g.push(m)}}function n(p,m){if(!e)return null;for(;m!==null;)t(p,m),m=m.sibling;return null}function r(p,m){for(p=new Map;m!==null;)m.key!==null?p.set(m.key,m):p.set(m.index,m),m=m.sibling;return p}function s(p,m){return p=un(p,m),p.index=0,p.sibling=null,p}function i(p,m,g){return p.index=g,e?(g=p.alternate,g!==null?(g=g.index,g<m?(p.flags|=2,m):g):(p.flags|=2,m)):(p.flags|=1048576,m)}function o(p){return e&&p.alternate===null&&(p.flags|=2),p}function a(p,m,g,w){return m===null||m.tag!==6?(m=na(g,p.mode,w),m.return=p,m):(m=s(m,g),m.return=p,m)}function c(p,m,g,w){var k=g.type;return k===Kn?h(p,m,g.props.children,w,g.key):m!==null&&(m.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Qt&&Tu(k)===m.type)?(w=s(m,g.props),w.ref=Hr(p,m,g),w.return=p,w):(w=bi(g.type,g.key,g.props,null,p.mode,w),w.ref=Hr(p,m,g),w.return=p,w)}function u(p,m,g,w){return m===null||m.tag!==4||m.stateNode.containerInfo!==g.containerInfo||m.stateNode.implementation!==g.implementation?(m=ra(g,p.mode,w),m.return=p,m):(m=s(m,g.children||[]),m.return=p,m)}function h(p,m,g,w,k){return m===null||m.tag!==7?(m=Ln(g,p.mode,w,k),m.return=p,m):(m=s(m,g),m.return=p,m)}function d(p,m,g){if(typeof m=="string"&&m!==""||typeof m=="number")return m=na(""+m,p.mode,g),m.return=p,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Gs:return g=bi(m.type,m.key,m.props,null,p.mode,g),g.ref=Hr(p,null,m),g.return=p,g;case Wn:return m=ra(m,p.mode,g),m.return=p,m;case Qt:var w=m._init;return d(p,w(m._payload),g)}if(qr(m)||Or(m))return m=Ln(m,p.mode,g,null),m.return=p,m;ti(p,m)}return null}function f(p,m,g,w){var k=m!==null?m.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return k!==null?null:a(p,m,""+g,w);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Gs:return g.key===k?c(p,m,g,w):null;case Wn:return g.key===k?u(p,m,g,w):null;case Qt:return k=g._init,f(p,m,k(g._payload),w)}if(qr(g)||Or(g))return k!==null?null:h(p,m,g,w,null);ti(p,g)}return null}function v(p,m,g,w,k){if(typeof w=="string"&&w!==""||typeof w=="number")return p=p.get(g)||null,a(m,p,""+w,k);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Gs:return p=p.get(w.key===null?g:w.key)||null,c(m,p,w,k);case Wn:return p=p.get(w.key===null?g:w.key)||null,u(m,p,w,k);case Qt:var j=w._init;return v(p,m,g,j(w._payload),k)}if(qr(w)||Or(w))return p=p.get(g)||null,h(m,p,w,k,null);ti(m,w)}return null}function x(p,m,g,w){for(var k=null,j=null,C=m,P=m=0,E=null;C!==null&&P<g.length;P++){C.index>P?(E=C,C=null):E=C.sibling;var A=f(p,C,g[P],w);if(A===null){C===null&&(C=E);break}e&&C&&A.alternate===null&&t(p,C),m=i(A,m,P),j===null?k=A:j.sibling=A,j=A,C=E}if(P===g.length)return n(p,C),ae&&kn(p,P),k;if(C===null){for(;P<g.length;P++)C=d(p,g[P],w),C!==null&&(m=i(C,m,P),j===null?k=C:j.sibling=C,j=C);return ae&&kn(p,P),k}for(C=r(p,C);P<g.length;P++)E=v(C,p,P,g[P],w),E!==null&&(e&&E.alternate!==null&&C.delete(E.key===null?P:E.key),m=i(E,m,P),j===null?k=E:j.sibling=E,j=E);return e&&C.forEach(function(H){return t(p,H)}),ae&&kn(p,P),k}function S(p,m,g,w){var k=Or(g);if(typeof k!="function")throw Error(N(150));if(g=k.call(g),g==null)throw Error(N(151));for(var j=k=null,C=m,P=m=0,E=null,A=g.next();C!==null&&!A.done;P++,A=g.next()){C.index>P?(E=C,C=null):E=C.sibling;var H=f(p,C,A.value,w);if(H===null){C===null&&(C=E);break}e&&C&&H.alternate===null&&t(p,C),m=i(H,m,P),j===null?k=H:j.sibling=H,j=H,C=E}if(A.done)return n(p,C),ae&&kn(p,P),k;if(C===null){for(;!A.done;P++,A=g.next())A=d(p,A.value,w),A!==null&&(m=i(A,m,P),j===null?k=A:j.sibling=A,j=A);return ae&&kn(p,P),k}for(C=r(p,C);!A.done;P++,A=g.next())A=v(C,p,P,A.value,w),A!==null&&(e&&A.alternate!==null&&C.delete(A.key===null?P:A.key),m=i(A,m,P),j===null?k=A:j.sibling=A,j=A);return e&&C.forEach(function(X){return t(p,X)}),ae&&kn(p,P),k}function b(p,m,g,w){if(typeof g=="object"&&g!==null&&g.type===Kn&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case Gs:e:{for(var k=g.key,j=m;j!==null;){if(j.key===k){if(k=g.type,k===Kn){if(j.tag===7){n(p,j.sibling),m=s(j,g.props.children),m.return=p,p=m;break e}}else if(j.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Qt&&Tu(k)===j.type){n(p,j.sibling),m=s(j,g.props),m.ref=Hr(p,j,g),m.return=p,p=m;break e}n(p,j);break}else t(p,j);j=j.sibling}g.type===Kn?(m=Ln(g.props.children,p.mode,w,g.key),m.return=p,p=m):(w=bi(g.type,g.key,g.props,null,p.mode,w),w.ref=Hr(p,m,g),w.return=p,p=w)}return o(p);case Wn:e:{for(j=g.key;m!==null;){if(m.key===j)if(m.tag===4&&m.stateNode.containerInfo===g.containerInfo&&m.stateNode.implementation===g.implementation){n(p,m.sibling),m=s(m,g.children||[]),m.return=p,p=m;break e}else{n(p,m);break}else t(p,m);m=m.sibling}m=ra(g,p.mode,w),m.return=p,p=m}return o(p);case Qt:return j=g._init,b(p,m,j(g._payload),w)}if(qr(g))return x(p,m,g,w);if(Or(g))return S(p,m,g,w);ti(p,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,m!==null&&m.tag===6?(n(p,m.sibling),m=s(m,g),m.return=p,p=m):(n(p,m),m=na(g,p.mode,w),m.return=p,p=m),o(p)):n(p,m)}return b}var xr=Cf(!0),Pf=Cf(!1),Vi=yn(null),Bi=null,tr=null,Yl=null;function Jl(){Yl=tr=Bi=null}function Zl(e){var t=Vi.current;ie(Vi),e._currentValue=t}function Ja(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function fr(e,t){Bi=e,Yl=tr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ge=!0),e.firstContext=null)}function dt(e){var t=e._currentValue;if(Yl!==e)if(e={context:e,memoizedValue:t,next:null},tr===null){if(Bi===null)throw Error(N(308));tr=e,Bi.dependencies={lanes:0,firstContext:e}}else tr=tr.next=e;return t}var Nn=null;function ec(e){Nn===null?Nn=[e]:Nn.push(e)}function Tf(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,ec(t)):(n.next=s.next,s.next=n),t.interleaved=n,Ht(e,r)}function Ht(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Xt=!1;function tc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ef(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ot(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function an(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Q&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Ht(e,n)}return s=r.interleaved,s===null?(t.next=t,ec(r)):(t.next=s.next,s.next=t),r.interleaved=t,Ht(e,n)}function gi(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Bl(e,n)}}function Eu(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=t:i=i.next=t}else s=i=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function zi(e,t,n,r){var s=e.updateQueue;Xt=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var c=a,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var h=e.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=u:a.next=u,h.lastBaseUpdate=c))}if(i!==null){var d=s.baseState;o=0,h=u=c=null,a=i;do{var f=a.lane,v=a.eventTime;if((r&f)===f){h!==null&&(h=h.next={eventTime:v,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var x=e,S=a;switch(f=t,v=n,S.tag){case 1:if(x=S.payload,typeof x=="function"){d=x.call(v,d,f);break e}d=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=S.payload,f=typeof x=="function"?x.call(v,d,f):x,f==null)break e;d=he({},d,f);break e;case 2:Xt=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else v={eventTime:v,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(u=h=v,c=d):h=h.next=v,o|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(1);if(h===null&&(c=d),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=h,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);On|=o,e.lanes=o,e.memoizedState=d}}function Nu(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(N(191,s));s.call(r)}}}var Is={},Tt=yn(Is),ks=yn(Is),js=yn(Is);function _n(e){if(e===Is)throw Error(N(174));return e}function nc(e,t){switch(ne(js,t),ne(ks,e),ne(Tt,Is),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ma(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ma(t,e)}ie(Tt),ne(Tt,t)}function wr(){ie(Tt),ie(ks),ie(js)}function Nf(e){_n(js.current);var t=_n(Tt.current),n=Ma(t,e.type);t!==n&&(ne(ks,e),ne(Tt,n))}function rc(e){ks.current===e&&(ie(Tt),ie(ks))}var le=yn(0);function Hi(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Xo=[];function sc(){for(var e=0;e<Xo.length;e++)Xo[e]._workInProgressVersionPrimary=null;Xo.length=0}var vi=$t.ReactCurrentDispatcher,Yo=$t.ReactCurrentBatchConfig,In=0,de=null,we=null,be=null,Ui=!1,rs=!1,Cs=0,Zg=0;function Ee(){throw Error(N(321))}function ic(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!St(e[n],t[n]))return!1;return!0}function oc(e,t,n,r,s,i){if(In=i,de=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,vi.current=e===null||e.memoizedState===null?rv:sv,e=n(r,s),rs){i=0;do{if(rs=!1,Cs=0,25<=i)throw Error(N(301));i+=1,be=we=null,t.updateQueue=null,vi.current=iv,e=n(r,s)}while(rs)}if(vi.current=Gi,t=we!==null&&we.next!==null,In=0,be=we=de=null,Ui=!1,t)throw Error(N(300));return e}function ac(){var e=Cs!==0;return Cs=0,e}function jt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return be===null?de.memoizedState=be=e:be=be.next=e,be}function ht(){if(we===null){var e=de.alternate;e=e!==null?e.memoizedState:null}else e=we.next;var t=be===null?de.memoizedState:be.next;if(t!==null)be=t,we=e;else{if(e===null)throw Error(N(310));we=e,e={memoizedState:we.memoizedState,baseState:we.baseState,baseQueue:we.baseQueue,queue:we.queue,next:null},be===null?de.memoizedState=be=e:be=be.next=e}return be}function Ps(e,t){return typeof t=="function"?t(e):t}function Jo(e){var t=ht(),n=t.queue;if(n===null)throw Error(N(311));n.lastRenderedReducer=e;var r=we,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,c=null,u=i;do{var h=u.lane;if((In&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(a=c=d,o=r):c=c.next=d,de.lanes|=h,On|=h}u=u.next}while(u!==null&&u!==i);c===null?o=r:c.next=a,St(r,t.memoizedState)||(Ge=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do i=s.lane,de.lanes|=i,On|=i,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Zo(e){var t=ht(),n=t.queue;if(n===null)throw Error(N(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);St(i,t.memoizedState)||(Ge=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function _f(){}function Af(e,t){var n=de,r=ht(),s=t(),i=!St(r.memoizedState,s);if(i&&(r.memoizedState=s,Ge=!0),r=r.queue,lc(Df.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||be!==null&&be.memoizedState.tag&1){if(n.flags|=2048,Ts(9,Lf.bind(null,n,r,s,t),void 0,null),ke===null)throw Error(N(349));In&30||Mf(n,t,s)}return s}function Mf(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=de.updateQueue,t===null?(t={lastEffect:null,stores:null},de.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Lf(e,t,n,r){t.value=n,t.getSnapshot=r,Rf(t)&&If(e)}function Df(e,t,n){return n(function(){Rf(t)&&If(e)})}function Rf(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!St(e,n)}catch{return!0}}function If(e){var t=Ht(e,1);t!==null&&wt(t,e,1,-1)}function _u(e){var t=jt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ps,lastRenderedState:e},t.queue=e,e=e.dispatch=nv.bind(null,de,e),[t.memoizedState,e]}function Ts(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=de.updateQueue,t===null?(t={lastEffect:null,stores:null},de.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Of(){return ht().memoizedState}function yi(e,t,n,r){var s=jt();de.flags|=e,s.memoizedState=Ts(1|t,n,void 0,r===void 0?null:r)}function po(e,t,n,r){var s=ht();r=r===void 0?null:r;var i=void 0;if(we!==null){var o=we.memoizedState;if(i=o.destroy,r!==null&&ic(r,o.deps)){s.memoizedState=Ts(t,n,i,r);return}}de.flags|=e,s.memoizedState=Ts(1|t,n,i,r)}function Au(e,t){return yi(8390656,8,e,t)}function lc(e,t){return po(2048,8,e,t)}function Ff(e,t){return po(4,2,e,t)}function Vf(e,t){return po(4,4,e,t)}function Bf(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function zf(e,t,n){return n=n!=null?n.concat([e]):null,po(4,4,Bf.bind(null,t,e),n)}function cc(){}function Hf(e,t){var n=ht();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&ic(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Uf(e,t){var n=ht();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&ic(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Gf(e,t,n){return In&21?(St(n,t)||(n=qh(),de.lanes|=n,On|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ge=!0),e.memoizedState=n)}function ev(e,t){var n=ee;ee=n!==0&&4>n?n:4,e(!0);var r=Yo.transition;Yo.transition={};try{e(!1),t()}finally{ee=n,Yo.transition=r}}function $f(){return ht().memoizedState}function tv(e,t,n){var r=cn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Wf(e))Kf(t,n);else if(n=Tf(e,t,n,r),n!==null){var s=Ve();wt(n,e,r,s),qf(n,t,r)}}function nv(e,t,n){var r=cn(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Wf(e))Kf(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,St(a,o)){var c=t.interleaved;c===null?(s.next=s,ec(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}n=Tf(e,t,s,r),n!==null&&(s=Ve(),wt(n,e,r,s),qf(n,t,r))}}function Wf(e){var t=e.alternate;return e===de||t!==null&&t===de}function Kf(e,t){rs=Ui=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function qf(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Bl(e,n)}}var Gi={readContext:dt,useCallback:Ee,useContext:Ee,useEffect:Ee,useImperativeHandle:Ee,useInsertionEffect:Ee,useLayoutEffect:Ee,useMemo:Ee,useReducer:Ee,useRef:Ee,useState:Ee,useDebugValue:Ee,useDeferredValue:Ee,useTransition:Ee,useMutableSource:Ee,useSyncExternalStore:Ee,useId:Ee,unstable_isNewReconciler:!1},rv={readContext:dt,useCallback:function(e,t){return jt().memoizedState=[e,t===void 0?null:t],e},useContext:dt,useEffect:Au,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,yi(4194308,4,Bf.bind(null,t,e),n)},useLayoutEffect:function(e,t){return yi(4194308,4,e,t)},useInsertionEffect:function(e,t){return yi(4,2,e,t)},useMemo:function(e,t){var n=jt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=jt();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=tv.bind(null,de,e),[r.memoizedState,e]},useRef:function(e){var t=jt();return e={current:e},t.memoizedState=e},useState:_u,useDebugValue:cc,useDeferredValue:function(e){return jt().memoizedState=e},useTransition:function(){var e=_u(!1),t=e[0];return e=ev.bind(null,e[1]),jt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=de,s=jt();if(ae){if(n===void 0)throw Error(N(407));n=n()}else{if(n=t(),ke===null)throw Error(N(349));In&30||Mf(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,Au(Df.bind(null,r,i,e),[e]),r.flags|=2048,Ts(9,Lf.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=jt(),t=ke.identifierPrefix;if(ae){var n=Dt,r=Lt;n=(r&~(1<<32-xt(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Cs++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Zg++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},sv={readContext:dt,useCallback:Hf,useContext:dt,useEffect:lc,useImperativeHandle:zf,useInsertionEffect:Ff,useLayoutEffect:Vf,useMemo:Uf,useReducer:Jo,useRef:Of,useState:function(){return Jo(Ps)},useDebugValue:cc,useDeferredValue:function(e){var t=ht();return Gf(t,we.memoizedState,e)},useTransition:function(){var e=Jo(Ps)[0],t=ht().memoizedState;return[e,t]},useMutableSource:_f,useSyncExternalStore:Af,useId:$f,unstable_isNewReconciler:!1},iv={readContext:dt,useCallback:Hf,useContext:dt,useEffect:lc,useImperativeHandle:zf,useInsertionEffect:Ff,useLayoutEffect:Vf,useMemo:Uf,useReducer:Zo,useRef:Of,useState:function(){return Zo(Ps)},useDebugValue:cc,useDeferredValue:function(e){var t=ht();return we===null?t.memoizedState=e:Gf(t,we.memoizedState,e)},useTransition:function(){var e=Zo(Ps)[0],t=ht().memoizedState;return[e,t]},useMutableSource:_f,useSyncExternalStore:Af,useId:$f,unstable_isNewReconciler:!1};function gt(e,t){if(e&&e.defaultProps){t=he({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Za(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:he({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var go={isMounted:function(e){return(e=e._reactInternals)?Hn(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Ve(),s=cn(e),i=Ot(r,s);i.payload=t,n!=null&&(i.callback=n),t=an(e,i,s),t!==null&&(wt(t,e,s,r),gi(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Ve(),s=cn(e),i=Ot(r,s);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=an(e,i,s),t!==null&&(wt(t,e,s,r),gi(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ve(),r=cn(e),s=Ot(n,r);s.tag=2,t!=null&&(s.callback=t),t=an(e,s,r),t!==null&&(wt(t,e,r,n),gi(t,e,r))}};function Mu(e,t,n,r,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,o):t.prototype&&t.prototype.isPureReactComponent?!xs(n,r)||!xs(s,i):!0}function Qf(e,t,n){var r=!1,s=mn,i=t.contextType;return typeof i=="object"&&i!==null?i=dt(i):(s=We(t)?Dn:De.current,r=t.contextTypes,i=(r=r!=null)?vr(e,s):mn),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=go,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function Lu(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&go.enqueueReplaceState(t,t.state,null)}function el(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},tc(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=dt(i):(i=We(t)?Dn:De.current,s.context=vr(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Za(e,t,i,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&go.enqueueReplaceState(s,s.state,null),zi(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Sr(e,t){try{var n="",r=t;do n+=L0(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function ea(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function tl(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var ov=typeof WeakMap=="function"?WeakMap:Map;function Xf(e,t,n){n=Ot(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Wi||(Wi=!0,dl=r),tl(e,t)},n}function Yf(e,t,n){n=Ot(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){tl(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){tl(e,t),typeof r!="function"&&(ln===null?ln=new Set([this]):ln.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function Du(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new ov;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=wv.bind(null,e,t,n),t.then(e,e))}function Ru(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Iu(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Ot(-1,1),t.tag=2,an(n,t,1))),n.lanes|=1),e)}var av=$t.ReactCurrentOwner,Ge=!1;function Fe(e,t,n,r){t.child=e===null?Pf(t,null,n,r):xr(t,e.child,n,r)}function Ou(e,t,n,r,s){n=n.render;var i=t.ref;return fr(t,s),r=oc(e,t,n,r,i,s),n=ac(),e!==null&&!Ge?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Ut(e,t,s)):(ae&&n&&ql(t),t.flags|=1,Fe(e,t,r,s),t.child)}function Fu(e,t,n,r,s){if(e===null){var i=n.type;return typeof i=="function"&&!vc(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,Jf(e,t,i,r,s)):(e=bi(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:xs,n(o,r)&&e.ref===t.ref)return Ut(e,t,s)}return t.flags|=1,e=un(i,r),e.ref=t.ref,e.return=t,t.child=e}function Jf(e,t,n,r,s){if(e!==null){var i=e.memoizedProps;if(xs(i,r)&&e.ref===t.ref)if(Ge=!1,t.pendingProps=r=i,(e.lanes&s)!==0)e.flags&131072&&(Ge=!0);else return t.lanes=e.lanes,Ut(e,t,s)}return nl(e,t,n,r,s)}function Zf(e,t,n){var r=t.pendingProps,s=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ne(rr,Xe),Xe|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ne(rr,Xe),Xe|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,ne(rr,Xe),Xe|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,ne(rr,Xe),Xe|=r;return Fe(e,t,s,n),t.child}function em(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function nl(e,t,n,r,s){var i=We(n)?Dn:De.current;return i=vr(t,i),fr(t,s),n=oc(e,t,n,r,i,s),r=ac(),e!==null&&!Ge?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Ut(e,t,s)):(ae&&r&&ql(t),t.flags|=1,Fe(e,t,n,s),t.child)}function Vu(e,t,n,r,s){if(We(n)){var i=!0;Ii(t)}else i=!1;if(fr(t,s),t.stateNode===null)xi(e,t),Qf(t,n,r),el(t,n,r,s),r=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=dt(u):(u=We(n)?Dn:De.current,u=vr(t,u));var h=n.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||c!==u)&&Lu(t,o,r,u),Xt=!1;var f=t.memoizedState;o.state=f,zi(t,r,o,s),c=t.memoizedState,a!==r||f!==c||$e.current||Xt?(typeof h=="function"&&(Za(t,n,h,r),c=t.memoizedState),(a=Xt||Mu(t,n,a,r,f,c,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),o.props=r,o.state=c,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Ef(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:gt(t.type,a),o.props=u,d=t.pendingProps,f=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=dt(c):(c=We(n)?Dn:De.current,c=vr(t,c));var v=n.getDerivedStateFromProps;(h=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==c)&&Lu(t,o,r,c),Xt=!1,f=t.memoizedState,o.state=f,zi(t,r,o,s);var x=t.memoizedState;a!==d||f!==x||$e.current||Xt?(typeof v=="function"&&(Za(t,n,v,r),x=t.memoizedState),(u=Xt||Mu(t,n,u,r,f,x,c)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,x,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,x,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=x),o.props=r,o.state=x,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return rl(e,t,n,r,i,s)}function rl(e,t,n,r,s,i){em(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return s&&ju(t,n,!1),Ut(e,t,i);r=t.stateNode,av.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=xr(t,e.child,null,i),t.child=xr(t,null,a,i)):Fe(e,t,a,i),t.memoizedState=r.state,s&&ju(t,n,!0),t.child}function tm(e){var t=e.stateNode;t.pendingContext?ku(e,t.pendingContext,t.pendingContext!==t.context):t.context&&ku(e,t.context,!1),nc(e,t.containerInfo)}function Bu(e,t,n,r,s){return yr(),Xl(s),t.flags|=256,Fe(e,t,n,r),t.child}var sl={dehydrated:null,treeContext:null,retryLane:0};function il(e){return{baseLanes:e,cachePool:null,transitions:null}}function nm(e,t,n){var r=t.pendingProps,s=le.current,i=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(s&2)!==0),a?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),ne(le,s&1),e===null)return Ya(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,i?(r=t.mode,i=t.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=xo(o,r,0,null),e=Ln(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=il(n),t.memoizedState=sl,e):uc(t,o));if(s=e.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return lv(e,t,o,r,a,s,n);if(i){i=r.fallback,o=t.mode,s=e.child,a=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=un(s,c),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=un(a,i):(i=Ln(i,o,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,o=e.child.memoizedState,o=o===null?il(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~n,t.memoizedState=sl,r}return i=e.child,e=i.sibling,r=un(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function uc(e,t){return t=xo({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ni(e,t,n,r){return r!==null&&Xl(r),xr(t,e.child,null,n),e=uc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function lv(e,t,n,r,s,i,o){if(n)return t.flags&256?(t.flags&=-257,r=ea(Error(N(422))),ni(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,s=t.mode,r=xo({mode:"visible",children:r.children},s,0,null),i=Ln(i,s,o,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&xr(t,e.child,null,o),t.child.memoizedState=il(o),t.memoizedState=sl,i);if(!(t.mode&1))return ni(e,t,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(N(419)),r=ea(i,r,void 0),ni(e,t,o,r)}if(a=(o&e.childLanes)!==0,Ge||a){if(r=ke,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Ht(e,s),wt(r,e,s,-1))}return gc(),r=ea(Error(N(421))),ni(e,t,o,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=Sv.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,Ye=on(s.nextSibling),Je=t,ae=!0,yt=null,e!==null&&(ot[at++]=Lt,ot[at++]=Dt,ot[at++]=Rn,Lt=e.id,Dt=e.overflow,Rn=t),t=uc(t,r.children),t.flags|=4096,t)}function zu(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Ja(e.return,t,n)}function ta(e,t,n,r,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function rm(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(Fe(e,t,r.children,n),r=le.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&zu(e,n,t);else if(e.tag===19)zu(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ne(le,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&Hi(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),ta(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Hi(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}ta(t,!0,n,null,i);break;case"together":ta(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function xi(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ut(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),On|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(N(153));if(t.child!==null){for(e=t.child,n=un(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=un(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function cv(e,t,n){switch(t.tag){case 3:tm(t),yr();break;case 5:Nf(t);break;case 1:We(t.type)&&Ii(t);break;case 4:nc(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;ne(Vi,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(ne(le,le.current&1),t.flags|=128,null):n&t.child.childLanes?nm(e,t,n):(ne(le,le.current&1),e=Ut(e,t,n),e!==null?e.sibling:null);ne(le,le.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return rm(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ne(le,le.current),r)break;return null;case 22:case 23:return t.lanes=0,Zf(e,t,n)}return Ut(e,t,n)}var sm,ol,im,om;sm=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ol=function(){};im=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,_n(Tt.current);var i=null;switch(n){case"input":s=Ea(e,s),r=Ea(e,r),i=[];break;case"select":s=he({},s,{value:void 0}),r=he({},r,{value:void 0}),i=[];break;case"textarea":s=Aa(e,s),r=Aa(e,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Di)}La(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(hs.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(a=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==a&&(c!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(hs.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&se("scroll",e),i||a===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};om=function(e,t,n,r){n!==r&&(t.flags|=4)};function Ur(e,t){if(!ae)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ne(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function uv(e,t,n){var r=t.pendingProps;switch(Ql(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ne(t),null;case 1:return We(t.type)&&Ri(),Ne(t),null;case 3:return r=t.stateNode,wr(),ie($e),ie(De),sc(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(ei(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,yt!==null&&(ml(yt),yt=null))),ol(e,t),Ne(t),null;case 5:rc(t);var s=_n(js.current);if(n=t.type,e!==null&&t.stateNode!=null)im(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(N(166));return Ne(t),null}if(e=_n(Tt.current),ei(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[Ct]=t,r[bs]=i,e=(t.mode&1)!==0,n){case"dialog":se("cancel",r),se("close",r);break;case"iframe":case"object":case"embed":se("load",r);break;case"video":case"audio":for(s=0;s<Xr.length;s++)se(Xr[s],r);break;case"source":se("error",r);break;case"img":case"image":case"link":se("error",r),se("load",r);break;case"details":se("toggle",r);break;case"input":Xc(r,i),se("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},se("invalid",r);break;case"textarea":Jc(r,i),se("invalid",r)}La(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Zs(r.textContent,a,e),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Zs(r.textContent,a,e),s=["children",""+a]):hs.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&se("scroll",r)}switch(n){case"input":$s(r),Yc(r,i,!0);break;case"textarea":$s(r),Zc(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Di)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Lh(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[Ct]=t,e[bs]=r,sm(e,t,!1,!1),t.stateNode=e;e:{switch(o=Da(n,r),n){case"dialog":se("cancel",e),se("close",e),s=r;break;case"iframe":case"object":case"embed":se("load",e),s=r;break;case"video":case"audio":for(s=0;s<Xr.length;s++)se(Xr[s],e);s=r;break;case"source":se("error",e),s=r;break;case"img":case"image":case"link":se("error",e),se("load",e),s=r;break;case"details":se("toggle",e),s=r;break;case"input":Xc(e,r),s=Ea(e,r),se("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=he({},r,{value:void 0}),se("invalid",e);break;case"textarea":Jc(e,r),s=Aa(e,r),se("invalid",e);break;default:s=r}La(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var c=a[i];i==="style"?Ih(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Dh(e,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&fs(e,c):typeof c=="number"&&fs(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(hs.hasOwnProperty(i)?c!=null&&i==="onScroll"&&se("scroll",e):c!=null&&Dl(e,i,c,o))}switch(n){case"input":$s(e),Yc(e,r,!1);break;case"textarea":$s(e),Zc(e);break;case"option":r.value!=null&&e.setAttribute("value",""+fn(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?cr(e,!!r.multiple,i,!1):r.defaultValue!=null&&cr(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Di)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ne(t),null;case 6:if(e&&t.stateNode!=null)om(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(N(166));if(n=_n(js.current),_n(Tt.current),ei(t)){if(r=t.stateNode,n=t.memoizedProps,r[Ct]=t,(i=r.nodeValue!==n)&&(e=Je,e!==null))switch(e.tag){case 3:Zs(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Zs(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ct]=t,t.stateNode=r}return Ne(t),null;case 13:if(ie(le),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ae&&Ye!==null&&t.mode&1&&!(t.flags&128))jf(),yr(),t.flags|=98560,i=!1;else if(i=ei(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(N(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(N(317));i[Ct]=t}else yr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ne(t),i=!1}else yt!==null&&(ml(yt),yt=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||le.current&1?Se===0&&(Se=3):gc())),t.updateQueue!==null&&(t.flags|=4),Ne(t),null);case 4:return wr(),ol(e,t),e===null&&ws(t.stateNode.containerInfo),Ne(t),null;case 10:return Zl(t.type._context),Ne(t),null;case 17:return We(t.type)&&Ri(),Ne(t),null;case 19:if(ie(le),i=t.memoizedState,i===null)return Ne(t),null;if(r=(t.flags&128)!==0,o=i.rendering,o===null)if(r)Ur(i,!1);else{if(Se!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Hi(e),o!==null){for(t.flags|=128,Ur(i,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ne(le,le.current&1|2),t.child}e=e.sibling}i.tail!==null&&ge()>br&&(t.flags|=128,r=!0,Ur(i,!1),t.lanes=4194304)}else{if(!r)if(e=Hi(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Ur(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!ae)return Ne(t),null}else 2*ge()-i.renderingStartTime>br&&n!==1073741824&&(t.flags|=128,r=!0,Ur(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(n=i.last,n!==null?n.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=ge(),t.sibling=null,n=le.current,ne(le,r?n&1|2:n&1),t):(Ne(t),null);case 22:case 23:return pc(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Xe&1073741824&&(Ne(t),t.subtreeFlags&6&&(t.flags|=8192)):Ne(t),null;case 24:return null;case 25:return null}throw Error(N(156,t.tag))}function dv(e,t){switch(Ql(t),t.tag){case 1:return We(t.type)&&Ri(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return wr(),ie($e),ie(De),sc(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return rc(t),null;case 13:if(ie(le),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(N(340));yr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ie(le),null;case 4:return wr(),null;case 10:return Zl(t.type._context),null;case 22:case 23:return pc(),null;case 24:return null;default:return null}}var ri=!1,Ae=!1,hv=typeof WeakSet=="function"?WeakSet:Set,D=null;function nr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){fe(e,t,r)}else n.current=null}function al(e,t,n){try{n()}catch(r){fe(e,t,r)}}var Hu=!1;function fv(e,t){if(Ga=Ai,e=df(),Kl(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,u=0,h=0,d=e,f=null;t:for(;;){for(var v;d!==n||s!==0&&d.nodeType!==3||(a=o+s),d!==i||r!==0&&d.nodeType!==3||(c=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(v=d.firstChild)!==null;)f=d,d=v;for(;;){if(d===e)break t;if(f===n&&++u===s&&(a=o),f===i&&++h===r&&(c=o),(v=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=v}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for($a={focusedElem:e,selectionRange:n},Ai=!1,D=t;D!==null;)if(t=D,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,D=e;else for(;D!==null;){t=D;try{var x=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var S=x.memoizedProps,b=x.memoizedState,p=t.stateNode,m=p.getSnapshotBeforeUpdate(t.elementType===t.type?S:gt(t.type,S),b);p.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var g=t.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(N(163))}}catch(w){fe(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,D=e;break}D=t.return}return x=Hu,Hu=!1,x}function ss(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&al(t,n,i)}s=s.next}while(s!==r)}}function vo(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ll(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function am(e){var t=e.alternate;t!==null&&(e.alternate=null,am(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ct],delete t[bs],delete t[qa],delete t[Qg],delete t[Xg])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function lm(e){return e.tag===5||e.tag===3||e.tag===4}function Uu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||lm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function cl(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Di));else if(r!==4&&(e=e.child,e!==null))for(cl(e,t,n),e=e.sibling;e!==null;)cl(e,t,n),e=e.sibling}function ul(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(ul(e,t,n),e=e.sibling;e!==null;)ul(e,t,n),e=e.sibling}var Ce=null,vt=!1;function Wt(e,t,n){for(n=n.child;n!==null;)cm(e,t,n),n=n.sibling}function cm(e,t,n){if(Pt&&typeof Pt.onCommitFiberUnmount=="function")try{Pt.onCommitFiberUnmount(lo,n)}catch{}switch(n.tag){case 5:Ae||nr(n,t);case 6:var r=Ce,s=vt;Ce=null,Wt(e,t,n),Ce=r,vt=s,Ce!==null&&(vt?(e=Ce,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Ce.removeChild(n.stateNode));break;case 18:Ce!==null&&(vt?(e=Ce,n=n.stateNode,e.nodeType===8?qo(e.parentNode,n):e.nodeType===1&&qo(e,n),vs(e)):qo(Ce,n.stateNode));break;case 4:r=Ce,s=vt,Ce=n.stateNode.containerInfo,vt=!0,Wt(e,t,n),Ce=r,vt=s;break;case 0:case 11:case 14:case 15:if(!Ae&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&al(n,t,o),s=s.next}while(s!==r)}Wt(e,t,n);break;case 1:if(!Ae&&(nr(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){fe(n,t,a)}Wt(e,t,n);break;case 21:Wt(e,t,n);break;case 22:n.mode&1?(Ae=(r=Ae)||n.memoizedState!==null,Wt(e,t,n),Ae=r):Wt(e,t,n);break;default:Wt(e,t,n)}}function Gu(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new hv),t.forEach(function(r){var s=bv.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function mt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ce=a.stateNode,vt=!1;break e;case 3:Ce=a.stateNode.containerInfo,vt=!0;break e;case 4:Ce=a.stateNode.containerInfo,vt=!0;break e}a=a.return}if(Ce===null)throw Error(N(160));cm(i,o,s),Ce=null,vt=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){fe(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)um(t,e),t=t.sibling}function um(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(mt(t,e),bt(e),r&4){try{ss(3,e,e.return),vo(3,e)}catch(S){fe(e,e.return,S)}try{ss(5,e,e.return)}catch(S){fe(e,e.return,S)}}break;case 1:mt(t,e),bt(e),r&512&&n!==null&&nr(n,n.return);break;case 5:if(mt(t,e),bt(e),r&512&&n!==null&&nr(n,n.return),e.flags&32){var s=e.stateNode;try{fs(s,"")}catch(S){fe(e,e.return,S)}}if(r&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=n!==null?n.memoizedProps:i,a=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&Ah(s,i),Da(a,o);var u=Da(a,i);for(o=0;o<c.length;o+=2){var h=c[o],d=c[o+1];h==="style"?Ih(s,d):h==="dangerouslySetInnerHTML"?Dh(s,d):h==="children"?fs(s,d):Dl(s,h,d,u)}switch(a){case"input":Na(s,i);break;case"textarea":Mh(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var v=i.value;v!=null?cr(s,!!i.multiple,v,!1):f!==!!i.multiple&&(i.defaultValue!=null?cr(s,!!i.multiple,i.defaultValue,!0):cr(s,!!i.multiple,i.multiple?[]:"",!1))}s[bs]=i}catch(S){fe(e,e.return,S)}}break;case 6:if(mt(t,e),bt(e),r&4){if(e.stateNode===null)throw Error(N(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(S){fe(e,e.return,S)}}break;case 3:if(mt(t,e),bt(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{vs(t.containerInfo)}catch(S){fe(e,e.return,S)}break;case 4:mt(t,e),bt(e);break;case 13:mt(t,e),bt(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(fc=ge())),r&4&&Gu(e);break;case 22:if(h=n!==null&&n.memoizedState!==null,e.mode&1?(Ae=(u=Ae)||h,mt(t,e),Ae=u):mt(t,e),bt(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!h&&e.mode&1)for(D=e,h=e.child;h!==null;){for(d=D=h;D!==null;){switch(f=D,v=f.child,f.tag){case 0:case 11:case 14:case 15:ss(4,f,f.return);break;case 1:nr(f,f.return);var x=f.stateNode;if(typeof x.componentWillUnmount=="function"){r=f,n=f.return;try{t=r,x.props=t.memoizedProps,x.state=t.memoizedState,x.componentWillUnmount()}catch(S){fe(r,n,S)}}break;case 5:nr(f,f.return);break;case 22:if(f.memoizedState!==null){Wu(d);continue}}v!==null?(v.return=f,D=v):Wu(d)}h=h.sibling}e:for(h=null,d=e;;){if(d.tag===5){if(h===null){h=d;try{s=d.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=Rh("display",o))}catch(S){fe(e,e.return,S)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(S){fe(e,e.return,S)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:mt(t,e),bt(e),r&4&&Gu(e);break;case 21:break;default:mt(t,e),bt(e)}}function bt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(lm(n)){var r=n;break e}n=n.return}throw Error(N(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(fs(s,""),r.flags&=-33);var i=Uu(e);ul(e,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Uu(e);cl(e,a,o);break;default:throw Error(N(161))}}catch(c){fe(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function mv(e,t,n){D=e,dm(e)}function dm(e,t,n){for(var r=(e.mode&1)!==0;D!==null;){var s=D,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||ri;if(!o){var a=s.alternate,c=a!==null&&a.memoizedState!==null||Ae;a=ri;var u=Ae;if(ri=o,(Ae=c)&&!u)for(D=s;D!==null;)o=D,c=o.child,o.tag===22&&o.memoizedState!==null?Ku(s):c!==null?(c.return=o,D=c):Ku(s);for(;i!==null;)D=i,dm(i),i=i.sibling;D=s,ri=a,Ae=u}$u(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,D=i):$u(e)}}function $u(e){for(;D!==null;){var t=D;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ae||vo(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Ae)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:gt(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Nu(t,i,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Nu(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&vs(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(N(163))}Ae||t.flags&512&&ll(t)}catch(f){fe(t,t.return,f)}}if(t===e){D=null;break}if(n=t.sibling,n!==null){n.return=t.return,D=n;break}D=t.return}}function Wu(e){for(;D!==null;){var t=D;if(t===e){D=null;break}var n=t.sibling;if(n!==null){n.return=t.return,D=n;break}D=t.return}}function Ku(e){for(;D!==null;){var t=D;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{vo(4,t)}catch(c){fe(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(c){fe(t,s,c)}}var i=t.return;try{ll(t)}catch(c){fe(t,i,c)}break;case 5:var o=t.return;try{ll(t)}catch(c){fe(t,o,c)}}}catch(c){fe(t,t.return,c)}if(t===e){D=null;break}var a=t.sibling;if(a!==null){a.return=t.return,D=a;break}D=t.return}}var pv=Math.ceil,$i=$t.ReactCurrentDispatcher,dc=$t.ReactCurrentOwner,ut=$t.ReactCurrentBatchConfig,Q=0,ke=null,xe=null,Pe=0,Xe=0,rr=yn(0),Se=0,Es=null,On=0,yo=0,hc=0,is=null,Ue=null,fc=0,br=1/0,Nt=null,Wi=!1,dl=null,ln=null,si=!1,tn=null,Ki=0,os=0,hl=null,wi=-1,Si=0;function Ve(){return Q&6?ge():wi!==-1?wi:wi=ge()}function cn(e){return e.mode&1?Q&2&&Pe!==0?Pe&-Pe:Jg.transition!==null?(Si===0&&(Si=qh()),Si):(e=ee,e!==0||(e=window.event,e=e===void 0?16:tf(e.type)),e):1}function wt(e,t,n,r){if(50<os)throw os=0,hl=null,Error(N(185));Ls(e,n,r),(!(Q&2)||e!==ke)&&(e===ke&&(!(Q&2)&&(yo|=n),Se===4&&Zt(e,Pe)),Ke(e,r),n===1&&Q===0&&!(t.mode&1)&&(br=ge()+500,mo&&xn()))}function Ke(e,t){var n=e.callbackNode;J0(e,t);var r=_i(e,e===ke?Pe:0);if(r===0)n!==null&&nu(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&nu(n),t===1)e.tag===0?Yg(qu.bind(null,e)):Sf(qu.bind(null,e)),Kg(function(){!(Q&6)&&xn()}),n=null;else{switch(Qh(r)){case 1:n=Vl;break;case 4:n=Wh;break;case 16:n=Ni;break;case 536870912:n=Kh;break;default:n=Ni}n=xm(n,hm.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function hm(e,t){if(wi=-1,Si=0,Q&6)throw Error(N(327));var n=e.callbackNode;if(mr()&&e.callbackNode!==n)return null;var r=_i(e,e===ke?Pe:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=qi(e,r);else{t=r;var s=Q;Q|=2;var i=mm();(ke!==e||Pe!==t)&&(Nt=null,br=ge()+500,Mn(e,t));do try{yv();break}catch(a){fm(e,a)}while(1);Jl(),$i.current=i,Q=s,xe!==null?t=0:(ke=null,Pe=0,t=Se)}if(t!==0){if(t===2&&(s=Va(e),s!==0&&(r=s,t=fl(e,s))),t===1)throw n=Es,Mn(e,0),Zt(e,r),Ke(e,ge()),n;if(t===6)Zt(e,r);else{if(s=e.current.alternate,!(r&30)&&!gv(s)&&(t=qi(e,r),t===2&&(i=Va(e),i!==0&&(r=i,t=fl(e,i))),t===1))throw n=Es,Mn(e,0),Zt(e,r),Ke(e,ge()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(N(345));case 2:jn(e,Ue,Nt);break;case 3:if(Zt(e,r),(r&130023424)===r&&(t=fc+500-ge(),10<t)){if(_i(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){Ve(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Ka(jn.bind(null,e,Ue,Nt),t);break}jn(e,Ue,Nt);break;case 4:if(Zt(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var o=31-xt(r);i=1<<o,o=t[o],o>s&&(s=o),r&=~i}if(r=s,r=ge()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*pv(r/1960))-r,10<r){e.timeoutHandle=Ka(jn.bind(null,e,Ue,Nt),r);break}jn(e,Ue,Nt);break;case 5:jn(e,Ue,Nt);break;default:throw Error(N(329))}}}return Ke(e,ge()),e.callbackNode===n?hm.bind(null,e):null}function fl(e,t){var n=is;return e.current.memoizedState.isDehydrated&&(Mn(e,t).flags|=256),e=qi(e,t),e!==2&&(t=Ue,Ue=n,t!==null&&ml(t)),e}function ml(e){Ue===null?Ue=e:Ue.push.apply(Ue,e)}function gv(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!St(i(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Zt(e,t){for(t&=~hc,t&=~yo,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-xt(t),r=1<<n;e[n]=-1,t&=~r}}function qu(e){if(Q&6)throw Error(N(327));mr();var t=_i(e,0);if(!(t&1))return Ke(e,ge()),null;var n=qi(e,t);if(e.tag!==0&&n===2){var r=Va(e);r!==0&&(t=r,n=fl(e,r))}if(n===1)throw n=Es,Mn(e,0),Zt(e,t),Ke(e,ge()),n;if(n===6)throw Error(N(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,jn(e,Ue,Nt),Ke(e,ge()),null}function mc(e,t){var n=Q;Q|=1;try{return e(t)}finally{Q=n,Q===0&&(br=ge()+500,mo&&xn())}}function Fn(e){tn!==null&&tn.tag===0&&!(Q&6)&&mr();var t=Q;Q|=1;var n=ut.transition,r=ee;try{if(ut.transition=null,ee=1,e)return e()}finally{ee=r,ut.transition=n,Q=t,!(Q&6)&&xn()}}function pc(){Xe=rr.current,ie(rr)}function Mn(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Wg(n)),xe!==null)for(n=xe.return;n!==null;){var r=n;switch(Ql(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ri();break;case 3:wr(),ie($e),ie(De),sc();break;case 5:rc(r);break;case 4:wr();break;case 13:ie(le);break;case 19:ie(le);break;case 10:Zl(r.type._context);break;case 22:case 23:pc()}n=n.return}if(ke=e,xe=e=un(e.current,null),Pe=Xe=t,Se=0,Es=null,hc=yo=On=0,Ue=is=null,Nn!==null){for(t=0;t<Nn.length;t++)if(n=Nn[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Nn=null}return e}function fm(e,t){do{var n=xe;try{if(Jl(),vi.current=Gi,Ui){for(var r=de.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Ui=!1}if(In=0,be=we=de=null,rs=!1,Cs=0,dc.current=null,n===null||n.return===null){Se=1,Es=t,xe=null;break}e:{var i=e,o=n.return,a=n,c=t;if(t=Pe,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var v=Ru(o);if(v!==null){v.flags&=-257,Iu(v,o,a,i,t),v.mode&1&&Du(i,u,t),t=v,c=u;var x=t.updateQueue;if(x===null){var S=new Set;S.add(c),t.updateQueue=S}else x.add(c);break e}else{if(!(t&1)){Du(i,u,t),gc();break e}c=Error(N(426))}}else if(ae&&a.mode&1){var b=Ru(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),Iu(b,o,a,i,t),Xl(Sr(c,a));break e}}i=c=Sr(c,a),Se!==4&&(Se=2),is===null?is=[i]:is.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var p=Xf(i,c,t);Eu(i,p);break e;case 1:a=c;var m=i.type,g=i.stateNode;if(!(i.flags&128)&&(typeof m.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(ln===null||!ln.has(g)))){i.flags|=65536,t&=-t,i.lanes|=t;var w=Yf(i,a,t);Eu(i,w);break e}}i=i.return}while(i!==null)}gm(n)}catch(k){t=k,xe===n&&n!==null&&(xe=n=n.return);continue}break}while(1)}function mm(){var e=$i.current;return $i.current=Gi,e===null?Gi:e}function gc(){(Se===0||Se===3||Se===2)&&(Se=4),ke===null||!(On&268435455)&&!(yo&268435455)||Zt(ke,Pe)}function qi(e,t){var n=Q;Q|=2;var r=mm();(ke!==e||Pe!==t)&&(Nt=null,Mn(e,t));do try{vv();break}catch(s){fm(e,s)}while(1);if(Jl(),Q=n,$i.current=r,xe!==null)throw Error(N(261));return ke=null,Pe=0,Se}function vv(){for(;xe!==null;)pm(xe)}function yv(){for(;xe!==null&&!U0();)pm(xe)}function pm(e){var t=ym(e.alternate,e,Xe);e.memoizedProps=e.pendingProps,t===null?gm(e):xe=t,dc.current=null}function gm(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=dv(n,t),n!==null){n.flags&=32767,xe=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Se=6,xe=null;return}}else if(n=uv(n,t,Xe),n!==null){xe=n;return}if(t=t.sibling,t!==null){xe=t;return}xe=t=e}while(t!==null);Se===0&&(Se=5)}function jn(e,t,n){var r=ee,s=ut.transition;try{ut.transition=null,ee=1,xv(e,t,n,r)}finally{ut.transition=s,ee=r}return null}function xv(e,t,n,r){do mr();while(tn!==null);if(Q&6)throw Error(N(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(N(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(Z0(e,i),e===ke&&(xe=ke=null,Pe=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||si||(si=!0,xm(Ni,function(){return mr(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=ut.transition,ut.transition=null;var o=ee;ee=1;var a=Q;Q|=4,dc.current=null,fv(e,n),um(n,e),Vg($a),Ai=!!Ga,$a=Ga=null,e.current=n,mv(n),G0(),Q=a,ee=o,ut.transition=i}else e.current=n;if(si&&(si=!1,tn=e,Ki=s),i=e.pendingLanes,i===0&&(ln=null),K0(n.stateNode),Ke(e,ge()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Wi)throw Wi=!1,e=dl,dl=null,e;return Ki&1&&e.tag!==0&&mr(),i=e.pendingLanes,i&1?e===hl?os++:(os=0,hl=e):os=0,xn(),null}function mr(){if(tn!==null){var e=Qh(Ki),t=ut.transition,n=ee;try{if(ut.transition=null,ee=16>e?16:e,tn===null)var r=!1;else{if(e=tn,tn=null,Ki=0,Q&6)throw Error(N(331));var s=Q;for(Q|=4,D=e.current;D!==null;){var i=D,o=i.child;if(D.flags&16){var a=i.deletions;if(a!==null){for(var c=0;c<a.length;c++){var u=a[c];for(D=u;D!==null;){var h=D;switch(h.tag){case 0:case 11:case 15:ss(8,h,i)}var d=h.child;if(d!==null)d.return=h,D=d;else for(;D!==null;){h=D;var f=h.sibling,v=h.return;if(am(h),h===u){D=null;break}if(f!==null){f.return=v,D=f;break}D=v}}}var x=i.alternate;if(x!==null){var S=x.child;if(S!==null){x.child=null;do{var b=S.sibling;S.sibling=null,S=b}while(S!==null)}}D=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,D=o;else e:for(;D!==null;){if(i=D,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ss(9,i,i.return)}var p=i.sibling;if(p!==null){p.return=i.return,D=p;break e}D=i.return}}var m=e.current;for(D=m;D!==null;){o=D;var g=o.child;if(o.subtreeFlags&2064&&g!==null)g.return=o,D=g;else e:for(o=m;D!==null;){if(a=D,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:vo(9,a)}}catch(k){fe(a,a.return,k)}if(a===o){D=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,D=w;break e}D=a.return}}if(Q=s,xn(),Pt&&typeof Pt.onPostCommitFiberRoot=="function")try{Pt.onPostCommitFiberRoot(lo,e)}catch{}r=!0}return r}finally{ee=n,ut.transition=t}}return!1}function Qu(e,t,n){t=Sr(n,t),t=Xf(e,t,1),e=an(e,t,1),t=Ve(),e!==null&&(Ls(e,1,t),Ke(e,t))}function fe(e,t,n){if(e.tag===3)Qu(e,e,n);else for(;t!==null;){if(t.tag===3){Qu(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ln===null||!ln.has(r))){e=Sr(n,e),e=Yf(t,e,1),t=an(t,e,1),e=Ve(),t!==null&&(Ls(t,1,e),Ke(t,e));break}}t=t.return}}function wv(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Ve(),e.pingedLanes|=e.suspendedLanes&n,ke===e&&(Pe&n)===n&&(Se===4||Se===3&&(Pe&130023424)===Pe&&500>ge()-fc?Mn(e,0):hc|=n),Ke(e,t)}function vm(e,t){t===0&&(e.mode&1?(t=qs,qs<<=1,!(qs&130023424)&&(qs=4194304)):t=1);var n=Ve();e=Ht(e,t),e!==null&&(Ls(e,t,n),Ke(e,n))}function Sv(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),vm(e,n)}function bv(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(N(314))}r!==null&&r.delete(t),vm(e,n)}var ym;ym=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||$e.current)Ge=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Ge=!1,cv(e,t,n);Ge=!!(e.flags&131072)}else Ge=!1,ae&&t.flags&1048576&&bf(t,Fi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;xi(e,t),e=t.pendingProps;var s=vr(t,De.current);fr(t,n),s=oc(null,t,r,e,s,n);var i=ac();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,We(r)?(i=!0,Ii(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,tc(t),s.updater=go,t.stateNode=s,s._reactInternals=t,el(t,r,e,n),t=rl(null,t,r,!0,i,n)):(t.tag=0,ae&&i&&ql(t),Fe(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(xi(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=jv(r),e=gt(r,e),s){case 0:t=nl(null,t,r,e,n);break e;case 1:t=Vu(null,t,r,e,n);break e;case 11:t=Ou(null,t,r,e,n);break e;case 14:t=Fu(null,t,r,gt(r.type,e),n);break e}throw Error(N(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:gt(r,s),nl(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:gt(r,s),Vu(e,t,r,s,n);case 3:e:{if(tm(t),e===null)throw Error(N(387));r=t.pendingProps,i=t.memoizedState,s=i.element,Ef(e,t),zi(t,r,null,n);var o=t.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=Sr(Error(N(423)),t),t=Bu(e,t,r,n,s);break e}else if(r!==s){s=Sr(Error(N(424)),t),t=Bu(e,t,r,n,s);break e}else for(Ye=on(t.stateNode.containerInfo.firstChild),Je=t,ae=!0,yt=null,n=Pf(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(yr(),r===s){t=Ut(e,t,n);break e}Fe(e,t,r,n)}t=t.child}return t;case 5:return Nf(t),e===null&&Ya(t),r=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,Wa(r,s)?o=null:i!==null&&Wa(r,i)&&(t.flags|=32),em(e,t),Fe(e,t,o,n),t.child;case 6:return e===null&&Ya(t),null;case 13:return nm(e,t,n);case 4:return nc(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=xr(t,null,r,n):Fe(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:gt(r,s),Ou(e,t,r,s,n);case 7:return Fe(e,t,t.pendingProps,n),t.child;case 8:return Fe(e,t,t.pendingProps.children,n),t.child;case 12:return Fe(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,ne(Vi,r._currentValue),r._currentValue=o,i!==null)if(St(i.value,o)){if(i.children===s.children&&!$e.current){t=Ut(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Ot(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Ja(i.return,n,t),a.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(N(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Ja(o,n,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Fe(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,fr(t,n),s=dt(s),r=r(s),t.flags|=1,Fe(e,t,r,n),t.child;case 14:return r=t.type,s=gt(r,t.pendingProps),s=gt(r.type,s),Fu(e,t,r,s,n);case 15:return Jf(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:gt(r,s),xi(e,t),t.tag=1,We(r)?(e=!0,Ii(t)):e=!1,fr(t,n),Qf(t,r,s),el(t,r,s,n),rl(null,t,r,!0,e,n);case 19:return rm(e,t,n);case 22:return Zf(e,t,n)}throw Error(N(156,t.tag))};function xm(e,t){return $h(e,t)}function kv(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function lt(e,t,n,r){return new kv(e,t,n,r)}function vc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function jv(e){if(typeof e=="function")return vc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Il)return 11;if(e===Ol)return 14}return 2}function un(e,t){var n=e.alternate;return n===null?(n=lt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function bi(e,t,n,r,s,i){var o=2;if(r=e,typeof e=="function")vc(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Kn:return Ln(n.children,s,i,t);case Rl:o=8,s|=8;break;case ja:return e=lt(12,n,t,s|2),e.elementType=ja,e.lanes=i,e;case Ca:return e=lt(13,n,t,s),e.elementType=Ca,e.lanes=i,e;case Pa:return e=lt(19,n,t,s),e.elementType=Pa,e.lanes=i,e;case Eh:return xo(n,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Ph:o=10;break e;case Th:o=9;break e;case Il:o=11;break e;case Ol:o=14;break e;case Qt:o=16,r=null;break e}throw Error(N(130,e==null?e:typeof e,""))}return t=lt(o,n,t,s),t.elementType=e,t.type=r,t.lanes=i,t}function Ln(e,t,n,r){return e=lt(7,e,r,t),e.lanes=n,e}function xo(e,t,n,r){return e=lt(22,e,r,t),e.elementType=Eh,e.lanes=n,e.stateNode={isHidden:!1},e}function na(e,t,n){return e=lt(6,e,null,t),e.lanes=n,e}function ra(e,t,n){return t=lt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Cv(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Oo(0),this.expirationTimes=Oo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Oo(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function yc(e,t,n,r,s,i,o,a,c){return e=new Cv(e,t,n,a,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=lt(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},tc(i),e}function Pv(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Wn,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function wm(e){if(!e)return mn;e=e._reactInternals;e:{if(Hn(e)!==e||e.tag!==1)throw Error(N(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(We(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(N(171))}if(e.tag===1){var n=e.type;if(We(n))return wf(e,n,t)}return t}function Sm(e,t,n,r,s,i,o,a,c){return e=yc(n,r,!0,e,s,i,o,a,c),e.context=wm(null),n=e.current,r=Ve(),s=cn(n),i=Ot(r,s),i.callback=t??null,an(n,i,s),e.current.lanes=s,Ls(e,s,r),Ke(e,r),e}function wo(e,t,n,r){var s=t.current,i=Ve(),o=cn(s);return n=wm(n),t.context===null?t.context=n:t.pendingContext=n,t=Ot(i,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=an(s,t,o),e!==null&&(wt(e,s,o,i),gi(e,s,o)),o}function Qi(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Xu(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function xc(e,t){Xu(e,t),(e=e.alternate)&&Xu(e,t)}function Tv(){return null}var bm=typeof reportError=="function"?reportError:function(e){console.error(e)};function wc(e){this._internalRoot=e}So.prototype.render=wc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(N(409));wo(e,t,null,null)};So.prototype.unmount=wc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Fn(function(){wo(null,e,null,null)}),t[zt]=null}};function So(e){this._internalRoot=e}So.prototype.unstable_scheduleHydration=function(e){if(e){var t=Jh();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Jt.length&&t!==0&&t<Jt[n].priority;n++);Jt.splice(n,0,e),n===0&&ef(e)}};function Sc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function bo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Yu(){}function Ev(e,t,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=Qi(o);i.call(u)}}var o=Sm(t,r,e,0,null,!1,!1,"",Yu);return e._reactRootContainer=o,e[zt]=o.current,ws(e.nodeType===8?e.parentNode:e),Fn(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var u=Qi(c);a.call(u)}}var c=yc(e,0,!1,null,null,!1,!1,"",Yu);return e._reactRootContainer=c,e[zt]=c.current,ws(e.nodeType===8?e.parentNode:e),Fn(function(){wo(t,c,n,r)}),c}function ko(e,t,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var c=Qi(o);a.call(c)}}wo(t,o,e,s)}else o=Ev(n,t,e,s,r);return Qi(o)}Xh=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Qr(t.pendingLanes);n!==0&&(Bl(t,n|1),Ke(t,ge()),!(Q&6)&&(br=ge()+500,xn()))}break;case 13:Fn(function(){var r=Ht(e,1);if(r!==null){var s=Ve();wt(r,e,1,s)}}),xc(e,1)}};zl=function(e){if(e.tag===13){var t=Ht(e,134217728);if(t!==null){var n=Ve();wt(t,e,134217728,n)}xc(e,134217728)}};Yh=function(e){if(e.tag===13){var t=cn(e),n=Ht(e,t);if(n!==null){var r=Ve();wt(n,e,t,r)}xc(e,t)}};Jh=function(){return ee};Zh=function(e,t){var n=ee;try{return ee=e,t()}finally{ee=n}};Ia=function(e,t,n){switch(t){case"input":if(Na(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=fo(r);if(!s)throw Error(N(90));_h(r),Na(r,s)}}}break;case"textarea":Mh(e,n);break;case"select":t=n.value,t!=null&&cr(e,!!n.multiple,t,!1)}};Vh=mc;Bh=Fn;var Nv={usingClientEntryPoint:!1,Events:[Rs,Yn,fo,Oh,Fh,mc]},Gr={findFiberByHostInstance:En,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},_v={bundleType:Gr.bundleType,version:Gr.version,rendererPackageName:Gr.rendererPackageName,rendererConfig:Gr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:$t.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Uh(e),e===null?null:e.stateNode},findFiberByHostInstance:Gr.findFiberByHostInstance||Tv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ii=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ii.isDisabled&&ii.supportsFiber)try{lo=ii.inject(_v),Pt=ii}catch{}}tt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Nv;tt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Sc(t))throw Error(N(200));return Pv(e,t,null,n)};tt.createRoot=function(e,t){if(!Sc(e))throw Error(N(299));var n=!1,r="",s=bm;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=yc(e,1,!1,null,null,n,!1,r,s),e[zt]=t.current,ws(e.nodeType===8?e.parentNode:e),new wc(t)};tt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(N(188)):(e=Object.keys(e).join(","),Error(N(268,e)));return e=Uh(t),e=e===null?null:e.stateNode,e};tt.flushSync=function(e){return Fn(e)};tt.hydrate=function(e,t,n){if(!bo(t))throw Error(N(200));return ko(null,e,t,!0,n)};tt.hydrateRoot=function(e,t,n){if(!Sc(e))throw Error(N(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=bm;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=Sm(t,null,e,1,n??null,s,!1,i,o),e[zt]=t.current,ws(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new So(t)};tt.render=function(e,t,n){if(!bo(t))throw Error(N(200));return ko(null,e,t,!1,n)};tt.unmountComponentAtNode=function(e){if(!bo(e))throw Error(N(40));return e._reactRootContainer?(Fn(function(){ko(null,null,e,!1,function(){e._reactRootContainer=null,e[zt]=null})}),!0):!1};tt.unstable_batchedUpdates=mc;tt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!bo(n))throw Error(N(200));if(e==null||e._reactInternals===void 0)throw Error(N(38));return ko(e,t,n,!1,r)};tt.version="18.3.1-next-f1338f8080-20240426";function km(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(km)}catch(e){console.error(e)}}km(),bh.exports=tt;var Av=bh.exports,Ju=Av;ba.createRoot=Ju.createRoot,ba.hydrateRoot=Ju.hydrateRoot;const Mv="modulepreload",Lv=function(e){return"/cat-tetris/"+e},Zu={},jm=function(t,n,r){if(!n||n.length===0)return t();const s=document.getElementsByTagName("link");return Promise.all(n.map(i=>{if(i=Lv(i),i in Zu)return;Zu[i]=!0;const o=i.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!r)for(let h=s.length-1;h>=0;h--){const d=s[h];if(d.href===i&&(!o||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${a}`))return;const u=document.createElement("link");if(u.rel=o?"stylesheet":Mv,o||(u.as="script",u.crossOrigin=""),u.href=i,document.head.appendChild(u),o)return new Promise((h,d)=>{u.addEventListener("load",h),u.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>t()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})},Cm=y.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),jo=y.createContext({}),Co=y.createContext(null),Po=typeof document<"u",bc=Po?y.useLayoutEffect:y.useEffect,Pm=y.createContext({strict:!1}),kc=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),Dv="framerAppearId",Tm="data-"+kc(Dv);function Rv(e,t,n,r){const{visualElement:s}=y.useContext(jo),i=y.useContext(Pm),o=y.useContext(Co),a=y.useContext(Cm).reducedMotion,c=y.useRef();r=r||i.renderer,!c.current&&r&&(c.current=r(e,{visualState:t,parent:s,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:a}));const u=c.current;y.useInsertionEffect(()=>{u&&u.update(n,o)});const h=y.useRef(!!(n[Tm]&&!window.HandoffComplete));return bc(()=>{u&&(u.render(),h.current&&u.animationState&&u.animationState.animateChanges())}),y.useEffect(()=>{u&&(u.updateFeatures(),!h.current&&u.animationState&&u.animationState.animateChanges(),h.current&&(h.current=!1,window.HandoffComplete=!0))}),u}function sr(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function Iv(e,t,n){return y.useCallback(r=>{r&&e.mount&&e.mount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):sr(n)&&(n.current=r))},[t])}function Ns(e){return typeof e=="string"||Array.isArray(e)}function To(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const jc=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Cc=["initial",...jc];function Eo(e){return To(e.animate)||Cc.some(t=>Ns(e[t]))}function Em(e){return!!(Eo(e)||e.variants)}function Ov(e,t){if(Eo(e)){const{initial:n,animate:r}=e;return{initial:n===!1||Ns(n)?n:void 0,animate:Ns(r)?r:void 0}}return e.inherit!==!1?t:{}}function Fv(e){const{initial:t,animate:n}=Ov(e,y.useContext(jo));return y.useMemo(()=>({initial:t,animate:n}),[ed(t),ed(n)])}function ed(e){return Array.isArray(e)?e.join(" "):e}const td={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},_s={};for(const e in td)_s[e]={isEnabled:t=>td[e].some(n=>!!t[n])};function Vv(e){for(const t in e)_s[t]={..._s[t],...e[t]}}const Pc=y.createContext({}),Nm=y.createContext({}),Bv=Symbol.for("motionComponentSymbol");function zv({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:r,Component:s}){e&&Vv(e);function i(a,c){let u;const h={...y.useContext(Cm),...a,layoutId:Hv(a)},{isStatic:d}=h,f=Fv(a),v=r(a,d);if(!d&&Po){f.visualElement=Rv(s,v,h,t);const x=y.useContext(Nm),S=y.useContext(Pm).strict;f.visualElement&&(u=f.visualElement.loadFeatures(h,S,e,x))}return y.createElement(jo.Provider,{value:f},u&&f.visualElement?y.createElement(u,{visualElement:f.visualElement,...h}):null,n(s,a,Iv(v,f.visualElement,c),v,d,f.visualElement))}const o=y.forwardRef(i);return o[Bv]=s,o}function Hv({layoutId:e}){const t=y.useContext(Pc).id;return t&&e!==void 0?t+"-"+e:e}function Uv(e){function t(r,s={}){return zv(e(r,s))}if(typeof Proxy>"u")return t;const n=new Map;return new Proxy(t,{get:(r,s)=>(n.has(s)||n.set(s,t(s)),n.get(s))})}const Gv=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Tc(e){return typeof e!="string"||e.includes("-")?!1:!!(Gv.indexOf(e)>-1||/[A-Z]/.test(e))}const Xi={};function $v(e){Object.assign(Xi,e)}const Os=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Un=new Set(Os);function _m(e,{layout:t,layoutId:n}){return Un.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!Xi[e]||e==="opacity")}const qe=e=>!!(e&&e.getVelocity),Wv={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Kv=Os.length;function qv(e,{enableHardwareAcceleration:t=!0,allowTransformNone:n=!0},r,s){let i="";for(let o=0;o<Kv;o++){const a=Os[o];if(e[a]!==void 0){const c=Wv[a]||a;i+=`${c}(${e[a]}) `}}return t&&!e.z&&(i+="translateZ(0)"),i=i.trim(),s?i=s(e,r?"":i):n&&r&&(i="none"),i}const Am=e=>t=>typeof t=="string"&&t.startsWith(e),Mm=Am("--"),pl=Am("var(--"),Qv=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,Xv=(e,t)=>t&&typeof e=="number"?t.transform(e):e,pn=(e,t,n)=>Math.min(Math.max(n,e),t),Gn={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},as={...Gn,transform:e=>pn(0,1,e)},oi={...Gn,default:1},ls=e=>Math.round(e*1e5)/1e5,No=/(-)?([\d]*\.?[\d])+/g,Lm=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,Yv=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Fs(e){return typeof e=="string"}const Vs=e=>({test:t=>Fs(t)&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Kt=Vs("deg"),Et=Vs("%"),z=Vs("px"),Jv=Vs("vh"),Zv=Vs("vw"),nd={...Et,parse:e=>Et.parse(e)/100,transform:e=>Et.transform(e*100)},rd={...Gn,transform:Math.round},Dm={borderWidth:z,borderTopWidth:z,borderRightWidth:z,borderBottomWidth:z,borderLeftWidth:z,borderRadius:z,radius:z,borderTopLeftRadius:z,borderTopRightRadius:z,borderBottomRightRadius:z,borderBottomLeftRadius:z,width:z,maxWidth:z,height:z,maxHeight:z,size:z,top:z,right:z,bottom:z,left:z,padding:z,paddingTop:z,paddingRight:z,paddingBottom:z,paddingLeft:z,margin:z,marginTop:z,marginRight:z,marginBottom:z,marginLeft:z,rotate:Kt,rotateX:Kt,rotateY:Kt,rotateZ:Kt,scale:oi,scaleX:oi,scaleY:oi,scaleZ:oi,skew:Kt,skewX:Kt,skewY:Kt,distance:z,translateX:z,translateY:z,translateZ:z,x:z,y:z,z,perspective:z,transformPerspective:z,opacity:as,originX:nd,originY:nd,originZ:z,zIndex:rd,fillOpacity:as,strokeOpacity:as,numOctaves:rd};function Ec(e,t,n,r){const{style:s,vars:i,transform:o,transformOrigin:a}=e;let c=!1,u=!1,h=!0;for(const d in t){const f=t[d];if(Mm(d)){i[d]=f;continue}const v=Dm[d],x=Xv(f,v);if(Un.has(d)){if(c=!0,o[d]=x,!h)continue;f!==(v.default||0)&&(h=!1)}else d.startsWith("origin")?(u=!0,a[d]=x):s[d]=x}if(t.transform||(c||r?s.transform=qv(e.transform,n,h,r):s.transform&&(s.transform="none")),u){const{originX:d="50%",originY:f="50%",originZ:v=0}=a;s.transformOrigin=`${d} ${f} ${v}`}}const Nc=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Rm(e,t,n){for(const r in t)!qe(t[r])&&!_m(r,n)&&(e[r]=t[r])}function ey({transformTemplate:e},t,n){return y.useMemo(()=>{const r=Nc();return Ec(r,t,{enableHardwareAcceleration:!n},e),Object.assign({},r.vars,r.style)},[t])}function ty(e,t,n){const r=e.style||{},s={};return Rm(s,r,e),Object.assign(s,ey(e,t,n)),e.transformValues?e.transformValues(s):s}function ny(e,t,n){const r={},s=ty(e,t,n);return e.drag&&e.dragListener!==!1&&(r.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=s,r}const ry=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Yi(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||ry.has(e)}let Im=e=>!Yi(e);function sy(e){e&&(Im=t=>t.startsWith("on")?!Yi(t):e(t))}try{sy(require("@emotion/is-prop-valid").default)}catch{}function iy(e,t,n){const r={};for(const s in e)s==="values"&&typeof e.values=="object"||(Im(s)||n===!0&&Yi(s)||!t&&!Yi(s)||e.draggable&&s.startsWith("onDrag"))&&(r[s]=e[s]);return r}function sd(e,t,n){return typeof e=="string"?e:z.transform(t+n*e)}function oy(e,t,n){const r=sd(t,e.x,e.width),s=sd(n,e.y,e.height);return`${r} ${s}`}const ay={offset:"stroke-dashoffset",array:"stroke-dasharray"},ly={offset:"strokeDashoffset",array:"strokeDasharray"};function cy(e,t,n=1,r=0,s=!0){e.pathLength=1;const i=s?ay:ly;e[i.offset]=z.transform(-r);const o=z.transform(t),a=z.transform(n);e[i.array]=`${o} ${a}`}function _c(e,{attrX:t,attrY:n,attrScale:r,originX:s,originY:i,pathLength:o,pathSpacing:a=1,pathOffset:c=0,...u},h,d,f){if(Ec(e,u,h,f),d){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:v,style:x,dimensions:S}=e;v.transform&&(S&&(x.transform=v.transform),delete v.transform),S&&(s!==void 0||i!==void 0||x.transform)&&(x.transformOrigin=oy(S,s!==void 0?s:.5,i!==void 0?i:.5)),t!==void 0&&(v.x=t),n!==void 0&&(v.y=n),r!==void 0&&(v.scale=r),o!==void 0&&cy(v,o,a,c,!1)}const Om=()=>({...Nc(),attrs:{}}),Ac=e=>typeof e=="string"&&e.toLowerCase()==="svg";function uy(e,t,n,r){const s=y.useMemo(()=>{const i=Om();return _c(i,t,{enableHardwareAcceleration:!1},Ac(r),e.transformTemplate),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};Rm(i,e.style,e),s.style={...i,...s.style}}return s}function dy(e=!1){return(n,r,s,{latestValues:i},o)=>{const c=(Tc(n)?uy:ny)(r,i,o,n),h={...iy(r,typeof n=="string",e),...c,ref:s},{children:d}=r,f=y.useMemo(()=>qe(d)?d.get():d,[d]);return y.createElement(n,{...h,children:f})}}function Fm(e,{style:t,vars:n},r,s){Object.assign(e.style,t,s&&s.getProjectionStyles(r));for(const i in n)e.style.setProperty(i,n[i])}const Vm=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Bm(e,t,n,r){Fm(e,t,void 0,r);for(const s in t.attrs)e.setAttribute(Vm.has(s)?s:kc(s),t.attrs[s])}function Mc(e,t){const{style:n}=e,r={};for(const s in n)(qe(n[s])||t.style&&qe(t.style[s])||_m(s,e))&&(r[s]=n[s]);return r}function zm(e,t){const n=Mc(e,t);for(const r in e)if(qe(e[r])||qe(t[r])){const s=Os.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[s]=e[r]}return n}function Lc(e,t,n,r={},s={}){return typeof t=="function"&&(t=t(n!==void 0?n:e.custom,r,s)),typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"&&(t=t(n!==void 0?n:e.custom,r,s)),t}function Hm(e){const t=y.useRef(null);return t.current===null&&(t.current=e()),t.current}const Ji=e=>Array.isArray(e),hy=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),fy=e=>Ji(e)?e[e.length-1]||0:e;function ki(e){const t=qe(e)?e.get():e;return hy(t)?t.toValue():t}function my({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:n},r,s,i){const o={latestValues:py(r,s,i,e),renderState:t()};return n&&(o.mount=a=>n(r,a,o)),o}const Um=e=>(t,n)=>{const r=y.useContext(jo),s=y.useContext(Co),i=()=>my(e,t,r,s);return n?i():Hm(i)};function py(e,t,n,r){const s={},i=r(e,{});for(const f in i)s[f]=ki(i[f]);let{initial:o,animate:a}=e;const c=Eo(e),u=Em(e);t&&u&&!c&&e.inherit!==!1&&(o===void 0&&(o=t.initial),a===void 0&&(a=t.animate));let h=n?n.initial===!1:!1;h=h||o===!1;const d=h?a:o;return d&&typeof d!="boolean"&&!To(d)&&(Array.isArray(d)?d:[d]).forEach(v=>{const x=Lc(e,v);if(!x)return;const{transitionEnd:S,transition:b,...p}=x;for(const m in p){let g=p[m];if(Array.isArray(g)){const w=h?g.length-1:0;g=g[w]}g!==null&&(s[m]=g)}for(const m in S)s[m]=S[m]}),s}const pe=e=>e;class id{constructor(){this.order=[],this.scheduled=new Set}add(t){if(!this.scheduled.has(t))return this.scheduled.add(t),this.order.push(t),!0}remove(t){const n=this.order.indexOf(t);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(t))}clear(){this.order.length=0,this.scheduled.clear()}}function gy(e){let t=new id,n=new id,r=0,s=!1,i=!1;const o=new WeakSet,a={schedule:(c,u=!1,h=!1)=>{const d=h&&s,f=d?t:n;return u&&o.add(c),f.add(c)&&d&&s&&(r=t.order.length),c},cancel:c=>{n.remove(c),o.delete(c)},process:c=>{if(s){i=!0;return}if(s=!0,[t,n]=[n,t],n.clear(),r=t.order.length,r)for(let u=0;u<r;u++){const h=t.order[u];h(c),o.has(h)&&(a.schedule(h),e())}s=!1,i&&(i=!1,a.process(c))}};return a}const ai=["prepare","read","update","preRender","render","postRender"],vy=40;function yy(e,t){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=ai.reduce((d,f)=>(d[f]=gy(()=>n=!0),d),{}),o=d=>i[d].process(s),a=()=>{const d=performance.now();n=!1,s.delta=r?1e3/60:Math.max(Math.min(d-s.timestamp,vy),1),s.timestamp=d,s.isProcessing=!0,ai.forEach(o),s.isProcessing=!1,n&&t&&(r=!1,e(a))},c=()=>{n=!0,r=!0,s.isProcessing||e(a)};return{schedule:ai.reduce((d,f)=>{const v=i[f];return d[f]=(x,S=!1,b=!1)=>(n||c(),v.schedule(x,S,b)),d},{}),cancel:d=>ai.forEach(f=>i[f].cancel(d)),state:s,steps:i}}const{schedule:re,cancel:Gt,state:_e,steps:sa}=yy(typeof requestAnimationFrame<"u"?requestAnimationFrame:pe,!0),xy={useVisualState:Um({scrapeMotionValuesFromProps:zm,createRenderState:Om,onMount:(e,t,{renderState:n,latestValues:r})=>{re.read(()=>{try{n.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),re.render(()=>{_c(n,r,{enableHardwareAcceleration:!1},Ac(t.tagName),e.transformTemplate),Bm(t,n)})}})},wy={useVisualState:Um({scrapeMotionValuesFromProps:Mc,createRenderState:Nc})};function Sy(e,{forwardMotionProps:t=!1},n,r){return{...Tc(e)?xy:wy,preloadedFeatures:n,useRender:dy(t),createVisualElement:r,Component:e}}function Rt(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}const Gm=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function _o(e,t="page"){return{point:{x:e[t+"X"],y:e[t+"Y"]}}}const by=e=>t=>Gm(t)&&e(t,_o(t));function Ft(e,t,n,r){return Rt(e,t,by(n),r)}const ky=(e,t)=>n=>t(e(n)),dn=(...e)=>e.reduce(ky);function $m(e){let t=null;return()=>{const n=()=>{t=null};return t===null?(t=e,n):!1}}const od=$m("dragHorizontal"),ad=$m("dragVertical");function Wm(e){let t=!1;if(e==="y")t=ad();else if(e==="x")t=od();else{const n=od(),r=ad();n&&r?t=()=>{n(),r()}:(n&&n(),r&&r())}return t}function Km(){const e=Wm(!0);return e?(e(),!1):!0}class wn{constructor(t){this.isMounted=!1,this.node=t}update(){}}function ld(e,t){const n="pointer"+(t?"enter":"leave"),r="onHover"+(t?"Start":"End"),s=(i,o)=>{if(i.pointerType==="touch"||Km())return;const a=e.getProps();e.animationState&&a.whileHover&&e.animationState.setActive("whileHover",t),a[r]&&re.update(()=>a[r](i,o))};return Ft(e.current,n,s,{passive:!e.getProps()[r]})}class jy extends wn{mount(){this.unmount=dn(ld(this.node,!0),ld(this.node,!1))}unmount(){}}class Cy extends wn{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=dn(Rt(this.node.current,"focus",()=>this.onFocus()),Rt(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const qm=(e,t)=>t?e===t?!0:qm(e,t.parentElement):!1;function ia(e,t){if(!t)return;const n=new PointerEvent("pointer"+e);t(n,_o(n))}class Py extends wn{constructor(){super(...arguments),this.removeStartListeners=pe,this.removeEndListeners=pe,this.removeAccessibleListeners=pe,this.startPointerPress=(t,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),i=Ft(window,"pointerup",(a,c)=>{if(!this.checkPressEnd())return;const{onTap:u,onTapCancel:h,globalTapTarget:d}=this.node.getProps();re.update(()=>{!d&&!qm(this.node.current,a.target)?h&&h(a,c):u&&u(a,c)})},{passive:!(r.onTap||r.onPointerUp)}),o=Ft(window,"pointercancel",(a,c)=>this.cancelPress(a,c),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=dn(i,o),this.startPress(t,n)},this.startAccessiblePress=()=>{const t=i=>{if(i.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||ia("up",(c,u)=>{const{onTap:h}=this.node.getProps();h&&re.update(()=>h(c,u))})};this.removeEndListeners(),this.removeEndListeners=Rt(this.node.current,"keyup",o),ia("down",(a,c)=>{this.startPress(a,c)})},n=Rt(this.node.current,"keydown",t),r=()=>{this.isPressing&&ia("cancel",(i,o)=>this.cancelPress(i,o))},s=Rt(this.node.current,"blur",r);this.removeAccessibleListeners=dn(n,s)}}startPress(t,n){this.isPressing=!0;const{onTapStart:r,whileTap:s}=this.node.getProps();s&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&re.update(()=>r(t,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!Km()}cancelPress(t,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&re.update(()=>r(t,n))}mount(){const t=this.node.getProps(),n=Ft(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),r=Rt(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=dn(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const gl=new WeakMap,oa=new WeakMap,Ty=e=>{const t=gl.get(e.target);t&&t(e)},Ey=e=>{e.forEach(Ty)};function Ny({root:e,...t}){const n=e||document;oa.has(n)||oa.set(n,{});const r=oa.get(n),s=JSON.stringify(t);return r[s]||(r[s]=new IntersectionObserver(Ey,{root:e,...t})),r[s]}function _y(e,t,n){const r=Ny(t);return gl.set(e,n),r.observe(e),()=>{gl.delete(e),r.unobserve(e)}}const Ay={some:0,all:1};class My extends wn{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:i}=t,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:Ay[s]},a=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,i&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:h,onViewportLeave:d}=this.node.getProps(),f=u?h:d;f&&f(c)};return _y(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(Ly(t,n))&&this.startObserver()}unmount(){}}function Ly({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const Dy={inView:{Feature:My},tap:{Feature:Py},focus:{Feature:Cy},hover:{Feature:jy}};function Qm(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function Ry(e){const t={};return e.values.forEach((n,r)=>t[r]=n.get()),t}function Iy(e){const t={};return e.values.forEach((n,r)=>t[r]=n.getVelocity()),t}function Ao(e,t,n){const r=e.getProps();return Lc(r,t,n!==void 0?n:r.custom,Ry(e),Iy(e))}let Oy=pe,Dc=pe;const hn=e=>e*1e3,Vt=e=>e/1e3,Fy={current:!1},Xm=e=>Array.isArray(e)&&typeof e[0]=="number";function Ym(e){return!!(!e||typeof e=="string"&&Jm[e]||Xm(e)||Array.isArray(e)&&e.every(Ym))}const Yr=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,Jm={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Yr([0,.65,.55,1]),circOut:Yr([.55,0,1,.45]),backIn:Yr([.31,.01,.66,-.59]),backOut:Yr([.33,1.53,.69,.99])};function Zm(e){if(e)return Xm(e)?Yr(e):Array.isArray(e)?e.map(Zm):Jm[e]}function Vy(e,t,n,{delay:r=0,duration:s,repeat:i=0,repeatType:o="loop",ease:a,times:c}={}){const u={[t]:n};c&&(u.offset=c);const h=Zm(a);return Array.isArray(h)&&(u.easing=h),e.animate(u,{delay:r,duration:s,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"})}function By(e,{repeat:t,repeatType:n="loop"}){const r=t&&n!=="loop"&&t%2===1?0:e.length-1;return e[r]}const ep=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,zy=1e-7,Hy=12;function Uy(e,t,n,r,s){let i,o,a=0;do o=t+(n-t)/2,i=ep(o,r,s)-e,i>0?n=o:t=o;while(Math.abs(i)>zy&&++a<Hy);return o}function Bs(e,t,n,r){if(e===t&&n===r)return pe;const s=i=>Uy(i,0,1,e,n);return i=>i===0||i===1?i:ep(s(i),t,r)}const Gy=Bs(.42,0,1,1),$y=Bs(0,0,.58,1),tp=Bs(.42,0,.58,1),Wy=e=>Array.isArray(e)&&typeof e[0]!="number",np=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,rp=e=>t=>1-e(1-t),Rc=e=>1-Math.sin(Math.acos(e)),sp=rp(Rc),Ky=np(Rc),ip=Bs(.33,1.53,.69,.99),Ic=rp(ip),qy=np(Ic),Qy=e=>(e*=2)<1?.5*Ic(e):.5*(2-Math.pow(2,-10*(e-1))),Xy={linear:pe,easeIn:Gy,easeInOut:tp,easeOut:$y,circIn:Rc,circInOut:Ky,circOut:sp,backIn:Ic,backInOut:qy,backOut:ip,anticipate:Qy},cd=e=>{if(Array.isArray(e)){Dc(e.length===4);const[t,n,r,s]=e;return Bs(t,n,r,s)}else if(typeof e=="string")return Xy[e];return e},Oc=(e,t)=>n=>!!(Fs(n)&&Yv.test(n)&&n.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(n,t)),op=(e,t,n)=>r=>{if(!Fs(r))return r;const[s,i,o,a]=r.match(No);return{[e]:parseFloat(s),[t]:parseFloat(i),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},Yy=e=>pn(0,255,e),aa={...Gn,transform:e=>Math.round(Yy(e))},An={test:Oc("rgb","red"),parse:op("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+aa.transform(e)+", "+aa.transform(t)+", "+aa.transform(n)+", "+ls(as.transform(r))+")"};function Jy(e){let t="",n="",r="",s="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),s=e.substring(4,5),t+=t,n+=n,r+=r,s+=s),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const vl={test:Oc("#"),parse:Jy,transform:An.transform},ir={test:Oc("hsl","hue"),parse:op("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+Et.transform(ls(t))+", "+Et.transform(ls(n))+", "+ls(as.transform(r))+")"},Oe={test:e=>An.test(e)||vl.test(e)||ir.test(e),parse:e=>An.test(e)?An.parse(e):ir.test(e)?ir.parse(e):vl.parse(e),transform:e=>Fs(e)?e:e.hasOwnProperty("red")?An.transform(e):ir.transform(e)},ue=(e,t,n)=>-n*e+n*t+e;function la(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function Zy({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let s=0,i=0,o=0;if(!t)s=i=o=n;else{const a=n<.5?n*(1+t):n+t-n*t,c=2*n-a;s=la(c,a,e+1/3),i=la(c,a,e),o=la(c,a,e-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:r}}const ca=(e,t,n)=>{const r=e*e;return Math.sqrt(Math.max(0,n*(t*t-r)+r))},ex=[vl,An,ir],tx=e=>ex.find(t=>t.test(e));function ud(e){const t=tx(e);let n=t.parse(e);return t===ir&&(n=Zy(n)),n}const ap=(e,t)=>{const n=ud(e),r=ud(t),s={...n};return i=>(s.red=ca(n.red,r.red,i),s.green=ca(n.green,r.green,i),s.blue=ca(n.blue,r.blue,i),s.alpha=ue(n.alpha,r.alpha,i),An.transform(s))};function nx(e){var t,n;return isNaN(e)&&Fs(e)&&(((t=e.match(No))===null||t===void 0?void 0:t.length)||0)+(((n=e.match(Lm))===null||n===void 0?void 0:n.length)||0)>0}const lp={regex:Qv,countKey:"Vars",token:"${v}",parse:pe},cp={regex:Lm,countKey:"Colors",token:"${c}",parse:Oe.parse},up={regex:No,countKey:"Numbers",token:"${n}",parse:Gn.parse};function ua(e,{regex:t,countKey:n,token:r,parse:s}){const i=e.tokenised.match(t);i&&(e["num"+n]=i.length,e.tokenised=e.tokenised.replace(t,r),e.values.push(...i.map(s)))}function Zi(e){const t=e.toString(),n={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&ua(n,lp),ua(n,cp),ua(n,up),n}function dp(e){return Zi(e).values}function hp(e){const{values:t,numColors:n,numVars:r,tokenised:s}=Zi(e),i=t.length;return o=>{let a=s;for(let c=0;c<i;c++)c<r?a=a.replace(lp.token,o[c]):c<r+n?a=a.replace(cp.token,Oe.transform(o[c])):a=a.replace(up.token,ls(o[c]));return a}}const rx=e=>typeof e=="number"?0:e;function sx(e){const t=dp(e);return hp(e)(t.map(rx))}const gn={test:nx,parse:dp,createTransformer:hp,getAnimatableNone:sx},fp=(e,t)=>n=>`${n>0?t:e}`;function mp(e,t){return typeof e=="number"?n=>ue(e,t,n):Oe.test(e)?ap(e,t):e.startsWith("var(")?fp(e,t):gp(e,t)}const pp=(e,t)=>{const n=[...e],r=n.length,s=e.map((i,o)=>mp(i,t[o]));return i=>{for(let o=0;o<r;o++)n[o]=s[o](i);return n}},ix=(e,t)=>{const n={...e,...t},r={};for(const s in n)e[s]!==void 0&&t[s]!==void 0&&(r[s]=mp(e[s],t[s]));return s=>{for(const i in r)n[i]=r[i](s);return n}},gp=(e,t)=>{const n=gn.createTransformer(t),r=Zi(e),s=Zi(t);return r.numVars===s.numVars&&r.numColors===s.numColors&&r.numNumbers>=s.numNumbers?dn(pp(r.values,s.values),n):fp(e,t)},As=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r},dd=(e,t)=>n=>ue(e,t,n);function ox(e){return typeof e=="number"?dd:typeof e=="string"?Oe.test(e)?ap:gp:Array.isArray(e)?pp:typeof e=="object"?ix:dd}function ax(e,t,n){const r=[],s=n||ox(e[0]),i=e.length-1;for(let o=0;o<i;o++){let a=s(e[o],e[o+1]);if(t){const c=Array.isArray(t)?t[o]||pe:t;a=dn(c,a)}r.push(a)}return r}function vp(e,t,{clamp:n=!0,ease:r,mixer:s}={}){const i=e.length;if(Dc(i===t.length),i===1)return()=>t[0];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=ax(t,r,s),a=o.length,c=u=>{let h=0;if(a>1)for(;h<e.length-2&&!(u<e[h+1]);h++);const d=As(e[h],e[h+1],u);return o[h](d)};return n?u=>c(pn(e[0],e[i-1],u)):c}function lx(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const s=As(0,t,r);e.push(ue(n,1,s))}}function cx(e){const t=[0];return lx(t,e.length-1),t}function ux(e,t){return e.map(n=>n*t)}function dx(e,t){return e.map(()=>t||tp).splice(0,e.length-1)}function eo({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const s=Wy(r)?r.map(cd):cd(r),i={done:!1,value:t[0]},o=ux(n&&n.length===t.length?n:cx(t),e),a=vp(o,t,{ease:Array.isArray(s)?s:dx(t,s)});return{calculatedDuration:e,next:c=>(i.value=a(c),i.done=c>=e,i)}}function yp(e,t){return t?e*(1e3/t):0}const hx=5;function xp(e,t,n){const r=Math.max(t-hx,0);return yp(n-e(r),t-r)}const da=.001,fx=.01,hd=10,mx=.05,px=1;function gx({duration:e=800,bounce:t=.25,velocity:n=0,mass:r=1}){let s,i;Oy(e<=hn(hd));let o=1-t;o=pn(mx,px,o),e=pn(fx,hd,Vt(e)),o<1?(s=u=>{const h=u*o,d=h*e,f=h-n,v=yl(u,o),x=Math.exp(-d);return da-f/v*x},i=u=>{const d=u*o*e,f=d*n+n,v=Math.pow(o,2)*Math.pow(u,2)*e,x=Math.exp(-d),S=yl(Math.pow(u,2),o);return(-s(u)+da>0?-1:1)*((f-v)*x)/S}):(s=u=>{const h=Math.exp(-u*e),d=(u-n)*e+1;return-da+h*d},i=u=>{const h=Math.exp(-u*e),d=(n-u)*(e*e);return h*d});const a=5/e,c=yx(s,i,a);if(e=hn(e),isNaN(c))return{stiffness:100,damping:10,duration:e};{const u=Math.pow(c,2)*r;return{stiffness:u,damping:o*2*Math.sqrt(r*u),duration:e}}}const vx=12;function yx(e,t,n){let r=n;for(let s=1;s<vx;s++)r=r-e(r)/t(r);return r}function yl(e,t){return e*Math.sqrt(1-t*t)}const xx=["duration","bounce"],wx=["stiffness","damping","mass"];function fd(e,t){return t.some(n=>e[n]!==void 0)}function Sx(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!fd(e,wx)&&fd(e,xx)){const n=gx(e);t={...t,...n,mass:1},t.isResolvedFromDuration=!0}return t}function wp({keyframes:e,restDelta:t,restSpeed:n,...r}){const s=e[0],i=e[e.length-1],o={done:!1,value:s},{stiffness:a,damping:c,mass:u,duration:h,velocity:d,isResolvedFromDuration:f}=Sx({...r,velocity:-Vt(r.velocity||0)}),v=d||0,x=c/(2*Math.sqrt(a*u)),S=i-s,b=Vt(Math.sqrt(a/u)),p=Math.abs(S)<5;n||(n=p?.01:2),t||(t=p?.005:.5);let m;if(x<1){const g=yl(b,x);m=w=>{const k=Math.exp(-x*b*w);return i-k*((v+x*b*S)/g*Math.sin(g*w)+S*Math.cos(g*w))}}else if(x===1)m=g=>i-Math.exp(-b*g)*(S+(v+b*S)*g);else{const g=b*Math.sqrt(x*x-1);m=w=>{const k=Math.exp(-x*b*w),j=Math.min(g*w,300);return i-k*((v+x*b*S)*Math.sinh(j)+g*S*Math.cosh(j))/g}}return{calculatedDuration:f&&h||null,next:g=>{const w=m(g);if(f)o.done=g>=h;else{let k=v;g!==0&&(x<1?k=xp(m,g,w):k=0);const j=Math.abs(k)<=n,C=Math.abs(i-w)<=t;o.done=j&&C}return o.value=o.done?i:w,o}}}function md({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:a,max:c,restDelta:u=.5,restSpeed:h}){const d=e[0],f={done:!1,value:d},v=P=>a!==void 0&&P<a||c!==void 0&&P>c,x=P=>a===void 0?c:c===void 0||Math.abs(a-P)<Math.abs(c-P)?a:c;let S=n*t;const b=d+S,p=o===void 0?b:o(b);p!==b&&(S=p-d);const m=P=>-S*Math.exp(-P/r),g=P=>p+m(P),w=P=>{const E=m(P),A=g(P);f.done=Math.abs(E)<=u,f.value=f.done?p:A};let k,j;const C=P=>{v(f.value)&&(k=P,j=wp({keyframes:[f.value,x(f.value)],velocity:xp(g,P,f.value),damping:s,stiffness:i,restDelta:u,restSpeed:h}))};return C(0),{calculatedDuration:null,next:P=>{let E=!1;return!j&&k===void 0&&(E=!0,w(P),C(P)),k!==void 0&&P>k?j.next(P-k):(!E&&w(P),f)}}}const bx=e=>{const t=({timestamp:n})=>e(n);return{start:()=>re.update(t,!0),stop:()=>Gt(t),now:()=>_e.isProcessing?_e.timestamp:performance.now()}},pd=2e4;function gd(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<pd;)t+=n,r=e.next(t);return t>=pd?1/0:t}const kx={decay:md,inertia:md,tween:eo,keyframes:eo,spring:wp};function to({autoplay:e=!0,delay:t=0,driver:n=bx,keyframes:r,type:s="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:a="loop",onPlay:c,onStop:u,onComplete:h,onUpdate:d,...f}){let v=1,x=!1,S,b;const p=()=>{b=new Promise(V=>{S=V})};p();let m;const g=kx[s]||eo;let w;g!==eo&&typeof r[0]!="number"&&(w=vp([0,100],r,{clamp:!1}),r=[0,100]);const k=g({...f,keyframes:r});let j;a==="mirror"&&(j=g({...f,keyframes:[...r].reverse(),velocity:-(f.velocity||0)}));let C="idle",P=null,E=null,A=null;k.calculatedDuration===null&&i&&(k.calculatedDuration=gd(k));const{calculatedDuration:H}=k;let X=1/0,q=1/0;H!==null&&(X=H+o,q=X*(i+1)-o);let B=0;const G=V=>{if(E===null)return;v>0&&(E=Math.min(E,V)),v<0&&(E=Math.min(V-q/v,E)),P!==null?B=P:B=Math.round(V-E)*v;const Y=B-t*(v>=0?1:-1),Qe=v>=0?Y<0:Y>q;B=Math.max(Y,0),C==="finished"&&P===null&&(B=q);let Re=B,ft=k;if(i){const K=Math.min(B,q)/X;let U=Math.floor(K),He=K%1;!He&&K>=1&&(He=1),He===1&&U--,U=Math.min(U,i+1),!!(U%2)&&(a==="reverse"?(He=1-He,o&&(He-=o/X)):a==="mirror"&&(ft=j)),Re=pn(0,1,He)*X}const $=Qe?{done:!1,value:r[0]}:ft.next(Re);w&&($.value=w($.value));let{done:J}=$;!Qe&&H!==null&&(J=v>=0?B>=q:B<=0);const ve=P===null&&(C==="finished"||C==="running"&&J);return d&&d($.value),ve&&_(),$},R=()=>{m&&m.stop(),m=void 0},te=()=>{C="idle",R(),S(),p(),E=A=null},_=()=>{C="finished",h&&h(),R(),S()},M=()=>{if(x)return;m||(m=n(G));const V=m.now();c&&c(),P!==null?E=V-P:(!E||C==="finished")&&(E=V),C==="finished"&&p(),A=E,P=null,C="running",m.start()};e&&M();const I={then(V,Y){return b.then(V,Y)},get time(){return Vt(B)},set time(V){V=hn(V),B=V,P!==null||!m||v===0?P=V:E=m.now()-V/v},get duration(){const V=k.calculatedDuration===null?gd(k):k.calculatedDuration;return Vt(V)},get speed(){return v},set speed(V){V===v||!m||(v=V,I.time=Vt(B))},get state(){return C},play:M,pause:()=>{C="paused",P=B},stop:()=>{x=!0,C!=="idle"&&(C="idle",u&&u(),te())},cancel:()=>{A!==null&&G(A),te()},complete:()=>{C="finished"},sample:V=>(E=0,G(V))};return I}function jx(e){let t;return()=>(t===void 0&&(t=e()),t)}const Cx=jx(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Px=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),li=10,Tx=2e4,Ex=(e,t)=>t.type==="spring"||e==="backgroundColor"||!Ym(t.ease);function Nx(e,t,{onUpdate:n,onComplete:r,...s}){if(!(Cx()&&Px.has(t)&&!s.repeatDelay&&s.repeatType!=="mirror"&&s.damping!==0&&s.type!=="inertia"))return!1;let o=!1,a,c,u=!1;const h=()=>{c=new Promise(g=>{a=g})};h();let{keyframes:d,duration:f=300,ease:v,times:x}=s;if(Ex(t,s)){const g=to({...s,repeat:0,delay:0});let w={done:!1,value:d[0]};const k=[];let j=0;for(;!w.done&&j<Tx;)w=g.sample(j),k.push(w.value),j+=li;x=void 0,d=k,f=j-li,v="linear"}const S=Vy(e.owner.current,t,d,{...s,duration:f,ease:v,times:x}),b=()=>{u=!1,S.cancel()},p=()=>{u=!0,re.update(b),a(),h()};return S.onfinish=()=>{u||(e.set(By(d,s)),r&&r(),p())},{then(g,w){return c.then(g,w)},attachTimeline(g){return S.timeline=g,S.onfinish=null,pe},get time(){return Vt(S.currentTime||0)},set time(g){S.currentTime=hn(g)},get speed(){return S.playbackRate},set speed(g){S.playbackRate=g},get duration(){return Vt(f)},play:()=>{o||(S.play(),Gt(b))},pause:()=>S.pause(),stop:()=>{if(o=!0,S.playState==="idle")return;const{currentTime:g}=S;if(g){const w=to({...s,autoplay:!1});e.setWithVelocity(w.sample(g-li).value,w.sample(g).value,li)}p()},complete:()=>{u||S.finish()},cancel:p}}function _x({keyframes:e,delay:t,onUpdate:n,onComplete:r}){const s=()=>(n&&n(e[e.length-1]),r&&r(),{time:0,speed:1,duration:0,play:pe,pause:pe,stop:pe,then:i=>(i(),Promise.resolve()),cancel:pe,complete:pe});return t?to({keyframes:[0,1],duration:0,delay:t,onComplete:s}):s()}const Ax={type:"spring",stiffness:500,damping:25,restSpeed:10},Mx=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),Lx={type:"keyframes",duration:.8},Dx={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Rx=(e,{keyframes:t})=>t.length>2?Lx:Un.has(e)?e.startsWith("scale")?Mx(t[1]):Ax:Dx,xl=(e,t)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(gn.test(t)||t==="0")&&!t.startsWith("url(")),Ix=new Set(["brightness","contrast","saturate","opacity"]);function Ox(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(No)||[];if(!r)return e;const s=n.replace(r,"");let i=Ix.has(t)?1:0;return r!==n&&(i*=100),t+"("+i+s+")"}const Fx=/([a-z-]*)\(.*?\)/g,wl={...gn,getAnimatableNone:e=>{const t=e.match(Fx);return t?t.map(Ox).join(" "):e}},Vx={...Dm,color:Oe,backgroundColor:Oe,outlineColor:Oe,fill:Oe,stroke:Oe,borderColor:Oe,borderTopColor:Oe,borderRightColor:Oe,borderBottomColor:Oe,borderLeftColor:Oe,filter:wl,WebkitFilter:wl},Fc=e=>Vx[e];function Sp(e,t){let n=Fc(e);return n!==wl&&(n=gn),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const bp=e=>/^0[^.\s]+$/.test(e);function Bx(e){if(typeof e=="number")return e===0;if(e!==null)return e==="none"||e==="0"||bp(e)}function zx(e,t,n,r){const s=xl(t,n);let i;Array.isArray(n)?i=[...n]:i=[null,n];const o=r.from!==void 0?r.from:e.get();let a;const c=[];for(let u=0;u<i.length;u++)i[u]===null&&(i[u]=u===0?o:i[u-1]),Bx(i[u])&&c.push(u),typeof i[u]=="string"&&i[u]!=="none"&&i[u]!=="0"&&(a=i[u]);if(s&&c.length&&a)for(let u=0;u<c.length;u++){const h=c[u];i[h]=Sp(t,a)}return i}function Hx({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:a,from:c,elapsed:u,...h}){return!!Object.keys(h).length}function Vc(e,t){return e[t]||e.default||e}const Ux={skipAnimations:!1},Bc=(e,t,n,r={})=>s=>{const i=Vc(r,e)||{},o=i.delay||r.delay||0;let{elapsed:a=0}=r;a=a-hn(o);const c=zx(t,e,n,i),u=c[0],h=c[c.length-1],d=xl(e,u),f=xl(e,h);let v={keyframes:c,velocity:t.getVelocity(),ease:"easeOut",...i,delay:-a,onUpdate:x=>{t.set(x),i.onUpdate&&i.onUpdate(x)},onComplete:()=>{s(),i.onComplete&&i.onComplete()}};if(Hx(i)||(v={...v,...Rx(e,v)}),v.duration&&(v.duration=hn(v.duration)),v.repeatDelay&&(v.repeatDelay=hn(v.repeatDelay)),!d||!f||Fy.current||i.type===!1||Ux.skipAnimations)return _x(v);if(!r.isHandoff&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const x=Nx(t,e,v);if(x)return x}return to(v)};function no(e){return!!(qe(e)&&e.add)}const kp=e=>/^\-?\d*\.?\d+$/.test(e);function zc(e,t){e.indexOf(t)===-1&&e.push(t)}function Hc(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class Uc{constructor(){this.subscriptions=[]}add(t){return zc(this.subscriptions,t),()=>Hc(this.subscriptions,t)}notify(t,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,n,r);else for(let i=0;i<s;i++){const o=this.subscriptions[i];o&&o(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Gx=e=>!isNaN(parseFloat(e));class $x{constructor(t,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,s=!0)=>{this.prev=this.current,this.current=r;const{delta:i,timestamp:o}=_e;this.lastUpdated!==o&&(this.timeDelta=i,this.lastUpdated=o,re.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>re.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=Gx(this.current),this.owner=n.owner}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new Uc);const r=this.events[t].add(n);return t==="change"?()=>{r(),re.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,r){this.set(n),this.prev=t,this.timeDelta=r}jump(t){this.updateAndNotify(t),this.prev=t,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?yp(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function kr(e,t){return new $x(e,t)}const jp=e=>t=>t.test(e),Wx={test:e=>e==="auto",parse:e=>e},Cp=[Gn,z,Et,Kt,Zv,Jv,Wx],$r=e=>Cp.find(jp(e)),Kx=[...Cp,Oe,gn],qx=e=>Kx.find(jp(e));function Qx(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,kr(n))}function Xx(e,t){const n=Ao(e,t);let{transitionEnd:r={},transition:s={},...i}=n?e.makeTargetAnimatable(n,!1):{};i={...i,...r};for(const o in i){const a=fy(i[o]);Qx(e,o,a)}}function Yx(e,t,n){var r,s;const i=Object.keys(t).filter(a=>!e.hasValue(a)),o=i.length;if(o)for(let a=0;a<o;a++){const c=i[a],u=t[c];let h=null;Array.isArray(u)&&(h=u[0]),h===null&&(h=(s=(r=n[c])!==null&&r!==void 0?r:e.readValue(c))!==null&&s!==void 0?s:t[c]),h!=null&&(typeof h=="string"&&(kp(h)||bp(h))?h=parseFloat(h):!qx(h)&&gn.test(u)&&(h=Sp(c,u)),e.addValue(c,kr(h,{owner:e})),n[c]===void 0&&(n[c]=h),h!==null&&e.setBaseTarget(c,h))}}function Jx(e,t){return t?(t[e]||t.default||t).from:void 0}function Zx(e,t,n){const r={};for(const s in e){const i=Jx(s,t);if(i!==void 0)r[s]=i;else{const o=n.getValue(s);o&&(r[s]=o.get())}}return r}function ew({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function tw(e,t){const n=e.get();if(Array.isArray(t)){for(let r=0;r<t.length;r++)if(t[r]!==n)return!0}else return n!==t}function Pp(e,t,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:i=e.getDefaultTransition(),transitionEnd:o,...a}=e.makeTargetAnimatable(t);const c=e.getValue("willChange");r&&(i=r);const u=[],h=s&&e.animationState&&e.animationState.getState()[s];for(const d in a){const f=e.getValue(d),v=a[d];if(!f||v===void 0||h&&ew(h,d))continue;const x={delay:n,elapsed:0,...Vc(i||{},d)};if(window.HandoffAppearAnimations){const p=e.getProps()[Tm];if(p){const m=window.HandoffAppearAnimations(p,d,f,re);m!==null&&(x.elapsed=m,x.isHandoff=!0)}}let S=!x.isHandoff&&!tw(f,v);if(x.type==="spring"&&(f.getVelocity()||x.velocity)&&(S=!1),f.animation&&(S=!1),S)continue;f.start(Bc(d,f,v,e.shouldReduceMotion&&Un.has(d)?{type:!1}:x));const b=f.animation;no(c)&&(c.add(d),b.then(()=>c.remove(d))),u.push(b)}return o&&Promise.all(u).then(()=>{o&&Xx(e,o)}),u}function Sl(e,t,n={}){const r=Ao(e,t,n.custom);let{transition:s=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const i=r?()=>Promise.all(Pp(e,r,n)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:h,staggerDirection:d}=s;return nw(e,t,u+c,h,d,n)}:()=>Promise.resolve(),{when:a}=s;if(a){const[c,u]=a==="beforeChildren"?[i,o]:[o,i];return c().then(()=>u())}else return Promise.all([i(),o(n.delay)])}function nw(e,t,n=0,r=0,s=1,i){const o=[],a=(e.variantChildren.size-1)*r,c=s===1?(u=0)=>u*r:(u=0)=>a-u*r;return Array.from(e.variantChildren).sort(rw).forEach((u,h)=>{u.notify("AnimationStart",t),o.push(Sl(u,t,{...i,delay:n+c(h)}).then(()=>u.notify("AnimationComplete",t)))}),Promise.all(o)}function rw(e,t){return e.sortNodePosition(t)}function sw(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const s=t.map(i=>Sl(e,i,n));r=Promise.all(s)}else if(typeof t=="string")r=Sl(e,t,n);else{const s=typeof t=="function"?Ao(e,t,n.custom):t;r=Promise.all(Pp(e,s,n))}return r.then(()=>e.notify("AnimationComplete",t))}const iw=[...jc].reverse(),ow=jc.length;function aw(e){return t=>Promise.all(t.map(({animation:n,options:r})=>sw(e,n,r)))}function lw(e){let t=aw(e);const n=uw();let r=!0;const s=(c,u)=>{const h=Ao(e,u);if(h){const{transition:d,transitionEnd:f,...v}=h;c={...c,...v,...f}}return c};function i(c){t=c(e)}function o(c,u){const h=e.getProps(),d=e.getVariantContext(!0)||{},f=[],v=new Set;let x={},S=1/0;for(let p=0;p<ow;p++){const m=iw[p],g=n[m],w=h[m]!==void 0?h[m]:d[m],k=Ns(w),j=m===u?g.isActive:null;j===!1&&(S=p);let C=w===d[m]&&w!==h[m]&&k;if(C&&r&&e.manuallyAnimateOnMount&&(C=!1),g.protectedKeys={...x},!g.isActive&&j===null||!w&&!g.prevProp||To(w)||typeof w=="boolean")continue;let E=cw(g.prevProp,w)||m===u&&g.isActive&&!C&&k||p>S&&k,A=!1;const H=Array.isArray(w)?w:[w];let X=H.reduce(s,{});j===!1&&(X={});const{prevResolvedValues:q={}}=g,B={...q,...X},G=R=>{E=!0,v.has(R)&&(A=!0,v.delete(R)),g.needsAnimating[R]=!0};for(const R in B){const te=X[R],_=q[R];if(x.hasOwnProperty(R))continue;let M=!1;Ji(te)&&Ji(_)?M=!Qm(te,_):M=te!==_,M?te!==void 0?G(R):v.add(R):te!==void 0&&v.has(R)?G(R):g.protectedKeys[R]=!0}g.prevProp=w,g.prevResolvedValues=X,g.isActive&&(x={...x,...X}),r&&e.blockInitialAnimation&&(E=!1),E&&(!C||A)&&f.push(...H.map(R=>({animation:R,options:{type:m,...c}})))}if(v.size){const p={};v.forEach(m=>{const g=e.getBaseTarget(m);g!==void 0&&(p[m]=g)}),f.push({animation:p})}let b=!!f.length;return r&&(h.initial===!1||h.initial===h.animate)&&!e.manuallyAnimateOnMount&&(b=!1),r=!1,b?t(f):Promise.resolve()}function a(c,u,h){var d;if(n[c].isActive===u)return Promise.resolve();(d=e.variantChildren)===null||d===void 0||d.forEach(v=>{var x;return(x=v.animationState)===null||x===void 0?void 0:x.setActive(c,u)}),n[c].isActive=u;const f=o(h,c);for(const v in n)n[v].protectedKeys={};return f}return{animateChanges:o,setActive:a,setAnimateFunction:i,getState:()=>n}}function cw(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!Qm(t,e):!1}function Sn(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function uw(){return{animate:Sn(!0),whileInView:Sn(),whileHover:Sn(),whileTap:Sn(),whileDrag:Sn(),whileFocus:Sn(),exit:Sn()}}class dw extends wn{constructor(t){super(t),t.animationState||(t.animationState=lw(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();this.unmount(),To(t)&&(this.unmount=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let hw=0;class fw extends wn{constructor(){super(...arguments),this.id=hw++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n,custom:r}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===s)return;const i=this.node.animationState.setActive("exit",!t,{custom:r??this.node.getProps().custom});n&&!t&&i.then(()=>n(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const mw={animation:{Feature:dw},exit:{Feature:fw}},vd=(e,t)=>Math.abs(e-t);function pw(e,t){const n=vd(e.x,t.x),r=vd(e.y,t.y);return Math.sqrt(n**2+r**2)}class Tp{constructor(t,n,{transformPagePoint:r,contextWindow:s,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=fa(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,v=pw(d.offset,{x:0,y:0})>=3;if(!f&&!v)return;const{point:x}=d,{timestamp:S}=_e;this.history.push({...x,timestamp:S});const{onStart:b,onMove:p}=this.handlers;f||(b&&b(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),p&&p(this.lastMoveEvent,d)},this.handlePointerMove=(d,f)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=ha(f,this.transformPagePoint),re.update(this.updatePoint,!0)},this.handlePointerUp=(d,f)=>{this.end();const{onEnd:v,onSessionEnd:x,resumeAnimation:S}=this.handlers;if(this.dragSnapToOrigin&&S&&S(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const b=fa(d.type==="pointercancel"?this.lastMoveEventInfo:ha(f,this.transformPagePoint),this.history);this.startEvent&&v&&v(d,b),x&&x(d,b)},!Gm(t))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.contextWindow=s||window;const o=_o(t),a=ha(o,this.transformPagePoint),{point:c}=a,{timestamp:u}=_e;this.history=[{...c,timestamp:u}];const{onSessionStart:h}=n;h&&h(t,fa(a,this.history)),this.removeListeners=dn(Ft(this.contextWindow,"pointermove",this.handlePointerMove),Ft(this.contextWindow,"pointerup",this.handlePointerUp),Ft(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Gt(this.updatePoint)}}function ha(e,t){return t?{point:t(e.point)}:e}function yd(e,t){return{x:e.x-t.x,y:e.y-t.y}}function fa({point:e},t){return{point:e,delta:yd(e,Ep(t)),offset:yd(e,gw(t)),velocity:vw(t,.1)}}function gw(e){return e[0]}function Ep(e){return e[e.length-1]}function vw(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const s=Ep(e);for(;n>=0&&(r=e[n],!(s.timestamp-r.timestamp>hn(t)));)n--;if(!r)return{x:0,y:0};const i=Vt(s.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const o={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function et(e){return e.max-e.min}function bl(e,t=0,n=.01){return Math.abs(e-t)<=n}function xd(e,t,n,r=.5){e.origin=r,e.originPoint=ue(t.min,t.max,e.origin),e.scale=et(n)/et(t),(bl(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=ue(n.min,n.max,e.origin)-e.originPoint,(bl(e.translate)||isNaN(e.translate))&&(e.translate=0)}function cs(e,t,n,r){xd(e.x,t.x,n.x,r?r.originX:void 0),xd(e.y,t.y,n.y,r?r.originY:void 0)}function wd(e,t,n){e.min=n.min+t.min,e.max=e.min+et(t)}function yw(e,t,n){wd(e.x,t.x,n.x),wd(e.y,t.y,n.y)}function Sd(e,t,n){e.min=t.min-n.min,e.max=e.min+et(t)}function us(e,t,n){Sd(e.x,t.x,n.x),Sd(e.y,t.y,n.y)}function xw(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?ue(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?ue(n,e,r.max):Math.min(e,n)),e}function bd(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function ww(e,{top:t,left:n,bottom:r,right:s}){return{x:bd(e.x,n,s),y:bd(e.y,t,r)}}function kd(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function Sw(e,t){return{x:kd(e.x,t.x),y:kd(e.y,t.y)}}function bw(e,t){let n=.5;const r=et(e),s=et(t);return s>r?n=As(t.min,t.max-r,e.min):r>s&&(n=As(e.min,e.max-s,t.min)),pn(0,1,n)}function kw(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const kl=.35;function jw(e=kl){return e===!1?e=0:e===!0&&(e=kl),{x:jd(e,"left","right"),y:jd(e,"top","bottom")}}function jd(e,t,n){return{min:Cd(e,t),max:Cd(e,n)}}function Cd(e,t){return typeof e=="number"?e:e[t]||0}const Pd=()=>({translate:0,scale:1,origin:0,originPoint:0}),or=()=>({x:Pd(),y:Pd()}),Td=()=>({min:0,max:0}),ye=()=>({x:Td(),y:Td()});function it(e){return[e("x"),e("y")]}function Np({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function Cw({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function Pw(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function ma(e){return e===void 0||e===1}function jl({scale:e,scaleX:t,scaleY:n}){return!ma(e)||!ma(t)||!ma(n)}function Cn(e){return jl(e)||_p(e)||e.z||e.rotate||e.rotateX||e.rotateY}function _p(e){return Ed(e.x)||Ed(e.y)}function Ed(e){return e&&e!=="0%"}function ro(e,t,n){const r=e-n,s=t*r;return n+s}function Nd(e,t,n,r,s){return s!==void 0&&(e=ro(e,s,r)),ro(e,n,r)+t}function Cl(e,t=0,n=1,r,s){e.min=Nd(e.min,t,n,r,s),e.max=Nd(e.max,t,n,r,s)}function Ap(e,{x:t,y:n}){Cl(e.x,t.translate,t.scale,t.originPoint),Cl(e.y,n.translate,n.scale,n.originPoint)}function Tw(e,t,n,r=!1){const s=n.length;if(!s)return;t.x=t.y=1;let i,o;for(let a=0;a<s;a++){i=n[a],o=i.projectionDelta;const c=i.instance;c&&c.style&&c.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&ar(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,Ap(e,o)),r&&Cn(i.latestValues)&&ar(e,i.latestValues))}t.x=_d(t.x),t.y=_d(t.y)}function _d(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function Yt(e,t){e.min=e.min+t,e.max=e.max+t}function Ad(e,t,[n,r,s]){const i=t[s]!==void 0?t[s]:.5,o=ue(e.min,e.max,i);Cl(e,t[n],t[r],o,t.scale)}const Ew=["x","scaleX","originX"],Nw=["y","scaleY","originY"];function ar(e,t){Ad(e.x,t,Ew),Ad(e.y,t,Nw)}function Mp(e,t){return Np(Pw(e.getBoundingClientRect(),t))}function _w(e,t,n){const r=Mp(e,n),{scroll:s}=t;return s&&(Yt(r.x,s.offset.x),Yt(r.y,s.offset.y)),r}const Lp=({current:e})=>e?e.ownerDocument.defaultView:null,Aw=new WeakMap;class Mw{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ye(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=h=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(_o(h,"page").point)},i=(h,d)=>{const{drag:f,dragPropagation:v,onDragStart:x}=this.getProps();if(f&&!v&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=Wm(f),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),it(b=>{let p=this.getAxisMotionValue(b).get()||0;if(Et.test(p)){const{projection:m}=this.visualElement;if(m&&m.layout){const g=m.layout.layoutBox[b];g&&(p=et(g)*(parseFloat(p)/100))}}this.originPoint[b]=p}),x&&re.update(()=>x(h,d),!1,!0);const{animationState:S}=this.visualElement;S&&S.setActive("whileDrag",!0)},o=(h,d)=>{const{dragPropagation:f,dragDirectionLock:v,onDirectionLock:x,onDrag:S}=this.getProps();if(!f&&!this.openGlobalLock)return;const{offset:b}=d;if(v&&this.currentDirection===null){this.currentDirection=Lw(b),this.currentDirection!==null&&x&&x(this.currentDirection);return}this.updateAxis("x",d.point,b),this.updateAxis("y",d.point,b),this.visualElement.render(),S&&S(h,d)},a=(h,d)=>this.stop(h,d),c=()=>it(h=>{var d;return this.getAnimationState(h)==="paused"&&((d=this.getAxisMotionValue(h).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new Tp(t,{onSessionStart:s,onStart:i,onMove:o,onSessionEnd:a,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:Lp(this.visualElement)})}stop(t,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:s}=n;this.startAnimation(s);const{onDragEnd:i}=this.getProps();i&&re.update(()=>i(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:s}=this.getProps();if(!r||!ci(t,s,this.currentDirection))return;const i=this.getAxisMotionValue(t);let o=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(o=xw(o,this.constraints[t],this.elastic[t])),i.set(o)}resolveConstraints(){var t;const{dragConstraints:n,dragElastic:r}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,i=this.constraints;n&&sr(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&s?this.constraints=ww(s.layoutBox,n):this.constraints=!1,this.elastic=jw(r),i!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&it(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=kw(s.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!sr(t))return!1;const r=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=_w(r,s.root,this.visualElement.getTransformPagePoint());let o=Sw(s.layout.layoutBox,i);if(n){const a=n(Cw(o));this.hasMutatedConstraints=!!a,a&&(o=Np(a))}return o}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),c=this.constraints||{},u=it(h=>{if(!ci(h,n,this.currentDirection))return;let d=c&&c[h]||{};o&&(d={min:0,max:0});const f=s?200:1e6,v=s?40:1e7,x={type:"inertia",velocity:r?t[h]:0,bounceStiffness:f,bounceDamping:v,timeConstant:750,restDelta:1,restSpeed:10,...i,...d};return this.startAxisValueAnimation(h,x)});return Promise.all(u).then(a)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return r.start(Bc(t,r,0,n))}stopAnimation(){it(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){it(t=>{var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(t){const n="_drag"+t.toUpperCase(),r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){it(n=>{const{drag:r}=this.getProps();if(!ci(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(n);if(s&&s.layout){const{min:o,max:a}=s.layout.layoutBox[n];i.set(t[n]-ue(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!sr(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};it(o=>{const a=this.getAxisMotionValue(o);if(a){const c=a.get();s[o]=bw({min:c,max:c},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),it(o=>{if(!ci(o,t,null))return;const a=this.getAxisMotionValue(o),{min:c,max:u}=this.constraints[o];a.set(ue(c,u,s[o]))})}addListeners(){if(!this.visualElement.current)return;Aw.set(this.visualElement,this);const t=this.visualElement.current,n=Ft(t,"pointerdown",c=>{const{drag:u,dragListener:h=!0}=this.getProps();u&&h&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();sr(c)&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),r();const o=Rt(window,"resize",()=>this.scalePositionWithinConstraints()),a=s.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(it(h=>{const d=this.getAxisMotionValue(h);d&&(this.originPoint[h]+=c[h].translate,d.set(d.get()+c[h].translate))}),this.visualElement.render())});return()=>{o(),n(),i(),a&&a()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:o=kl,dragMomentum:a=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:i,dragElastic:o,dragMomentum:a}}}function ci(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function Lw(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class Dw extends wn{constructor(t){super(t),this.removeGroupControls=pe,this.removeListeners=pe,this.controls=new Mw(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||pe}unmount(){this.removeGroupControls(),this.removeListeners()}}const Md=e=>(t,n)=>{e&&re.update(()=>e(t,n))};class Rw extends wn{constructor(){super(...arguments),this.removePointerDownListener=pe}onPointerDown(t){this.session=new Tp(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Lp(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:Md(t),onStart:Md(n),onMove:r,onEnd:(i,o)=>{delete this.session,s&&re.update(()=>s(i,o))}}}mount(){this.removePointerDownListener=Ft(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function Iw(){const e=y.useContext(Co);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:n,register:r}=e,s=y.useId();return y.useEffect(()=>r(s),[]),!t&&n?[!1,()=>n&&n(s)]:[!0]}const ji={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Ld(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Wr={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(z.test(e))e=parseFloat(e);else return e;const n=Ld(e,t.target.x),r=Ld(e,t.target.y);return`${n}% ${r}%`}},Ow={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,s=gn.parse(e);if(s.length>5)return r;const i=gn.createTransformer(e),o=typeof s[0]!="number"?1:0,a=n.x.scale*t.x,c=n.y.scale*t.y;s[0+o]/=a,s[1+o]/=c;const u=ue(a,c,.5);return typeof s[2+o]=="number"&&(s[2+o]/=u),typeof s[3+o]=="number"&&(s[3+o]/=u),i(s)}};class Fw extends ce.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:i}=t;$v(Vw),i&&(n.group&&n.group.add(i),r&&r.register&&s&&r.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),ji.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:s,isPresent:i}=this.props,o=r.projection;return o&&(o.isPresent=i,s||t.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?o.promote():o.relegate()||re.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),queueMicrotask(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=t;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function Dp(e){const[t,n]=Iw(),r=y.useContext(Pc);return ce.createElement(Fw,{...e,layoutGroup:r,switchLayoutGroup:y.useContext(Nm),isPresent:t,safeToRemove:n})}const Vw={borderRadius:{...Wr,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Wr,borderTopRightRadius:Wr,borderBottomLeftRadius:Wr,borderBottomRightRadius:Wr,boxShadow:Ow},Rp=["TopLeft","TopRight","BottomLeft","BottomRight"],Bw=Rp.length,Dd=e=>typeof e=="string"?parseFloat(e):e,Rd=e=>typeof e=="number"||z.test(e);function zw(e,t,n,r,s,i){s?(e.opacity=ue(0,n.opacity!==void 0?n.opacity:1,Hw(r)),e.opacityExit=ue(t.opacity!==void 0?t.opacity:1,0,Uw(r))):i&&(e.opacity=ue(t.opacity!==void 0?t.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<Bw;o++){const a=`border${Rp[o]}Radius`;let c=Id(t,a),u=Id(n,a);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||Rd(c)===Rd(u)?(e[a]=Math.max(ue(Dd(c),Dd(u),r),0),(Et.test(u)||Et.test(c))&&(e[a]+="%")):e[a]=u}(t.rotate||n.rotate)&&(e.rotate=ue(t.rotate||0,n.rotate||0,r))}function Id(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const Hw=Ip(0,.5,sp),Uw=Ip(.5,.95,pe);function Ip(e,t,n){return r=>r<e?0:r>t?1:n(As(e,t,r))}function Od(e,t){e.min=t.min,e.max=t.max}function rt(e,t){Od(e.x,t.x),Od(e.y,t.y)}function Fd(e,t,n,r,s){return e-=t,e=ro(e,1/n,r),s!==void 0&&(e=ro(e,1/s,r)),e}function Gw(e,t=0,n=1,r=.5,s,i=e,o=e){if(Et.test(t)&&(t=parseFloat(t),t=ue(o.min,o.max,t/100)-o.min),typeof t!="number")return;let a=ue(i.min,i.max,r);e===i&&(a-=t),e.min=Fd(e.min,t,n,a,s),e.max=Fd(e.max,t,n,a,s)}function Vd(e,t,[n,r,s],i,o){Gw(e,t[n],t[r],t[s],t.scale,i,o)}const $w=["x","scaleX","originX"],Ww=["y","scaleY","originY"];function Bd(e,t,n,r){Vd(e.x,t,$w,n?n.x:void 0,r?r.x:void 0),Vd(e.y,t,Ww,n?n.y:void 0,r?r.y:void 0)}function zd(e){return e.translate===0&&e.scale===1}function Op(e){return zd(e.x)&&zd(e.y)}function Kw(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}function Fp(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function Hd(e){return et(e.x)/et(e.y)}class qw{constructor(){this.members=[]}add(t){zc(this.members,t),t.scheduleRender()}remove(t){if(Hc(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(s=>t===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Ud(e,t,n){let r="";const s=e.x.translate/t.x,i=e.y.translate/t.y;if((s||i)&&(r=`translate3d(${s}px, ${i}px, 0) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{rotate:c,rotateX:u,rotateY:h}=n;c&&(r+=`rotate(${c}deg) `),u&&(r+=`rotateX(${u}deg) `),h&&(r+=`rotateY(${h}deg) `)}const o=e.x.scale*t.x,a=e.y.scale*t.y;return(o!==1||a!==1)&&(r+=`scale(${o}, ${a})`),r||"none"}const Qw=(e,t)=>e.depth-t.depth;class Xw{constructor(){this.children=[],this.isDirty=!1}add(t){zc(this.children,t),this.isDirty=!0}remove(t){Hc(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(Qw),this.isDirty=!1,this.children.forEach(t)}}function Yw(e,t){const n=performance.now(),r=({timestamp:s})=>{const i=s-n;i>=t&&(Gt(r),e(i-t))};return re.read(r,!0),()=>Gt(r)}function Jw(e){window.MotionDebug&&window.MotionDebug.record(e)}function Zw(e){return e instanceof SVGElement&&e.tagName!=="svg"}function e1(e,t,n){const r=qe(e)?e:kr(e);return r.start(Bc("",r,t,n)),r.animation}const Gd=["","X","Y","Z"],t1={visibility:"hidden"},$d=1e3;let n1=0;const Pn={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function Vp({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(o={},a=t==null?void 0:t()){this.id=n1++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Pn.totalNodes=Pn.resolvedTargetDeltas=Pn.recalculatedProjection=0,this.nodes.forEach(i1),this.nodes.forEach(u1),this.nodes.forEach(d1),this.nodes.forEach(o1),Jw(Pn)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new Xw)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Uc),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const c=this.eventHandlers.get(o);c&&c.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=Zw(o),this.instance=o;const{layoutId:c,layout:u,visualElement:h}=this.options;if(h&&!h.current&&h.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(u||c)&&(this.isLayoutDirty=!0),e){let d;const f=()=>this.root.updateBlockedByResize=!1;e(o,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=Yw(f,250),ji.hasAnimatedSinceResize&&(ji.hasAnimatedSinceResize=!1,this.nodes.forEach(Kd))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&h&&(c||u)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:f,hasRelativeTargetChanged:v,layout:x})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const S=this.options.transition||h.getDefaultTransition()||g1,{onLayoutAnimationStart:b,onLayoutAnimationComplete:p}=h.getProps(),m=!this.targetLayout||!Fp(this.targetLayout,x)||v,g=!f&&v;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||g||f&&(m||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,g);const w={...Vc(S,"layout"),onPlay:b,onComplete:p};(h.shouldReduceMotion||this.options.layoutRoot)&&(w.delay=0,w.type=!1),this.startAnimation(w)}else f||Kd(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=x})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Gt(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(h1),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const d=this.path[h];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:a,layout:c}=this.options;if(a===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Wd);return}this.isUpdating||this.nodes.forEach(l1),this.isUpdating=!1,this.nodes.forEach(c1),this.nodes.forEach(r1),this.nodes.forEach(s1),this.clearAllSnapshots();const a=performance.now();_e.delta=pn(0,1e3/60,a-_e.timestamp),_e.timestamp=a,_e.isProcessing=!0,sa.update.process(_e),sa.preRender.process(_e),sa.render.process(_e),_e.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(a1),this.sharedNodes.forEach(f1)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,re.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){re.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ye(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:r(this.instance),offset:n(this.instance)})}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform,a=this.projectionDelta&&!Op(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,h=u!==this.prevTransformTemplateValue;o&&(a||Cn(this.latestValues)||h)&&(s(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let c=this.removeElementScroll(a);return o&&(c=this.removeTransform(c)),v1(c),{animationId:this.root.animationId,measuredBox:a,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return ye();const a=o.measureViewportBox(),{scroll:c}=this.root;return c&&(Yt(a.x,c.offset.x),Yt(a.y,c.offset.y)),a}removeElementScroll(o){const a=ye();rt(a,o);for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:h,options:d}=u;if(u!==this.root&&h&&d.layoutScroll){if(h.isRoot){rt(a,o);const{scroll:f}=this.root;f&&(Yt(a.x,-f.offset.x),Yt(a.y,-f.offset.y))}Yt(a.x,h.offset.x),Yt(a.y,h.offset.y)}}return a}applyTransform(o,a=!1){const c=ye();rt(c,o);for(let u=0;u<this.path.length;u++){const h=this.path[u];!a&&h.options.layoutScroll&&h.scroll&&h!==h.root&&ar(c,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),Cn(h.latestValues)&&ar(c,h.latestValues)}return Cn(this.latestValues)&&ar(c,this.latestValues),c}removeTransform(o){const a=ye();rt(a,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!Cn(u.latestValues))continue;jl(u.latestValues)&&u.updateSnapshot();const h=ye(),d=u.measurePageBox();rt(h,d),Bd(a,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,h)}return Cn(this.latestValues)&&Bd(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==_e.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==c;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:d,layoutId:f}=this.options;if(!(!this.layout||!(d||f))){if(this.resolvedRelativeTargetAt=_e.timestamp,!this.targetDelta&&!this.relativeTarget){const v=this.getClosestProjectingParent();v&&v.layout&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ye(),this.relativeTargetOrigin=ye(),us(this.relativeTargetOrigin,this.layout.layoutBox,v.layout.layoutBox),rt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=ye(),this.targetWithTransforms=ye()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),yw(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):rt(this.target,this.layout.layoutBox),Ap(this.target,this.targetDelta)):rt(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const v=this.getClosestProjectingParent();v&&!!v.resumingFrom==!!this.resumingFrom&&!v.options.layoutScroll&&v.target&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ye(),this.relativeTargetOrigin=ye(),us(this.relativeTargetOrigin,this.target,v.target),rt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Pn.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||jl(this.parent.latestValues)||_p(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),c=!!this.resumingFrom||this!==a;let u=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(u=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===_e.timestamp&&(u=!1),u)return;const{layout:h,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||d))return;rt(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,v=this.treeScale.y;Tw(this.layoutCorrected,this.treeScale,this.path,c),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox);const{target:x}=a;if(!x){this.projectionTransform&&(this.projectionDelta=or(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=or(),this.projectionDeltaWithTransform=or());const S=this.projectionTransform;cs(this.projectionDelta,this.layoutCorrected,x,this.latestValues),this.projectionTransform=Ud(this.projectionDelta,this.treeScale),(this.projectionTransform!==S||this.treeScale.x!==f||this.treeScale.y!==v)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",x)),Pn.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,a=!1){const c=this.snapshot,u=c?c.latestValues:{},h={...this.latestValues},d=or();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const f=ye(),v=c?c.source:void 0,x=this.layout?this.layout.source:void 0,S=v!==x,b=this.getStack(),p=!b||b.members.length<=1,m=!!(S&&!p&&this.options.crossfade===!0&&!this.path.some(p1));this.animationProgress=0;let g;this.mixTargetDelta=w=>{const k=w/1e3;qd(d.x,o.x,k),qd(d.y,o.y,k),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(us(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),m1(this.relativeTarget,this.relativeTargetOrigin,f,k),g&&Kw(this.relativeTarget,g)&&(this.isProjectionDirty=!1),g||(g=ye()),rt(g,this.relativeTarget)),S&&(this.animationValues=h,zw(h,u,this.latestValues,k,m,p)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=k},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Gt(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=re.update(()=>{ji.hasAnimatedSinceResize=!0,this.currentAnimation=e1(0,$d,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta($d),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:c,layout:u,latestValues:h}=o;if(!(!a||!c||!u)){if(this!==o&&this.layout&&u&&Bp(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||ye();const d=et(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+d;const f=et(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+f}rt(a,c),ar(a,h),cs(this.projectionDeltaWithTransform,this.layoutCorrected,a,h)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new qw),this.sharedNodes.get(o).add(a);const u=a.options.initialPromotionConfig;a.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:c}=o;if((c.rotate||c.rotateX||c.rotateY||c.rotateZ)&&(a=!0),!a)return;const u={};for(let h=0;h<Gd.length;h++){const d="rotate"+Gd[h];c[d]&&(u[d]=c[d],o.setStaticValue(d,0))}o.render();for(const h in u)o.setStaticValue(h,u[h]);o.scheduleRender()}getProjectionStyles(o){var a,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return t1;const u={visibility:""},h=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=ki(o==null?void 0:o.pointerEvents)||"",u.transform=h?h(this.latestValues,""):"none",u;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const S={};return this.options.layoutId&&(S.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,S.pointerEvents=ki(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Cn(this.latestValues)&&(S.transform=h?h({},""):"none",this.hasProjected=!1),S}const f=d.animationValues||d.latestValues;this.applyTransformsToTarget(),u.transform=Ud(this.projectionDeltaWithTransform,this.treeScale,f),h&&(u.transform=h(f,u.transform));const{x:v,y:x}=this.projectionDelta;u.transformOrigin=`${v.origin*100}% ${x.origin*100}% 0`,d.animationValues?u.opacity=d===this?(c=(a=f.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:u.opacity=d===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const S in Xi){if(f[S]===void 0)continue;const{correct:b,applyTo:p}=Xi[S],m=u.transform==="none"?f[S]:b(f[S],d);if(p){const g=p.length;for(let w=0;w<g;w++)u[p[w]]=m}else u[S]=m}return this.options.layoutId&&(u.pointerEvents=d===this?ki(o==null?void 0:o.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(Wd),this.root.sharedNodes.clear()}}}function r1(e){e.updateLayout()}function s1(e){var t;const n=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=e.layout,{animationType:i}=e.options,o=n.source!==e.layout.source;i==="size"?it(d=>{const f=o?n.measuredBox[d]:n.layoutBox[d],v=et(f);f.min=r[d].min,f.max=f.min+v}):Bp(i,n.layoutBox,r)&&it(d=>{const f=o?n.measuredBox[d]:n.layoutBox[d],v=et(r[d]);f.max=f.min+v,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[d].max=e.relativeTarget[d].min+v)});const a=or();cs(a,r,n.layoutBox);const c=or();o?cs(c,e.applyTransform(s,!0),n.measuredBox):cs(c,r,n.layoutBox);const u=!Op(a);let h=!1;if(!e.resumeFrom){const d=e.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:f,layout:v}=d;if(f&&v){const x=ye();us(x,n.layoutBox,f.layoutBox);const S=ye();us(S,r,v.layoutBox),Fp(x,S)||(h=!0),d.options.layoutRoot&&(e.relativeTarget=S,e.relativeTargetOrigin=x,e.relativeParent=d)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:c,layoutDelta:a,hasLayoutChanged:u,hasRelativeTargetChanged:h})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function i1(e){Pn.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function o1(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function a1(e){e.clearSnapshot()}function Wd(e){e.clearMeasurements()}function l1(e){e.isLayoutDirty=!1}function c1(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function Kd(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function u1(e){e.resolveTargetDelta()}function d1(e){e.calcProjection()}function h1(e){e.resetRotation()}function f1(e){e.removeLeadSnapshot()}function qd(e,t,n){e.translate=ue(t.translate,0,n),e.scale=ue(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function Qd(e,t,n,r){e.min=ue(t.min,n.min,r),e.max=ue(t.max,n.max,r)}function m1(e,t,n,r){Qd(e.x,t.x,n.x,r),Qd(e.y,t.y,n.y,r)}function p1(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const g1={duration:.45,ease:[.4,0,.1,1]},Xd=e=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(e),Yd=Xd("applewebkit/")&&!Xd("chrome/")?Math.round:pe;function Jd(e){e.min=Yd(e.min),e.max=Yd(e.max)}function v1(e){Jd(e.x),Jd(e.y)}function Bp(e,t,n){return e==="position"||e==="preserve-aspect"&&!bl(Hd(t),Hd(n),.2)}const y1=Vp({attachResizeListener:(e,t)=>Rt(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),pa={current:void 0},zp=Vp({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!pa.current){const e=new y1({});e.mount(window),e.setOptions({layoutScroll:!0}),pa.current=e}return pa.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),x1={pan:{Feature:Rw},drag:{Feature:Dw,ProjectionNode:zp,MeasureLayout:Dp}},w1=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function S1(e){const t=w1.exec(e);if(!t)return[,];const[,n,r]=t;return[n,r]}function Pl(e,t,n=1){const[r,s]=S1(e);if(!r)return;const i=window.getComputedStyle(t).getPropertyValue(r);if(i){const o=i.trim();return kp(o)?parseFloat(o):o}else return pl(s)?Pl(s,t,n+1):s}function b1(e,{...t},n){const r=e.current;if(!(r instanceof Element))return{target:t,transitionEnd:n};n&&(n={...n}),e.values.forEach(s=>{const i=s.get();if(!pl(i))return;const o=Pl(i,r);o&&s.set(o)});for(const s in t){const i=t[s];if(!pl(i))continue;const o=Pl(i,r);o&&(t[s]=o,n||(n={}),n[s]===void 0&&(n[s]=i))}return{target:t,transitionEnd:n}}const k1=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),Hp=e=>k1.has(e),j1=e=>Object.keys(e).some(Hp),Zd=e=>e===Gn||e===z,eh=(e,t)=>parseFloat(e.split(", ")[t]),th=(e,t)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const s=r.match(/^matrix3d\((.+)\)$/);if(s)return eh(s[1],t);{const i=r.match(/^matrix\((.+)\)$/);return i?eh(i[1],e):0}},C1=new Set(["x","y","z"]),P1=Os.filter(e=>!C1.has(e));function T1(e){const t=[];return P1.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t.length&&e.render(),t}const jr={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:th(4,13),y:th(5,14)};jr.translateX=jr.x;jr.translateY=jr.y;const E1=(e,t,n)=>{const r=t.measureViewportBox(),s=t.current,i=getComputedStyle(s),{display:o}=i,a={};o==="none"&&t.setStaticValue("display",e.display||"block"),n.forEach(u=>{a[u]=jr[u](r,i)}),t.render();const c=t.measureViewportBox();return n.forEach(u=>{const h=t.getValue(u);h&&h.jump(a[u]),e[u]=jr[u](c,i)}),e},N1=(e,t,n={},r={})=>{t={...t},r={...r};const s=Object.keys(t).filter(Hp);let i=[],o=!1;const a=[];if(s.forEach(c=>{const u=e.getValue(c);if(!e.hasValue(c))return;let h=n[c],d=$r(h);const f=t[c];let v;if(Ji(f)){const x=f.length,S=f[0]===null?1:0;h=f[S],d=$r(h);for(let b=S;b<x&&f[b]!==null;b++)v?Dc($r(f[b])===v):v=$r(f[b])}else v=$r(f);if(d!==v)if(Zd(d)&&Zd(v)){const x=u.get();typeof x=="string"&&u.set(parseFloat(x)),typeof f=="string"?t[c]=parseFloat(f):Array.isArray(f)&&v===z&&(t[c]=f.map(parseFloat))}else d!=null&&d.transform&&(v!=null&&v.transform)&&(h===0||f===0)?h===0?u.set(v.transform(h)):t[c]=d.transform(f):(o||(i=T1(e),o=!0),a.push(c),r[c]=r[c]!==void 0?r[c]:t[c],u.jump(f))}),a.length){const c=a.indexOf("height")>=0?window.pageYOffset:null,u=E1(t,e,a);return i.length&&i.forEach(([h,d])=>{e.getValue(h).set(d)}),e.render(),Po&&c!==null&&window.scrollTo({top:c}),{target:u,transitionEnd:r}}else return{target:t,transitionEnd:r}};function _1(e,t,n,r){return j1(t)?N1(e,t,n,r):{target:t,transitionEnd:r}}const A1=(e,t,n,r)=>{const s=b1(e,t,r);return t=s.target,r=s.transitionEnd,_1(e,t,n,r)},Tl={current:null},Up={current:!1};function M1(){if(Up.current=!0,!!Po)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Tl.current=e.matches;e.addListener(t),t()}else Tl.current=!1}function L1(e,t,n){const{willChange:r}=t;for(const s in t){const i=t[s],o=n[s];if(qe(i))e.addValue(s,i),no(r)&&r.add(s);else if(qe(o))e.addValue(s,kr(i,{owner:e})),no(r)&&r.remove(s);else if(o!==i)if(e.hasValue(s)){const a=e.getValue(s);!a.hasAnimated&&a.set(i)}else{const a=e.getStaticValue(s);e.addValue(s,kr(a!==void 0?a:i,{owner:e}))}}for(const s in n)t[s]===void 0&&e.removeValue(s);return t}const nh=new WeakMap,Gp=Object.keys(_s),D1=Gp.length,rh=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],R1=Cc.length;class I1{constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:s,visualState:i},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>re.render(this.render,!1,!0);const{latestValues:a,renderState:c}=i;this.latestValues=a,this.baseTarget={...a},this.initialValues=n.initial?{...a}:{},this.renderState=c,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=o,this.isControllingVariants=Eo(n),this.isVariantNode=Em(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:u,...h}=this.scrapeMotionValuesFromProps(n,{});for(const d in h){const f=h[d];a[d]!==void 0&&qe(f)&&(f.set(a[d],!1),no(u)&&u.add(d))}}scrapeMotionValuesFromProps(t,n){return{}}mount(t){this.current=t,nh.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),Up.current||M1(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Tl.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){nh.delete(this.current),this.projection&&this.projection.unmount(),Gt(this.notifyUpdate),Gt(this.render),this.valueSubscriptions.forEach(t=>t()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features)this.features[t].unmount();this.current=null}bindToMotionValue(t,n){const r=Un.has(t),s=n.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&re.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),i=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,()=>{s(),i()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}loadFeatures({children:t,...n},r,s,i){let o,a;for(let c=0;c<D1;c++){const u=Gp[c],{isEnabled:h,Feature:d,ProjectionNode:f,MeasureLayout:v}=_s[u];f&&(o=f),h(n)&&(!this.features[u]&&d&&(this.features[u]=new d(this)),v&&(a=v))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:c,layout:u,drag:h,dragConstraints:d,layoutScroll:f,layoutRoot:v}=n;this.projection.setOptions({layoutId:c,layout:u,alwaysMeasureLayout:!!h||d&&sr(d),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof u=="string"?u:"both",initialPromotionConfig:i,layoutScroll:f,layoutRoot:v})}return a}updateFeatures(){for(const t in this.features){const n=this.features[t];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ye()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}makeTargetAnimatable(t,n=!0){return this.makeTargetAnimatableFromInstance(t,this.props,n)}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<rh.length;r++){const s=rh[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i=t["on"+s];i&&(this.propEventSubscriptions[s]=this.on(s,i))}this.prevMotionValues=L1(this,this.scrapeMotionValuesFromProps(t,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(t=!1){if(t)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const n={};for(let r=0;r<R1;r++){const s=Cc[r],i=this.props[s];(Ns(i)||i===!1)&&(n[s]=i)}return n}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){n!==this.values.get(t)&&(this.removeValue(t),this.bindToMotionValue(t,n)),this.values.set(t,n),this.latestValues[t]=n.get()}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=kr(n,{owner:this}),this.addValue(t,r)),r}readValue(t){var n;return this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(n=this.getBaseTargetFromProps(this.props,t))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,t,this.options)}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var n;const{initial:r}=this.props,s=typeof r=="string"||typeof r=="object"?(n=Lc(this.props,r))===null||n===void 0?void 0:n[t]:void 0;if(r&&s!==void 0)return s;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!qe(i)?i:this.initialValues[t]!==void 0&&s===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new Uc),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class $p extends I1{sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}makeTargetAnimatableFromInstance({transition:t,transitionEnd:n,...r},{transformValues:s},i){let o=Zx(r,t||{},this);if(s&&(n&&(n=s(n)),r&&(r=s(r)),o&&(o=s(o))),i){Yx(this,r,o);const a=A1(this,r,o,n);n=a.transitionEnd,r=a.target}return{transition:t,transitionEnd:n,...r}}}function O1(e){return window.getComputedStyle(e)}class F1 extends $p{constructor(){super(...arguments),this.type="html"}readValueFromInstance(t,n){if(Un.has(n)){const r=Fc(n);return r&&r.default||0}else{const r=O1(t),s=(Mm(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(t,{transformPagePoint:n}){return Mp(t,n)}build(t,n,r,s){Ec(t,n,r,s.transformTemplate)}scrapeMotionValuesFromProps(t,n){return Mc(t,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;qe(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(t,n,r,s){Fm(t,n,r,s)}}class V1 extends $p{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(Un.has(n)){const r=Fc(n);return r&&r.default||0}return n=Vm.has(n)?n:kc(n),t.getAttribute(n)}measureInstanceViewportBox(){return ye()}scrapeMotionValuesFromProps(t,n){return zm(t,n)}build(t,n,r,s){_c(t,n,r,this.isSVGTag,s.transformTemplate)}renderInstance(t,n,r,s){Bm(t,n,r,s)}mount(t){this.isSVGTag=Ac(t.tagName),super.mount(t)}}const B1=(e,t)=>Tc(e)?new V1(t,{enableHardwareAcceleration:!1}):new F1(t,{enableHardwareAcceleration:!0}),z1={layout:{ProjectionNode:zp,MeasureLayout:Dp}},H1={...mw,...Dy,...x1,...z1},T=Uv((e,t)=>Sy(e,t,H1,B1));function Wp(){const e=y.useRef(!1);return bc(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function U1(){const e=Wp(),[t,n]=y.useState(0),r=y.useCallback(()=>{e.current&&n(t+1)},[t]);return[y.useCallback(()=>re.postRender(r),[r]),t]}class G1 extends y.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function $1({children:e,isPresent:t}){const n=y.useId(),r=y.useRef(null),s=y.useRef({width:0,height:0,top:0,left:0});return y.useInsertionEffect(()=>{const{width:i,height:o,top:a,left:c}=s.current;if(t||!r.current||!i||!o)return;r.current.dataset.motionPopId=n;const u=document.createElement("style");return document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${i}px !important;
            height: ${o}px !important;
            top: ${a}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[t]),y.createElement(G1,{isPresent:t,childRef:r,sizeRef:s},y.cloneElement(e,{ref:r}))}const ga=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:i,mode:o})=>{const a=Hm(W1),c=y.useId(),u=y.useMemo(()=>({id:c,initial:t,isPresent:n,custom:s,onExitComplete:h=>{a.set(h,!0);for(const d of a.values())if(!d)return;r&&r()},register:h=>(a.set(h,!1),()=>a.delete(h))}),i?void 0:[n]);return y.useMemo(()=>{a.forEach((h,d)=>a.set(d,!1))},[n]),y.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),o==="popLayout"&&(e=y.createElement($1,{isPresent:n},e)),y.createElement(Co.Provider,{value:u},e)};function W1(){return new Map}function K1(e){return y.useEffect(()=>()=>e(),[])}const Tn=e=>e.key||"";function q1(e,t){e.forEach(n=>{const r=Tn(n);t.set(r,n)})}function Q1(e){const t=[];return y.Children.forEach(e,n=>{y.isValidElement(n)&&t.push(n)}),t}const me=({children:e,custom:t,initial:n=!0,onExitComplete:r,exitBeforeEnter:s,presenceAffectsLayout:i=!0,mode:o="sync"})=>{const a=y.useContext(Pc).forceRender||U1()[0],c=Wp(),u=Q1(e);let h=u;const d=y.useRef(new Map).current,f=y.useRef(h),v=y.useRef(new Map).current,x=y.useRef(!0);if(bc(()=>{x.current=!1,q1(u,v),f.current=h}),K1(()=>{x.current=!0,v.clear(),d.clear()}),x.current)return y.createElement(y.Fragment,null,h.map(m=>y.createElement(ga,{key:Tn(m),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:i,mode:o},m)));h=[...h];const S=f.current.map(Tn),b=u.map(Tn),p=S.length;for(let m=0;m<p;m++){const g=S[m];b.indexOf(g)===-1&&!d.has(g)&&d.set(g,void 0)}return o==="wait"&&d.size&&(h=[]),d.forEach((m,g)=>{if(b.indexOf(g)!==-1)return;const w=v.get(g);if(!w)return;const k=S.indexOf(g);let j=m;if(!j){const C=()=>{d.delete(g);const P=Array.from(v.keys()).filter(E=>!b.includes(E));if(P.forEach(E=>v.delete(E)),f.current=u.filter(E=>{const A=Tn(E);return A===g||P.includes(A)}),!d.size){if(c.current===!1)return;a(),r&&r()}};j=y.createElement(ga,{key:Tn(w),isPresent:!1,onExitComplete:C,custom:t,presenceAffectsLayout:i,mode:o},w),d.set(g,j)}h.splice(k,0,j)}),h=h.map(m=>{const g=m.key;return d.has(g)?m:y.createElement(ga,{key:Tn(m),isPresent:!0,presenceAffectsLayout:i,mode:o},m)}),y.createElement(y.Fragment,null,d.size?h:h.map(m=>y.cloneElement(m)))},bn={I:"I",O:"O",T:"T",S:"S",Z:"Z",J:"J",L:"L"},Kp={[bn.I]:{shape:[[0,0,0,0],[1,1,1,1],[0,0,0,0],[0,0,0,0]],color:"#00f5ff",emoji:"",name:"I-Piece"},[bn.O]:{shape:[[1,1],[1,1]],color:"#ffff00",emoji:"",name:"O-Piece"},[bn.T]:{shape:[[0,1,0],[1,1,1],[0,0,0]],color:"#a000f0",emoji:"",name:"T-Piece"},[bn.S]:{shape:[[0,1,1],[1,1,0],[0,0,0]],color:"#00f000",emoji:"",name:"S-Piece"},[bn.Z]:{shape:[[1,1,0],[0,1,1],[0,0,0]],color:"#f00000",emoji:"",name:"Z-Piece"},[bn.J]:{shape:[[1,0,0],[1,1,1],[0,0,0]],color:"#0000f0",emoji:"",name:"J-Piece"},[bn.L]:{shape:[[0,0,1],[1,1,1],[0,0,0]],color:"#ff7f00",emoji:"",name:"L-Piece"}};let ct={...Kp};function sh(e){if(!e||!e.pieces){ct={...Kp};return}Object.keys(ct).forEach(t=>{e.pieces[t]&&(ct[t]={...ct[t],color:e.pieces[t].color,emoji:e.pieces[t].emoji})})}if(typeof window<"u"){window.addEventListener("themeEquipped",e=>{sh(e.detail.theme)});try{const e=localStorage.getItem("cat-tetris-shopInventory");if(e){const n=JSON.parse(e).equippedTheme;jm(()=>Promise.resolve().then(()=>FS),void 0).then(({PIECE_THEMES:r})=>{r[n]&&sh(r[n])})}}catch{}}let At=[],so=0;function X1(){At=Object.keys(ct);for(let e=At.length-1;e>0;e--){const t=Math.floor(Math.random()*(e+1));[At[e],At[t]]=[At[t],At[e]]}so=0}function Y1(){At=[],so=0}function qp(){so>=At.length&&X1();const e=At[so++];let t={x:3,y:0};return e==="I"&&(t={x:3,y:-2}),{type:e,shape:ct[e].shape,color:ct[e].color,emoji:ct[e].emoji,name:ct[e].name,position:t}}function J1(e=3){const t=[];for(let n=0;n<e;n++)t.push(qp());return t}function pr(e){return{"#00f5ff":"#00f5ff","#ffff00":"#ffff00","#a000f0":"#a000f0","#00f000":"#00f000","#f00000":"#f00000","#0000f0":"#0000f0","#ff7f00":"#ff7f00"}[e]||e}class Z1{constructor(){this.events={}}on(t,n){this.events[t]||(this.events[t]=[]),this.events[t].push(n)}off(t,n){this.events[t]&&(this.events[t]=this.events[t].filter(r=>r!==n))}emit(t,n){this.events[t]&&this.events[t].forEach(r=>{try{r(n)}catch(s){typeof window<"u"&&window.__ERROR_LOGGER__&&window.__ERROR_LOGGER__.logError("EventEmitter",`emit:${t}`,s.message,{event:t,stack:s.stack})}})}clear(){this.events={}}}const L=new Z1,O={GAME_INITIALIZED:"game_initialized",PIECE_MOVED:"piece_moved",PIECE_ROTATED:"piece_rotated",PIECE_PLACED:"piece_placed",PIECE_HELD:"piece_held",HARD_DROP:"hard_drop",LINE_CLEARED:"line_cleared",T_SPIN:"t_spin",BACK_TO_BACK:"back_to_back",SCORE_UPDATED:"score_updated",LEVEL_UP:"level_up",GAME_OVER:"game_over",GAME_PAUSED:"game_paused",GAME_RESUMED:"game_resumed"},Ci=2;function eS({text:e,color:t,id:n}){return l.jsx(T.div,{initial:{opacity:1,y:0,scale:.5},animate:{opacity:0,y:-60,scale:1.3},exit:{opacity:0},transition:{duration:1.2,ease:"easeOut"},className:"absolute left-1/2 top-1/3 -translate-x-1/2 pointer-events-none font-black text-lg drop-shadow-lg whitespace-nowrap",style:{color:t,zIndex:50,textShadow:`0 0 12px ${t}`},children:e},n)}function tS({lines:e}){const t=y.useMemo(()=>{const n=[];return e.forEach(r=>{for(let s=0;s<14;s++)n.push({id:`${r}-${s}`,startX:Math.random()*220,startY:(r+Ci)*21+10,endX:(Math.random()-.5)*300,endY:-(Math.random()*120+40),size:Math.random()*5+2,color:["#FFD700","#FF6B6B","#4ECDC4","#A78BFA","#F472B6","#34D399"][Math.floor(Math.random()*6)],delay:Math.random()*.15})}),n},[e]);return l.jsx("div",{className:"absolute inset-0 pointer-events-none overflow-visible",style:{zIndex:35},children:t.map(n=>l.jsx(T.div,{initial:{x:n.startX,y:n.startY,scale:1,opacity:1},animate:{x:n.startX+n.endX,y:n.startY+n.endY,scale:0,opacity:0},transition:{duration:.8,delay:n.delay,ease:"easeOut"},className:"absolute rounded-full",style:{width:n.size,height:n.size,backgroundColor:n.color,boxShadow:`0 0 ${n.size+4}px ${n.color}`}},n.id))})}const nS=({board:e,currentPiece:t,dropPreview:n,gameOver:r})=>{var S;const[s,i]=y.useState([]),[o,a]=y.useState([]),[c,u]=y.useState(0),h=y.useRef(0),d=y.useRef(null),f=((S=e==null?void 0:e[0])==null?void 0:S.length)||10,v=y.useMemo(()=>[...Array(Ci).fill(null).map(()=>Array(f).fill(null)),...e],[e,f]);y.useEffect(()=>{const b=()=>{u(.12),setTimeout(()=>u(0),150)};return L.on("hard_drop",b),()=>L.off("hard_drop",b)},[]),y.useEffect(()=>{const b=[];for(let p=0;p<e.length;p++)e[p]&&e[p].every(m=>m!==null)&&b.push(p);b.length>0&&(i(b),u(b.length>=4?.3:.18),setTimeout(()=>u(0),250),setTimeout(()=>i([]),800))},[e]),y.useEffect(()=>{const b=p=>{const m=(p==null?void 0:p.linesCleared)||0;if(m<=0)return;let g,w;m===1?(g="Single",w="#4ECDC4"):m===2?(g="Double!",w="#A78BFA"):m===3?(g="Triple!!",w="#F472B6"):(g=" TETRIS!! ",w="#FFD700");const k=++h.current;a(j=>[...j,{id:k,text:g,color:w}]),setTimeout(()=>a(j=>j.filter(C=>C.id!==k)),1400)};return L.on("line_cleared",b),()=>L.off("line_cleared",b)},[]),y.useEffect(()=>{const b=p=>{const m=(p==null?void 0:p.combo)||0;if(m>=2){const g=++h.current;a(w=>[...w,{id:g,text:`${m}x Combo! `,color:"#FF6B6B"}]),setTimeout(()=>a(w=>w.filter(k=>k.id!==g)),1400)}};return L.on("score_updated",b),()=>L.off("score_updated",b)},[]),y.useEffect(()=>{const b=()=>{const p=++h.current;a(m=>[...m,{id:p,text:" Back-to-Back!",color:"#FBBF24"}]),setTimeout(()=>a(m=>m.filter(g=>g.id!==p)),1400)};return L.on("back_to_back",b),()=>L.off("back_to_back",b)},[]),y.useEffect(()=>{const b=()=>{const p=++h.current;a(m=>[...m,{id:p,text:"T-SPIN!",color:"#C084FC"}]),setTimeout(()=>a(m=>m.filter(g=>g.id!==p)),1400)};return L.on("t_spin",b),()=>L.off("t_spin",b)},[]);const x=y.useCallback((b,p,m,g)=>{let w=null,k=null;const j=s.includes(m);if(t){const{position:{x:C,y:P},shape:E}=t;for(let A=0;A<E.length;A++){for(let H=0;H<E[A].length;H++)E[A][H]&&C+H===p&&P+A===m&&(w=t);if(w)break}}if(n&&n!==t){const{position:{x:C,y:P},shape:E}=n;for(let A=0;A<E.length;A++){for(let H=0;H<E[A].length;H++)E[A][H]&&C+H===p&&P+A===m&&(k=n);if(k)break}}if(w){const C=pr(w.color);return l.jsx("div",{className:"tetris-cell rounded-sm flex items-center justify-center border border-white/40",style:{backgroundColor:C,boxShadow:`0 0 6px ${C}80, inset 0 1px 0 rgba(255,255,255,0.3)`},children:l.jsx("span",{className:"text-xs drop-shadow",children:w.emoji})},`${p}-${m}`)}if(k){const C=pr(k.color);return l.jsx("div",{className:"tetris-cell rounded-sm flex items-center justify-center border-2 border-dashed",style:{borderColor:C+"50",backgroundColor:C+"12"},children:l.jsx("span",{className:"text-xs opacity-30",children:k.emoji})},`${p}-${m}`)}if(b){const C=pr(b.color);return l.jsx("div",{className:`cat-block tetris-cell rounded-sm flex items-center justify-center ${j?"line-clearing":""}`,style:{backgroundColor:j?"#fff":C,borderColor:"rgba(255, 255, 255, 0.35)",boxShadow:j?`0 0 20px #fff, 0 0 40px ${C}`:"inset 0 1px 0 rgba(255,255,255,0.25), 0 1px 3px rgba(0,0,0,0.3)",transform:j?"scale(1.1)":void 0,transition:"all 0.15s ease-out",zIndex:j?10:1},children:l.jsx("span",{className:`text-xs ${j?"opacity-0":""}`,children:b.emoji})},`${p}-${m}`)}return l.jsx("div",{className:`tetris-cell rounded-sm ${g?"bg-gray-900/30 border border-gray-500/10":"border border-white/[0.06] bg-white/[0.02]"}`},`${p}-${m}`)},[t,n,s]);return l.jsx("div",{className:"flex flex-col items-center",children:l.jsx("div",{className:"relative bg-gray-900/60 p-3 rounded-xl border-2 border-white/15 shadow-2xl overflow-hidden flex-shrink-0",ref:d,style:{width:"fit-content"},children:l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"tetris-grid",children:v.map((b,p)=>{const m=p-Ci,g=p<Ci;return b.map((w,k)=>x(w,k,m,g))})}),s.length>0&&l.jsx(l.Fragment,{children:l.jsx(tS,{lines:s})}),l.jsx(me,{children:c>0&&l.jsx(T.div,{initial:{opacity:c},animate:{opacity:0},exit:{opacity:0},transition:{duration:.3},className:"absolute inset-0 rounded-lg pointer-events-none",style:{background:"white",zIndex:20}},"flash")}),l.jsx(me,{children:o.map(b=>l.jsx(eS,{id:b.id,text:b.text,color:b.color},b.id))}),r&&l.jsx(T.div,{initial:{opacity:0},animate:{opacity:1},className:"absolute inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center rounded-lg",style:{zIndex:50},children:l.jsxs(T.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",damping:12},className:"text-center",children:[l.jsx("div",{className:"text-5xl mb-2",children:""}),l.jsx("div",{className:"text-white font-black text-xl drop-shadow-lg",children:"Game Over!"})]})})]})})})},Vn=ce.memo(nS);class rS{constructor(){this.HIGH_SCORE_KEY="tetris_high_score"}getHighScore(){try{const t=localStorage.getItem(this.HIGH_SCORE_KEY);return t?parseInt(t,10):0}catch{return 0}}saveHighScore(t){try{const n=this.getHighScore();return t>n?(localStorage.setItem(this.HIGH_SCORE_KEY,t.toString()),!0):!1}catch{return!1}}clearHighScore(){try{localStorage.removeItem(this.HIGH_SCORE_KEY)}catch{}}}const ih=new rS,sS=({score:e,level:t,lines:n,combo:r})=>{const[s,i]=y.useState(0);return y.useEffect(()=>{i(ih.getHighScore())},[]),y.useEffect(()=>{ih.saveHighScore(e)&&i(e)},[e]),l.jsxs("div",{className:"bg-gray-900/50 p-2 rounded-xl border-2 border-white/20 shadow-2xl w-28",children:[l.jsx("h2",{className:"text-xs font-bold text-white mb-1 text-center",children:" Pontuao"}),l.jsxs("div",{className:"space-y-0.5 text-xs",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-white/70",children:"Pontos:"}),l.jsx("span",{className:"text-yellow-400 font-bold",children:e.toLocaleString()})]}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-white/70",children:"Recorde:"}),l.jsx("span",{className:"text-green-400 font-bold",children:s.toLocaleString()})]}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-white/70",children:"Nvel:"}),l.jsx("span",{className:"text-blue-400 font-bold",children:t})]}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-white/70",children:"Linhas:"}),l.jsx("span",{className:"text-purple-400 font-bold",children:n})]}),r>0&&l.jsxs("div",{className:"flex justify-between items-center bg-orange-500/20 px-1.5 py-0.5 rounded border border-orange-400/30 mt-0.5",children:[l.jsx("span",{className:"text-white/90",children:"Combo:"}),l.jsxs("span",{className:"text-orange-400 font-bold",children:[r,"x"]})]})]})]})},Cr=ce.memo(sS),iS=({onMove:e,onRotate:t,onHardDrop:n,onPause:r,onHold:s,isPaused:i,gameOver:o,canHold:a})=>{const c=u=>{if(!o)switch(u){case"left":e("left");break;case"right":e("right");break;case"down":e("down");break;case"rotate":t();break;case"hardDrop":n();break;case"hold":s();break;case"pause":r();break}};return l.jsxs("div",{className:"flex flex-col items-center gap-1",children:[l.jsx("div",{className:"hidden lg:block",children:l.jsx("div",{className:"text-center text-white/50 text-[11px]",children:l.jsx("p",{children:"  mover |  girar |  soft | Espao = hard drop | C = hold"})})}),l.jsxs("div",{className:"lg:hidden",children:[l.jsxs("div",{className:"grid grid-cols-3 gap-3 max-w-xs",children:[l.jsx("div",{}),l.jsx(T.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>c("rotate"),disabled:o,className:"bg-blue-500 text-white p-4 rounded-full shadow-lg hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed",children:""}),l.jsx("div",{}),l.jsx(T.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>c("left"),disabled:o,className:"bg-gray-600 text-white p-4 rounded-full shadow-lg hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:""}),l.jsx(T.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>c("down"),disabled:o,className:"bg-gray-600 text-white p-4 rounded-full shadow-lg hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:""}),l.jsx(T.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>c("right"),disabled:o,className:"bg-gray-600 text-white p-4 rounded-full shadow-lg hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:""}),l.jsx(T.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>c("hardDrop"),disabled:o,className:"bg-red-500 text-white p-4 rounded-full shadow-lg hover:bg-red-600 disabled:opacity-50 disabled:cursor-not-allowed",children:""}),l.jsx(T.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>c("hold"),disabled:o||!a,className:`p-4 rounded-full shadow-lg disabled:opacity-50 disabled:cursor-not-allowed ${a?"bg-green-500 text-white hover:bg-green-600":"bg-gray-500 text-white"}`,children:""})]}),l.jsx("div",{className:"mt-4 flex justify-center",children:l.jsx(T.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>c("pause"),disabled:o,className:"bg-yellow-500 text-white px-6 py-3 rounded-lg shadow-lg hover:bg-yellow-600 disabled:opacity-50 disabled:cursor-not-allowed",children:i?" Continuar":" Pausar"})}),l.jsxs("div",{className:"mt-4 text-center text-white/60 text-xs",children:[l.jsx("p",{children:" Controles touch-friendly"}),l.jsx("p",{children:" Use a sombra para planejar!"})]})]})]})};function oS({scoreData:e,onClose:t}){const[n,r]=y.useState(!1),s=` Cat Tetris!
 ${e.score.toLocaleString()} pontos
 Nvel ${e.level}
 ${e.lines} linhas

Consegue me superar? `,i=async()=>{try{await navigator.clipboard.writeText(s),r(!0),setTimeout(()=>r(!1),2e3)}catch{}},o=async()=>{if(navigator.share)try{await navigator.share({title:"Minha pontuao no Cat Tetris",text:s})}catch(u){u.name}},a=()=>{const u=`https://twitter.com/intent/tweet?text=${encodeURIComponent(s)}`;window.open(u,"_blank","width=600,height=400")},c=()=>{const u=`https://wa.me/?text=${encodeURIComponent(s)}`;window.open(u,"_blank")};return l.jsxs(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-black/40 rounded-lg p-4 mt-4",children:[l.jsx("div",{className:"text-white/80 text-sm mb-3 text-center",children:"Compartilhe sua pontuao:"}),l.jsxs("div",{className:"flex flex-wrap gap-2 justify-center",children:[navigator.share&&l.jsx(T.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:o,className:"bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-lg font-bold flex items-center gap-2 transition-colors",children:" Compartilhar"}),l.jsx(T.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:i,className:`${n?"bg-green-600":"bg-gray-600 hover:bg-gray-500"} text-white px-4 py-2 rounded-lg font-bold flex items-center gap-2 transition-colors`,children:n?" Copiado!":" Copiar"}),l.jsx(T.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:a,className:"bg-[#1DA1F2] hover:bg-[#1a8cd8] text-white px-4 py-2 rounded-lg font-bold flex items-center gap-2 transition-colors",children:" Twitter"}),l.jsx(T.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:c,className:"bg-[#25D366] hover:bg-[#20bd5a] text-white px-4 py-2 rounded-lg font-bold flex items-center gap-2 transition-colors",children:" WhatsApp"})]}),t&&l.jsx("div",{className:"text-center mt-3",children:l.jsx("button",{onClick:t,className:"text-white/60 hover:text-white text-sm transition-colors",children:"Fechar"})})]})}const aS=({score:e,onRestart:t,onBackToMenu:n})=>{const r=typeof e=="number"?e:e.points,s=typeof e=="object"?e.level:1,i=typeof e=="object"?e.lines:0,o=c=>c<1e3?"No desista! Cada tentativa te torna melhor! ":c<5e3?"Bom trabalho! Continue praticando! ":c<1e4?"Excelente! Voc est ficando muito bom! ":"Incrvel! Voc  um mestre do Cat Tetris! ",a=c=>c<1e3?"":c<5e3?"":c<1e4?"":"";return l.jsx(T.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",children:l.jsx(T.div,{initial:{scale:.8,y:20},animate:{scale:1,y:0},transition:{type:"spring",damping:15},className:"bg-gray-900/90 p-8 rounded-2xl border-2 border-white/20 shadow-2xl max-w-md w-full mx-4 max-h-[90vh] overflow-y-auto",children:l.jsxs("div",{className:"text-center",children:[l.jsx(T.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring"},className:"text-6xl mb-4",children:a(r)}),l.jsx(T.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"text-3xl font-cat font-bold text-white mb-2",children:"Game Over!"}),l.jsxs(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-gradient-to-r from-yellow-400 to-orange-400 text-gray-900 font-bold text-xl p-3 rounded-lg mb-4",children:[r.toLocaleString()," pontos"]}),l.jsx(T.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"text-white/80 mb-6 text-lg",children:o(r)}),l.jsx(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.55},children:l.jsx(oS,{scoreData:{score:r,level:s,lines:i}})}),l.jsxs(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"space-y-3 mt-4",children:[l.jsx(T.button,{onClick:t,whileHover:{scale:1.05},whileTap:{scale:.95},className:"w-full bg-gradient-to-r from-green-500 to-emerald-600 text-white font-bold py-3 px-6 rounded-lg hover:from-green-400 hover:to-emerald-500 transition-all duration-300 shadow-lg",children:" Jogar Novamente"}),l.jsx(T.button,{onClick:n,whileHover:{scale:1.05},whileTap:{scale:.95},className:"w-full bg-gradient-to-r from-blue-500 to-cyan-600 text-white font-bold py-3 px-6 rounded-lg hover:from-blue-400 hover:to-cyan-500 transition-all duration-300 shadow-lg",children:" Voltar ao Menu"})]}),l.jsxs(T.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},className:"mt-6 text-center text-white/60 text-sm",children:[l.jsx("p",{children:" Dica: Use a sombra para planejar melhor!"}),l.jsx("p",{children:" Tente fazer combos para mais pontos!"})]})]})})})},lS=({pieces:e})=>{const t=(n,r)=>{if(!n)return null;const s=Math.max(...n.shape.map(o=>o.length)),i=n.shape.length;return l.jsx("div",{className:"bg-gray-800/50 p-1.5 rounded-lg border border-white/20",children:l.jsx("div",{className:"flex justify-center",children:l.jsx("div",{className:"grid gap-1",style:{gridTemplateColumns:`repeat(${s}, 1fr)`,gridTemplateRows:`repeat(${i}, 1fr)`},children:n.shape.map((o,a)=>o.map((c,u)=>l.jsx("div",{className:`w-5 h-5 rounded-sm flex items-center justify-center ${c?"border border-white/40 shadow-sm":""}`,style:{backgroundColor:c?pr(n.color):"transparent"},children:c&&c!==0?l.jsx("span",{className:"text-xs leading-none",children:n.emoji}):null},`${u}-${a}`)))})})},r)};return l.jsxs("div",{className:"bg-gray-900/50 p-2 rounded-xl border-2 border-white/20 shadow-2xl w-24",children:[l.jsxs("h2",{className:"text-xs font-bold text-white mb-1 text-center flex items-center justify-center gap-1",children:[l.jsx("span",{children:""}),l.jsx("span",{className:"hidden lg:inline",children:"Prximas"})]}),l.jsx("div",{className:"space-y-1.5",children:e.map((n,r)=>t(n,r))})]})},Pr=ce.memo(lS),cS=({heldPiece:e,canHold:t})=>{const n=()=>{if(!e)return l.jsx("div",{className:"bg-gray-800/50 p-2 lg:p-4 rounded-lg border-2 border-dashed border-white/20 flex items-center justify-center",children:l.jsx("span",{className:"text-white/40 text-xs lg:text-sm",children:"Vazio"})});const r=Math.max(...e.shape.map(i=>i.length)),s=e.shape.length;return l.jsx("div",{className:"bg-gray-800/50 p-1.5 rounded-lg border border-white/20",children:l.jsx("div",{className:"flex justify-center",children:l.jsx("div",{className:"grid gap-1",style:{gridTemplateColumns:`repeat(${r}, 1fr)`,gridTemplateRows:`repeat(${s}, 1fr)`},children:e.shape.map((i,o)=>i.map((a,c)=>l.jsx("div",{className:`w-5 h-5 rounded-sm flex items-center justify-center ${a?"border border-white/40 shadow-sm":""}`,style:{backgroundColor:a?pr(e.color):"transparent"},children:a&&a!==0?l.jsx("span",{className:"text-xs leading-none",children:e.emoji}):null},`${c}-${o}`)))})})})};return l.jsxs("div",{className:"bg-gray-900/50 p-2 rounded-xl border-2 border-white/20 shadow-2xl w-24",children:[l.jsxs("h2",{className:"text-xs font-bold text-white mb-1 text-center flex items-center justify-center gap-1",children:[l.jsx("span",{children:""}),l.jsx("span",{className:"hidden lg:inline",children:"Guardada"})]}),l.jsx("div",{children:n()})]})},Tr=ce.memo(cS),oh=500,va="cat_tetris_error_log";class uS{constructor(){this.logs=this._loadLogs(),this.eventLog=[],this.sessionId=this._generateSessionId(),this.sessionStart=new Date().toISOString(),this._gameStateProvider=null,this._setupGlobalHandlers(),typeof window<"u"&&(window.__ERROR_LOGGER__=this),this.logInfo("ErrorLogger","init","Sistema de logging iniciado",{sessionId:this.sessionId,userAgent:typeof navigator<"u"?navigator.userAgent:"N/A",timestamp:this.sessionStart})}_generateSessionId(){return`session_${Date.now()}_${Math.random().toString(36).substr(2,6)}`}_loadLogs(){try{const t=localStorage.getItem(va);return t?JSON.parse(t):[]}catch{return[]}}_saveLogs(){try{this.logs.length>oh&&(this.logs=this.logs.slice(-oh)),localStorage.setItem(va,JSON.stringify(this.logs))}catch{this.logs=this.logs.slice(-50);try{localStorage.setItem(va,JSON.stringify(this.logs))}catch{}}}_setupGlobalHandlers(){typeof window>"u"||(window.addEventListener("error",t=>{var n;this.logError("window","uncaughtError",t.message,{filename:t.filename,lineno:t.lineno,colno:t.colno,stack:(n=t.error)==null?void 0:n.stack})}),window.addEventListener("unhandledrejection",t=>{var n;this.logError("window","unhandledRejection",String(t.reason),{stack:(n=t.reason)==null?void 0:n.stack,type:typeof t.reason})}))}setGameStateProvider(t){this._gameStateProvider=t}_getGameStateSnapshot(){var t,n,r,s,i,o,a,c,u,h;if(!this._gameStateProvider)return null;try{const d=this._gameStateProvider();return d?{isPlaying:d.isPlaying,isPaused:d.isPaused,gameOver:d.gameOver,score:(t=d.score)==null?void 0:t.points,level:(n=d.score)==null?void 0:n.level,lines:(r=d.score)==null?void 0:r.lines,currentPiece:(s=d.currentPiece)==null?void 0:s.type,currentPiecePos:(i=d.currentPiece)==null?void 0:i.position,heldPiece:(o=d.heldPiece)==null?void 0:o.type,canHold:d.canHold,gameMode:((a=d.gameMode)==null?void 0:a.id)||((c=d.gameMode)==null?void 0:c.name)||null,backToBack:d.backToBack,nextPieces:(u=d.nextPieces)==null?void 0:u.map(f=>f==null?void 0:f.type),boardFilledRows:(h=d.board)==null?void 0:h.filter(f=>f.some(v=>v!==null)).length}:null}catch(d){return{snapshotError:d.message}}}_createEntry(t,n,r,s,i=null){return{id:`${Date.now()}_${Math.random().toString(36).substr(2,4)}`,timestamp:new Date().toISOString(),sessionId:this.sessionId,level:t,source:n,action:r,message:s,details:i,gameState:t==="error"||t==="warn"?this._getGameStateSnapshot():void 0}}logError(t,n,r,s=null){const i=this._createEntry("error",t,n,r,s);return this.logs.push(i),this._saveLogs(),i}logWarn(t,n,r,s=null){const i=this._createEntry("warn",t,n,r,s);return this.logs.push(i),this._saveLogs(),i}logInfo(t,n,r,s=null){const i=this._createEntry("info",t,n,r,s);return this.logs.push(i),this._saveLogs(),i}logAction(t,n,r=null){const s=this._createEntry("action",t,n,`User action: ${n}`,r);return this.logs.push(s),this.logs.length%10===0&&this._saveLogs(),s}getLogs(t=null){return t?this.logs.filter(n=>!(t.level&&n.level!==t.level||t.source&&n.source!==t.source||t.sessionId&&n.sessionId!==t.sessionId)):[...this.logs]}getErrors(){return this.getLogs({level:"error"})}getCurrentSessionLogs(){return this.getLogs({sessionId:this.sessionId})}clearLogs(){this.logs=[],this._saveLogs()}exportLogs(){const t={exportDate:new Date().toISOString(),sessionId:this.sessionId,sessionStart:this.sessionStart,totalEntries:this.logs.length,errorCount:this.logs.filter(n=>n.level==="error").length,warnCount:this.logs.filter(n=>n.level==="warn").length,logs:this.logs};return JSON.stringify(t,null,2)}downloadLogs(){const t=this.exportLogs(),n=new Blob([t],{type:"application/json"}),r=URL.createObjectURL(n),s=document.createElement("a");s.href=r,s.download=`cat-tetris-errors-${new Date().toISOString().replace(/[:.]/g,"-")}.json`,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(r)}saveForExternalAccess(){try{localStorage.setItem("cat_tetris_error_export",this.exportLogs())}catch{}}printLogs(t=null){return t?this.getLogs({level:t}):this.logs}}const Le=new uS;class dS extends ce.Component{constructor(t){super(t),this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,n){Le.logError("ErrorBoundary","componentDidCatch",t.message,{stack:t.stack,componentStack:n==null?void 0:n.componentStack}),Le.saveForExternalAccess()}render(){return this.state.hasError?l.jsx("div",{className:"min-h-screen cat-bg flex items-center justify-center p-4",children:l.jsxs("div",{className:"game-container rounded-2xl p-6 shadow-2xl text-center",children:[l.jsx("h1",{className:"text-3xl font-cat font-bold text-white mb-4",children:" Ops! Algo deu errado"}),l.jsx("p",{className:"text-white/80 mb-4",children:"O jogo encontrou um problema inesperado."}),l.jsx("button",{onClick:()=>window.location.reload(),className:"bg-gradient-to-r from-cat-green to-cat-blue text-white font-bold py-3 px-6 rounded-xl hover:from-cat-blue hover:to-cat-green transition-all duration-200 border-2 border-white/30",children:" Reiniciar Jogo "}),!1]})}):this.props.children}}let Mt=null,ah=!1;function hS(){Mt&&Mt.state==="suspended"&&Mt.resume().catch(()=>{})}function fS(){ah||(ah=!0,["click","touchstart","keydown"].forEach(e=>{document.addEventListener(e,hS,{once:!1,passive:!0})}))}function Er(){if(Mt)return Mt.state==="suspended"&&Mt.resume().catch(()=>{}),Mt;try{return Mt=new(window.AudioContext||window.webkitAudioContext),fS(),Mt}catch{return null}}function mS(){const e=y.useCallback((a,c,u="sine")=>{const h=Er();if(h)try{const d=h.createOscillator(),f=h.createGain();d.connect(f),f.connect(h.destination),d.frequency.setValueAtTime(a,h.currentTime),d.type=u,f.gain.setValueAtTime(.1,h.currentTime),f.gain.exponentialRampToValueAtTime(.001,h.currentTime+c),d.start(h.currentTime),d.stop(h.currentTime+c)}catch{}},[]),t=y.useCallback(()=>{e(523,.1)},[e]),n=y.useCallback(()=>{e(659,.2),setTimeout(()=>e(784,.15),50)},[e]),r=y.useCallback(()=>{e(440,.15),setTimeout(()=>e(330,.1),80)},[e]),s=y.useCallback(()=>{e(392,.1),setTimeout(()=>e(494,.1),100),setTimeout(()=>e(588,.15),200)},[e]),i=y.useCallback(()=>{const a=Er();if(a)try{((h,d,f=.3)=>{h.forEach(v=>{const x=a.createOscillator(),S=a.createGain();x.connect(S),S.connect(a.destination),x.frequency.setValueAtTime(v,a.currentTime),x.type="triangle",S.gain.setValueAtTime(.05,a.currentTime+d),S.gain.exponentialRampToValueAtTime(.001,a.currentTime+d+f),x.start(a.currentTime+d),x.stop(a.currentTime+d+f)})})([523,659,784,1047],0,.5)}catch{}},[]),o=y.useCallback(()=>{e(698,.15),setTimeout(()=>e(880,.15),100),setTimeout(()=>e(1047,.2),200)},[e]);return{playMenuHover:t,playMenuSelect:n,playMenuBack:r,playMenuOpen:s,playGameStart:i,playPWAInstall:o}}class pS{constructor(){this.services=new Map,this.singletons=new Map}register(t,n,r={}){this.services.set(t,{factory:n,singleton:r.singleton||!1,dependencies:r.dependencies||[]})}resolve(t){const n=this.services.get(t);if(!n)throw new Error(`Service '${t}' not found in container`);if(n.singleton&&this.singletons.has(t))return this.singletons.get(t);const r=n.dependencies.map(i=>this.resolve(i)),s=n.factory(...r);return n.singleton&&this.singletons.set(t,s),s}registerSingleton(t,n,r=[]){this.register(t,n,{singleton:!0,dependencies:r})}registerTransient(t,n,r=[]){this.register(t,n,{singleton:!1,dependencies:r})}has(t){return this.services.has(t)}clear(){this.services.clear(),this.singletons.clear()}}class gS{initializeGame(){throw new Error("Must be implemented")}movePiece(t){throw new Error("Must be implemented")}rotatePiece(){throw new Error("Must be implemented")}rotatePieceLeft(){throw new Error("Must be implemented")}placePiece(){throw new Error("Must be implemented")}holdPiece(){throw new Error("Must be implemented")}hardDrop(){throw new Error("Must be implemented")}updateGame(t){throw new Error("Must be implemented")}pause(){throw new Error("Must be implemented")}resume(){throw new Error("Must be implemented")}restart(){throw new Error("Must be implemented")}getDropPreview(){throw new Error("Must be implemented")}}class io{constructor(t=10,n=20){this.width=t,this.height=n,this.grid=this.createEmptyGrid()}createEmptyGrid(){return Array(this.height).fill(null).map(()=>Array(this.width).fill(null))}clone(){const t=new io(this.width,this.height);return t.grid=this.grid.map(n=>[...n]),t}isWithinBounds(t,n){return t>=0&&t<this.width&&n>=0&&n<this.height}getCell(t,n){return this.isWithinBounds(t,n)?this.grid[n][t]:null}setCell(t,n,r){return this.isWithinBounds(t,n)?(this.grid[n][t]=r,!0):!1}clearCell(t,n){return this.isWithinBounds(t,n)?(this.grid[n][t]=null,!0):!1}placePiece(t){t.getCells().forEach(r=>{this.setCell(r.x,r.y,{type:r.type,color:r.color,emoji:r.emoji})})}canPlacePiece(t){return t.getCells().every(r=>!(!this.isWithinBounds(r.x,r.y)||this.getCell(r.x,r.y)!==null))}clearLines(){const t=[];let n=0;for(let r=this.height-1;r>=0;r--)this.grid[r].every(i=>i!==null)?n++:t.unshift(this.grid[r]);for(;t.length<this.height;)t.unshift(Array(this.width).fill(null));return this.grid=t,n}getFilledRows(){const t=[];for(let n=0;n<this.height;n++)this.grid[n].every(r=>r!==null)&&t.push(n);return t}isGameOver(){return this.grid[0].some(t=>t!==null)||this.grid[1].some(t=>t!==null)}getBoardState(){return this.grid.map(t=>[...t])}setBoardState(t){this.grid=t.map(n=>[...n])}clear(){this.grid=this.createEmptyGrid()}addGarbageLines(t,n=-1){if(t<=0)return!1;const r=n>=0?n:Math.floor(Math.random()*this.width),s=[];for(let a=0;a<t;a++){const c=Array(this.width).fill(null).map((u,h)=>h===r?null:{type:"garbage",color:"#808080",emoji:""});s.push(c)}const o=this.grid.splice(0,t).some(a=>a.some(c=>c!==null));return this.grid.push(...s),o}}class oo{constructor(){this.points=0,this.level=1,this.lines=0,this.combo=0,this.tSpins=0,this.backToBack=0,this.tetrisCount=0,this._fixedLevel=null}addPoints(t){this.points+=t}addLines(t){this.lines+=t,this.updateLevel()}incrementCombo(){this.combo++}resetCombo(){this.combo=0}addTSpin(){this.tSpins++}addBackToBack(){this.backToBack++}addTetris(){this.tetrisCount++}updateLevel(){this._fixedLevel||(this.level=Math.min(15,Math.floor(this.lines/10)+1))}getLevel(){return this.level}getDropTime(){const t=this._fixedLevel||this.level;return[1e3,793,618,473,355,262,190,135,94,64,43,28,18,11,7][Math.min(t,15)-1]||7}reset(){this.points=0,this.level=1,this.lines=0,this.combo=0,this.tSpins=0,this.backToBack=0,this.tetrisCount=0,this._fixedLevel=null}clone(){const t=new oo;return t.points=this.points,t.level=this.level,t.lines=this.lines,t.combo=this.combo,t.tSpins=this.tSpins,t.backToBack=this.backToBack,t.tetrisCount=this.tetrisCount,t}toJSON(){return{points:this.points,level:this.level,lines:this.lines,combo:this.combo,tSpins:this.tSpins,backToBack:this.backToBack,tetrisCount:this.tetrisCount}}}class It{constructor(t,n,r,s,i,o=!1,a=0){this.type=t,this.shape=n,this.color=r,this.emoji=s,this.position=i,this.isTSpin=o,this.rotationState=a}move(t,n){return new It(this.type,this.shape,this.color,this.emoji,{x:this.position.x+t,y:this.position.y+n},this.isTSpin,this.rotationState)}rotate(){const t=this.shape[0].map((n,r)=>this.shape.map(s=>s[r]).reverse());return new It(this.type,t,this.color,this.emoji,this.position,this.isTSpin,(this.rotationState+1)%4)}setTSpin(t){return new It(this.type,this.shape,this.color,this.emoji,this.position,t,this.rotationState)}clone(){return new It(this.type,this.shape.map(t=>[...t]),this.color,this.emoji,{...this.position},this.isTSpin,this.rotationState)}reset(t,n,r,s,i,o=!1){return this.type=t,this.shape=n,this.color=r,this.emoji=s,this.position=i,this.isTSpin=o,this.rotationState=0,this}getWidth(){var t;return((t=this.shape[0])==null?void 0:t.length)||0}getHeight(){return this.shape.length||0}getCells(){const t=[];return this.shape.forEach((n,r)=>{n.forEach((s,i)=>{s&&t.push({x:this.position.x+i,y:this.position.y+r,type:this.type,color:this.color,emoji:this.emoji})})}),t}}class vS{calculateScore(t,n,r,s,i){throw new Error("Must be implemented")}calculateSoftDropPoints(){throw new Error("Must be implemented")}calculateTSpinBonus(t){throw new Error("Must be implemented")}calculateBackToBackBonus(t){throw new Error("Must be implemented")}calculateComboBonus(t){throw new Error("Must be implemented")}}class Bn extends vS{calculateScore(t,n,r,s,i){let o=this.getBasePoints(t);return s&&(o=this.calculateTSpinBonus(t)),i&&(o=this.calculateBackToBackBonus(o)),o*=n,o+=this.calculateComboBonus(r),o}calculateSoftDropPoints(){return 1}calculateTSpinBonus(t){return[0,800,1200,1600,2e3][t]||0}calculateBackToBackBonus(t){return Math.floor(t*1.5)}calculateComboBonus(t){return t*50}getBasePoints(t){return[0,100,300,500,800][t]||0}}const Me={BOARD_WIDTH:10,BOARD_HEIGHT:20,INITIAL_DROP_TIME:1e3,LOCK_DELAY:500,SOFT_DROP_MULTIPLIER:20,NEXT_PIECES_COUNT:3,BAG_SIZE:7,KICK_OFFSETS:[{x:-1,y:0},{x:1,y:0},{x:0,y:-1},{x:-1,y:-1},{x:1,y:-1}],SRS_KICKS_CW:{"0>1":[{x:-1,y:0},{x:-1,y:-1},{x:0,y:2},{x:-1,y:2}],"1>2":[{x:1,y:0},{x:1,y:1},{x:0,y:-2},{x:1,y:-2}],"2>3":[{x:1,y:0},{x:1,y:-1},{x:0,y:2},{x:1,y:2}],"3>0":[{x:-1,y:0},{x:-1,y:1},{x:0,y:-2},{x:-1,y:-2}]},SRS_KICKS_CCW:{"1>0":[{x:1,y:0},{x:1,y:1},{x:0,y:-2},{x:1,y:-2}],"2>1":[{x:-1,y:0},{x:-1,y:-1},{x:0,y:2},{x:-1,y:2}],"3>2":[{x:-1,y:0},{x:-1,y:1},{x:0,y:-2},{x:-1,y:-2}],"0>3":[{x:1,y:0},{x:1,y:-1},{x:0,y:2},{x:1,y:2}]},DROP_TIMES:[1e3,850,700,600,500,400,350,300,250,200,150,100,80,60,50],LEVEL_LINES_REQUIREMENT:10,MAX_LEVEL:15};class Nr extends gS{constructor(t,n,r,s=new Bn){super(),this.pieceFactory=t,this.movementStrategyFactory=n,this.gameRepository=r,this.scoringService=s,this.board=new io(Me.BOARD_WIDTH,Me.BOARD_HEIGHT),this.score=new oo,this.currentPiece=null,this.nextPieces=[],this.heldPiece=null,this.canHold=!0,this.isPlaying=!1,this.isPaused=!1,this.gameOver=!1,this.lastDropTime=0,this.backToBack=!1,this._lockDelayActive=!1,this._lockDelayElapsed=0,this._lockDelayResets=0,this._lockDelayMax=Me.LOCK_DELAY,this._lockDelayMaxResets=15,this.gameMode=null,this.modeTimeElapsed=0,this.modeStartTime=0,this.pendingGarbage=0,this._lastAttack=0,this._dirty=!0,this._cachedState=null}_markDirty(){this._dirty=!0,this._cachedState=null}get isDirty(){return this._dirty}clearDirty(){this._dirty=!1}initializeGame(){var t;Y1(),this.board=new io(Me.BOARD_WIDTH,Me.BOARD_HEIGHT),this.score=new oo,this.currentPiece=this.pieceFactory.createRandomPiece(),this.nextPieces=this.pieceFactory.createNextPieces(Me.NEXT_PIECES_COUNT),this.heldPiece=null,this.canHold=!0,this.isPlaying=!1,this.isPaused=!1,this.gameOver=!1,this.lastDropTime=0,this.backToBack=!1,this._lockDelayActive=!1,this._lockDelayElapsed=0,this._lockDelayResets=0,this.modeTimeElapsed=0,this.modeStartTime=Date.now(),this.pendingGarbage=0,this._lastAttack=0,this.applyGameMode(),Le.logInfo("GameService","initializeGame","Game initialized",{mode:((t=this.gameMode)==null?void 0:t.id)||"classic",startLevel:this.score.level,fixedLevel:this.score._fixedLevel}),L.emit(O.GAME_INITIALIZED),this._markDirty()}setGameMode(t){this.gameMode=t}applyGameMode(){if(!this.gameMode||!this.gameMode.rules)return;const t=this.gameMode.rules;t.startLevel&&(this.score.level=t.startLevel),t.fixedLevel?this.score._fixedLevel=t.fixedLevel:this.score._fixedLevel=null,this._modeRules=t}movePiece(t){var n,r;if(!(!this.currentPiece||this.gameOver||this.isPaused))try{const s=this.movementStrategyFactory.createStrategy(t),i=s.execute(this.currentPiece,this.board.grid);if(i!==this.currentPiece){if(this.currentPiece=i,this._markDirty(),t==="down"){if(this._lockDelayActive=!1,this._lockDelayElapsed=0,this.lastDropTime=0,s.getSoftDropPoints){const o=this.scoringService.calculateSoftDropPoints();this.score.addPoints(o)}}else(t==="left"||t==="right")&&(this._resetLockDelay(),this._checkUngrounded());L.emit(O.PIECE_MOVED,{direction:t,piece:i})}else t==="down"&&(this._markDirty(),this._lockDelayActive||(this._lockDelayActive=!0,this._lockDelayElapsed=0,this._lockDelayResets=0))}catch(s){Le.logError("GameService","movePiece",s.message,{direction:t,pieceType:(n=this.currentPiece)==null?void 0:n.type,piecePos:(r=this.currentPiece)==null?void 0:r.position,stack:s.stack})}}rotatePiece(){var t,n;if(!(!this.currentPiece||this.gameOver||this.isPaused))try{const s=this.movementStrategyFactory.createStrategy("rotate").execute(this.currentPiece,this.board.grid);s!==this.currentPiece&&(this.currentPiece=s,this._markDirty(),this._resetLockDelay(),this._checkUngrounded(),L.emit(O.PIECE_ROTATED,{piece:s}))}catch(r){Le.logError("GameService","rotatePiece",r.message,{pieceType:(t=this.currentPiece)==null?void 0:t.type,piecePos:(n=this.currentPiece)==null?void 0:n.position,stack:r.stack})}}rotatePieceLeft(){if(!this.currentPiece||this.gameOver||this.isPaused)return;const n=this.movementStrategyFactory.createStrategy("rotateLeft").execute(this.currentPiece,this.board.grid);n!==this.currentPiece&&(this.currentPiece=n,this._markDirty(),this._resetLockDelay(),this._checkUngrounded(),L.emit(O.PIECE_ROTATED,{piece:n}))}placePiece(){var n,r;if(!this.currentPiece)return;this._markDirty(),this._lockDelayActive=!1,this._lockDelayElapsed=0,this._lockDelayResets=0,this._lastAttack=0,this.board.placePiece(this.currentPiece);const t=this.board.clearLines();if(t>0){this.score.addLines(t),this.score.incrementCombo();const s=this.currentPiece.isTSpin,i=this.scoringService.calculateScore(t,this.score.getLevel(),this.score.combo,s,this.backToBack);if(this.score.addPoints(i),s||t===4?(this.backToBack&&L.emit(O.BACK_TO_BACK),this.backToBack=!0,s&&(this.score.addTSpin(),L.emit(O.T_SPIN,{linesCleared:t}))):this.backToBack=!1,L.emit(O.LINE_CLEARED,{linesCleared:t}),L.emit(O.SCORE_UPDATED,{score:this.score.points,level:this.score.level,combo:this.score.combo,points:i,isTSpin:s}),this._lastAttack=this._calculateAttack(t,s,this.score.combo,this.backToBack),this._lastAttack>0&&this.pendingGarbage>0){const o=Math.min(this._lastAttack,this.pendingGarbage);this._lastAttack-=o,this.pendingGarbage-=o}}else this.score.resetCombo();if(L.emit(O.PIECE_PLACED,{piece:this.currentPiece,linesCleared:t}),this.pendingGarbage>0){const s=this.board.addGarbageLines(this.pendingGarbage);if(this.pendingGarbage=0,s&&this.board.isGameOver()){this.gameOver=!0,L.emit(O.GAME_OVER);return}}if(this.getNextPiece(),this.canHold=!0,(n=this._modeRules)!=null&&n.lineGoal&&this.score.lines>=this._modeRules.lineGoal){this.gameOver=!0,L.emit(O.GAME_OVER);return}if(((r=this._modeRules)==null?void 0:r.gameOver)===!1){if(this.board.isGameOver())for(let s=0;s<4;s++)for(let i=0;i<this.board.width;i++)this.board.clearCell(i,s)}else this.board.isGameOver()&&(this.gameOver=!0,L.emit(O.GAME_OVER))}_calculateAttack(t,n,r,s){if(t===0)return 0;let i=0;if(n?i=[0,1,2,3][t]||0:i=[0,0,1,2,4][t]||0,s&&(n||t===4)&&(i+=1),r>=3){const a=[0,0,0,1,1,1,2,2,2,3,3,3];i+=a[Math.min(r-1,a.length-1)]||3}return this.board.grid.every(a=>a.every(c=>c===null))&&(i=6),i}receiveGarbage(t){t>0&&(this.pendingGarbage+=t,this._markDirty())}consumeAttack(){const t=this._lastAttack;return this._lastAttack=0,t}holdPiece(){var t,n;if(!(!this.canHold||!this.currentPiece)){this._lockDelayActive=!1,this._lockDelayElapsed=0,this._lockDelayResets=0;try{const r=this.heldPiece,s=this.currentPiece.type,i=ct[s];if(this.heldPiece=new It(s,i.shape,i.color,i.emoji,{x:3,y:0},!1,0),r){const o=r.type==="I"?{x:3,y:-2}:{x:3,y:0},a=ct[r.type];this.currentPiece=new It(r.type,a.shape,a.color,a.emoji,o,!1,0)}else this.getNextPiece();this.canHold=!1,this._markDirty(),L.emit(O.PIECE_HELD,{heldPiece:this.heldPiece})}catch(r){Le.logError("GameService","holdPiece",r.message,{currentPieceType:(t=this.currentPiece)==null?void 0:t.type,heldPieceType:(n=this.heldPiece)==null?void 0:n.type,stack:r.stack})}}}hardDrop(){var t,n;if(!(!this.currentPiece||this.gameOver||this.isPaused))try{this._lockDelayActive=!1,this._lockDelayElapsed=0;const s=this.movementStrategyFactory.createStrategy("hardDrop").execute(this.currentPiece,this.board.grid);this.currentPiece=s.piece,this.score.addPoints(s.dropDistance),this._markDirty();const i=this.currentPiece;L.emit(O.HARD_DROP,{dropDistance:s.dropDistance}),L.emit(O.PIECE_MOVED,{direction:"hardDrop",piece:i}),this.placePiece()}catch(r){Le.logError("GameService","hardDrop",r.message,{pieceType:(t=this.currentPiece)==null?void 0:t.type,piecePos:(n=this.currentPiece)==null?void 0:n.position,stack:r.stack})}}updateGame(t){var n;if(!(!this.isPlaying||this.gameOver||this.isPaused)){if((n=this._modeRules)!=null&&n.timeLimit&&(this.modeTimeElapsed=(Date.now()-this.modeStartTime)/1e3,this.modeTimeElapsed>=this._modeRules.timeLimit)){this.gameOver=!0,this._markDirty(),L.emit(O.GAME_OVER);return}if(this._lockDelayActive){if(this._lockDelayElapsed+=t,this._lockDelayElapsed>=this._lockDelayMax){this._lockDelayActive=!1,this._lockDelayElapsed=0,this.placePiece(),this.lastDropTime=0;return}return}this.lastDropTime+=t,this.lastDropTime>=this.score.getDropTime()&&(this.movePiece("down"),this.lastDropTime=0)}}_resetLockDelay(){this._lockDelayActive&&this._lockDelayResets<this._lockDelayMaxResets&&(this._lockDelayElapsed=0,this._lockDelayResets++)}_checkUngrounded(){if(!this._lockDelayActive||!this.currentPiece)return;this.board.canPlacePiece(this.currentPiece.move(0,1))&&(this._lockDelayActive=!1,this._lockDelayElapsed=0,this._lockDelayResets=0)}pause(){this.isPaused=!0,this._markDirty(),L.emit(O.GAME_PAUSED)}resume(){this.isPaused=!1,this.isPlaying=!0,this._markDirty(),L.emit(O.GAME_RESUMED)}restart(){this.initializeGame(),this.isPlaying=!0,this.isPaused=!1,this.modeStartTime=Date.now(),this._markDirty()}getDropPreview(){if(!this.currentPiece)return null;let t=this.currentPiece,n=0;const r=20;for(;n<r&&this.board.canPlacePiece(t.move(0,1));)t=t.move(0,1),n++;return t}getNextPiece(){const t=this.nextPieces.shift();this.nextPieces.push(this.pieceFactory.createRandomPiece()),this.currentPiece=t}getGameState(){var t;return this._cachedState&&!this._dirty?this._cachedState:(this._cachedState={board:this.board.grid.map(n=>[...n]),currentPiece:this.currentPiece,nextPieces:[...this.nextPieces],heldPiece:this.heldPiece,canHold:this.canHold,score:this.score.toJSON(),isPlaying:this.isPlaying,isPaused:this.isPaused,gameOver:this.gameOver,backToBack:this.backToBack,gameMode:this.gameMode,modeTimeElapsed:(t=this._modeRules)!=null&&t.timeLimit?Math.max(0,this._modeRules.timeLimit-(Date.now()-this.modeStartTime)/1e3):null},this._cachedState)}setGameState(t){this.board.setBoardState(t.board),this.currentPiece=t.currentPiece,this.nextPieces=t.nextPieces,this.heldPiece=t.heldPiece,this.canHold=t.canHold,this.isPlaying=t.isPlaying,this.isPaused=t.isPaused,this.gameOver=t.gameOver,this.backToBack=t.backToBack,Object.assign(this.score,t.score)}}class yS{saveHighScore(t){throw new Error("Must be implemented")}getHighScore(){throw new Error("Must be implemented")}saveSettings(t){throw new Error("Must be implemented")}getSettings(){throw new Error("Must be implemented")}saveGameState(t){throw new Error("Must be implemented")}getGameState(){throw new Error("Must be implemented")}clearGameState(){throw new Error("Must be implemented")}}class xS extends yS{constructor(){super(),this.highScoreKey="cat-tetris-high-score",this.settingsKey="cat-tetris-settings",this.gameStateKey="cat-tetris-game-state"}saveHighScore(t){localStorage.setItem(this.highScoreKey,t.toString())}getHighScore(){return parseInt(localStorage.getItem(this.highScoreKey)||"0")}saveSettings(t){localStorage.setItem(this.settingsKey,JSON.stringify(t))}getSettings(){const t=localStorage.getItem(this.settingsKey);return t?JSON.parse(t):{volume:80,gameSpeed:"normal",soundEnabled:!0,particlesEnabled:!0}}saveGameState(t){localStorage.setItem(this.gameStateKey,JSON.stringify(t))}getGameState(){const t=localStorage.getItem(this.gameStateKey);return t?JSON.parse(t):null}clearGameState(){localStorage.removeItem(this.gameStateKey)}load(t){const n=localStorage.getItem(`cat-tetris-${t}`);return n?JSON.parse(n):null}save(t,n){localStorage.setItem(`cat-tetris-${t}`,JSON.stringify(n))}remove(t){localStorage.removeItem(`cat-tetris-${t}`)}}class wS{createPiece(t,n){throw new Error("Must be implemented")}createRandomPiece(){throw new Error("Must be implemented")}createNextPieces(t){throw new Error("Must be implemented")}}class SS{execute(t,n){throw new Error("Must be implemented")}}class Rr extends SS{execute(t,n){throw new Error("execute method must be implemented")}movePiece(t,n,r,s){if(!t||!n||!Array.isArray(n))return t;const i={x:t.position.x+r,y:t.position.y+s};return this.isValidMove(t,n,i)?t.move(r,s):t}isValidMove(t,n,r){return!t||!t.shape||!n||!Array.isArray(n)?!1:t.shape.every((s,i)=>Array.isArray(s)?s.every((o,a)=>{if(!o)return!0;const c=r.x+a,u=r.y+i;return c<0||c>=Me.BOARD_WIDTH||u>=Me.BOARD_HEIGHT?!1:u<0?!0:n[u]&&Array.isArray(n[u])&&!n[u][c]}):!0)}}class bS extends Rr{execute(t,n){return this.movePiece(t,n,-1,0)}}class kS extends Rr{execute(t,n){return this.movePiece(t,n,1,0)}}class jS extends Rr{execute(t,n){if(!t||!n)return t;const r={x:t.position.x,y:t.position.y+1};return this.isValidMove(t,n,r)?t.move(0,1):t}getSoftDropPoints(){return 1}}class CS extends Rr{execute(t,n){var u;if(!t||!t.shape||!n)return t;const r=this.rotatePiece(t);let s=!1;if(this.isValidMove(r,n,r.position))return s=this.detectTSpin(r,n),r.setTSpin(s);const i=t.rotationState??0,o=(i+1)%4,a=`${i}>${o}`,c=((u=Me.SRS_KICKS_CW)==null?void 0:u[a])||Me.KICK_OFFSETS;for(const h of c){const d={x:r.position.x+h.x,y:r.position.y+h.y};if(this.isValidMove(r,n,d)){const f=r.move(h.x,h.y);return s=this.detectTSpin(f,n),f.setTSpin(s)}}return t}detectTSpin(t,n){return t.type!=="T"?!1:this.getCornerPositions(t).filter(o=>o.x<0||o.x>=Me.BOARD_WIDTH||o.y<0||o.y>=Me.BOARD_HEIGHT||n[o.y]&&n[o.y][o.x]).length>=3}getCornerPositions(t){const n=[],r=t.position.x,s=t.position.y;return n.push({x:r,y:s}),n.push({x:r+2,y:s}),n.push({x:r,y:s+2}),n.push({x:r+2,y:s+2}),n}rotatePiece(t){return!t||!t.shape||!Array.isArray(t.shape)||t.shape.length===0?t:t.rotate()}}class PS extends Rr{execute(t,n){var u;if(!t||!t.shape||!n)return t;const r=this.rotatePieceLeft(t);let s=!1;if(this.isValidMove(r,n,r.position))return s=this.detectTSpin(r,n),r.setTSpin(s);const i=t.rotationState??0,o=(i+3)%4,a=`${i}>${o}`,c=((u=Me.SRS_KICKS_CCW)==null?void 0:u[a])||Me.KICK_OFFSETS;for(const h of c){const d={x:r.position.x+h.x,y:r.position.y+h.y};if(this.isValidMove(r,n,d)){const f=r.move(h.x,h.y);return s=this.detectTSpin(f,n),f.setTSpin(s)}}return t}detectTSpin(t,n){return t.type!=="T"?!1:this.getCornerPositions(t).filter(o=>o.x<0||o.x>=Me.BOARD_WIDTH||o.y<0||o.y>=Me.BOARD_HEIGHT||n[o.y]&&n[o.y][o.x]).length>=3}getCornerPositions(t){const n=[],r=t.position.x,s=t.position.y;return n.push({x:r,y:s}),n.push({x:r+2,y:s}),n.push({x:r,y:s+2}),n.push({x:r+2,y:s+2}),n}rotatePieceLeft(t){if(!t||!t.shape||!Array.isArray(t.shape)||t.shape.length===0)return t;const n=t.shape[0].map((r,s)=>t.shape.map(i=>i[i.length-1-s]));return new It(t.type,n,t.color,t.emoji,t.position,t.isTSpin,(t.rotationState+3)%4)}}class TS extends Rr{execute(t,n){if(!t||!n)return{piece:t,dropDistance:0};let r=t,s=0;for(;;){const i={x:r.position.x,y:r.position.y+1};if(this.isValidMove(r,n,i))r=r.move(0,1),s++;else break}return{piece:r,dropDistance:s}}}class ya{constructor(){this.reset()}reset(){return this.piece={type:null,shape:[],color:"#000000",emoji:"",position:{x:3,y:0},isTSpin:!1},this}setType(t){return this.piece.type=t,this}setShape(t){return this.piece.shape=t,this}setColor(t){return this.piece.color=t,this}setEmoji(t){return this.piece.emoji=t,this}setPosition(t,n){return this.piece.position={x:t,y:n},this}setTSpin(t){return this.piece.isTSpin=t,this}build(){const t=new It(this.piece.type,this.piece.shape,this.piece.color,this.piece.emoji,this.piece.position,this.piece.isTSpin);return this.reset(),t}}class _r extends wS{constructor(){super(),this.pieceConfigs=ct}createPiece(t,n={x:3,y:0}){const r=this.pieceConfigs[t];if(!r)throw new Error(`Tipo de pea invlido: ${t}`);return new ya().setType(t).setShape(r.shape).setColor(r.color).setEmoji(r.emoji).setPosition(n.x,n.y).build()}createRandomPiece(){const t=qp();return new ya().setType(t.type).setShape(t.shape).setColor(t.color).setEmoji(t.emoji).setPosition(t.position.x,t.position.y).build()}createNextPieces(t=3){return J1(t).map(r=>new ya().setType(r.type).setShape(r.shape).setColor(r.color).setEmoji(r.emoji).setPosition(r.position.x,r.position.y).build())}registerPieceType(t,n){this.pieceConfigs[t]=n}getPieceTypes(){return Object.keys(this.pieceConfigs)}}class Ar{constructor(){this.strategies=new Map,this.registerDefaultStrategies()}registerDefaultStrategies(){this.strategies.set("left",()=>new bS),this.strategies.set("right",()=>new kS),this.strategies.set("down",()=>new jS),this.strategies.set("rotate",()=>new CS),this.strategies.set("rotateLeft",()=>new PS),this.strategies.set("hardDrop",()=>new TS)}createStrategy(t){const n=this.strategies.get(t);if(!n)throw new Error(`Strategy type '${t}' not found`);return n()}registerStrategy(t,n){if(typeof n!="function")throw new Error("Strategy factory must be a function");this.strategies.set(t,n)}unregisterStrategy(t){this.strategies.delete(t)}getAvailableStrategies(){return Array.from(this.strategies.keys())}hasStrategy(t){return this.strategies.has(t)}}class ES{getSettings(){throw new Error("Method getSettings must be implemented")}saveSettings(t){throw new Error("Method saveSettings must be implemented")}updateSetting(t,n){throw new Error("Method updateSetting must be implemented")}resetSettings(){throw new Error("Method resetSettings must be implemented")}}class NS extends ES{constructor(){super(),this.storageKey="cat-tetris-settings",this.defaultSettings={volume:80,gameSpeed:"normal",soundEnabled:!0,particlesEnabled:!0}}getSettings(){try{const t=localStorage.getItem(this.storageKey);return t?{...this.defaultSettings,...JSON.parse(t)}:this.defaultSettings}catch{return this.defaultSettings}}saveSettings(t){try{const n={...this.defaultSettings,...t};return localStorage.setItem(this.storageKey,JSON.stringify(n)),n}catch{throw new Error("Failed to save settings")}}resetSettings(){try{return localStorage.removeItem(this.storageKey),this.defaultSettings}catch{throw new Error("Failed to reset settings")}}updateSetting(t,n){const s={...this.getSettings(),[t]:n};return this.saveSettings(s)}}class _S{getStats(){throw new Error("Method getStats must be implemented")}incrementPlayTime(){throw new Error("Method incrementPlayTime must be implemented")}incrementPiecesPlaced(){throw new Error("Method incrementPiecesPlaced must be implemented")}addLinesCleared(t){throw new Error("Method addLinesCleared must be implemented")}incrementTSpins(){throw new Error("Method incrementTSpins must be implemented")}updateMaxCombo(t){throw new Error("Method updateMaxCombo must be implemented")}reset(){throw new Error("Method reset must be implemented")}}class AS extends _S{constructor(){super(),this.stats={playTime:0,piecesPlaced:0,linesCleared:0,tSpins:0,backToBack:0,maxCombo:0,tetrisCount:0,linesPerSecond:0},this.sessionStartTime=Date.now()}getStats(){return{...this.stats}}incrementPlayTime(){this.stats.playTime+=1,this.calculateLinesPerSecond()}incrementPiecesPlaced(){this.stats.piecesPlaced+=1}addLinesCleared(t){this.stats.linesCleared+=t,t===4&&(this.stats.tetrisCount+=1),this.calculateLinesPerSecond()}incrementTSpins(){this.stats.tSpins+=1}incrementBackToBack(){this.stats.backToBack+=1}updateMaxCombo(t){t>this.stats.maxCombo&&(this.stats.maxCombo=t)}calculateLinesPerSecond(){this.stats.playTime>0?this.stats.linesPerSecond=this.stats.linesCleared/this.stats.playTime:this.stats.linesPerSecond=0}reset(){this.stats={playTime:0,piecesPlaced:0,linesCleared:0,tSpins:0,backToBack:0,maxCombo:0,tetrisCount:0,linesPerSecond:0},this.sessionStartTime=Date.now()}getSessionDuration(){return Date.now()-this.sessionStartTime}}class MS{registerHandler(t,n){throw new Error("Method registerHandler must be implemented")}unregisterHandler(t,n){throw new Error("Method unregisterHandler must be implemented")}startListening(){throw new Error("Method startListening must be implemented")}stopListening(){throw new Error("Method stopListening must be implemented")}setKeyMapping(t,n){throw new Error("Method setKeyMapping must be implemented")}getKeyMappings(){throw new Error("Method getKeyMappings must be implemented")}}class LS extends MS{constructor(){super();Hs(this,"_handleKeyDown",n=>{if(this.preventDefaultKeys.includes(n.key)&&n.preventDefault(),n.repeat)return;const r=this.keyMappings[n.key];r&&(this._fireAction(r),this._dasActions.has(r)&&this._pressedKeys.set(n.key,{action:r,dasTimer:0,arrTimer:0,dasTriggered:!1}))});Hs(this,"_handleKeyUp",n=>{this._pressedKeys.delete(n.key)});Hs(this,"_handleBlur",()=>{this._pressedKeys.clear()});this.keyMappings={ArrowLeft:"moveLeft",ArrowRight:"moveRight",ArrowDown:"moveDown",ArrowUp:"rotate",x:"rotate",X:"rotate",z:"rotateLeft",Z:"rotateLeft"," ":"hardDrop",c:"hold",C:"hold",Shift:"hold",p:"pause",P:"pause",Escape:"pause"},this.preventDefaultKeys=["ArrowLeft","ArrowRight","ArrowDown","ArrowUp"," "],this.handlers=new Map,this.isListening=!1,this.das=167,this.arr=33,this.sdf=5,this._dasActions=new Set(["moveLeft","moveRight","moveDown"]),this._pressedKeys=new Map,this._rafId=null,this._lastTime=0}setDAS(n){this.das=Math.max(0,n)}setARR(n){this.arr=Math.max(0,n)}getDAS(){return this.das}getARR(){return this.arr}registerHandler(n,r){this.handlers.has(n)||this.handlers.set(n,[]),this.handlers.get(n).push(r)}unregisterHandler(n,r){if(this.handlers.has(n)){const s=this.handlers.get(n),i=s.indexOf(r);i>-1&&s.splice(i,1)}}_fireAction(n){this.handlers.has(n)&&this.handlers.get(n).forEach(r=>{try{r()}catch{}})}startListening(){this.isListening||(window.addEventListener("keydown",this._handleKeyDown),window.addEventListener("keyup",this._handleKeyUp),window.addEventListener("blur",this._handleBlur),this.isListening=!0,this._startLoop())}stopListening(){this.isListening&&(window.removeEventListener("keydown",this._handleKeyDown),window.removeEventListener("keyup",this._handleKeyUp),window.removeEventListener("blur",this._handleBlur),this.isListening=!1,this._stopLoop(),this._pressedKeys.clear())}_startLoop(){this._lastTime=performance.now();const n=r=>{const s=r-this._lastTime;this._lastTime=r,this._updateDAS(s),this._rafId=requestAnimationFrame(n)};this._rafId=requestAnimationFrame(n)}_stopLoop(){this._rafId&&(cancelAnimationFrame(this._rafId),this._rafId=null)}_updateDAS(n){for(const[r,s]of this._pressedKeys)if(s.dasTriggered)if(s.arrTimer+=n,this.arr===0){for(let i=0;i<20;i++)this._fireAction(s.action);s.arrTimer=0}else for(;s.arrTimer>=this.arr;)s.arrTimer-=this.arr,this._fireAction(s.action);else if(s.dasTimer+=n,s.dasTimer>=this.das)if(s.dasTriggered=!0,s.arrTimer=0,this.arr===0)for(let i=0;i<20;i++)this._fireAction(s.action);else this._fireAction(s.action)}setKeyMapping(n,r){this.keyMappings[n]=r}removeKeyMapping(n){delete this.keyMappings[n]}getKeyMappings(){return{...this.keyMappings}}clear(){this.handlers.clear(),this.stopListening()}}class DS{constructor(t){this.gameRepository=t,this.currency=this.loadCurrency()}loadCurrency(){return this.gameRepository.load("playerCurrency")||{fish:0,totalEarned:0,totalSpent:0}}save(){this.gameRepository.save("playerCurrency",this.currency)}getFish(){return this.currency.fish}getCurrency(){return{...this.currency}}addFish(t,n="unknown"){return t<=0?!1:(this.currency.fish+=t,this.currency.totalEarned+=t,this.save(),!0)}spendFish(t,n="unknown"){return t<=0||this.currency.fish<t?!1:(this.currency.fish-=t,this.currency.totalSpent+=t,this.save(),!0)}canAfford(t){return this.currency.fish>=t}reset(){this.currency={fish:0,totalEarned:0,totalSpent:0},this.save()}getStats(){return{currentFish:this.currency.fish,totalEarned:this.currency.totalEarned,totalSpent:this.currency.totalSpent,netWorth:this.currency.totalEarned-this.currency.totalSpent}}}const oe={CLEAR_LINES:"clear_lines",T_SPINS:"t_spins",COMBOS:"combos",SURVIVE_TIME:"survive_time",REACH_LEVEL:"reach_level",SCORE_POINTS:"score_points",PLACE_PIECES:"place_pieces",BACK_TO_BACK:"back_to_back",TETRIS_CLEAR:"tetris_clear"},xa=[{type:oe.CLEAR_LINES,target:20,reward:100,difficulty:"easy",title:"Limpeza Bsica",description:"Limpe 20 linhas"},{type:oe.PLACE_PIECES,target:30,reward:100,difficulty:"easy",title:"Gato Trabalhador",description:"Coloque 30 peas"},{type:oe.SURVIVE_TIME,target:180,reward:120,difficulty:"easy",title:"Sobrevivente",description:"Sobreviva por 3 minutos"},{type:oe.SCORE_POINTS,target:5e3,reward:150,difficulty:"easy",title:"Fazendo Pontos",description:"Alcance 5.000 pontos"},{type:oe.CLEAR_LINES,target:40,reward:200,difficulty:"medium",title:"Limpeza Profunda",description:"Limpe 40 linhas em uma partida"},{type:oe.T_SPINS,target:3,reward:250,difficulty:"medium",title:"Mestre do T-Spin",description:"Faa 3 T-Spins"},{type:oe.COMBOS,target:7,reward:200,difficulty:"medium",title:"Combo Felino",description:"Alcance um combo de 7x"},{type:oe.REACH_LEVEL,target:8,reward:180,difficulty:"medium",title:"Subindo de Nvel",description:"Alcance o nvel 8"},{type:oe.TETRIS_CLEAR,target:2,reward:220,difficulty:"medium",title:"Tetris Duplo",description:"Faa 2 Tetris (4 linhas)"},{type:oe.T_SPINS,target:5,reward:350,difficulty:"hard",title:"Ninja T-Spin",description:"Faa 5 T-Spins em uma partida"},{type:oe.COMBOS,target:10,reward:300,difficulty:"hard",title:"Combo Insano",description:"Alcance um combo de 10x"},{type:oe.SURVIVE_TIME,target:600,reward:400,difficulty:"hard",title:"Resistncia Felina",description:"Sobreviva por 10 minutos"},{type:oe.REACH_LEVEL,target:12,reward:350,difficulty:"hard",title:"Mestre dos Gatos",description:"Alcance o nvel 12"},{type:oe.SCORE_POINTS,target:5e4,reward:400,difficulty:"hard",title:"Pontuao Lendria",description:"Alcance 50.000 pontos"},{type:oe.BACK_TO_BACK,target:3,reward:380,difficulty:"hard",title:"Back-to-Back Master",description:"Faa 3 back-to-backs"}];class RS{constructor(t,n){this.gameRepository=t,this.currencyService=n,this.missions=this.loadMissions(),this.checkAndResetDaily()}loadMissions(){return this.gameRepository.load("dailyMissions")||this.generateNewMissions()}save(){this.gameRepository.save("dailyMissions",this.missions)}checkAndResetDaily(){const n=new Date().toDateString();this.missions.lastResetDate!==n&&(this.missions=this.generateNewMissions(),this.save())}generateNewMissions(){const t=xa.filter(o=>o.difficulty==="easy"),n=xa.filter(o=>o.difficulty==="medium"),r=xa.filter(o=>o.difficulty==="hard"),s=[this.selectRandomMission(t),this.selectRandomMission(n),this.selectRandomMission(r)],i=new Date;return{lastResetDate:i.toDateString(),missions:s.map((o,a)=>({id:`mission_${i.getTime()}_${a}`,...o,progress:0,completed:!1,claimed:!1}))}}selectRandomMission(t){return t[Math.floor(Math.random()*t.length)]}getMissions(){return this.checkAndResetDaily(),this.missions.missions}updateProgress(t,n){let r=!1;return this.missions.missions.forEach(s=>{s.type===t&&!s.completed&&(s.progress=Math.max(s.progress,n),s.progress>=s.target&&(s.completed=!0,r=!0))}),r&&this.save(),r}incrementProgress(t,n=1){let r=!1;return this.missions.missions.forEach(s=>{s.type===t&&!s.completed&&(s.progress+=n,s.progress>=s.target&&(s.completed=!0,r=!0))}),r&&this.save(),r}claimReward(t){const n=this.missions.missions.find(r=>r.id===t);return n?n.completed?n.claimed?{success:!1,error:"Already claimed"}:(n.claimed=!0,this.currencyService.addFish(n.reward,`Mission: ${n.title}`),this.save(),{success:!0,reward:n.reward,title:n.title}):{success:!1,error:"Mission not completed"}:{success:!1,error:"Mission not found"}}getStats(){const t=this.missions.missions.length,n=this.missions.missions.filter(o=>o.completed).length,r=this.missions.missions.filter(o=>o.claimed).length,s=this.missions.missions.reduce((o,a)=>o+a.reward,0),i=this.missions.missions.filter(o=>o.claimed).reduce((o,a)=>o+a.reward,0);return{total:t,completed:n,claimed:r,totalRewards:s,claimedRewards:i,allCompleted:n===t,allClaimed:r===t}}reset(){this.missions=this.generateNewMissions(),this.save()}}const wa=[{id:"first_line",title:" Primeira Linha",description:"Limpe sua primeira linha",requirement:{type:"lines_total",value:1},reward:50,tier:"bronze"},{id:"first_game",title:" Primeira Partida",description:"Complete sua primeira partida",requirement:{type:"games_played",value:1},reward:50,tier:"bronze"},{id:"scorer",title:" Pontuador",description:"Alcance 10.000 pontos em uma partida",requirement:{type:"score_single",value:1e4},reward:100,tier:"bronze"},{id:"combo_starter",title:" Combo Starter",description:"Alcance um combo de 5x",requirement:{type:"max_combo",value:5},reward:150,tier:"silver"},{id:"tspin_novice",title:" Aprendiz T-Spin",description:"Faa seu primeiro T-Spin",requirement:{type:"tspins_total",value:1},reward:150,tier:"silver"},{id:"survivor",title:" Sobrevivente",description:"Sobreviva por 5 minutos",requirement:{type:"survive_time",value:300},reward:150,tier:"silver"},{id:"level_5",title:" Nvel 5",description:"Alcance o nvel 5",requirement:{type:"max_level",value:5},reward:100,tier:"silver"},{id:"line_clearer",title:" Limpador",description:"Limpe 100 linhas no total",requirement:{type:"lines_total",value:100},reward:200,tier:"silver"},{id:"combo_master",title:" Combo Master",description:"Alcance um combo de 10x",requirement:{type:"max_combo",value:10},reward:300,tier:"gold"},{id:"tspin_master",title:" Mestre T-Spin",description:"Faa 50 T-Spins no total",requirement:{type:"tspins_total",value:50},reward:400,tier:"gold"},{id:"speed_demon",title:" Speed Demon",description:"Alcance o nvel 15",requirement:{type:"max_level",value:15},reward:350,tier:"gold"},{id:"high_scorer",title:" Alto Pontuador",description:"Alcance 100.000 pontos em uma partida",requirement:{type:"score_single",value:1e5},reward:400,tier:"gold"},{id:"dedicated",title:" Dedicado",description:"Jogue 50 partidas",requirement:{type:"games_played",value:50},reward:300,tier:"gold"},{id:"marathon",title:" Maratonista",description:"Limpe 500 linhas no total",requirement:{type:"lines_total",value:500},reward:350,tier:"gold"},{id:"cat_king",title:" Rei dos Gatos",description:"Alcance 1.000.000 de pontos em uma partida",requirement:{type:"score_single",value:1e6},reward:1e3,tier:"platinum"},{id:"immortal",title:" Imortal",description:"Alcance o nvel 20",requirement:{type:"max_level",value:20},reward:800,tier:"platinum"},{id:"combo_legend",title:" Lenda do Combo",description:"Alcance um combo de 15x",requirement:{type:"max_combo",value:15},reward:700,tier:"platinum"},{id:"tspin_legend",title:" Lenda T-Spin",description:"Faa 200 T-Spins no total",requirement:{type:"tspins_total",value:200},reward:800,tier:"platinum"},{id:"veteran",title:" Veterano",description:"Jogue 200 partidas",requirement:{type:"games_played",value:200},reward:600,tier:"platinum"},{id:"ultimate_cleaner",title:" Limpador Supremo",description:"Limpe 2.000 linhas no total",requirement:{type:"lines_total",value:2e3},reward:700,tier:"platinum"}];class IS{constructor(t,n,r){this.gameRepository=t,this.currencyService=n,this.statisticsService=r,this.achievements=this.loadAchievements()}loadAchievements(){const t=this.gameRepository.load("achievements");if(!t)return wa.map(r=>({...r,unlocked:!1,unlockedAt:null,progress:0}));const n=new Map(t.map(r=>[r.id,r]));return wa.map(r=>n.get(r.id)||{...r,unlocked:!1,unlockedAt:null,progress:0})}save(){this.gameRepository.save("achievements",this.achievements)}getAchievements(){return[...this.achievements]}getUnlocked(){return this.achievements.filter(t=>t.unlocked)}getLocked(){return this.achievements.filter(t=>!t.unlocked)}getByTier(t){return this.achievements.filter(n=>n.tier===t)}checkAchievements(t){const n=[];return this.achievements.forEach(r=>{if(r.unlocked)return;const{type:s,value:i}=r.requirement;let o=0;switch(s){case"lines_total":o=t.linesCleared||0;break;case"games_played":o=t.gamesPlayed||0;break;case"score_single":o=t.highScore||0;break;case"max_combo":o=t.maxCombo||0;break;case"tspins_total":o=t.tSpins||0;break;case"survive_time":o=t.longestGame||0;break;case"max_level":o=t.maxLevel||0;break}r.progress=Math.min(o,i),o>=i&&(r.unlocked=!0,r.unlockedAt=new Date().toISOString(),this.currencyService.addFish(r.reward,`Achievement: ${r.title}`),n.push(r))}),n.length>0&&this.save(),n}getStats(){const t=this.achievements.length,n=this.achievements.filter(o=>o.unlocked).length,r=this.achievements.reduce((o,a)=>o+a.reward,0),s=this.achievements.filter(o=>o.unlocked).reduce((o,a)=>o+a.reward,0),i={bronze:this.getByTier("bronze").filter(o=>o.unlocked).length,silver:this.getByTier("silver").filter(o=>o.unlocked).length,gold:this.getByTier("gold").filter(o=>o.unlocked).length,platinum:this.getByTier("platinum").filter(o=>o.unlocked).length};return{total:t,unlocked:n,percentage:Math.floor(n/t*100),totalRewards:r,earnedRewards:s,byTier:i}}reset(){this.achievements=wa.map(t=>({...t,unlocked:!1,unlockedAt:null,progress:0})),this.save()}}class OS{constructor(t){this.gameRepository=t,this.stats=this.loadStats()}loadStats(){return this.gameRepository.load("playerStats")||{gamesPlayed:0,linesCleared:0,piecesPlaced:0,tSpins:0,backToBack:0,totalPlayTime:0,highScore:0,maxLevel:0,maxCombo:0,longestGame:0,mostLinesInGame:0,lastUpdated:new Date().toISOString(),lastPlayedDate:null,currentStreak:0,longestStreak:0}}save(){this.stats.lastUpdated=new Date().toISOString(),this.gameRepository.save("playerStats",this.stats)}getStats(){return{...this.stats}}updateAfterGame(t){this.stats.gamesPlayed+=1,this.stats.linesCleared+=t.linesCleared||0,this.stats.piecesPlaced+=t.piecesPlaced||0,this.stats.tSpins+=t.tSpins||0,this.stats.backToBack+=t.backToBack||0,this.stats.totalPlayTime+=t.playTime||0,t.score>this.stats.highScore&&(this.stats.highScore=t.score),t.level>this.stats.maxLevel&&(this.stats.maxLevel=t.level),t.maxCombo>this.stats.maxCombo&&(this.stats.maxCombo=t.maxCombo),t.playTime>this.stats.longestGame&&(this.stats.longestGame=t.playTime),t.linesCleared>this.stats.mostLinesInGame&&(this.stats.mostLinesInGame=t.linesCleared),this.updateStreak(),this.save()}updateStreak(){const t=new Date().toDateString(),n=this.stats.lastPlayedDate;if(n!==t){if(!n)this.stats.currentStreak=1,this.stats.longestStreak=1;else{const r=new Date(n),s=new Date(t);Math.floor((s-r)/(1e3*60*60*24))===1?(this.stats.currentStreak+=1,this.stats.currentStreak>this.stats.longestStreak&&(this.stats.longestStreak=this.stats.currentStreak)):this.stats.currentStreak=1}this.stats.lastPlayedDate=t}}incrementStat(t,n=1){this.stats.hasOwnProperty(t)&&(this.stats[t]+=n,this.save())}updateRecord(t,n){return this.stats.hasOwnProperty(t)&&n>this.stats[t]?(this.stats[t]=n,this.save(),!0):!1}reset(){this.stats={gamesPlayed:0,linesCleared:0,piecesPlaced:0,tSpins:0,backToBack:0,totalPlayTime:0,highScore:0,maxLevel:0,maxCombo:0,longestGame:0,mostLinesInGame:0,lastUpdated:new Date().toISOString(),lastPlayedDate:null,currentStreak:0,longestStreak:0},this.save()}}const qt={classic:{id:"classic",name:" Tetris Clssico",description:"Cores oficiais do Tetris",price:0,default:!0,pieces:{I:{emoji:"",color:"#00F0F0"},O:{emoji:"",color:"#F0F000"},T:{emoji:"",color:"#A000F0"},S:{emoji:"",color:"#00F000"},Z:{emoji:"",color:"#F00000"},J:{emoji:"",color:"#0000F0"},L:{emoji:"",color:"#F0A000"}}},cats:{id:"cats",name:" Gatos Clssicos",description:"Os gatinhos originais do Cat Tetris",price:0,default:!0,pieces:{I:{emoji:"",color:"#00f0f0"},O:{emoji:"",color:"#f0f000"},T:{emoji:"",color:"#a000f0"},S:{emoji:"",color:"#00f000"},Z:{emoji:"",color:"#f00000"},J:{emoji:"",color:"#f0a000"},L:{emoji:"",color:"#ffc0cb"}}},dogs:{id:"dogs",name:" Cachorros Felizes",description:"Amigos caninos adorveis",price:500,pieces:{I:{emoji:"",color:"#8B4513"},O:{emoji:"",color:"#D2691E"},T:{emoji:"",color:"#CD853F"},S:{emoji:"",color:"#DEB887"},Z:{emoji:"",color:"#F4A460"},J:{emoji:"",color:"#FFDEAD"},L:{emoji:"",color:"#FFE4B5"}}},pandas:{id:"pandas",name:" Pandas Fofos",description:"Ursinhos preto e branco",price:600,pieces:{I:{emoji:"",color:"#000000"},O:{emoji:"",color:"#808080"},T:{emoji:"",color:"#A0A0A0"},S:{emoji:"",color:"#FFFFFF"},Z:{emoji:"",color:"#D3D3D3"},J:{emoji:"",color:"#90EE90"},L:{emoji:"",color:"#98FB98"}}},foxes:{id:"foxes",name:" Raposas Astutas",description:"Raposinhas espertas e geis",price:700,pieces:{I:{emoji:"",color:"#FF4500"},O:{emoji:"",color:"#FF6347"},T:{emoji:"",color:"#FF7F50"},S:{emoji:"",color:"#CD5C5C"},Z:{emoji:"",color:"#D2691E"},J:{emoji:"",color:"#8B4513"},L:{emoji:"",color:"#DAA520"}}},unicorns:{id:"unicorns",name:" Unicrnios Mgicos",description:"Criaturas msticas e coloridas",price:900,pieces:{I:{emoji:"",color:"#FF00FF"},O:{emoji:"",color:"#FFD700"},T:{emoji:"",color:"#87CEEB"},S:{emoji:"",color:"#FF69B4"},Z:{emoji:"",color:"#9370DB"},J:{emoji:"",color:"#DA70D6"},L:{emoji:"",color:"#FFC0CB"}}},robots:{id:"robots",name:" Robs Futuristas",description:"Tecnologia do futuro",price:800,pieces:{I:{emoji:"",color:"#708090"},O:{emoji:"",color:"#778899"},T:{emoji:"",color:"#4682B4"},S:{emoji:"",color:"#5F9EA0"},Z:{emoji:"",color:"#00CED1"},J:{emoji:"",color:"#1E90FF"},L:{emoji:"",color:"#4169E1"}}},foods:{id:"foods",name:" Comidas Deliciosas",description:"Para quem joga com fome",price:750,pieces:{I:{emoji:"",color:"#FF6347"},O:{emoji:"",color:"#FFD700"},T:{emoji:"",color:"#FFA500"},S:{emoji:"",color:"#FF4500"},Z:{emoji:"",color:"#FFB6C1"},J:{emoji:"",color:"#DDA0DD"},L:{emoji:"",color:"#D2691E"}}},crystals:{id:"crystals",name:" Cristais Brilhantes",description:"Gemas preciosas reluzentes",price:1e3,premium:!0,pieces:{I:{emoji:"",color:"#00FFFF"},O:{emoji:"",color:"#FFD700"},T:{emoji:"",color:"#9370DB"},S:{emoji:"",color:"#00FF00"},Z:{emoji:"",color:"#FF0000"},J:{emoji:"",color:"#FFA500"},L:{emoji:"",color:"#FF1493"}}},ocean:{id:"ocean",name:" Mundo Marinho",description:"Criaturas do oceano",price:850,pieces:{I:{emoji:"",color:"#1E90FF"},O:{emoji:"",color:"#00CED1"},T:{emoji:"",color:"#4682B4"},S:{emoji:"",color:"#87CEEB"},Z:{emoji:"",color:"#5F9EA0"},J:{emoji:"",color:"#6495ED"},L:{emoji:"",color:"#FF6347"}}},space:{id:"space",name:" Espao Sideral",description:"Explorao espacial",price:950,pieces:{I:{emoji:"",color:"#4169E1"},O:{emoji:"",color:"#00FFFF"},T:{emoji:"",color:"#32CD32"},S:{emoji:"",color:"#FFD700"},Z:{emoji:"",color:"#FFFF00"},J:{emoji:"",color:"#FF8C00"},L:{emoji:"",color:"#FF4500"}}}};class Qp{constructor(t,n){this.gameRepository=t,this.currencyService=n,this.inventory=this.loadInventory()}loadInventory(){const t=this.gameRepository.load("shopInventory");if(t){const n=Object.values(qt).filter(s=>s.price===0).map(s=>s.id);let r=!1;for(const s of n)t.ownedThemes.includes(s)||(t.ownedThemes.push(s),r=!0);return r&&this.gameRepository.save("shopInventory",t),t}return{ownedThemes:["cats","classic"],equippedTheme:"cats",purchaseHistory:[]}}save(){this.gameRepository.save("shopInventory",this.inventory)}getAllThemes(){return Object.values(qt).map(t=>({...t,owned:this.inventory.ownedThemes.includes(t.id),equipped:this.inventory.equippedTheme===t.id}))}getOwnedThemes(){return this.inventory.ownedThemes.map(t=>qt[t])}getEquippedTheme(){return qt[this.inventory.equippedTheme]}ownsTheme(t){return this.inventory.ownedThemes.includes(t)}purchaseTheme(t){const n=qt[t];return n?this.ownsTheme(t)?{success:!1,error:"Already owned"}:this.currencyService.canAfford(n.price)?this.currencyService.spendFish(n.price,`Theme: ${n.name}`)?(this.inventory.ownedThemes.push(t),this.inventory.purchaseHistory.push({themeId:t,purchasedAt:new Date().toISOString(),price:n.price}),this.save(),{success:!0,theme:n}):{success:!1,error:"Purchase failed"}:{success:!1,error:"Insufficient funds"}:{success:!1,error:"Theme not found"}}equipTheme(t){if(!this.ownsTheme(t))return{success:!1,error:"Theme not owned"};this.inventory.equippedTheme=t,this.save();const n=qt[t];return window.dispatchEvent(new CustomEvent("themeEquipped",{detail:{themeId:t,theme:n}})),{success:!0,theme:n}}getStats(){return{totalThemes:Object.keys(qt).length,ownedThemes:this.inventory.ownedThemes.length,totalSpent:this.inventory.purchaseHistory.reduce((t,n)=>t+n.price,0),equippedTheme:this.inventory.equippedTheme}}reset(){this.inventory={ownedThemes:["cats"],equippedTheme:"cats",purchaseHistory:[]},this.save()}}const FS=Object.freeze(Object.defineProperty({__proto__:null,PIECE_THEMES:qt,ShopService:Qp},Symbol.toStringTag,{value:"Module"})),pt={CLASSIC:{id:"classic",name:" Clssico",description:"O Tetris tradicional",icon:"",rules:{gameOver:!0,timeLimit:!1,lineGoal:!1,speedIncrease:!0}},SPRINT:{id:"sprint",name:" Sprint 40",description:"Limpe 40 linhas o mais rpido possvel",icon:"",rules:{gameOver:!1,timeLimit:!1,lineGoal:40,speedIncrease:!1,fixedLevel:1}},ULTRA:{id:"ultra",name:" Ultra 3min",description:"Mximo de pontos em 3 minutos",icon:"",rules:{gameOver:!1,timeLimit:180,lineGoal:!1,speedIncrease:!0}},ZEN:{id:"zen",name:" Zen",description:"Jogue sem presso, sem game over",icon:"",rules:{gameOver:!1,timeLimit:!1,lineGoal:!1,speedIncrease:!1,fixedLevel:1,relaxed:!0}},SURVIVAL:{id:"survival",name:" Sobrevivncia",description:"Comece no nvel 10, quanto tempo aguenta?",icon:"",rules:{gameOver:!0,timeLimit:!1,lineGoal:!1,speedIncrease:!0,startLevel:10}}};class VS{constructor(t){this.gameRepository=t,this.currentMode=pt.CLASSIC,this.modeStats=this.loadModeStats()}loadModeStats(){return this.gameRepository.load("gameModesStats")||this.initializeStats()}initializeStats(){const t={};return Object.keys(pt).forEach(n=>{const r=pt[n];t[r.id]={gamesPlayed:0,bestScore:0,bestTime:r.rules.timeLimit?r.rules.timeLimit:0,bestLines:0,totalGames:0}}),t}save(){this.gameRepository.save("gameModesStats",this.modeStats)}getAllModes(){return Object.values(pt)}getCurrentMode(){return this.currentMode}setMode(t){const n=Object.values(pt).find(r=>r.id===t);return n?(this.currentMode=n,!0):!1}getModeStats(t){return this.modeStats[t]||null}getAllStats(){return{...this.modeStats}}updateStats(t,n){if(!this.modeStats[t])return;const r=this.modeStats[t];r.gamesPlayed+=1,r.totalGames+=1,n.score>r.bestScore&&(r.bestScore=n.score),n.time&&(r.bestTime===0||n.time<r.bestTime)&&(r.bestTime=n.time),n.lines>r.bestLines&&(r.bestLines=n.lines),this.save()}checkGoal(t,n){return t.rules?t.rules.lineGoal?n.score.lines>=t.rules.lineGoal:(t.rules.timeLimit,!1):!1}getRecommendedOrder(){return[pt.CLASSIC,pt.ZEN,pt.SPRINT,pt.ULTRA,pt.SURVIVAL]}reset(){this.modeStats=this.initializeStats(),this.currentMode=pt.CLASSIC,this.save()}}const lh=[{id:"bot1",name:"MeowMaster",score:25e4,level:18,lines:120,country:"BR"},{id:"bot2",name:"NyanCat",score:18e4,level:15,lines:95,country:"US"},{id:"bot3",name:"FelixPro",score:15e4,level:14,lines:85,country:"JP"},{id:"bot4",name:"WhiskerKing",score:12e4,level:12,lines:75,country:"KR"},{id:"bot5",name:"PawsGaming",score:1e5,level:11,lines:68,country:"FR"},{id:"bot6",name:"CatNinja",score:85e3,level:10,lines:60,country:"DE"},{id:"bot7",name:"TigerClaw",score:7e4,level:9,lines:55,country:"BR"},{id:"bot8",name:"LionHeart",score:65e3,level:8,lines:50,country:"UK"},{id:"bot9",name:"CheetahSpeed",score:55e3,level:8,lines:45,country:"ES"},{id:"bot10",name:"PantherShadow",score:5e4,level:7,lines:42,country:"IT"},{id:"bot11",name:"JaguarForce",score:45e3,level:7,lines:40,country:"MX"},{id:"bot12",name:"LynxSwift",score:4e4,level:6,lines:38,country:"CA"},{id:"bot13",name:"OcelotPro",score:35e3,level:6,lines:35,country:"AR"},{id:"bot14",name:"BobcatGamer",score:3e4,level:5,lines:32,country:"AU"},{id:"bot15",name:"CougarRush",score:28e3,level:5,lines:30,country:"NZ"}];class BS{constructor(t,n){this.gameRepository=t,this.playerStatsService=n,this.playerName=this.loadPlayerName(),this.playerId=this.loadPlayerId()}loadPlayerName(){const t=this.gameRepository.load("playerProfile");return(t==null?void 0:t.name)||"Jogador"}loadPlayerId(){let t=this.gameRepository.load("playerProfile");return(!t||!t.id)&&(t={...t,id:`player_${Date.now()}_${Math.random().toString(36).substr(2,9)}`},this.gameRepository.save("playerProfile",t)),t.id}setPlayerName(t){const n=this.gameRepository.load("playerProfile")||{};n.name=t,n.id=this.playerId,this.gameRepository.save("playerProfile",n),this.playerName=t}getPlayerName(){return this.playerName}getGlobalLeaderboard(t=100){const n=this.playerStatsService.getStats(),r={id:this.playerId,name:this.playerName,score:n.highScore,level:n.maxLevel,lines:n.linesCleared,country:"BR",isPlayer:!0},s=[...lh,r];return s.sort((i,o)=>o.score-i.score),s.slice(0,t)}getWeeklyLeaderboard(t=50){return this.getGlobalLeaderboard(t)}getCountryLeaderboard(t="BR",n=50){return this.getGlobalLeaderboard(200).filter(s=>s.country===t).slice(0,n)}getPlayerRank(){const t=this.getGlobalLeaderboard(1e3),n=t.findIndex(r=>r.id===this.playerId);return n===-1?{rank:t.length+1,total:t.length,percentile:0}:{rank:n+1,total:t.length,percentile:Math.floor((t.length-n)/t.length*100)}}getAroundPlayer(t=5){const n=this.getGlobalLeaderboard(1e3),r=n.findIndex(o=>o.id===this.playerId);if(r===-1)return[];const s=Math.max(0,r-t),i=Math.min(n.length,r+t+1);return n.slice(s,i)}submitScore(t){return Promise.resolve({success:!0})}getModeLeaderboard(t,n=50){return this.getGlobalLeaderboard(n)}getFriendsLeaderboard(){return lh.slice(0,5)}getLeaderboardStats(){const t=this.getPlayerRank(),n=this.playerStatsService.getStats();return{playerName:this.playerName,rank:t.rank,total:t.total,percentile:t.percentile,score:n.highScore,level:n.maxLevel,lines:n.linesCleared}}}class zS{constructor(t){this.playerStatsService=t}generateShareText(t){const{score:n,level:r,lines:s,mode:i}=t;return` Cat Tetris${i?` no modo ${i}`:""}!
 Pontuao: ${n.toLocaleString()}
 Nvel: ${r}
 Linhas: ${s}

Consegue me superar? `}generateShareURL(t){const n=window.location.origin+window.location.pathname,r=new URLSearchParams({score:t.score,level:t.level,lines:t.lines});return`${n}?${r.toString()}`}async copyToClipboard(t){try{return await navigator.clipboard.writeText(t),{success:!0}}catch(n){return{success:!1,error:n.message}}}async shareNative(t){if(!navigator.share)return{success:!1,error:"Web Share API not supported"};try{const n=this.generateShareText(t),r=this.generateShareURL(t);return await navigator.share({title:"Minha pontuao no Cat Tetris",text:n,url:r}),{success:!0}}catch(n){return n.name==="AbortError"?{success:!1,error:"Share cancelled"}:{success:!1,error:n.message}}}shareToTwitter(t){const n=this.generateShareText(t),r=this.generateShareURL(t),s=`https://twitter.com/intent/tweet?text=${encodeURIComponent(n)}&url=${encodeURIComponent(r)}`;return window.open(s,"_blank","width=600,height=400"),{success:!0}}shareToFacebook(t){const n=this.generateShareURL(t),r=`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(n)}`;return window.open(r,"_blank","width=600,height=400"),{success:!0}}shareToWhatsApp(t){const n=this.generateShareText(t),r=this.generateShareURL(t),s=`${n}

${r}`,i=`https://wa.me/?text=${encodeURIComponent(s)}`;return window.open(i,"_blank"),{success:!0}}async takeScreenshot(t){return{success:!1,error:"Not implemented"}}getAvailableMethods(){return{native:!!navigator.share,clipboard:!!navigator.clipboard,twitter:!0,facebook:!0,whatsapp:!0}}}class ds{constructor(){this.difficulty="medium",this.thinkingTime=100,this.lastDecision=Date.now(),this._actionQueue=[],this._isExpert=!1}setDifficulty(t){switch(this.difficulty=t,this._isExpert=t.startsWith("expert"),t){case"easy":this.thinkingTime=250;break;case"medium":this.thinkingTime=120;break;case"hard":this.thinkingTime=60;break;case"expert":this.thinkingTime=20;break;case"expert-tetris":this.thinkingTime=20;break;default:this.thinkingTime=120}}decideNextMove(t){const n=Date.now();if(this._actionQueue.length>0)return this._isExpert?this._actionQueue.shift():n-this.lastDecision<this.thinkingTime?null:(this.lastDecision=n,this._actionQueue.shift());if(n-this.lastDecision<this.thinkingTime)return null;this.lastDecision=n;const{currentPiece:r,board:s,heldPiece:i,canHold:o,nextPieces:a}=t;if(!r)return null;try{const c=(a==null?void 0:a[0])||null;let u=this._findBestMoveWithLookahead(r,s,c),h=!1;if(this._isExpert&&o){const d=i||c;if(d&&d.type!==r.type){const f=i?c:(a==null?void 0:a[1])||null,v=this._findBestMoveWithLookahead(d,s,f);v&&(!u||v.score>u.score+50)&&(u=v,h=!0)}}if(!u)this._actionQueue=[{action:"drop"}];else{const d=[];h&&d.push({action:"hold"});const f=h?i||(a==null?void 0:a[0]):r;d.push(...this._buildActionSequence(f,u.rotations,u.targetX,h)),this._actionQueue=d}}catch{this._actionQueue=[{action:"drop"}]}return this._actionQueue.length>0?this._actionQueue.shift():{action:"down"}}_findBestMoveWithLookahead(t,n,r){var u;let s=-1/0,i=null;const o=n.length,a=((u=n[0])==null?void 0:u.length)||10,c=this._isExpert&&r;for(let h=0;h<4;h++){const d=this._rotateShape(t.shape,h),f=d[0].length;for(let v=-1;v<=a-f+1;v++){const x=this._findLandingRow(d,n,v,o,a);if(x===null||x<0)continue;const S=this._placeOnBoard(d,n,v,x);if(!S)continue;const{board:b}=this._simulateClear(S);let p=this._evaluate(S,t);if(c){let m=-1/0;for(let g=0;g<4;g++){const w=this._rotateShape(r.shape,g),k=w[0].length;for(let j=-1;j<=a-k+1;j++){const C=this._findLandingRow(w,b,j,o,a);if(C===null||C<0)continue;const P=this._placeOnBoard(w,b,j,C);if(!P)continue;const E=this._evaluate(P,r);E>m&&(m=E)}}if(m>-1/0){const g=this.difficulty==="expert-tetris"?.3:.4;p=p*(1-g)+m*g}}this.difficulty==="easy"?p+=(Math.random()-.5)*1200:this.difficulty==="medium"&&Math.random()<.2&&(p+=(Math.random()-.5)*500),p>s&&(s=p,i={rotations:h,targetX:v,score:s})}}return i}_evaluate(t,n){switch(this.difficulty){case"expert":return this._evalSurvival(t,n);case"expert-tetris":return this._evalTetris(t,n);default:return this._evalDefault(t,n)}}_simulateClear(t){const n=t[0].length,r=[];let s=0;for(const i of t)i.every(o=>o!=null)?s++:r.push([...i]);for(;r.length<t.length;)r.unshift(new Array(n).fill(null));return{board:r,cleared:s}}_evalDefault(t,n){const{board:r,cleared:s}=this._simulateClear(t);let i=0;return i+=s*800,i-=this._getHeight(r)*45,i-=this._countHoles(r)*400,i-=this._getBumpiness(r)*35,i-=this._getRowTransitions(r)*15,i-=this._getColTransitions(r)*10,this.difficulty==="hard"&&(i+=s>=2?s*400:0,i-=this._countHoles(r)*200,i-=this._getCoveredHoles(r)*100,i-=this._getHeight(r)*30,this._countHoles(r)===0&&(i+=300),this._getHeight(r)<=6&&(i+=200)),i}_evalSurvival(t){const{board:n,cleared:r}=this._simulateClear(t),s=this._getHeight(n),i=this._countHoles(n),o=this._getBumpiness(n),a=this._getCoveredHoles(n);let c=0;return c+=r*3e3,r>=2&&(c+=r*r*600),r===4&&(c+=12e3),c-=s*200,c-=i*2500,c-=a*600,c-=o*180,c-=this._getRowTransitions(n)*45,c-=this._getColTransitions(n)*35,c-=this._getWellDepths(n)*100,s<=3?c+=2500:s<=5?c+=1200:s<=8&&(c+=500),i===0&&(c+=2500),o<=2?c+=1e3:o<=4&&(c+=400),s>12&&(c-=(s-12)*1e3),s>15&&(c-=(s-15)*2500),s>18&&(c-=25e3),c}_evalCombo(t,n){const{board:r,cleared:s}=this._simulateClear(t),i=r[0].length,o=this._getHeight(r),a=this._countHoles(r),c=this._getBumpiness(r),u=this._getCoveredHoles(r);let h=0;s===1?h+=6e3:s===2?h+=3500:s===3?h+=2500:s===4&&(h+=2e3);let d=0,f=0,v=0;const x={};for(let b=r.length-1;b>=0;b--){let p=0,m=-1;for(let g=0;g<i;g++)r[b][g]!=null?p++:m=g;p===i-1?(d++,f++,v=Math.max(v,f),m>=0&&(x[m]=(x[m]||0)+1)):p>=i-2?(d+=.5,f++,v=Math.max(v,f)):f=0}h+=d*2500,h+=v*v*600;let S=0;for(const b in x)x[b]>S&&(S=x[b]);return S>=2&&(h+=S*S*500),h-=a*2500,h-=u*700,h-=o*100,h-=c*120,h-=this._getRowTransitions(r)*35,h-=this._getColTransitions(r)*25,a===0&&(h+=1500),o<=6&&(h+=600),o>12&&(h-=(o-12)*800),o>15&&(h-=(o-15)*2e3),o>18&&(h-=25e3),h}_evalTetris(t,n){const{board:r,cleared:s}=this._simulateClear(t),i=r[0].length,o=r.length,a=this._getColumnHeights(r);this._getHeight(r);const c=this._countHoles(r),u=this._getCoveredHoles(r);let h=0;const d=i-1;s===4?h+=2e5:s>0&&(h-=s*15e3);let f=0;for(let w=0;w<o;w++)r[w][d]!=null&&f++;h-=f*6e3;const v=[];for(let w=0;w<i;w++)w!==d&&v.push(a[w]);const x=v.reduce((w,k)=>w+k,0)/v.length,S=x-a[d];h+=Math.max(0,S)*600,S>=4?h+=25e3:S>=3?h+=12e3:S>=2?h+=5e3:S>=1&&(h+=1e3);let b=0;for(let w=0;w<v.length-1;w++)b+=Math.abs(v[w]-v[w+1]);h-=b*500;const p=v.reduce((w,k)=>w+(k-x)**2,0)/v.length;h-=p*150,b===0?h+=6e3:b<=1?h+=2500:b<=2&&(h+=800);const m=this._countNearFullLinesExcluding(r,d);h+=m*5e3,m>=4?h+=2e4:m>=3?h+=8e3:m>=2&&(h+=3e3);for(let w=0;w<i;w++){if(w===d)continue;const k=a[w],j=w>0?a[w-1]:o,C=w<i-1?a[w+1]:o,P=Math.min(j,C)-k;P>1&&(h-=P*2e3)}n.type==="I"&&(s===4?h+=5e4:S<4&&(h-=2e4)),h-=c*5e3,h-=u*2e3,h-=this._getRowTransitions(r)*40,h-=this._getColTransitions(r)*30;const g=Math.max(...v);return g>14&&(h-=(g-14)*3e3),g>16&&(h-=(g-16)*6e3),g>18&&(h-=4e4),c===0&&(h+=4e3),x<=6&&(h+=1500),h}_countLines(t){let n=0;for(const r of t)r.every(s=>s!=null)&&n++;return n}_getHeight(t){for(let n=0;n<t.length;n++)if(t[n].some(r=>r!=null))return t.length-n;return 0}_countHoles(t){let n=0;const r=t[0].length;for(let s=0;s<r;s++){let i=!1;for(let o=0;o<t.length;o++)t[o][s]!=null?i=!0:i&&n++}return n}_getBumpiness(t){const n=this._getColumnHeights(t);let r=0;for(let s=0;s<n.length-1;s++)r+=Math.abs(n[s]-n[s+1]);return r}_getBumpinessExcluding(t,n){const r=this._getColumnHeights(t);let s=0;for(let i=0;i<r.length-1;i++)i===n||i+1===n||(s+=Math.abs(r[i]-r[i+1]));return s}_getColumnHeights(t){const n=t[0].length,r=[];for(let s=0;s<n;s++){let i=!1;for(let o=0;o<t.length;o++)if(t[o][s]!=null){r.push(t.length-o),i=!0;break}i||r.push(0)}return r}_getFlatness(t){const n=this._getColumnHeights(t),r=n.reduce((i,o)=>i+o,0)/n.length,s=n.reduce((i,o)=>i+(o-r)**2,0)/n.length;return Math.max(0,100-s)}_getWellDepths(t){const n=this._getColumnHeights(t);let r=0;for(let s=0;s<n.length;s++){const i=s>0?n[s-1]:20,o=s<n.length-1?n[s+1]:20,a=Math.min(i,o)-n[s];a>0&&(r+=a)}return r}_getRowTransitions(t){let n=0;const r=t[0].length;for(let s=0;s<t.length;s++){for(let i=0;i<r-1;i++){const o=t[s][i]!=null,a=t[s][i+1]!=null;o!==a&&n++}t[s][0]==null&&n++,t[s][r-1]==null&&n++}return n}_getColTransitions(t){let n=0;const r=t[0].length;for(let s=0;s<r;s++){for(let i=0;i<t.length-1;i++){const o=t[i][s]!=null,a=t[i+1][s]!=null;o!==a&&n++}t[t.length-1][s]==null&&n++}return n}_getCoveredHoles(t){let n=0;const r=t[0].length;for(let s=0;s<r;s++){let i=0;for(let o=0;o<t.length;o++)t[o][s]!=null?i++:i>0&&(n+=i)}return n}_countNearCompleteLines(t){let n=0;for(const r of t){const s=r.filter(i=>i!=null).length;s>=r.length-1&&s<r.length&&n++}return n}_countNearFullLinesExcluding(t,n){let r=0;for(const s of t){let i=0,o=-1;for(let a=0;a<s.length;a++)s[a]==null&&(i++,o=a);i===1&&o===n&&r++}return r}_buildActionSequence(t,n,r,s){var h;const i=[],o=n%4;for(let d=0;d<o;d++)i.push({action:"rotate"});const a=s?3:((h=t.position)==null?void 0:h.x)??3,c=r-a,u=c>0?"right":"left";for(let d=0;d<Math.abs(c);d++)i.push({action:u});return i.push({action:"drop"}),i}_rotateShape(t,n){let r=t;for(let s=0;s<n%4;s++)r=r[0].map((i,o)=>r.map(a=>a[o]).reverse());return r}_findLandingRow(t,n,r,s,i){for(let o=-t.length;o<s;o++)if(this._collides(t,n,r,o+1,s,i))return o;return s-t.length}_collides(t,n,r,s,i,o){for(let a=0;a<t.length;a++)for(let c=0;c<t[0].length;c++){if(!t[a][c])continue;const u=r+c,h=s+a;if(u<0||u>=o||h>=i||h>=0&&n[h][u]!=null)return!0}return!1}_placeOnBoard(t,n,r,s){const i=n.length,o=n[0].length,a=n.map(c=>[...c]);for(let c=0;c<t.length;c++)for(let u=0;u<t[0].length;u++){if(!t[c][u])continue;const h=r+u,d=s+c;if(h<0||h>=o||d<0||d>=i||a[d][h]!=null)return null;a[d][h]=1}return a}getDifficulties(){return[{id:"easy",name:"Fcil",emoji:"",description:"IA iniciante"},{id:"medium",name:"Mdio",emoji:"",description:"IA intermediria"},{id:"hard",name:"Difcil",emoji:"",description:"IA avanada"},{id:"expert",name:"Expert",emoji:"",description:"Mantm o board o mais baixo possvel"},{id:"expert-tetris",name:"Expert Tetris",emoji:"",description:"Constri para limpar 4 linhas de vez"}]}}class HS{constructor(t){this.gameRepository=t,this.currentMode=null,this.players=[],this.matchState=null}startLocalMatch(t="Jogador 1",n="Jogador 2"){return this.currentMode="1v1-local",this.players=[{id:"p1",name:t,score:0,level:1,lines:0,gameState:null,alive:!0},{id:"p2",name:n,score:0,level:1,lines:0,gameState:null,alive:!0}],this.matchState={startTime:Date.now(),status:"playing",winner:null},{mode:this.currentMode,players:this.players,matchId:`local_${Date.now()}`}}startAIMatch(t="Jogador",n="medium"){return this.currentMode="vs-ai",this.players=[{id:"p1",name:t,score:0,level:1,lines:0,gameState:null,alive:!0,isHuman:!0},{id:"ai",name:this.getAIName(n),score:0,level:1,lines:0,gameState:null,alive:!0,isAI:!0,difficulty:n}],this.matchState={startTime:Date.now(),status:"playing",winner:null,aiDifficulty:n},{mode:"vsAI",aiDifficulty:n,players:this.players,matchId:`ai_${Date.now()}`}}updatePlayerState(t,n){var s,i;const r=this.players.find(o=>o.id===t);r&&(r.gameState=n,r.score=((s=n.score)==null?void 0:s.points)||0,r.level=((i=n.score)==null?void 0:i.level)||1,r.lines=n.linesCleared||0,r.alive=!n.gameOver,this.checkWinCondition())}checkWinCondition(){const t=this.players.filter(n=>n.alive);return t.length===1?(this.matchState.status="finished",this.matchState.winner=t[0],this.matchState.endTime=Date.now(),this.matchState.duration=this.matchState.endTime-this.matchState.startTime,this.saveMatchResult(),{hasWinner:!0,winner:this.matchState.winner}):{hasWinner:!1}}saveMatchResult(){const t=this.gameRepository.load("multiplayerStats")||{localMatches:0,aiMatches:0,wins:0,losses:0,draws:0,totalTime:0};this.currentMode==="1v1-local"?t.localMatches++:this.currentMode==="vs-ai"&&(t.aiMatches++,this.matchState.winner.isHuman?t.wins++:this.matchState.winner.isAI&&t.losses++),t.totalTime+=this.matchState.duration,this.gameRepository.save("multiplayerStats",t)}getStats(){const t=this.gameRepository.load("multiplayerStats")||{localMatches:0,aiMatches:0,wins:0,losses:0,draws:0,totalTime:0};return{...t,winRate:t.aiMatches>0?(t.wins/t.aiMatches*100).toFixed(1):0,avgMatchTime:t.localMatches+t.aiMatches>0?Math.floor(t.totalTime/(t.localMatches+t.aiMatches)/1e3):0}}getMatchState(){return{...this.matchState,players:this.players,mode:this.currentMode}}endMatch(){const t={mode:this.currentMode,players:this.players,winner:this.matchState.winner,duration:Date.now()-this.matchState.startTime};return this.currentMode=null,this.players=[],this.matchState=null,t}startAIvsAIMatch(t="expert",n="expert-tetris"){return this.currentMode="ai-vs-ai",this.players=[{id:"ai1",name:this.getAIName(t),score:0,level:1,lines:0,gameState:null,alive:!0,isAI:!0,difficulty:t},{id:"ai2",name:this.getAIName(n),score:0,level:1,lines:0,gameState:null,alive:!0,isAI:!0,difficulty:n}],this.matchState={startTime:Date.now(),status:"playing",winner:null,ai1Difficulty:t,ai2Difficulty:n},{mode:"aiVsAI",ai1Difficulty:t,ai2Difficulty:n,players:this.players,matchId:`aivai_${Date.now()}`}}getAIName(t){return{easy:" MeowBot Iniciante",medium:" CatAI Intermedirio",hard:" FelineBot Avanado",expert:" NyanMaster Survival","expert-tetris":" TetrisNyan Expert"}[t]||"IA"}getAvailableModes(){return[{id:"vs-ai",name:"vs IA",emoji:"",description:"Enfrente o bot",players:1,type:"ai",difficulties:["easy","medium","hard","expert"]},{id:"ai-vs-ai",name:"IA vs IA",emoji:"",description:"Assista duas IAs se enfrentando (debug)",players:0,type:"debug"}]}}const kt={FUNDAMENTALS:"fundamentals",INTERMEDIATE:"intermediate",ADVANCED:"advanced",PRO:"pro"};class US{constructor(t){this.gameRepository=t,this.lessons=this._buildLessons(),this.progress=this._loadProgress()}_buildLessons(){return[{id:1,module:kt.FUNDAMENTALS,title:"Movimentao",description:"Mover, rotacionar e dropar peas",difficulty:"beginner",estimatedTime:"2 min",intro:["   Setas movem a pea para os lados","  Seta para cima rotaciona a pea","  Seta para baixo = soft drop (desce rpido)","  Espao = hard drop (cai instantaneamente)","A sombra mostra onde a pea vai pousar"],practice:{objective:"Limpe 3 linhas usando os controles",validate:t=>{const n=t.linesCleared||0;return{complete:n>=3,progress:Math.min(1,n/3),feedback:n>=3?" timo! Voc dominou os controles!":`${n}/3 linhas`}}},rewards:{fishCoins:100,xp:50,badge:"first_move",unlocks:[2]}},{id:2,module:kt.FUNDAMENTALS,title:"Hold Piece",description:"Segure uma pea para usar depois",difficulty:"beginner",estimatedTime:"2 min",intro:["Aperte C ou Shift para guardar a pea atual","A pea guardada aparece no canto esquerdo","Voc pode trocar 1 vez por turno","Dica: guarde peas valiosas como I e T","Isso ajuda quando a pea atual no encaixa bem"],practice:{objective:"Use o hold e limpe 3 linhas",validate:t=>{const n=t.hasUsedHold,r=t.linesCleared||0;return n?{complete:r>=3,progress:Math.min(1,r/3),feedback:r>=3?" Hold dominado!":` Hold usado! ${r}/3 linhas`}:{complete:!1,progress:0,feedback:"Aperte C para segurar a pea!"}}},rewards:{fishCoins:100,xp:50,badge:"hold_learner",unlocks:[3]}},{id:3,module:kt.FUNDAMENTALS,title:"Planejamento",description:"Use o painel Next para planejar jogadas",difficulty:"beginner",estimatedTime:"3 min",intro:["O painel NEXT mostra as prximas peas","Olhe as prximas 2-3 peas antes de agir","Se vem uma pea I, deixe espao vertical","Pensar  frente = menos buracos = mais linhas","Tente limpar muitas linhas sem criar buracos!"],practice:{objective:"Limpe 8 linhas (planeje bem!)",validate:t=>{const n=t.linesCleared||0;return{complete:n>=8,progress:Math.min(1,n/8),feedback:n>=8?" Excelente planejamento!":`${n}/8 linhas`}}},rewards:{fishCoins:150,xp:75,badge:"planner",unlocks:[4]}},{id:4,module:kt.INTERMEDIATE,title:"Combos",description:"Limpe linhas consecutivas para bnus",difficulty:"intermediate",estimatedTime:"4 min",intro:["Combo = limpar linhas em peas consecutivas","Cada combo seguido d +50 pontos de bnus","Combo 5x = +250 pontos extras!","Dica: empilhe baixo e limpe 1 linha por vez","Foque em manter o ritmo, sem pausas"],practice:{objective:"Consiga um combo de 3 ou mais",validate:t=>{const n=t.currentCombo||0,r=t.maxCombo||n,s=Math.max(n,r);return{complete:s>=3,progress:Math.min(1,s/3),feedback:s>=3?" Combo master!":`Melhor combo: ${s}x (precisa 3)`}}},rewards:{fishCoins:200,xp:100,badge:"combo_starter",unlocks:[5]}},{id:5,module:kt.INTERMEDIATE,title:"Tetris (4 linhas)",description:"Limpe 4 linhas de uma vez para 800pts",difficulty:"intermediate",estimatedTime:"5 min",intro:["Tetris = limpar 4 linhas ao mesmo tempo","Vale 800 pontos  o clear mais valioso!","Deixe uma coluna vazia (geralmente a da direita)","Preencha as outras 9 colunas em 4 linhas","Use a pea I (barra) para completar o Tetris"],practice:{objective:"Alcance 2.000 pontos",validate:t=>{const n=t.score||0;return{complete:n>=2e3,progress:Math.min(1,n/2e3),feedback:n>=2e3?" Pontuao alta!":`${n.toLocaleString()}/2.000 pts`}}},rewards:{fishCoins:250,xp:125,badge:"tetris_scorer",unlocks:[6]}},{id:6,module:kt.ADVANCED,title:"T-Spin",description:"Rotacione o T no ltimo momento para bnus",difficulty:"advanced",estimatedTime:"6 min",intro:["T-Spin = rotacionar a pea T em espao apertado","Vale pontos extras e ativa back-to-back!",'Crie um buraco em forma de "T" na pilha',"Deslize a pea T para dentro e rotacione"," difcil, mas d muitos pontos!"],practice:{objective:"Faa pelo menos 1 T-Spin e 4.000 pontos",validate:t=>{const n=t.tSpins||0,r=t.score||0;return n===0?{complete:!1,progress:Math.min(.5,r/8e3),feedback:"Tente rotacionar o T em espao apertado!"}:{complete:r>=4e3,progress:Math.min(1,r/4e3),feedback:r>=4e3?` T-Spin pro! (${n} T-Spins)`:` T-Spin! ${r.toLocaleString()}/4.000 pts`}}},rewards:{fishCoins:400,xp:250,badge:"tspin_learner",unlocks:[7]}},{id:7,module:kt.ADVANCED,title:"Back-to-Back",description:"Tetris ou T-Spin seguidos do 50% bnus",difficulty:"advanced",estimatedTime:"6 min",intro:["Back-to-Back = dois clears difceis seguidos","Conta como: Tetris (4 linhas) ou T-Spin","Cada B2B seguido d +50% de pontos!","Limpar 1-3 linhas normais quebra a cadeia","Combine T-Spins e Tetris para pontuao mxima"],practice:{objective:"Alcance 6.000 pontos com back-to-back",validate:t=>{const n=t.score||0,r=t.backToBackActive;return{complete:n>=6e3,progress:Math.min(1,n/6e3),feedback:n>=6e3?" Back-to-back dominado!":r?` B2B ativo! ${n.toLocaleString()}/6.000 pts`:`${n.toLocaleString()}/6.000 pts`}}},rewards:{fishCoins:500,xp:300,badge:"b2b_learner",unlocks:[8]}},{id:8,module:kt.PRO,title:"Desafio Final",description:"Prove que domina o Tetris!",difficulty:"pro",estimatedTime:"10 min",intro:["Use TUDO que aprendeu at aqui","Movimentao, hold, combos, T-Spins, B2B...","O objetivo  alcanar uma pontuao alta","No tenha pressa  planeje cada jogada","Boa sorte, mestre! "],practice:{objective:"Alcance 15.000 pontos",validate:t=>{const n=t.score||0;return{complete:n>=15e3,progress:Math.min(1,n/15e3),feedback:n>=15e3?" MESTRE DO TETRIS!":`${n.toLocaleString()}/15.000 pts`}}},rewards:{fishCoins:1e3,xp:500,badge:"tetris_master",unlocks:[]}}]}_loadProgress(){var n,r;return((r=(n=this.gameRepository)==null?void 0:n.load)==null?void 0:r.call(n,"tutorialProgress"))||{completedLessons:[],unlockedLessons:[1],badges:[],totalXP:0,currentModule:kt.FUNDAMENTALS}}_saveProgress(){var t,n;(n=(t=this.gameRepository)==null?void 0:t.save)==null||n.call(t,"tutorialProgress",this.progress)}getProgress(){return this.progress}getLessonById(t){return this.lessons.find(n=>n.id===t)}getAvailableLessons(){return this.lessons.filter(t=>this.progress.unlockedLessons.includes(t.id))}completeLesson(t,n){var s;const r=this.getLessonById(t);return r?(this.progress.completedLessons.includes(t)||this.progress.completedLessons.push(t),(r.rewards.unlocks||[]).forEach(i=>{this.progress.unlockedLessons.includes(i)||this.progress.unlockedLessons.push(i)}),r.rewards.badge&&!this.progress.badges.includes(r.rewards.badge)&&this.progress.badges.push(r.rewards.badge),this.progress.totalXP+=r.rewards.xp||0,this._saveProgress(),{completed:!0,lessonId:t,lessonTitle:r.title,rewards:r.rewards,nextLesson:((s=r.rewards.unlocks)==null?void 0:s[0])||null,performance:n}):null}resetProgress(){this.progress={completedLessons:[],unlockedLessons:[1],badges:[],totalXP:0,currentModule:kt.FUNDAMENTALS},this._saveProgress()}}function GS(e=new pS){return e.registerSingleton("gameRepository",()=>new xS),e.registerSingleton("settingsService",()=>new NS),e.registerSingleton("statisticsService",()=>new AS),e.registerSingleton("scoringService",()=>new Bn),e.registerSingleton("pieceFactory",()=>new _r),e.registerSingleton("movementStrategyFactory",()=>new Ar),e.registerSingleton("keyboardInputService",()=>new LS),e.registerSingleton("playerStatsService",t=>new OS(t),["gameRepository"]),e.registerSingleton("currencyService",t=>new DS(t),["gameRepository"]),e.registerSingleton("missionsService",(t,n)=>new RS(t,n),["gameRepository","currencyService"]),e.registerSingleton("achievementsService",(t,n,r)=>new IS(t,n,r),["gameRepository","currencyService","playerStatsService"]),e.registerSingleton("shopService",(t,n)=>new Qp(t,n),["gameRepository","currencyService"]),e.registerSingleton("gameModesService",t=>new VS(t),["gameRepository"]),e.registerSingleton("leaderboardService",(t,n)=>new BS(t,n),["gameRepository","playerStatsService"]),e.registerSingleton("shareService",t=>new zS(t),["playerStatsService"]),e.registerSingleton("aiOpponentService",()=>new ds),e.registerSingleton("multiplayerService",t=>new HS(t),["gameRepository"]),e.registerSingleton("tutorialService",t=>new US(t),["gameRepository"]),e.registerSingleton("gameService",(t,n,r,s)=>new Nr(t,n,r,s),["pieceFactory","movementStrategyFactory","gameRepository","scoringService"]),e}const F=GS();function Xp(){const[e,t]=y.useState(null),[n,r]=y.useState(!0);y.useEffect(()=>{try{const a=F.resolve("currencyService");t(a.getCurrency()),r(!1);const c=()=>{t(a.getCurrency())};return window.addEventListener("currencyUpdated",c),()=>{window.removeEventListener("currencyUpdated",c)}}catch{r(!1)}},[]);const s=y.useCallback((a,c)=>{try{const u=F.resolve("currencyService"),h=u.addFish(a,c);return h&&(t(u.getCurrency()),window.dispatchEvent(new Event("currencyUpdated"))),h}catch{return!1}},[]),i=y.useCallback((a,c)=>{try{const u=F.resolve("currencyService"),h=u.spendFish(a,c);return h&&(t(u.getCurrency()),window.dispatchEvent(new Event("currencyUpdated"))),h}catch{return!1}},[]),o=y.useCallback(a=>{try{return F.resolve("currencyService").canAfford(a)}catch{return!1}},[]);return{currency:e,loading:n,addFish:s,spendFish:i,canAfford:o}}function $S({className:e=""}){const{currency:t,loading:n}=Xp();return n||!t?l.jsxs("div",{className:`flex items-center gap-2 ${e}`,children:[l.jsx("div",{className:"text-2xl",children:""}),l.jsx("div",{className:"text-white/60",children:"..."})]}):l.jsxs(T.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:`flex items-center gap-2 bg-black/30 px-4 py-2 rounded-lg backdrop-blur-sm ${e}`,children:[l.jsx("span",{className:"text-2xl",children:""}),l.jsx(T.span,{initial:{scale:1.2,color:"#fbbf24"},animate:{scale:1,color:"#ffffff"},transition:{duration:.3},className:"text-xl font-bold",children:t.fish.toLocaleString()},t.fish)]})}function WS({onStartGame:e,onNewGame:t,onShowSettings:n,onShowShop:r,onShowMissions:s,onShowAchievements:i,onShowMultiplayer:o,onShowTutorial:a,onShowTutorialHub:c,onShowAIShowcase:u,onShowInstallPrompt:h,canInstallPWA:d,hasActiveGame:f,gameState:v}){var g,w;const[x,S]=y.useState(!0),b=mS(),p=y.useCallback(k=>{var j;x&&((j=b.playMenuSelect)==null||j.call(b)),k==null||k()},[x,b]);y.useEffect(()=>{const k=j=>{j.key==="Enter"&&(j.preventDefault(),p(e))};return window.addEventListener("keydown",k),()=>window.removeEventListener("keydown",k)},[p,e]);const m=(k=0)=>({initial:{opacity:0,y:16},animate:{opacity:1,y:0},transition:{duration:.35,delay:k,ease:"easeOut"}});return l.jsxs("div",{className:"h-screen bg-gradient-to-b from-slate-900 via-purple-950 to-slate-900 flex flex-col items-center justify-center p-4 relative overflow-hidden",children:[l.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[l.jsx("div",{className:"absolute top-1/4 -left-32 w-64 h-64 bg-purple-600/10 rounded-full blur-3xl"}),l.jsx("div",{className:"absolute bottom-1/4 -right-32 w-64 h-64 bg-blue-600/10 rounded-full blur-3xl"})]}),l.jsx("div",{className:"fixed top-3 right-3 z-50",children:l.jsx($S,{})}),l.jsxs("div",{className:"w-full max-w-sm relative z-10 flex flex-col items-center",children:[l.jsxs(T.div,{...m(0),className:"text-center mb-4",children:[l.jsx("h1",{className:"text-4xl font-extrabold text-white tracking-tight drop-shadow-lg select-none",children:" Cat Tetris"}),l.jsx("p",{className:"text-white/50 text-xs mt-1",children:"Empilhe blocos com seus amigos felinos"})]}),l.jsx(T.div,{...m(.1),className:"w-full space-y-2 mb-4",children:f?l.jsxs(l.Fragment,{children:[l.jsxs("button",{onClick:()=>p(e),className:"w-full py-4 rounded-xl bg-emerald-500 hover:bg-emerald-400 active:scale-[0.98] text-white font-bold text-lg shadow-lg shadow-emerald-500/20 transition-all duration-150",children:[" Continuar",l.jsxs("span",{className:"block text-emerald-100/70 text-xs font-normal mt-0.5",children:["Nvel ",((g=v==null?void 0:v.score)==null?void 0:g.level)||1,"  ",(((w=v==null?void 0:v.score)==null?void 0:w.points)||0).toLocaleString()," pts"]})]}),l.jsx("button",{onClick:()=>p(t),className:"w-full py-3 rounded-xl bg-white/10 hover:bg-white/15 active:scale-[0.98] text-white font-semibold text-base border border-white/10 transition-all duration-150",children:"Novo Jogo"})]}):l.jsx("button",{onClick:()=>p(e),className:"w-full py-5 rounded-xl bg-gradient-to-r from-emerald-500 to-green-500 hover:from-emerald-400 hover:to-green-400 active:scale-[0.98] text-white font-bold text-xl shadow-lg shadow-emerald-500/25 transition-all duration-150",children:" Jogar"})}),l.jsxs(T.div,{...m(.18),className:"w-full grid grid-cols-3 gap-2 mb-4",children:[l.jsx(Sa,{icon:"",label:"VS IA",sub:"Desafie o bot",onClick:()=>p(o)}),l.jsx(Sa,{icon:"",label:"Tutorial",sub:"Aprenda a jogar",onClick:()=>p(c)}),l.jsx(Sa,{icon:"",label:"IA Expert",sub:"Assista a IA jogar",onClick:()=>p(u)})]}),l.jsxs(T.div,{...m(.25),className:"w-full grid grid-cols-4 gap-1 mb-4",children:[l.jsx(ui,{icon:"",label:"Loja",onClick:()=>p(r)}),l.jsx(ui,{icon:"",label:"Misses",onClick:()=>p(s)}),l.jsx(ui,{icon:"",label:"Conquistas",onClick:()=>p(i)}),l.jsx(ui,{icon:"",label:"Config",onClick:()=>p(n)})]}),l.jsxs(T.div,{...m(.3),className:"flex items-center gap-3 text-xs text-white/25",children:[l.jsx("button",{onClick:()=>S(!x),className:"hover:text-white/50 transition-colors",children:x?"":""}),d&&l.jsx("button",{onClick:()=>p(h),className:"hover:text-white/50 transition-colors",children:" Instalar"}),l.jsx("span",{className:"select-none",children:"v1.0"})]})]})]})}function Sa({icon:e,label:t,sub:n,onClick:r}){return l.jsxs("button",{onClick:r,className:"flex flex-col items-center text-center p-3 rounded-xl bg-white/[0.06] hover:bg-white/[0.1] border border-white/[0.06] hover:border-white/[0.12] active:scale-[0.97] transition-all duration-150",children:[l.jsx("span",{className:"text-2xl mb-1",children:e}),l.jsx("span",{className:"text-white font-semibold text-sm leading-tight",children:t}),l.jsx("span",{className:"text-white/40 text-[10px] mt-0.5 leading-tight",children:n})]})}function ui({icon:e,label:t,onClick:n}){return l.jsxs("button",{onClick:n,className:"flex flex-col items-center gap-1 px-2 py-2 rounded-lg hover:bg-white/[0.07] active:scale-95 transition-all duration-150",children:[l.jsx("span",{className:"text-lg",children:e}),l.jsx("span",{className:"text-white/40 text-[10px] leading-none",children:t})]})}function KS({onClose:e}){const[t,n]=y.useState(null),[r,s]=y.useState(!0),[i,o]=y.useState(!1);y.useEffect(()=>{const u=d=>{d.preventDefault(),n(d)},h=()=>{o(!0),s(!1),n(null),localStorage.setItem("cat-tetris-installed","true"),e&&e()};return window.addEventListener("beforeinstallprompt",u),window.addEventListener("appinstalled",h),window.matchMedia("(display-mode: standalone)").matches&&(o(!0),e&&e()),()=>{window.removeEventListener("beforeinstallprompt",u),window.removeEventListener("appinstalled",h)}},[e]);const a=async()=>{if(!t)return;t.prompt();const{outcome:u}=await t.userChoice;u==="accepted"&&(s(!1),e&&e()),localStorage.setItem("cat-tetris-install-prompt-seen","true"),n(null)},c=()=>{s(!1),localStorage.setItem("cat-tetris-install-prompt-seen","true"),e&&e()};return i?null:t?l.jsx(me,{children:r&&l.jsx(T.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:l.jsx(T.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},className:"bg-gradient-to-br from-purple-900 to-blue-900 rounded-2xl p-6 max-w-md w-full shadow-2xl border-2 border-purple-500/30",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-6xl mb-4",children:""}),l.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Instalar Cat Tetris"}),l.jsx("p",{className:"text-purple-200 mb-6",children:"Instale o Cat Tetris na sua tela inicial para jogar offline a qualquer momento! Funciona como um app nativo."}),l.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-6 text-sm",children:[l.jsxs("div",{className:"bg-white/10 rounded-lg p-3",children:[l.jsx("div",{className:"text-green-400 mb-1",children:" Acesso Rpido"}),l.jsx("div",{className:"text-purple-200",children:"cone na tela inicial"})]}),l.jsxs("div",{className:"bg-white/10 rounded-lg p-3",children:[l.jsx("div",{className:"text-green-400 mb-1",children:" Offline"}),l.jsx("div",{className:"text-purple-200",children:"Jogue sem internet"})]}),l.jsxs("div",{className:"bg-white/10 rounded-lg p-3",children:[l.jsx("div",{className:"text-green-400 mb-1",children:" Performance"}),l.jsx("div",{className:"text-purple-200",children:"Carregamento instantneo"})]}),l.jsxs("div",{className:"bg-white/10 rounded-lg p-3",children:[l.jsx("div",{className:"text-green-400 mb-1",children:" Experincia"}),l.jsx("div",{className:"text-purple-200",children:"Como app nativo"})]})]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx(T.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:c,className:"flex-1 bg-gray-600 hover:bg-gray-700 text-white py-3 px-4 rounded-xl font-semibold transition-colors",children:"Agora no"}),l.jsx(T.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:a,className:"flex-1 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white py-3 px-4 rounded-xl font-semibold transition-all shadow-lg",children:" Instalar"})]})]})})})}):l.jsx(T.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:l.jsx(T.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},className:"bg-gradient-to-br from-purple-900 to-blue-900 rounded-2xl p-6 max-w-md w-full shadow-2xl border-2 border-purple-500/30",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-6xl mb-4",children:""}),l.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"PWA no disponvel"}),l.jsx("p",{className:"text-purple-200 mb-6",children:"Este dispositivo no suporta instalao de PWA ou o app j est instalado."}),l.jsx(T.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:c,className:"w-full bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white py-3 px-4 rounded-xl font-semibold transition-all shadow-lg",children:" Entendi"})]})})})}function Yp(){const[e,t]=y.useState([]),[n,r]=y.useState(!0);y.useEffect(()=>{try{const o=F.resolve("missionsService");t(o.getMissions()),r(!1);const a=()=>{t(o.getMissions())},c=({linesCleared:v})=>{o.incrementProgress(oe.CLEAR_LINES,v),v===4&&o.incrementProgress(oe.TETRIS_CLEAR,1),a()},u=()=>{o.incrementProgress(oe.T_SPINS,1),a()},h=()=>{o.incrementProgress(oe.PLACE_PIECES,1),a()},d=({score:v,level:x,combo:S})=>{v&&o.updateProgress(oe.SCORE_POINTS,v),x&&o.updateProgress(oe.REACH_LEVEL,x),S&&o.updateProgress(oe.COMBOS,S),a()},f=()=>{o.incrementProgress(oe.BACK_TO_BACK,1),a()};return L.on(O.LINE_CLEARED,c),L.on(O.T_SPIN,u),L.on(O.PIECE_PLACED,h),L.on(O.SCORE_UPDATED,d),L.on(O.BACK_TO_BACK,f),()=>{L.off(O.LINE_CLEARED,c),L.off(O.T_SPIN,u),L.off(O.PIECE_PLACED,h),L.off(O.SCORE_UPDATED,d),L.off(O.BACK_TO_BACK,f)}}catch{r(!1)}},[]),y.useEffect(()=>{if(n)return;const o=setInterval(()=>{try{const a=F.resolve("missionsService"),u=F.resolve("statisticsService").getStats();u.playTime>0&&(a.updateProgress(oe.SURVIVE_TIME,u.playTime),t(a.getMissions()))}catch{}},1e3);return()=>clearInterval(o)},[n]);const s=y.useCallback(o=>{try{const a=F.resolve("missionsService"),c=a.claimReward(o);return c.success&&(t(a.getMissions()),window.dispatchEvent(new Event("currencyUpdated"))),c}catch(a){return{success:!1,error:a.message}}},[]),i=y.useCallback(()=>{try{return F.resolve("missionsService").getStats()}catch{return null}},[]);return{missions:e,loading:n,claimReward:s,getMissionsStats:i}}function Jp({trigger:e,duration:t=3e3,message:n}){const[r,s]=y.useState(!1),[i,o]=y.useState([]);return y.useEffect(()=>{if(e){s(!0);const a=[];for(let c=0;c<50;c++)a.push({id:c,x:Math.random()*100,y:-10,rotation:Math.random()*360,color:["#FFD700","#FF6B6B","#4ECDC4","#45B7D1","#FFA07A","#98D8C8"][Math.floor(Math.random()*6)],size:Math.random()*10+5,delay:Math.random()*.5});o(a),setTimeout(()=>{s(!1),o([])},t)}},[e,t]),r?l.jsxs("div",{className:"fixed inset-0 pointer-events-none z-[9999] overflow-hidden",children:[i.map(a=>l.jsx(T.div,{initial:{x:`${a.x}vw`,y:a.y,rotate:a.rotation,opacity:1},animate:{y:"110vh",rotate:a.rotation+720,opacity:0},transition:{duration:2+Math.random(),delay:a.delay,ease:"easeIn"},style:{position:"absolute",width:a.size,height:a.size,backgroundColor:a.color,borderRadius:Math.random()>.5?"50%":"0"}},a.id)),n&&l.jsx(T.div,{initial:{scale:0,y:"50vh"},animate:{scale:1,y:"40vh"},exit:{scale:0,opacity:0},transition:{type:"spring",stiffness:200,damping:20},className:"absolute inset-x-0 flex justify-center",children:l.jsx("div",{className:"bg-gradient-to-r from-yellow-400 to-orange-500 text-white font-bold text-4xl px-8 py-4 rounded-2xl shadow-2xl border-4 border-white",children:n})}),l.jsx(T.div,{initial:{opacity:0},animate:{opacity:[0,1,0]},transition:{duration:1,repeat:3},className:"absolute inset-0 bg-gradient-to-b from-yellow-400/20 via-transparent to-transparent"})]}):null}function qS(){const[e,t]=y.useState([]);y.useEffect(()=>{const s=i=>{const{message:o,type:a="info",duration:c=3e3}=i.detail,u={id:`toast_${Date.now()}_${Math.random()}`,message:o,type:a,duration:c};t(h=>[...h,u]),setTimeout(()=>{t(h=>h.filter(d=>d.id!==u.id))},c)};return window.addEventListener("showToast",s),()=>window.removeEventListener("showToast",s)},[]);const n=s=>{switch(s){case"success":return"from-green-600 to-emerald-600 border-green-400";case"error":return"from-red-600 to-rose-600 border-red-400";case"warning":return"from-yellow-600 to-amber-600 border-yellow-400";case"info":default:return"from-blue-600 to-cyan-600 border-blue-400"}},r=s=>{switch(s){case"success":return"";case"error":return"";case"warning":return"";case"info":default:return""}};return l.jsx("div",{className:"fixed top-4 right-4 z-[9999] flex flex-col gap-2 pointer-events-none",children:l.jsx(me,{children:e.map(s=>l.jsx(T.div,{initial:{opacity:0,x:100,scale:.8},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:100,scale:.8},className:`bg-gradient-to-r ${n(s.type)} border-2 rounded-lg px-4 py-3 shadow-2xl min-w-[250px] max-w-[400px] pointer-events-auto`,children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("span",{className:"text-white text-xl font-bold",children:r(s.type)}),l.jsx("span",{className:"text-white font-medium flex-1",children:s.message})]})},s.id))})})}function lr(e,t="info",n=3e3){window.dispatchEvent(new CustomEvent("showToast",{detail:{message:e,type:t,duration:n}}))}function QS({onClose:e}){const{missions:t,loading:n,claimReward:r,getMissionsStats:s}=Yp(),[i,o]=ce.useState(!1),a=s(),c=d=>{const f=r(d);f.success?(lr(` Recompensa coletada: +${f.reward} `,"success"),s().allClaimed&&(o(!0),setTimeout(()=>o(!1),3e3))):lr(` ${f.error}`,"error")},u=d=>{switch(d){case"easy":return"text-green-400";case"medium":return"text-yellow-400";case"hard":return"text-red-400";default:return"text-white"}},h=d=>{switch(d){case"easy":return" Fcil";case"medium":return" Mdio";case"hard":return" Difcil";default:return d}};return n?l.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",children:l.jsx("div",{className:"text-white text-xl",children:"Carregando misses..."})}):l.jsxs(T.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:e,children:[l.jsxs(T.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},className:"bg-gradient-to-br from-purple-900/95 to-blue-900/95 rounded-2xl p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto border-2 border-white/20 shadow-2xl",onClick:d=>d.stopPropagation(),children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-3xl font-bold text-white flex items-center gap-2",children:" Misses Dirias"}),l.jsx("p",{className:"text-white/60 text-sm mt-1",children:"Complete misses para ganhar  Peixes"})]}),l.jsx("button",{onClick:e,className:"text-white/60 hover:text-white text-2xl transition-colors",children:""})]}),a&&l.jsxs("div",{className:"bg-black/30 rounded-lg p-4 mb-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-white/80",children:"Progresso Dirio:"}),l.jsxs("span",{className:"text-white font-bold",children:[a.completed,"/",a.total," completas"]})]}),l.jsxs("div",{className:"flex justify-between items-center mt-2",children:[l.jsx("span",{className:"text-white/80",children:"Recompensas Disponveis:"}),l.jsxs("span",{className:"text-yellow-400 font-bold flex items-center gap-1",children:[" ",a.claimedRewards,"/",a.totalRewards]})]})]}),l.jsx("div",{className:"space-y-4",children:t.map((d,f)=>{const v=Math.min(d.progress,d.target),x=v/d.target*100;return l.jsxs(T.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:f*.1},className:`bg-black/40 rounded-lg p-4 border-2 ${d.completed?"border-green-500/50":"border-white/10"}`,children:[l.jsxs("div",{className:"flex justify-between items-start mb-2",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx("h3",{className:"text-white font-bold text-lg",children:d.title}),d.completed&&!d.claimed&&l.jsx("span",{className:"text-green-400 text-xl animate-pulse",children:""}),d.claimed&&l.jsx("span",{className:"text-white/40 text-sm",children:"(Coletado)"})]}),l.jsx("p",{className:"text-white/60 text-sm",children:d.description}),l.jsx("span",{className:`text-xs ${u(d.difficulty)}`,children:h(d.difficulty)})]}),l.jsx("div",{className:"text-right",children:l.jsxs("div",{className:"text-yellow-400 font-bold flex items-center gap-1",children:[l.jsx("span",{className:"text-2xl",children:""}),l.jsx("span",{children:d.reward})]})})]}),l.jsxs("div",{className:"mt-3",children:[l.jsxs("div",{className:"flex justify-between text-sm text-white/60 mb-1",children:[l.jsx("span",{children:"Progresso"}),l.jsxs("span",{children:[v,"/",d.target]})]}),l.jsx("div",{className:"w-full bg-gray-700 rounded-full h-3 overflow-hidden",children:l.jsx(T.div,{initial:{width:0},animate:{width:`${x}%`},transition:{duration:.5},className:`h-full ${d.completed?"bg-green-500":"bg-blue-500"}`})})]}),d.completed&&!d.claimed&&l.jsx(T.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>c(d.id),className:"w-full mt-3 bg-green-600 hover:bg-green-500 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:" Coletar Recompensa"})]},d.id)})}),l.jsx("div",{className:"mt-6 text-center text-white/40 text-sm",children:"As misses resetam todos os dias s 00:00"})]}),l.jsx(Jp,{trigger:i,message:" Todas as misses completas! ",duration:3e3})]})}function Zp(){const[e,t]=y.useState([]),[n,r]=y.useState([]),[s,i]=y.useState(!0);y.useEffect(()=>{try{const h=F.resolve("achievementsService");t(h.getAchievements()),i(!1);const d=setInterval(()=>{const v=F.resolve("playerStatsService").getStats(),x=h.checkAchievements(v);x.length>0&&(t(h.getAchievements()),r(x),window.dispatchEvent(new CustomEvent("achievementsUnlocked",{detail:x})),setTimeout(()=>{r([])},5e3))},2e3);return()=>clearInterval(d)}catch{i(!1)}},[]);const o=y.useCallback(h=>{try{return F.resolve("achievementsService").getByTier(h)}catch{return[]}},[]),a=y.useCallback(()=>{try{return F.resolve("achievementsService").getUnlocked()}catch{return[]}},[]),c=y.useCallback(()=>{try{return F.resolve("achievementsService").getLocked()}catch{return[]}},[]),u=y.useCallback(()=>{try{return F.resolve("achievementsService").getStats()}catch{return null}},[]);return{achievements:e,newUnlocks:n,loading:s,getAchievementsByTier:o,getUnlocked:a,getLocked:c,getStats:u}}function XS({onClose:e}){const{achievements:t,loading:n,getStats:r,getAchievementsByTier:s}=Zp(),[i,o]=y.useState("all"),a=r(),c={bronze:"from-amber-700 to-amber-900",silver:"from-gray-400 to-gray-600",gold:"from-yellow-400 to-yellow-600",platinum:"from-cyan-400 to-blue-600"},u={bronze:"",silver:"",gold:"",platinum:""},h=i==="all"?t:s(i);return n?l.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",children:l.jsx("div",{className:"text-white text-xl",children:"Carregando conquistas..."})}):l.jsx(T.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:e,children:l.jsxs(T.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},className:"bg-gradient-to-br from-indigo-900/95 to-purple-900/95 rounded-2xl p-6 max-w-4xl w-full max-h-[90vh] overflow-y-auto border-2 border-white/20 shadow-2xl",onClick:d=>d.stopPropagation(),children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-3xl font-bold text-white flex items-center gap-2",children:" Conquistas"}),l.jsx("p",{className:"text-white/60 text-sm mt-1",children:"Desbloqueie conquistas para ganhar  Peixes"})]}),l.jsx("button",{onClick:e,className:"text-white/60 hover:text-white text-2xl transition-colors",children:""})]}),a&&l.jsxs("div",{className:"bg-black/30 rounded-lg p-4 mb-6",children:[l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-2xl font-bold text-white",children:[a.unlocked,"/",a.total]}),l.jsx("div",{className:"text-white/60 text-sm",children:"Desbloqueadas"})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-2xl font-bold text-green-400",children:[a.percentage,"%"]}),l.jsx("div",{className:"text-white/60 text-sm",children:"Completo"})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-2xl font-bold text-yellow-400 flex items-center justify-center gap-1",children:[" ",a.earnedRewards.toLocaleString()]}),l.jsx("div",{className:"text-white/60 text-sm",children:"Ganhos"})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-2xl font-bold text-white/40 flex items-center justify-center gap-1",children:[" ",a.totalRewards.toLocaleString()]}),l.jsx("div",{className:"text-white/60 text-sm",children:"Total"})]})]}),l.jsxs("div",{className:"flex justify-around mt-4 pt-4 border-t border-white/10",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-lg",children:""}),l.jsx("div",{className:"text-white/80 text-sm",children:a.byTier.bronze})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-lg",children:""}),l.jsx("div",{className:"text-white/80 text-sm",children:a.byTier.silver})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-lg",children:""}),l.jsx("div",{className:"text-white/80 text-sm",children:a.byTier.gold})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-lg",children:""}),l.jsx("div",{className:"text-white/80 text-sm",children:a.byTier.platinum})]})]})]}),l.jsxs("div",{className:"flex gap-2 mb-4 overflow-x-auto",children:[l.jsx("button",{onClick:()=>o("all"),className:`px-4 py-2 rounded-lg font-bold transition-colors whitespace-nowrap ${i==="all"?"bg-white text-black":"bg-white/20 text-white hover:bg-white/30"}`,children:"Todas"}),Object.keys(u).map(d=>l.jsxs("button",{onClick:()=>o(d),className:`px-4 py-2 rounded-lg font-bold transition-colors whitespace-nowrap ${i===d?`bg-gradient-to-r ${c[d]} text-white`:"bg-white/20 text-white hover:bg-white/30"}`,children:[u[d]," ",d.charAt(0).toUpperCase()+d.slice(1)]},d))]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:h.map((d,f)=>{const v=d.progress||0,x=d.requirement.value,S=Math.min(v/x*100,100);return l.jsxs(T.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:f*.05},className:`bg-black/40 rounded-lg p-4 border-2 relative overflow-hidden ${d.unlocked?`border-transparent bg-gradient-to-br ${c[d.tier]}`:"border-white/10"}`,children:[d.unlocked&&l.jsx("div",{className:"absolute top-2 right-2 text-3xl",children:""}),l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:"text-4xl",children:u[d.tier]}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:`font-bold text-lg mb-1 ${d.unlocked?"text-white":"text-white/60"}`,children:d.title}),l.jsx("p",{className:`text-sm mb-2 ${d.unlocked?"text-white/90":"text-white/40"}`,children:d.description}),l.jsxs("div",{className:`flex items-center gap-1 text-sm font-bold ${d.unlocked?"text-yellow-300":"text-white/40"}`,children:[" ",d.reward]}),!d.unlocked&&l.jsxs("div",{className:"mt-2",children:[l.jsxs("div",{className:"flex justify-between text-xs text-white/40 mb-1",children:[l.jsx("span",{children:"Progresso"}),l.jsxs("span",{children:[v,"/",x]})]}),l.jsx("div",{className:"w-full bg-gray-700/50 rounded-full h-2",children:l.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${S}%`}})})]}),d.unlocked&&d.unlockedAt&&l.jsxs("div",{className:"text-xs text-white/60 mt-2",children:["Desbloqueado em ",new Date(d.unlockedAt).toLocaleDateString()]})]})]})]},d.id)})}),h.length===0&&l.jsx("div",{className:"text-center text-white/40 py-8",children:"Nenhuma conquista nesta categoria"})]})})}function YS(){const[e,t]=y.useState([]),[n,r]=y.useState(!1);y.useEffect(()=>{const o=a=>{const c=a.detail;c.some(h=>h.tier==="platinum")&&(r(!0),setTimeout(()=>r(!1),3e3)),c.forEach((h,d)=>{setTimeout(()=>{const f={id:`${h.id}_${Date.now()}`,achievement:h};t(v=>[...v,f]),setTimeout(()=>{t(v=>v.filter(x=>x.id!==f.id))},5e3)},d*500)})};return window.addEventListener("achievementsUnlocked",o),()=>{window.removeEventListener("achievementsUnlocked",o)}},[]);const s={bronze:"",silver:"",gold:"",platinum:""},i={bronze:"from-amber-700 to-amber-900",silver:"from-gray-400 to-gray-600",gold:"from-yellow-400 to-yellow-600",platinum:"from-cyan-400 to-blue-600"};return l.jsxs("div",{className:"fixed top-4 right-4 z-[9999] pointer-events-none",children:[l.jsx(me,{children:e.map(o=>{const{achievement:a}=o;return l.jsx(T.div,{initial:{opacity:0,x:100,scale:.8},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:100,scale:.8},transition:{type:"spring",stiffness:200,damping:20},className:`bg-gradient-to-r ${i[a.tier]} rounded-lg p-4 shadow-2xl mb-3 border-2 border-white/30 pointer-events-auto max-w-sm`,children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"text-5xl",children:s[a.tier]}),l.jsxs("div",{className:"flex-1",children:[l.jsx("div",{className:"text-white/90 text-sm font-bold mb-1",children:" CONQUISTA DESBLOQUEADA!"}),l.jsx("h3",{className:"text-white font-bold text-lg",children:a.title}),l.jsx("p",{className:"text-white/80 text-sm",children:a.description}),l.jsxs("div",{className:"flex items-center gap-1 mt-2 text-yellow-200 font-bold",children:[l.jsx("span",{className:"text-xl",children:""}),l.jsxs("span",{children:["+",a.reward]})]})]})]})},o.id)})}),l.jsx(Jp,{trigger:n,message:" Conquista Lendria! ",duration:3e3})]})}function JS({mode:e,aiDifficulty:t,ai1Difficulty:n,ai2Difficulty:r,onExit:s}){var w,k,j,C,P,E,A,H,X,q,B,G,R,te,_,M,I,V,Y,Qe,Re,ft;const[i,o]=y.useState(null),[a,c]=y.useState(null),[u,h]=y.useState(null),[d,f]=y.useState(0),[v,x]=y.useState(0),S=y.useRef({p1:null,p2:null,ai:null,ai1:null,ai2:null}),b=y.useRef(0),p=y.useRef(null);y.useEffect(()=>{const $=new Nr(new _r,new Ar,null,new Bn),J=new Nr(new _r,new Ar,null,new Bn);let ve=null,K=null,U=null;if(e==="vsAI")try{ve=new ds,ve.setDifficulty(t||"medium")}catch{}else e==="aiVsAI"&&(K=new ds,K.setDifficulty(n||"expert"),U=new ds,U.setDifficulty(r||"expert-tetris"));return $.initializeGame(),$.isPlaying=!0,J.initializeGame(),J.isPlaying=!0,S.current={p1:$,p2:J,ai:ve,ai1:K,ai2:U},o($.getGameState()),c(J.getGameState()),()=>{p.current&&cancelAnimationFrame(p.current)}},[e,t,n,r]),y.useEffect(()=>{const $=J=>{b.current||(b.current=J);const ve=J-b.current;b.current=J;const{p1:K,p2:U,ai:He,ai1:Ir,ai2:zs}=S.current;if(!K||!U){p.current=requestAnimationFrame($);return}if(K.gameOver||U.gameOver){K.gameOver||(K.gameOver=!0,K._markDirty()),U.gameOver||(U.gameOver=!0,U._markDirty()),K.isDirty&&(o(K.getGameState()),K.clearDirty()),U.isDirty&&(c(U.getGameState()),U.clearDirty());return}K.isPaused||K.updateGame(ve),U.isPaused||U.updateGame(ve);const Z=K.consumeAttack();Z>0&&!U.gameOver&&U.receiveGarbage(Z);const Ie=U.consumeAttack();if(Ie>0&&!K.gameOver&&K.receiveGarbage(Ie),e==="aiVsAI"){if(Ir&&!K.gameOver)try{const je=Ir.decideNextMove(K.getGameState());if(je)switch(je.action){case"left":K.movePiece("left");break;case"right":K.movePiece("right");break;case"rotate":K.rotatePiece();break;case"down":K.movePiece("down");break;case"drop":K.hardDrop();break;case"hold":K.holdPiece();break}}catch{}if(zs&&!U.gameOver)try{const je=zs.decideNextMove(U.getGameState());if(je)switch(je.action){case"left":U.movePiece("left");break;case"right":U.movePiece("right");break;case"rotate":U.rotatePiece();break;case"down":U.movePiece("down");break;case"drop":U.hardDrop();break;case"hold":U.holdPiece();break}}catch{}}else if(e==="vsAI"&&He&&!U.gameOver)try{const je=He.decideNextMove(U.getGameState());if(je)switch(je.action){case"left":U.movePiece("left");break;case"right":U.movePiece("right");break;case"rotate":U.rotatePiece();break;case"down":U.movePiece("down");break;case"drop":U.hardDrop();break;case"hold":U.holdPiece();break}}catch{}K.isDirty&&(o(K.getGameState()),f(K.pendingGarbage),K.clearDirty()),U.isDirty&&(c(U.getGameState()),x(U.pendingGarbage),U.clearDirty()),p.current=requestAnimationFrame($)};return p.current=requestAnimationFrame($),()=>{p.current&&cancelAnimationFrame(p.current)}},[e]),y.useEffect(()=>{var $,J;u||!i||!a||(i.gameOver&&!a.gameOver?h("player2"):a.gameOver&&!i.gameOver?h("player1"):i.gameOver&&a.gameOver&&h(((($=i.score)==null?void 0:$.points)||0)>=(((J=a.score)==null?void 0:J.points)||0)?"player1":"player2"))},[i==null?void 0:i.gameOver,a==null?void 0:a.gameOver,u]),y.useEffect(()=>{if(u||e==="aiVsAI")return;const $=J=>{const ve=S.current.p1;if(!(!ve||ve.gameOver))switch(J.key){case"ArrowLeft":J.preventDefault(),ve.movePiece("left");break;case"ArrowRight":J.preventDefault(),ve.movePiece("right");break;case"ArrowDown":J.preventDefault(),ve.movePiece("down");break;case"ArrowUp":J.preventDefault(),ve.rotatePiece();break;case"z":case"Z":ve.rotatePiece("left");break;case"c":case"C":case"Shift":ve.holdPiece();break;case" ":J.preventDefault(),ve.hardDrop();break}};return window.addEventListener("keydown",$),()=>window.removeEventListener("keydown",$)},[u]);const m=ce.useMemo(()=>{var $;if(!(i!=null&&i.currentPiece)||i!=null&&i.gameOver)return null;try{return($=S.current.p1)==null?void 0:$.getDropPreview()}catch{return null}},[(k=(w=i==null?void 0:i.currentPiece)==null?void 0:w.position)==null?void 0:k.x,(C=(j=i==null?void 0:i.currentPiece)==null?void 0:j.position)==null?void 0:C.y,(P=i==null?void 0:i.currentPiece)==null?void 0:P.type,(E=i==null?void 0:i.currentPiece)==null?void 0:E.rotationState]),g=ce.useMemo(()=>{var $;if(!(a!=null&&a.currentPiece)||a!=null&&a.gameOver)return null;try{return($=S.current.p2)==null?void 0:$.getDropPreview()}catch{return null}},[(H=(A=a==null?void 0:a.currentPiece)==null?void 0:A.position)==null?void 0:H.x,(q=(X=a==null?void 0:a.currentPiece)==null?void 0:X.position)==null?void 0:q.y,(B=a==null?void 0:a.currentPiece)==null?void 0:B.type,(G=a==null?void 0:a.currentPiece)==null?void 0:G.rotationState]);return!i||!a?l.jsx("div",{className:"h-screen flex items-center justify-center bg-gradient-to-br from-purple-900 to-blue-900",children:l.jsx("div",{className:"text-white text-2xl",children:"Carregando multiplayer..."})}):l.jsxs("div",{className:"h-screen flex flex-col items-center bg-gradient-to-br from-purple-900 to-blue-900 p-2 overflow-hidden",children:[l.jsxs("div",{className:"flex justify-between items-center w-full max-w-5xl mb-2",children:[l.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-white",children:e==="aiVsAI"?" IA vs IA (Debug)":e==="vsAI"?" vs IA":" 1v1 Local"}),l.jsx("button",{onClick:s,className:"bg-red-600 hover:bg-red-700 text-white px-3 py-1.5 rounded-lg transition-colors text-sm font-bold",children:" Voltar"})]}),l.jsxs("div",{className:"flex gap-2 sm:gap-4 items-start justify-center flex-wrap",children:[l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("div",{className:"bg-blue-600 text-white px-4 py-1 rounded-t-lg font-bold text-sm sm:text-base",children:e==="aiVsAI"?` IA1 (${(n==null?void 0:n.toUpperCase())||"EXPERT"})`:e==="vsAI"?" VOC":" P1"}),l.jsx("div",{className:"bg-black/40 p-2 rounded-b-lg",children:l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx(Tr,{heldPiece:i.heldPiece,canHold:i.canHold}),e!=="aiVsAI"&&l.jsxs("div",{className:"text-white/60 text-[10px] leading-tight",children:[" mover",l.jsx("br",{})," rotacionar",l.jsx("br",{}),"C segurar",l.jsx("br",{}),"Espao dropar"]})]}),l.jsx(Vn,{board:i.board,currentPiece:i.currentPiece,dropPreview:m,gameOver:i.gameOver}),d>0&&l.jsx(ch,{count:d}),l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx(Pr,{pieces:i.nextPieces||[]}),l.jsx(Cr,{score:((R=i.score)==null?void 0:R.points)||0,level:((te=i.score)==null?void 0:te.level)||1,lines:((_=i.score)==null?void 0:_.lines)||0,combo:((M=i.score)==null?void 0:M.combo)||0})]})]})})]}),l.jsx("div",{className:"flex items-center justify-center self-center",children:l.jsx("div",{className:"bg-yellow-500 text-black font-bold text-2xl sm:text-3xl px-4 py-2 rounded-full shadow-2xl animate-pulse",children:"VS"})}),l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("div",{className:"bg-red-600 text-white px-4 py-1 rounded-t-lg font-bold text-sm sm:text-base",children:e==="aiVsAI"?` IA2 (${(r==null?void 0:r.toUpperCase())||"EXPERT-TETRIS"})`:e==="vsAI"?` IA (${(t==null?void 0:t.toUpperCase())||"MEDIUM"})`:" P2"}),l.jsx("div",{className:"bg-black/40 p-2 rounded-b-lg",children:l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx(Tr,{heldPiece:a.heldPiece,canHold:a.canHold}),e==="1v1"&&l.jsxs("div",{className:"text-white/60 text-[10px] leading-tight",children:["Setas mover",l.jsx("br",{})," rotacionar",l.jsx("br",{}),"Ctrl segurar",l.jsx("br",{}),"Enter dropar"]})]}),l.jsx(Vn,{board:a.board,currentPiece:a.currentPiece,dropPreview:g,gameOver:a.gameOver}),v>0&&l.jsx(ch,{count:v}),l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx(Pr,{pieces:a.nextPieces||[]}),l.jsx(Cr,{score:((I=a.score)==null?void 0:I.points)||0,level:((V=a.score)==null?void 0:V.level)||1,lines:((Y=a.score)==null?void 0:Y.lines)||0,combo:((Qe=a.score)==null?void 0:Qe.combo)||0})]})]})})]})]}),l.jsx(me,{children:u&&l.jsx(T.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/90 flex items-center justify-center z-50",children:l.jsxs(T.div,{initial:{scale:.8,y:50},animate:{scale:1,y:0},className:"bg-gradient-to-br from-yellow-500 to-orange-600 rounded-2xl p-12 text-center",children:[l.jsx("div",{className:"text-8xl mb-4",children:u==="player1"||e==="aiVsAI"?"":""}),l.jsx("h2",{className:"text-5xl font-bold text-white mb-4",children:e==="aiVsAI"?u==="player1"?"IA 1 VENCEU!":"IA 2 VENCEU!":u==="player1"?"VITRIA!":"DERROTA!"}),l.jsx("p",{className:"text-2xl text-white/80 mb-8",children:e==="aiVsAI"?`${u==="player1"?n==null?void 0:n.toUpperCase():r==null?void 0:r.toUpperCase()}  superior!`:u==="player1"?e==="vsAI"?"Voc venceu a IA!":"Player 1 venceu!":e==="vsAI"?"IA venceu!":"Player 2 venceu!"}),l.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-8 text-white",children:[l.jsxs("div",{className:"bg-black/30 rounded-lg p-4",children:[l.jsx("div",{className:"text-sm opacity-60",children:e==="aiVsAI"?`IA1 (${n})`:"Player 1"}),l.jsx("div",{className:"text-3xl font-bold",children:(((Re=i.score)==null?void 0:Re.points)||0).toLocaleString()})]}),l.jsxs("div",{className:"bg-black/30 rounded-lg p-4",children:[l.jsx("div",{className:"text-sm opacity-60",children:e==="aiVsAI"?`IA2 (${r})`:e==="vsAI"?"IA":"Player 2"}),l.jsx("div",{className:"text-3xl font-bold",children:(((ft=a.score)==null?void 0:ft.points)||0).toLocaleString()})]})]}),l.jsxs("div",{className:"flex gap-4",children:[l.jsx("button",{onClick:()=>window.location.reload(),className:"bg-green-600 hover:bg-green-700 text-white px-8 py-3 rounded-lg font-bold text-xl transition-colors",children:" Jogar Novamente"}),l.jsx("button",{onClick:s,className:"bg-gray-700 hover:bg-gray-800 text-white px-8 py-3 rounded-lg font-bold text-xl transition-colors",children:" Menu"})]})]})})})]})}function ch({count:e}){const n=Math.min(e,20);return l.jsx("div",{className:"flex flex-col-reverse justify-end w-3 rounded overflow-hidden",style:{height:"calc(var(--cell) * 22 + 22px)"},children:Array.from({length:n},(r,s)=>l.jsx("div",{className:"w-full",style:{height:`${100/20}%`,backgroundColor:e>8?"#ef4444":e>4?"#f59e0b":"#ef4444",opacity:.7+s/n*.3}},s))})}class ZS{constructor(){this._actionQueue=[],this._lastPieceType=null,this._holdCooldown=0,this._comboCount=0,this.thinkingTime=0,this.lastDecision=0}setDifficulty(){}decideNextMove(t){var d;const n=Date.now();if(n-this.lastDecision<this.thinkingTime)return null;this.lastDecision=n;const{currentPiece:r,board:s,heldPiece:i,canHold:o}=t;if(!r||!s)return null;const a=r.type;if(a!==this._lastPieceType&&(this._lastPieceType=a,this._actionQueue=[],this._holdCooldown>0&&this._holdCooldown--),this._actionQueue.length>0)return this._actionQueue.shift();const c=s.length,u=((d=s[0])==null?void 0:d.length)||10,h=this._findBestMove(r,s,c,u);if(o&&this._holdCooldown<=0&&i){const f=this._findBestMove(i,s,c,u);if(f&&(!h||f.score>h.score+500))return this._holdCooldown=1,{action:"hold"}}return!h&&o&&this._holdCooldown<=0?(this._holdCooldown=1,{action:"hold"}):(h?this._actionQueue=this._buildActionSequence(r,h.rotations,h.targetX):this._actionQueue=[{action:"drop"}],this._actionQueue.shift()||{action:"drop"})}_findBestMove(t,n,r,s){let i=-1/0,o=null;for(let a=0;a<4;a++){const c=this._rotateShape(t.shape,a),u=c[0].length;for(let h=-1;h<=s-u+1;h++){const d=this._findLandingRow(c,n,h,r,s);if(d==null||d<0)continue;const f=this._placeOnBoard(c,n,h,d);if(!f)continue;const v=this._evaluate(f,n,d);v>i&&(i=v,o={rotations:a,targetX:h,score:v})}}return o}_evaluate(t,n,r){const s=t.length,i=t[0].length;let o=0;const a=this._countCompleteLines(t);a===1&&(o+=1e4),a===2&&(o+=25e3),a===3&&(o+=5e4),a>=4&&(o+=1e5);const c=this._removeCompleteLines(t);let u=0,h=0;for(let m=0;m<i;m++){let g=!1,w=0;for(let k=0;k<s;k++)c[k][m]!=null?(g=!0,w++):g&&(u++,h+=w)}o-=u*1e4,o-=h*1e3;const d=[];for(let m=0;m<i;m++){let g=0;for(let w=0;w<s;w++)if(c[w][m]!=null){g=s-w;break}d.push(g)}const f=Math.max(...d),v=d.reduce((m,g)=>m+g,0);o-=v*50,o-=f*100,f>12&&(o-=(f-12)*(f-12)*500),f>16&&(o-=1e5);let x=0;for(let m=0;m<i-1;m++)m===i-2?x+=Math.abs(d[m]-d[m+1])*.3:x+=Math.abs(d[m]-d[m+1]);o-=x*200;let S=0;for(let m=0;m<s;m++)if(c[m].filter(w=>w!=null).length!==0){for(let w=0;w<i-1;w++){const k=c[m][w]!=null,j=c[m][w+1]!=null;k!==j&&S++}c[m][0]==null&&S++,c[m][i-1]==null&&S++}o-=S*100;let b=0;for(let m=0;m<i;m++){for(let g=0;g<s-1;g++){const w=c[g][m]!=null,k=c[g+1][m]!=null;w!==k&&b++}c[s-1][m]==null&&b++}o-=b*80;const p=i-1;if(d[p]<d[p-1]){const m=d[p-1]-d[p];m>=1&&m<=4&&f<=12&&(o+=m*300)}for(let m=0;m<s;m++){const g=c[m].filter(w=>w!=null).length;g===9&&(o+=500),g===8&&(o+=200)}return o-=r>0?0:(s-r)*30,f>14&&(o+=a*5e4),o}_buildActionSequence(t,n,r){var u;const s=[],i=n%4;for(let h=0;h<i;h++)s.push({action:"rotate"});const o=((u=t.position)==null?void 0:u.x)??3,a=r-o,c=a>0?"right":"left";for(let h=0;h<Math.abs(a);h++)s.push({action:c});return s.push({action:"drop"}),s}_rotateShape(t,n){let r=t;for(let s=0;s<n%4;s++)r=r[0].map((i,o)=>r.map(a=>a[o]).reverse());return r}_findLandingRow(t,n,r,s,i){const o=t.length;for(let a=-o;a<s;a++)if(this._collides(t,n,r,a+1,s,i))return a;return s-o}_collides(t,n,r,s,i,o){for(let a=0;a<t.length;a++)for(let c=0;c<t[0].length;c++){if(!t[a][c])continue;const u=r+c,h=s+a;if(u<0||u>=o||h>=i||h>=0&&n[h][u]!=null)return!0}return!1}_placeOnBoard(t,n,r,s){const i=n.length,o=n[0].length,a=n.map(c=>[...c]);for(let c=0;c<t.length;c++)for(let u=0;u<t[0].length;u++){if(!t[c][u])continue;const h=r+u,d=s+c;if(h<0||h>=o||d<0||d>=i||a[d][h]!=null)return null;a[d][h]=1}return a}_removeCompleteLines(t){const n=t[0].length,r=t.filter(s=>!s.every(i=>i!=null));for(;r.length<t.length;)r.unshift(new Array(n).fill(null));return r}_countCompleteLines(t){return t.filter(n=>n.every(r=>r!=null)).length}_countHoles(t){let n=0;const r=t[0].length;for(let s=0;s<r;s++){let i=!1;for(let o=0;o<t.length;o++)t[o][s]!=null?i=!0:i&&n++}return n}_getMaxHeight(t){var s;const n=t.length,r=((s=t[0])==null?void 0:s.length)||10;for(let i=0;i<n;i++)for(let o=0;o<r;o++)if(t[i][o]!=null)return n-i;return 0}}const eb=50;function tb(e){const[t,n]=y.useState(null),[r,s]=y.useState({lines:0,combos:0,tetrises:0,maxCombo:0}),[i,o]=y.useState(!1),[a,c]=y.useState(!1),u=y.useRef(null),h=y.useRef(null),d=y.useRef(null),f=y.useRef(0),v=y.useRef(0),x=y.useRef({lines:0,combos:0,tetrises:0,maxCombo:0,currentCombo:0}),S=y.useCallback(()=>{const p=new Nr(new _r,new Ar,null,new Bn);p.initializeGame(),p.isPlaying=!0;const m=new ZS;u.current=p,h.current=m,v.current=0,f.current=0,x.current.currentCombo=0,n(p.getGameState()),c(!0)},[]);y.useEffect(()=>{if(!e){d.current&&cancelAnimationFrame(d.current),u.current=null,h.current=null,c(!1),n(null),s({lines:0,combos:0,tetrises:0,maxCombo:0}),x.current={lines:0,combos:0,tetrises:0,maxCombo:0,currentCombo:0};return}S();const p=({linesCleared:g})=>{const w=x.current;w.lines+=g,w.currentCombo++,w.currentCombo>1&&(w.combos++,w.currentCombo>w.maxCombo&&(w.maxCombo=w.currentCombo),o(!0),setTimeout(()=>o(!1),600)),g>=4&&w.tetrises++,s({lines:w.lines,combos:w.combos,tetrises:w.tetrises,maxCombo:w.maxCombo})},m=({linesCleared:g})=>{g===0&&(x.current.currentCombo=0)};return L.on(O.LINE_CLEARED,p),L.on(O.PIECE_PLACED,m),()=>{d.current&&cancelAnimationFrame(d.current),L.off(O.LINE_CLEARED,p),L.off(O.PIECE_PLACED,m),u.current=null,h.current=null}},[e,S]),y.useEffect(()=>{if(!a||!u.current||!e)return;const p=m=>{f.current||(f.current=m);let g=m-f.current;f.current=m,g>200&&(g=16);const w=u.current,k=h.current;if(!(!w||!k)){if(w.gameOver){S(),d.current=requestAnimationFrame(p);return}if(w.isPlaying&&!w.isPaused&&w.updateGame(g),v.current+=g,v.current>=eb){v.current=0;try{const j=w.getGameState(),C=k.decideNextMove(j);if(C)switch(C.action){case"left":w.movePiece("left");break;case"right":w.movePiece("right");break;case"rotate":w.rotatePiece();break;case"rotateLeft":w.rotatePieceLeft();break;case"down":w.movePiece("down");break;case"drop":w.hardDrop();break;case"hold":w.holdPiece();break}n(w.getGameState())}catch{}}d.current=requestAnimationFrame(p)}};return d.current=requestAnimationFrame(p),()=>{d.current&&cancelAnimationFrame(d.current)}},[a,e,S]);const b=y.useCallback(()=>{var p;try{return((p=u.current)==null?void 0:p.getDropPreview())||null}catch{return null}},[]);return{gameState:t,stats:r,comboFlash:i,isRunning:a,getDropPreview:b}}function nb({onClose:e}){const{gameState:t,stats:n,comboFlash:r,getDropPreview:s}=tb(!0),i=y.useMemo(()=>s(),[t,s]);if(!t)return l.jsx("div",{className:"h-screen bg-gradient-to-b from-slate-950 via-violet-950 to-slate-950 flex items-center justify-center overflow-hidden",children:l.jsx("p",{className:"text-white/50 animate-pulse",children:"Preparando IA Expert..."})});const o=t.score;return l.jsxs("div",{className:"h-screen bg-gradient-to-b from-slate-950 via-violet-950 to-slate-950 flex flex-col overflow-hidden select-none",children:[l.jsx("div",{className:"absolute inset-0 pointer-events-none overflow-hidden",children:l.jsx("div",{className:"absolute top-1/3 left-1/2 -translate-x-1/2 w-[500px] h-[500px] bg-cyan-600/10 rounded-full blur-[120px]"})}),l.jsxs("div",{className:"flex items-center justify-between px-3 py-1.5 bg-black/30 backdrop-blur-sm border-b border-white/10 shrink-0 relative z-10",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(T.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:e,className:"bg-white/15 hover:bg-white/25 text-white p-1.5 rounded-lg transition-colors",children:l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"})})}),l.jsx("span",{className:"text-sm font-bold text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-400",children:" Cat Tetris AI"})]}),l.jsxs("div",{className:`flex items-center gap-3 text-xs px-3 py-1 rounded-full transition-colors duration-300 ${r?"bg-cyan-500/30 text-cyan-300":"text-white/60"}`,children:[l.jsxs("span",{className:"font-bold",children:[n.lines," linhas"]}),l.jsxs("span",{children:["T:",n.tetrises]}),l.jsxs("span",{children:["C:",n.combos]}),l.jsxs("span",{children:["Max:",n.maxCombo]})]}),l.jsxs("div",{className:"text-xs text-white/50",children:[l.jsx("span",{className:"text-yellow-400 font-bold",children:((o==null?void 0:o.points)||0).toLocaleString()}),l.jsxs("span",{className:"ml-2",children:["Nv.",(o==null?void 0:o.level)||1]})]})]}),l.jsx(me,{children:r&&l.jsx(T.div,{initial:{opacity:0,scale:.7,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:1.2,y:-20},transition:{duration:.4,ease:"easeOut"},className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-50 pointer-events-none",children:l.jsx("div",{className:"text-5xl font-black text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 via-blue-400 to-yellow-300 drop-shadow-[0_0_30px_rgba(34,211,238,0.7)]",children:"COMBO!"})})}),l.jsx("div",{className:"flex-1 flex items-center justify-center overflow-hidden p-2 relative z-10",children:l.jsxs("div",{className:"flex gap-2 justify-center items-start",children:[l.jsx(Tr,{heldPiece:t.heldPiece,canHold:t.canHold}),l.jsx(Vn,{board:t.board,currentPiece:t.currentPiece,dropPreview:i,gameOver:t.gameOver}),l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx(Pr,{pieces:t.nextPieces||[]}),l.jsx(Cr,{score:(o==null?void 0:o.points)||0,level:(o==null?void 0:o.level)||1,lines:(o==null?void 0:o.lines)||0,combo:(o==null?void 0:o.combo)||0})]})]})})]})}function e0(){const[e,t]=y.useState([]),[n,r]=y.useState(null),[s,i]=y.useState(!0);y.useEffect(()=>{try{const u=F.resolve("shopService");t(u.getAllThemes()),r(u.getEquippedTheme()),i(!1);const h=f=>{r(f.detail.theme),t(u.getAllThemes())},d=()=>{t(u.getAllThemes())};return window.addEventListener("themeEquipped",h),window.addEventListener("currencyUpdated",d),()=>{window.removeEventListener("themeEquipped",h),window.removeEventListener("currencyUpdated",d)}}catch{i(!1)}},[]);const o=y.useCallback(u=>{try{const h=F.resolve("shopService"),d=h.purchaseTheme(u);return d.success&&(t(h.getAllThemes()),window.dispatchEvent(new Event("currencyUpdated"))),d}catch(h){return{success:!1,error:h.message}}},[]),a=y.useCallback(u=>{try{const h=F.resolve("shopService"),d=h.equipTheme(u);return d.success&&(r(d.theme),t(h.getAllThemes())),d}catch(h){return{success:!1,error:h.message}}},[]),c=y.useCallback(()=>{try{return F.resolve("shopService").getStats()}catch{return null}},[]);return{themes:e,equippedTheme:n,loading:s,purchaseTheme:o,equipTheme:a,getStats:c}}function rb({onClose:e}){var v,x;const{themes:t,equippedTheme:n,loading:r,purchaseTheme:s,equipTheme:i,getStats:o}=e0(),{currency:a}=Xp(),[c,u]=y.useState(null),h=o();if(r)return l.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",children:l.jsx("div",{className:"text-white text-lg",children:"Carregando loja..."})});if(!t||t.length===0)return l.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-red-900/90 text-white p-6 rounded-lg",children:[l.jsx("p",{className:"text-xl",children:" Erro ao carregar temas"}),l.jsx("button",{onClick:e,className:"mt-4 bg-white text-black px-4 py-2 rounded",children:"Fechar"})]})});const d=S=>{const b=s(S);b.success?lr(` ${b.theme.name} comprado com sucesso!`,"success"):lr(` ${b.error}`,"error")},f=S=>{const b=i(S);b.success?lr(` ${b.theme.name} equipado!`,"success"):lr(` ${b.error}`,"error")};return r?l.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",children:l.jsx("div",{className:"text-white text-xl",children:"Carregando loja..."})}):l.jsx(T.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:e,children:l.jsxs(T.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},className:"bg-gradient-to-br from-pink-900/95 to-purple-900/95 rounded-2xl p-6 max-w-6xl w-full max-h-[90vh] overflow-y-auto border-2 border-white/20 shadow-2xl",onClick:S=>S.stopPropagation(),children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-3xl font-bold text-white flex items-center gap-2",children:" Loja de Temas"}),l.jsx("p",{className:"text-white/60 text-sm mt-1",children:"Personalize suas peas de Tetris"})]}),l.jsx("button",{onClick:e,className:"text-white/60 hover:text-white text-2xl transition-colors",children:""})]}),l.jsx("div",{className:"bg-black/30 rounded-lg p-4 mb-6",children:l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-2xl font-bold text-yellow-400 flex items-center justify-center gap-1",children:[" ",((v=a==null?void 0:a.fish)==null?void 0:v.toLocaleString())||0]}),l.jsx("div",{className:"text-white/60 text-sm",children:"Seus Peixes"})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-2xl font-bold text-white",children:[h==null?void 0:h.ownedThemes,"/",h==null?void 0:h.totalThemes]}),l.jsx("div",{className:"text-white/60 text-sm",children:"Temas Desbloqueados"})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-2xl font-bold text-green-400",children:[Math.floor((h==null?void 0:h.ownedThemes)/(h==null?void 0:h.totalThemes)*100),"%"]}),l.jsx("div",{className:"text-white/60 text-sm",children:"Coleo"})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-2xl font-bold text-purple-400 flex items-center justify-center gap-1",children:[" ",((x=h==null?void 0:h.totalSpent)==null?void 0:x.toLocaleString())||0]}),l.jsx("div",{className:"text-white/60 text-sm",children:"Gasto Total"})]})]})}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map((S,b)=>{const p=!S.owned&&(a==null?void 0:a.fish)>=S.price;return l.jsxs(T.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:b*.05},className:`bg-black/40 rounded-lg p-4 border-2 relative ${S.equipped?"border-green-500 shadow-lg shadow-green-500/30":S.owned?"border-white/20":"border-white/10"}`,children:[S.equipped&&l.jsx("div",{className:"absolute top-2 right-2 bg-green-600 text-white text-xs px-2 py-1 rounded-full font-bold",children:" Equipado"}),S.premium&&l.jsx("div",{className:"absolute top-2 left-2 bg-gradient-to-r from-yellow-400 to-orange-500 text-white text-xs px-2 py-1 rounded-full font-bold",children:" Premium"}),l.jsxs("div",{className:"mb-4",children:[l.jsx("h3",{className:"text-white font-bold text-lg mb-1",children:S.name}),l.jsx("p",{className:"text-white/60 text-sm",children:S.description})]}),l.jsx("div",{className:"bg-black/30 rounded-lg p-3 mb-4",children:l.jsx("div",{className:"flex justify-center gap-2 flex-wrap",children:Object.entries(S.pieces).map(([m,g])=>l.jsx("div",{className:"w-12 h-12 rounded flex items-center justify-center text-2xl border border-white/10",style:{backgroundColor:g.color},children:g.emoji},m))})}),l.jsxs("div",{className:"flex gap-2",children:[S.owned?S.equipped?l.jsx("button",{disabled:!0,className:"flex-1 bg-green-600 text-white py-2 px-4 rounded-lg font-bold cursor-default",children:"Em Uso"}):l.jsx("button",{onClick:()=>f(S.id),className:"flex-1 bg-blue-600 hover:bg-blue-500 text-white py-2 px-4 rounded-lg font-bold transition-colors",children:"Equipar"}):l.jsx("button",{onClick:()=>d(S.id),disabled:!p,className:`flex-1 py-2 px-4 rounded-lg font-bold transition-colors ${p?"bg-yellow-600 hover:bg-yellow-500 text-white":"bg-gray-600 text-white/40 cursor-not-allowed"}`,children:S.default?"Gratuito":l.jsxs(l.Fragment,{children:[" ",S.price.toLocaleString()]})}),l.jsx("button",{onClick:()=>u(S),className:"bg-purple-600 hover:bg-purple-500 text-white py-2 px-4 rounded-lg font-bold transition-colors",children:""})]})]},S.id)})}),l.jsx(me,{children:c&&l.jsx(T.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/90 flex items-center justify-center z-[60]",onClick:()=>u(null),children:l.jsxs(T.div,{initial:{scale:.8},animate:{scale:1},exit:{scale:.8},className:"bg-gray-900 rounded-xl p-6 max-w-md",onClick:S=>S.stopPropagation(),children:[l.jsx("h3",{className:"text-white font-bold text-2xl mb-4",children:c.name}),l.jsx("div",{className:"grid grid-cols-4 gap-3 mb-4",children:Object.entries(c.pieces).map(([S,b])=>l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"w-16 h-16 rounded-lg flex items-center justify-center text-3xl mb-2 border-2 border-white/20",style:{backgroundColor:b.color},children:b.emoji}),l.jsx("div",{className:"text-white/60 text-xs",children:S})]},S))}),l.jsx("button",{onClick:()=>u(null),className:"w-full bg-purple-600 hover:bg-purple-500 text-white py-2 rounded-lg font-bold",children:"Fechar"})]})})})]})})}function t0(){const[e,t]=y.useState([]),[n,r]=y.useState(null),[s,i]=y.useState(null),[o,a]=y.useState(!0);y.useEffect(()=>{try{const d=F.resolve("gameModesService");t(d.getAllModes()),r(d.getCurrentMode()),i(d.getAllStats()),a(!1)}catch{a(!1)}},[]);const c=y.useCallback(d=>{try{const f=F.resolve("gameModesService"),v=f.setMode(d);return v&&(r(f.getCurrentMode()),window.dispatchEvent(new CustomEvent("gameModeChanged",{detail:{mode:f.getCurrentMode()}}))),v}catch{return!1}},[]),u=y.useCallback(d=>{try{return F.resolve("gameModesService").getModeStats(d)}catch{return null}},[]),h=y.useCallback((d,f)=>{try{const v=F.resolve("gameModesService");v.updateStats(d,f),i(v.getAllStats())}catch{}},[]);return{modes:e,currentMode:n,modeStats:s,loading:o,selectMode:c,getModeStats:u,updateStats:h}}function sb({onClose:e,onStartGame:t}){const{modes:n,currentMode:r,modeStats:s,loading:i,selectMode:o}=t0(),a=u=>{o(u),setTimeout(()=>{t(),e()},300)},c=u=>{const h=Math.floor(u/60),d=u%60;return`${h}:${d.toString().padStart(2,"0")}`};return i?l.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",children:l.jsx("div",{className:"text-white text-xl",children:"Carregando modos..."})}):!n||n.length===0?l.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-red-900/90 text-white p-6 rounded-lg",children:[l.jsx("p",{className:"text-xl",children:" Erro ao carregar modos"}),l.jsx("button",{onClick:e,className:"mt-4 bg-white text-black px-4 py-2 rounded",children:"Fechar"})]})}):l.jsx(T.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:e,children:l.jsxs(T.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},className:"bg-gradient-to-br from-blue-900/95 to-indigo-900/95 rounded-2xl p-6 max-w-4xl w-full max-h-[90vh] overflow-y-auto border-2 border-white/20 shadow-2xl",onClick:u=>u.stopPropagation(),children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-3xl font-bold text-white flex items-center gap-2",children:" Modos de Jogo"}),l.jsx("p",{className:"text-white/60 text-sm mt-1",children:"Escolha seu desafio"})]}),l.jsx("button",{onClick:e,className:"text-white/60 hover:text-white text-2xl transition-colors",children:""})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:n.map((u,h)=>{const d=s[u.id],f=(r==null?void 0:r.id)===u.id;return l.jsxs(T.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:h*.1},className:`bg-black/40 rounded-lg p-5 border-2 cursor-pointer transition-all hover:scale-105 ${f?"border-green-500 shadow-lg shadow-green-500/30":"border-white/10 hover:border-white/30"}`,onClick:()=>a(u.id),children:[f&&l.jsx("div",{className:"absolute top-3 right-3 bg-green-600 text-white text-xs px-2 py-1 rounded-full font-bold",children:" Selecionado"}),l.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[l.jsx("div",{className:"text-5xl",children:u.icon}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"text-white font-bold text-xl",children:u.name}),l.jsx("p",{className:"text-white/60 text-sm",children:u.description})]})]}),l.jsx("div",{className:"bg-black/30 rounded-lg p-3 mb-3",children:l.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[u.rules.lineGoal&&l.jsxs("div",{className:"text-white/80",children:[" Meta: ",u.rules.lineGoal," linhas"]}),u.rules.timeLimit&&l.jsxs("div",{className:"text-white/80",children:[" Tempo: ",c(u.rules.timeLimit)]}),u.rules.gameOver!==void 0&&l.jsx("div",{className:"text-white/80",children:u.rules.gameOver?" Game Over":" Sem Game Over"}),u.rules.speedIncrease!==void 0&&l.jsx("div",{className:"text-white/80",children:u.rules.speedIncrease?" Velocidade aumenta":" Velocidade fixa"}),u.rules.startLevel&&l.jsxs("div",{className:"text-white/80",children:[" Incio: Nvel ",u.rules.startLevel]}),u.rules.relaxed&&l.jsx("div",{className:"text-white/80",children:" Modo relaxado"})]})}),d&&d.gamesPlayed>0&&l.jsxs("div",{className:"bg-black/30 rounded-lg p-3",children:[l.jsx("div",{className:"text-white/60 text-xs mb-2",children:"Seus recordes:"}),l.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-yellow-400 font-bold",children:d.bestScore.toLocaleString()}),l.jsx("div",{className:"text-white/40 text-xs",children:"Melhor Pontuao"})]}),u.rules.lineGoal&&d.bestTime>0&&l.jsxs("div",{children:[l.jsx("div",{className:"text-green-400 font-bold",children:c(d.bestTime)}),l.jsx("div",{className:"text-white/40 text-xs",children:"Melhor Tempo"})]}),!u.rules.lineGoal&&l.jsxs("div",{children:[l.jsx("div",{className:"text-blue-400 font-bold",children:d.bestLines}),l.jsx("div",{className:"text-white/40 text-xs",children:"Mais Linhas"})]})]}),l.jsxs("div",{className:"text-white/40 text-xs mt-2",children:[d.gamesPlayed," partidas jogadas"]})]}),(!d||d.gamesPlayed===0)&&l.jsx("div",{className:"bg-black/30 rounded-lg p-3 text-center",children:l.jsx("div",{className:"text-white/40 text-sm",children:" Nenhum recorde ainda"})}),l.jsx(T.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"w-full mt-3 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-500 hover:to-emerald-500 text-white font-bold py-3 rounded-lg transition-colors",children:" Jogar"})]},u.id)})})]})})}function ib(){const[e,t]=y.useState(null),[n,r]=y.useState([]),[s,i]=y.useState(null),[o,a]=y.useState(null);y.useEffect(()=>{try{const S=F.resolve("multiplayerService");a(S.getStats())}catch{}},[]);const c=y.useCallback((S,b)=>{try{const p=F.resolve("multiplayerService"),m=p.startLocalMatch(S,b);return t(m.mode),r(m.players),i(p.getMatchState()),m}catch{return null}},[]),u=y.useCallback((S,b)=>{try{const p=F.resolve("multiplayerService"),m=p.startAIMatch(S,b);return t(m.mode),r(m.players),i(p.getMatchState()),m}catch{return null}},[]),h=y.useCallback((S,b)=>{try{const p=F.resolve("multiplayerService"),m=p.startAIvsAIMatch(S,b);return t(m.mode),r(m.players),i(p.getMatchState()),m}catch{return null}},[]),d=y.useCallback((S,b)=>{try{const p=F.resolve("multiplayerService");p.updatePlayerState(S,b);const m=p.getMatchState();return i(m),r(m.players),m}catch{return null}},[]),f=y.useCallback(()=>{try{const S=F.resolve("multiplayerService"),b=S.endMatch();return t(null),r([]),i(null),a(S.getStats()),b}catch{return null}},[]),v=y.useCallback(()=>{try{return F.resolve("multiplayerService").getAvailableModes()}catch{return[]}},[]),x=y.useCallback(()=>{try{const S=F.resolve("multiplayerService");a(S.getStats())}catch{}},[]);return{currentMode:e,players:n,matchState:s,stats:o,startLocalMatch:c,startAIMatch:u,startAIvsAIMatch:h,updatePlayerState:d,endMatch:f,getAvailableModes:v,refreshStats:x}}function ob(){const[e,t]=y.useState("medium"),[n,r]=y.useState(null);y.useEffect(()=>{try{const a=F.resolve("aiOpponentService");a.setDifficulty(e),r(a)}catch{}},[e]);const s=y.useCallback(a=>{if(!n)return null;try{return n.decideNextMove(a)}catch{return null}},[n]),i=y.useCallback(a=>{t(a),n&&n.setDifficulty(a)},[n]),o=y.useCallback(()=>n?n.getDifficulties():[],[n]);return{difficulty:e,changeDifficulty:i,getNextMove:s,getDifficulties:o}}function ab({onClose:e,onStartMatch:t}){const{getAvailableModes:n,stats:r,startLocalMatch:s,startAIMatch:i,startAIvsAIMatch:o}=ib(),{getDifficulties:a}=ob(),[c,u]=y.useState(null),[h,d]=y.useState("Jogador 1");y.useState("Jogador 2");const[f,v]=y.useState("medium"),[x,S]=y.useState("expert"),[b,p]=y.useState("expert-tetris"),m=n(),g=a();if(!m||m.length===0)return l.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-red-900/90 text-white p-6 rounded-lg",children:[l.jsx("p",{className:"text-xl",children:" Erro ao carregar multiplayer"}),l.jsx("button",{onClick:e,className:"mt-4 bg-white text-black px-4 py-2 rounded",children:"Fechar"})]})});const w=j=>{j.disabled||u(j)},k=()=>{let j=null;c.id==="vs-ai"?j=i(h,f):c.id==="ai-vs-ai"&&(j=o(x,b)),j&&t&&t(j)};return l.jsx(T.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:e,children:l.jsxs(T.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},className:"bg-gradient-to-br from-purple-900/95 to-indigo-900/95 rounded-2xl p-6 max-w-4xl w-full max-h-[90vh] overflow-y-auto border-2 border-white/20 shadow-2xl",onClick:j=>j.stopPropagation(),children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-3xl font-bold text-white flex items-center gap-2",children:" Multiplayer"}),l.jsx("p",{className:"text-white/60 text-sm mt-1",children:"Desafie amigos ou enfrente a IA"})]}),l.jsx("button",{onClick:e,className:"text-white/60 hover:text-white text-2xl transition-colors",children:""})]}),r&&l.jsxs("div",{className:"bg-black/30 rounded-lg p-4 mb-6 grid grid-cols-3 gap-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-white",children:r.aiMatches}),l.jsx("div",{className:"text-white/60 text-sm",children:"Partidas vs IA"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-green-400",children:r.wins}),l.jsx("div",{className:"text-white/60 text-sm",children:"Vitrias"})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-2xl font-bold text-yellow-400",children:[r.winRate,"%"]}),l.jsx("div",{className:"text-white/60 text-sm",children:"Taxa de Vitria"})]})]}),c?l.jsxs("div",{children:[l.jsx("button",{onClick:()=>u(null),className:"text-white/60 hover:text-white mb-4 flex items-center gap-2",children:" Voltar"}),l.jsxs("div",{className:"bg-black/30 rounded-lg p-6",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[l.jsx("span",{className:"text-5xl",children:c.emoji}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-2xl font-bold text-white",children:c.name}),l.jsx("p",{className:"text-white/60",children:c.description})]})]}),c.id==="vs-ai"&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-white/80 mb-2",children:"Seu Nome:"}),l.jsx("input",{type:"text",value:h,onChange:j=>d(j.target.value),className:"w-full bg-black/30 text-white px-4 py-2 rounded-lg border border-white/20 focus:border-blue-500 focus:outline-none",maxLength:20})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-white/80 mb-2",children:"Dificuldade da IA:"}),l.jsx("div",{className:"grid grid-cols-2 gap-3",children:g.map(j=>l.jsxs("button",{onClick:()=>v(j.id),className:`p-3 rounded-lg border-2 transition-all ${f===j.id?"bg-blue-600 border-blue-400":"bg-black/30 border-white/20 hover:border-white/40"}`,children:[l.jsx("div",{className:"text-2xl mb-1",children:j.emoji}),l.jsx("div",{className:"text-white font-bold",children:j.name}),l.jsx("div",{className:"text-white/60 text-xs",children:j.description})]},j.id))})]})]}),c.id==="ai-vs-ai"&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-white/80 mb-2",children:" IA 1 (Esquerda):"}),l.jsx("div",{className:"grid grid-cols-2 gap-3",children:g.map(j=>l.jsxs("button",{onClick:()=>S(j.id),className:`p-3 rounded-lg border-2 transition-all ${x===j.id?"bg-blue-600 border-blue-400":"bg-black/30 border-white/20 hover:border-white/40"}`,children:[l.jsx("div",{className:"text-2xl mb-1",children:j.emoji}),l.jsx("div",{className:"text-white font-bold",children:j.name}),l.jsx("div",{className:"text-white/60 text-xs",children:j.description})]},j.id))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-white/80 mb-2",children:" IA 2 (Direita):"}),l.jsx("div",{className:"grid grid-cols-2 gap-3",children:g.map(j=>l.jsxs("button",{onClick:()=>p(j.id),className:`p-3 rounded-lg border-2 transition-all ${b===j.id?"bg-red-600 border-red-400":"bg-black/30 border-white/20 hover:border-white/40"}`,children:[l.jsx("div",{className:"text-2xl mb-1",children:j.emoji}),l.jsx("div",{className:"text-white font-bold",children:j.name}),l.jsx("div",{className:"text-white/60 text-xs",children:j.description})]},j.id))})]})]}),l.jsx(T.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:k,className:"w-full mt-6 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-400 hover:to-emerald-500 text-white font-bold py-4 px-6 rounded-lg shadow-lg transition-all",children:" Iniciar Partida"})]})]}):l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:m.map(j=>l.jsxs(T.button,{whileHover:j.disabled?{}:{scale:1.02},whileTap:j.disabled?{}:{scale:.98},onClick:()=>w(j),disabled:j.disabled,className:`p-6 rounded-xl border-2 text-left transition-all ${j.disabled?"bg-gray-800/50 border-gray-700 opacity-50 cursor-not-allowed":"bg-gradient-to-br from-blue-600/30 to-purple-600/30 border-blue-500/50 hover:border-blue-400 cursor-pointer"}`,children:[l.jsx("div",{className:"text-4xl mb-3",children:j.emoji}),l.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:j.name}),l.jsx("p",{className:"text-white/70 text-sm mb-3",children:j.description}),l.jsx("div",{className:"flex items-center gap-2 text-white/50 text-sm",children:l.jsxs("span",{children:[" ",j.players," jogador",j.players>1?"es":""]})}),j.disabled&&l.jsx("div",{className:"mt-3 text-yellow-400 text-xs font-bold",children:" EM BREVE"})]},j.id))})]})})}function lb({onComplete:e}){const[t,n]=y.useState(0),[r,s]=y.useState(!1);y.useEffect(()=>{localStorage.getItem("catTetris_tutorialCompleted")||s(!0)},[]);const i=[{title:" Bem-vindo ao Cat Tetris!",description:"Um Tetris com gatinhos e sistema de progresso viciante!",tips:[" Use as setas para mover as peas"," Seta para cima para rotacionar"," Seta para baixo para drop rpido","C para segurar pea (Hold)"]},{title:" Sistema de Moedas",description:"Ganhe Peixes () completando misses e conquistas!",tips:[" 3 misses dirias (resetam  meia-noite)"," 22 conquistas desbloqueveis"," Use  para comprar temas na loja"," Quanto mais voc joga, mais voc ganha!"]},{title:" Misses Dirias",description:"Complete desafios dirios para ganhar recompensas!",tips:[" Misso Fcil: 100"," Misso Mdia: 200"," Misso Difcil: 400"," Complete todas para celebrao especial!"]},{title:" Loja e Personalizao",description:"Customize suas peas com temas exclusivos!",tips:[" 10 temas diferentes disponveis"," Cristais e Espao so os mais caros"," Cada tema muda os emojis das peas"," Desbloqueie todos com suas moedas!"]},{title:" Ranking Global",description:"Compete com jogadores do mundo todo!",tips:[" Veja sua posio no ranking global"," 4 tipos de ranking: Global, Semanal, Pas, Ao Redor"," Compartilhe seus recordes"," Chegue ao Top 3 para medalha!"]},{title:" Pronto para Jogar!",description:"Agora voc sabe tudo. Divirta-se!",tips:[" Dica: Use a sombra da pea para planejar"," Faa combos para mais pontos"," T-Spins valem MUITO mais"," Modo Zen  perfeito para relaxar"]}],o=()=>{t<i.length-1?n(t+1):c()},a=()=>{c()},c=()=>{localStorage.setItem("catTetris_tutorialCompleted","true"),s(!1),e&&e()};if(!r)return null;const u=i[t],h=t===i.length-1;return l.jsx(T.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/90 backdrop-blur-sm flex items-center justify-center z-[100] p-4",children:l.jsxs(T.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-gradient-to-br from-purple-900/95 to-indigo-900/95 rounded-2xl p-8 max-w-lg w-full border-2 border-white/20 shadow-2xl max-h-[90vh] overflow-y-auto",children:[l.jsx("div",{className:"flex gap-2 mb-6",children:i.map((d,f)=>l.jsx("div",{className:`h-2 flex-1 rounded-full transition-colors ${f<=t?"bg-green-500":"bg-white/20"}`},f))}),l.jsx(T.h2,{initial:{y:-20},animate:{y:0},className:"text-3xl font-bold text-white mb-3",children:u.title}),l.jsx(T.p,{initial:{y:-10},animate:{y:0},className:"text-white/80 text-lg mb-6",children:u.description}),l.jsx(T.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},className:"bg-black/30 rounded-lg p-4 mb-6 space-y-2",children:u.tips.map((d,f)=>l.jsxs(T.div,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.3+f*.1},className:"text-white/90 flex items-start gap-2",children:[l.jsx("span",{className:"text-green-400 mt-0.5",children:""}),l.jsx("span",{children:d})]},f))}),l.jsxs("div",{className:"flex gap-3",children:[!h&&l.jsx("button",{onClick:a,className:"flex-1 bg-white/10 hover:bg-white/20 text-white font-bold py-3 px-6 rounded-lg transition-colors",children:"Pular Tutorial"}),l.jsx("button",{onClick:o,className:"flex-1 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-400 hover:to-emerald-500 text-white font-bold py-3 px-6 rounded-lg transition-all shadow-lg",children:h?" Comear a Jogar!":"Prximo "})]}),l.jsxs("div",{className:"text-center mt-4 text-white/40 text-sm",children:["Passo ",t+1," de ",i.length]})]},t)})}function cb(e){const[t,n]=y.useState(null),[r,s]=y.useState(!1),i=y.useRef(null),o=y.useRef(0);y.useEffect(()=>{if(!e){n(null),s(!1),i.current=null,o.current=0;return}const d=new Nr(new _r,new Ar,null,new Bn);return d.initializeGame(),d.isPlaying=!0,o.current=0,i.current=d,n(d.getGameState()),s(!0),()=>{i.current=null,s(!1)}},[e]);const a=y.useRef(0),c=y.useRef(null);y.useEffect(()=>{if(!i.current||!r)return;a.current=0;const d=f=>{var S;a.current||(a.current=f);const v=f-a.current;a.current=f;const x=i.current;if(x){x.isPlaying&&!x.isPaused&&!x.gameOver&&x.updateGame(v);const b=x.getGameState(),p=((S=b.score)==null?void 0:S.combo)||0;p>o.current&&(o.current=p),n(b)}c.current=requestAnimationFrame(d)};return c.current=requestAnimationFrame(d),()=>{c.current&&cancelAnimationFrame(c.current)}},[r]);const u={movePiece:y.useCallback(d=>{var f;(f=i.current)==null||f.movePiece(d)},[]),rotatePiece:y.useCallback(()=>{var d;(d=i.current)==null||d.rotatePiece()},[]),rotatePieceLeft:y.useCallback(()=>{var d,f;(f=(d=i.current)==null?void 0:d.rotatePieceLeft)==null||f.call(d)},[]),hardDrop:y.useCallback(()=>{var d;(d=i.current)==null||d.hardDrop()},[]),holdPiece:y.useCallback(()=>{var d;(d=i.current)==null||d.holdPiece()},[]),pause:y.useCallback(()=>{var d;(d=i.current)==null||d.pause()},[]),resume:y.useCallback(()=>{var d;(d=i.current)==null||d.resume()},[]),restart:y.useCallback(()=>{i.current&&(i.current.restart(),o.current=0)},[]),getDropPreview:y.useCallback(()=>{var d;try{return((d=i.current)==null?void 0:d.getDropPreview())||null}catch{return null}},[])},h=y.useCallback(()=>{var d,f,v,x,S;return t?{score:((d=t.score)==null?void 0:d.points)||0,level:((f=t.score)==null?void 0:f.level)||1,linesCleared:((v=t.score)==null?void 0:v.lines)||0,currentPiece:t.currentPiece,hasCurrentPiece:!!t.currentPiece,heldPiece:t.heldPiece,hasUsedHold:!!t.heldPiece,currentCombo:((x=t.score)==null?void 0:x.combo)||0,maxCombo:o.current,backToBackActive:t.backToBack||!1,board:t.board,gameOver:t.gameOver,isPlaying:t.isPlaying,isPaused:t.isPaused,tSpins:((S=t.score)==null?void 0:S.tSpins)||0}:null},[t]);return{gameState:t,actions:u,isInitialized:r,getValidationState:h}}const uh={1:{difficulty:"easy",forceHold:!1,comboBoost:!1,label:"Movendo peas..."},2:{difficulty:"easy",forceHold:!0,comboBoost:!1,label:"Usando Hold (C)..."},3:{difficulty:"medium",forceHold:!1,comboBoost:!1,label:"Planejando jogadas..."},4:{difficulty:"medium",forceHold:!1,comboBoost:!0,label:"Buscando combos..."},5:{difficulty:"hard",forceHold:!1,comboBoost:!1,label:"Montando Tetris..."},6:{difficulty:"expert",forceHold:!0,comboBoost:!1,label:"Tentando T-Spins..."},7:{difficulty:"expert",forceHold:!0,comboBoost:!1,label:"Buscando Back-to-Back..."},8:{difficulty:"hard",forceHold:!0,comboBoost:!1,label:"Jogando no mximo..."}};function ub(e,t){const[n,r]=y.useState(null),[s,i]=y.useState(!1),[o,a]=y.useState(!1),[c,u]=y.useState(""),h=y.useRef(null),d=y.useRef(null),f=y.useRef(0),v=y.useRef(null),x=y.useRef(0),S=y.useRef(0),b=y.useRef(0),p=y.useRef(null),m=250,g=25;y.useEffect(()=>{if(!e){r(null),i(!1),a(!1),u(""),h.current=null,d.current=null,S.current=0,b.current=0,v.current&&cancelAnimationFrame(v.current);return}const k=uh[t]||uh[1];p.current=k,u(k.label);const j=new Nr(new _r,new Ar,null,new Bn);j.initializeGame(),j.isPlaying=!0;const C=new ds;if(C.setDifficulty(k.difficulty),C.thinkingTime=0,k.comboBoost){const P=C._evaluateBoard.bind(C);C._evaluateBoard=(E,A)=>{let H=P(E,A);for(let X=0;X<E.length;X++){const q=E[X].filter(B=>B!=null).length;q>=8&&(H+=200),q>=9&&(H+=500)}return H}}return h.current=j,d.current=C,S.current=0,b.current=0,x.current=0,f.current=0,r(j.getGameState()),i(!0),a(!1),()=>{v.current&&cancelAnimationFrame(v.current),h.current=null,d.current=null}},[e,t]),y.useEffect(()=>{if(!h.current||!s||!e)return;f.current=0,x.current=0;let k=null;const j=C=>{var X;f.current||(f.current=C);const P=C-f.current;f.current=C;const E=h.current,A=d.current,H=p.current;if(E&&A&&!E.gameOver){E.isPlaying&&!E.isPaused&&E.updateGame(P);const q=E.getGameState(),B=(X=q.currentPiece)==null?void 0:X.type;if(k&&B!==k&&(S.current++,b.current++,S.current>=g)){a(!0),r(q);return}if(k=B,x.current+=P,x.current>=m){if(x.current=0,H!=null&&H.forceHold&&b.current>=3&&q.currentPiece&&q.canHold!==!1){E.holdPiece(),b.current=0,r(E.getGameState()),v.current=requestAnimationFrame(j);return}const G=A.decideNextMove(q);if(G)switch(G.action){case"left":E.movePiece("left");break;case"right":E.movePiece("right");break;case"rotate":E.rotatePiece();break;case"down":E.movePiece("down");break;case"drop":E.hardDrop();break;case"hold":E.holdPiece();break}}r(q)}else if(E!=null&&E.gameOver){a(!0),r(E.getGameState());return}v.current=requestAnimationFrame(j)};return v.current=requestAnimationFrame(j),()=>{v.current&&cancelAnimationFrame(v.current)}},[s,e]);const w=y.useCallback(()=>{var k;try{return((k=h.current)==null?void 0:k.getDropPreview())||null}catch{return null}},[]);return{gameState:n,isInitialized:s,demoComplete:o,statusLabel:c,getDropPreview:w}}function n0(e,t,n=!0){const r=y.useRef(t);r.current=t;const s=y.useRef(e);s.current=e,y.useEffect(()=>{if(!(!e||!n))try{const d=F.resolve("keyboardInputService"),f=()=>{var k;return!((k=r.current)!=null&&k.gameOver)},v=()=>{f()&&s.current.movePiece("left")},x=()=>{f()&&s.current.movePiece("right")},S=()=>{f()&&s.current.movePiece("down")},b=()=>{f()&&s.current.rotatePiece()},p=()=>{var k,j;f()&&((j=(k=s.current).rotatePieceLeft)==null||j.call(k))},m=()=>{f()&&s.current.hardDrop()},g=()=>{f()&&s.current.holdPiece()},w=()=>{var k,j;(k=r.current)!=null&&k.gameOver||((j=r.current)!=null&&j.isPaused?s.current.resume():s.current.pause())};return d.registerHandler("moveLeft",v),d.registerHandler("moveRight",x),d.registerHandler("moveDown",S),d.registerHandler("rotate",b),d.registerHandler("rotateLeft",p),d.registerHandler("hardDrop",m),d.registerHandler("hold",g),d.registerHandler("pause",w),d.startListening(),()=>{d.unregisterHandler("moveLeft",v),d.unregisterHandler("moveRight",x),d.unregisterHandler("moveDown",S),d.unregisterHandler("rotate",b),d.unregisterHandler("rotateLeft",p),d.unregisterHandler("hardDrop",m),d.unregisterHandler("hold",g),d.unregisterHandler("pause",w),d.stopListening()}}catch{return()=>{}}},[n]);const i=y.useCallback((d,f)=>{try{F.resolve("keyboardInputService").setKeyMapping(d,f)}catch{}},[]),o=y.useCallback(()=>{try{return F.resolve("keyboardInputService").getKeyMappings()}catch{return{}}},[]),a=y.useCallback(d=>{try{F.resolve("keyboardInputService").setDAS(d)}catch{}},[]),c=y.useCallback(d=>{try{F.resolve("keyboardInputService").setARR(d)}catch{}},[]),u=y.useCallback(()=>{try{return F.resolve("keyboardInputService").getDAS()}catch{return 133}},[]),h=y.useCallback(()=>{try{return F.resolve("keyboardInputService").getARR()}catch{return 10}},[]);return{customizeKeyMapping:i,getKeyMappings:o,setDAS:a,setARR:c,getDAS:u,getARR:h}}function db({show:e,onComplete:t}){const[n,r]=y.useState([]);return y.useEffect(()=>{if(!e)return;const s=Array.from({length:50},(o,a)=>({id:a,x:Math.random()*window.innerWidth,y:-20,rotation:Math.random()*360,color:["#FF6B6B","#4ECDC4","#45B7D1","#FFA07A","#98D8C8","#F7DC6F","#BB8FCE","#85C1E2"][Math.floor(Math.random()*8)],size:Math.random()*10+5,delay:Math.random()*.5,duration:Math.random()*2+2,xOffset:(Math.random()-.5)*300}));r(s);const i=setTimeout(()=>{r([]),t&&t()},4e3);return()=>clearTimeout(i)},[e,t]),!e||n.length===0?null:l.jsx("div",{className:"fixed inset-0 pointer-events-none z-50 overflow-hidden",children:n.map(s=>l.jsx(T.div,{initial:{x:s.x,y:s.y,rotate:0,opacity:1},animate:{x:s.x+s.xOffset,y:window.innerHeight+100,rotate:s.rotation+720,opacity:0},transition:{duration:s.duration,delay:s.delay,ease:"easeIn"},style:{position:"absolute",width:s.size,height:s.size,backgroundColor:s.color,borderRadius:"50%"}},s.id))})}function hb({lesson:e,onStartDemo:t,onStartPractice:n}){return l.jsxs(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"max-w-lg mx-auto",children:[l.jsxs("div",{className:"bg-white/[0.06] border border-white/[0.08] rounded-xl p-6 mb-5 text-center",children:[l.jsx("div",{className:"text-4xl mb-3",children:""}),l.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:"Objetivo"}),l.jsx("p",{className:"text-white/70 text-base leading-relaxed",children:e.practice.objective})]}),e.intro&&e.intro.length>0&&l.jsxs("div",{className:"bg-white/[0.04] border border-white/[0.06] rounded-xl p-5 mb-5",children:[l.jsx("h4",{className:"text-sm font-semibold text-white/50 uppercase tracking-wide mb-3",children:"Como funciona"}),l.jsx("div",{className:"space-y-2.5",children:e.intro.map((r,s)=>l.jsxs(T.p,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:s*.08},className:"text-white/70 text-sm leading-relaxed flex items-start gap-2",children:[l.jsxs("span",{className:"text-white/25 font-mono text-xs mt-0.5 flex-shrink-0",children:[s+1,"."]}),l.jsx("span",{children:r})]},s))})]}),e.rewards&&l.jsxs("div",{className:"flex justify-center gap-4 mb-5 text-xs text-white/30",children:[l.jsxs("span",{children:[" ",e.rewards.fishCoins]}),l.jsxs("span",{children:[" ",e.rewards.xp," XP"]})]}),l.jsxs("div",{className:"flex flex-col items-center gap-3",children:[l.jsxs(T.button,{whileHover:{scale:1.03},whileTap:{scale:.97},onClick:t,className:`bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-500 hover:to-indigo-500
                   text-white px-8 py-3 rounded-xl font-bold text-sm shadow-lg shadow-blue-900/30 transition-all
                   flex items-center gap-2`,children:[l.jsx("span",{children:""}),l.jsx("span",{children:"Ver IA Jogar Primeiro"})]}),l.jsx("button",{onClick:n,className:"text-white/30 hover:text-white/50 text-xs transition-all",children:"Ir direto para prtica "})]})]},"intro")}function fb({lesson:e,gameState:t,isInitialized:n,demoComplete:r,dropPreview:s,statusLabel:i,onSkip:o}){var c,u,h,d,f;if(!t||!n)return l.jsx("div",{className:"text-center text-white/40 text-sm py-12",children:"Preparando demonstrao..."});const a=y.useMemo(()=>{var S;if(!e.intro||e.intro.length===0)return null;const v=((S=t.score)==null?void 0:S.lines)||0,x=Math.min(Math.floor(v/2),e.intro.length-1);return e.intro[x]},[e.intro,(c=t.score)==null?void 0:c.lines]);return l.jsxs(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"text-center",children:[l.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-xl p-3 mb-3 max-w-md mx-auto",children:[l.jsxs("div",{className:"flex items-center justify-center gap-2",children:[l.jsx("span",{className:"text-lg",children:""}),l.jsx("p",{className:"text-sm font-semibold text-blue-300",children:"IA jogando  observe como ela faz!"})]}),i&&l.jsx("p",{className:"text-xs text-blue-400/70 mt-1",children:i})]}),a&&l.jsx(T.div,{initial:{opacity:0,y:-5},animate:{opacity:1,y:0},className:"bg-white/[0.04] border border-white/[0.06] rounded-lg p-2.5 mb-3 max-w-md mx-auto",children:l.jsxs("p",{className:"text-xs text-white/60",children:[" ",a]})},a),l.jsxs("div",{className:"flex gap-3 justify-center items-start",children:[l.jsx(Tr,{heldPiece:t.heldPiece,canHold:t.canHold}),l.jsx(Vn,{board:t.board,currentPiece:t.currentPiece,dropPreview:s,gameOver:t.gameOver}),l.jsxs("div",{className:"flex flex-col gap-3",children:[l.jsx(Pr,{pieces:t.nextPieces||[]}),l.jsx(Cr,{score:((u=t.score)==null?void 0:u.points)||0,level:((h=t.score)==null?void 0:h.level)||1,lines:((d=t.score)==null?void 0:d.lines)||0,combo:((f=t.score)==null?void 0:f.combo)||0})]})]}),l.jsx("div",{className:"mt-4",children:r?l.jsx(T.button,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},whileHover:{scale:1.03},whileTap:{scale:.97},onClick:o,className:`bg-gradient-to-r from-emerald-600 to-green-600 hover:from-emerald-500 hover:to-green-500
                     text-white px-6 py-2.5 rounded-xl font-bold text-sm shadow-lg shadow-emerald-900/30 transition-all`,children:"  Agora  sua vez!"}):l.jsx("button",{onClick:o,className:"text-white/30 hover:text-white/50 text-xs transition-all",children:"Pular demonstrao "})})]},"demo")}function mb({lesson:e,gameState:t,isInitialized:n,practiceState:r,onRestart:s,dropPreview:i}){var o,a,c,u;return!t||!n?l.jsx("div",{className:"text-center text-white/40 text-sm py-12",children:"Carregando..."}):l.jsxs(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"text-center",children:[l.jsxs("div",{className:"bg-white/[0.06] border border-white/[0.06] rounded-xl p-3 mb-3 max-w-md mx-auto",children:[l.jsxs("p",{className:"text-sm font-semibold text-white mb-2",children:[" ",e.practice.objective]}),r.progress>0&&l.jsxs("div",{children:[l.jsx("div",{className:"h-1.5 bg-white/[0.08] rounded-full overflow-hidden",children:l.jsx(T.div,{className:`h-full rounded-full ${r.complete?"bg-emerald-400":"bg-gradient-to-r from-blue-500 to-indigo-500"}`,initial:{width:0},animate:{width:`${Math.min(100,r.progress*100)}%`},transition:{duration:.3}})}),l.jsxs("div",{className:"text-white/30 text-[10px] mt-1",children:[Math.round(r.progress*100),"%"]})]})]}),l.jsxs("div",{className:"flex gap-3 justify-center items-start",children:[l.jsx(Tr,{heldPiece:t.heldPiece,canHold:t.canHold}),l.jsx(Vn,{board:t.board,currentPiece:t.currentPiece,dropPreview:i,gameOver:t.gameOver}),l.jsxs("div",{className:"flex flex-col gap-3",children:[l.jsx(Pr,{pieces:t.nextPieces||[]}),l.jsx(Cr,{score:((o=t.score)==null?void 0:o.points)||0,level:((a=t.score)==null?void 0:a.level)||1,lines:((c=t.score)==null?void 0:c.lines)||0,combo:((u=t.score)==null?void 0:u.combo)||0})]})]}),l.jsx("div",{className:"mt-3 text-white/20 text-[10px]",children:" Mover   Rotao   Soft Drop  Espao: Hard Drop  C: Hold"}),r.feedback&&!r.complete&&l.jsx(T.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"mt-3 bg-white/[0.06] border border-white/[0.08] rounded-lg p-3 max-w-md mx-auto",children:l.jsx("p",{className:"text-sm text-white/70",children:r.feedback})},r.feedback),t.gameOver&&!r.complete&&l.jsxs(T.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"mt-4",children:[l.jsx("p",{className:"text-white/40 text-sm mb-2",children:"Game Over  tente de novo!"}),l.jsx("button",{onClick:s,className:"bg-white/[0.08] hover:bg-white/[0.12] text-white text-sm px-4 py-2 rounded-lg transition-all",children:" Recomear"})]}),r.complete&&l.jsxs(T.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",bounce:.4},className:"mt-4 bg-emerald-500/10 border border-emerald-500/20 rounded-xl p-6 max-w-sm mx-auto",children:[l.jsx("div",{className:"text-4xl mb-2",children:""}),l.jsx("h3",{className:"text-lg font-bold text-white mb-1",children:"Parabns!"}),l.jsx("p",{className:"text-emerald-300/70 text-sm",children:r.feedback})]})]},"practice")}function pb({lesson:e,onComplete:t,onExit:n}){const[r,s]=y.useState("introduction"),[i,o]=y.useState({progress:0,feedback:"",complete:!1}),[a,c]=y.useState(!1),{gameState:u,isInitialized:h,demoComplete:d,statusLabel:f,getDropPreview:v}=ub(r==="demo",e==null?void 0:e.id),x=y.useMemo(()=>r!=="demo"||!h?null:(v==null?void 0:v())||null,[r,h,v,u]),{gameState:S,actions:b,isInitialized:p,getValidationState:m}=cb(r==="practice"?e:null);n0(b,S,r==="practice"&&p);const g=y.useMemo(()=>{var P;return r!=="practice"||!p?null:((P=b.getDropPreview)==null?void 0:P.call(b))||null},[r,p,b,S]);y.useEffect(()=>{var A;if(r!=="practice"||!p||!S)return;const P=m();if(!P||!((A=e.practice)!=null&&A.validate))return;const E=e.practice.validate(P);o(H=>({...H,progress:E.progress||0,feedback:E.feedback||"",complete:E.complete||!1})),E.complete&&!i.complete&&(c(!0),setTimeout(()=>{t(e.id,{score:P.score})},2e3))},[r,p,S,e,m,i.complete,t]);const w=y.useCallback(()=>{s("demo")},[]),k=y.useCallback(()=>{s("practice"),o({progress:0,feedback:"",complete:!1})},[]),j=y.useCallback(()=>{var P;(P=b.restart)==null||P.call(b),o({progress:0,feedback:"",complete:!1})},[b]),C=r==="introduction"?" Introduo":r==="demo"?" Demonstrao":" Prtica";return l.jsxs("div",{className:"fixed inset-0 bg-gradient-to-b from-slate-900 via-indigo-950 to-slate-900 z-50 flex flex-col",children:[l.jsx("div",{className:"bg-black/30 border-b border-white/[0.06] px-4 py-2 flex-shrink-0",children:l.jsxs("div",{className:"flex items-center justify-between max-w-4xl mx-auto",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("span",{className:"text-2xl",children:e.module==="fundamentals"?"":e.module==="intermediate"?"":e.module==="advanced"?"":""}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-bold text-white",children:e.title}),l.jsx("p",{className:"text-white/40 text-xs",children:e.description})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-xs text-white/30 bg-white/[0.06] px-2 py-1 rounded",children:C}),l.jsx("button",{onClick:n,className:"text-white/40 hover:text-white/70 bg-white/[0.06] hover:bg-white/[0.1] rounded-lg px-3 py-1.5 text-sm transition-all",children:" Sair"})]})]})}),l.jsx("div",{className:"flex-1 overflow-auto p-3",children:l.jsx("div",{className:"max-w-4xl w-full mx-auto",children:l.jsxs(me,{mode:"wait",children:[r==="introduction"&&l.jsx(hb,{lesson:e,onStartDemo:w,onStartPractice:k}),r==="demo"&&l.jsx(fb,{lesson:e,gameState:u,isInitialized:h,demoComplete:d,dropPreview:x,statusLabel:f,onSkip:k}),r==="practice"&&l.jsx(mb,{lesson:e,gameState:S,isInitialized:p,practiceState:i,onRestart:j,dropPreview:g})]})})}),l.jsx(db,{show:a,onComplete:()=>c(!1)})]})}function gb({tutorialService:e,onClose:t,onLessonComplete:n}){const[r,s]=y.useState(null),[i,o]=y.useState(e.getProgress()),[a,c]=y.useState("fundamentals"),u=e.lessons,h=[{key:"fundamentals",icon:"",name:"Fundamentos",desc:"O bsico do Tetris"},{key:"intermediate",icon:"",name:"Intermedirio",desc:"T-spins e combos"},{key:"advanced",icon:"",name:"Avanado",desc:"Setups e estratgias"},{key:"pro",icon:"",name:"Profissional",desc:"Tcnicas PRO"}],d=u.filter(g=>g.module===a),f=g=>{const w=u.filter(j=>j.module===g).map(j=>j.id);return{done:w.filter(j=>i.completedLessons.includes(j)).length,total:w.length}},v=(g,w)=>{const k=e.completeLesson(g,w);o(e.getProgress()),s(null),n&&n(k)},x=g=>i.unlockedLessons.includes(g),S=g=>i.completedLessons.includes(g);if(r)return l.jsx(pb,{lesson:r,onComplete:v,onExit:()=>s(null)});const b=i.completedLessons.length,p=u.length,m=p>0?Math.round(b/p*100):0;return l.jsx(T.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-gradient-to-b from-slate-900 via-indigo-950 to-slate-900 z-40 overflow-y-auto",children:l.jsxs("div",{className:"min-h-screen max-w-lg mx-auto px-4 py-6 flex flex-col",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-extrabold text-white",children:" Tutorial"}),l.jsx("p",{className:"text-white/40 text-sm mt-0.5",children:"Aprenda do zero ao PRO"})]}),l.jsx("button",{onClick:t,className:"text-white/40 hover:text-white/70 bg-white/[0.06] hover:bg-white/[0.1] rounded-lg px-3 py-1.5 text-sm transition-all",children:" Voltar"})]}),l.jsxs("div",{className:"mb-6",children:[l.jsxs("div",{className:"flex justify-between text-xs text-white/40 mb-1.5",children:[l.jsx("span",{children:"Progresso geral"}),l.jsxs("span",{children:[b,"/",p," (",m,"%)"]})]}),l.jsx("div",{className:"h-2 bg-white/[0.08] rounded-full overflow-hidden",children:l.jsx(T.div,{className:"h-full bg-gradient-to-r from-emerald-500 to-green-400 rounded-full",initial:{width:0},animate:{width:`${m}%`},transition:{duration:.6,ease:"easeOut"}})})]}),l.jsx("div",{className:"flex gap-1.5 mb-5 overflow-x-auto pb-1 -mx-1 px-1",children:h.map(g=>{const w=f(g.key),k=a===g.key;return l.jsx("button",{onClick:()=>c(g.key),className:`flex-shrink-0 rounded-lg px-3 py-2 text-left transition-all duration-150 ${k?"bg-white/[0.12] border border-white/[0.15]":"bg-white/[0.04] border border-transparent hover:bg-white/[0.07]"}`,children:l.jsxs("div",{className:"flex items-center gap-1.5",children:[l.jsx("span",{className:"text-base",children:g.icon}),l.jsx("span",{className:`text-xs font-semibold ${k?"text-white":"text-white/50"}`,children:g.name}),l.jsxs("span",{className:`text-[10px] ml-1 ${w.done===w.total&&w.total>0?"text-emerald-400":"text-white/30"}`,children:[w.done,"/",w.total]})]})},g.key)})}),l.jsx("div",{className:"flex-1 space-y-2",children:l.jsx(me,{mode:"wait",children:l.jsxs(T.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},transition:{duration:.2},className:"space-y-2",children:[d.map((g,w)=>{var C,P;const k=x(g.id),j=S(g.id);return l.jsxs(T.button,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:w*.04},disabled:!k,onClick:()=>k&&s(g),className:`w-full text-left rounded-xl p-4 transition-all duration-150 flex items-center gap-3 ${k?"bg-white/[0.06] hover:bg-white/[0.1] border border-white/[0.06] hover:border-white/[0.12] active:scale-[0.99]":"bg-white/[0.02] border border-white/[0.03] opacity-40 cursor-not-allowed"} ${j?"border-emerald-500/30":""}`,children:[l.jsx("div",{className:`w-9 h-9 rounded-lg flex items-center justify-center text-sm flex-shrink-0 ${j?"bg-emerald-500/20 text-emerald-400":k?"bg-white/[0.08] text-white/60":"bg-white/[0.04] text-white/20"}`,children:j?"":k?w+1:""}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("div",{className:"text-sm font-semibold text-white truncate",children:g.title}),l.jsx("div",{className:"text-xs text-white/35 mt-0.5 truncate",children:g.description}),l.jsxs("div",{className:"flex items-center gap-3 mt-1.5 text-[10px] text-white/25",children:[l.jsxs("span",{children:[" ",g.estimatedTime]}),l.jsxs("span",{children:[" ",((C=g.rewards)==null?void 0:C.fishCoins)||0]}),l.jsxs("span",{children:[" ",((P=g.rewards)==null?void 0:P.xp)||0," XP"]})]})]}),l.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[l.jsx("span",{className:`w-2 h-2 rounded-full ${g.difficulty==="beginner"?"bg-green-400":g.difficulty==="intermediate"?"bg-yellow-400":g.difficulty==="advanced"?"bg-red-400":"bg-purple-400"}`}),k&&l.jsx("svg",{className:"w-4 h-4 text-white/20",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]},g.id)}),d.length===0&&l.jsx("div",{className:"text-center py-12 text-white/20 text-sm",children:"Nenhuma lio neste mdulo"})]},a)})}),i.badges.length>0&&l.jsxs("div",{className:"mt-6 pt-4 border-t border-white/[0.06]",children:[l.jsx("div",{className:"text-xs text-white/30 mb-2",children:"Badges conquistadas"}),l.jsx("div",{className:"flex flex-wrap gap-2",children:i.badges.map(g=>l.jsxs("span",{className:"bg-amber-500/10 text-amber-300/70 text-[10px] px-2 py-1 rounded-md font-medium",children:[" ",g.replace(/_/g," ")]},g))})]})]})})}function vb({reward:e,onClose:t}){var n,r,s;return ce.useEffect(()=>{const i=setTimeout(()=>{t()},5e3);return()=>clearTimeout(i)},[t]),e?l.jsx(T.div,{initial:{opacity:0,y:-50,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,scale:.9},className:"fixed top-24 right-6 z-[60] max-w-md",children:l.jsx("div",{className:"bg-gradient-to-br from-green-600 to-emerald-600 rounded-xl p-6 shadow-2xl border-2 border-white/20",children:l.jsxs("div",{className:"flex items-start gap-4",children:[l.jsx("div",{className:"text-4xl",children:""}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Lesson Completa!"}),e.lessonTitle&&l.jsx("p",{className:"text-white/90 text-sm mb-3",children:e.lessonTitle}),l.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[((n=e.rewards)==null?void 0:n.fishCoins)>0&&l.jsxs("div",{className:"bg-white/10 rounded-lg p-2 text-center",children:[l.jsx("div",{className:"text-xl",children:""}),l.jsxs("div",{className:"text-lg font-bold text-white",children:["+",e.rewards.fishCoins]}),l.jsx("div",{className:"text-xs text-white/70",children:"Peixes"})]}),((r=e.rewards)==null?void 0:r.xp)>0&&l.jsxs("div",{className:"bg-white/10 rounded-lg p-2 text-center",children:[l.jsx("div",{className:"text-xl",children:""}),l.jsxs("div",{className:"text-lg font-bold text-white",children:["+",e.rewards.xp]}),l.jsx("div",{className:"text-xs text-white/70",children:"XP"})]}),((s=e.rewards)==null?void 0:s.badge)&&l.jsxs("div",{className:"bg-white/10 rounded-lg p-2 text-center",children:[l.jsx("div",{className:"text-xl",children:""}),l.jsx("div",{className:"text-xs font-bold text-white mt-1",children:"Badge"}),l.jsx("div",{className:"text-xs text-white/70",children:e.rewards.badge.split("_")[0]})]})]})]}),l.jsx("button",{onClick:t,className:"text-white/60 hover:text-white transition-colors",children:""})]})})}):null}function yb(){const[e,t]=y.useState(null),n=y.useRef(null),r=y.useRef(null),s=y.useRef(0),i=y.useRef(!1),o=y.useRef(!1);y.useEffect(()=>{if(!i.current){i.current=!0;try{const w=F.resolve("gameService");n.current=w,w.initializeGame(),t(w.getGameState());const k=()=>{o.current=!0};return Object.values(O).forEach(j=>{L.on(j,k)}),()=>{Object.values(O).forEach(j=>{L.off(j,k)}),r.current&&cancelAnimationFrame(r.current)}}catch(w){throw Le.logError("useGameService","init",w.message,{stack:w.stack}),w}}},[]),y.useEffect(()=>{if(!n.current)return;const w=k=>{s.current||(s.current=k);const j=k-s.current;s.current=k,n.current&&(n.current.isPlaying&&!n.current.isPaused&&!n.current.gameOver&&n.current.updateGame(j),o.current&&(o.current=!1,t(n.current.getGameState()))),r.current=requestAnimationFrame(w)};return r.current=requestAnimationFrame(w),()=>{r.current&&cancelAnimationFrame(r.current)}},[]);const a=y.useCallback(w=>(...k)=>{if(n.current&&typeof n.current[w]=="function")try{return["getDropPreview","updateGame","getGameState"].includes(w)||Le.logAction("useGameService",w,{args:k.length>0?k:void 0}),n.current[w](...k)}catch(j){if(Le.logError("useGameService",w,j.message,{stack:j.stack,args:k.map(C=>String(C).slice(0,100))}),w==="getDropPreview")return null;throw j}},[]),c=y.useCallback(a("movePiece"),[a]),u=y.useCallback(a("rotatePiece"),[a]),h=y.useCallback(a("rotatePieceLeft"),[a]),d=y.useCallback(a("hardDrop"),[a]),f=y.useCallback(a("holdPiece"),[a]),v=y.useCallback(a("getDropPreview"),[a]),x=y.useCallback(a("pause"),[a]),S=y.useCallback(a("resume"),[a]),b=y.useCallback(a("restart"),[a]),p=y.useCallback(a("saveGame"),[a]),m=y.useCallback(a("loadGame"),[a]);return{gameState:e,actions:{movePiece:c,rotatePiece:u,rotatePieceLeft:h,hardDrop:d,holdPiece:f,getDropPreview:v,pause:x,resume:S,restart:b,saveGame:p,loadGame:m}}}function xb(){const[e,t]=y.useState({volume:80,gameSpeed:"normal",soundEnabled:!0,particlesEnabled:!0,das:167,arr:33}),[n,r]=y.useState(!0),[s,i]=y.useState(null);y.useEffect(()=>{try{const h=F.resolve("settingsService").getSettings();t(h||{volume:80,gameSpeed:"normal",soundEnabled:!0,particlesEnabled:!0,das:167,arr:33}),r(!1)}catch(u){i(u.message),r(!1),t({volume:80,gameSpeed:"normal",soundEnabled:!0,particlesEnabled:!0,das:167,arr:33})}},[]);const o=y.useCallback(async u=>{try{i(null);const d=F.resolve("settingsService").saveSettings(u);return t(d),d}catch(h){throw i(h.message),h}},[]),a=y.useCallback(async(u,h)=>{try{i(null);const f=F.resolve("settingsService").updateSetting(u,h);return t(f),f}catch(d){throw i(d.message),d}},[]),c=y.useCallback(async()=>{try{i(null);const h=F.resolve("settingsService").resetSettings();return t(h),h}catch(u){throw i(u.message),u}},[]);return{settings:e,loading:n,error:s,updateSettings:o,updateSetting:a,resetSettings:c}}function wb(){const e=y.useCallback((b,p,m="sine",g=.1)=>{const w=Er();if(w)try{const k=w.createOscillator(),j=w.createGain();k.connect(j),j.connect(w.destination),k.frequency.setValueAtTime(b,w.currentTime),k.type=m,j.gain.setValueAtTime(g,w.currentTime),j.gain.exponentialRampToValueAtTime(.001,w.currentTime+p),k.start(w.currentTime),k.stop(w.currentTime+p)}catch{}},[]),t=y.useCallback((b,p=.05)=>{const m=Er();if(m)try{const g=m.sampleRate*b,w=m.createBuffer(1,g,m.sampleRate),k=w.getChannelData(0);for(let C=0;C<g;C++)k[C]=(Math.random()*2-1)*p;const j=m.createBufferSource();j.buffer=w,j.connect(m.destination),j.start()}catch{}},[]),n=y.useCallback(b=>{switch(b){case"I":[800,700,600,500].forEach((p,m)=>{setTimeout(()=>e(p,.1,"square",.08),m*50)});break;case"O":e(600,.1,"sine",.1),setTimeout(()=>e(600,.1,"sine",.1),80);break;case"T":e(523,.08,"triangle",.08),setTimeout(()=>e(659,.08,"triangle",.08),40),setTimeout(()=>e(523,.08,"triangle",.08),80);break;case"S":[440,494,523,587].forEach((p,m)=>{setTimeout(()=>e(p,.06,"sawtooth",.06),m*30)});break;case"Z":[587,523,494,440].forEach((p,m)=>{setTimeout(()=>e(p,.06,"sawtooth",.06),m*30)});break;case"J":[330,415,523].forEach((p,m)=>{setTimeout(()=>e(p,.15,"triangle",.07),m*20)});break;case"L":[392,494,659].forEach((p,m)=>{setTimeout(()=>e(p,.15,"sine",.08),m*30)});break;default:e(440,.1,"sine",.05)}},[e]),r=y.useCallback(b=>{switch(b){case 1:[440,494,523].forEach((p,m)=>{setTimeout(()=>e(p,.1,"triangle",.1),m*80)});break;case 2:[440,523,659,784].forEach((p,m)=>{setTimeout(()=>e(p,.12,"triangle",.1),m*60)});break;case 3:[523,659,784,1047,1319].forEach((p,m)=>{setTimeout(()=>e(p,.15,"triangle",.12),m*50)});break;case 4:t(.02),setTimeout(()=>{[262,330,392,523,659,784,1047].forEach((p,m)=>{setTimeout(()=>e(p,.2,"sawtooth",.15),m*40)})},50),setTimeout(()=>{[1047,1319,1568,2093].forEach((p,m)=>{setTimeout(()=>e(p,.3,"triangle",.2),m*30)})},350);break}},[e,t]),s=y.useCallback(()=>{[{freq:523,delay:0},{freq:659,delay:100},{freq:784,delay:200},{freq:1047,delay:300},{freq:784,delay:400},{freq:1047,delay:500},{freq:1319,delay:600},{freq:1568,delay:700}].forEach(p=>{setTimeout(()=>e(p.freq,.15,"triangle",.12),p.delay)}),setTimeout(()=>{[1047,1319,1568,2093].forEach((p,m)=>{setTimeout(()=>e(p,.4,"triangle",.15),m*50)})},800)},[e]),i=y.useCallback(()=>{e(200,.05,"square",.03),e(120,.06,"sine",.04)},[e]),o=y.useCallback(()=>{t(.04,.08),e(80,.08,"square",.12),e(60,.1,"sine",.1)},[e,t]),a=y.useCallback(()=>{t(.03,.04),[349,440,523,659,784].forEach((b,p)=>{setTimeout(()=>e(b,.2,"sawtooth",.1),p*40)}),setTimeout(()=>{e(1047,.4,"triangle",.15)},250)},[e,t]),c=y.useCallback(()=>{[660,880,1100,1320,1760].forEach((b,p)=>{setTimeout(()=>e(b,.12,"triangle",.08),p*50)})},[e]),u=y.useCallback(b=>{const p=400+b*80;e(p,.1,"triangle",.08),setTimeout(()=>e(p*1.25,.08,"triangle",.06),50)},[e]),h=y.useCallback(()=>{[523,494,440,392,349,330,294,262].forEach((p,m)=>{setTimeout(()=>e(p,.3,"sine",.1),m*150)})},[e]),d=y.useCallback(()=>{e(440,.2,"triangle",.08)},[e]),f=y.useCallback(()=>{e(523,.15,"triangle",.08),setTimeout(()=>e(659,.1,"triangle",.06),100)},[e]),v=y.useCallback(()=>{e(880,.1,"sine",.06),setTimeout(()=>e(1100,.08,"sine",.05),60)},[e]),x=y.useCallback(()=>{e(1200,.05,"square",.04)},[e]),S=y.useCallback(()=>{e(800,.03,"square",.02)},[e]);return{playPieceSound:n,playLineClear:r,playLevelUp:s,playPieceLand:i,playHardDrop:o,playTSpin:a,playBackToBack:c,playCombo:u,playGameOver:h,playPause:d,playResume:f,playHold:v,playRotate:x,playMove:S}}function Sb(){const e=wb(),t=y.useRef(e);t.current=e,y.useEffect(()=>{const n=()=>t.current,r=x=>{var S;n().playPieceLand(),(S=x==null?void 0:x.piece)!=null&&S.type&&n().playPieceSound(x.piece.type)},s=x=>{(x==null?void 0:x.linesCleared)>0&&n().playLineClear(x.linesCleared)},i=()=>n().playHardDrop(),o=()=>n().playTSpin(),a=()=>n().playBackToBack(),c=x=>{(x==null?void 0:x.combo)>=2&&n().playCombo(x.combo)},u=()=>n().playHold(),h=()=>n().playRotate(),d=()=>n().playMove(),f=()=>n().playGameOver(),v=()=>n().playLevelUp();return L.on(O.PIECE_PLACED,r),L.on(O.LINE_CLEARED,s),L.on(O.HARD_DROP,i),L.on(O.T_SPIN,o),L.on(O.BACK_TO_BACK,a),L.on(O.SCORE_UPDATED,c),L.on(O.PIECE_HELD,u),L.on(O.PIECE_ROTATED,h),L.on(O.PIECE_MOVED,d),L.on(O.GAME_OVER,f),L.on(O.LEVEL_UP,v),()=>{L.off(O.PIECE_PLACED,r),L.off(O.LINE_CLEARED,s),L.off(O.HARD_DROP,i),L.off(O.T_SPIN,o),L.off(O.BACK_TO_BACK,a),L.off(O.SCORE_UPDATED,c),L.off(O.PIECE_HELD,u),L.off(O.PIECE_ROTATED,h),L.off(O.PIECE_MOVED,d),L.off(O.GAME_OVER,f),L.off(O.LEVEL_UP,v)}},[])}function bb(){const[e,t]=y.useState(!1),[n,r]=y.useState(null),s=y.useRef(null),i=y.useRef([]),o=y.useRef(null),a=y.useCallback(()=>{s.current&&(s.current.pause(),s.current.currentTime=0),i.current.forEach(f=>{try{f.stop()}catch{}}),i.current=[],o.current&&(clearTimeout(o.current),o.current=null),t(!1),r(null)},[]),c=y.useCallback(async()=>{try{a();const f=new Audio("/cat-tetris/sounds/background-music.mp3");f.loop=!0,f.volume=.3,s.current=f,await f.play(),t(!0),r("background")}catch{h()}},[a]),u=y.useCallback(async()=>{try{a();const f=new Audio("/cat-tetris/sounds/game-music.mp3");f.loop=!0,f.volume=.4,s.current=f,await f.play(),t(!0),r("game")}catch{d()}},[a]),h=y.useCallback(()=>{a();try{const f=Er();if(!f)return;const v=[{freq:523.25,duration:.4},{freq:587.33,duration:.4},{freq:659.25,duration:.4},{freq:698.46,duration:.4},{freq:783.99,duration:.6},{freq:659.25,duration:.4},{freq:523.25,duration:.8},{freq:587.33,duration:.4},{freq:659.25,duration:.4},{freq:698.46,duration:.4},{freq:783.99,duration:.6},{freq:880,duration:.4},{freq:783.99,duration:.8},{freq:659.25,duration:.4},{freq:698.46,duration:.4},{freq:783.99,duration:.4},{freq:880,duration:.6},{freq:987.77,duration:.4},{freq:1046.5,duration:.8}];let x=f.currentTime;v.forEach((S,b)=>{const p=f.createOscillator(),m=f.createGain();if(p.connect(m),m.connect(f.destination),p.frequency.setValueAtTime(S.freq,x),p.type="sine",m.gain.setValueAtTime(0,x),m.gain.linearRampToValueAtTime(.1,x+.05),m.gain.exponentialRampToValueAtTime(.01,x+S.duration),p.start(x),p.stop(x+S.duration),i.current.push(p),b<v.length-1){const g=f.createOscillator(),w=f.createGain();g.connect(w),w.connect(f.destination),g.frequency.setValueAtTime(S.freq*1.25,x),g.type="triangle",w.gain.setValueAtTime(0,x),w.gain.linearRampToValueAtTime(.05,x+.05),w.gain.exponentialRampToValueAtTime(.01,x+S.duration),g.start(x),g.stop(x+S.duration),i.current.push(g)}x+=S.duration}),o.current=setTimeout(()=>{s.current||h()},x*1e3+1e3),t(!0),r("cheerful-fallback")}catch{}},[a]),d=y.useCallback(()=>{a();try{const f=Er();if(!f)return;const v=[{freq:261.63,duration:.2},{freq:329.63,duration:.2},{freq:392,duration:.2},{freq:523.25,duration:.3},{freq:392,duration:.1},{freq:523.25,duration:.3},{freq:293.66,duration:.2},{freq:369.99,duration:.2},{freq:440,duration:.2},{freq:587.33,duration:.3},{freq:440,duration:.1},{freq:587.33,duration:.3},{freq:329.63,duration:.2},{freq:415.3,duration:.2},{freq:493.88,duration:.2},{freq:659.25,duration:.4},{freq:493.88,duration:.2},{freq:659.25,duration:.4}];let x=f.currentTime;v.forEach((S,b)=>{const p=f.createOscillator(),m=f.createGain();if(p.connect(m),m.connect(f.destination),p.frequency.setValueAtTime(S.freq,x),p.type="square",m.gain.setValueAtTime(0,x),m.gain.linearRampToValueAtTime(.15,x+.02),m.gain.exponentialRampToValueAtTime(.01,x+S.duration),p.start(x),p.stop(x+S.duration),i.current.push(p),b%2===0){const g=f.createOscillator(),w=f.createGain();g.connect(w),w.connect(f.destination),g.frequency.setValueAtTime(S.freq*.5,x),g.type="sawtooth",w.gain.setValueAtTime(0,x),w.gain.linearRampToValueAtTime(.08,x+.02),w.gain.exponentialRampToValueAtTime(.01,x+S.duration),g.start(x),g.stop(x+S.duration),i.current.push(g)}x+=S.duration}),o.current=setTimeout(()=>{s.current||d()},x*1e3+500),t(!0),r("energetic-fallback")}catch{}},[a]);return{isPlaying:e,currentTrack:n,startBackgroundMusic:c,startGameMusic:u,stopMusic:a,playCheerfulMelody:h,playEnergeticMelody:d}}const st={DPAD_UP:12,DPAD_DOWN:13,DPAD_LEFT:14,DPAD_RIGHT:15,FACE_BUTTON_BOTTOM:0,FACE_BUTTON_RIGHT:1,FACE_BUTTON_LEFT:2,FACE_BUTTON_TOP:3,BUMPER_LEFT:4,BUMPER_RIGHT:5,TRIGGER_LEFT:6,TRIGGER_RIGHT:7,BUTTON_BACK:8,BUTTON_START:9,STICK_LEFT:10,STICK_RIGHT:11},kb=(e=null)=>{const[t,n]=y.useState([]),[r,s]=y.useState(!1),i=y.useRef({}),o=y.useRef(100),a=y.useRef({}),c=y.useRef({}),u=y.useRef(200);y.useEffect(()=>{const v=b=>{n(p=>[...p,b.gamepad]),s(!0),b.gamepad.vibrationActuator&&b.gamepad.vibrationActuator.playEffect("dual-rumble",{duration:200,strongMagnitude:.5,weakMagnitude:.5})},x=b=>{n(m=>m.filter(g=>g.id!==b.gamepad.id));const p=navigator.getGamepads().filter(m=>m&&m.connected);s(p.length>0)};return window.addEventListener("gamepadconnected",v),window.addEventListener("gamepaddisconnected",x),(()=>{const b=navigator.getGamepads(),p=Array.from(b).filter(m=>m&&m.connected);p.length>0&&(n(p),s(!0))})(),()=>{window.removeEventListener("gamepadconnected",v),window.removeEventListener("gamepaddisconnected",x)}},[]);const h=y.useCallback((v,x,S=.3)=>Math.abs(v)<S&&Math.abs(x)<S?null:Math.abs(v)>Math.abs(x)?v>0?"right":"left":x>0?"down":"up",[]),d=y.useCallback(()=>{var X,q,B;if(!r||!e)return;const v=navigator.getGamepads(),x=Array.from(v).find(G=>G&&G.connected);if(!x)return;const S=Date.now(),{movePiece:b,rotatePiece:p,rotatePieceLeft:m,hardDrop:g,holdPiece:w,pause:k}=e;if(!b)return;const j=(G,R)=>{const te=`movement_${G}`,_=i.current[te]||0,M=c.current[te]||!1;if(R&&!M){c.current[te]=!0,i.current[te]=S,C(G);return}if(R&&M){const I=u.current,V=o.current,Y=_===i.current[te]&&S-_>=I?I:V;S-_>=Y&&(i.current[te]=S,C(G));return}!R&&M&&(c.current[te]=!1)},C=G=>{e.movePiece&&e.movePiece(G)},P=((X=x.buttons[st.DPAD_LEFT])==null?void 0:X.pressed)||h(x.axes[0],x.axes[1])==="left",E=((q=x.buttons[st.DPAD_RIGHT])==null?void 0:q.pressed)||h(x.axes[0],x.axes[1])==="right",A=((B=x.buttons[st.DPAD_DOWN])==null?void 0:B.pressed)||h(x.axes[0],x.axes[1])==="down";j("left",P),j("right",E),j("down",A);const H={};[{button:st.DPAD_UP,action:()=>g==null?void 0:g()},{button:st.FACE_BUTTON_BOTTOM,action:()=>p==null?void 0:p()},{button:st.FACE_BUTTON_RIGHT,action:()=>m==null?void 0:m()},{button:st.FACE_BUTTON_LEFT,action:()=>p==null?void 0:p()},{button:st.FACE_BUTTON_TOP,action:()=>p==null?void 0:p()},{button:st.BUMPER_LEFT,action:()=>w==null?void 0:w()},{button:st.BUMPER_RIGHT,action:()=>w==null?void 0:w()},{button:st.BUTTON_START,action:()=>k==null?void 0:k()}].forEach(({button:G,action:R})=>{var M;const te=(M=x.buttons[G])==null?void 0:M.pressed,_=a.current[G];if(H[G]=te,te&&!_&&(R(),x.vibrationActuator)){const I=G===st.DPAD_UP?.3:.1;x.vibrationActuator.playEffect("dual-rumble",{duration:50,strongMagnitude:I,weakMagnitude:I*.5})}}),a.current=H},[r,h,e]),f=y.useCallback(()=>{const v=navigator.getGamepads(),x=Array.from(v).find(S=>S&&S.connected);return x?{id:x.id,index:x.index,connected:x.connected,buttonsCount:x.buttons.length,axesCount:x.axes.length}:null},[]);return{isGamepadActive:r,connectedGamepads:t,processGamepadInput:d,getGamepadInfo:f,controllerCount:t.length}};function jb(){const[e,t]=y.useState(null),[n,r]=y.useState(!0);y.useEffect(()=>{try{const o=F.resolve("playerStatsService");t(o.getStats()),r(!1);const a=()=>{try{const c=F.resolve("statisticsService"),h=F.resolve("gameService").getGameState(),d=c.getStats(),f={score:h.score.points,level:h.score.level,linesCleared:d.linesCleared,piecesPlaced:d.piecesPlaced,tSpins:d.tSpins,backToBack:d.backToBack,maxCombo:d.maxCombo,playTime:d.playTime};o.updateAfterGame(f),t(o.getStats()),window.dispatchEvent(new Event("playerStatsUpdated"))}catch{}};return L.on(O.GAME_OVER,a),()=>{L.off(O.GAME_OVER,a)}}catch{r(!1)}},[]);const s=y.useCallback((o,a)=>{try{const c=F.resolve("playerStatsService"),u=c.updateRecord(o,a);return u&&(t(c.getStats()),window.dispatchEvent(new Event("playerStatsUpdated"))),u}catch{return!1}},[]),i=y.useCallback((o,a=1)=>{try{const c=F.resolve("playerStatsService");c.incrementStat(o,a),t(c.getStats()),window.dispatchEvent(new Event("playerStatsUpdated"))}catch{}},[]);return{playerStats:e,loading:n,updateRecord:s,incrementStat:i}}const Cb=({isConnected:e,controllerCount:t,gamepadInfo:n,className:r=""})=>{const[s,i]=y.useState(!1);return e?l.jsx("div",{className:`fixed top-4 right-4 z-50 ${r}`,children:l.jsxs(T.div,{initial:{opacity:0,scale:.8,x:20},animate:{opacity:1,scale:1,x:0},exit:{opacity:0,scale:.8,x:20},transition:{duration:.3},className:"bg-gray-900/90 backdrop-blur-sm text-white p-3 rounded-lg border border-green-500/30 shadow-lg",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(T.div,{animate:{rotate:[0,-10,10,-10,0],scale:[1,1.1,1]},transition:{duration:2,repeat:1/0,repeatDelay:3},children:""}),l.jsxs("div",{className:"text-sm",children:[l.jsxs("div",{className:"text-green-400 font-semibold",children:[t," Controle",t!==1?"s":""," Conectado",t!==1?"s":""]}),l.jsx("div",{className:"text-gray-300 text-xs",children:"Pronto para jogar!"})]}),l.jsx(T.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>i(!s),className:"ml-2 text-gray-400 hover:text-white transition-colors",title:"Mostrar controles",children:l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"})})})]}),l.jsx(me,{children:s&&l.jsx(T.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},className:"mt-3 pt-3 border-t border-gray-700",children:l.jsxs("div",{className:"text-xs text-gray-300 space-y-1",children:[l.jsx("div",{className:"font-semibold text-white mb-2",children:" Controles:"}),l.jsxs("div",{className:"grid grid-cols-2 gap-1 text-xs",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-yellow-400",children:"D-Pad  "}),l.jsx("div",{className:"text-gray-400",children:"Mover"})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-yellow-400",children:"D-Pad "}),l.jsx("div",{className:"text-gray-400",children:"Acelerar"})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-yellow-400",children:"D-Pad "}),l.jsx("div",{className:"text-gray-400",children:"Hard Drop"})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-yellow-400",children:"A/B/X/Y"}),l.jsx("div",{className:"text-gray-400",children:"Girar"})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-yellow-400",children:"L/R"}),l.jsx("div",{className:"text-gray-400",children:"Guardar"})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-yellow-400",children:"Start"}),l.jsx("div",{className:"text-gray-400",children:"Pausar"})]})]}),l.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-700",children:[l.jsx("div",{className:"text-green-400 text-xs",children:" Analog Stick Esquerdo tambm funciona!"}),l.jsx("div",{className:"text-blue-400 text-xs",children:" Gatilhos L2/R2 para rotao"})]}),n&&n.length>0&&l.jsx("div",{className:"mt-2 pt-2 border-t border-gray-700",children:l.jsx("div",{className:"text-xs text-gray-400",children:n.map((o,a)=>l.jsxs("div",{className:"mb-1",children:[l.jsxs("div",{className:"font-semibold text-white",children:["Controle ",o.index+1,":"]}),l.jsx("div",{className:"text-gray-300 truncate",children:o.id.length>30?o.id.substring(0,30)+"...":o.id}),l.jsxs("div",{className:"flex gap-2 text-xs",children:[l.jsxs("span",{className:"text-blue-400",children:[o.buttons," botes"]}),l.jsxs("span",{className:"text-green-400",children:[o.axes," eixos"]}),o.vibration&&l.jsx("span",{className:"text-purple-400",children:" Vibrao"})]})]},a))})})]})})})]})}):null};function Pb(){const[e,t]=y.useState(!1),[n,r]=y.useState([]),[s,i]=y.useState("all"),[o,a]=y.useState(0);y.useEffect(()=>{const v=()=>{const S=Le.getCurrentSessionLogs();r(S),a(S.filter(b=>b.level==="error").length)};v();const x=setInterval(v,2e3);return()=>clearInterval(x)},[]),y.useEffect(()=>{const v=x=>{x.ctrlKey&&x.shiftKey&&x.key==="D"&&(x.preventDefault(),t(S=>!S))};return window.addEventListener("keydown",v),()=>window.removeEventListener("keydown",v)},[]);const c=s==="all"?n:n.filter(v=>v.level===s),u=()=>{Le.saveForExternalAccess(),Le.downloadLogs()},h=()=>{Le.clearLogs(),r([]),a(0)},d={error:"",warn:"",info:"",action:""},f={error:"text-red-400 bg-red-900/30",warn:"text-yellow-400 bg-yellow-900/30",info:"text-blue-400 bg-blue-900/30",action:"text-green-400 bg-green-900/30"};return l.jsxs(l.Fragment,{children:[l.jsxs("button",{onClick:()=>t(!e),className:`fixed bottom-4 left-4 z-[9999] bg-gray-900/90 hover:bg-gray-800
                   text-white rounded-full w-10 h-10 flex items-center justify-center
                   border border-gray-600 shadow-lg transition-all`,title:"Debug Panel (Ctrl+Shift+D)",children:[l.jsx("span",{className:"text-lg",children:""}),o>0&&l.jsx("span",{className:`absolute -top-1 -right-1 bg-red-500 text-white text-xs
                          rounded-full w-5 h-5 flex items-center justify-center font-bold`,children:o>99?"99+":o})]}),l.jsx(me,{children:e&&l.jsxs(T.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:50},className:`fixed bottom-16 left-4 z-[9999] w-[500px] max-w-[90vw] max-h-[70vh]
                       bg-gray-900/95 backdrop-blur-sm border border-gray-600 rounded-xl
                       shadow-2xl flex flex-col overflow-hidden`,children:[l.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-b border-gray-700 bg-gray-800/50",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-lg",children:""}),l.jsx("span",{className:"text-white font-bold text-sm",children:"Debug Log"}),l.jsxs("span",{className:"text-gray-400 text-xs",children:["(",c.length," entries)"]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:u,className:"text-xs bg-blue-600 hover:bg-blue-500 text-white px-2 py-1 rounded",title:"Exportar logs para arquivo JSON",children:" Exportar"}),l.jsx("button",{onClick:h,className:"text-xs bg-red-600 hover:bg-red-500 text-white px-2 py-1 rounded",title:"Limpar todos os logs",children:" Limpar"}),l.jsx("button",{onClick:()=>t(!1),className:"text-gray-400 hover:text-white text-xl leading-none",children:""})]})]}),l.jsx("div",{className:"flex gap-1 px-4 py-2 border-b border-gray-700",children:["all","error","warn","info","action"].map(v=>l.jsxs("button",{onClick:()=>i(v),className:`text-xs px-2 py-1 rounded transition-colors ${s===v?"bg-white/20 text-white":"text-gray-400 hover:text-white hover:bg-white/10"}`,children:[v==="all"?" Todos":`${d[v]} ${v}`,v==="error"&&o>0&&l.jsxs("span",{className:"ml-1 text-red-400",children:["(",o,")"]})]},v))}),l.jsx("div",{className:"flex-1 overflow-y-auto px-2 py-1 space-y-1 font-mono text-xs",children:c.length===0?l.jsx("div",{className:"text-gray-500 text-center py-8",children:s==="error"?" Nenhum erro registrado!":"Nenhum log ainda."}):[...c].reverse().map(v=>l.jsx(Tb,{entry:v,levelIcon:d,levelColor:f},v.id))}),l.jsxs("div",{className:"px-4 py-1 border-t border-gray-700 text-gray-500 text-xs flex justify-between",children:[l.jsxs("span",{children:["Session: ",Le.sessionId.slice(-8)]}),l.jsx("span",{children:"Ctrl+Shift+D para toggle"})]})]})})]})}function Tb({entry:e,levelIcon:t,levelColor:n}){const[r,s]=y.useState(!1),i=new Date(e.timestamp).toLocaleTimeString();return l.jsxs("div",{className:`rounded px-2 py-1 cursor-pointer hover:bg-white/5 ${n[e.level]||"text-gray-300"}`,onClick:()=>s(!r),children:[l.jsxs("div",{className:"flex items-start gap-1",children:[l.jsx("span",{className:"flex-shrink-0",children:t[e.level]||""}),l.jsxs("span",{className:"text-gray-500 flex-shrink-0",children:["[",i,"]"]}),l.jsx("span",{className:"text-white/70 flex-shrink-0",children:e.source}),l.jsx("span",{className:"text-gray-600",children:"."}),l.jsx("span",{className:"text-purple-300 flex-shrink-0",children:e.action}),l.jsx("span",{className:"text-gray-300 truncate",children:e.message})]}),r&&l.jsxs("div",{className:"mt-1 ml-6 space-y-1",children:[e.details&&l.jsxs("div",{className:"text-gray-400 bg-black/30 rounded p-1 overflow-x-auto",children:[l.jsx("div",{className:"text-gray-500 text-[10px] uppercase",children:"Details:"}),l.jsx("pre",{className:"whitespace-pre-wrap break-all",children:typeof e.details=="string"?e.details:JSON.stringify(e.details,null,2)})]}),e.gameState&&l.jsxs("div",{className:"text-gray-400 bg-black/30 rounded p-1 overflow-x-auto",children:[l.jsx("div",{className:"text-gray-500 text-[10px] uppercase",children:"Game State:"}),l.jsx("pre",{className:"whitespace-pre-wrap break-all",children:JSON.stringify(e.gameState,null,2)})]})]})]})}const Eb=y.lazy(()=>jm(()=>import("./SettingsMenu-001a9302.js"),[]));function Nb(){return l.jsx("div",{className:"flex items-center justify-center p-8",children:l.jsx(T.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"text-4xl",children:""})})}function _b({gameState:e,actions:t,onBackToMenu:n,isGamepadActive:r,controllerCount:s,getGamepadInfo:i}){var f,v,x,S,b,p;const o=ce.useMemo(()=>{if(!(e!=null&&e.currentPiece)||e!=null&&e.gameOver||e!=null&&e.isPaused)return null;try{return t.getDropPreview()}catch{return null}},[(v=(f=e==null?void 0:e.currentPiece)==null?void 0:f.position)==null?void 0:v.x,(S=(x=e==null?void 0:e.currentPiece)==null?void 0:x.position)==null?void 0:S.y,(b=e==null?void 0:e.currentPiece)==null?void 0:b.type,(p=e==null?void 0:e.currentPiece)==null?void 0:p.shape,e==null?void 0:e.gameOver,e==null?void 0:e.isPaused]),[a,c]=ce.useState({hardDrop:!1,hold:!1,pause:!1}),u=ce.useCallback(()=>{a.hardDrop||e!=null&&e.gameOver||(t.hardDrop(),c(m=>({...m,hardDrop:!0})),setTimeout(()=>{c(m=>({...m,hardDrop:!1}))},300))},[t,a.hardDrop,e==null?void 0:e.gameOver]),h=ce.useCallback(()=>{a.hold||e!=null&&e.gameOver||!(e!=null&&e.canHold)||(t.holdPiece(),c(m=>({...m,hold:!0})),setTimeout(()=>{c(m=>({...m,hold:!1}))},500))},[t,a.hold,e==null?void 0:e.gameOver,e==null?void 0:e.canHold]),d=ce.useCallback(()=>{a.pause||e!=null&&e.gameOver||(e!=null&&e.isPaused?t.resume():t.pause(),c(m=>({...m,pause:!0})),setTimeout(()=>{c(m=>({...m,pause:!1}))},300))},[t,a.pause,e==null?void 0:e.gameOver,e==null?void 0:e.isPaused]);return l.jsxs("div",{className:"h-screen cat-bg flex flex-col overflow-hidden",children:[l.jsxs("div",{className:"flex items-center justify-between px-3 py-1.5 bg-black/30 backdrop-blur-sm border-b border-white/10 shrink-0",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(T.button,{onClick:n,whileHover:{scale:1.05},whileTap:{scale:.95},className:"bg-white/15 hover:bg-white/25 text-white p-1.5 rounded-lg transition-colors",title:"Voltar ao Menu",children:l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"})})}),l.jsx("span",{className:"text-white font-bold text-sm",children:" Cat Tetris"})]}),l.jsxs("div",{className:"flex items-center gap-3 text-xs text-white/70",children:[l.jsxs("span",{className:"text-yellow-400 font-bold",children:[e.score.points.toLocaleString()," pts"]}),l.jsxs("span",{children:["Nv.",e.score.level]}),l.jsxs("span",{children:[e.score.lines," linhas"]})]}),l.jsx("div",{className:"flex items-center gap-1.5",children:l.jsx(T.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:e.isPaused?t.resume:t.pause,disabled:e.gameOver,className:"bg-white/10 hover:bg-white/20 text-white px-2.5 py-1 rounded-lg text-xs transition-colors disabled:opacity-50",children:e.isPaused?"":""})})]}),l.jsxs("div",{className:"flex-1 flex items-center justify-center overflow-hidden p-2",children:[l.jsxs("div",{className:"flex flex-col lg:flex-row gap-2 items-center justify-center",children:[l.jsxs("div",{className:"hidden lg:flex flex-col lg:flex-row gap-2 items-center justify-center",children:[l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx(Tr,{heldPiece:e.heldPiece,canHold:e.canHold}),l.jsx(Pr,{pieces:e.nextPieces})]}),l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx(Vn,{board:e.board,currentPiece:e.currentPiece,dropPreview:o,gameOver:e.gameOver}),l.jsx(iS,{onMove:t.movePiece,onRotate:t.rotatePiece,onHardDrop:t.hardDrop,onPause:e.isPaused?t.resume:t.pause,onHold:t.holdPiece,isPaused:e.isPaused,gameOver:e.gameOver,canHold:e.canHold})]}),l.jsx("div",{className:"flex flex-col gap-2",children:l.jsx(Cr,{score:e.score.points,level:e.score.level,lines:e.score.lines,combo:e.score.combo})})]}),l.jsxs("div",{className:"flex lg:hidden flex-col w-full h-full","data-testid":"mobile-layout",children:[l.jsxs("div",{className:"flex justify-between items-center mb-2 px-2 bg-black/30 rounded-lg mx-2 py-1",children:[l.jsxs("div",{className:"text-white text-sm",children:[l.jsx("span",{className:"text-yellow-400 font-bold",children:e.score.points.toLocaleString()}),l.jsxs("span",{className:"text-white/60 ml-2",children:["Nv.",e.score.level]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[e.heldPiece&&l.jsx("div",{className:"text-xs text-white/60",children:""}),l.jsx("div",{className:"text-xs text-white/60",children:"Prxima:"}),l.jsx("div",{className:"bg-gray-800/50 p-1 rounded",children:e.nextPieces[0]?l.jsx("div",{className:"grid gap-0.5",style:{gridTemplateColumns:`repeat(${Math.max(...e.nextPieces[0].shape.map(m=>m.length))}, 8px)`,gridTemplateRows:`repeat(${e.nextPieces[0].shape.length}, 8px)`},children:e.nextPieces[0].shape.map((m,g)=>m.map((w,k)=>l.jsx("div",{className:"w-2 h-2 rounded-sm",style:{backgroundColor:w?pr(e.nextPieces[0].color):"transparent",border:w?"1px solid rgba(255,255,255,0.3)":"none"},children:w&&e.nextPieces[0].emoji?l.jsx("span",{className:"text-[6px] leading-none block text-center",children:e.nextPieces[0].emoji}):null},`next-${k}-${g}`)))}):l.jsx("div",{className:"w-8 h-6 flex items-center justify-center",children:l.jsx("span",{className:"text-xs text-white/40",children:"?"})})})]})]}),l.jsxs("div",{className:"flex items-center justify-center flex-1 relative px-1",children:[l.jsxs("div",{className:"flex flex-col gap-1 mr-2",children:[l.jsx(T.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onTouchStart:()=>t.rotatePiece(),onClick:()=>t.rotatePiece(),disabled:e.gameOver,className:"bg-blue-500 text-white p-4 rounded-full shadow-lg hover:bg-blue-600 disabled:opacity-50 touch-manipulation text-lg",children:""}),l.jsx(T.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onTouchStart:()=>t.movePiece("left"),onClick:()=>t.movePiece("left"),disabled:e.gameOver,className:"bg-gray-600 text-white p-4 rounded-lg shadow-lg hover:bg-gray-700 disabled:opacity-50 touch-manipulation text-lg",children:""})]}),l.jsx("div",{className:"flex-shrink-0 mx-1",children:l.jsx(Vn,{board:e.board,currentPiece:e.currentPiece,dropPreview:o,gameOver:e.gameOver})}),l.jsxs("div",{className:"flex flex-col gap-1 ml-2",children:[l.jsx(T.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onTouchStart:u,onClick:u,disabled:e.gameOver||a.hardDrop,className:`text-white p-4 rounded-full shadow-lg disabled:opacity-50 touch-manipulation text-lg ${a.hardDrop?"bg-red-400":"bg-red-500 hover:bg-red-600"}`,children:""}),l.jsx(T.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onTouchStart:()=>t.movePiece("right"),onClick:()=>t.movePiece("right"),disabled:e.gameOver,className:"bg-gray-600 text-white p-4 rounded-lg shadow-lg hover:bg-gray-700 disabled:opacity-50 touch-manipulation text-lg",children:""})]})]}),l.jsxs("div",{className:"flex justify-center gap-2 py-2 px-2",children:[l.jsx(T.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onTouchStart:()=>t.movePiece("down"),onClick:()=>t.movePiece("down"),disabled:e.gameOver,className:"bg-gray-700 text-white px-4 py-2 rounded-lg shadow-lg hover:bg-gray-600 disabled:opacity-50 touch-manipulation",children:" Acelerar"}),e.canHold&&l.jsx(T.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onTouchStart:h,onClick:h,disabled:e.gameOver||!e.canHold||a.hold,className:`text-white px-4 py-2 rounded-lg shadow-lg disabled:opacity-50 touch-manipulation ${a.hold?"bg-green-400":e.canHold?"bg-green-600 hover:bg-green-500":"bg-gray-500"}`,children:" Guardar"}),l.jsx(T.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onTouchStart:d,onClick:d,disabled:e.gameOver||a.pause,className:`text-white px-4 py-2 rounded-lg shadow-lg disabled:opacity-50 touch-manipulation ${a.pause?"bg-yellow-400":"bg-yellow-500 hover:bg-yellow-600"}`,children:e.isPaused?"":""})]})]})]}),l.jsx(me,{children:e.gameOver&&l.jsx(aS,{score:e.score,onRestart:t.restart,onBackToMenu:n})}),l.jsx(Cb,{isConnected:r,controllerCount:s,gamepadInfo:i()})]})]})}function Ab(){const[e,t]=y.useState("menu"),[n,r]=y.useState(!1),[s,i]=y.useState(!1),[o,a]=y.useState(!1),[c,u]=y.useState(!1),[h,d]=y.useState(!1),[f,v]=y.useState(!1),[x,S]=y.useState(!1),[b,p]=y.useState(!1),[m,g]=y.useState(!1),[w,k]=y.useState(!0),[j,C]=y.useState(!1),[P,E]=y.useState(null),[A,H]=y.useState(null),[X,q]=y.useState(!1),{gameState:B,actions:G}=yb();ce.useEffect(()=>{Le.setGameStateProvider(()=>{try{return F.resolve("gameService").getGameState()}catch{return null}})},[]);const{settings:R,updateSettings:te}=xb(),{startBackgroundMusic:_,startGameMusic:M,stopMusic:I}=bb(),{isGamepadActive:V,controllerCount:Y,processGamepadInput:Qe,getGamepadInfo:Re}=kb(G);Yp(),Zp(),jb(),e0(),t0(),Sb();const ft=e==="game",{setDAS:$,setARR:J}=n0(G,B,ft);ce.useEffect(()=>{(R==null?void 0:R.das)!=null&&$(R.das),(R==null?void 0:R.arr)!=null&&J(R.arr)},[R==null?void 0:R.das,R==null?void 0:R.arr,$,J]),ce.useEffect(()=>{const Z=Ie=>{try{F.resolve("gameService").setGameMode(Ie.detail.mode)}catch{}};return window.addEventListener("gameModeChanged",Z),()=>window.removeEventListener("gameModeChanged",Z)},[]),ce.useEffect(()=>{B&&!B.gameOver&&B.score.points>0&&B.isPlaying?u(!0):u(!1)},[B]),ce.useEffect(()=>(_&&I&&(R!=null&&R.soundEnabled)?e==="menu"?_():e==="game"&&M():I(),()=>{I()}),[e,R==null?void 0:R.soundEnabled,_,M,I]),ce.useEffect(()=>{if(V&&e==="game"){const Z=setInterval(()=>{Qe()},16);return()=>clearInterval(Z)}},[V,e,Qe]),ce.useEffect(()=>{const Z=je=>{je.preventDefault(),a(!0)},Ie=()=>{a(!1),i(!1)};return window.addEventListener("beforeinstallprompt",Z),window.addEventListener("appinstalled",Ie),window.matchMedia("(display-mode: standalone)").matches&&a(!1),()=>{window.removeEventListener("beforeinstallprompt",Z),window.removeEventListener("appinstalled",Ie)}},[]);const ve=Z=>{te(Z),Z.das!=null&&$(Z.das),Z.arr!=null&&J(Z.arr),Z.soundEnabled?e==="menu"?_==null||_():e==="game"&&(M==null||M()):I==null||I()},K=()=>{t("game"),R!=null&&R.soundEnabled&&(M==null||M()),B!=null&&B.gameOver?G.restart():B!=null&&B.isPaused?G.resume():B!=null&&B.isPlaying||G.restart()},U=()=>{t("game"),R!=null&&R.soundEnabled&&(M==null||M()),B!=null&&B.isPaused&&G.resume()},He=()=>{t("game"),R!=null&&R.soundEnabled&&(M==null||M()),G.restart()},Ir=()=>{t("menu"),R!=null&&R.soundEnabled&&(_==null||_()),B&&!B.gameOver&&G.pause()},zs=()=>{i(!0)};return X?l.jsx(nb,{onClose:()=>q(!1)}):A?l.jsx(JS,{mode:A.mode,aiDifficulty:A.aiDifficulty,ai1Difficulty:A.ai1Difficulty,ai2Difficulty:A.ai2Difficulty,onExit:()=>{H(null),t("menu")}}):e==="menu"?l.jsxs(l.Fragment,{children:[l.jsx(WS,{onStartGame:c?U:K,onNewGame:He,onShowSettings:()=>r(!0),onShowGameModes:()=>p(!0),onShowShop:()=>S(!0),onShowMissions:()=>d(!0),onShowAchievements:()=>v(!0),onShowMultiplayer:()=>g(!0),onShowTutorial:()=>k(!0),onShowTutorialHub:()=>C(!0),onShowAIShowcase:()=>q(!0),onShowInstallPrompt:zs,canInstallPWA:o,hasActiveGame:c,gameState:B}),l.jsx(me,{children:m&&l.jsx(ab,{onClose:()=>g(!1),onStartMatch:Z=>{g(!1),H(Z)}})}),l.jsx(me,{children:b&&l.jsx(sb,{onClose:()=>p(!1),onStartGame:He})}),l.jsx(me,{children:x&&l.jsx(rb,{onClose:()=>S(!1)})}),l.jsx(me,{children:h&&l.jsx(QS,{onClose:()=>d(!1)})}),l.jsx(me,{children:f&&l.jsx(XS,{onClose:()=>v(!1)})}),l.jsx(me,{children:j&&l.jsx(gb,{tutorialService:F.resolve("tutorialService"),onClose:()=>C(!1),onLessonComplete:Z=>{if(!(!Z||!Z.rewards)){try{const Ie=F.resolve("currencyService");Z.rewards.fishCoins&&Ie.addFish(Z.rewards.fishCoins,`Tutorial: ${Z.lessonTitle||"Lesson"}`)}catch{}try{Z.rewards.xp&&F.resolve("playerStatsService").incrementStat("totalPlayTime",Z.rewards.xp)}catch{}try{if(Z.rewards.achievement){const Ie=F.resolve("achievementsService"),je=F.resolve("playerStatsService");Ie.checkAchievements(je.getStats())}}catch{}E(Z)}}})}),l.jsx(me,{children:l.jsx(y.Suspense,{fallback:l.jsx(Nb,{}),children:l.jsx(Eb,{isOpen:n,settings:R||{},onSettingsChange:ve,onClose:()=>r(!1)})})}),s&&l.jsx(KS,{onClose:()=>i(!1)}),l.jsx(YS,{}),l.jsx(me,{children:P&&l.jsx(vb,{reward:P,onClose:()=>E(null)})})]}):B?l.jsxs(l.Fragment,{children:[l.jsx(_b,{gameState:B,actions:G,onBackToMenu:Ir,isGamepadActive:V,controllerCount:Y,getGamepadInfo:Re}),l.jsx(me,{children:w&&l.jsx(lb,{onComplete:()=>k(!1)})})]}):l.jsx("div",{className:"h-screen cat-bg flex items-center justify-center overflow-hidden",children:l.jsx("div",{className:"text-white text-xl",children:"Carregando..."})})}function Mb(){return l.jsxs(dS,{children:[l.jsx(Ab,{}),l.jsx(qS,{}),l.jsx(Pb,{})]})}ba.createRoot(document.getElementById("root")).render(l.jsx(Mb,{}));export{me as A,l as j,T as m,y as r};
