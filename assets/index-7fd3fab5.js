var e0=Object.defineProperty;var t0=(e,t,n)=>t in e?e0(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var zs=(e,t,n)=>(t0(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function n0(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ch={exports:{}},io={},uh={exports:{}},W={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var As=Symbol.for("react.element"),r0=Symbol.for("react.portal"),s0=Symbol.for("react.fragment"),i0=Symbol.for("react.strict_mode"),o0=Symbol.for("react.profiler"),a0=Symbol.for("react.provider"),l0=Symbol.for("react.context"),c0=Symbol.for("react.forward_ref"),u0=Symbol.for("react.suspense"),d0=Symbol.for("react.memo"),h0=Symbol.for("react.lazy"),zc=Symbol.iterator;function f0(e){return e===null||typeof e!="object"?null:(e=zc&&e[zc]||e["@@iterator"],typeof e=="function"?e:null)}var dh={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},hh=Object.assign,fh={};function Ar(e,t,n){this.props=e,this.context=t,this.refs=fh,this.updater=n||dh}Ar.prototype.isReactComponent={};Ar.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ar.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function mh(){}mh.prototype=Ar.prototype;function Cl(e,t,n){this.props=e,this.context=t,this.refs=fh,this.updater=n||dh}var Pl=Cl.prototype=new mh;Pl.constructor=Cl;hh(Pl,Ar.prototype);Pl.isPureReactComponent=!0;var Hc=Array.isArray,ph=Object.prototype.hasOwnProperty,Tl={current:null},gh={key:!0,ref:!0,__self:!0,__source:!0};function vh(e,t,n){var r,s={},i=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)ph.call(t,r)&&!gh.hasOwnProperty(r)&&(s[r]=t[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var c=Array(a),u=0;u<a;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:As,type:e,key:i,ref:o,props:s,_owner:Tl.current}}function m0(e,t){return{$$typeof:As,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function El(e){return typeof e=="object"&&e!==null&&e.$$typeof===As}function p0(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Uc=/\/+/g;function _o(e,t){return typeof e=="object"&&e!==null&&e.key!=null?p0(""+e.key):t.toString(36)}function ui(e,t,n,r,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case As:case r0:o=!0}}if(o)return o=e,s=s(o),e=r===""?"."+_o(o,0):r,Hc(s)?(n="",e!=null&&(n=e.replace(Uc,"$&/")+"/"),ui(s,t,n,"",function(u){return u})):s!=null&&(El(s)&&(s=m0(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Uc,"$&/")+"/")+e)),t.push(s)),1;if(o=0,r=r===""?".":r+":",Hc(e))for(var a=0;a<e.length;a++){i=e[a];var c=r+_o(i,a);o+=ui(i,t,n,c,s)}else if(c=f0(e),typeof c=="function")for(e=c.call(e),a=0;!(i=e.next()).done;)i=i.value,c=r+_o(i,a++),o+=ui(i,t,n,c,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Hs(e,t,n){if(e==null)return e;var r=[],s=0;return ui(e,r,"","",function(i){return t.call(n,i,s++)}),r}function g0(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Be={current:null},di={transition:null},v0={ReactCurrentDispatcher:Be,ReactCurrentBatchConfig:di,ReactCurrentOwner:Tl};function yh(){throw Error("act(...) is not supported in production builds of React.")}W.Children={map:Hs,forEach:function(e,t,n){Hs(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Hs(e,function(){t++}),t},toArray:function(e){return Hs(e,function(t){return t})||[]},only:function(e){if(!El(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};W.Component=Ar;W.Fragment=s0;W.Profiler=o0;W.PureComponent=Cl;W.StrictMode=i0;W.Suspense=u0;W.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=v0;W.act=yh;W.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=hh({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=Tl.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(c in t)ph.call(t,c)&&!gh.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&a!==void 0?a[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var u=0;u<c;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:As,type:e.type,key:s,ref:i,props:r,_owner:o}};W.createContext=function(e){return e={$$typeof:l0,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:a0,_context:e},e.Consumer=e};W.createElement=vh;W.createFactory=function(e){var t=vh.bind(null,e);return t.type=e,t};W.createRef=function(){return{current:null}};W.forwardRef=function(e){return{$$typeof:c0,render:e}};W.isValidElement=El;W.lazy=function(e){return{$$typeof:h0,_payload:{_status:-1,_result:e},_init:g0}};W.memo=function(e,t){return{$$typeof:d0,type:e,compare:t===void 0?null:t}};W.startTransition=function(e){var t=di.transition;di.transition={};try{e()}finally{di.transition=t}};W.unstable_act=yh;W.useCallback=function(e,t){return Be.current.useCallback(e,t)};W.useContext=function(e){return Be.current.useContext(e)};W.useDebugValue=function(){};W.useDeferredValue=function(e){return Be.current.useDeferredValue(e)};W.useEffect=function(e,t){return Be.current.useEffect(e,t)};W.useId=function(){return Be.current.useId()};W.useImperativeHandle=function(e,t,n){return Be.current.useImperativeHandle(e,t,n)};W.useInsertionEffect=function(e,t){return Be.current.useInsertionEffect(e,t)};W.useLayoutEffect=function(e,t){return Be.current.useLayoutEffect(e,t)};W.useMemo=function(e,t){return Be.current.useMemo(e,t)};W.useReducer=function(e,t,n){return Be.current.useReducer(e,t,n)};W.useRef=function(e){return Be.current.useRef(e)};W.useState=function(e){return Be.current.useState(e)};W.useSyncExternalStore=function(e,t,n){return Be.current.useSyncExternalStore(e,t,n)};W.useTransition=function(){return Be.current.useTransition()};W.version="18.3.1";uh.exports=W;var y=uh.exports;const ce=n0(y);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y0=y,x0=Symbol.for("react.element"),w0=Symbol.for("react.fragment"),S0=Object.prototype.hasOwnProperty,b0=y0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,k0={key:!0,ref:!0,__self:!0,__source:!0};function xh(e,t,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)S0.call(t,r)&&!k0.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:x0,type:e,key:i,ref:o,props:s,_owner:b0.current}}io.Fragment=w0;io.jsx=xh;io.jsxs=xh;ch.exports=io;var l=ch.exports,xa={},wh={exports:{}},tt={},Sh={exports:{}},bh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(_,M){var O=_.length;_.push(M);e:for(;0<O;){var V=O-1>>>1,Y=_[V];if(0<s(Y,M))_[V]=M,_[O]=Y,O=V;else break e}}function n(_){return _.length===0?null:_[0]}function r(_){if(_.length===0)return null;var M=_[0],O=_.pop();if(O!==M){_[0]=O;e:for(var V=0,Y=_.length,Qe=Y>>>1;V<Qe;){var Re=2*(V+1)-1,ht=_[Re],$=Re+1,J=_[$];if(0>s(ht,O))$<Y&&0>s(J,ht)?(_[V]=J,_[$]=O,V=$):(_[V]=ht,_[Re]=O,V=Re);else if($<Y&&0>s(J,O))_[V]=J,_[$]=O,V=$;else break e}}return M}function s(_,M){var O=_.sortIndex-M.sortIndex;return O!==0?O:_.id-M.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var c=[],u=[],h=1,d=null,f=3,v=!1,x=!1,S=!1,b=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(_){for(var M=n(u);M!==null;){if(M.callback===null)r(u);else if(M.startTime<=_)r(u),M.sortIndex=M.expirationTime,t(c,M);else break;M=n(u)}}function w(_){if(S=!1,g(_),!x)if(n(c)!==null)x=!0,R(k);else{var M=n(u);M!==null&&te(w,M.startTime-_)}}function k(_,M){x=!1,S&&(S=!1,p(P),P=-1),v=!0;var O=f;try{for(g(M),d=n(c);d!==null&&(!(d.expirationTime>M)||_&&!H());){var V=d.callback;if(typeof V=="function"){d.callback=null,f=d.priorityLevel;var Y=V(d.expirationTime<=M);M=e.unstable_now(),typeof Y=="function"?d.callback=Y:d===n(c)&&r(c),g(M)}else r(c);d=n(c)}if(d!==null)var Qe=!0;else{var Re=n(u);Re!==null&&te(w,Re.startTime-M),Qe=!1}return Qe}finally{d=null,f=O,v=!1}}var j=!1,C=null,P=-1,E=5,A=-1;function H(){return!(e.unstable_now()-A<E)}function X(){if(C!==null){var _=e.unstable_now();A=_;var M=!0;try{M=C(!0,_)}finally{M?q():(j=!1,C=null)}}else j=!1}var q;if(typeof m=="function")q=function(){m(X)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,G=B.port2;B.port1.onmessage=X,q=function(){G.postMessage(null)}}else q=function(){b(X,0)};function R(_){C=_,j||(j=!0,q())}function te(_,M){P=b(function(){_(e.unstable_now())},M)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(_){_.callback=null},e.unstable_continueExecution=function(){x||v||(x=!0,R(k))},e.unstable_forceFrameRate=function(_){0>_||125<_?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<_?Math.floor(1e3/_):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(_){switch(f){case 1:case 2:case 3:var M=3;break;default:M=f}var O=f;f=M;try{return _()}finally{f=O}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(_,M){switch(_){case 1:case 2:case 3:case 4:case 5:break;default:_=3}var O=f;f=_;try{return M()}finally{f=O}},e.unstable_scheduleCallback=function(_,M,O){var V=e.unstable_now();switch(typeof O=="object"&&O!==null?(O=O.delay,O=typeof O=="number"&&0<O?V+O:V):O=V,_){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=O+Y,_={id:h++,callback:M,priorityLevel:_,startTime:O,expirationTime:Y,sortIndex:-1},O>V?(_.sortIndex=O,t(u,_),n(c)===null&&_===n(u)&&(S?(p(P),P=-1):S=!0,te(w,O-V))):(_.sortIndex=Y,t(c,_),x||v||(x=!0,R(k))),_},e.unstable_shouldYield=H,e.unstable_wrapCallback=function(_){var M=f;return function(){var O=f;f=M;try{return _.apply(this,arguments)}finally{f=O}}}})(bh);Sh.exports=bh;var j0=Sh.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C0=y,Ze=j0;function N(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var kh=new Set,ds={};function Bn(e,t){pr(e,t),pr(e+"Capture",t)}function pr(e,t){for(ds[e]=t,e=0;e<t.length;e++)kh.add(t[e])}var Ft=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wa=Object.prototype.hasOwnProperty,P0=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Gc={},$c={};function T0(e){return wa.call($c,e)?!0:wa.call(Gc,e)?!1:P0.test(e)?$c[e]=!0:(Gc[e]=!0,!1)}function E0(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function N0(e,t,n,r){if(t===null||typeof t>"u"||E0(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ze(e,t,n,r,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var Te={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Te[e]=new ze(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Te[t]=new ze(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Te[e]=new ze(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Te[e]=new ze(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Te[e]=new ze(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Te[e]=new ze(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Te[e]=new ze(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Te[e]=new ze(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Te[e]=new ze(e,5,!1,e.toLowerCase(),null,!1,!1)});var Nl=/[\-:]([a-z])/g;function _l(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Nl,_l);Te[t]=new ze(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Nl,_l);Te[t]=new ze(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Nl,_l);Te[t]=new ze(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Te[e]=new ze(e,1,!1,e.toLowerCase(),null,!1,!1)});Te.xlinkHref=new ze("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Te[e]=new ze(e,1,!1,e.toLowerCase(),null,!0,!0)});function Al(e,t,n,r){var s=Te.hasOwnProperty(t)?Te[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(N0(t,n,s,r)&&(n=null),r||s===null?T0(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Ut=C0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Us=Symbol.for("react.element"),$n=Symbol.for("react.portal"),Wn=Symbol.for("react.fragment"),Ml=Symbol.for("react.strict_mode"),Sa=Symbol.for("react.profiler"),jh=Symbol.for("react.provider"),Ch=Symbol.for("react.context"),Ll=Symbol.for("react.forward_ref"),ba=Symbol.for("react.suspense"),ka=Symbol.for("react.suspense_list"),Dl=Symbol.for("react.memo"),Kt=Symbol.for("react.lazy"),Ph=Symbol.for("react.offscreen"),Wc=Symbol.iterator;function Ir(e){return e===null||typeof e!="object"?null:(e=Wc&&e[Wc]||e["@@iterator"],typeof e=="function"?e:null)}var he=Object.assign,Ao;function Wr(e){if(Ao===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Ao=t&&t[1]||""}return`
`+Ao+e}var Mo=!1;function Lo(e,t){if(!e||Mo)return"";Mo=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var c=`
`+s[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=a);break}}}finally{Mo=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Wr(e):""}function _0(e){switch(e.tag){case 5:return Wr(e.type);case 16:return Wr("Lazy");case 13:return Wr("Suspense");case 19:return Wr("SuspenseList");case 0:case 2:case 15:return e=Lo(e.type,!1),e;case 11:return e=Lo(e.type.render,!1),e;case 1:return e=Lo(e.type,!0),e;default:return""}}function ja(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Wn:return"Fragment";case $n:return"Portal";case Sa:return"Profiler";case Ml:return"StrictMode";case ba:return"Suspense";case ka:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Ch:return(e.displayName||"Context")+".Consumer";case jh:return(e._context.displayName||"Context")+".Provider";case Ll:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Dl:return t=e.displayName||null,t!==null?t:ja(e.type)||"Memo";case Kt:t=e._payload,e=e._init;try{return ja(e(t))}catch{}}return null}function A0(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ja(t);case 8:return t===Ml?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function dn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Th(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function M0(e){var t=Th(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Gs(e){e._valueTracker||(e._valueTracker=M0(e))}function Eh(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Th(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Ci(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ca(e,t){var n=t.checked;return he({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Kc(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=dn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Nh(e,t){t=t.checked,t!=null&&Al(e,"checked",t,!1)}function Pa(e,t){Nh(e,t);var n=dn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Ta(e,t.type,n):t.hasOwnProperty("defaultValue")&&Ta(e,t.type,dn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function qc(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Ta(e,t,n){(t!=="number"||Ci(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Kr=Array.isArray;function lr(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+dn(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Ea(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(N(91));return he({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Qc(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(N(92));if(Kr(n)){if(1<n.length)throw Error(N(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:dn(n)}}function _h(e,t){var n=dn(t.value),r=dn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Xc(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Ah(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Na(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Ah(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var $s,Mh=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for($s=$s||document.createElement("div"),$s.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=$s.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function hs(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Yr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},L0=["Webkit","ms","Moz","O"];Object.keys(Yr).forEach(function(e){L0.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Yr[t]=Yr[e]})});function Lh(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Yr.hasOwnProperty(e)&&Yr[e]?(""+t).trim():t+"px"}function Dh(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Lh(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var D0=he({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _a(e,t){if(t){if(D0[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(N(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(N(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(N(61))}if(t.style!=null&&typeof t.style!="object")throw Error(N(62))}}function Aa(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ma=null;function Rl(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var La=null,cr=null,ur=null;function Yc(e){if(e=Ds(e)){if(typeof La!="function")throw Error(N(280));var t=e.stateNode;t&&(t=uo(t),La(e.stateNode,e.type,t))}}function Rh(e){cr?ur?ur.push(e):ur=[e]:cr=e}function Ih(){if(cr){var e=cr,t=ur;if(ur=cr=null,Yc(e),t)for(e=0;e<t.length;e++)Yc(t[e])}}function Oh(e,t){return e(t)}function Fh(){}var Do=!1;function Vh(e,t,n){if(Do)return e(t,n);Do=!0;try{return Oh(e,t,n)}finally{Do=!1,(cr!==null||ur!==null)&&(Fh(),Ih())}}function fs(e,t){var n=e.stateNode;if(n===null)return null;var r=uo(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(N(231,t,typeof n));return n}var Da=!1;if(Ft)try{var Or={};Object.defineProperty(Or,"passive",{get:function(){Da=!0}}),window.addEventListener("test",Or,Or),window.removeEventListener("test",Or,Or)}catch{Da=!1}function R0(e,t,n,r,s,i,o,a,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(h){this.onError(h)}}var Jr=!1,Pi=null,Ti=!1,Ra=null,I0={onError:function(e){Jr=!0,Pi=e}};function O0(e,t,n,r,s,i,o,a,c){Jr=!1,Pi=null,R0.apply(I0,arguments)}function F0(e,t,n,r,s,i,o,a,c){if(O0.apply(this,arguments),Jr){if(Jr){var u=Pi;Jr=!1,Pi=null}else throw Error(N(198));Ti||(Ti=!0,Ra=u)}}function zn(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Bh(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Jc(e){if(zn(e)!==e)throw Error(N(188))}function V0(e){var t=e.alternate;if(!t){if(t=zn(e),t===null)throw Error(N(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Jc(s),e;if(i===r)return Jc(s),t;i=i.sibling}throw Error(N(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(N(189))}}if(n.alternate!==r)throw Error(N(190))}if(n.tag!==3)throw Error(N(188));return n.stateNode.current===n?e:t}function zh(e){return e=V0(e),e!==null?Hh(e):null}function Hh(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Hh(e);if(t!==null)return t;e=e.sibling}return null}var Uh=Ze.unstable_scheduleCallback,Zc=Ze.unstable_cancelCallback,B0=Ze.unstable_shouldYield,z0=Ze.unstable_requestPaint,ge=Ze.unstable_now,H0=Ze.unstable_getCurrentPriorityLevel,Il=Ze.unstable_ImmediatePriority,Gh=Ze.unstable_UserBlockingPriority,Ei=Ze.unstable_NormalPriority,U0=Ze.unstable_LowPriority,$h=Ze.unstable_IdlePriority,oo=null,Ct=null;function G0(e){if(Ct&&typeof Ct.onCommitFiberRoot=="function")try{Ct.onCommitFiberRoot(oo,e,void 0,(e.current.flags&128)===128)}catch{}}var yt=Math.clz32?Math.clz32:K0,$0=Math.log,W0=Math.LN2;function K0(e){return e>>>=0,e===0?32:31-($0(e)/W0|0)|0}var Ws=64,Ks=4194304;function qr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ni(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=qr(a):(i&=o,i!==0&&(r=qr(i)))}else o=n&~s,o!==0?r=qr(o):i!==0&&(r=qr(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-yt(t),s=1<<n,r|=e[n],t&=~s;return r}function q0(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Q0(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-yt(i),a=1<<o,c=s[o];c===-1?(!(a&n)||a&r)&&(s[o]=q0(a,t)):c<=t&&(e.expiredLanes|=a),i&=~a}}function Ia(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Wh(){var e=Ws;return Ws<<=1,!(Ws&4194240)&&(Ws=64),e}function Ro(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ms(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-yt(t),e[t]=n}function X0(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-yt(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}function Ol(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-yt(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var ee=0;function Kh(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var qh,Fl,Qh,Xh,Yh,Oa=!1,qs=[],en=null,tn=null,nn=null,ms=new Map,ps=new Map,Xt=[],Y0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function eu(e,t){switch(e){case"focusin":case"focusout":en=null;break;case"dragenter":case"dragleave":tn=null;break;case"mouseover":case"mouseout":nn=null;break;case"pointerover":case"pointerout":ms.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ps.delete(t.pointerId)}}function Fr(e,t,n,r,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},t!==null&&(t=Ds(t),t!==null&&Fl(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function J0(e,t,n,r,s){switch(t){case"focusin":return en=Fr(en,e,t,n,r,s),!0;case"dragenter":return tn=Fr(tn,e,t,n,r,s),!0;case"mouseover":return nn=Fr(nn,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return ms.set(i,Fr(ms.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,ps.set(i,Fr(ps.get(i)||null,e,t,n,r,s)),!0}return!1}function Jh(e){var t=Pn(e.target);if(t!==null){var n=zn(t);if(n!==null){if(t=n.tag,t===13){if(t=Bh(n),t!==null){e.blockedOn=t,Yh(e.priority,function(){Qh(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function hi(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Fa(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Ma=r,n.target.dispatchEvent(r),Ma=null}else return t=Ds(n),t!==null&&Fl(t),e.blockedOn=n,!1;t.shift()}return!0}function tu(e,t,n){hi(e)&&n.delete(t)}function Z0(){Oa=!1,en!==null&&hi(en)&&(en=null),tn!==null&&hi(tn)&&(tn=null),nn!==null&&hi(nn)&&(nn=null),ms.forEach(tu),ps.forEach(tu)}function Vr(e,t){e.blockedOn===t&&(e.blockedOn=null,Oa||(Oa=!0,Ze.unstable_scheduleCallback(Ze.unstable_NormalPriority,Z0)))}function gs(e){function t(s){return Vr(s,e)}if(0<qs.length){Vr(qs[0],e);for(var n=1;n<qs.length;n++){var r=qs[n];r.blockedOn===e&&(r.blockedOn=null)}}for(en!==null&&Vr(en,e),tn!==null&&Vr(tn,e),nn!==null&&Vr(nn,e),ms.forEach(t),ps.forEach(t),n=0;n<Xt.length;n++)r=Xt[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Xt.length&&(n=Xt[0],n.blockedOn===null);)Jh(n),n.blockedOn===null&&Xt.shift()}var dr=Ut.ReactCurrentBatchConfig,_i=!0;function eg(e,t,n,r){var s=ee,i=dr.transition;dr.transition=null;try{ee=1,Vl(e,t,n,r)}finally{ee=s,dr.transition=i}}function tg(e,t,n,r){var s=ee,i=dr.transition;dr.transition=null;try{ee=4,Vl(e,t,n,r)}finally{ee=s,dr.transition=i}}function Vl(e,t,n,r){if(_i){var s=Fa(e,t,n,r);if(s===null)$o(e,t,r,Ai,n),eu(e,r);else if(J0(s,e,t,n,r))r.stopPropagation();else if(eu(e,r),t&4&&-1<Y0.indexOf(e)){for(;s!==null;){var i=Ds(s);if(i!==null&&qh(i),i=Fa(e,t,n,r),i===null&&$o(e,t,r,Ai,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else $o(e,t,r,null,n)}}var Ai=null;function Fa(e,t,n,r){if(Ai=null,e=Rl(r),e=Pn(e),e!==null)if(t=zn(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Bh(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ai=e,null}function Zh(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(H0()){case Il:return 1;case Gh:return 4;case Ei:case U0:return 16;case $h:return 536870912;default:return 16}default:return 16}}var Jt=null,Bl=null,fi=null;function ef(){if(fi)return fi;var e,t=Bl,n=t.length,r,s="value"in Jt?Jt.value:Jt.textContent,i=s.length;for(e=0;e<n&&t[e]===s[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===s[i-r];r++);return fi=s.slice(e,1<r?1-r:void 0)}function mi(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Qs(){return!0}function nu(){return!1}function nt(e){function t(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Qs:nu,this.isPropagationStopped=nu,this}return he(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Qs)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Qs)},persist:function(){},isPersistent:Qs}),t}var Mr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zl=nt(Mr),Ls=he({},Mr,{view:0,detail:0}),ng=nt(Ls),Io,Oo,Br,ao=he({},Ls,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hl,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Br&&(Br&&e.type==="mousemove"?(Io=e.screenX-Br.screenX,Oo=e.screenY-Br.screenY):Oo=Io=0,Br=e),Io)},movementY:function(e){return"movementY"in e?e.movementY:Oo}}),ru=nt(ao),rg=he({},ao,{dataTransfer:0}),sg=nt(rg),ig=he({},Ls,{relatedTarget:0}),Fo=nt(ig),og=he({},Mr,{animationName:0,elapsedTime:0,pseudoElement:0}),ag=nt(og),lg=he({},Mr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),cg=nt(lg),ug=he({},Mr,{data:0}),su=nt(ug),dg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function mg(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=fg[e])?!!t[e]:!1}function Hl(){return mg}var pg=he({},Ls,{key:function(e){if(e.key){var t=dg[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=mi(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?hg[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hl,charCode:function(e){return e.type==="keypress"?mi(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?mi(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),gg=nt(pg),vg=he({},ao,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),iu=nt(vg),yg=he({},Ls,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hl}),xg=nt(yg),wg=he({},Mr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Sg=nt(wg),bg=he({},ao,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),kg=nt(bg),jg=[9,13,27,32],Ul=Ft&&"CompositionEvent"in window,Zr=null;Ft&&"documentMode"in document&&(Zr=document.documentMode);var Cg=Ft&&"TextEvent"in window&&!Zr,tf=Ft&&(!Ul||Zr&&8<Zr&&11>=Zr),ou=String.fromCharCode(32),au=!1;function nf(e,t){switch(e){case"keyup":return jg.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rf(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Kn=!1;function Pg(e,t){switch(e){case"compositionend":return rf(t);case"keypress":return t.which!==32?null:(au=!0,ou);case"textInput":return e=t.data,e===ou&&au?null:e;default:return null}}function Tg(e,t){if(Kn)return e==="compositionend"||!Ul&&nf(e,t)?(e=ef(),fi=Bl=Jt=null,Kn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return tf&&t.locale!=="ko"?null:t.data;default:return null}}var Eg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function lu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Eg[e.type]:t==="textarea"}function sf(e,t,n,r){Rh(r),t=Mi(t,"onChange"),0<t.length&&(n=new zl("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var es=null,vs=null;function Ng(e){gf(e,0)}function lo(e){var t=Xn(e);if(Eh(t))return e}function _g(e,t){if(e==="change")return t}var of=!1;if(Ft){var Vo;if(Ft){var Bo="oninput"in document;if(!Bo){var cu=document.createElement("div");cu.setAttribute("oninput","return;"),Bo=typeof cu.oninput=="function"}Vo=Bo}else Vo=!1;of=Vo&&(!document.documentMode||9<document.documentMode)}function uu(){es&&(es.detachEvent("onpropertychange",af),vs=es=null)}function af(e){if(e.propertyName==="value"&&lo(vs)){var t=[];sf(t,vs,e,Rl(e)),Vh(Ng,t)}}function Ag(e,t,n){e==="focusin"?(uu(),es=t,vs=n,es.attachEvent("onpropertychange",af)):e==="focusout"&&uu()}function Mg(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return lo(vs)}function Lg(e,t){if(e==="click")return lo(t)}function Dg(e,t){if(e==="input"||e==="change")return lo(t)}function Rg(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var wt=typeof Object.is=="function"?Object.is:Rg;function ys(e,t){if(wt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!wa.call(t,s)||!wt(e[s],t[s]))return!1}return!0}function du(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function hu(e,t){var n=du(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=du(n)}}function lf(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?lf(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function cf(){for(var e=window,t=Ci();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Ci(e.document)}return t}function Gl(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Ig(e){var t=cf(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&lf(n.ownerDocument.documentElement,n)){if(r!==null&&Gl(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=hu(n,i);var o=hu(n,r);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Og=Ft&&"documentMode"in document&&11>=document.documentMode,qn=null,Va=null,ts=null,Ba=!1;function fu(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ba||qn==null||qn!==Ci(r)||(r=qn,"selectionStart"in r&&Gl(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ts&&ys(ts,r)||(ts=r,r=Mi(Va,"onSelect"),0<r.length&&(t=new zl("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=qn)))}function Xs(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Qn={animationend:Xs("Animation","AnimationEnd"),animationiteration:Xs("Animation","AnimationIteration"),animationstart:Xs("Animation","AnimationStart"),transitionend:Xs("Transition","TransitionEnd")},zo={},uf={};Ft&&(uf=document.createElement("div").style,"AnimationEvent"in window||(delete Qn.animationend.animation,delete Qn.animationiteration.animation,delete Qn.animationstart.animation),"TransitionEvent"in window||delete Qn.transitionend.transition);function co(e){if(zo[e])return zo[e];if(!Qn[e])return e;var t=Qn[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in uf)return zo[e]=t[n];return e}var df=co("animationend"),hf=co("animationiteration"),ff=co("animationstart"),mf=co("transitionend"),pf=new Map,mu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function pn(e,t){pf.set(e,t),Bn(t,[e])}for(var Ho=0;Ho<mu.length;Ho++){var Uo=mu[Ho],Fg=Uo.toLowerCase(),Vg=Uo[0].toUpperCase()+Uo.slice(1);pn(Fg,"on"+Vg)}pn(df,"onAnimationEnd");pn(hf,"onAnimationIteration");pn(ff,"onAnimationStart");pn("dblclick","onDoubleClick");pn("focusin","onFocus");pn("focusout","onBlur");pn(mf,"onTransitionEnd");pr("onMouseEnter",["mouseout","mouseover"]);pr("onMouseLeave",["mouseout","mouseover"]);pr("onPointerEnter",["pointerout","pointerover"]);pr("onPointerLeave",["pointerout","pointerover"]);Bn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Bn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Bn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Bn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Bn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Bn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Bg=new Set("cancel close invalid load scroll toggle".split(" ").concat(Qr));function pu(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,F0(r,t,void 0,e),e.currentTarget=null}function gf(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,u=a.currentTarget;if(a=a.listener,c!==i&&s.isPropagationStopped())break e;pu(s,a,u),i=c}else for(o=0;o<r.length;o++){if(a=r[o],c=a.instance,u=a.currentTarget,a=a.listener,c!==i&&s.isPropagationStopped())break e;pu(s,a,u),i=c}}}if(Ti)throw e=Ra,Ti=!1,Ra=null,e}function se(e,t){var n=t[$a];n===void 0&&(n=t[$a]=new Set);var r=e+"__bubble";n.has(r)||(vf(t,e,2,!1),n.add(r))}function Go(e,t,n){var r=0;t&&(r|=4),vf(n,e,r,t)}var Ys="_reactListening"+Math.random().toString(36).slice(2);function xs(e){if(!e[Ys]){e[Ys]=!0,kh.forEach(function(n){n!=="selectionchange"&&(Bg.has(n)||Go(n,!1,e),Go(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ys]||(t[Ys]=!0,Go("selectionchange",!1,t))}}function vf(e,t,n,r){switch(Zh(t)){case 1:var s=eg;break;case 4:s=tg;break;default:s=Vl}n=s.bind(null,t,n,e),s=void 0,!Da||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function $o(e,t,n,r,s){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Pn(a),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}a=a.parentNode}}r=r.return}Vh(function(){var u=i,h=Rl(n),d=[];e:{var f=pf.get(e);if(f!==void 0){var v=zl,x=e;switch(e){case"keypress":if(mi(n)===0)break e;case"keydown":case"keyup":v=gg;break;case"focusin":x="focus",v=Fo;break;case"focusout":x="blur",v=Fo;break;case"beforeblur":case"afterblur":v=Fo;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=ru;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=sg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=xg;break;case df:case hf:case ff:v=ag;break;case mf:v=Sg;break;case"scroll":v=ng;break;case"wheel":v=kg;break;case"copy":case"cut":case"paste":v=cg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=iu}var S=(t&4)!==0,b=!S&&e==="scroll",p=S?f!==null?f+"Capture":null:f;S=[];for(var m=u,g;m!==null;){g=m;var w=g.stateNode;if(g.tag===5&&w!==null&&(g=w,p!==null&&(w=fs(m,p),w!=null&&S.push(ws(m,w,g)))),b)break;m=m.return}0<S.length&&(f=new v(f,x,null,n,h),d.push({event:f,listeners:S}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",v=e==="mouseout"||e==="pointerout",f&&n!==Ma&&(x=n.relatedTarget||n.fromElement)&&(Pn(x)||x[Vt]))break e;if((v||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,v?(x=n.relatedTarget||n.toElement,v=u,x=x?Pn(x):null,x!==null&&(b=zn(x),x!==b||x.tag!==5&&x.tag!==6)&&(x=null)):(v=null,x=u),v!==x)){if(S=ru,w="onMouseLeave",p="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(S=iu,w="onPointerLeave",p="onPointerEnter",m="pointer"),b=v==null?f:Xn(v),g=x==null?f:Xn(x),f=new S(w,m+"leave",v,n,h),f.target=b,f.relatedTarget=g,w=null,Pn(h)===u&&(S=new S(p,m+"enter",x,n,h),S.target=g,S.relatedTarget=b,w=S),b=w,v&&x)t:{for(S=v,p=x,m=0,g=S;g;g=Gn(g))m++;for(g=0,w=p;w;w=Gn(w))g++;for(;0<m-g;)S=Gn(S),m--;for(;0<g-m;)p=Gn(p),g--;for(;m--;){if(S===p||p!==null&&S===p.alternate)break t;S=Gn(S),p=Gn(p)}S=null}else S=null;v!==null&&gu(d,f,v,S,!1),x!==null&&b!==null&&gu(d,b,x,S,!0)}}e:{if(f=u?Xn(u):window,v=f.nodeName&&f.nodeName.toLowerCase(),v==="select"||v==="input"&&f.type==="file")var k=_g;else if(lu(f))if(of)k=Dg;else{k=Mg;var j=Ag}else(v=f.nodeName)&&v.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(k=Lg);if(k&&(k=k(e,u))){sf(d,k,n,h);break e}j&&j(e,f,u),e==="focusout"&&(j=f._wrapperState)&&j.controlled&&f.type==="number"&&Ta(f,"number",f.value)}switch(j=u?Xn(u):window,e){case"focusin":(lu(j)||j.contentEditable==="true")&&(qn=j,Va=u,ts=null);break;case"focusout":ts=Va=qn=null;break;case"mousedown":Ba=!0;break;case"contextmenu":case"mouseup":case"dragend":Ba=!1,fu(d,n,h);break;case"selectionchange":if(Og)break;case"keydown":case"keyup":fu(d,n,h)}var C;if(Ul)e:{switch(e){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else Kn?nf(e,n)&&(P="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(P="onCompositionStart");P&&(tf&&n.locale!=="ko"&&(Kn||P!=="onCompositionStart"?P==="onCompositionEnd"&&Kn&&(C=ef()):(Jt=h,Bl="value"in Jt?Jt.value:Jt.textContent,Kn=!0)),j=Mi(u,P),0<j.length&&(P=new su(P,e,null,n,h),d.push({event:P,listeners:j}),C?P.data=C:(C=rf(n),C!==null&&(P.data=C)))),(C=Cg?Pg(e,n):Tg(e,n))&&(u=Mi(u,"onBeforeInput"),0<u.length&&(h=new su("onBeforeInput","beforeinput",null,n,h),d.push({event:h,listeners:u}),h.data=C))}gf(d,t)})}function ws(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Mi(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=fs(e,n),i!=null&&r.unshift(ws(e,i,s)),i=fs(e,t),i!=null&&r.push(ws(e,i,s))),e=e.return}return r}function Gn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function gu(e,t,n,r,s){for(var i=t._reactName,o=[];n!==null&&n!==r;){var a=n,c=a.alternate,u=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&u!==null&&(a=u,s?(c=fs(n,i),c!=null&&o.unshift(ws(n,c,a))):s||(c=fs(n,i),c!=null&&o.push(ws(n,c,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var zg=/\r\n?/g,Hg=/\u0000|\uFFFD/g;function vu(e){return(typeof e=="string"?e:""+e).replace(zg,`
`).replace(Hg,"")}function Js(e,t,n){if(t=vu(t),vu(e)!==t&&n)throw Error(N(425))}function Li(){}var za=null,Ha=null;function Ua(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ga=typeof setTimeout=="function"?setTimeout:void 0,Ug=typeof clearTimeout=="function"?clearTimeout:void 0,yu=typeof Promise=="function"?Promise:void 0,Gg=typeof queueMicrotask=="function"?queueMicrotask:typeof yu<"u"?function(e){return yu.resolve(null).then(e).catch($g)}:Ga;function $g(e){setTimeout(function(){throw e})}function Wo(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),gs(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);gs(t)}function rn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function xu(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Lr=Math.random().toString(36).slice(2),jt="__reactFiber$"+Lr,Ss="__reactProps$"+Lr,Vt="__reactContainer$"+Lr,$a="__reactEvents$"+Lr,Wg="__reactListeners$"+Lr,Kg="__reactHandles$"+Lr;function Pn(e){var t=e[jt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Vt]||n[jt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=xu(e);e!==null;){if(n=e[jt])return n;e=xu(e)}return t}e=n,n=e.parentNode}return null}function Ds(e){return e=e[jt]||e[Vt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Xn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(N(33))}function uo(e){return e[Ss]||null}var Wa=[],Yn=-1;function gn(e){return{current:e}}function ie(e){0>Yn||(e.current=Wa[Yn],Wa[Yn]=null,Yn--)}function ne(e,t){Yn++,Wa[Yn]=e.current,e.current=t}var hn={},De=gn(hn),$e=gn(!1),Ln=hn;function gr(e,t){var n=e.type.contextTypes;if(!n)return hn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function We(e){return e=e.childContextTypes,e!=null}function Di(){ie($e),ie(De)}function wu(e,t,n){if(De.current!==hn)throw Error(N(168));ne(De,t),ne($e,n)}function yf(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(N(108,A0(e)||"Unknown",s));return he({},n,r)}function Ri(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||hn,Ln=De.current,ne(De,e),ne($e,$e.current),!0}function Su(e,t,n){var r=e.stateNode;if(!r)throw Error(N(169));n?(e=yf(e,t,Ln),r.__reactInternalMemoizedMergedChildContext=e,ie($e),ie(De),ne(De,e)):ie($e),ne($e,n)}var Nt=null,ho=!1,Ko=!1;function xf(e){Nt===null?Nt=[e]:Nt.push(e)}function qg(e){ho=!0,xf(e)}function vn(){if(!Ko&&Nt!==null){Ko=!0;var e=0,t=ee;try{var n=Nt;for(ee=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Nt=null,ho=!1}catch(s){throw Nt!==null&&(Nt=Nt.slice(e+1)),Uh(Il,vn),s}finally{ee=t,Ko=!1}}return null}var Jn=[],Zn=0,Ii=null,Oi=0,ot=[],at=0,Dn=null,At=1,Mt="";function Sn(e,t){Jn[Zn++]=Oi,Jn[Zn++]=Ii,Ii=e,Oi=t}function wf(e,t,n){ot[at++]=At,ot[at++]=Mt,ot[at++]=Dn,Dn=e;var r=At;e=Mt;var s=32-yt(r)-1;r&=~(1<<s),n+=1;var i=32-yt(t)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,At=1<<32-yt(t)+s|n<<s|r,Mt=i+e}else At=1<<i|n<<s|r,Mt=e}function $l(e){e.return!==null&&(Sn(e,1),wf(e,1,0))}function Wl(e){for(;e===Ii;)Ii=Jn[--Zn],Jn[Zn]=null,Oi=Jn[--Zn],Jn[Zn]=null;for(;e===Dn;)Dn=ot[--at],ot[at]=null,Mt=ot[--at],ot[at]=null,At=ot[--at],ot[at]=null}var Je=null,Ye=null,ae=!1,vt=null;function Sf(e,t){var n=lt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function bu(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Je=e,Ye=rn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Je=e,Ye=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Dn!==null?{id:At,overflow:Mt}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=lt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Je=e,Ye=null,!0):!1;default:return!1}}function Ka(e){return(e.mode&1)!==0&&(e.flags&128)===0}function qa(e){if(ae){var t=Ye;if(t){var n=t;if(!bu(e,t)){if(Ka(e))throw Error(N(418));t=rn(n.nextSibling);var r=Je;t&&bu(e,t)?Sf(r,n):(e.flags=e.flags&-4097|2,ae=!1,Je=e)}}else{if(Ka(e))throw Error(N(418));e.flags=e.flags&-4097|2,ae=!1,Je=e}}}function ku(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Je=e}function Zs(e){if(e!==Je)return!1;if(!ae)return ku(e),ae=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Ua(e.type,e.memoizedProps)),t&&(t=Ye)){if(Ka(e))throw bf(),Error(N(418));for(;t;)Sf(e,t),t=rn(t.nextSibling)}if(ku(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(N(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Ye=rn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Ye=null}}else Ye=Je?rn(e.stateNode.nextSibling):null;return!0}function bf(){for(var e=Ye;e;)e=rn(e.nextSibling)}function vr(){Ye=Je=null,ae=!1}function Kl(e){vt===null?vt=[e]:vt.push(e)}var Qg=Ut.ReactCurrentBatchConfig;function zr(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(N(309));var r=n.stateNode}if(!r)throw Error(N(147,e));var s=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(N(284));if(!n._owner)throw Error(N(290,e))}return e}function ei(e,t){throw e=Object.prototype.toString.call(t),Error(N(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ju(e){var t=e._init;return t(e._payload)}function kf(e){function t(p,m){if(e){var g=p.deletions;g===null?(p.deletions=[m],p.flags|=16):g.push(m)}}function n(p,m){if(!e)return null;for(;m!==null;)t(p,m),m=m.sibling;return null}function r(p,m){for(p=new Map;m!==null;)m.key!==null?p.set(m.key,m):p.set(m.index,m),m=m.sibling;return p}function s(p,m){return p=ln(p,m),p.index=0,p.sibling=null,p}function i(p,m,g){return p.index=g,e?(g=p.alternate,g!==null?(g=g.index,g<m?(p.flags|=2,m):g):(p.flags|=2,m)):(p.flags|=1048576,m)}function o(p){return e&&p.alternate===null&&(p.flags|=2),p}function a(p,m,g,w){return m===null||m.tag!==6?(m=ea(g,p.mode,w),m.return=p,m):(m=s(m,g),m.return=p,m)}function c(p,m,g,w){var k=g.type;return k===Wn?h(p,m,g.props.children,w,g.key):m!==null&&(m.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Kt&&ju(k)===m.type)?(w=s(m,g.props),w.ref=zr(p,m,g),w.return=p,w):(w=Si(g.type,g.key,g.props,null,p.mode,w),w.ref=zr(p,m,g),w.return=p,w)}function u(p,m,g,w){return m===null||m.tag!==4||m.stateNode.containerInfo!==g.containerInfo||m.stateNode.implementation!==g.implementation?(m=ta(g,p.mode,w),m.return=p,m):(m=s(m,g.children||[]),m.return=p,m)}function h(p,m,g,w,k){return m===null||m.tag!==7?(m=Mn(g,p.mode,w,k),m.return=p,m):(m=s(m,g),m.return=p,m)}function d(p,m,g){if(typeof m=="string"&&m!==""||typeof m=="number")return m=ea(""+m,p.mode,g),m.return=p,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Us:return g=Si(m.type,m.key,m.props,null,p.mode,g),g.ref=zr(p,null,m),g.return=p,g;case $n:return m=ta(m,p.mode,g),m.return=p,m;case Kt:var w=m._init;return d(p,w(m._payload),g)}if(Kr(m)||Ir(m))return m=Mn(m,p.mode,g,null),m.return=p,m;ei(p,m)}return null}function f(p,m,g,w){var k=m!==null?m.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return k!==null?null:a(p,m,""+g,w);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Us:return g.key===k?c(p,m,g,w):null;case $n:return g.key===k?u(p,m,g,w):null;case Kt:return k=g._init,f(p,m,k(g._payload),w)}if(Kr(g)||Ir(g))return k!==null?null:h(p,m,g,w,null);ei(p,g)}return null}function v(p,m,g,w,k){if(typeof w=="string"&&w!==""||typeof w=="number")return p=p.get(g)||null,a(m,p,""+w,k);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Us:return p=p.get(w.key===null?g:w.key)||null,c(m,p,w,k);case $n:return p=p.get(w.key===null?g:w.key)||null,u(m,p,w,k);case Kt:var j=w._init;return v(p,m,g,j(w._payload),k)}if(Kr(w)||Ir(w))return p=p.get(g)||null,h(m,p,w,k,null);ei(m,w)}return null}function x(p,m,g,w){for(var k=null,j=null,C=m,P=m=0,E=null;C!==null&&P<g.length;P++){C.index>P?(E=C,C=null):E=C.sibling;var A=f(p,C,g[P],w);if(A===null){C===null&&(C=E);break}e&&C&&A.alternate===null&&t(p,C),m=i(A,m,P),j===null?k=A:j.sibling=A,j=A,C=E}if(P===g.length)return n(p,C),ae&&Sn(p,P),k;if(C===null){for(;P<g.length;P++)C=d(p,g[P],w),C!==null&&(m=i(C,m,P),j===null?k=C:j.sibling=C,j=C);return ae&&Sn(p,P),k}for(C=r(p,C);P<g.length;P++)E=v(C,p,P,g[P],w),E!==null&&(e&&E.alternate!==null&&C.delete(E.key===null?P:E.key),m=i(E,m,P),j===null?k=E:j.sibling=E,j=E);return e&&C.forEach(function(H){return t(p,H)}),ae&&Sn(p,P),k}function S(p,m,g,w){var k=Ir(g);if(typeof k!="function")throw Error(N(150));if(g=k.call(g),g==null)throw Error(N(151));for(var j=k=null,C=m,P=m=0,E=null,A=g.next();C!==null&&!A.done;P++,A=g.next()){C.index>P?(E=C,C=null):E=C.sibling;var H=f(p,C,A.value,w);if(H===null){C===null&&(C=E);break}e&&C&&H.alternate===null&&t(p,C),m=i(H,m,P),j===null?k=H:j.sibling=H,j=H,C=E}if(A.done)return n(p,C),ae&&Sn(p,P),k;if(C===null){for(;!A.done;P++,A=g.next())A=d(p,A.value,w),A!==null&&(m=i(A,m,P),j===null?k=A:j.sibling=A,j=A);return ae&&Sn(p,P),k}for(C=r(p,C);!A.done;P++,A=g.next())A=v(C,p,P,A.value,w),A!==null&&(e&&A.alternate!==null&&C.delete(A.key===null?P:A.key),m=i(A,m,P),j===null?k=A:j.sibling=A,j=A);return e&&C.forEach(function(X){return t(p,X)}),ae&&Sn(p,P),k}function b(p,m,g,w){if(typeof g=="object"&&g!==null&&g.type===Wn&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case Us:e:{for(var k=g.key,j=m;j!==null;){if(j.key===k){if(k=g.type,k===Wn){if(j.tag===7){n(p,j.sibling),m=s(j,g.props.children),m.return=p,p=m;break e}}else if(j.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Kt&&ju(k)===j.type){n(p,j.sibling),m=s(j,g.props),m.ref=zr(p,j,g),m.return=p,p=m;break e}n(p,j);break}else t(p,j);j=j.sibling}g.type===Wn?(m=Mn(g.props.children,p.mode,w,g.key),m.return=p,p=m):(w=Si(g.type,g.key,g.props,null,p.mode,w),w.ref=zr(p,m,g),w.return=p,p=w)}return o(p);case $n:e:{for(j=g.key;m!==null;){if(m.key===j)if(m.tag===4&&m.stateNode.containerInfo===g.containerInfo&&m.stateNode.implementation===g.implementation){n(p,m.sibling),m=s(m,g.children||[]),m.return=p,p=m;break e}else{n(p,m);break}else t(p,m);m=m.sibling}m=ta(g,p.mode,w),m.return=p,p=m}return o(p);case Kt:return j=g._init,b(p,m,j(g._payload),w)}if(Kr(g))return x(p,m,g,w);if(Ir(g))return S(p,m,g,w);ei(p,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,m!==null&&m.tag===6?(n(p,m.sibling),m=s(m,g),m.return=p,p=m):(n(p,m),m=ea(g,p.mode,w),m.return=p,p=m),o(p)):n(p,m)}return b}var yr=kf(!0),jf=kf(!1),Fi=gn(null),Vi=null,er=null,ql=null;function Ql(){ql=er=Vi=null}function Xl(e){var t=Fi.current;ie(Fi),e._currentValue=t}function Qa(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function hr(e,t){Vi=e,ql=er=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ge=!0),e.firstContext=null)}function ut(e){var t=e._currentValue;if(ql!==e)if(e={context:e,memoizedValue:t,next:null},er===null){if(Vi===null)throw Error(N(308));er=e,Vi.dependencies={lanes:0,firstContext:e}}else er=er.next=e;return t}var Tn=null;function Yl(e){Tn===null?Tn=[e]:Tn.push(e)}function Cf(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,Yl(t)):(n.next=s.next,s.next=n),t.interleaved=n,Bt(e,r)}function Bt(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var qt=!1;function Jl(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Pf(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Rt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function sn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Q&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Bt(e,n)}return s=r.interleaved,s===null?(t.next=t,Yl(r)):(t.next=s.next,s.next=t),r.interleaved=t,Bt(e,n)}function pi(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Ol(e,n)}}function Cu(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=t:i=i.next=t}else s=i=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Bi(e,t,n,r){var s=e.updateQueue;qt=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var c=a,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var h=e.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=u:a.next=u,h.lastBaseUpdate=c))}if(i!==null){var d=s.baseState;o=0,h=u=c=null,a=i;do{var f=a.lane,v=a.eventTime;if((r&f)===f){h!==null&&(h=h.next={eventTime:v,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var x=e,S=a;switch(f=t,v=n,S.tag){case 1:if(x=S.payload,typeof x=="function"){d=x.call(v,d,f);break e}d=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=S.payload,f=typeof x=="function"?x.call(v,d,f):x,f==null)break e;d=he({},d,f);break e;case 2:qt=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else v={eventTime:v,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(u=h=v,c=d):h=h.next=v,o|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(1);if(h===null&&(c=d),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=h,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);In|=o,e.lanes=o,e.memoizedState=d}}function Pu(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(N(191,s));s.call(r)}}}var Rs={},Pt=gn(Rs),bs=gn(Rs),ks=gn(Rs);function En(e){if(e===Rs)throw Error(N(174));return e}function Zl(e,t){switch(ne(ks,t),ne(bs,e),ne(Pt,Rs),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Na(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Na(t,e)}ie(Pt),ne(Pt,t)}function xr(){ie(Pt),ie(bs),ie(ks)}function Tf(e){En(ks.current);var t=En(Pt.current),n=Na(t,e.type);t!==n&&(ne(bs,e),ne(Pt,n))}function ec(e){bs.current===e&&(ie(Pt),ie(bs))}var le=gn(0);function zi(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var qo=[];function tc(){for(var e=0;e<qo.length;e++)qo[e]._workInProgressVersionPrimary=null;qo.length=0}var gi=Ut.ReactCurrentDispatcher,Qo=Ut.ReactCurrentBatchConfig,Rn=0,de=null,we=null,be=null,Hi=!1,ns=!1,js=0,Xg=0;function Ee(){throw Error(N(321))}function nc(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!wt(e[n],t[n]))return!1;return!0}function rc(e,t,n,r,s,i){if(Rn=i,de=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,gi.current=e===null||e.memoizedState===null?ev:tv,e=n(r,s),ns){i=0;do{if(ns=!1,js=0,25<=i)throw Error(N(301));i+=1,be=we=null,t.updateQueue=null,gi.current=nv,e=n(r,s)}while(ns)}if(gi.current=Ui,t=we!==null&&we.next!==null,Rn=0,be=we=de=null,Hi=!1,t)throw Error(N(300));return e}function sc(){var e=js!==0;return js=0,e}function kt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return be===null?de.memoizedState=be=e:be=be.next=e,be}function dt(){if(we===null){var e=de.alternate;e=e!==null?e.memoizedState:null}else e=we.next;var t=be===null?de.memoizedState:be.next;if(t!==null)be=t,we=e;else{if(e===null)throw Error(N(310));we=e,e={memoizedState:we.memoizedState,baseState:we.baseState,baseQueue:we.baseQueue,queue:we.queue,next:null},be===null?de.memoizedState=be=e:be=be.next=e}return be}function Cs(e,t){return typeof t=="function"?t(e):t}function Xo(e){var t=dt(),n=t.queue;if(n===null)throw Error(N(311));n.lastRenderedReducer=e;var r=we,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,c=null,u=i;do{var h=u.lane;if((Rn&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(a=c=d,o=r):c=c.next=d,de.lanes|=h,In|=h}u=u.next}while(u!==null&&u!==i);c===null?o=r:c.next=a,wt(r,t.memoizedState)||(Ge=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do i=s.lane,de.lanes|=i,In|=i,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Yo(e){var t=dt(),n=t.queue;if(n===null)throw Error(N(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);wt(i,t.memoizedState)||(Ge=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function Ef(){}function Nf(e,t){var n=de,r=dt(),s=t(),i=!wt(r.memoizedState,s);if(i&&(r.memoizedState=s,Ge=!0),r=r.queue,ic(Mf.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||be!==null&&be.memoizedState.tag&1){if(n.flags|=2048,Ps(9,Af.bind(null,n,r,s,t),void 0,null),ke===null)throw Error(N(349));Rn&30||_f(n,t,s)}return s}function _f(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=de.updateQueue,t===null?(t={lastEffect:null,stores:null},de.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Af(e,t,n,r){t.value=n,t.getSnapshot=r,Lf(t)&&Df(e)}function Mf(e,t,n){return n(function(){Lf(t)&&Df(e)})}function Lf(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!wt(e,n)}catch{return!0}}function Df(e){var t=Bt(e,1);t!==null&&xt(t,e,1,-1)}function Tu(e){var t=kt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Cs,lastRenderedState:e},t.queue=e,e=e.dispatch=Zg.bind(null,de,e),[t.memoizedState,e]}function Ps(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=de.updateQueue,t===null?(t={lastEffect:null,stores:null},de.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Rf(){return dt().memoizedState}function vi(e,t,n,r){var s=kt();de.flags|=e,s.memoizedState=Ps(1|t,n,void 0,r===void 0?null:r)}function fo(e,t,n,r){var s=dt();r=r===void 0?null:r;var i=void 0;if(we!==null){var o=we.memoizedState;if(i=o.destroy,r!==null&&nc(r,o.deps)){s.memoizedState=Ps(t,n,i,r);return}}de.flags|=e,s.memoizedState=Ps(1|t,n,i,r)}function Eu(e,t){return vi(8390656,8,e,t)}function ic(e,t){return fo(2048,8,e,t)}function If(e,t){return fo(4,2,e,t)}function Of(e,t){return fo(4,4,e,t)}function Ff(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Vf(e,t,n){return n=n!=null?n.concat([e]):null,fo(4,4,Ff.bind(null,t,e),n)}function oc(){}function Bf(e,t){var n=dt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&nc(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function zf(e,t){var n=dt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&nc(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Hf(e,t,n){return Rn&21?(wt(n,t)||(n=Wh(),de.lanes|=n,In|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ge=!0),e.memoizedState=n)}function Yg(e,t){var n=ee;ee=n!==0&&4>n?n:4,e(!0);var r=Qo.transition;Qo.transition={};try{e(!1),t()}finally{ee=n,Qo.transition=r}}function Uf(){return dt().memoizedState}function Jg(e,t,n){var r=an(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Gf(e))$f(t,n);else if(n=Cf(e,t,n,r),n!==null){var s=Ve();xt(n,e,r,s),Wf(n,t,r)}}function Zg(e,t,n){var r=an(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Gf(e))$f(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,wt(a,o)){var c=t.interleaved;c===null?(s.next=s,Yl(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}n=Cf(e,t,s,r),n!==null&&(s=Ve(),xt(n,e,r,s),Wf(n,t,r))}}function Gf(e){var t=e.alternate;return e===de||t!==null&&t===de}function $f(e,t){ns=Hi=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Wf(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Ol(e,n)}}var Ui={readContext:ut,useCallback:Ee,useContext:Ee,useEffect:Ee,useImperativeHandle:Ee,useInsertionEffect:Ee,useLayoutEffect:Ee,useMemo:Ee,useReducer:Ee,useRef:Ee,useState:Ee,useDebugValue:Ee,useDeferredValue:Ee,useTransition:Ee,useMutableSource:Ee,useSyncExternalStore:Ee,useId:Ee,unstable_isNewReconciler:!1},ev={readContext:ut,useCallback:function(e,t){return kt().memoizedState=[e,t===void 0?null:t],e},useContext:ut,useEffect:Eu,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,vi(4194308,4,Ff.bind(null,t,e),n)},useLayoutEffect:function(e,t){return vi(4194308,4,e,t)},useInsertionEffect:function(e,t){return vi(4,2,e,t)},useMemo:function(e,t){var n=kt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=kt();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Jg.bind(null,de,e),[r.memoizedState,e]},useRef:function(e){var t=kt();return e={current:e},t.memoizedState=e},useState:Tu,useDebugValue:oc,useDeferredValue:function(e){return kt().memoizedState=e},useTransition:function(){var e=Tu(!1),t=e[0];return e=Yg.bind(null,e[1]),kt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=de,s=kt();if(ae){if(n===void 0)throw Error(N(407));n=n()}else{if(n=t(),ke===null)throw Error(N(349));Rn&30||_f(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,Eu(Mf.bind(null,r,i,e),[e]),r.flags|=2048,Ps(9,Af.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=kt(),t=ke.identifierPrefix;if(ae){var n=Mt,r=At;n=(r&~(1<<32-yt(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=js++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Xg++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},tv={readContext:ut,useCallback:Bf,useContext:ut,useEffect:ic,useImperativeHandle:Vf,useInsertionEffect:If,useLayoutEffect:Of,useMemo:zf,useReducer:Xo,useRef:Rf,useState:function(){return Xo(Cs)},useDebugValue:oc,useDeferredValue:function(e){var t=dt();return Hf(t,we.memoizedState,e)},useTransition:function(){var e=Xo(Cs)[0],t=dt().memoizedState;return[e,t]},useMutableSource:Ef,useSyncExternalStore:Nf,useId:Uf,unstable_isNewReconciler:!1},nv={readContext:ut,useCallback:Bf,useContext:ut,useEffect:ic,useImperativeHandle:Vf,useInsertionEffect:If,useLayoutEffect:Of,useMemo:zf,useReducer:Yo,useRef:Rf,useState:function(){return Yo(Cs)},useDebugValue:oc,useDeferredValue:function(e){var t=dt();return we===null?t.memoizedState=e:Hf(t,we.memoizedState,e)},useTransition:function(){var e=Yo(Cs)[0],t=dt().memoizedState;return[e,t]},useMutableSource:Ef,useSyncExternalStore:Nf,useId:Uf,unstable_isNewReconciler:!1};function pt(e,t){if(e&&e.defaultProps){t=he({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Xa(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:he({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var mo={isMounted:function(e){return(e=e._reactInternals)?zn(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Ve(),s=an(e),i=Rt(r,s);i.payload=t,n!=null&&(i.callback=n),t=sn(e,i,s),t!==null&&(xt(t,e,s,r),pi(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Ve(),s=an(e),i=Rt(r,s);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=sn(e,i,s),t!==null&&(xt(t,e,s,r),pi(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ve(),r=an(e),s=Rt(n,r);s.tag=2,t!=null&&(s.callback=t),t=sn(e,s,r),t!==null&&(xt(t,e,r,n),pi(t,e,r))}};function Nu(e,t,n,r,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,o):t.prototype&&t.prototype.isPureReactComponent?!ys(n,r)||!ys(s,i):!0}function Kf(e,t,n){var r=!1,s=hn,i=t.contextType;return typeof i=="object"&&i!==null?i=ut(i):(s=We(t)?Ln:De.current,r=t.contextTypes,i=(r=r!=null)?gr(e,s):hn),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=mo,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function _u(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&mo.enqueueReplaceState(t,t.state,null)}function Ya(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Jl(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=ut(i):(i=We(t)?Ln:De.current,s.context=gr(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Xa(e,t,i,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&mo.enqueueReplaceState(s,s.state,null),Bi(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function wr(e,t){try{var n="",r=t;do n+=_0(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function Jo(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Ja(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var rv=typeof WeakMap=="function"?WeakMap:Map;function qf(e,t,n){n=Rt(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){$i||($i=!0,ll=r),Ja(e,t)},n}function Qf(e,t,n){n=Rt(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){Ja(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Ja(e,t),typeof r!="function"&&(on===null?on=new Set([this]):on.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function Au(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new rv;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=vv.bind(null,e,t,n),t.then(e,e))}function Mu(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Lu(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Rt(-1,1),t.tag=2,sn(n,t,1))),n.lanes|=1),e)}var sv=Ut.ReactCurrentOwner,Ge=!1;function Fe(e,t,n,r){t.child=e===null?jf(t,null,n,r):yr(t,e.child,n,r)}function Du(e,t,n,r,s){n=n.render;var i=t.ref;return hr(t,s),r=rc(e,t,n,r,i,s),n=sc(),e!==null&&!Ge?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,zt(e,t,s)):(ae&&n&&$l(t),t.flags|=1,Fe(e,t,r,s),t.child)}function Ru(e,t,n,r,s){if(e===null){var i=n.type;return typeof i=="function"&&!mc(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,Xf(e,t,i,r,s)):(e=Si(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:ys,n(o,r)&&e.ref===t.ref)return zt(e,t,s)}return t.flags|=1,e=ln(i,r),e.ref=t.ref,e.return=t,t.child=e}function Xf(e,t,n,r,s){if(e!==null){var i=e.memoizedProps;if(ys(i,r)&&e.ref===t.ref)if(Ge=!1,t.pendingProps=r=i,(e.lanes&s)!==0)e.flags&131072&&(Ge=!0);else return t.lanes=e.lanes,zt(e,t,s)}return Za(e,t,n,r,s)}function Yf(e,t,n){var r=t.pendingProps,s=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ne(nr,Xe),Xe|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ne(nr,Xe),Xe|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,ne(nr,Xe),Xe|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,ne(nr,Xe),Xe|=r;return Fe(e,t,s,n),t.child}function Jf(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Za(e,t,n,r,s){var i=We(n)?Ln:De.current;return i=gr(t,i),hr(t,s),n=rc(e,t,n,r,i,s),r=sc(),e!==null&&!Ge?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,zt(e,t,s)):(ae&&r&&$l(t),t.flags|=1,Fe(e,t,n,s),t.child)}function Iu(e,t,n,r,s){if(We(n)){var i=!0;Ri(t)}else i=!1;if(hr(t,s),t.stateNode===null)yi(e,t),Kf(t,n,r),Ya(t,n,r,s),r=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=ut(u):(u=We(n)?Ln:De.current,u=gr(t,u));var h=n.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||c!==u)&&_u(t,o,r,u),qt=!1;var f=t.memoizedState;o.state=f,Bi(t,r,o,s),c=t.memoizedState,a!==r||f!==c||$e.current||qt?(typeof h=="function"&&(Xa(t,n,h,r),c=t.memoizedState),(a=qt||Nu(t,n,a,r,f,c,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),o.props=r,o.state=c,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Pf(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:pt(t.type,a),o.props=u,d=t.pendingProps,f=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=ut(c):(c=We(n)?Ln:De.current,c=gr(t,c));var v=n.getDerivedStateFromProps;(h=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==c)&&_u(t,o,r,c),qt=!1,f=t.memoizedState,o.state=f,Bi(t,r,o,s);var x=t.memoizedState;a!==d||f!==x||$e.current||qt?(typeof v=="function"&&(Xa(t,n,v,r),x=t.memoizedState),(u=qt||Nu(t,n,u,r,f,x,c)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,x,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,x,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=x),o.props=r,o.state=x,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return el(e,t,n,r,i,s)}function el(e,t,n,r,s,i){Jf(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return s&&Su(t,n,!1),zt(e,t,i);r=t.stateNode,sv.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=yr(t,e.child,null,i),t.child=yr(t,null,a,i)):Fe(e,t,a,i),t.memoizedState=r.state,s&&Su(t,n,!0),t.child}function Zf(e){var t=e.stateNode;t.pendingContext?wu(e,t.pendingContext,t.pendingContext!==t.context):t.context&&wu(e,t.context,!1),Zl(e,t.containerInfo)}function Ou(e,t,n,r,s){return vr(),Kl(s),t.flags|=256,Fe(e,t,n,r),t.child}var tl={dehydrated:null,treeContext:null,retryLane:0};function nl(e){return{baseLanes:e,cachePool:null,transitions:null}}function em(e,t,n){var r=t.pendingProps,s=le.current,i=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(s&2)!==0),a?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),ne(le,s&1),e===null)return qa(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,i?(r=t.mode,i=t.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=vo(o,r,0,null),e=Mn(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=nl(n),t.memoizedState=tl,e):ac(t,o));if(s=e.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return iv(e,t,o,r,a,s,n);if(i){i=r.fallback,o=t.mode,s=e.child,a=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=ln(s,c),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=ln(a,i):(i=Mn(i,o,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,o=e.child.memoizedState,o=o===null?nl(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~n,t.memoizedState=tl,r}return i=e.child,e=i.sibling,r=ln(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function ac(e,t){return t=vo({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ti(e,t,n,r){return r!==null&&Kl(r),yr(t,e.child,null,n),e=ac(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function iv(e,t,n,r,s,i,o){if(n)return t.flags&256?(t.flags&=-257,r=Jo(Error(N(422))),ti(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,s=t.mode,r=vo({mode:"visible",children:r.children},s,0,null),i=Mn(i,s,o,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&yr(t,e.child,null,o),t.child.memoizedState=nl(o),t.memoizedState=tl,i);if(!(t.mode&1))return ti(e,t,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(N(419)),r=Jo(i,r,void 0),ti(e,t,o,r)}if(a=(o&e.childLanes)!==0,Ge||a){if(r=ke,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Bt(e,s),xt(r,e,s,-1))}return fc(),r=Jo(Error(N(421))),ti(e,t,o,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=yv.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,Ye=rn(s.nextSibling),Je=t,ae=!0,vt=null,e!==null&&(ot[at++]=At,ot[at++]=Mt,ot[at++]=Dn,At=e.id,Mt=e.overflow,Dn=t),t=ac(t,r.children),t.flags|=4096,t)}function Fu(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Qa(e.return,t,n)}function Zo(e,t,n,r,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function tm(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(Fe(e,t,r.children,n),r=le.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Fu(e,n,t);else if(e.tag===19)Fu(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ne(le,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&zi(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Zo(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&zi(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Zo(t,!0,n,null,i);break;case"together":Zo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function yi(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function zt(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),In|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(N(153));if(t.child!==null){for(e=t.child,n=ln(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=ln(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function ov(e,t,n){switch(t.tag){case 3:Zf(t),vr();break;case 5:Tf(t);break;case 1:We(t.type)&&Ri(t);break;case 4:Zl(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;ne(Fi,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(ne(le,le.current&1),t.flags|=128,null):n&t.child.childLanes?em(e,t,n):(ne(le,le.current&1),e=zt(e,t,n),e!==null?e.sibling:null);ne(le,le.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return tm(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ne(le,le.current),r)break;return null;case 22:case 23:return t.lanes=0,Yf(e,t,n)}return zt(e,t,n)}var nm,rl,rm,sm;nm=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};rl=function(){};rm=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,En(Pt.current);var i=null;switch(n){case"input":s=Ca(e,s),r=Ca(e,r),i=[];break;case"select":s=he({},s,{value:void 0}),r=he({},r,{value:void 0}),i=[];break;case"textarea":s=Ea(e,s),r=Ea(e,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Li)}_a(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ds.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(a=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==a&&(c!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ds.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&se("scroll",e),i||a===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};sm=function(e,t,n,r){n!==r&&(t.flags|=4)};function Hr(e,t){if(!ae)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ne(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function av(e,t,n){var r=t.pendingProps;switch(Wl(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ne(t),null;case 1:return We(t.type)&&Di(),Ne(t),null;case 3:return r=t.stateNode,xr(),ie($e),ie(De),tc(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Zs(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,vt!==null&&(dl(vt),vt=null))),rl(e,t),Ne(t),null;case 5:ec(t);var s=En(ks.current);if(n=t.type,e!==null&&t.stateNode!=null)rm(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(N(166));return Ne(t),null}if(e=En(Pt.current),Zs(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[jt]=t,r[Ss]=i,e=(t.mode&1)!==0,n){case"dialog":se("cancel",r),se("close",r);break;case"iframe":case"object":case"embed":se("load",r);break;case"video":case"audio":for(s=0;s<Qr.length;s++)se(Qr[s],r);break;case"source":se("error",r);break;case"img":case"image":case"link":se("error",r),se("load",r);break;case"details":se("toggle",r);break;case"input":Kc(r,i),se("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},se("invalid",r);break;case"textarea":Qc(r,i),se("invalid",r)}_a(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Js(r.textContent,a,e),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Js(r.textContent,a,e),s=["children",""+a]):ds.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&se("scroll",r)}switch(n){case"input":Gs(r),qc(r,i,!0);break;case"textarea":Gs(r),Xc(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Li)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Ah(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[jt]=t,e[Ss]=r,nm(e,t,!1,!1),t.stateNode=e;e:{switch(o=Aa(n,r),n){case"dialog":se("cancel",e),se("close",e),s=r;break;case"iframe":case"object":case"embed":se("load",e),s=r;break;case"video":case"audio":for(s=0;s<Qr.length;s++)se(Qr[s],e);s=r;break;case"source":se("error",e),s=r;break;case"img":case"image":case"link":se("error",e),se("load",e),s=r;break;case"details":se("toggle",e),s=r;break;case"input":Kc(e,r),s=Ca(e,r),se("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=he({},r,{value:void 0}),se("invalid",e);break;case"textarea":Qc(e,r),s=Ea(e,r),se("invalid",e);break;default:s=r}_a(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var c=a[i];i==="style"?Dh(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Mh(e,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&hs(e,c):typeof c=="number"&&hs(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ds.hasOwnProperty(i)?c!=null&&i==="onScroll"&&se("scroll",e):c!=null&&Al(e,i,c,o))}switch(n){case"input":Gs(e),qc(e,r,!1);break;case"textarea":Gs(e),Xc(e);break;case"option":r.value!=null&&e.setAttribute("value",""+dn(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?lr(e,!!r.multiple,i,!1):r.defaultValue!=null&&lr(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Li)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ne(t),null;case 6:if(e&&t.stateNode!=null)sm(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(N(166));if(n=En(ks.current),En(Pt.current),Zs(t)){if(r=t.stateNode,n=t.memoizedProps,r[jt]=t,(i=r.nodeValue!==n)&&(e=Je,e!==null))switch(e.tag){case 3:Js(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Js(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[jt]=t,t.stateNode=r}return Ne(t),null;case 13:if(ie(le),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ae&&Ye!==null&&t.mode&1&&!(t.flags&128))bf(),vr(),t.flags|=98560,i=!1;else if(i=Zs(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(N(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(N(317));i[jt]=t}else vr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ne(t),i=!1}else vt!==null&&(dl(vt),vt=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||le.current&1?Se===0&&(Se=3):fc())),t.updateQueue!==null&&(t.flags|=4),Ne(t),null);case 4:return xr(),rl(e,t),e===null&&xs(t.stateNode.containerInfo),Ne(t),null;case 10:return Xl(t.type._context),Ne(t),null;case 17:return We(t.type)&&Di(),Ne(t),null;case 19:if(ie(le),i=t.memoizedState,i===null)return Ne(t),null;if(r=(t.flags&128)!==0,o=i.rendering,o===null)if(r)Hr(i,!1);else{if(Se!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=zi(e),o!==null){for(t.flags|=128,Hr(i,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ne(le,le.current&1|2),t.child}e=e.sibling}i.tail!==null&&ge()>Sr&&(t.flags|=128,r=!0,Hr(i,!1),t.lanes=4194304)}else{if(!r)if(e=zi(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Hr(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!ae)return Ne(t),null}else 2*ge()-i.renderingStartTime>Sr&&n!==1073741824&&(t.flags|=128,r=!0,Hr(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(n=i.last,n!==null?n.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=ge(),t.sibling=null,n=le.current,ne(le,r?n&1|2:n&1),t):(Ne(t),null);case 22:case 23:return hc(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Xe&1073741824&&(Ne(t),t.subtreeFlags&6&&(t.flags|=8192)):Ne(t),null;case 24:return null;case 25:return null}throw Error(N(156,t.tag))}function lv(e,t){switch(Wl(t),t.tag){case 1:return We(t.type)&&Di(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return xr(),ie($e),ie(De),tc(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return ec(t),null;case 13:if(ie(le),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(N(340));vr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ie(le),null;case 4:return xr(),null;case 10:return Xl(t.type._context),null;case 22:case 23:return hc(),null;case 24:return null;default:return null}}var ni=!1,Ae=!1,cv=typeof WeakSet=="function"?WeakSet:Set,D=null;function tr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){fe(e,t,r)}else n.current=null}function sl(e,t,n){try{n()}catch(r){fe(e,t,r)}}var Vu=!1;function uv(e,t){if(za=_i,e=cf(),Gl(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,u=0,h=0,d=e,f=null;t:for(;;){for(var v;d!==n||s!==0&&d.nodeType!==3||(a=o+s),d!==i||r!==0&&d.nodeType!==3||(c=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(v=d.firstChild)!==null;)f=d,d=v;for(;;){if(d===e)break t;if(f===n&&++u===s&&(a=o),f===i&&++h===r&&(c=o),(v=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=v}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ha={focusedElem:e,selectionRange:n},_i=!1,D=t;D!==null;)if(t=D,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,D=e;else for(;D!==null;){t=D;try{var x=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var S=x.memoizedProps,b=x.memoizedState,p=t.stateNode,m=p.getSnapshotBeforeUpdate(t.elementType===t.type?S:pt(t.type,S),b);p.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var g=t.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(N(163))}}catch(w){fe(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,D=e;break}D=t.return}return x=Vu,Vu=!1,x}function rs(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&sl(t,n,i)}s=s.next}while(s!==r)}}function po(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function il(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function im(e){var t=e.alternate;t!==null&&(e.alternate=null,im(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[jt],delete t[Ss],delete t[$a],delete t[Wg],delete t[Kg])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function om(e){return e.tag===5||e.tag===3||e.tag===4}function Bu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||om(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ol(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Li));else if(r!==4&&(e=e.child,e!==null))for(ol(e,t,n),e=e.sibling;e!==null;)ol(e,t,n),e=e.sibling}function al(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(al(e,t,n),e=e.sibling;e!==null;)al(e,t,n),e=e.sibling}var Ce=null,gt=!1;function Gt(e,t,n){for(n=n.child;n!==null;)am(e,t,n),n=n.sibling}function am(e,t,n){if(Ct&&typeof Ct.onCommitFiberUnmount=="function")try{Ct.onCommitFiberUnmount(oo,n)}catch{}switch(n.tag){case 5:Ae||tr(n,t);case 6:var r=Ce,s=gt;Ce=null,Gt(e,t,n),Ce=r,gt=s,Ce!==null&&(gt?(e=Ce,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Ce.removeChild(n.stateNode));break;case 18:Ce!==null&&(gt?(e=Ce,n=n.stateNode,e.nodeType===8?Wo(e.parentNode,n):e.nodeType===1&&Wo(e,n),gs(e)):Wo(Ce,n.stateNode));break;case 4:r=Ce,s=gt,Ce=n.stateNode.containerInfo,gt=!0,Gt(e,t,n),Ce=r,gt=s;break;case 0:case 11:case 14:case 15:if(!Ae&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&sl(n,t,o),s=s.next}while(s!==r)}Gt(e,t,n);break;case 1:if(!Ae&&(tr(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){fe(n,t,a)}Gt(e,t,n);break;case 21:Gt(e,t,n);break;case 22:n.mode&1?(Ae=(r=Ae)||n.memoizedState!==null,Gt(e,t,n),Ae=r):Gt(e,t,n);break;default:Gt(e,t,n)}}function zu(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new cv),t.forEach(function(r){var s=xv.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function ft(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ce=a.stateNode,gt=!1;break e;case 3:Ce=a.stateNode.containerInfo,gt=!0;break e;case 4:Ce=a.stateNode.containerInfo,gt=!0;break e}a=a.return}if(Ce===null)throw Error(N(160));am(i,o,s),Ce=null,gt=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){fe(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)lm(t,e),t=t.sibling}function lm(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ft(t,e),St(e),r&4){try{rs(3,e,e.return),po(3,e)}catch(S){fe(e,e.return,S)}try{rs(5,e,e.return)}catch(S){fe(e,e.return,S)}}break;case 1:ft(t,e),St(e),r&512&&n!==null&&tr(n,n.return);break;case 5:if(ft(t,e),St(e),r&512&&n!==null&&tr(n,n.return),e.flags&32){var s=e.stateNode;try{hs(s,"")}catch(S){fe(e,e.return,S)}}if(r&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=n!==null?n.memoizedProps:i,a=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&Nh(s,i),Aa(a,o);var u=Aa(a,i);for(o=0;o<c.length;o+=2){var h=c[o],d=c[o+1];h==="style"?Dh(s,d):h==="dangerouslySetInnerHTML"?Mh(s,d):h==="children"?hs(s,d):Al(s,h,d,u)}switch(a){case"input":Pa(s,i);break;case"textarea":_h(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var v=i.value;v!=null?lr(s,!!i.multiple,v,!1):f!==!!i.multiple&&(i.defaultValue!=null?lr(s,!!i.multiple,i.defaultValue,!0):lr(s,!!i.multiple,i.multiple?[]:"",!1))}s[Ss]=i}catch(S){fe(e,e.return,S)}}break;case 6:if(ft(t,e),St(e),r&4){if(e.stateNode===null)throw Error(N(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(S){fe(e,e.return,S)}}break;case 3:if(ft(t,e),St(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{gs(t.containerInfo)}catch(S){fe(e,e.return,S)}break;case 4:ft(t,e),St(e);break;case 13:ft(t,e),St(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(uc=ge())),r&4&&zu(e);break;case 22:if(h=n!==null&&n.memoizedState!==null,e.mode&1?(Ae=(u=Ae)||h,ft(t,e),Ae=u):ft(t,e),St(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!h&&e.mode&1)for(D=e,h=e.child;h!==null;){for(d=D=h;D!==null;){switch(f=D,v=f.child,f.tag){case 0:case 11:case 14:case 15:rs(4,f,f.return);break;case 1:tr(f,f.return);var x=f.stateNode;if(typeof x.componentWillUnmount=="function"){r=f,n=f.return;try{t=r,x.props=t.memoizedProps,x.state=t.memoizedState,x.componentWillUnmount()}catch(S){fe(r,n,S)}}break;case 5:tr(f,f.return);break;case 22:if(f.memoizedState!==null){Uu(d);continue}}v!==null?(v.return=f,D=v):Uu(d)}h=h.sibling}e:for(h=null,d=e;;){if(d.tag===5){if(h===null){h=d;try{s=d.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=Lh("display",o))}catch(S){fe(e,e.return,S)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(S){fe(e,e.return,S)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ft(t,e),St(e),r&4&&zu(e);break;case 21:break;default:ft(t,e),St(e)}}function St(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(om(n)){var r=n;break e}n=n.return}throw Error(N(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(hs(s,""),r.flags&=-33);var i=Bu(e);al(e,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Bu(e);ol(e,a,o);break;default:throw Error(N(161))}}catch(c){fe(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function dv(e,t,n){D=e,cm(e)}function cm(e,t,n){for(var r=(e.mode&1)!==0;D!==null;){var s=D,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||ni;if(!o){var a=s.alternate,c=a!==null&&a.memoizedState!==null||Ae;a=ni;var u=Ae;if(ni=o,(Ae=c)&&!u)for(D=s;D!==null;)o=D,c=o.child,o.tag===22&&o.memoizedState!==null?Gu(s):c!==null?(c.return=o,D=c):Gu(s);for(;i!==null;)D=i,cm(i),i=i.sibling;D=s,ni=a,Ae=u}Hu(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,D=i):Hu(e)}}function Hu(e){for(;D!==null;){var t=D;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ae||po(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Ae)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:pt(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Pu(t,i,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Pu(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&gs(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(N(163))}Ae||t.flags&512&&il(t)}catch(f){fe(t,t.return,f)}}if(t===e){D=null;break}if(n=t.sibling,n!==null){n.return=t.return,D=n;break}D=t.return}}function Uu(e){for(;D!==null;){var t=D;if(t===e){D=null;break}var n=t.sibling;if(n!==null){n.return=t.return,D=n;break}D=t.return}}function Gu(e){for(;D!==null;){var t=D;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{po(4,t)}catch(c){fe(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(c){fe(t,s,c)}}var i=t.return;try{il(t)}catch(c){fe(t,i,c)}break;case 5:var o=t.return;try{il(t)}catch(c){fe(t,o,c)}}}catch(c){fe(t,t.return,c)}if(t===e){D=null;break}var a=t.sibling;if(a!==null){a.return=t.return,D=a;break}D=t.return}}var hv=Math.ceil,Gi=Ut.ReactCurrentDispatcher,lc=Ut.ReactCurrentOwner,ct=Ut.ReactCurrentBatchConfig,Q=0,ke=null,xe=null,Pe=0,Xe=0,nr=gn(0),Se=0,Ts=null,In=0,go=0,cc=0,ss=null,Ue=null,uc=0,Sr=1/0,Et=null,$i=!1,ll=null,on=null,ri=!1,Zt=null,Wi=0,is=0,cl=null,xi=-1,wi=0;function Ve(){return Q&6?ge():xi!==-1?xi:xi=ge()}function an(e){return e.mode&1?Q&2&&Pe!==0?Pe&-Pe:Qg.transition!==null?(wi===0&&(wi=Wh()),wi):(e=ee,e!==0||(e=window.event,e=e===void 0?16:Zh(e.type)),e):1}function xt(e,t,n,r){if(50<is)throw is=0,cl=null,Error(N(185));Ms(e,n,r),(!(Q&2)||e!==ke)&&(e===ke&&(!(Q&2)&&(go|=n),Se===4&&Yt(e,Pe)),Ke(e,r),n===1&&Q===0&&!(t.mode&1)&&(Sr=ge()+500,ho&&vn()))}function Ke(e,t){var n=e.callbackNode;Q0(e,t);var r=Ni(e,e===ke?Pe:0);if(r===0)n!==null&&Zc(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Zc(n),t===1)e.tag===0?qg($u.bind(null,e)):xf($u.bind(null,e)),Gg(function(){!(Q&6)&&vn()}),n=null;else{switch(Kh(r)){case 1:n=Il;break;case 4:n=Gh;break;case 16:n=Ei;break;case 536870912:n=$h;break;default:n=Ei}n=vm(n,um.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function um(e,t){if(xi=-1,wi=0,Q&6)throw Error(N(327));var n=e.callbackNode;if(fr()&&e.callbackNode!==n)return null;var r=Ni(e,e===ke?Pe:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Ki(e,r);else{t=r;var s=Q;Q|=2;var i=hm();(ke!==e||Pe!==t)&&(Et=null,Sr=ge()+500,An(e,t));do try{pv();break}catch(a){dm(e,a)}while(1);Ql(),Gi.current=i,Q=s,xe!==null?t=0:(ke=null,Pe=0,t=Se)}if(t!==0){if(t===2&&(s=Ia(e),s!==0&&(r=s,t=ul(e,s))),t===1)throw n=Ts,An(e,0),Yt(e,r),Ke(e,ge()),n;if(t===6)Yt(e,r);else{if(s=e.current.alternate,!(r&30)&&!fv(s)&&(t=Ki(e,r),t===2&&(i=Ia(e),i!==0&&(r=i,t=ul(e,i))),t===1))throw n=Ts,An(e,0),Yt(e,r),Ke(e,ge()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(N(345));case 2:bn(e,Ue,Et);break;case 3:if(Yt(e,r),(r&130023424)===r&&(t=uc+500-ge(),10<t)){if(Ni(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){Ve(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Ga(bn.bind(null,e,Ue,Et),t);break}bn(e,Ue,Et);break;case 4:if(Yt(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var o=31-yt(r);i=1<<o,o=t[o],o>s&&(s=o),r&=~i}if(r=s,r=ge()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*hv(r/1960))-r,10<r){e.timeoutHandle=Ga(bn.bind(null,e,Ue,Et),r);break}bn(e,Ue,Et);break;case 5:bn(e,Ue,Et);break;default:throw Error(N(329))}}}return Ke(e,ge()),e.callbackNode===n?um.bind(null,e):null}function ul(e,t){var n=ss;return e.current.memoizedState.isDehydrated&&(An(e,t).flags|=256),e=Ki(e,t),e!==2&&(t=Ue,Ue=n,t!==null&&dl(t)),e}function dl(e){Ue===null?Ue=e:Ue.push.apply(Ue,e)}function fv(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!wt(i(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Yt(e,t){for(t&=~cc,t&=~go,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-yt(t),r=1<<n;e[n]=-1,t&=~r}}function $u(e){if(Q&6)throw Error(N(327));fr();var t=Ni(e,0);if(!(t&1))return Ke(e,ge()),null;var n=Ki(e,t);if(e.tag!==0&&n===2){var r=Ia(e);r!==0&&(t=r,n=ul(e,r))}if(n===1)throw n=Ts,An(e,0),Yt(e,t),Ke(e,ge()),n;if(n===6)throw Error(N(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,bn(e,Ue,Et),Ke(e,ge()),null}function dc(e,t){var n=Q;Q|=1;try{return e(t)}finally{Q=n,Q===0&&(Sr=ge()+500,ho&&vn())}}function On(e){Zt!==null&&Zt.tag===0&&!(Q&6)&&fr();var t=Q;Q|=1;var n=ct.transition,r=ee;try{if(ct.transition=null,ee=1,e)return e()}finally{ee=r,ct.transition=n,Q=t,!(Q&6)&&vn()}}function hc(){Xe=nr.current,ie(nr)}function An(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Ug(n)),xe!==null)for(n=xe.return;n!==null;){var r=n;switch(Wl(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Di();break;case 3:xr(),ie($e),ie(De),tc();break;case 5:ec(r);break;case 4:xr();break;case 13:ie(le);break;case 19:ie(le);break;case 10:Xl(r.type._context);break;case 22:case 23:hc()}n=n.return}if(ke=e,xe=e=ln(e.current,null),Pe=Xe=t,Se=0,Ts=null,cc=go=In=0,Ue=ss=null,Tn!==null){for(t=0;t<Tn.length;t++)if(n=Tn[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Tn=null}return e}function dm(e,t){do{var n=xe;try{if(Ql(),gi.current=Ui,Hi){for(var r=de.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Hi=!1}if(Rn=0,be=we=de=null,ns=!1,js=0,lc.current=null,n===null||n.return===null){Se=1,Ts=t,xe=null;break}e:{var i=e,o=n.return,a=n,c=t;if(t=Pe,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var v=Mu(o);if(v!==null){v.flags&=-257,Lu(v,o,a,i,t),v.mode&1&&Au(i,u,t),t=v,c=u;var x=t.updateQueue;if(x===null){var S=new Set;S.add(c),t.updateQueue=S}else x.add(c);break e}else{if(!(t&1)){Au(i,u,t),fc();break e}c=Error(N(426))}}else if(ae&&a.mode&1){var b=Mu(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),Lu(b,o,a,i,t),Kl(wr(c,a));break e}}i=c=wr(c,a),Se!==4&&(Se=2),ss===null?ss=[i]:ss.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var p=qf(i,c,t);Cu(i,p);break e;case 1:a=c;var m=i.type,g=i.stateNode;if(!(i.flags&128)&&(typeof m.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(on===null||!on.has(g)))){i.flags|=65536,t&=-t,i.lanes|=t;var w=Qf(i,a,t);Cu(i,w);break e}}i=i.return}while(i!==null)}mm(n)}catch(k){t=k,xe===n&&n!==null&&(xe=n=n.return);continue}break}while(1)}function hm(){var e=Gi.current;return Gi.current=Ui,e===null?Ui:e}function fc(){(Se===0||Se===3||Se===2)&&(Se=4),ke===null||!(In&268435455)&&!(go&268435455)||Yt(ke,Pe)}function Ki(e,t){var n=Q;Q|=2;var r=hm();(ke!==e||Pe!==t)&&(Et=null,An(e,t));do try{mv();break}catch(s){dm(e,s)}while(1);if(Ql(),Q=n,Gi.current=r,xe!==null)throw Error(N(261));return ke=null,Pe=0,Se}function mv(){for(;xe!==null;)fm(xe)}function pv(){for(;xe!==null&&!B0();)fm(xe)}function fm(e){var t=gm(e.alternate,e,Xe);e.memoizedProps=e.pendingProps,t===null?mm(e):xe=t,lc.current=null}function mm(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=lv(n,t),n!==null){n.flags&=32767,xe=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Se=6,xe=null;return}}else if(n=av(n,t,Xe),n!==null){xe=n;return}if(t=t.sibling,t!==null){xe=t;return}xe=t=e}while(t!==null);Se===0&&(Se=5)}function bn(e,t,n){var r=ee,s=ct.transition;try{ct.transition=null,ee=1,gv(e,t,n,r)}finally{ct.transition=s,ee=r}return null}function gv(e,t,n,r){do fr();while(Zt!==null);if(Q&6)throw Error(N(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(N(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(X0(e,i),e===ke&&(xe=ke=null,Pe=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ri||(ri=!0,vm(Ei,function(){return fr(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=ct.transition,ct.transition=null;var o=ee;ee=1;var a=Q;Q|=4,lc.current=null,uv(e,n),lm(n,e),Ig(Ha),_i=!!za,Ha=za=null,e.current=n,dv(n),z0(),Q=a,ee=o,ct.transition=i}else e.current=n;if(ri&&(ri=!1,Zt=e,Wi=s),i=e.pendingLanes,i===0&&(on=null),G0(n.stateNode),Ke(e,ge()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if($i)throw $i=!1,e=ll,ll=null,e;return Wi&1&&e.tag!==0&&fr(),i=e.pendingLanes,i&1?e===cl?is++:(is=0,cl=e):is=0,vn(),null}function fr(){if(Zt!==null){var e=Kh(Wi),t=ct.transition,n=ee;try{if(ct.transition=null,ee=16>e?16:e,Zt===null)var r=!1;else{if(e=Zt,Zt=null,Wi=0,Q&6)throw Error(N(331));var s=Q;for(Q|=4,D=e.current;D!==null;){var i=D,o=i.child;if(D.flags&16){var a=i.deletions;if(a!==null){for(var c=0;c<a.length;c++){var u=a[c];for(D=u;D!==null;){var h=D;switch(h.tag){case 0:case 11:case 15:rs(8,h,i)}var d=h.child;if(d!==null)d.return=h,D=d;else for(;D!==null;){h=D;var f=h.sibling,v=h.return;if(im(h),h===u){D=null;break}if(f!==null){f.return=v,D=f;break}D=v}}}var x=i.alternate;if(x!==null){var S=x.child;if(S!==null){x.child=null;do{var b=S.sibling;S.sibling=null,S=b}while(S!==null)}}D=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,D=o;else e:for(;D!==null;){if(i=D,i.flags&2048)switch(i.tag){case 0:case 11:case 15:rs(9,i,i.return)}var p=i.sibling;if(p!==null){p.return=i.return,D=p;break e}D=i.return}}var m=e.current;for(D=m;D!==null;){o=D;var g=o.child;if(o.subtreeFlags&2064&&g!==null)g.return=o,D=g;else e:for(o=m;D!==null;){if(a=D,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:po(9,a)}}catch(k){fe(a,a.return,k)}if(a===o){D=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,D=w;break e}D=a.return}}if(Q=s,vn(),Ct&&typeof Ct.onPostCommitFiberRoot=="function")try{Ct.onPostCommitFiberRoot(oo,e)}catch{}r=!0}return r}finally{ee=n,ct.transition=t}}return!1}function Wu(e,t,n){t=wr(n,t),t=qf(e,t,1),e=sn(e,t,1),t=Ve(),e!==null&&(Ms(e,1,t),Ke(e,t))}function fe(e,t,n){if(e.tag===3)Wu(e,e,n);else for(;t!==null;){if(t.tag===3){Wu(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(on===null||!on.has(r))){e=wr(n,e),e=Qf(t,e,1),t=sn(t,e,1),e=Ve(),t!==null&&(Ms(t,1,e),Ke(t,e));break}}t=t.return}}function vv(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Ve(),e.pingedLanes|=e.suspendedLanes&n,ke===e&&(Pe&n)===n&&(Se===4||Se===3&&(Pe&130023424)===Pe&&500>ge()-uc?An(e,0):cc|=n),Ke(e,t)}function pm(e,t){t===0&&(e.mode&1?(t=Ks,Ks<<=1,!(Ks&130023424)&&(Ks=4194304)):t=1);var n=Ve();e=Bt(e,t),e!==null&&(Ms(e,t,n),Ke(e,n))}function yv(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),pm(e,n)}function xv(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(N(314))}r!==null&&r.delete(t),pm(e,n)}var gm;gm=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||$e.current)Ge=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Ge=!1,ov(e,t,n);Ge=!!(e.flags&131072)}else Ge=!1,ae&&t.flags&1048576&&wf(t,Oi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;yi(e,t),e=t.pendingProps;var s=gr(t,De.current);hr(t,n),s=rc(null,t,r,e,s,n);var i=sc();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,We(r)?(i=!0,Ri(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Jl(t),s.updater=mo,t.stateNode=s,s._reactInternals=t,Ya(t,r,e,n),t=el(null,t,r,!0,i,n)):(t.tag=0,ae&&i&&$l(t),Fe(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(yi(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=Sv(r),e=pt(r,e),s){case 0:t=Za(null,t,r,e,n);break e;case 1:t=Iu(null,t,r,e,n);break e;case 11:t=Du(null,t,r,e,n);break e;case 14:t=Ru(null,t,r,pt(r.type,e),n);break e}throw Error(N(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:pt(r,s),Za(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:pt(r,s),Iu(e,t,r,s,n);case 3:e:{if(Zf(t),e===null)throw Error(N(387));r=t.pendingProps,i=t.memoizedState,s=i.element,Pf(e,t),Bi(t,r,null,n);var o=t.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=wr(Error(N(423)),t),t=Ou(e,t,r,n,s);break e}else if(r!==s){s=wr(Error(N(424)),t),t=Ou(e,t,r,n,s);break e}else for(Ye=rn(t.stateNode.containerInfo.firstChild),Je=t,ae=!0,vt=null,n=jf(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(vr(),r===s){t=zt(e,t,n);break e}Fe(e,t,r,n)}t=t.child}return t;case 5:return Tf(t),e===null&&qa(t),r=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,Ua(r,s)?o=null:i!==null&&Ua(r,i)&&(t.flags|=32),Jf(e,t),Fe(e,t,o,n),t.child;case 6:return e===null&&qa(t),null;case 13:return em(e,t,n);case 4:return Zl(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=yr(t,null,r,n):Fe(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:pt(r,s),Du(e,t,r,s,n);case 7:return Fe(e,t,t.pendingProps,n),t.child;case 8:return Fe(e,t,t.pendingProps.children,n),t.child;case 12:return Fe(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,ne(Fi,r._currentValue),r._currentValue=o,i!==null)if(wt(i.value,o)){if(i.children===s.children&&!$e.current){t=zt(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Rt(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Qa(i.return,n,t),a.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(N(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Qa(o,n,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Fe(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,hr(t,n),s=ut(s),r=r(s),t.flags|=1,Fe(e,t,r,n),t.child;case 14:return r=t.type,s=pt(r,t.pendingProps),s=pt(r.type,s),Ru(e,t,r,s,n);case 15:return Xf(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:pt(r,s),yi(e,t),t.tag=1,We(r)?(e=!0,Ri(t)):e=!1,hr(t,n),Kf(t,r,s),Ya(t,r,s,n),el(null,t,r,!0,e,n);case 19:return tm(e,t,n);case 22:return Yf(e,t,n)}throw Error(N(156,t.tag))};function vm(e,t){return Uh(e,t)}function wv(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function lt(e,t,n,r){return new wv(e,t,n,r)}function mc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Sv(e){if(typeof e=="function")return mc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Ll)return 11;if(e===Dl)return 14}return 2}function ln(e,t){var n=e.alternate;return n===null?(n=lt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Si(e,t,n,r,s,i){var o=2;if(r=e,typeof e=="function")mc(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Wn:return Mn(n.children,s,i,t);case Ml:o=8,s|=8;break;case Sa:return e=lt(12,n,t,s|2),e.elementType=Sa,e.lanes=i,e;case ba:return e=lt(13,n,t,s),e.elementType=ba,e.lanes=i,e;case ka:return e=lt(19,n,t,s),e.elementType=ka,e.lanes=i,e;case Ph:return vo(n,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case jh:o=10;break e;case Ch:o=9;break e;case Ll:o=11;break e;case Dl:o=14;break e;case Kt:o=16,r=null;break e}throw Error(N(130,e==null?e:typeof e,""))}return t=lt(o,n,t,s),t.elementType=e,t.type=r,t.lanes=i,t}function Mn(e,t,n,r){return e=lt(7,e,r,t),e.lanes=n,e}function vo(e,t,n,r){return e=lt(22,e,r,t),e.elementType=Ph,e.lanes=n,e.stateNode={isHidden:!1},e}function ea(e,t,n){return e=lt(6,e,null,t),e.lanes=n,e}function ta(e,t,n){return t=lt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function bv(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ro(0),this.expirationTimes=Ro(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ro(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function pc(e,t,n,r,s,i,o,a,c){return e=new bv(e,t,n,a,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=lt(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Jl(i),e}function kv(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$n,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function ym(e){if(!e)return hn;e=e._reactInternals;e:{if(zn(e)!==e||e.tag!==1)throw Error(N(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(We(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(N(171))}if(e.tag===1){var n=e.type;if(We(n))return yf(e,n,t)}return t}function xm(e,t,n,r,s,i,o,a,c){return e=pc(n,r,!0,e,s,i,o,a,c),e.context=ym(null),n=e.current,r=Ve(),s=an(n),i=Rt(r,s),i.callback=t??null,sn(n,i,s),e.current.lanes=s,Ms(e,s,r),Ke(e,r),e}function yo(e,t,n,r){var s=t.current,i=Ve(),o=an(s);return n=ym(n),t.context===null?t.context=n:t.pendingContext=n,t=Rt(i,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=sn(s,t,o),e!==null&&(xt(e,s,o,i),pi(e,s,o)),o}function qi(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Ku(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function gc(e,t){Ku(e,t),(e=e.alternate)&&Ku(e,t)}function jv(){return null}var wm=typeof reportError=="function"?reportError:function(e){console.error(e)};function vc(e){this._internalRoot=e}xo.prototype.render=vc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(N(409));yo(e,t,null,null)};xo.prototype.unmount=vc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;On(function(){yo(null,e,null,null)}),t[Vt]=null}};function xo(e){this._internalRoot=e}xo.prototype.unstable_scheduleHydration=function(e){if(e){var t=Xh();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Xt.length&&t!==0&&t<Xt[n].priority;n++);Xt.splice(n,0,e),n===0&&Jh(e)}};function yc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function wo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function qu(){}function Cv(e,t,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=qi(o);i.call(u)}}var o=xm(t,r,e,0,null,!1,!1,"",qu);return e._reactRootContainer=o,e[Vt]=o.current,xs(e.nodeType===8?e.parentNode:e),On(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var u=qi(c);a.call(u)}}var c=pc(e,0,!1,null,null,!1,!1,"",qu);return e._reactRootContainer=c,e[Vt]=c.current,xs(e.nodeType===8?e.parentNode:e),On(function(){yo(t,c,n,r)}),c}function So(e,t,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var c=qi(o);a.call(c)}}yo(t,o,e,s)}else o=Cv(n,t,e,s,r);return qi(o)}qh=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=qr(t.pendingLanes);n!==0&&(Ol(t,n|1),Ke(t,ge()),!(Q&6)&&(Sr=ge()+500,vn()))}break;case 13:On(function(){var r=Bt(e,1);if(r!==null){var s=Ve();xt(r,e,1,s)}}),gc(e,1)}};Fl=function(e){if(e.tag===13){var t=Bt(e,134217728);if(t!==null){var n=Ve();xt(t,e,134217728,n)}gc(e,134217728)}};Qh=function(e){if(e.tag===13){var t=an(e),n=Bt(e,t);if(n!==null){var r=Ve();xt(n,e,t,r)}gc(e,t)}};Xh=function(){return ee};Yh=function(e,t){var n=ee;try{return ee=e,t()}finally{ee=n}};La=function(e,t,n){switch(t){case"input":if(Pa(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=uo(r);if(!s)throw Error(N(90));Eh(r),Pa(r,s)}}}break;case"textarea":_h(e,n);break;case"select":t=n.value,t!=null&&lr(e,!!n.multiple,t,!1)}};Oh=dc;Fh=On;var Pv={usingClientEntryPoint:!1,Events:[Ds,Xn,uo,Rh,Ih,dc]},Ur={findFiberByHostInstance:Pn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Tv={bundleType:Ur.bundleType,version:Ur.version,rendererPackageName:Ur.rendererPackageName,rendererConfig:Ur.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ut.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=zh(e),e===null?null:e.stateNode},findFiberByHostInstance:Ur.findFiberByHostInstance||jv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var si=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!si.isDisabled&&si.supportsFiber)try{oo=si.inject(Tv),Ct=si}catch{}}tt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Pv;tt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!yc(t))throw Error(N(200));return kv(e,t,null,n)};tt.createRoot=function(e,t){if(!yc(e))throw Error(N(299));var n=!1,r="",s=wm;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=pc(e,1,!1,null,null,n,!1,r,s),e[Vt]=t.current,xs(e.nodeType===8?e.parentNode:e),new vc(t)};tt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(N(188)):(e=Object.keys(e).join(","),Error(N(268,e)));return e=zh(t),e=e===null?null:e.stateNode,e};tt.flushSync=function(e){return On(e)};tt.hydrate=function(e,t,n){if(!wo(t))throw Error(N(200));return So(null,e,t,!0,n)};tt.hydrateRoot=function(e,t,n){if(!yc(e))throw Error(N(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=wm;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=xm(t,null,e,1,n??null,s,!1,i,o),e[Vt]=t.current,xs(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new xo(t)};tt.render=function(e,t,n){if(!wo(t))throw Error(N(200));return So(null,e,t,!1,n)};tt.unmountComponentAtNode=function(e){if(!wo(e))throw Error(N(40));return e._reactRootContainer?(On(function(){So(null,null,e,!1,function(){e._reactRootContainer=null,e[Vt]=null})}),!0):!1};tt.unstable_batchedUpdates=dc;tt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!wo(n))throw Error(N(200));if(e==null||e._reactInternals===void 0)throw Error(N(38));return So(e,t,n,!1,r)};tt.version="18.3.1-next-f1338f8080-20240426";function Sm(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Sm)}catch(e){console.error(e)}}Sm(),wh.exports=tt;var Ev=wh.exports,Qu=Ev;xa.createRoot=Qu.createRoot,xa.hydrateRoot=Qu.hydrateRoot;const Nv="modulepreload",_v=function(e){return"/cat-tetris/"+e},Xu={},bm=function(t,n,r){if(!n||n.length===0)return t();const s=document.getElementsByTagName("link");return Promise.all(n.map(i=>{if(i=_v(i),i in Xu)return;Xu[i]=!0;const o=i.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!r)for(let h=s.length-1;h>=0;h--){const d=s[h];if(d.href===i&&(!o||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${a}`))return;const u=document.createElement("link");if(u.rel=o?"stylesheet":Nv,o||(u.as="script",u.crossOrigin=""),u.href=i,document.head.appendChild(u),o)return new Promise((h,d)=>{u.addEventListener("load",h),u.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>t()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})},km=y.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),bo=y.createContext({}),ko=y.createContext(null),jo=typeof document<"u",xc=jo?y.useLayoutEffect:y.useEffect,jm=y.createContext({strict:!1}),wc=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),Av="framerAppearId",Cm="data-"+wc(Av);function Mv(e,t,n,r){const{visualElement:s}=y.useContext(bo),i=y.useContext(jm),o=y.useContext(ko),a=y.useContext(km).reducedMotion,c=y.useRef();r=r||i.renderer,!c.current&&r&&(c.current=r(e,{visualState:t,parent:s,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:a}));const u=c.current;y.useInsertionEffect(()=>{u&&u.update(n,o)});const h=y.useRef(!!(n[Cm]&&!window.HandoffComplete));return xc(()=>{u&&(u.render(),h.current&&u.animationState&&u.animationState.animateChanges())}),y.useEffect(()=>{u&&(u.updateFeatures(),!h.current&&u.animationState&&u.animationState.animateChanges(),h.current&&(h.current=!1,window.HandoffComplete=!0))}),u}function rr(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function Lv(e,t,n){return y.useCallback(r=>{r&&e.mount&&e.mount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):rr(n)&&(n.current=r))},[t])}function Es(e){return typeof e=="string"||Array.isArray(e)}function Co(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const Sc=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],bc=["initial",...Sc];function Po(e){return Co(e.animate)||bc.some(t=>Es(e[t]))}function Pm(e){return!!(Po(e)||e.variants)}function Dv(e,t){if(Po(e)){const{initial:n,animate:r}=e;return{initial:n===!1||Es(n)?n:void 0,animate:Es(r)?r:void 0}}return e.inherit!==!1?t:{}}function Rv(e){const{initial:t,animate:n}=Dv(e,y.useContext(bo));return y.useMemo(()=>({initial:t,animate:n}),[Yu(t),Yu(n)])}function Yu(e){return Array.isArray(e)?e.join(" "):e}const Ju={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ns={};for(const e in Ju)Ns[e]={isEnabled:t=>Ju[e].some(n=>!!t[n])};function Iv(e){for(const t in e)Ns[t]={...Ns[t],...e[t]}}const kc=y.createContext({}),Tm=y.createContext({}),Ov=Symbol.for("motionComponentSymbol");function Fv({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:r,Component:s}){e&&Iv(e);function i(a,c){let u;const h={...y.useContext(km),...a,layoutId:Vv(a)},{isStatic:d}=h,f=Rv(a),v=r(a,d);if(!d&&jo){f.visualElement=Mv(s,v,h,t);const x=y.useContext(Tm),S=y.useContext(jm).strict;f.visualElement&&(u=f.visualElement.loadFeatures(h,S,e,x))}return y.createElement(bo.Provider,{value:f},u&&f.visualElement?y.createElement(u,{visualElement:f.visualElement,...h}):null,n(s,a,Lv(v,f.visualElement,c),v,d,f.visualElement))}const o=y.forwardRef(i);return o[Ov]=s,o}function Vv({layoutId:e}){const t=y.useContext(kc).id;return t&&e!==void 0?t+"-"+e:e}function Bv(e){function t(r,s={}){return Fv(e(r,s))}if(typeof Proxy>"u")return t;const n=new Map;return new Proxy(t,{get:(r,s)=>(n.has(s)||n.set(s,t(s)),n.get(s))})}const zv=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function jc(e){return typeof e!="string"||e.includes("-")?!1:!!(zv.indexOf(e)>-1||/[A-Z]/.test(e))}const Qi={};function Hv(e){Object.assign(Qi,e)}const Is=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Hn=new Set(Is);function Em(e,{layout:t,layoutId:n}){return Hn.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!Qi[e]||e==="opacity")}const qe=e=>!!(e&&e.getVelocity),Uv={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Gv=Is.length;function $v(e,{enableHardwareAcceleration:t=!0,allowTransformNone:n=!0},r,s){let i="";for(let o=0;o<Gv;o++){const a=Is[o];if(e[a]!==void 0){const c=Uv[a]||a;i+=`${c}(${e[a]}) `}}return t&&!e.z&&(i+="translateZ(0)"),i=i.trim(),s?i=s(e,r?"":i):n&&r&&(i="none"),i}const Nm=e=>t=>typeof t=="string"&&t.startsWith(e),_m=Nm("--"),hl=Nm("var(--"),Wv=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,Kv=(e,t)=>t&&typeof e=="number"?t.transform(e):e,fn=(e,t,n)=>Math.min(Math.max(n,e),t),Un={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},os={...Un,transform:e=>fn(0,1,e)},ii={...Un,default:1},as=e=>Math.round(e*1e5)/1e5,To=/(-)?([\d]*\.?[\d])+/g,Am=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,qv=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Os(e){return typeof e=="string"}const Fs=e=>({test:t=>Os(t)&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),$t=Fs("deg"),Tt=Fs("%"),z=Fs("px"),Qv=Fs("vh"),Xv=Fs("vw"),Zu={...Tt,parse:e=>Tt.parse(e)/100,transform:e=>Tt.transform(e*100)},ed={...Un,transform:Math.round},Mm={borderWidth:z,borderTopWidth:z,borderRightWidth:z,borderBottomWidth:z,borderLeftWidth:z,borderRadius:z,radius:z,borderTopLeftRadius:z,borderTopRightRadius:z,borderBottomRightRadius:z,borderBottomLeftRadius:z,width:z,maxWidth:z,height:z,maxHeight:z,size:z,top:z,right:z,bottom:z,left:z,padding:z,paddingTop:z,paddingRight:z,paddingBottom:z,paddingLeft:z,margin:z,marginTop:z,marginRight:z,marginBottom:z,marginLeft:z,rotate:$t,rotateX:$t,rotateY:$t,rotateZ:$t,scale:ii,scaleX:ii,scaleY:ii,scaleZ:ii,skew:$t,skewX:$t,skewY:$t,distance:z,translateX:z,translateY:z,translateZ:z,x:z,y:z,z,perspective:z,transformPerspective:z,opacity:os,originX:Zu,originY:Zu,originZ:z,zIndex:ed,fillOpacity:os,strokeOpacity:os,numOctaves:ed};function Cc(e,t,n,r){const{style:s,vars:i,transform:o,transformOrigin:a}=e;let c=!1,u=!1,h=!0;for(const d in t){const f=t[d];if(_m(d)){i[d]=f;continue}const v=Mm[d],x=Kv(f,v);if(Hn.has(d)){if(c=!0,o[d]=x,!h)continue;f!==(v.default||0)&&(h=!1)}else d.startsWith("origin")?(u=!0,a[d]=x):s[d]=x}if(t.transform||(c||r?s.transform=$v(e.transform,n,h,r):s.transform&&(s.transform="none")),u){const{originX:d="50%",originY:f="50%",originZ:v=0}=a;s.transformOrigin=`${d} ${f} ${v}`}}const Pc=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Lm(e,t,n){for(const r in t)!qe(t[r])&&!Em(r,n)&&(e[r]=t[r])}function Yv({transformTemplate:e},t,n){return y.useMemo(()=>{const r=Pc();return Cc(r,t,{enableHardwareAcceleration:!n},e),Object.assign({},r.vars,r.style)},[t])}function Jv(e,t,n){const r=e.style||{},s={};return Lm(s,r,e),Object.assign(s,Yv(e,t,n)),e.transformValues?e.transformValues(s):s}function Zv(e,t,n){const r={},s=Jv(e,t,n);return e.drag&&e.dragListener!==!1&&(r.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=s,r}const ey=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Xi(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||ey.has(e)}let Dm=e=>!Xi(e);function ty(e){e&&(Dm=t=>t.startsWith("on")?!Xi(t):e(t))}try{ty(require("@emotion/is-prop-valid").default)}catch{}function ny(e,t,n){const r={};for(const s in e)s==="values"&&typeof e.values=="object"||(Dm(s)||n===!0&&Xi(s)||!t&&!Xi(s)||e.draggable&&s.startsWith("onDrag"))&&(r[s]=e[s]);return r}function td(e,t,n){return typeof e=="string"?e:z.transform(t+n*e)}function ry(e,t,n){const r=td(t,e.x,e.width),s=td(n,e.y,e.height);return`${r} ${s}`}const sy={offset:"stroke-dashoffset",array:"stroke-dasharray"},iy={offset:"strokeDashoffset",array:"strokeDasharray"};function oy(e,t,n=1,r=0,s=!0){e.pathLength=1;const i=s?sy:iy;e[i.offset]=z.transform(-r);const o=z.transform(t),a=z.transform(n);e[i.array]=`${o} ${a}`}function Tc(e,{attrX:t,attrY:n,attrScale:r,originX:s,originY:i,pathLength:o,pathSpacing:a=1,pathOffset:c=0,...u},h,d,f){if(Cc(e,u,h,f),d){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:v,style:x,dimensions:S}=e;v.transform&&(S&&(x.transform=v.transform),delete v.transform),S&&(s!==void 0||i!==void 0||x.transform)&&(x.transformOrigin=ry(S,s!==void 0?s:.5,i!==void 0?i:.5)),t!==void 0&&(v.x=t),n!==void 0&&(v.y=n),r!==void 0&&(v.scale=r),o!==void 0&&oy(v,o,a,c,!1)}const Rm=()=>({...Pc(),attrs:{}}),Ec=e=>typeof e=="string"&&e.toLowerCase()==="svg";function ay(e,t,n,r){const s=y.useMemo(()=>{const i=Rm();return Tc(i,t,{enableHardwareAcceleration:!1},Ec(r),e.transformTemplate),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};Lm(i,e.style,e),s.style={...i,...s.style}}return s}function ly(e=!1){return(n,r,s,{latestValues:i},o)=>{const c=(jc(n)?ay:Zv)(r,i,o,n),h={...ny(r,typeof n=="string",e),...c,ref:s},{children:d}=r,f=y.useMemo(()=>qe(d)?d.get():d,[d]);return y.createElement(n,{...h,children:f})}}function Im(e,{style:t,vars:n},r,s){Object.assign(e.style,t,s&&s.getProjectionStyles(r));for(const i in n)e.style.setProperty(i,n[i])}const Om=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Fm(e,t,n,r){Im(e,t,void 0,r);for(const s in t.attrs)e.setAttribute(Om.has(s)?s:wc(s),t.attrs[s])}function Nc(e,t){const{style:n}=e,r={};for(const s in n)(qe(n[s])||t.style&&qe(t.style[s])||Em(s,e))&&(r[s]=n[s]);return r}function Vm(e,t){const n=Nc(e,t);for(const r in e)if(qe(e[r])||qe(t[r])){const s=Is.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[s]=e[r]}return n}function _c(e,t,n,r={},s={}){return typeof t=="function"&&(t=t(n!==void 0?n:e.custom,r,s)),typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"&&(t=t(n!==void 0?n:e.custom,r,s)),t}function Bm(e){const t=y.useRef(null);return t.current===null&&(t.current=e()),t.current}const Yi=e=>Array.isArray(e),cy=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),uy=e=>Yi(e)?e[e.length-1]||0:e;function bi(e){const t=qe(e)?e.get():e;return cy(t)?t.toValue():t}function dy({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:n},r,s,i){const o={latestValues:hy(r,s,i,e),renderState:t()};return n&&(o.mount=a=>n(r,a,o)),o}const zm=e=>(t,n)=>{const r=y.useContext(bo),s=y.useContext(ko),i=()=>dy(e,t,r,s);return n?i():Bm(i)};function hy(e,t,n,r){const s={},i=r(e,{});for(const f in i)s[f]=bi(i[f]);let{initial:o,animate:a}=e;const c=Po(e),u=Pm(e);t&&u&&!c&&e.inherit!==!1&&(o===void 0&&(o=t.initial),a===void 0&&(a=t.animate));let h=n?n.initial===!1:!1;h=h||o===!1;const d=h?a:o;return d&&typeof d!="boolean"&&!Co(d)&&(Array.isArray(d)?d:[d]).forEach(v=>{const x=_c(e,v);if(!x)return;const{transitionEnd:S,transition:b,...p}=x;for(const m in p){let g=p[m];if(Array.isArray(g)){const w=h?g.length-1:0;g=g[w]}g!==null&&(s[m]=g)}for(const m in S)s[m]=S[m]}),s}const pe=e=>e;class nd{constructor(){this.order=[],this.scheduled=new Set}add(t){if(!this.scheduled.has(t))return this.scheduled.add(t),this.order.push(t),!0}remove(t){const n=this.order.indexOf(t);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(t))}clear(){this.order.length=0,this.scheduled.clear()}}function fy(e){let t=new nd,n=new nd,r=0,s=!1,i=!1;const o=new WeakSet,a={schedule:(c,u=!1,h=!1)=>{const d=h&&s,f=d?t:n;return u&&o.add(c),f.add(c)&&d&&s&&(r=t.order.length),c},cancel:c=>{n.remove(c),o.delete(c)},process:c=>{if(s){i=!0;return}if(s=!0,[t,n]=[n,t],n.clear(),r=t.order.length,r)for(let u=0;u<r;u++){const h=t.order[u];h(c),o.has(h)&&(a.schedule(h),e())}s=!1,i&&(i=!1,a.process(c))}};return a}const oi=["prepare","read","update","preRender","render","postRender"],my=40;function py(e,t){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=oi.reduce((d,f)=>(d[f]=fy(()=>n=!0),d),{}),o=d=>i[d].process(s),a=()=>{const d=performance.now();n=!1,s.delta=r?1e3/60:Math.max(Math.min(d-s.timestamp,my),1),s.timestamp=d,s.isProcessing=!0,oi.forEach(o),s.isProcessing=!1,n&&t&&(r=!1,e(a))},c=()=>{n=!0,r=!0,s.isProcessing||e(a)};return{schedule:oi.reduce((d,f)=>{const v=i[f];return d[f]=(x,S=!1,b=!1)=>(n||c(),v.schedule(x,S,b)),d},{}),cancel:d=>oi.forEach(f=>i[f].cancel(d)),state:s,steps:i}}const{schedule:re,cancel:Ht,state:_e,steps:na}=py(typeof requestAnimationFrame<"u"?requestAnimationFrame:pe,!0),gy={useVisualState:zm({scrapeMotionValuesFromProps:Vm,createRenderState:Rm,onMount:(e,t,{renderState:n,latestValues:r})=>{re.read(()=>{try{n.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),re.render(()=>{Tc(n,r,{enableHardwareAcceleration:!1},Ec(t.tagName),e.transformTemplate),Fm(t,n)})}})},vy={useVisualState:zm({scrapeMotionValuesFromProps:Nc,createRenderState:Pc})};function yy(e,{forwardMotionProps:t=!1},n,r){return{...jc(e)?gy:vy,preloadedFeatures:n,useRender:ly(t),createVisualElement:r,Component:e}}function Lt(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}const Hm=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function Eo(e,t="page"){return{point:{x:e[t+"X"],y:e[t+"Y"]}}}const xy=e=>t=>Hm(t)&&e(t,Eo(t));function It(e,t,n,r){return Lt(e,t,xy(n),r)}const wy=(e,t)=>n=>t(e(n)),cn=(...e)=>e.reduce(wy);function Um(e){let t=null;return()=>{const n=()=>{t=null};return t===null?(t=e,n):!1}}const rd=Um("dragHorizontal"),sd=Um("dragVertical");function Gm(e){let t=!1;if(e==="y")t=sd();else if(e==="x")t=rd();else{const n=rd(),r=sd();n&&r?t=()=>{n(),r()}:(n&&n(),r&&r())}return t}function $m(){const e=Gm(!0);return e?(e(),!1):!0}class yn{constructor(t){this.isMounted=!1,this.node=t}update(){}}function id(e,t){const n="pointer"+(t?"enter":"leave"),r="onHover"+(t?"Start":"End"),s=(i,o)=>{if(i.pointerType==="touch"||$m())return;const a=e.getProps();e.animationState&&a.whileHover&&e.animationState.setActive("whileHover",t),a[r]&&re.update(()=>a[r](i,o))};return It(e.current,n,s,{passive:!e.getProps()[r]})}class Sy extends yn{mount(){this.unmount=cn(id(this.node,!0),id(this.node,!1))}unmount(){}}class by extends yn{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=cn(Lt(this.node.current,"focus",()=>this.onFocus()),Lt(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const Wm=(e,t)=>t?e===t?!0:Wm(e,t.parentElement):!1;function ra(e,t){if(!t)return;const n=new PointerEvent("pointer"+e);t(n,Eo(n))}class ky extends yn{constructor(){super(...arguments),this.removeStartListeners=pe,this.removeEndListeners=pe,this.removeAccessibleListeners=pe,this.startPointerPress=(t,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),i=It(window,"pointerup",(a,c)=>{if(!this.checkPressEnd())return;const{onTap:u,onTapCancel:h,globalTapTarget:d}=this.node.getProps();re.update(()=>{!d&&!Wm(this.node.current,a.target)?h&&h(a,c):u&&u(a,c)})},{passive:!(r.onTap||r.onPointerUp)}),o=It(window,"pointercancel",(a,c)=>this.cancelPress(a,c),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=cn(i,o),this.startPress(t,n)},this.startAccessiblePress=()=>{const t=i=>{if(i.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||ra("up",(c,u)=>{const{onTap:h}=this.node.getProps();h&&re.update(()=>h(c,u))})};this.removeEndListeners(),this.removeEndListeners=Lt(this.node.current,"keyup",o),ra("down",(a,c)=>{this.startPress(a,c)})},n=Lt(this.node.current,"keydown",t),r=()=>{this.isPressing&&ra("cancel",(i,o)=>this.cancelPress(i,o))},s=Lt(this.node.current,"blur",r);this.removeAccessibleListeners=cn(n,s)}}startPress(t,n){this.isPressing=!0;const{onTapStart:r,whileTap:s}=this.node.getProps();s&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&re.update(()=>r(t,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!$m()}cancelPress(t,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&re.update(()=>r(t,n))}mount(){const t=this.node.getProps(),n=It(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),r=Lt(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=cn(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const fl=new WeakMap,sa=new WeakMap,jy=e=>{const t=fl.get(e.target);t&&t(e)},Cy=e=>{e.forEach(jy)};function Py({root:e,...t}){const n=e||document;sa.has(n)||sa.set(n,{});const r=sa.get(n),s=JSON.stringify(t);return r[s]||(r[s]=new IntersectionObserver(Cy,{root:e,...t})),r[s]}function Ty(e,t,n){const r=Py(t);return fl.set(e,n),r.observe(e),()=>{fl.delete(e),r.unobserve(e)}}const Ey={some:0,all:1};class Ny extends yn{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:i}=t,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:Ey[s]},a=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,i&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:h,onViewportLeave:d}=this.node.getProps(),f=u?h:d;f&&f(c)};return Ty(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(_y(t,n))&&this.startObserver()}unmount(){}}function _y({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const Ay={inView:{Feature:Ny},tap:{Feature:ky},focus:{Feature:by},hover:{Feature:Sy}};function Km(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function My(e){const t={};return e.values.forEach((n,r)=>t[r]=n.get()),t}function Ly(e){const t={};return e.values.forEach((n,r)=>t[r]=n.getVelocity()),t}function No(e,t,n){const r=e.getProps();return _c(r,t,n!==void 0?n:r.custom,My(e),Ly(e))}let Dy=pe,Ac=pe;const un=e=>e*1e3,Ot=e=>e/1e3,Ry={current:!1},qm=e=>Array.isArray(e)&&typeof e[0]=="number";function Qm(e){return!!(!e||typeof e=="string"&&Xm[e]||qm(e)||Array.isArray(e)&&e.every(Qm))}const Xr=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,Xm={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Xr([0,.65,.55,1]),circOut:Xr([.55,0,1,.45]),backIn:Xr([.31,.01,.66,-.59]),backOut:Xr([.33,1.53,.69,.99])};function Ym(e){if(e)return qm(e)?Xr(e):Array.isArray(e)?e.map(Ym):Xm[e]}function Iy(e,t,n,{delay:r=0,duration:s,repeat:i=0,repeatType:o="loop",ease:a,times:c}={}){const u={[t]:n};c&&(u.offset=c);const h=Ym(a);return Array.isArray(h)&&(u.easing=h),e.animate(u,{delay:r,duration:s,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"})}function Oy(e,{repeat:t,repeatType:n="loop"}){const r=t&&n!=="loop"&&t%2===1?0:e.length-1;return e[r]}const Jm=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,Fy=1e-7,Vy=12;function By(e,t,n,r,s){let i,o,a=0;do o=t+(n-t)/2,i=Jm(o,r,s)-e,i>0?n=o:t=o;while(Math.abs(i)>Fy&&++a<Vy);return o}function Vs(e,t,n,r){if(e===t&&n===r)return pe;const s=i=>By(i,0,1,e,n);return i=>i===0||i===1?i:Jm(s(i),t,r)}const zy=Vs(.42,0,1,1),Hy=Vs(0,0,.58,1),Zm=Vs(.42,0,.58,1),Uy=e=>Array.isArray(e)&&typeof e[0]!="number",ep=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,tp=e=>t=>1-e(1-t),Mc=e=>1-Math.sin(Math.acos(e)),np=tp(Mc),Gy=ep(Mc),rp=Vs(.33,1.53,.69,.99),Lc=tp(rp),$y=ep(Lc),Wy=e=>(e*=2)<1?.5*Lc(e):.5*(2-Math.pow(2,-10*(e-1))),Ky={linear:pe,easeIn:zy,easeInOut:Zm,easeOut:Hy,circIn:Mc,circInOut:Gy,circOut:np,backIn:Lc,backInOut:$y,backOut:rp,anticipate:Wy},od=e=>{if(Array.isArray(e)){Ac(e.length===4);const[t,n,r,s]=e;return Vs(t,n,r,s)}else if(typeof e=="string")return Ky[e];return e},Dc=(e,t)=>n=>!!(Os(n)&&qv.test(n)&&n.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(n,t)),sp=(e,t,n)=>r=>{if(!Os(r))return r;const[s,i,o,a]=r.match(To);return{[e]:parseFloat(s),[t]:parseFloat(i),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},qy=e=>fn(0,255,e),ia={...Un,transform:e=>Math.round(qy(e))},Nn={test:Dc("rgb","red"),parse:sp("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+ia.transform(e)+", "+ia.transform(t)+", "+ia.transform(n)+", "+as(os.transform(r))+")"};function Qy(e){let t="",n="",r="",s="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),s=e.substring(4,5),t+=t,n+=n,r+=r,s+=s),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const ml={test:Dc("#"),parse:Qy,transform:Nn.transform},sr={test:Dc("hsl","hue"),parse:sp("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+Tt.transform(as(t))+", "+Tt.transform(as(n))+", "+as(os.transform(r))+")"},Oe={test:e=>Nn.test(e)||ml.test(e)||sr.test(e),parse:e=>Nn.test(e)?Nn.parse(e):sr.test(e)?sr.parse(e):ml.parse(e),transform:e=>Os(e)?e:e.hasOwnProperty("red")?Nn.transform(e):sr.transform(e)},ue=(e,t,n)=>-n*e+n*t+e;function oa(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function Xy({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let s=0,i=0,o=0;if(!t)s=i=o=n;else{const a=n<.5?n*(1+t):n+t-n*t,c=2*n-a;s=oa(c,a,e+1/3),i=oa(c,a,e),o=oa(c,a,e-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:r}}const aa=(e,t,n)=>{const r=e*e;return Math.sqrt(Math.max(0,n*(t*t-r)+r))},Yy=[ml,Nn,sr],Jy=e=>Yy.find(t=>t.test(e));function ad(e){const t=Jy(e);let n=t.parse(e);return t===sr&&(n=Xy(n)),n}const ip=(e,t)=>{const n=ad(e),r=ad(t),s={...n};return i=>(s.red=aa(n.red,r.red,i),s.green=aa(n.green,r.green,i),s.blue=aa(n.blue,r.blue,i),s.alpha=ue(n.alpha,r.alpha,i),Nn.transform(s))};function Zy(e){var t,n;return isNaN(e)&&Os(e)&&(((t=e.match(To))===null||t===void 0?void 0:t.length)||0)+(((n=e.match(Am))===null||n===void 0?void 0:n.length)||0)>0}const op={regex:Wv,countKey:"Vars",token:"${v}",parse:pe},ap={regex:Am,countKey:"Colors",token:"${c}",parse:Oe.parse},lp={regex:To,countKey:"Numbers",token:"${n}",parse:Un.parse};function la(e,{regex:t,countKey:n,token:r,parse:s}){const i=e.tokenised.match(t);i&&(e["num"+n]=i.length,e.tokenised=e.tokenised.replace(t,r),e.values.push(...i.map(s)))}function Ji(e){const t=e.toString(),n={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&la(n,op),la(n,ap),la(n,lp),n}function cp(e){return Ji(e).values}function up(e){const{values:t,numColors:n,numVars:r,tokenised:s}=Ji(e),i=t.length;return o=>{let a=s;for(let c=0;c<i;c++)c<r?a=a.replace(op.token,o[c]):c<r+n?a=a.replace(ap.token,Oe.transform(o[c])):a=a.replace(lp.token,as(o[c]));return a}}const ex=e=>typeof e=="number"?0:e;function tx(e){const t=cp(e);return up(e)(t.map(ex))}const mn={test:Zy,parse:cp,createTransformer:up,getAnimatableNone:tx},dp=(e,t)=>n=>`${n>0?t:e}`;function hp(e,t){return typeof e=="number"?n=>ue(e,t,n):Oe.test(e)?ip(e,t):e.startsWith("var(")?dp(e,t):mp(e,t)}const fp=(e,t)=>{const n=[...e],r=n.length,s=e.map((i,o)=>hp(i,t[o]));return i=>{for(let o=0;o<r;o++)n[o]=s[o](i);return n}},nx=(e,t)=>{const n={...e,...t},r={};for(const s in n)e[s]!==void 0&&t[s]!==void 0&&(r[s]=hp(e[s],t[s]));return s=>{for(const i in r)n[i]=r[i](s);return n}},mp=(e,t)=>{const n=mn.createTransformer(t),r=Ji(e),s=Ji(t);return r.numVars===s.numVars&&r.numColors===s.numColors&&r.numNumbers>=s.numNumbers?cn(fp(r.values,s.values),n):dp(e,t)},_s=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r},ld=(e,t)=>n=>ue(e,t,n);function rx(e){return typeof e=="number"?ld:typeof e=="string"?Oe.test(e)?ip:mp:Array.isArray(e)?fp:typeof e=="object"?nx:ld}function sx(e,t,n){const r=[],s=n||rx(e[0]),i=e.length-1;for(let o=0;o<i;o++){let a=s(e[o],e[o+1]);if(t){const c=Array.isArray(t)?t[o]||pe:t;a=cn(c,a)}r.push(a)}return r}function pp(e,t,{clamp:n=!0,ease:r,mixer:s}={}){const i=e.length;if(Ac(i===t.length),i===1)return()=>t[0];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=sx(t,r,s),a=o.length,c=u=>{let h=0;if(a>1)for(;h<e.length-2&&!(u<e[h+1]);h++);const d=_s(e[h],e[h+1],u);return o[h](d)};return n?u=>c(fn(e[0],e[i-1],u)):c}function ix(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const s=_s(0,t,r);e.push(ue(n,1,s))}}function ox(e){const t=[0];return ix(t,e.length-1),t}function ax(e,t){return e.map(n=>n*t)}function lx(e,t){return e.map(()=>t||Zm).splice(0,e.length-1)}function Zi({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const s=Uy(r)?r.map(od):od(r),i={done:!1,value:t[0]},o=ax(n&&n.length===t.length?n:ox(t),e),a=pp(o,t,{ease:Array.isArray(s)?s:lx(t,s)});return{calculatedDuration:e,next:c=>(i.value=a(c),i.done=c>=e,i)}}function gp(e,t){return t?e*(1e3/t):0}const cx=5;function vp(e,t,n){const r=Math.max(t-cx,0);return gp(n-e(r),t-r)}const ca=.001,ux=.01,cd=10,dx=.05,hx=1;function fx({duration:e=800,bounce:t=.25,velocity:n=0,mass:r=1}){let s,i;Dy(e<=un(cd));let o=1-t;o=fn(dx,hx,o),e=fn(ux,cd,Ot(e)),o<1?(s=u=>{const h=u*o,d=h*e,f=h-n,v=pl(u,o),x=Math.exp(-d);return ca-f/v*x},i=u=>{const d=u*o*e,f=d*n+n,v=Math.pow(o,2)*Math.pow(u,2)*e,x=Math.exp(-d),S=pl(Math.pow(u,2),o);return(-s(u)+ca>0?-1:1)*((f-v)*x)/S}):(s=u=>{const h=Math.exp(-u*e),d=(u-n)*e+1;return-ca+h*d},i=u=>{const h=Math.exp(-u*e),d=(n-u)*(e*e);return h*d});const a=5/e,c=px(s,i,a);if(e=un(e),isNaN(c))return{stiffness:100,damping:10,duration:e};{const u=Math.pow(c,2)*r;return{stiffness:u,damping:o*2*Math.sqrt(r*u),duration:e}}}const mx=12;function px(e,t,n){let r=n;for(let s=1;s<mx;s++)r=r-e(r)/t(r);return r}function pl(e,t){return e*Math.sqrt(1-t*t)}const gx=["duration","bounce"],vx=["stiffness","damping","mass"];function ud(e,t){return t.some(n=>e[n]!==void 0)}function yx(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!ud(e,vx)&&ud(e,gx)){const n=fx(e);t={...t,...n,mass:1},t.isResolvedFromDuration=!0}return t}function yp({keyframes:e,restDelta:t,restSpeed:n,...r}){const s=e[0],i=e[e.length-1],o={done:!1,value:s},{stiffness:a,damping:c,mass:u,duration:h,velocity:d,isResolvedFromDuration:f}=yx({...r,velocity:-Ot(r.velocity||0)}),v=d||0,x=c/(2*Math.sqrt(a*u)),S=i-s,b=Ot(Math.sqrt(a/u)),p=Math.abs(S)<5;n||(n=p?.01:2),t||(t=p?.005:.5);let m;if(x<1){const g=pl(b,x);m=w=>{const k=Math.exp(-x*b*w);return i-k*((v+x*b*S)/g*Math.sin(g*w)+S*Math.cos(g*w))}}else if(x===1)m=g=>i-Math.exp(-b*g)*(S+(v+b*S)*g);else{const g=b*Math.sqrt(x*x-1);m=w=>{const k=Math.exp(-x*b*w),j=Math.min(g*w,300);return i-k*((v+x*b*S)*Math.sinh(j)+g*S*Math.cosh(j))/g}}return{calculatedDuration:f&&h||null,next:g=>{const w=m(g);if(f)o.done=g>=h;else{let k=v;g!==0&&(x<1?k=vp(m,g,w):k=0);const j=Math.abs(k)<=n,C=Math.abs(i-w)<=t;o.done=j&&C}return o.value=o.done?i:w,o}}}function dd({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:a,max:c,restDelta:u=.5,restSpeed:h}){const d=e[0],f={done:!1,value:d},v=P=>a!==void 0&&P<a||c!==void 0&&P>c,x=P=>a===void 0?c:c===void 0||Math.abs(a-P)<Math.abs(c-P)?a:c;let S=n*t;const b=d+S,p=o===void 0?b:o(b);p!==b&&(S=p-d);const m=P=>-S*Math.exp(-P/r),g=P=>p+m(P),w=P=>{const E=m(P),A=g(P);f.done=Math.abs(E)<=u,f.value=f.done?p:A};let k,j;const C=P=>{v(f.value)&&(k=P,j=yp({keyframes:[f.value,x(f.value)],velocity:vp(g,P,f.value),damping:s,stiffness:i,restDelta:u,restSpeed:h}))};return C(0),{calculatedDuration:null,next:P=>{let E=!1;return!j&&k===void 0&&(E=!0,w(P),C(P)),k!==void 0&&P>k?j.next(P-k):(!E&&w(P),f)}}}const xx=e=>{const t=({timestamp:n})=>e(n);return{start:()=>re.update(t,!0),stop:()=>Ht(t),now:()=>_e.isProcessing?_e.timestamp:performance.now()}},hd=2e4;function fd(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<hd;)t+=n,r=e.next(t);return t>=hd?1/0:t}const wx={decay:dd,inertia:dd,tween:Zi,keyframes:Zi,spring:yp};function eo({autoplay:e=!0,delay:t=0,driver:n=xx,keyframes:r,type:s="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:a="loop",onPlay:c,onStop:u,onComplete:h,onUpdate:d,...f}){let v=1,x=!1,S,b;const p=()=>{b=new Promise(V=>{S=V})};p();let m;const g=wx[s]||Zi;let w;g!==Zi&&typeof r[0]!="number"&&(w=pp([0,100],r,{clamp:!1}),r=[0,100]);const k=g({...f,keyframes:r});let j;a==="mirror"&&(j=g({...f,keyframes:[...r].reverse(),velocity:-(f.velocity||0)}));let C="idle",P=null,E=null,A=null;k.calculatedDuration===null&&i&&(k.calculatedDuration=fd(k));const{calculatedDuration:H}=k;let X=1/0,q=1/0;H!==null&&(X=H+o,q=X*(i+1)-o);let B=0;const G=V=>{if(E===null)return;v>0&&(E=Math.min(E,V)),v<0&&(E=Math.min(V-q/v,E)),P!==null?B=P:B=Math.round(V-E)*v;const Y=B-t*(v>=0?1:-1),Qe=v>=0?Y<0:Y>q;B=Math.max(Y,0),C==="finished"&&P===null&&(B=q);let Re=B,ht=k;if(i){const K=Math.min(B,q)/X;let U=Math.floor(K),He=K%1;!He&&K>=1&&(He=1),He===1&&U--,U=Math.min(U,i+1),!!(U%2)&&(a==="reverse"?(He=1-He,o&&(He-=o/X)):a==="mirror"&&(ht=j)),Re=fn(0,1,He)*X}const $=Qe?{done:!1,value:r[0]}:ht.next(Re);w&&($.value=w($.value));let{done:J}=$;!Qe&&H!==null&&(J=v>=0?B>=q:B<=0);const ve=P===null&&(C==="finished"||C==="running"&&J);return d&&d($.value),ve&&_(),$},R=()=>{m&&m.stop(),m=void 0},te=()=>{C="idle",R(),S(),p(),E=A=null},_=()=>{C="finished",h&&h(),R(),S()},M=()=>{if(x)return;m||(m=n(G));const V=m.now();c&&c(),P!==null?E=V-P:(!E||C==="finished")&&(E=V),C==="finished"&&p(),A=E,P=null,C="running",m.start()};e&&M();const O={then(V,Y){return b.then(V,Y)},get time(){return Ot(B)},set time(V){V=un(V),B=V,P!==null||!m||v===0?P=V:E=m.now()-V/v},get duration(){const V=k.calculatedDuration===null?fd(k):k.calculatedDuration;return Ot(V)},get speed(){return v},set speed(V){V===v||!m||(v=V,O.time=Ot(B))},get state(){return C},play:M,pause:()=>{C="paused",P=B},stop:()=>{x=!0,C!=="idle"&&(C="idle",u&&u(),te())},cancel:()=>{A!==null&&G(A),te()},complete:()=>{C="finished"},sample:V=>(E=0,G(V))};return O}function Sx(e){let t;return()=>(t===void 0&&(t=e()),t)}const bx=Sx(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),kx=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),ai=10,jx=2e4,Cx=(e,t)=>t.type==="spring"||e==="backgroundColor"||!Qm(t.ease);function Px(e,t,{onUpdate:n,onComplete:r,...s}){if(!(bx()&&kx.has(t)&&!s.repeatDelay&&s.repeatType!=="mirror"&&s.damping!==0&&s.type!=="inertia"))return!1;let o=!1,a,c,u=!1;const h=()=>{c=new Promise(g=>{a=g})};h();let{keyframes:d,duration:f=300,ease:v,times:x}=s;if(Cx(t,s)){const g=eo({...s,repeat:0,delay:0});let w={done:!1,value:d[0]};const k=[];let j=0;for(;!w.done&&j<jx;)w=g.sample(j),k.push(w.value),j+=ai;x=void 0,d=k,f=j-ai,v="linear"}const S=Iy(e.owner.current,t,d,{...s,duration:f,ease:v,times:x}),b=()=>{u=!1,S.cancel()},p=()=>{u=!0,re.update(b),a(),h()};return S.onfinish=()=>{u||(e.set(Oy(d,s)),r&&r(),p())},{then(g,w){return c.then(g,w)},attachTimeline(g){return S.timeline=g,S.onfinish=null,pe},get time(){return Ot(S.currentTime||0)},set time(g){S.currentTime=un(g)},get speed(){return S.playbackRate},set speed(g){S.playbackRate=g},get duration(){return Ot(f)},play:()=>{o||(S.play(),Ht(b))},pause:()=>S.pause(),stop:()=>{if(o=!0,S.playState==="idle")return;const{currentTime:g}=S;if(g){const w=eo({...s,autoplay:!1});e.setWithVelocity(w.sample(g-ai).value,w.sample(g).value,ai)}p()},complete:()=>{u||S.finish()},cancel:p}}function Tx({keyframes:e,delay:t,onUpdate:n,onComplete:r}){const s=()=>(n&&n(e[e.length-1]),r&&r(),{time:0,speed:1,duration:0,play:pe,pause:pe,stop:pe,then:i=>(i(),Promise.resolve()),cancel:pe,complete:pe});return t?eo({keyframes:[0,1],duration:0,delay:t,onComplete:s}):s()}const Ex={type:"spring",stiffness:500,damping:25,restSpeed:10},Nx=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),_x={type:"keyframes",duration:.8},Ax={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Mx=(e,{keyframes:t})=>t.length>2?_x:Hn.has(e)?e.startsWith("scale")?Nx(t[1]):Ex:Ax,gl=(e,t)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(mn.test(t)||t==="0")&&!t.startsWith("url(")),Lx=new Set(["brightness","contrast","saturate","opacity"]);function Dx(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(To)||[];if(!r)return e;const s=n.replace(r,"");let i=Lx.has(t)?1:0;return r!==n&&(i*=100),t+"("+i+s+")"}const Rx=/([a-z-]*)\(.*?\)/g,vl={...mn,getAnimatableNone:e=>{const t=e.match(Rx);return t?t.map(Dx).join(" "):e}},Ix={...Mm,color:Oe,backgroundColor:Oe,outlineColor:Oe,fill:Oe,stroke:Oe,borderColor:Oe,borderTopColor:Oe,borderRightColor:Oe,borderBottomColor:Oe,borderLeftColor:Oe,filter:vl,WebkitFilter:vl},Rc=e=>Ix[e];function xp(e,t){let n=Rc(e);return n!==vl&&(n=mn),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const wp=e=>/^0[^.\s]+$/.test(e);function Ox(e){if(typeof e=="number")return e===0;if(e!==null)return e==="none"||e==="0"||wp(e)}function Fx(e,t,n,r){const s=gl(t,n);let i;Array.isArray(n)?i=[...n]:i=[null,n];const o=r.from!==void 0?r.from:e.get();let a;const c=[];for(let u=0;u<i.length;u++)i[u]===null&&(i[u]=u===0?o:i[u-1]),Ox(i[u])&&c.push(u),typeof i[u]=="string"&&i[u]!=="none"&&i[u]!=="0"&&(a=i[u]);if(s&&c.length&&a)for(let u=0;u<c.length;u++){const h=c[u];i[h]=xp(t,a)}return i}function Vx({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:a,from:c,elapsed:u,...h}){return!!Object.keys(h).length}function Ic(e,t){return e[t]||e.default||e}const Bx={skipAnimations:!1},Oc=(e,t,n,r={})=>s=>{const i=Ic(r,e)||{},o=i.delay||r.delay||0;let{elapsed:a=0}=r;a=a-un(o);const c=Fx(t,e,n,i),u=c[0],h=c[c.length-1],d=gl(e,u),f=gl(e,h);let v={keyframes:c,velocity:t.getVelocity(),ease:"easeOut",...i,delay:-a,onUpdate:x=>{t.set(x),i.onUpdate&&i.onUpdate(x)},onComplete:()=>{s(),i.onComplete&&i.onComplete()}};if(Vx(i)||(v={...v,...Mx(e,v)}),v.duration&&(v.duration=un(v.duration)),v.repeatDelay&&(v.repeatDelay=un(v.repeatDelay)),!d||!f||Ry.current||i.type===!1||Bx.skipAnimations)return Tx(v);if(!r.isHandoff&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const x=Px(t,e,v);if(x)return x}return eo(v)};function to(e){return!!(qe(e)&&e.add)}const Sp=e=>/^\-?\d*\.?\d+$/.test(e);function Fc(e,t){e.indexOf(t)===-1&&e.push(t)}function Vc(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class Bc{constructor(){this.subscriptions=[]}add(t){return Fc(this.subscriptions,t),()=>Vc(this.subscriptions,t)}notify(t,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,n,r);else for(let i=0;i<s;i++){const o=this.subscriptions[i];o&&o(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const zx=e=>!isNaN(parseFloat(e));class Hx{constructor(t,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,s=!0)=>{this.prev=this.current,this.current=r;const{delta:i,timestamp:o}=_e;this.lastUpdated!==o&&(this.timeDelta=i,this.lastUpdated=o,re.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>re.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=zx(this.current),this.owner=n.owner}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new Bc);const r=this.events[t].add(n);return t==="change"?()=>{r(),re.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,r){this.set(n),this.prev=t,this.timeDelta=r}jump(t){this.updateAndNotify(t),this.prev=t,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?gp(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function br(e,t){return new Hx(e,t)}const bp=e=>t=>t.test(e),Ux={test:e=>e==="auto",parse:e=>e},kp=[Un,z,Tt,$t,Xv,Qv,Ux],Gr=e=>kp.find(bp(e)),Gx=[...kp,Oe,mn],$x=e=>Gx.find(bp(e));function Wx(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,br(n))}function Kx(e,t){const n=No(e,t);let{transitionEnd:r={},transition:s={},...i}=n?e.makeTargetAnimatable(n,!1):{};i={...i,...r};for(const o in i){const a=uy(i[o]);Wx(e,o,a)}}function qx(e,t,n){var r,s;const i=Object.keys(t).filter(a=>!e.hasValue(a)),o=i.length;if(o)for(let a=0;a<o;a++){const c=i[a],u=t[c];let h=null;Array.isArray(u)&&(h=u[0]),h===null&&(h=(s=(r=n[c])!==null&&r!==void 0?r:e.readValue(c))!==null&&s!==void 0?s:t[c]),h!=null&&(typeof h=="string"&&(Sp(h)||wp(h))?h=parseFloat(h):!$x(h)&&mn.test(u)&&(h=xp(c,u)),e.addValue(c,br(h,{owner:e})),n[c]===void 0&&(n[c]=h),h!==null&&e.setBaseTarget(c,h))}}function Qx(e,t){return t?(t[e]||t.default||t).from:void 0}function Xx(e,t,n){const r={};for(const s in e){const i=Qx(s,t);if(i!==void 0)r[s]=i;else{const o=n.getValue(s);o&&(r[s]=o.get())}}return r}function Yx({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function Jx(e,t){const n=e.get();if(Array.isArray(t)){for(let r=0;r<t.length;r++)if(t[r]!==n)return!0}else return n!==t}function jp(e,t,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:i=e.getDefaultTransition(),transitionEnd:o,...a}=e.makeTargetAnimatable(t);const c=e.getValue("willChange");r&&(i=r);const u=[],h=s&&e.animationState&&e.animationState.getState()[s];for(const d in a){const f=e.getValue(d),v=a[d];if(!f||v===void 0||h&&Yx(h,d))continue;const x={delay:n,elapsed:0,...Ic(i||{},d)};if(window.HandoffAppearAnimations){const p=e.getProps()[Cm];if(p){const m=window.HandoffAppearAnimations(p,d,f,re);m!==null&&(x.elapsed=m,x.isHandoff=!0)}}let S=!x.isHandoff&&!Jx(f,v);if(x.type==="spring"&&(f.getVelocity()||x.velocity)&&(S=!1),f.animation&&(S=!1),S)continue;f.start(Oc(d,f,v,e.shouldReduceMotion&&Hn.has(d)?{type:!1}:x));const b=f.animation;to(c)&&(c.add(d),b.then(()=>c.remove(d))),u.push(b)}return o&&Promise.all(u).then(()=>{o&&Kx(e,o)}),u}function yl(e,t,n={}){const r=No(e,t,n.custom);let{transition:s=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const i=r?()=>Promise.all(jp(e,r,n)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:h,staggerDirection:d}=s;return Zx(e,t,u+c,h,d,n)}:()=>Promise.resolve(),{when:a}=s;if(a){const[c,u]=a==="beforeChildren"?[i,o]:[o,i];return c().then(()=>u())}else return Promise.all([i(),o(n.delay)])}function Zx(e,t,n=0,r=0,s=1,i){const o=[],a=(e.variantChildren.size-1)*r,c=s===1?(u=0)=>u*r:(u=0)=>a-u*r;return Array.from(e.variantChildren).sort(ew).forEach((u,h)=>{u.notify("AnimationStart",t),o.push(yl(u,t,{...i,delay:n+c(h)}).then(()=>u.notify("AnimationComplete",t)))}),Promise.all(o)}function ew(e,t){return e.sortNodePosition(t)}function tw(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const s=t.map(i=>yl(e,i,n));r=Promise.all(s)}else if(typeof t=="string")r=yl(e,t,n);else{const s=typeof t=="function"?No(e,t,n.custom):t;r=Promise.all(jp(e,s,n))}return r.then(()=>e.notify("AnimationComplete",t))}const nw=[...Sc].reverse(),rw=Sc.length;function sw(e){return t=>Promise.all(t.map(({animation:n,options:r})=>tw(e,n,r)))}function iw(e){let t=sw(e);const n=aw();let r=!0;const s=(c,u)=>{const h=No(e,u);if(h){const{transition:d,transitionEnd:f,...v}=h;c={...c,...v,...f}}return c};function i(c){t=c(e)}function o(c,u){const h=e.getProps(),d=e.getVariantContext(!0)||{},f=[],v=new Set;let x={},S=1/0;for(let p=0;p<rw;p++){const m=nw[p],g=n[m],w=h[m]!==void 0?h[m]:d[m],k=Es(w),j=m===u?g.isActive:null;j===!1&&(S=p);let C=w===d[m]&&w!==h[m]&&k;if(C&&r&&e.manuallyAnimateOnMount&&(C=!1),g.protectedKeys={...x},!g.isActive&&j===null||!w&&!g.prevProp||Co(w)||typeof w=="boolean")continue;let E=ow(g.prevProp,w)||m===u&&g.isActive&&!C&&k||p>S&&k,A=!1;const H=Array.isArray(w)?w:[w];let X=H.reduce(s,{});j===!1&&(X={});const{prevResolvedValues:q={}}=g,B={...q,...X},G=R=>{E=!0,v.has(R)&&(A=!0,v.delete(R)),g.needsAnimating[R]=!0};for(const R in B){const te=X[R],_=q[R];if(x.hasOwnProperty(R))continue;let M=!1;Yi(te)&&Yi(_)?M=!Km(te,_):M=te!==_,M?te!==void 0?G(R):v.add(R):te!==void 0&&v.has(R)?G(R):g.protectedKeys[R]=!0}g.prevProp=w,g.prevResolvedValues=X,g.isActive&&(x={...x,...X}),r&&e.blockInitialAnimation&&(E=!1),E&&(!C||A)&&f.push(...H.map(R=>({animation:R,options:{type:m,...c}})))}if(v.size){const p={};v.forEach(m=>{const g=e.getBaseTarget(m);g!==void 0&&(p[m]=g)}),f.push({animation:p})}let b=!!f.length;return r&&(h.initial===!1||h.initial===h.animate)&&!e.manuallyAnimateOnMount&&(b=!1),r=!1,b?t(f):Promise.resolve()}function a(c,u,h){var d;if(n[c].isActive===u)return Promise.resolve();(d=e.variantChildren)===null||d===void 0||d.forEach(v=>{var x;return(x=v.animationState)===null||x===void 0?void 0:x.setActive(c,u)}),n[c].isActive=u;const f=o(h,c);for(const v in n)n[v].protectedKeys={};return f}return{animateChanges:o,setActive:a,setAnimateFunction:i,getState:()=>n}}function ow(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!Km(t,e):!1}function xn(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function aw(){return{animate:xn(!0),whileInView:xn(),whileHover:xn(),whileTap:xn(),whileDrag:xn(),whileFocus:xn(),exit:xn()}}class lw extends yn{constructor(t){super(t),t.animationState||(t.animationState=iw(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();this.unmount(),Co(t)&&(this.unmount=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let cw=0;class uw extends yn{constructor(){super(...arguments),this.id=cw++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n,custom:r}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===s)return;const i=this.node.animationState.setActive("exit",!t,{custom:r??this.node.getProps().custom});n&&!t&&i.then(()=>n(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const dw={animation:{Feature:lw},exit:{Feature:uw}},md=(e,t)=>Math.abs(e-t);function hw(e,t){const n=md(e.x,t.x),r=md(e.y,t.y);return Math.sqrt(n**2+r**2)}class Cp{constructor(t,n,{transformPagePoint:r,contextWindow:s,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=da(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,v=hw(d.offset,{x:0,y:0})>=3;if(!f&&!v)return;const{point:x}=d,{timestamp:S}=_e;this.history.push({...x,timestamp:S});const{onStart:b,onMove:p}=this.handlers;f||(b&&b(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),p&&p(this.lastMoveEvent,d)},this.handlePointerMove=(d,f)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=ua(f,this.transformPagePoint),re.update(this.updatePoint,!0)},this.handlePointerUp=(d,f)=>{this.end();const{onEnd:v,onSessionEnd:x,resumeAnimation:S}=this.handlers;if(this.dragSnapToOrigin&&S&&S(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const b=da(d.type==="pointercancel"?this.lastMoveEventInfo:ua(f,this.transformPagePoint),this.history);this.startEvent&&v&&v(d,b),x&&x(d,b)},!Hm(t))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.contextWindow=s||window;const o=Eo(t),a=ua(o,this.transformPagePoint),{point:c}=a,{timestamp:u}=_e;this.history=[{...c,timestamp:u}];const{onSessionStart:h}=n;h&&h(t,da(a,this.history)),this.removeListeners=cn(It(this.contextWindow,"pointermove",this.handlePointerMove),It(this.contextWindow,"pointerup",this.handlePointerUp),It(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Ht(this.updatePoint)}}function ua(e,t){return t?{point:t(e.point)}:e}function pd(e,t){return{x:e.x-t.x,y:e.y-t.y}}function da({point:e},t){return{point:e,delta:pd(e,Pp(t)),offset:pd(e,fw(t)),velocity:mw(t,.1)}}function fw(e){return e[0]}function Pp(e){return e[e.length-1]}function mw(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const s=Pp(e);for(;n>=0&&(r=e[n],!(s.timestamp-r.timestamp>un(t)));)n--;if(!r)return{x:0,y:0};const i=Ot(s.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const o={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function et(e){return e.max-e.min}function xl(e,t=0,n=.01){return Math.abs(e-t)<=n}function gd(e,t,n,r=.5){e.origin=r,e.originPoint=ue(t.min,t.max,e.origin),e.scale=et(n)/et(t),(xl(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=ue(n.min,n.max,e.origin)-e.originPoint,(xl(e.translate)||isNaN(e.translate))&&(e.translate=0)}function ls(e,t,n,r){gd(e.x,t.x,n.x,r?r.originX:void 0),gd(e.y,t.y,n.y,r?r.originY:void 0)}function vd(e,t,n){e.min=n.min+t.min,e.max=e.min+et(t)}function pw(e,t,n){vd(e.x,t.x,n.x),vd(e.y,t.y,n.y)}function yd(e,t,n){e.min=t.min-n.min,e.max=e.min+et(t)}function cs(e,t,n){yd(e.x,t.x,n.x),yd(e.y,t.y,n.y)}function gw(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?ue(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?ue(n,e,r.max):Math.min(e,n)),e}function xd(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function vw(e,{top:t,left:n,bottom:r,right:s}){return{x:xd(e.x,n,s),y:xd(e.y,t,r)}}function wd(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function yw(e,t){return{x:wd(e.x,t.x),y:wd(e.y,t.y)}}function xw(e,t){let n=.5;const r=et(e),s=et(t);return s>r?n=_s(t.min,t.max-r,e.min):r>s&&(n=_s(e.min,e.max-s,t.min)),fn(0,1,n)}function ww(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const wl=.35;function Sw(e=wl){return e===!1?e=0:e===!0&&(e=wl),{x:Sd(e,"left","right"),y:Sd(e,"top","bottom")}}function Sd(e,t,n){return{min:bd(e,t),max:bd(e,n)}}function bd(e,t){return typeof e=="number"?e:e[t]||0}const kd=()=>({translate:0,scale:1,origin:0,originPoint:0}),ir=()=>({x:kd(),y:kd()}),jd=()=>({min:0,max:0}),ye=()=>({x:jd(),y:jd()});function it(e){return[e("x"),e("y")]}function Tp({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function bw({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function kw(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function ha(e){return e===void 0||e===1}function Sl({scale:e,scaleX:t,scaleY:n}){return!ha(e)||!ha(t)||!ha(n)}function kn(e){return Sl(e)||Ep(e)||e.z||e.rotate||e.rotateX||e.rotateY}function Ep(e){return Cd(e.x)||Cd(e.y)}function Cd(e){return e&&e!=="0%"}function no(e,t,n){const r=e-n,s=t*r;return n+s}function Pd(e,t,n,r,s){return s!==void 0&&(e=no(e,s,r)),no(e,n,r)+t}function bl(e,t=0,n=1,r,s){e.min=Pd(e.min,t,n,r,s),e.max=Pd(e.max,t,n,r,s)}function Np(e,{x:t,y:n}){bl(e.x,t.translate,t.scale,t.originPoint),bl(e.y,n.translate,n.scale,n.originPoint)}function jw(e,t,n,r=!1){const s=n.length;if(!s)return;t.x=t.y=1;let i,o;for(let a=0;a<s;a++){i=n[a],o=i.projectionDelta;const c=i.instance;c&&c.style&&c.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&or(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,Np(e,o)),r&&kn(i.latestValues)&&or(e,i.latestValues))}t.x=Td(t.x),t.y=Td(t.y)}function Td(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function Qt(e,t){e.min=e.min+t,e.max=e.max+t}function Ed(e,t,[n,r,s]){const i=t[s]!==void 0?t[s]:.5,o=ue(e.min,e.max,i);bl(e,t[n],t[r],o,t.scale)}const Cw=["x","scaleX","originX"],Pw=["y","scaleY","originY"];function or(e,t){Ed(e.x,t,Cw),Ed(e.y,t,Pw)}function _p(e,t){return Tp(kw(e.getBoundingClientRect(),t))}function Tw(e,t,n){const r=_p(e,n),{scroll:s}=t;return s&&(Qt(r.x,s.offset.x),Qt(r.y,s.offset.y)),r}const Ap=({current:e})=>e?e.ownerDocument.defaultView:null,Ew=new WeakMap;class Nw{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ye(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=h=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Eo(h,"page").point)},i=(h,d)=>{const{drag:f,dragPropagation:v,onDragStart:x}=this.getProps();if(f&&!v&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=Gm(f),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),it(b=>{let p=this.getAxisMotionValue(b).get()||0;if(Tt.test(p)){const{projection:m}=this.visualElement;if(m&&m.layout){const g=m.layout.layoutBox[b];g&&(p=et(g)*(parseFloat(p)/100))}}this.originPoint[b]=p}),x&&re.update(()=>x(h,d),!1,!0);const{animationState:S}=this.visualElement;S&&S.setActive("whileDrag",!0)},o=(h,d)=>{const{dragPropagation:f,dragDirectionLock:v,onDirectionLock:x,onDrag:S}=this.getProps();if(!f&&!this.openGlobalLock)return;const{offset:b}=d;if(v&&this.currentDirection===null){this.currentDirection=_w(b),this.currentDirection!==null&&x&&x(this.currentDirection);return}this.updateAxis("x",d.point,b),this.updateAxis("y",d.point,b),this.visualElement.render(),S&&S(h,d)},a=(h,d)=>this.stop(h,d),c=()=>it(h=>{var d;return this.getAnimationState(h)==="paused"&&((d=this.getAxisMotionValue(h).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new Cp(t,{onSessionStart:s,onStart:i,onMove:o,onSessionEnd:a,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:Ap(this.visualElement)})}stop(t,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:s}=n;this.startAnimation(s);const{onDragEnd:i}=this.getProps();i&&re.update(()=>i(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:s}=this.getProps();if(!r||!li(t,s,this.currentDirection))return;const i=this.getAxisMotionValue(t);let o=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(o=gw(o,this.constraints[t],this.elastic[t])),i.set(o)}resolveConstraints(){var t;const{dragConstraints:n,dragElastic:r}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,i=this.constraints;n&&rr(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&s?this.constraints=vw(s.layoutBox,n):this.constraints=!1,this.elastic=Sw(r),i!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&it(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=ww(s.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!rr(t))return!1;const r=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=Tw(r,s.root,this.visualElement.getTransformPagePoint());let o=yw(s.layout.layoutBox,i);if(n){const a=n(bw(o));this.hasMutatedConstraints=!!a,a&&(o=Tp(a))}return o}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),c=this.constraints||{},u=it(h=>{if(!li(h,n,this.currentDirection))return;let d=c&&c[h]||{};o&&(d={min:0,max:0});const f=s?200:1e6,v=s?40:1e7,x={type:"inertia",velocity:r?t[h]:0,bounceStiffness:f,bounceDamping:v,timeConstant:750,restDelta:1,restSpeed:10,...i,...d};return this.startAxisValueAnimation(h,x)});return Promise.all(u).then(a)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return r.start(Oc(t,r,0,n))}stopAnimation(){it(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){it(t=>{var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(t){const n="_drag"+t.toUpperCase(),r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){it(n=>{const{drag:r}=this.getProps();if(!li(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(n);if(s&&s.layout){const{min:o,max:a}=s.layout.layoutBox[n];i.set(t[n]-ue(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!rr(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};it(o=>{const a=this.getAxisMotionValue(o);if(a){const c=a.get();s[o]=xw({min:c,max:c},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),it(o=>{if(!li(o,t,null))return;const a=this.getAxisMotionValue(o),{min:c,max:u}=this.constraints[o];a.set(ue(c,u,s[o]))})}addListeners(){if(!this.visualElement.current)return;Ew.set(this.visualElement,this);const t=this.visualElement.current,n=It(t,"pointerdown",c=>{const{drag:u,dragListener:h=!0}=this.getProps();u&&h&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();rr(c)&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),r();const o=Lt(window,"resize",()=>this.scalePositionWithinConstraints()),a=s.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(it(h=>{const d=this.getAxisMotionValue(h);d&&(this.originPoint[h]+=c[h].translate,d.set(d.get()+c[h].translate))}),this.visualElement.render())});return()=>{o(),n(),i(),a&&a()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:o=wl,dragMomentum:a=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:i,dragElastic:o,dragMomentum:a}}}function li(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function _w(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class Aw extends yn{constructor(t){super(t),this.removeGroupControls=pe,this.removeListeners=pe,this.controls=new Nw(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||pe}unmount(){this.removeGroupControls(),this.removeListeners()}}const Nd=e=>(t,n)=>{e&&re.update(()=>e(t,n))};class Mw extends yn{constructor(){super(...arguments),this.removePointerDownListener=pe}onPointerDown(t){this.session=new Cp(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Ap(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:Nd(t),onStart:Nd(n),onMove:r,onEnd:(i,o)=>{delete this.session,s&&re.update(()=>s(i,o))}}}mount(){this.removePointerDownListener=It(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function Lw(){const e=y.useContext(ko);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:n,register:r}=e,s=y.useId();return y.useEffect(()=>r(s),[]),!t&&n?[!1,()=>n&&n(s)]:[!0]}const ki={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function _d(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const $r={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(z.test(e))e=parseFloat(e);else return e;const n=_d(e,t.target.x),r=_d(e,t.target.y);return`${n}% ${r}%`}},Dw={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,s=mn.parse(e);if(s.length>5)return r;const i=mn.createTransformer(e),o=typeof s[0]!="number"?1:0,a=n.x.scale*t.x,c=n.y.scale*t.y;s[0+o]/=a,s[1+o]/=c;const u=ue(a,c,.5);return typeof s[2+o]=="number"&&(s[2+o]/=u),typeof s[3+o]=="number"&&(s[3+o]/=u),i(s)}};class Rw extends ce.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:i}=t;Hv(Iw),i&&(n.group&&n.group.add(i),r&&r.register&&s&&r.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),ki.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:s,isPresent:i}=this.props,o=r.projection;return o&&(o.isPresent=i,s||t.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?o.promote():o.relegate()||re.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),queueMicrotask(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=t;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function Mp(e){const[t,n]=Lw(),r=y.useContext(kc);return ce.createElement(Rw,{...e,layoutGroup:r,switchLayoutGroup:y.useContext(Tm),isPresent:t,safeToRemove:n})}const Iw={borderRadius:{...$r,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:$r,borderTopRightRadius:$r,borderBottomLeftRadius:$r,borderBottomRightRadius:$r,boxShadow:Dw},Lp=["TopLeft","TopRight","BottomLeft","BottomRight"],Ow=Lp.length,Ad=e=>typeof e=="string"?parseFloat(e):e,Md=e=>typeof e=="number"||z.test(e);function Fw(e,t,n,r,s,i){s?(e.opacity=ue(0,n.opacity!==void 0?n.opacity:1,Vw(r)),e.opacityExit=ue(t.opacity!==void 0?t.opacity:1,0,Bw(r))):i&&(e.opacity=ue(t.opacity!==void 0?t.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<Ow;o++){const a=`border${Lp[o]}Radius`;let c=Ld(t,a),u=Ld(n,a);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||Md(c)===Md(u)?(e[a]=Math.max(ue(Ad(c),Ad(u),r),0),(Tt.test(u)||Tt.test(c))&&(e[a]+="%")):e[a]=u}(t.rotate||n.rotate)&&(e.rotate=ue(t.rotate||0,n.rotate||0,r))}function Ld(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const Vw=Dp(0,.5,np),Bw=Dp(.5,.95,pe);function Dp(e,t,n){return r=>r<e?0:r>t?1:n(_s(e,t,r))}function Dd(e,t){e.min=t.min,e.max=t.max}function rt(e,t){Dd(e.x,t.x),Dd(e.y,t.y)}function Rd(e,t,n,r,s){return e-=t,e=no(e,1/n,r),s!==void 0&&(e=no(e,1/s,r)),e}function zw(e,t=0,n=1,r=.5,s,i=e,o=e){if(Tt.test(t)&&(t=parseFloat(t),t=ue(o.min,o.max,t/100)-o.min),typeof t!="number")return;let a=ue(i.min,i.max,r);e===i&&(a-=t),e.min=Rd(e.min,t,n,a,s),e.max=Rd(e.max,t,n,a,s)}function Id(e,t,[n,r,s],i,o){zw(e,t[n],t[r],t[s],t.scale,i,o)}const Hw=["x","scaleX","originX"],Uw=["y","scaleY","originY"];function Od(e,t,n,r){Id(e.x,t,Hw,n?n.x:void 0,r?r.x:void 0),Id(e.y,t,Uw,n?n.y:void 0,r?r.y:void 0)}function Fd(e){return e.translate===0&&e.scale===1}function Rp(e){return Fd(e.x)&&Fd(e.y)}function Gw(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}function Ip(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function Vd(e){return et(e.x)/et(e.y)}class $w{constructor(){this.members=[]}add(t){Fc(this.members,t),t.scheduleRender()}remove(t){if(Vc(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(s=>t===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Bd(e,t,n){let r="";const s=e.x.translate/t.x,i=e.y.translate/t.y;if((s||i)&&(r=`translate3d(${s}px, ${i}px, 0) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{rotate:c,rotateX:u,rotateY:h}=n;c&&(r+=`rotate(${c}deg) `),u&&(r+=`rotateX(${u}deg) `),h&&(r+=`rotateY(${h}deg) `)}const o=e.x.scale*t.x,a=e.y.scale*t.y;return(o!==1||a!==1)&&(r+=`scale(${o}, ${a})`),r||"none"}const Ww=(e,t)=>e.depth-t.depth;class Kw{constructor(){this.children=[],this.isDirty=!1}add(t){Fc(this.children,t),this.isDirty=!0}remove(t){Vc(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(Ww),this.isDirty=!1,this.children.forEach(t)}}function qw(e,t){const n=performance.now(),r=({timestamp:s})=>{const i=s-n;i>=t&&(Ht(r),e(i-t))};return re.read(r,!0),()=>Ht(r)}function Qw(e){window.MotionDebug&&window.MotionDebug.record(e)}function Xw(e){return e instanceof SVGElement&&e.tagName!=="svg"}function Yw(e,t,n){const r=qe(e)?e:br(e);return r.start(Oc("",r,t,n)),r.animation}const zd=["","X","Y","Z"],Jw={visibility:"hidden"},Hd=1e3;let Zw=0;const jn={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function Op({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(o={},a=t==null?void 0:t()){this.id=Zw++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,jn.totalNodes=jn.resolvedTargetDeltas=jn.recalculatedProjection=0,this.nodes.forEach(n1),this.nodes.forEach(a1),this.nodes.forEach(l1),this.nodes.forEach(r1),Qw(jn)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new Kw)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Bc),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const c=this.eventHandlers.get(o);c&&c.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=Xw(o),this.instance=o;const{layoutId:c,layout:u,visualElement:h}=this.options;if(h&&!h.current&&h.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(u||c)&&(this.isLayoutDirty=!0),e){let d;const f=()=>this.root.updateBlockedByResize=!1;e(o,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=qw(f,250),ki.hasAnimatedSinceResize&&(ki.hasAnimatedSinceResize=!1,this.nodes.forEach(Gd))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&h&&(c||u)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:f,hasRelativeTargetChanged:v,layout:x})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const S=this.options.transition||h.getDefaultTransition()||f1,{onLayoutAnimationStart:b,onLayoutAnimationComplete:p}=h.getProps(),m=!this.targetLayout||!Ip(this.targetLayout,x)||v,g=!f&&v;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||g||f&&(m||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,g);const w={...Ic(S,"layout"),onPlay:b,onComplete:p};(h.shouldReduceMotion||this.options.layoutRoot)&&(w.delay=0,w.type=!1),this.startAnimation(w)}else f||Gd(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=x})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Ht(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(c1),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const d=this.path[h];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:a,layout:c}=this.options;if(a===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Ud);return}this.isUpdating||this.nodes.forEach(i1),this.isUpdating=!1,this.nodes.forEach(o1),this.nodes.forEach(e1),this.nodes.forEach(t1),this.clearAllSnapshots();const a=performance.now();_e.delta=fn(0,1e3/60,a-_e.timestamp),_e.timestamp=a,_e.isProcessing=!0,na.update.process(_e),na.preRender.process(_e),na.render.process(_e),_e.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(s1),this.sharedNodes.forEach(u1)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,re.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){re.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ye(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:r(this.instance),offset:n(this.instance)})}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform,a=this.projectionDelta&&!Rp(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,h=u!==this.prevTransformTemplateValue;o&&(a||kn(this.latestValues)||h)&&(s(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let c=this.removeElementScroll(a);return o&&(c=this.removeTransform(c)),m1(c),{animationId:this.root.animationId,measuredBox:a,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return ye();const a=o.measureViewportBox(),{scroll:c}=this.root;return c&&(Qt(a.x,c.offset.x),Qt(a.y,c.offset.y)),a}removeElementScroll(o){const a=ye();rt(a,o);for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:h,options:d}=u;if(u!==this.root&&h&&d.layoutScroll){if(h.isRoot){rt(a,o);const{scroll:f}=this.root;f&&(Qt(a.x,-f.offset.x),Qt(a.y,-f.offset.y))}Qt(a.x,h.offset.x),Qt(a.y,h.offset.y)}}return a}applyTransform(o,a=!1){const c=ye();rt(c,o);for(let u=0;u<this.path.length;u++){const h=this.path[u];!a&&h.options.layoutScroll&&h.scroll&&h!==h.root&&or(c,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),kn(h.latestValues)&&or(c,h.latestValues)}return kn(this.latestValues)&&or(c,this.latestValues),c}removeTransform(o){const a=ye();rt(a,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!kn(u.latestValues))continue;Sl(u.latestValues)&&u.updateSnapshot();const h=ye(),d=u.measurePageBox();rt(h,d),Od(a,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,h)}return kn(this.latestValues)&&Od(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==_e.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==c;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:d,layoutId:f}=this.options;if(!(!this.layout||!(d||f))){if(this.resolvedRelativeTargetAt=_e.timestamp,!this.targetDelta&&!this.relativeTarget){const v=this.getClosestProjectingParent();v&&v.layout&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ye(),this.relativeTargetOrigin=ye(),cs(this.relativeTargetOrigin,this.layout.layoutBox,v.layout.layoutBox),rt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=ye(),this.targetWithTransforms=ye()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),pw(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):rt(this.target,this.layout.layoutBox),Np(this.target,this.targetDelta)):rt(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const v=this.getClosestProjectingParent();v&&!!v.resumingFrom==!!this.resumingFrom&&!v.options.layoutScroll&&v.target&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ye(),this.relativeTargetOrigin=ye(),cs(this.relativeTargetOrigin,this.target,v.target),rt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}jn.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Sl(this.parent.latestValues)||Ep(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),c=!!this.resumingFrom||this!==a;let u=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(u=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===_e.timestamp&&(u=!1),u)return;const{layout:h,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||d))return;rt(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,v=this.treeScale.y;jw(this.layoutCorrected,this.treeScale,this.path,c),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox);const{target:x}=a;if(!x){this.projectionTransform&&(this.projectionDelta=ir(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=ir(),this.projectionDeltaWithTransform=ir());const S=this.projectionTransform;ls(this.projectionDelta,this.layoutCorrected,x,this.latestValues),this.projectionTransform=Bd(this.projectionDelta,this.treeScale),(this.projectionTransform!==S||this.treeScale.x!==f||this.treeScale.y!==v)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",x)),jn.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,a=!1){const c=this.snapshot,u=c?c.latestValues:{},h={...this.latestValues},d=ir();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const f=ye(),v=c?c.source:void 0,x=this.layout?this.layout.source:void 0,S=v!==x,b=this.getStack(),p=!b||b.members.length<=1,m=!!(S&&!p&&this.options.crossfade===!0&&!this.path.some(h1));this.animationProgress=0;let g;this.mixTargetDelta=w=>{const k=w/1e3;$d(d.x,o.x,k),$d(d.y,o.y,k),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(cs(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),d1(this.relativeTarget,this.relativeTargetOrigin,f,k),g&&Gw(this.relativeTarget,g)&&(this.isProjectionDirty=!1),g||(g=ye()),rt(g,this.relativeTarget)),S&&(this.animationValues=h,Fw(h,u,this.latestValues,k,m,p)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=k},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Ht(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=re.update(()=>{ki.hasAnimatedSinceResize=!0,this.currentAnimation=Yw(0,Hd,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Hd),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:c,layout:u,latestValues:h}=o;if(!(!a||!c||!u)){if(this!==o&&this.layout&&u&&Fp(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||ye();const d=et(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+d;const f=et(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+f}rt(a,c),or(a,h),ls(this.projectionDeltaWithTransform,this.layoutCorrected,a,h)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new $w),this.sharedNodes.get(o).add(a);const u=a.options.initialPromotionConfig;a.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:c}=o;if((c.rotate||c.rotateX||c.rotateY||c.rotateZ)&&(a=!0),!a)return;const u={};for(let h=0;h<zd.length;h++){const d="rotate"+zd[h];c[d]&&(u[d]=c[d],o.setStaticValue(d,0))}o.render();for(const h in u)o.setStaticValue(h,u[h]);o.scheduleRender()}getProjectionStyles(o){var a,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return Jw;const u={visibility:""},h=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=bi(o==null?void 0:o.pointerEvents)||"",u.transform=h?h(this.latestValues,""):"none",u;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const S={};return this.options.layoutId&&(S.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,S.pointerEvents=bi(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!kn(this.latestValues)&&(S.transform=h?h({},""):"none",this.hasProjected=!1),S}const f=d.animationValues||d.latestValues;this.applyTransformsToTarget(),u.transform=Bd(this.projectionDeltaWithTransform,this.treeScale,f),h&&(u.transform=h(f,u.transform));const{x:v,y:x}=this.projectionDelta;u.transformOrigin=`${v.origin*100}% ${x.origin*100}% 0`,d.animationValues?u.opacity=d===this?(c=(a=f.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:u.opacity=d===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const S in Qi){if(f[S]===void 0)continue;const{correct:b,applyTo:p}=Qi[S],m=u.transform==="none"?f[S]:b(f[S],d);if(p){const g=p.length;for(let w=0;w<g;w++)u[p[w]]=m}else u[S]=m}return this.options.layoutId&&(u.pointerEvents=d===this?bi(o==null?void 0:o.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(Ud),this.root.sharedNodes.clear()}}}function e1(e){e.updateLayout()}function t1(e){var t;const n=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=e.layout,{animationType:i}=e.options,o=n.source!==e.layout.source;i==="size"?it(d=>{const f=o?n.measuredBox[d]:n.layoutBox[d],v=et(f);f.min=r[d].min,f.max=f.min+v}):Fp(i,n.layoutBox,r)&&it(d=>{const f=o?n.measuredBox[d]:n.layoutBox[d],v=et(r[d]);f.max=f.min+v,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[d].max=e.relativeTarget[d].min+v)});const a=ir();ls(a,r,n.layoutBox);const c=ir();o?ls(c,e.applyTransform(s,!0),n.measuredBox):ls(c,r,n.layoutBox);const u=!Rp(a);let h=!1;if(!e.resumeFrom){const d=e.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:f,layout:v}=d;if(f&&v){const x=ye();cs(x,n.layoutBox,f.layoutBox);const S=ye();cs(S,r,v.layoutBox),Ip(x,S)||(h=!0),d.options.layoutRoot&&(e.relativeTarget=S,e.relativeTargetOrigin=x,e.relativeParent=d)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:c,layoutDelta:a,hasLayoutChanged:u,hasRelativeTargetChanged:h})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function n1(e){jn.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function r1(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function s1(e){e.clearSnapshot()}function Ud(e){e.clearMeasurements()}function i1(e){e.isLayoutDirty=!1}function o1(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function Gd(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function a1(e){e.resolveTargetDelta()}function l1(e){e.calcProjection()}function c1(e){e.resetRotation()}function u1(e){e.removeLeadSnapshot()}function $d(e,t,n){e.translate=ue(t.translate,0,n),e.scale=ue(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function Wd(e,t,n,r){e.min=ue(t.min,n.min,r),e.max=ue(t.max,n.max,r)}function d1(e,t,n,r){Wd(e.x,t.x,n.x,r),Wd(e.y,t.y,n.y,r)}function h1(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const f1={duration:.45,ease:[.4,0,.1,1]},Kd=e=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(e),qd=Kd("applewebkit/")&&!Kd("chrome/")?Math.round:pe;function Qd(e){e.min=qd(e.min),e.max=qd(e.max)}function m1(e){Qd(e.x),Qd(e.y)}function Fp(e,t,n){return e==="position"||e==="preserve-aspect"&&!xl(Vd(t),Vd(n),.2)}const p1=Op({attachResizeListener:(e,t)=>Lt(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),fa={current:void 0},Vp=Op({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!fa.current){const e=new p1({});e.mount(window),e.setOptions({layoutScroll:!0}),fa.current=e}return fa.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),g1={pan:{Feature:Mw},drag:{Feature:Aw,ProjectionNode:Vp,MeasureLayout:Mp}},v1=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function y1(e){const t=v1.exec(e);if(!t)return[,];const[,n,r]=t;return[n,r]}function kl(e,t,n=1){const[r,s]=y1(e);if(!r)return;const i=window.getComputedStyle(t).getPropertyValue(r);if(i){const o=i.trim();return Sp(o)?parseFloat(o):o}else return hl(s)?kl(s,t,n+1):s}function x1(e,{...t},n){const r=e.current;if(!(r instanceof Element))return{target:t,transitionEnd:n};n&&(n={...n}),e.values.forEach(s=>{const i=s.get();if(!hl(i))return;const o=kl(i,r);o&&s.set(o)});for(const s in t){const i=t[s];if(!hl(i))continue;const o=kl(i,r);o&&(t[s]=o,n||(n={}),n[s]===void 0&&(n[s]=i))}return{target:t,transitionEnd:n}}const w1=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),Bp=e=>w1.has(e),S1=e=>Object.keys(e).some(Bp),Xd=e=>e===Un||e===z,Yd=(e,t)=>parseFloat(e.split(", ")[t]),Jd=(e,t)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const s=r.match(/^matrix3d\((.+)\)$/);if(s)return Yd(s[1],t);{const i=r.match(/^matrix\((.+)\)$/);return i?Yd(i[1],e):0}},b1=new Set(["x","y","z"]),k1=Is.filter(e=>!b1.has(e));function j1(e){const t=[];return k1.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t.length&&e.render(),t}const kr={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:Jd(4,13),y:Jd(5,14)};kr.translateX=kr.x;kr.translateY=kr.y;const C1=(e,t,n)=>{const r=t.measureViewportBox(),s=t.current,i=getComputedStyle(s),{display:o}=i,a={};o==="none"&&t.setStaticValue("display",e.display||"block"),n.forEach(u=>{a[u]=kr[u](r,i)}),t.render();const c=t.measureViewportBox();return n.forEach(u=>{const h=t.getValue(u);h&&h.jump(a[u]),e[u]=kr[u](c,i)}),e},P1=(e,t,n={},r={})=>{t={...t},r={...r};const s=Object.keys(t).filter(Bp);let i=[],o=!1;const a=[];if(s.forEach(c=>{const u=e.getValue(c);if(!e.hasValue(c))return;let h=n[c],d=Gr(h);const f=t[c];let v;if(Yi(f)){const x=f.length,S=f[0]===null?1:0;h=f[S],d=Gr(h);for(let b=S;b<x&&f[b]!==null;b++)v?Ac(Gr(f[b])===v):v=Gr(f[b])}else v=Gr(f);if(d!==v)if(Xd(d)&&Xd(v)){const x=u.get();typeof x=="string"&&u.set(parseFloat(x)),typeof f=="string"?t[c]=parseFloat(f):Array.isArray(f)&&v===z&&(t[c]=f.map(parseFloat))}else d!=null&&d.transform&&(v!=null&&v.transform)&&(h===0||f===0)?h===0?u.set(v.transform(h)):t[c]=d.transform(f):(o||(i=j1(e),o=!0),a.push(c),r[c]=r[c]!==void 0?r[c]:t[c],u.jump(f))}),a.length){const c=a.indexOf("height")>=0?window.pageYOffset:null,u=C1(t,e,a);return i.length&&i.forEach(([h,d])=>{e.getValue(h).set(d)}),e.render(),jo&&c!==null&&window.scrollTo({top:c}),{target:u,transitionEnd:r}}else return{target:t,transitionEnd:r}};function T1(e,t,n,r){return S1(t)?P1(e,t,n,r):{target:t,transitionEnd:r}}const E1=(e,t,n,r)=>{const s=x1(e,t,r);return t=s.target,r=s.transitionEnd,T1(e,t,n,r)},jl={current:null},zp={current:!1};function N1(){if(zp.current=!0,!!jo)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>jl.current=e.matches;e.addListener(t),t()}else jl.current=!1}function _1(e,t,n){const{willChange:r}=t;for(const s in t){const i=t[s],o=n[s];if(qe(i))e.addValue(s,i),to(r)&&r.add(s);else if(qe(o))e.addValue(s,br(i,{owner:e})),to(r)&&r.remove(s);else if(o!==i)if(e.hasValue(s)){const a=e.getValue(s);!a.hasAnimated&&a.set(i)}else{const a=e.getStaticValue(s);e.addValue(s,br(a!==void 0?a:i,{owner:e}))}}for(const s in n)t[s]===void 0&&e.removeValue(s);return t}const Zd=new WeakMap,Hp=Object.keys(Ns),A1=Hp.length,eh=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],M1=bc.length;class L1{constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:s,visualState:i},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>re.render(this.render,!1,!0);const{latestValues:a,renderState:c}=i;this.latestValues=a,this.baseTarget={...a},this.initialValues=n.initial?{...a}:{},this.renderState=c,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=o,this.isControllingVariants=Po(n),this.isVariantNode=Pm(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:u,...h}=this.scrapeMotionValuesFromProps(n,{});for(const d in h){const f=h[d];a[d]!==void 0&&qe(f)&&(f.set(a[d],!1),to(u)&&u.add(d))}}scrapeMotionValuesFromProps(t,n){return{}}mount(t){this.current=t,Zd.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),zp.current||N1(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:jl.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Zd.delete(this.current),this.projection&&this.projection.unmount(),Ht(this.notifyUpdate),Ht(this.render),this.valueSubscriptions.forEach(t=>t()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features)this.features[t].unmount();this.current=null}bindToMotionValue(t,n){const r=Hn.has(t),s=n.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&re.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),i=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,()=>{s(),i()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}loadFeatures({children:t,...n},r,s,i){let o,a;for(let c=0;c<A1;c++){const u=Hp[c],{isEnabled:h,Feature:d,ProjectionNode:f,MeasureLayout:v}=Ns[u];f&&(o=f),h(n)&&(!this.features[u]&&d&&(this.features[u]=new d(this)),v&&(a=v))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:c,layout:u,drag:h,dragConstraints:d,layoutScroll:f,layoutRoot:v}=n;this.projection.setOptions({layoutId:c,layout:u,alwaysMeasureLayout:!!h||d&&rr(d),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof u=="string"?u:"both",initialPromotionConfig:i,layoutScroll:f,layoutRoot:v})}return a}updateFeatures(){for(const t in this.features){const n=this.features[t];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ye()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}makeTargetAnimatable(t,n=!0){return this.makeTargetAnimatableFromInstance(t,this.props,n)}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<eh.length;r++){const s=eh[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i=t["on"+s];i&&(this.propEventSubscriptions[s]=this.on(s,i))}this.prevMotionValues=_1(this,this.scrapeMotionValuesFromProps(t,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(t=!1){if(t)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const n={};for(let r=0;r<M1;r++){const s=bc[r],i=this.props[s];(Es(i)||i===!1)&&(n[s]=i)}return n}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){n!==this.values.get(t)&&(this.removeValue(t),this.bindToMotionValue(t,n)),this.values.set(t,n),this.latestValues[t]=n.get()}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=br(n,{owner:this}),this.addValue(t,r)),r}readValue(t){var n;return this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(n=this.getBaseTargetFromProps(this.props,t))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,t,this.options)}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var n;const{initial:r}=this.props,s=typeof r=="string"||typeof r=="object"?(n=_c(this.props,r))===null||n===void 0?void 0:n[t]:void 0;if(r&&s!==void 0)return s;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!qe(i)?i:this.initialValues[t]!==void 0&&s===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new Bc),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class Up extends L1{sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}makeTargetAnimatableFromInstance({transition:t,transitionEnd:n,...r},{transformValues:s},i){let o=Xx(r,t||{},this);if(s&&(n&&(n=s(n)),r&&(r=s(r)),o&&(o=s(o))),i){qx(this,r,o);const a=E1(this,r,o,n);n=a.transitionEnd,r=a.target}return{transition:t,transitionEnd:n,...r}}}function D1(e){return window.getComputedStyle(e)}class R1 extends Up{constructor(){super(...arguments),this.type="html"}readValueFromInstance(t,n){if(Hn.has(n)){const r=Rc(n);return r&&r.default||0}else{const r=D1(t),s=(_m(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(t,{transformPagePoint:n}){return _p(t,n)}build(t,n,r,s){Cc(t,n,r,s.transformTemplate)}scrapeMotionValuesFromProps(t,n){return Nc(t,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;qe(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(t,n,r,s){Im(t,n,r,s)}}class I1 extends Up{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(Hn.has(n)){const r=Rc(n);return r&&r.default||0}return n=Om.has(n)?n:wc(n),t.getAttribute(n)}measureInstanceViewportBox(){return ye()}scrapeMotionValuesFromProps(t,n){return Vm(t,n)}build(t,n,r,s){Tc(t,n,r,this.isSVGTag,s.transformTemplate)}renderInstance(t,n,r,s){Fm(t,n,r,s)}mount(t){this.isSVGTag=Ec(t.tagName),super.mount(t)}}const O1=(e,t)=>jc(e)?new I1(t,{enableHardwareAcceleration:!1}):new R1(t,{enableHardwareAcceleration:!0}),F1={layout:{ProjectionNode:Vp,MeasureLayout:Mp}},V1={...dw,...Ay,...g1,...F1},T=Bv((e,t)=>yy(e,t,V1,O1));function Gp(){const e=y.useRef(!1);return xc(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function B1(){const e=Gp(),[t,n]=y.useState(0),r=y.useCallback(()=>{e.current&&n(t+1)},[t]);return[y.useCallback(()=>re.postRender(r),[r]),t]}class z1 extends y.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function H1({children:e,isPresent:t}){const n=y.useId(),r=y.useRef(null),s=y.useRef({width:0,height:0,top:0,left:0});return y.useInsertionEffect(()=>{const{width:i,height:o,top:a,left:c}=s.current;if(t||!r.current||!i||!o)return;r.current.dataset.motionPopId=n;const u=document.createElement("style");return document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${i}px !important;
            height: ${o}px !important;
            top: ${a}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[t]),y.createElement(z1,{isPresent:t,childRef:r,sizeRef:s},y.cloneElement(e,{ref:r}))}const ma=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:i,mode:o})=>{const a=Bm(U1),c=y.useId(),u=y.useMemo(()=>({id:c,initial:t,isPresent:n,custom:s,onExitComplete:h=>{a.set(h,!0);for(const d of a.values())if(!d)return;r&&r()},register:h=>(a.set(h,!1),()=>a.delete(h))}),i?void 0:[n]);return y.useMemo(()=>{a.forEach((h,d)=>a.set(d,!1))},[n]),y.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),o==="popLayout"&&(e=y.createElement(H1,{isPresent:n},e)),y.createElement(ko.Provider,{value:u},e)};function U1(){return new Map}function G1(e){return y.useEffect(()=>()=>e(),[])}const Cn=e=>e.key||"";function $1(e,t){e.forEach(n=>{const r=Cn(n);t.set(r,n)})}function W1(e){const t=[];return y.Children.forEach(e,n=>{y.isValidElement(n)&&t.push(n)}),t}const me=({children:e,custom:t,initial:n=!0,onExitComplete:r,exitBeforeEnter:s,presenceAffectsLayout:i=!0,mode:o="sync"})=>{const a=y.useContext(kc).forceRender||B1()[0],c=Gp(),u=W1(e);let h=u;const d=y.useRef(new Map).current,f=y.useRef(h),v=y.useRef(new Map).current,x=y.useRef(!0);if(xc(()=>{x.current=!1,$1(u,v),f.current=h}),G1(()=>{x.current=!0,v.clear(),d.clear()}),x.current)return y.createElement(y.Fragment,null,h.map(m=>y.createElement(ma,{key:Cn(m),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:i,mode:o},m)));h=[...h];const S=f.current.map(Cn),b=u.map(Cn),p=S.length;for(let m=0;m<p;m++){const g=S[m];b.indexOf(g)===-1&&!d.has(g)&&d.set(g,void 0)}return o==="wait"&&d.size&&(h=[]),d.forEach((m,g)=>{if(b.indexOf(g)!==-1)return;const w=v.get(g);if(!w)return;const k=S.indexOf(g);let j=m;if(!j){const C=()=>{d.delete(g);const P=Array.from(v.keys()).filter(E=>!b.includes(E));if(P.forEach(E=>v.delete(E)),f.current=u.filter(E=>{const A=Cn(E);return A===g||P.includes(A)}),!d.size){if(c.current===!1)return;a(),r&&r()}};j=y.createElement(ma,{key:Cn(w),isPresent:!1,onExitComplete:C,custom:t,presenceAffectsLayout:i,mode:o},w),d.set(g,j)}h.splice(k,0,j)}),h=h.map(m=>{const g=m.key;return d.has(g)?m:y.createElement(ma,{key:Cn(m),isPresent:!0,presenceAffectsLayout:i,mode:o},m)}),y.createElement(y.Fragment,null,d.size?h:h.map(m=>y.cloneElement(m)))},wn={I:"I",O:"O",T:"T",S:"S",Z:"Z",J:"J",L:"L"},$p={[wn.I]:{shape:[[0,0,0,0],[1,1,1,1],[0,0,0,0],[0,0,0,0]],color:"#00f5ff",emoji:"",name:"I-Piece"},[wn.O]:{shape:[[1,1],[1,1]],color:"#ffff00",emoji:"",name:"O-Piece"},[wn.T]:{shape:[[0,1,0],[1,1,1],[0,0,0]],color:"#a000f0",emoji:"",name:"T-Piece"},[wn.S]:{shape:[[0,1,1],[1,1,0],[0,0,0]],color:"#00f000",emoji:"",name:"S-Piece"},[wn.Z]:{shape:[[1,1,0],[0,1,1],[0,0,0]],color:"#f00000",emoji:"",name:"Z-Piece"},[wn.J]:{shape:[[1,0,0],[1,1,1],[0,0,0]],color:"#0000f0",emoji:"",name:"J-Piece"},[wn.L]:{shape:[[0,0,1],[1,1,1],[0,0,0]],color:"#ff7f00",emoji:"",name:"L-Piece"}};let _n={...$p};function th(e){if(!e||!e.pieces){_n={...$p};return}Object.keys(_n).forEach(t=>{e.pieces[t]&&(_n[t]={..._n[t],color:e.pieces[t].color,emoji:e.pieces[t].emoji})})}if(typeof window<"u"){window.addEventListener("themeEquipped",e=>{th(e.detail.theme)});try{const e=localStorage.getItem("cat-tetris-shopInventory");if(e){const n=JSON.parse(e).equippedTheme;bm(()=>Promise.resolve().then(()=>MS),void 0).then(({PIECE_THEMES:r})=>{r[n]&&th(r[n])})}}catch{}}function mr(e){return{"#00f5ff":"#00f5ff","#ffff00":"#ffff00","#a000f0":"#a000f0","#00f000":"#00f000","#f00000":"#f00000","#0000f0":"#0000f0","#ff7f00":"#ff7f00"}[e]||e}class K1{constructor(){this.events={}}on(t,n){this.events[t]||(this.events[t]=[]),this.events[t].push(n)}off(t,n){this.events[t]&&(this.events[t]=this.events[t].filter(r=>r!==n))}emit(t,n){this.events[t]&&this.events[t].forEach(r=>{try{r(n)}catch(s){typeof window<"u"&&window.__ERROR_LOGGER__&&window.__ERROR_LOGGER__.logError("EventEmitter",`emit:${t}`,s.message,{event:t,stack:s.stack})}})}clear(){this.events={}}}const L=new K1,I={GAME_INITIALIZED:"game_initialized",PIECE_MOVED:"piece_moved",PIECE_ROTATED:"piece_rotated",PIECE_PLACED:"piece_placed",PIECE_HELD:"piece_held",HARD_DROP:"hard_drop",LINE_CLEARED:"line_cleared",T_SPIN:"t_spin",BACK_TO_BACK:"back_to_back",SCORE_UPDATED:"score_updated",LEVEL_UP:"level_up",GAME_OVER:"game_over",GAME_PAUSED:"game_paused",GAME_RESUMED:"game_resumed"},ji=2;function q1({text:e,color:t,id:n}){return l.jsx(T.div,{initial:{opacity:1,y:0,scale:.5},animate:{opacity:0,y:-60,scale:1.3},exit:{opacity:0},transition:{duration:1.2,ease:"easeOut"},className:"absolute left-1/2 top-1/3 -translate-x-1/2 pointer-events-none font-black text-lg drop-shadow-lg whitespace-nowrap",style:{color:t,zIndex:50,textShadow:`0 0 12px ${t}`},children:e},n)}function Q1({lines:e}){const t=y.useMemo(()=>{const n=[];return e.forEach(r=>{for(let s=0;s<14;s++)n.push({id:`${r}-${s}`,startX:Math.random()*220,startY:(r+ji)*21+10,endX:(Math.random()-.5)*300,endY:-(Math.random()*120+40),size:Math.random()*5+2,color:["#FFD700","#FF6B6B","#4ECDC4","#A78BFA","#F472B6","#34D399"][Math.floor(Math.random()*6)],delay:Math.random()*.15})}),n},[e]);return l.jsx("div",{className:"absolute inset-0 pointer-events-none overflow-visible",style:{zIndex:35},children:t.map(n=>l.jsx(T.div,{initial:{x:n.startX,y:n.startY,scale:1,opacity:1},animate:{x:n.startX+n.endX,y:n.startY+n.endY,scale:0,opacity:0},transition:{duration:.8,delay:n.delay,ease:"easeOut"},className:"absolute rounded-full",style:{width:n.size,height:n.size,backgroundColor:n.color,boxShadow:`0 0 ${n.size+4}px ${n.color}`}},n.id))})}const X1=({board:e,currentPiece:t,dropPreview:n,gameOver:r})=>{var S;const[s,i]=y.useState([]),[o,a]=y.useState([]),[c,u]=y.useState(0),h=y.useRef(0),d=y.useRef(null),f=((S=e==null?void 0:e[0])==null?void 0:S.length)||10,v=y.useMemo(()=>[...Array(ji).fill(null).map(()=>Array(f).fill(null)),...e],[e,f]);y.useEffect(()=>{const b=()=>{u(.12),setTimeout(()=>u(0),150)};return L.on("hard_drop",b),()=>L.off("hard_drop",b)},[]),y.useEffect(()=>{const b=[];for(let p=0;p<e.length;p++)e[p]&&e[p].every(m=>m!==null)&&b.push(p);b.length>0&&(i(b),u(b.length>=4?.3:.18),setTimeout(()=>u(0),250),setTimeout(()=>i([]),800))},[e]),y.useEffect(()=>{const b=p=>{const m=(p==null?void 0:p.linesCleared)||0;if(m<=0)return;let g,w;m===1?(g="Single",w="#4ECDC4"):m===2?(g="Double!",w="#A78BFA"):m===3?(g="Triple!!",w="#F472B6"):(g=" TETRIS!! ",w="#FFD700");const k=++h.current;a(j=>[...j,{id:k,text:g,color:w}]),setTimeout(()=>a(j=>j.filter(C=>C.id!==k)),1400)};return L.on("line_cleared",b),()=>L.off("line_cleared",b)},[]),y.useEffect(()=>{const b=p=>{const m=(p==null?void 0:p.combo)||0;if(m>=2){const g=++h.current;a(w=>[...w,{id:g,text:`${m}x Combo! `,color:"#FF6B6B"}]),setTimeout(()=>a(w=>w.filter(k=>k.id!==g)),1400)}};return L.on("score_updated",b),()=>L.off("score_updated",b)},[]),y.useEffect(()=>{const b=()=>{const p=++h.current;a(m=>[...m,{id:p,text:" Back-to-Back!",color:"#FBBF24"}]),setTimeout(()=>a(m=>m.filter(g=>g.id!==p)),1400)};return L.on("back_to_back",b),()=>L.off("back_to_back",b)},[]),y.useEffect(()=>{const b=()=>{const p=++h.current;a(m=>[...m,{id:p,text:"T-SPIN!",color:"#C084FC"}]),setTimeout(()=>a(m=>m.filter(g=>g.id!==p)),1400)};return L.on("t_spin",b),()=>L.off("t_spin",b)},[]);const x=y.useCallback((b,p,m,g)=>{let w=null,k=null;const j=s.includes(m);if(t){const{position:{x:C,y:P},shape:E}=t;for(let A=0;A<E.length;A++){for(let H=0;H<E[A].length;H++)E[A][H]&&C+H===p&&P+A===m&&(w=t);if(w)break}}if(n&&n!==t){const{position:{x:C,y:P},shape:E}=n;for(let A=0;A<E.length;A++){for(let H=0;H<E[A].length;H++)E[A][H]&&C+H===p&&P+A===m&&(k=n);if(k)break}}if(w){const C=mr(w.color);return l.jsx("div",{className:"tetris-cell rounded-sm flex items-center justify-center border border-white/40",style:{backgroundColor:C,boxShadow:`0 0 6px ${C}80, inset 0 1px 0 rgba(255,255,255,0.3)`},children:l.jsx("span",{className:"text-xs drop-shadow",children:w.emoji})},`${p}-${m}`)}if(k){const C=mr(k.color);return l.jsx("div",{className:"tetris-cell rounded-sm flex items-center justify-center border-2 border-dashed",style:{borderColor:C+"50",backgroundColor:C+"12"},children:l.jsx("span",{className:"text-xs opacity-30",children:k.emoji})},`${p}-${m}`)}if(b){const C=mr(b.color);return l.jsx("div",{className:`cat-block tetris-cell rounded-sm flex items-center justify-center ${j?"line-clearing":""}`,style:{backgroundColor:j?"#fff":C,borderColor:"rgba(255, 255, 255, 0.35)",boxShadow:j?`0 0 20px #fff, 0 0 40px ${C}`:"inset 0 1px 0 rgba(255,255,255,0.25), 0 1px 3px rgba(0,0,0,0.3)",transform:j?"scale(1.1)":void 0,transition:"all 0.15s ease-out",zIndex:j?10:1},children:l.jsx("span",{className:`text-xs ${j?"opacity-0":""}`,children:b.emoji})},`${p}-${m}`)}return l.jsx("div",{className:`tetris-cell rounded-sm ${g?"bg-gray-900/30 border border-gray-500/10":"border border-white/[0.06] bg-white/[0.02]"}`},`${p}-${m}`)},[t,n,s]);return l.jsx("div",{className:"flex flex-col items-center",children:l.jsx("div",{className:"relative bg-gray-900/60 p-3 rounded-xl border-2 border-white/15 shadow-2xl overflow-hidden flex-shrink-0",ref:d,style:{width:"fit-content"},children:l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"tetris-grid",children:v.map((b,p)=>{const m=p-ji,g=p<ji;return b.map((w,k)=>x(w,k,m,g))})}),s.length>0&&l.jsx(l.Fragment,{children:l.jsx(Q1,{lines:s})}),l.jsx(me,{children:c>0&&l.jsx(T.div,{initial:{opacity:c},animate:{opacity:0},exit:{opacity:0},transition:{duration:.3},className:"absolute inset-0 rounded-lg pointer-events-none",style:{background:"white",zIndex:20}},"flash")}),l.jsx(me,{children:o.map(b=>l.jsx(q1,{id:b.id,text:b.text,color:b.color},b.id))}),r&&l.jsx(T.div,{initial:{opacity:0},animate:{opacity:1},className:"absolute inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center rounded-lg",style:{zIndex:50},children:l.jsxs(T.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",damping:12},className:"text-center",children:[l.jsx("div",{className:"text-5xl mb-2",children:""}),l.jsx("div",{className:"text-white font-black text-xl drop-shadow-lg",children:"Game Over!"})]})})]})})})},Fn=ce.memo(X1);class Y1{constructor(){this.HIGH_SCORE_KEY="tetris_high_score"}getHighScore(){try{const t=localStorage.getItem(this.HIGH_SCORE_KEY);return t?parseInt(t,10):0}catch{return 0}}saveHighScore(t){try{const n=this.getHighScore();return t>n?(localStorage.setItem(this.HIGH_SCORE_KEY,t.toString()),!0):!1}catch{return!1}}clearHighScore(){try{localStorage.removeItem(this.HIGH_SCORE_KEY)}catch{}}}const nh=new Y1,J1=({score:e,level:t,lines:n,combo:r})=>{const[s,i]=y.useState(0);return y.useEffect(()=>{i(nh.getHighScore())},[]),y.useEffect(()=>{nh.saveHighScore(e)&&i(e)},[e]),l.jsxs("div",{className:"bg-gray-900/50 p-2 rounded-xl border-2 border-white/20 shadow-2xl w-28",children:[l.jsx("h2",{className:"text-xs font-bold text-white mb-1 text-center",children:" Pontuao"}),l.jsxs("div",{className:"space-y-0.5 text-xs",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-white/70",children:"Pontos:"}),l.jsx("span",{className:"text-yellow-400 font-bold",children:e.toLocaleString()})]}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-white/70",children:"Recorde:"}),l.jsx("span",{className:"text-green-400 font-bold",children:s.toLocaleString()})]}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-white/70",children:"Nvel:"}),l.jsx("span",{className:"text-blue-400 font-bold",children:t})]}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-white/70",children:"Linhas:"}),l.jsx("span",{className:"text-purple-400 font-bold",children:n})]}),r>0&&l.jsxs("div",{className:"flex justify-between items-center bg-orange-500/20 px-1.5 py-0.5 rounded border border-orange-400/30 mt-0.5",children:[l.jsx("span",{className:"text-white/90",children:"Combo:"}),l.jsxs("span",{className:"text-orange-400 font-bold",children:[r,"x"]})]})]})]})},jr=ce.memo(J1),Z1=({onMove:e,onRotate:t,onHardDrop:n,onPause:r,onHold:s,isPaused:i,gameOver:o,canHold:a})=>{const c=u=>{if(!o)switch(u){case"left":e("left");break;case"right":e("right");break;case"down":e("down");break;case"rotate":t();break;case"hardDrop":n();break;case"hold":s();break;case"pause":r();break}};return l.jsxs("div",{className:"flex flex-col items-center gap-1",children:[l.jsx("div",{className:"hidden lg:block",children:l.jsx("div",{className:"text-center text-white/50 text-[11px]",children:l.jsx("p",{children:"  mover |  girar |  soft | Espao = hard drop | C = hold"})})}),l.jsxs("div",{className:"lg:hidden",children:[l.jsxs("div",{className:"grid grid-cols-3 gap-3 max-w-xs",children:[l.jsx("div",{}),l.jsx(T.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>c("rotate"),disabled:o,className:"bg-blue-500 text-white p-4 rounded-full shadow-lg hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed",children:""}),l.jsx("div",{}),l.jsx(T.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>c("left"),disabled:o,className:"bg-gray-600 text-white p-4 rounded-full shadow-lg hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:""}),l.jsx(T.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>c("down"),disabled:o,className:"bg-gray-600 text-white p-4 rounded-full shadow-lg hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:""}),l.jsx(T.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>c("right"),disabled:o,className:"bg-gray-600 text-white p-4 rounded-full shadow-lg hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:""}),l.jsx(T.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>c("hardDrop"),disabled:o,className:"bg-red-500 text-white p-4 rounded-full shadow-lg hover:bg-red-600 disabled:opacity-50 disabled:cursor-not-allowed",children:""}),l.jsx(T.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>c("hold"),disabled:o||!a,className:`p-4 rounded-full shadow-lg disabled:opacity-50 disabled:cursor-not-allowed ${a?"bg-green-500 text-white hover:bg-green-600":"bg-gray-500 text-white"}`,children:""})]}),l.jsx("div",{className:"mt-4 flex justify-center",children:l.jsx(T.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>c("pause"),disabled:o,className:"bg-yellow-500 text-white px-6 py-3 rounded-lg shadow-lg hover:bg-yellow-600 disabled:opacity-50 disabled:cursor-not-allowed",children:i?" Continuar":" Pausar"})}),l.jsxs("div",{className:"mt-4 text-center text-white/60 text-xs",children:[l.jsx("p",{children:" Controles touch-friendly"}),l.jsx("p",{children:" Use a sombra para planejar!"})]})]})]})};function eS({scoreData:e,onClose:t}){const[n,r]=y.useState(!1),s=` Cat Tetris!
 ${e.score.toLocaleString()} pontos
 Nvel ${e.level}
 ${e.lines} linhas

Consegue me superar? `,i=async()=>{try{await navigator.clipboard.writeText(s),r(!0),setTimeout(()=>r(!1),2e3)}catch{}},o=async()=>{if(navigator.share)try{await navigator.share({title:"Minha pontuao no Cat Tetris",text:s})}catch(u){u.name}},a=()=>{const u=`https://twitter.com/intent/tweet?text=${encodeURIComponent(s)}`;window.open(u,"_blank","width=600,height=400")},c=()=>{const u=`https://wa.me/?text=${encodeURIComponent(s)}`;window.open(u,"_blank")};return l.jsxs(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-black/40 rounded-lg p-4 mt-4",children:[l.jsx("div",{className:"text-white/80 text-sm mb-3 text-center",children:"Compartilhe sua pontuao:"}),l.jsxs("div",{className:"flex flex-wrap gap-2 justify-center",children:[navigator.share&&l.jsx(T.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:o,className:"bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-lg font-bold flex items-center gap-2 transition-colors",children:" Compartilhar"}),l.jsx(T.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:i,className:`${n?"bg-green-600":"bg-gray-600 hover:bg-gray-500"} text-white px-4 py-2 rounded-lg font-bold flex items-center gap-2 transition-colors`,children:n?" Copiado!":" Copiar"}),l.jsx(T.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:a,className:"bg-[#1DA1F2] hover:bg-[#1a8cd8] text-white px-4 py-2 rounded-lg font-bold flex items-center gap-2 transition-colors",children:" Twitter"}),l.jsx(T.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:c,className:"bg-[#25D366] hover:bg-[#20bd5a] text-white px-4 py-2 rounded-lg font-bold flex items-center gap-2 transition-colors",children:" WhatsApp"})]}),t&&l.jsx("div",{className:"text-center mt-3",children:l.jsx("button",{onClick:t,className:"text-white/60 hover:text-white text-sm transition-colors",children:"Fechar"})})]})}const tS=({score:e,onRestart:t,onBackToMenu:n})=>{const r=typeof e=="number"?e:e.points,s=typeof e=="object"?e.level:1,i=typeof e=="object"?e.lines:0,o=c=>c<1e3?"No desista! Cada tentativa te torna melhor! ":c<5e3?"Bom trabalho! Continue praticando! ":c<1e4?"Excelente! Voc est ficando muito bom! ":"Incrvel! Voc  um mestre do Cat Tetris! ",a=c=>c<1e3?"":c<5e3?"":c<1e4?"":"";return l.jsx(T.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",children:l.jsx(T.div,{initial:{scale:.8,y:20},animate:{scale:1,y:0},transition:{type:"spring",damping:15},className:"bg-gray-900/90 p-8 rounded-2xl border-2 border-white/20 shadow-2xl max-w-md w-full mx-4 max-h-[90vh] overflow-y-auto",children:l.jsxs("div",{className:"text-center",children:[l.jsx(T.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring"},className:"text-6xl mb-4",children:a(r)}),l.jsx(T.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"text-3xl font-cat font-bold text-white mb-2",children:"Game Over!"}),l.jsxs(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-gradient-to-r from-yellow-400 to-orange-400 text-gray-900 font-bold text-xl p-3 rounded-lg mb-4",children:[r.toLocaleString()," pontos"]}),l.jsx(T.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"text-white/80 mb-6 text-lg",children:o(r)}),l.jsx(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.55},children:l.jsx(eS,{scoreData:{score:r,level:s,lines:i}})}),l.jsxs(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"space-y-3 mt-4",children:[l.jsx(T.button,{onClick:t,whileHover:{scale:1.05},whileTap:{scale:.95},className:"w-full bg-gradient-to-r from-green-500 to-emerald-600 text-white font-bold py-3 px-6 rounded-lg hover:from-green-400 hover:to-emerald-500 transition-all duration-300 shadow-lg",children:" Jogar Novamente"}),l.jsx(T.button,{onClick:n,whileHover:{scale:1.05},whileTap:{scale:.95},className:"w-full bg-gradient-to-r from-blue-500 to-cyan-600 text-white font-bold py-3 px-6 rounded-lg hover:from-blue-400 hover:to-cyan-500 transition-all duration-300 shadow-lg",children:" Voltar ao Menu"})]}),l.jsxs(T.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},className:"mt-6 text-center text-white/60 text-sm",children:[l.jsx("p",{children:" Dica: Use a sombra para planejar melhor!"}),l.jsx("p",{children:" Tente fazer combos para mais pontos!"})]})]})})})},nS=({pieces:e})=>{const t=(n,r)=>{if(!n)return null;const s=Math.max(...n.shape.map(o=>o.length)),i=n.shape.length;return l.jsx("div",{className:"bg-gray-800/50 p-1.5 rounded-lg border border-white/20",children:l.jsx("div",{className:"flex justify-center",children:l.jsx("div",{className:"grid gap-1",style:{gridTemplateColumns:`repeat(${s}, 1fr)`,gridTemplateRows:`repeat(${i}, 1fr)`},children:n.shape.map((o,a)=>o.map((c,u)=>l.jsx("div",{className:`w-5 h-5 rounded-sm flex items-center justify-center ${c?"border border-white/40 shadow-sm":""}`,style:{backgroundColor:c?mr(n.color):"transparent"},children:c&&c!==0?l.jsx("span",{className:"text-xs leading-none",children:n.emoji}):null},`${u}-${a}`)))})})},r)};return l.jsxs("div",{className:"bg-gray-900/50 p-2 rounded-xl border-2 border-white/20 shadow-2xl w-24",children:[l.jsxs("h2",{className:"text-xs font-bold text-white mb-1 text-center flex items-center justify-center gap-1",children:[l.jsx("span",{children:""}),l.jsx("span",{className:"hidden lg:inline",children:"Prximas"})]}),l.jsx("div",{className:"space-y-1.5",children:e.map((n,r)=>t(n,r))})]})},Cr=ce.memo(nS),rS=({heldPiece:e,canHold:t})=>{const n=()=>{if(!e)return l.jsx("div",{className:"bg-gray-800/50 p-2 lg:p-4 rounded-lg border-2 border-dashed border-white/20 flex items-center justify-center",children:l.jsx("span",{className:"text-white/40 text-xs lg:text-sm",children:"Vazio"})});const r=Math.max(...e.shape.map(i=>i.length)),s=e.shape.length;return l.jsx("div",{className:"bg-gray-800/50 p-1.5 rounded-lg border border-white/20",children:l.jsx("div",{className:"flex justify-center",children:l.jsx("div",{className:"grid gap-1",style:{gridTemplateColumns:`repeat(${r}, 1fr)`,gridTemplateRows:`repeat(${s}, 1fr)`},children:e.shape.map((i,o)=>i.map((a,c)=>l.jsx("div",{className:`w-5 h-5 rounded-sm flex items-center justify-center ${a?"border border-white/40 shadow-sm":""}`,style:{backgroundColor:a?mr(e.color):"transparent"},children:a&&a!==0?l.jsx("span",{className:"text-xs leading-none",children:e.emoji}):null},`${c}-${o}`)))})})})};return l.jsxs("div",{className:"bg-gray-900/50 p-2 rounded-xl border-2 border-white/20 shadow-2xl w-24",children:[l.jsxs("h2",{className:"text-xs font-bold text-white mb-1 text-center flex items-center justify-center gap-1",children:[l.jsx("span",{children:""}),l.jsx("span",{className:"hidden lg:inline",children:"Guardada"})]}),l.jsx("div",{children:n()})]})},Pr=ce.memo(rS),rh=500,pa="cat_tetris_error_log";class sS{constructor(){this.logs=this._loadLogs(),this.eventLog=[],this.sessionId=this._generateSessionId(),this.sessionStart=new Date().toISOString(),this._gameStateProvider=null,this._setupGlobalHandlers(),typeof window<"u"&&(window.__ERROR_LOGGER__=this),this.logInfo("ErrorLogger","init","Sistema de logging iniciado",{sessionId:this.sessionId,userAgent:typeof navigator<"u"?navigator.userAgent:"N/A",timestamp:this.sessionStart})}_generateSessionId(){return`session_${Date.now()}_${Math.random().toString(36).substr(2,6)}`}_loadLogs(){try{const t=localStorage.getItem(pa);return t?JSON.parse(t):[]}catch{return[]}}_saveLogs(){try{this.logs.length>rh&&(this.logs=this.logs.slice(-rh)),localStorage.setItem(pa,JSON.stringify(this.logs))}catch{this.logs=this.logs.slice(-50);try{localStorage.setItem(pa,JSON.stringify(this.logs))}catch{}}}_setupGlobalHandlers(){typeof window>"u"||(window.addEventListener("error",t=>{var n;this.logError("window","uncaughtError",t.message,{filename:t.filename,lineno:t.lineno,colno:t.colno,stack:(n=t.error)==null?void 0:n.stack})}),window.addEventListener("unhandledrejection",t=>{var n;this.logError("window","unhandledRejection",String(t.reason),{stack:(n=t.reason)==null?void 0:n.stack,type:typeof t.reason})}))}setGameStateProvider(t){this._gameStateProvider=t}_getGameStateSnapshot(){var t,n,r,s,i,o,a,c,u,h;if(!this._gameStateProvider)return null;try{const d=this._gameStateProvider();return d?{isPlaying:d.isPlaying,isPaused:d.isPaused,gameOver:d.gameOver,score:(t=d.score)==null?void 0:t.points,level:(n=d.score)==null?void 0:n.level,lines:(r=d.score)==null?void 0:r.lines,currentPiece:(s=d.currentPiece)==null?void 0:s.type,currentPiecePos:(i=d.currentPiece)==null?void 0:i.position,heldPiece:(o=d.heldPiece)==null?void 0:o.type,canHold:d.canHold,gameMode:((a=d.gameMode)==null?void 0:a.id)||((c=d.gameMode)==null?void 0:c.name)||null,backToBack:d.backToBack,nextPieces:(u=d.nextPieces)==null?void 0:u.map(f=>f==null?void 0:f.type),boardFilledRows:(h=d.board)==null?void 0:h.filter(f=>f.some(v=>v!==null)).length}:null}catch(d){return{snapshotError:d.message}}}_createEntry(t,n,r,s,i=null){return{id:`${Date.now()}_${Math.random().toString(36).substr(2,4)}`,timestamp:new Date().toISOString(),sessionId:this.sessionId,level:t,source:n,action:r,message:s,details:i,gameState:t==="error"||t==="warn"?this._getGameStateSnapshot():void 0}}logError(t,n,r,s=null){const i=this._createEntry("error",t,n,r,s);return this.logs.push(i),this._saveLogs(),i}logWarn(t,n,r,s=null){const i=this._createEntry("warn",t,n,r,s);return this.logs.push(i),this._saveLogs(),i}logInfo(t,n,r,s=null){const i=this._createEntry("info",t,n,r,s);return this.logs.push(i),this._saveLogs(),i}logAction(t,n,r=null){const s=this._createEntry("action",t,n,`User action: ${n}`,r);return this.logs.push(s),this.logs.length%10===0&&this._saveLogs(),s}getLogs(t=null){return t?this.logs.filter(n=>!(t.level&&n.level!==t.level||t.source&&n.source!==t.source||t.sessionId&&n.sessionId!==t.sessionId)):[...this.logs]}getErrors(){return this.getLogs({level:"error"})}getCurrentSessionLogs(){return this.getLogs({sessionId:this.sessionId})}clearLogs(){this.logs=[],this._saveLogs()}exportLogs(){const t={exportDate:new Date().toISOString(),sessionId:this.sessionId,sessionStart:this.sessionStart,totalEntries:this.logs.length,errorCount:this.logs.filter(n=>n.level==="error").length,warnCount:this.logs.filter(n=>n.level==="warn").length,logs:this.logs};return JSON.stringify(t,null,2)}downloadLogs(){const t=this.exportLogs(),n=new Blob([t],{type:"application/json"}),r=URL.createObjectURL(n),s=document.createElement("a");s.href=r,s.download=`cat-tetris-errors-${new Date().toISOString().replace(/[:.]/g,"-")}.json`,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(r)}saveForExternalAccess(){try{localStorage.setItem("cat_tetris_error_export",this.exportLogs())}catch{}}printLogs(t=null){return t?this.getLogs({level:t}):this.logs}}const Le=new sS;class iS extends ce.Component{constructor(t){super(t),this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,n){Le.logError("ErrorBoundary","componentDidCatch",t.message,{stack:t.stack,componentStack:n==null?void 0:n.componentStack}),Le.saveForExternalAccess()}render(){return this.state.hasError?l.jsx("div",{className:"min-h-screen cat-bg flex items-center justify-center p-4",children:l.jsxs("div",{className:"game-container rounded-2xl p-6 shadow-2xl text-center",children:[l.jsx("h1",{className:"text-3xl font-cat font-bold text-white mb-4",children:" Ops! Algo deu errado"}),l.jsx("p",{className:"text-white/80 mb-4",children:"O jogo encontrou um problema inesperado."}),l.jsx("button",{onClick:()=>window.location.reload(),className:"bg-gradient-to-r from-cat-green to-cat-blue text-white font-bold py-3 px-6 rounded-xl hover:from-cat-blue hover:to-cat-green transition-all duration-200 border-2 border-white/30",children:" Reiniciar Jogo "}),!1]})}):this.props.children}}let _t=null,sh=!1;function oS(){_t&&_t.state==="suspended"&&_t.resume().catch(()=>{})}function aS(){sh||(sh=!0,["click","touchstart","keydown"].forEach(e=>{document.addEventListener(e,oS,{once:!1,passive:!0})}))}function Tr(){if(_t)return _t.state==="suspended"&&_t.resume().catch(()=>{}),_t;try{return _t=new(window.AudioContext||window.webkitAudioContext),aS(),_t}catch{return null}}function lS(){const e=y.useCallback((a,c,u="sine")=>{const h=Tr();if(h)try{const d=h.createOscillator(),f=h.createGain();d.connect(f),f.connect(h.destination),d.frequency.setValueAtTime(a,h.currentTime),d.type=u,f.gain.setValueAtTime(.1,h.currentTime),f.gain.exponentialRampToValueAtTime(.001,h.currentTime+c),d.start(h.currentTime),d.stop(h.currentTime+c)}catch{}},[]),t=y.useCallback(()=>{e(523,.1)},[e]),n=y.useCallback(()=>{e(659,.2),setTimeout(()=>e(784,.15),50)},[e]),r=y.useCallback(()=>{e(440,.15),setTimeout(()=>e(330,.1),80)},[e]),s=y.useCallback(()=>{e(392,.1),setTimeout(()=>e(494,.1),100),setTimeout(()=>e(588,.15),200)},[e]),i=y.useCallback(()=>{const a=Tr();if(a)try{((h,d,f=.3)=>{h.forEach(v=>{const x=a.createOscillator(),S=a.createGain();x.connect(S),S.connect(a.destination),x.frequency.setValueAtTime(v,a.currentTime),x.type="triangle",S.gain.setValueAtTime(.05,a.currentTime+d),S.gain.exponentialRampToValueAtTime(.001,a.currentTime+d+f),x.start(a.currentTime+d),x.stop(a.currentTime+d+f)})})([523,659,784,1047],0,.5)}catch{}},[]),o=y.useCallback(()=>{e(698,.15),setTimeout(()=>e(880,.15),100),setTimeout(()=>e(1047,.2),200)},[e]);return{playMenuHover:t,playMenuSelect:n,playMenuBack:r,playMenuOpen:s,playGameStart:i,playPWAInstall:o}}class cS{constructor(){this.services=new Map,this.singletons=new Map}register(t,n,r={}){this.services.set(t,{factory:n,singleton:r.singleton||!1,dependencies:r.dependencies||[]})}resolve(t){const n=this.services.get(t);if(!n)throw new Error(`Service '${t}' not found in container`);if(n.singleton&&this.singletons.has(t))return this.singletons.get(t);const r=n.dependencies.map(i=>this.resolve(i)),s=n.factory(...r);return n.singleton&&this.singletons.set(t,s),s}registerSingleton(t,n,r=[]){this.register(t,n,{singleton:!0,dependencies:r})}registerTransient(t,n,r=[]){this.register(t,n,{singleton:!1,dependencies:r})}has(t){return this.services.has(t)}clear(){this.services.clear(),this.singletons.clear()}}class uS{initializeGame(){throw new Error("Must be implemented")}movePiece(t){throw new Error("Must be implemented")}rotatePiece(){throw new Error("Must be implemented")}rotatePieceLeft(){throw new Error("Must be implemented")}placePiece(){throw new Error("Must be implemented")}holdPiece(){throw new Error("Must be implemented")}hardDrop(){throw new Error("Must be implemented")}updateGame(t){throw new Error("Must be implemented")}pause(){throw new Error("Must be implemented")}resume(){throw new Error("Must be implemented")}restart(){throw new Error("Must be implemented")}getDropPreview(){throw new Error("Must be implemented")}}class ro{constructor(t=10,n=20){this.width=t,this.height=n,this.bufferHeight=4,this.grid=this.createEmptyGrid(),this._buffer=this.createEmptyBuffer()}createEmptyGrid(){return Array(this.height).fill(null).map(()=>Array(this.width).fill(null))}createEmptyBuffer(){return Array(this.bufferHeight).fill(null).map(()=>Array(this.width).fill(null))}clone(){const t=new ro(this.width,this.height);return t.grid=this.grid.map(n=>[...n]),t._buffer=this._buffer.map(n=>[...n]),t}isWithinBounds(t,n){return t>=0&&t<this.width&&n>=-this.bufferHeight&&n<this.height}getCell(t,n){if(!(t<0||t>=this.width)&&!(n<-this.bufferHeight||n>=this.height))return n<0?this._buffer[this.bufferHeight+n][t]:this.grid[n][t]}setCell(t,n,r){return t<0||t>=this.width||n<-this.bufferHeight||n>=this.height?!1:n<0?(this._buffer[this.bufferHeight+n][t]=r,!0):(this.grid[n][t]=r,!0)}clearCell(t,n){return this.setCell(t,n,null)}placePiece(t){t.getCells().forEach(r=>{this.setCell(r.x,r.y,{type:r.type,color:r.color,emoji:r.emoji})})}canPlacePiece(t){return t.getCells().every(r=>r.x<0||r.x>=this.width||r.y>=this.height||r.y<-this.bufferHeight?!1:this.getCell(r.x,r.y)===null)}clearLines(){const t=[...this._buffer,...this.grid],n=[];let r=0;for(let s=t.length-1;s>=0;s--)t[s].every(o=>o!==null)?r++:n.unshift(t[s]);for(;n.length<t.length;)n.unshift(Array(this.width).fill(null));return this._buffer=n.slice(0,this.bufferHeight),this.grid=n.slice(this.bufferHeight),r}getFilledRows(){const t=[];for(let n=0;n<this.height;n++)this.grid[n].every(r=>r!==null)&&t.push(n);return t}isGameOver(){return this._buffer.some(t=>t.some(n=>n!==null))}getBoardState(){return this.grid.map(t=>[...t])}setBoardState(t){this.grid=t.map(n=>[...n]),this._buffer=this.createEmptyBuffer()}clear(){this.grid=this.createEmptyGrid(),this._buffer=this.createEmptyBuffer()}addGarbageLines(t,n=-1){if(t<=0)return!1;const r=n>=0?n:Math.floor(Math.random()*this.width),s=[];for(let c=0;c<t;c++){const u=Array(this.width).fill(null).map((h,d)=>d===r?null:{type:"garbage",color:"#808080",emoji:""});s.push(u)}const i=this.grid.splice(0,t),o=this._buffer.splice(0,t);return this._buffer.push(...i),this.grid.push(...s),o.some(c=>c.some(u=>u!==null))}}class so{constructor(){this.points=0,this.level=1,this.lines=0,this.combo=0,this.tSpins=0,this.backToBack=0,this.tetrisCount=0,this._fixedLevel=null}addPoints(t){this.points+=t}addLines(t){this.lines+=t,this.updateLevel()}incrementCombo(){this.combo++}resetCombo(){this.combo=0}addTSpin(){this.tSpins++}addBackToBack(){this.backToBack++}addTetris(){this.tetrisCount++}updateLevel(){this._fixedLevel||(this.level=Math.min(15,Math.floor(this.lines/10)+1))}getLevel(){return this.level}getDropTime(){const t=this._fixedLevel||this.level;return[1e3,793,618,473,355,262,190,135,94,64,43,28,18,11,7][Math.min(t,15)-1]||7}reset(){this.points=0,this.level=1,this.lines=0,this.combo=0,this.tSpins=0,this.backToBack=0,this.tetrisCount=0,this._fixedLevel=null}clone(){const t=new so;return t.points=this.points,t.level=this.level,t.lines=this.lines,t.combo=this.combo,t.tSpins=this.tSpins,t.backToBack=this.backToBack,t.tetrisCount=this.tetrisCount,t}toJSON(){return{points:this.points,level:this.level,lines:this.lines,combo:this.combo,tSpins:this.tSpins,backToBack:this.backToBack,tetrisCount:this.tetrisCount}}}class Dt{constructor(t,n,r,s,i,o=!1,a=0){this.type=t,this.shape=n,this.color=r,this.emoji=s,this.position=i,this.isTSpin=o,this.rotationState=a}move(t,n){return new Dt(this.type,this.shape,this.color,this.emoji,{x:this.position.x+t,y:this.position.y+n},this.isTSpin,this.rotationState)}rotate(){const t=this.shape[0].map((n,r)=>this.shape.map(s=>s[r]).reverse());return new Dt(this.type,t,this.color,this.emoji,this.position,this.isTSpin,(this.rotationState+1)%4)}setTSpin(t){return new Dt(this.type,this.shape,this.color,this.emoji,this.position,t,this.rotationState)}clone(){return new Dt(this.type,this.shape.map(t=>[...t]),this.color,this.emoji,{...this.position},this.isTSpin,this.rotationState)}reset(t,n,r,s,i,o=!1){return this.type=t,this.shape=n,this.color=r,this.emoji=s,this.position=i,this.isTSpin=o,this.rotationState=0,this}getWidth(){var t;return((t=this.shape[0])==null?void 0:t.length)||0}getHeight(){return this.shape.length||0}getCells(){const t=[];return this.shape.forEach((n,r)=>{n.forEach((s,i)=>{s&&t.push({x:this.position.x+i,y:this.position.y+r,type:this.type,color:this.color,emoji:this.emoji})})}),t}}class dS{calculateScore(t,n,r,s,i){throw new Error("Must be implemented")}calculateSoftDropPoints(){throw new Error("Must be implemented")}calculateTSpinBonus(t){throw new Error("Must be implemented")}calculateBackToBackBonus(t){throw new Error("Must be implemented")}calculateComboBonus(t){throw new Error("Must be implemented")}}class Vn extends dS{calculateScore(t,n,r,s,i){let o=this.getBasePoints(t);return s&&(o=this.calculateTSpinBonus(t)),i&&(o=this.calculateBackToBackBonus(o)),o*=n,o+=this.calculateComboBonus(r),o}calculateSoftDropPoints(){return 1}calculateTSpinBonus(t){return[0,800,1200,1600,2e3][t]||0}calculateBackToBackBonus(t){return Math.floor(t*1.5)}calculateComboBonus(t){return t*50}getBasePoints(t){return[0,100,300,500,800][t]||0}}const Me={BOARD_WIDTH:10,BOARD_HEIGHT:20,BUFFER_ROWS:4,INITIAL_DROP_TIME:1e3,LOCK_DELAY:500,SOFT_DROP_MULTIPLIER:20,NEXT_PIECES_COUNT:3,BAG_SIZE:7,KICK_OFFSETS:[{x:-1,y:0},{x:1,y:0},{x:0,y:-1},{x:-1,y:-1},{x:1,y:-1}],SRS_KICKS_CW:{"0>1":[{x:-1,y:0},{x:-1,y:-1},{x:0,y:2},{x:-1,y:2}],"1>2":[{x:1,y:0},{x:1,y:1},{x:0,y:-2},{x:1,y:-2}],"2>3":[{x:1,y:0},{x:1,y:-1},{x:0,y:2},{x:1,y:2}],"3>0":[{x:-1,y:0},{x:-1,y:1},{x:0,y:-2},{x:-1,y:-2}]},SRS_KICKS_CCW:{"1>0":[{x:1,y:0},{x:1,y:1},{x:0,y:-2},{x:1,y:-2}],"2>1":[{x:-1,y:0},{x:-1,y:-1},{x:0,y:2},{x:-1,y:2}],"3>2":[{x:-1,y:0},{x:-1,y:1},{x:0,y:-2},{x:-1,y:-2}],"0>3":[{x:1,y:0},{x:1,y:-1},{x:0,y:2},{x:1,y:2}]},DROP_TIMES:[1e3,850,700,600,500,400,350,300,250,200,150,100,80,60,50],LEVEL_LINES_REQUIREMENT:10,MAX_LEVEL:15};class Er extends uS{constructor(t,n,r,s=new Vn){super(),this.pieceFactory=t,this.movementStrategyFactory=n,this.gameRepository=r,this.scoringService=s,this.board=new ro(Me.BOARD_WIDTH,Me.BOARD_HEIGHT),this.score=new so,this.currentPiece=null,this.nextPieces=[],this.heldPiece=null,this.canHold=!0,this.isPlaying=!1,this.isPaused=!1,this.gameOver=!1,this.lastDropTime=0,this.backToBack=!1,this._lockDelayActive=!1,this._lockDelayElapsed=0,this._lockDelayResets=0,this._lockDelayMax=Me.LOCK_DELAY,this._lockDelayMaxResets=15,this.gameMode=null,this.modeTimeElapsed=0,this.modeStartTime=0,this.pendingGarbage=0,this._lastAttack=0,this._dirty=!0,this._cachedState=null}_markDirty(){this._dirty=!0,this._cachedState=null}get isDirty(){return this._dirty}clearDirty(){this._dirty=!1}initializeGame(){var t;this.pieceFactory.resetBag(),this.board=new ro(Me.BOARD_WIDTH,Me.BOARD_HEIGHT),this.score=new so,this.currentPiece=this.pieceFactory.createRandomPiece(),this.nextPieces=this.pieceFactory.createNextPieces(Me.NEXT_PIECES_COUNT),this.heldPiece=null,this.canHold=!0,this.isPlaying=!1,this.isPaused=!1,this.gameOver=!1,this.lastDropTime=0,this.backToBack=!1,this._lockDelayActive=!1,this._lockDelayElapsed=0,this._lockDelayResets=0,this.modeTimeElapsed=0,this.modeStartTime=Date.now(),this.pendingGarbage=0,this._lastAttack=0,this.applyGameMode(),Le.logInfo("GameService","initializeGame","Game initialized",{mode:((t=this.gameMode)==null?void 0:t.id)||"classic",startLevel:this.score.level,fixedLevel:this.score._fixedLevel}),L.emit(I.GAME_INITIALIZED),this._markDirty()}setGameMode(t){this.gameMode=t}applyGameMode(){if(!this.gameMode||!this.gameMode.rules)return;const t=this.gameMode.rules;t.startLevel&&(this.score.level=t.startLevel),t.fixedLevel?this.score._fixedLevel=t.fixedLevel:this.score._fixedLevel=null,this._modeRules=t}movePiece(t){var n,r;if(!(!this.currentPiece||this.gameOver||this.isPaused))try{const s=this.movementStrategyFactory.createStrategy(t),i=s.execute(this.currentPiece,this.board.grid);if(i!==this.currentPiece){if(this.currentPiece=i,this._markDirty(),t==="down"){if(this._lockDelayActive=!1,this._lockDelayElapsed=0,this.lastDropTime=0,s.getSoftDropPoints){const o=this.scoringService.calculateSoftDropPoints();this.score.addPoints(o)}}else(t==="left"||t==="right")&&(this._resetLockDelay(),this._checkUngrounded());L.emit(I.PIECE_MOVED,{direction:t,piece:i})}else t==="down"&&(this._markDirty(),this._lockDelayActive||(this._lockDelayActive=!0,this._lockDelayElapsed=0,this._lockDelayResets=0))}catch(s){Le.logError("GameService","movePiece",s.message,{direction:t,pieceType:(n=this.currentPiece)==null?void 0:n.type,piecePos:(r=this.currentPiece)==null?void 0:r.position,stack:s.stack})}}rotatePiece(){var t,n;if(!(!this.currentPiece||this.gameOver||this.isPaused))try{const s=this.movementStrategyFactory.createStrategy("rotate").execute(this.currentPiece,this.board.grid);s!==this.currentPiece&&(this.currentPiece=s,this._markDirty(),this._resetLockDelay(),this._checkUngrounded(),L.emit(I.PIECE_ROTATED,{piece:s}))}catch(r){Le.logError("GameService","rotatePiece",r.message,{pieceType:(t=this.currentPiece)==null?void 0:t.type,piecePos:(n=this.currentPiece)==null?void 0:n.position,stack:r.stack})}}rotatePieceLeft(){if(!this.currentPiece||this.gameOver||this.isPaused)return;const n=this.movementStrategyFactory.createStrategy("rotateLeft").execute(this.currentPiece,this.board.grid);n!==this.currentPiece&&(this.currentPiece=n,this._markDirty(),this._resetLockDelay(),this._checkUngrounded(),L.emit(I.PIECE_ROTATED,{piece:n}))}placePiece(){var n,r;if(!this.currentPiece)return;this._markDirty(),this._lockDelayActive=!1,this._lockDelayElapsed=0,this._lockDelayResets=0,this._lastAttack=0,this.board.placePiece(this.currentPiece);const t=this.board.clearLines();if(t>0){this.score.addLines(t),this.score.incrementCombo();const s=this.currentPiece.isTSpin,i=this.scoringService.calculateScore(t,this.score.getLevel(),this.score.combo,s,this.backToBack);if(this.score.addPoints(i),s||t===4?(this.backToBack&&L.emit(I.BACK_TO_BACK),this.backToBack=!0,s&&(this.score.addTSpin(),L.emit(I.T_SPIN,{linesCleared:t}))):this.backToBack=!1,L.emit(I.LINE_CLEARED,{linesCleared:t}),L.emit(I.SCORE_UPDATED,{score:this.score.points,level:this.score.level,combo:this.score.combo,points:i,isTSpin:s}),this._lastAttack=this._calculateAttack(t,s,this.score.combo,this.backToBack),this._lastAttack>0&&this.pendingGarbage>0){const o=Math.min(this._lastAttack,this.pendingGarbage);this._lastAttack-=o,this.pendingGarbage-=o}}else this.score.resetCombo();if(L.emit(I.PIECE_PLACED,{piece:this.currentPiece,linesCleared:t}),this.pendingGarbage>0){const s=this.board.addGarbageLines(this.pendingGarbage);if(this.pendingGarbage=0,s&&this.board.isGameOver()){this.gameOver=!0,L.emit(I.GAME_OVER);return}}if(this.getNextPiece(),this.canHold=!0,(n=this._modeRules)!=null&&n.lineGoal&&this.score.lines>=this._modeRules.lineGoal){this.gameOver=!0,L.emit(I.GAME_OVER);return}if(((r=this._modeRules)==null?void 0:r.gameOver)===!1){if(this.board.isGameOver()){this.board._buffer=this.board.createEmptyBuffer();for(let s=0;s<4;s++)for(let i=0;i<this.board.width;i++)this.board.clearCell(i,s)}}else this.board.isGameOver()&&(this.gameOver=!0,L.emit(I.GAME_OVER))}_calculateAttack(t,n,r,s){if(t===0)return 0;let i=0;if(n?i=[0,2,4,6][t]||0:i=[0,0,1,2,4][t]||0,s&&(n||t===4)&&(i+=1),r>=1){const a=[0,0,1,1,2,2,3,3,4,4];i+=a[Math.min(r,a.length-1)]||4}return this.board.grid.every(a=>a.every(c=>c===null))&&(i=10),i}receiveGarbage(t){t>0&&(this.pendingGarbage+=t,this._markDirty())}consumeAttack(){const t=this._lastAttack;return this._lastAttack=0,t}holdPiece(){var t,n;if(!(!this.canHold||!this.currentPiece)){this._lockDelayActive=!1,this._lockDelayElapsed=0,this._lockDelayResets=0;try{const r=this.heldPiece,s=this.currentPiece.type,i=_n[s];if(this.heldPiece=new Dt(s,i.shape,i.color,i.emoji,{x:3,y:0},!1,0),r){const o=r.type==="I"?{x:3,y:-2}:{x:3,y:0},a=_n[r.type];this.currentPiece=new Dt(r.type,a.shape,a.color,a.emoji,o,!1,0)}else this.getNextPiece();this.canHold=!1,this._markDirty(),L.emit(I.PIECE_HELD,{heldPiece:this.heldPiece})}catch(r){Le.logError("GameService","holdPiece",r.message,{currentPieceType:(t=this.currentPiece)==null?void 0:t.type,heldPieceType:(n=this.heldPiece)==null?void 0:n.type,stack:r.stack})}}}hardDrop(){var t,n;if(!(!this.currentPiece||this.gameOver||this.isPaused))try{this._lockDelayActive=!1,this._lockDelayElapsed=0;const s=this.movementStrategyFactory.createStrategy("hardDrop").execute(this.currentPiece,this.board.grid);this.currentPiece=s.piece,this.score.addPoints(s.dropDistance),this._markDirty();const i=this.currentPiece;L.emit(I.HARD_DROP,{dropDistance:s.dropDistance}),L.emit(I.PIECE_MOVED,{direction:"hardDrop",piece:i}),this.placePiece()}catch(r){Le.logError("GameService","hardDrop",r.message,{pieceType:(t=this.currentPiece)==null?void 0:t.type,piecePos:(n=this.currentPiece)==null?void 0:n.position,stack:r.stack})}}updateGame(t){var n;if(!(!this.isPlaying||this.gameOver||this.isPaused)){if((n=this._modeRules)!=null&&n.timeLimit&&(this.modeTimeElapsed=(Date.now()-this.modeStartTime)/1e3,this.modeTimeElapsed>=this._modeRules.timeLimit)){this.gameOver=!0,this._markDirty(),L.emit(I.GAME_OVER);return}if(this._lockDelayActive){if(this._lockDelayElapsed+=t,this._lockDelayElapsed>=this._lockDelayMax){this._lockDelayActive=!1,this._lockDelayElapsed=0,this.placePiece(),this.lastDropTime=0;return}return}this.lastDropTime+=t,this.lastDropTime>=this.score.getDropTime()&&(this.movePiece("down"),this.lastDropTime=0)}}_resetLockDelay(){this._lockDelayActive&&this._lockDelayResets<this._lockDelayMaxResets&&(this._lockDelayElapsed=0,this._lockDelayResets++)}_checkUngrounded(){if(!this._lockDelayActive||!this.currentPiece)return;this.board.canPlacePiece(this.currentPiece.move(0,1))&&(this._lockDelayActive=!1,this._lockDelayElapsed=0,this._lockDelayResets=0)}pause(){this.isPaused=!0,this._markDirty(),L.emit(I.GAME_PAUSED)}resume(){this.isPaused=!1,this.isPlaying=!0,this._markDirty(),L.emit(I.GAME_RESUMED)}restart(){this.initializeGame(),this.isPlaying=!0,this.isPaused=!1,this.modeStartTime=Date.now(),this._markDirty()}getDropPreview(){if(!this.currentPiece)return null;let t=this.currentPiece,n=0;const r=20;for(;n<r&&this.board.canPlacePiece(t.move(0,1));)t=t.move(0,1),n++;return t}getNextPiece(){const t=this.nextPieces.shift();this.nextPieces.push(this.pieceFactory.createRandomPiece()),this.currentPiece=t,this.currentPiece&&!this.board.canPlacePiece(this.currentPiece)&&(this.gameOver=!0,this._markDirty(),L.emit(I.GAME_OVER))}getGameState(){var t;return this._cachedState&&!this._dirty?this._cachedState:(this._cachedState={board:this.board.grid.map(n=>[...n]),currentPiece:this.currentPiece,nextPieces:[...this.nextPieces],heldPiece:this.heldPiece,canHold:this.canHold,score:this.score.toJSON(),isPlaying:this.isPlaying,isPaused:this.isPaused,gameOver:this.gameOver,backToBack:this.backToBack,gameMode:this.gameMode,modeTimeElapsed:(t=this._modeRules)!=null&&t.timeLimit?Math.max(0,this._modeRules.timeLimit-(Date.now()-this.modeStartTime)/1e3):null},this._cachedState)}setGameState(t){this.board.setBoardState(t.board),this.currentPiece=t.currentPiece,this.nextPieces=t.nextPieces,this.heldPiece=t.heldPiece,this.canHold=t.canHold,this.isPlaying=t.isPlaying,this.isPaused=t.isPaused,this.gameOver=t.gameOver,this.backToBack=t.backToBack,Object.assign(this.score,t.score)}}class hS{saveHighScore(t){throw new Error("Must be implemented")}getHighScore(){throw new Error("Must be implemented")}saveSettings(t){throw new Error("Must be implemented")}getSettings(){throw new Error("Must be implemented")}saveGameState(t){throw new Error("Must be implemented")}getGameState(){throw new Error("Must be implemented")}clearGameState(){throw new Error("Must be implemented")}}class fS extends hS{constructor(){super(),this.highScoreKey="cat-tetris-high-score",this.settingsKey="cat-tetris-settings",this.gameStateKey="cat-tetris-game-state"}saveHighScore(t){localStorage.setItem(this.highScoreKey,t.toString())}getHighScore(){return parseInt(localStorage.getItem(this.highScoreKey)||"0")}saveSettings(t){localStorage.setItem(this.settingsKey,JSON.stringify(t))}getSettings(){const t=localStorage.getItem(this.settingsKey);return t?JSON.parse(t):{volume:80,gameSpeed:"normal",soundEnabled:!0,particlesEnabled:!0}}saveGameState(t){localStorage.setItem(this.gameStateKey,JSON.stringify(t))}getGameState(){const t=localStorage.getItem(this.gameStateKey);return t?JSON.parse(t):null}clearGameState(){localStorage.removeItem(this.gameStateKey)}load(t){const n=localStorage.getItem(`cat-tetris-${t}`);return n?JSON.parse(n):null}save(t,n){localStorage.setItem(`cat-tetris-${t}`,JSON.stringify(n))}remove(t){localStorage.removeItem(`cat-tetris-${t}`)}}class mS{createPiece(t,n){throw new Error("Must be implemented")}createRandomPiece(){throw new Error("Must be implemented")}createNextPieces(t){throw new Error("Must be implemented")}}class pS{execute(t,n){throw new Error("Must be implemented")}}class Dr extends pS{execute(t,n){throw new Error("execute method must be implemented")}movePiece(t,n,r,s){if(!t||!n||!Array.isArray(n))return t;const i={x:t.position.x+r,y:t.position.y+s};return this.isValidMove(t,n,i)?t.move(r,s):t}isValidMove(t,n,r){return!t||!t.shape||!n||!Array.isArray(n)?!1:t.shape.every((s,i)=>Array.isArray(s)?s.every((o,a)=>{if(!o)return!0;const c=r.x+a,u=r.y+i;return c<0||c>=Me.BOARD_WIDTH||u>=Me.BOARD_HEIGHT?!1:u<0?!0:n[u]&&Array.isArray(n[u])&&!n[u][c]}):!0)}}class gS extends Dr{execute(t,n){return this.movePiece(t,n,-1,0)}}class vS extends Dr{execute(t,n){return this.movePiece(t,n,1,0)}}class yS extends Dr{execute(t,n){if(!t||!n)return t;const r={x:t.position.x,y:t.position.y+1};return this.isValidMove(t,n,r)?t.move(0,1):t}getSoftDropPoints(){return 1}}class xS extends Dr{execute(t,n){var u;if(!t||!t.shape||!n)return t;const r=this.rotatePiece(t);let s=!1;if(this.isValidMove(r,n,r.position))return s=this.detectTSpin(r,n),r.setTSpin(s);const i=t.rotationState??0,o=(i+1)%4,a=`${i}>${o}`,c=((u=Me.SRS_KICKS_CW)==null?void 0:u[a])||Me.KICK_OFFSETS;for(const h of c){const d={x:r.position.x+h.x,y:r.position.y+h.y};if(this.isValidMove(r,n,d)){const f=r.move(h.x,h.y);return s=this.detectTSpin(f,n),f.setTSpin(s)}}return t}detectTSpin(t,n){return t.type!=="T"?!1:this.getCornerPositions(t).filter(o=>o.x<0||o.x>=Me.BOARD_WIDTH||o.y<0||o.y>=Me.BOARD_HEIGHT||n[o.y]&&n[o.y][o.x]).length>=3}getCornerPositions(t){const n=[],r=t.position.x,s=t.position.y;return n.push({x:r,y:s}),n.push({x:r+2,y:s}),n.push({x:r,y:s+2}),n.push({x:r+2,y:s+2}),n}rotatePiece(t){return!t||!t.shape||!Array.isArray(t.shape)||t.shape.length===0?t:t.rotate()}}class wS extends Dr{execute(t,n){var u;if(!t||!t.shape||!n)return t;const r=this.rotatePieceLeft(t);let s=!1;if(this.isValidMove(r,n,r.position))return s=this.detectTSpin(r,n),r.setTSpin(s);const i=t.rotationState??0,o=(i+3)%4,a=`${i}>${o}`,c=((u=Me.SRS_KICKS_CCW)==null?void 0:u[a])||Me.KICK_OFFSETS;for(const h of c){const d={x:r.position.x+h.x,y:r.position.y+h.y};if(this.isValidMove(r,n,d)){const f=r.move(h.x,h.y);return s=this.detectTSpin(f,n),f.setTSpin(s)}}return t}detectTSpin(t,n){return t.type!=="T"?!1:this.getCornerPositions(t).filter(o=>o.x<0||o.x>=Me.BOARD_WIDTH||o.y<0||o.y>=Me.BOARD_HEIGHT||n[o.y]&&n[o.y][o.x]).length>=3}getCornerPositions(t){const n=[],r=t.position.x,s=t.position.y;return n.push({x:r,y:s}),n.push({x:r+2,y:s}),n.push({x:r,y:s+2}),n.push({x:r+2,y:s+2}),n}rotatePieceLeft(t){if(!t||!t.shape||!Array.isArray(t.shape)||t.shape.length===0)return t;const n=t.shape[0].map((r,s)=>t.shape.map(i=>i[i.length-1-s]));return new Dt(t.type,n,t.color,t.emoji,t.position,t.isTSpin,(t.rotationState+3)%4)}}class SS extends Dr{execute(t,n){if(!t||!n)return{piece:t,dropDistance:0};let r=t,s=0;for(;;){const i={x:r.position.x,y:r.position.y+1};if(this.isValidMove(r,n,i))r=r.move(0,1),s++;else break}return{piece:r,dropDistance:s}}}class ih{constructor(){this.reset()}reset(){return this.piece={type:null,shape:[],color:"#000000",emoji:"",position:{x:3,y:0},isTSpin:!1},this}setType(t){return this.piece.type=t,this}setShape(t){return this.piece.shape=t,this}setColor(t){return this.piece.color=t,this}setEmoji(t){return this.piece.emoji=t,this}setPosition(t,n){return this.piece.position={x:t,y:n},this}setTSpin(t){return this.piece.isTSpin=t,this}build(){const t=new Dt(this.piece.type,this.piece.shape,this.piece.color,this.piece.emoji,this.piece.position,this.piece.isTSpin);return this.reset(),t}}class Nr extends mS{constructor(){super(),this.pieceConfigs=_n,this._bag=[],this._bagIndex=0}_refillBag(){this._bag=Object.keys(this.pieceConfigs);for(let t=this._bag.length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1));[this._bag[t],this._bag[n]]=[this._bag[n],this._bag[t]]}this._bagIndex=0}resetBag(){this._bag=[],this._bagIndex=0}_getNextType(){return this._bagIndex>=this._bag.length&&this._refillBag(),this._bag[this._bagIndex++]}createPiece(t,n={x:3,y:0}){const r=this.pieceConfigs[t];if(!r)throw new Error(`Tipo de pea invlido: ${t}`);return new ih().setType(t).setShape(r.shape).setColor(r.color).setEmoji(r.emoji).setPosition(n.x,n.y).build()}createRandomPiece(){const t=this._getNextType(),n=this.pieceConfigs[t];let r={x:3,y:0};return t==="I"&&(r={x:3,y:-2}),new ih().setType(t).setShape(n.shape).setColor(n.color).setEmoji(n.emoji).setPosition(r.x,r.y).build()}createNextPieces(t=3){const n=[];for(let r=0;r<t;r++)n.push(this.createRandomPiece());return n}registerPieceType(t,n){this.pieceConfigs[t]=n}getPieceTypes(){return Object.keys(this.pieceConfigs)}}class _r{constructor(){this.strategies=new Map,this.registerDefaultStrategies()}registerDefaultStrategies(){this.strategies.set("left",()=>new gS),this.strategies.set("right",()=>new vS),this.strategies.set("down",()=>new yS),this.strategies.set("rotate",()=>new xS),this.strategies.set("rotateLeft",()=>new wS),this.strategies.set("hardDrop",()=>new SS)}createStrategy(t){const n=this.strategies.get(t);if(!n)throw new Error(`Strategy type '${t}' not found`);return n()}registerStrategy(t,n){if(typeof n!="function")throw new Error("Strategy factory must be a function");this.strategies.set(t,n)}unregisterStrategy(t){this.strategies.delete(t)}getAvailableStrategies(){return Array.from(this.strategies.keys())}hasStrategy(t){return this.strategies.has(t)}}class bS{getSettings(){throw new Error("Method getSettings must be implemented")}saveSettings(t){throw new Error("Method saveSettings must be implemented")}updateSetting(t,n){throw new Error("Method updateSetting must be implemented")}resetSettings(){throw new Error("Method resetSettings must be implemented")}}class kS extends bS{constructor(){super(),this.storageKey="cat-tetris-settings",this.defaultSettings={volume:80,gameSpeed:"normal",soundEnabled:!0,particlesEnabled:!0}}getSettings(){try{const t=localStorage.getItem(this.storageKey);return t?{...this.defaultSettings,...JSON.parse(t)}:this.defaultSettings}catch{return this.defaultSettings}}saveSettings(t){try{const n={...this.defaultSettings,...t};return localStorage.setItem(this.storageKey,JSON.stringify(n)),n}catch{throw new Error("Failed to save settings")}}resetSettings(){try{return localStorage.removeItem(this.storageKey),this.defaultSettings}catch{throw new Error("Failed to reset settings")}}updateSetting(t,n){const s={...this.getSettings(),[t]:n};return this.saveSettings(s)}}class jS{getStats(){throw new Error("Method getStats must be implemented")}incrementPlayTime(){throw new Error("Method incrementPlayTime must be implemented")}incrementPiecesPlaced(){throw new Error("Method incrementPiecesPlaced must be implemented")}addLinesCleared(t){throw new Error("Method addLinesCleared must be implemented")}incrementTSpins(){throw new Error("Method incrementTSpins must be implemented")}updateMaxCombo(t){throw new Error("Method updateMaxCombo must be implemented")}reset(){throw new Error("Method reset must be implemented")}}class CS extends jS{constructor(){super(),this.stats={playTime:0,piecesPlaced:0,linesCleared:0,tSpins:0,backToBack:0,maxCombo:0,tetrisCount:0,linesPerSecond:0},this.sessionStartTime=Date.now()}getStats(){return{...this.stats}}incrementPlayTime(){this.stats.playTime+=1,this.calculateLinesPerSecond()}incrementPiecesPlaced(){this.stats.piecesPlaced+=1}addLinesCleared(t){this.stats.linesCleared+=t,t===4&&(this.stats.tetrisCount+=1),this.calculateLinesPerSecond()}incrementTSpins(){this.stats.tSpins+=1}incrementBackToBack(){this.stats.backToBack+=1}updateMaxCombo(t){t>this.stats.maxCombo&&(this.stats.maxCombo=t)}calculateLinesPerSecond(){this.stats.playTime>0?this.stats.linesPerSecond=this.stats.linesCleared/this.stats.playTime:this.stats.linesPerSecond=0}reset(){this.stats={playTime:0,piecesPlaced:0,linesCleared:0,tSpins:0,backToBack:0,maxCombo:0,tetrisCount:0,linesPerSecond:0},this.sessionStartTime=Date.now()}getSessionDuration(){return Date.now()-this.sessionStartTime}}class PS{registerHandler(t,n){throw new Error("Method registerHandler must be implemented")}unregisterHandler(t,n){throw new Error("Method unregisterHandler must be implemented")}startListening(){throw new Error("Method startListening must be implemented")}stopListening(){throw new Error("Method stopListening must be implemented")}setKeyMapping(t,n){throw new Error("Method setKeyMapping must be implemented")}getKeyMappings(){throw new Error("Method getKeyMappings must be implemented")}}class TS extends PS{constructor(){super();zs(this,"_handleKeyDown",n=>{if(this.preventDefaultKeys.includes(n.key)&&n.preventDefault(),n.repeat)return;const r=this.keyMappings[n.key];r&&(this._fireAction(r),this._dasActions.has(r)&&this._pressedKeys.set(n.key,{action:r,dasTimer:0,arrTimer:0,dasTriggered:!1}))});zs(this,"_handleKeyUp",n=>{this._pressedKeys.delete(n.key)});zs(this,"_handleBlur",()=>{this._pressedKeys.clear()});this.keyMappings={ArrowLeft:"moveLeft",ArrowRight:"moveRight",ArrowDown:"moveDown",ArrowUp:"rotate",x:"rotate",X:"rotate",z:"rotateLeft",Z:"rotateLeft"," ":"hardDrop",c:"hold",C:"hold",Shift:"hold",p:"pause",P:"pause",Escape:"pause"},this.preventDefaultKeys=["ArrowLeft","ArrowRight","ArrowDown","ArrowUp"," "],this.handlers=new Map,this.isListening=!1,this.das=167,this.arr=33,this.sdf=5,this._dasActions=new Set(["moveLeft","moveRight","moveDown"]),this._pressedKeys=new Map,this._rafId=null,this._lastTime=0}setDAS(n){this.das=Math.max(0,n)}setARR(n){this.arr=Math.max(0,n)}getDAS(){return this.das}getARR(){return this.arr}registerHandler(n,r){this.handlers.has(n)||this.handlers.set(n,[]),this.handlers.get(n).push(r)}unregisterHandler(n,r){if(this.handlers.has(n)){const s=this.handlers.get(n),i=s.indexOf(r);i>-1&&s.splice(i,1)}}_fireAction(n){this.handlers.has(n)&&this.handlers.get(n).forEach(r=>{try{r()}catch{}})}startListening(){this.isListening||(window.addEventListener("keydown",this._handleKeyDown),window.addEventListener("keyup",this._handleKeyUp),window.addEventListener("blur",this._handleBlur),this.isListening=!0,this._startLoop())}stopListening(){this.isListening&&(window.removeEventListener("keydown",this._handleKeyDown),window.removeEventListener("keyup",this._handleKeyUp),window.removeEventListener("blur",this._handleBlur),this.isListening=!1,this._stopLoop(),this._pressedKeys.clear())}_startLoop(){this._lastTime=performance.now();const n=r=>{const s=r-this._lastTime;this._lastTime=r,this._updateDAS(s),this._rafId=requestAnimationFrame(n)};this._rafId=requestAnimationFrame(n)}_stopLoop(){this._rafId&&(cancelAnimationFrame(this._rafId),this._rafId=null)}_updateDAS(n){for(const[r,s]of this._pressedKeys)if(s.dasTriggered)if(s.arrTimer+=n,this.arr===0){for(let i=0;i<20;i++)this._fireAction(s.action);s.arrTimer=0}else for(;s.arrTimer>=this.arr;)s.arrTimer-=this.arr,this._fireAction(s.action);else if(s.dasTimer+=n,s.dasTimer>=this.das)if(s.dasTriggered=!0,s.arrTimer=0,this.arr===0)for(let i=0;i<20;i++)this._fireAction(s.action);else this._fireAction(s.action)}setKeyMapping(n,r){this.keyMappings[n]=r}removeKeyMapping(n){delete this.keyMappings[n]}getKeyMappings(){return{...this.keyMappings}}clear(){this.handlers.clear(),this.stopListening()}}class ES{constructor(t){this.gameRepository=t,this.currency=this.loadCurrency()}loadCurrency(){return this.gameRepository.load("playerCurrency")||{fish:0,totalEarned:0,totalSpent:0}}save(){this.gameRepository.save("playerCurrency",this.currency)}getFish(){return this.currency.fish}getCurrency(){return{...this.currency}}addFish(t,n="unknown"){return t<=0?!1:(this.currency.fish+=t,this.currency.totalEarned+=t,this.save(),!0)}spendFish(t,n="unknown"){return t<=0||this.currency.fish<t?!1:(this.currency.fish-=t,this.currency.totalSpent+=t,this.save(),!0)}canAfford(t){return this.currency.fish>=t}reset(){this.currency={fish:0,totalEarned:0,totalSpent:0},this.save()}getStats(){return{currentFish:this.currency.fish,totalEarned:this.currency.totalEarned,totalSpent:this.currency.totalSpent,netWorth:this.currency.totalEarned-this.currency.totalSpent}}}const oe={CLEAR_LINES:"clear_lines",T_SPINS:"t_spins",COMBOS:"combos",SURVIVE_TIME:"survive_time",REACH_LEVEL:"reach_level",SCORE_POINTS:"score_points",PLACE_PIECES:"place_pieces",BACK_TO_BACK:"back_to_back",TETRIS_CLEAR:"tetris_clear"},ga=[{type:oe.CLEAR_LINES,target:20,reward:100,difficulty:"easy",title:"Limpeza Bsica",description:"Limpe 20 linhas"},{type:oe.PLACE_PIECES,target:30,reward:100,difficulty:"easy",title:"Gato Trabalhador",description:"Coloque 30 peas"},{type:oe.SURVIVE_TIME,target:180,reward:120,difficulty:"easy",title:"Sobrevivente",description:"Sobreviva por 3 minutos"},{type:oe.SCORE_POINTS,target:5e3,reward:150,difficulty:"easy",title:"Fazendo Pontos",description:"Alcance 5.000 pontos"},{type:oe.CLEAR_LINES,target:40,reward:200,difficulty:"medium",title:"Limpeza Profunda",description:"Limpe 40 linhas em uma partida"},{type:oe.T_SPINS,target:3,reward:250,difficulty:"medium",title:"Mestre do T-Spin",description:"Faa 3 T-Spins"},{type:oe.COMBOS,target:7,reward:200,difficulty:"medium",title:"Combo Felino",description:"Alcance um combo de 7x"},{type:oe.REACH_LEVEL,target:8,reward:180,difficulty:"medium",title:"Subindo de Nvel",description:"Alcance o nvel 8"},{type:oe.TETRIS_CLEAR,target:2,reward:220,difficulty:"medium",title:"Tetris Duplo",description:"Faa 2 Tetris (4 linhas)"},{type:oe.T_SPINS,target:5,reward:350,difficulty:"hard",title:"Ninja T-Spin",description:"Faa 5 T-Spins em uma partida"},{type:oe.COMBOS,target:10,reward:300,difficulty:"hard",title:"Combo Insano",description:"Alcance um combo de 10x"},{type:oe.SURVIVE_TIME,target:600,reward:400,difficulty:"hard",title:"Resistncia Felina",description:"Sobreviva por 10 minutos"},{type:oe.REACH_LEVEL,target:12,reward:350,difficulty:"hard",title:"Mestre dos Gatos",description:"Alcance o nvel 12"},{type:oe.SCORE_POINTS,target:5e4,reward:400,difficulty:"hard",title:"Pontuao Lendria",description:"Alcance 50.000 pontos"},{type:oe.BACK_TO_BACK,target:3,reward:380,difficulty:"hard",title:"Back-to-Back Master",description:"Faa 3 back-to-backs"}];class NS{constructor(t,n){this.gameRepository=t,this.currencyService=n,this.missions=this.loadMissions(),this.checkAndResetDaily()}loadMissions(){return this.gameRepository.load("dailyMissions")||this.generateNewMissions()}save(){this.gameRepository.save("dailyMissions",this.missions)}checkAndResetDaily(){const n=new Date().toDateString();this.missions.lastResetDate!==n&&(this.missions=this.generateNewMissions(),this.save())}generateNewMissions(){const t=ga.filter(o=>o.difficulty==="easy"),n=ga.filter(o=>o.difficulty==="medium"),r=ga.filter(o=>o.difficulty==="hard"),s=[this.selectRandomMission(t),this.selectRandomMission(n),this.selectRandomMission(r)],i=new Date;return{lastResetDate:i.toDateString(),missions:s.map((o,a)=>({id:`mission_${i.getTime()}_${a}`,...o,progress:0,completed:!1,claimed:!1}))}}selectRandomMission(t){return t[Math.floor(Math.random()*t.length)]}getMissions(){return this.checkAndResetDaily(),this.missions.missions}updateProgress(t,n){let r=!1;return this.missions.missions.forEach(s=>{s.type===t&&!s.completed&&(s.progress=Math.max(s.progress,n),s.progress>=s.target&&(s.completed=!0,r=!0))}),r&&this.save(),r}incrementProgress(t,n=1){let r=!1;return this.missions.missions.forEach(s=>{s.type===t&&!s.completed&&(s.progress+=n,s.progress>=s.target&&(s.completed=!0,r=!0))}),r&&this.save(),r}claimReward(t){const n=this.missions.missions.find(r=>r.id===t);return n?n.completed?n.claimed?{success:!1,error:"Already claimed"}:(n.claimed=!0,this.currencyService.addFish(n.reward,`Mission: ${n.title}`),this.save(),{success:!0,reward:n.reward,title:n.title}):{success:!1,error:"Mission not completed"}:{success:!1,error:"Mission not found"}}getStats(){const t=this.missions.missions.length,n=this.missions.missions.filter(o=>o.completed).length,r=this.missions.missions.filter(o=>o.claimed).length,s=this.missions.missions.reduce((o,a)=>o+a.reward,0),i=this.missions.missions.filter(o=>o.claimed).reduce((o,a)=>o+a.reward,0);return{total:t,completed:n,claimed:r,totalRewards:s,claimedRewards:i,allCompleted:n===t,allClaimed:r===t}}reset(){this.missions=this.generateNewMissions(),this.save()}}const va=[{id:"first_line",title:" Primeira Linha",description:"Limpe sua primeira linha",requirement:{type:"lines_total",value:1},reward:50,tier:"bronze"},{id:"first_game",title:" Primeira Partida",description:"Complete sua primeira partida",requirement:{type:"games_played",value:1},reward:50,tier:"bronze"},{id:"scorer",title:" Pontuador",description:"Alcance 10.000 pontos em uma partida",requirement:{type:"score_single",value:1e4},reward:100,tier:"bronze"},{id:"combo_starter",title:" Combo Starter",description:"Alcance um combo de 5x",requirement:{type:"max_combo",value:5},reward:150,tier:"silver"},{id:"tspin_novice",title:" Aprendiz T-Spin",description:"Faa seu primeiro T-Spin",requirement:{type:"tspins_total",value:1},reward:150,tier:"silver"},{id:"survivor",title:" Sobrevivente",description:"Sobreviva por 5 minutos",requirement:{type:"survive_time",value:300},reward:150,tier:"silver"},{id:"level_5",title:" Nvel 5",description:"Alcance o nvel 5",requirement:{type:"max_level",value:5},reward:100,tier:"silver"},{id:"line_clearer",title:" Limpador",description:"Limpe 100 linhas no total",requirement:{type:"lines_total",value:100},reward:200,tier:"silver"},{id:"combo_master",title:" Combo Master",description:"Alcance um combo de 10x",requirement:{type:"max_combo",value:10},reward:300,tier:"gold"},{id:"tspin_master",title:" Mestre T-Spin",description:"Faa 50 T-Spins no total",requirement:{type:"tspins_total",value:50},reward:400,tier:"gold"},{id:"speed_demon",title:" Speed Demon",description:"Alcance o nvel 15",requirement:{type:"max_level",value:15},reward:350,tier:"gold"},{id:"high_scorer",title:" Alto Pontuador",description:"Alcance 100.000 pontos em uma partida",requirement:{type:"score_single",value:1e5},reward:400,tier:"gold"},{id:"dedicated",title:" Dedicado",description:"Jogue 50 partidas",requirement:{type:"games_played",value:50},reward:300,tier:"gold"},{id:"marathon",title:" Maratonista",description:"Limpe 500 linhas no total",requirement:{type:"lines_total",value:500},reward:350,tier:"gold"},{id:"cat_king",title:" Rei dos Gatos",description:"Alcance 1.000.000 de pontos em uma partida",requirement:{type:"score_single",value:1e6},reward:1e3,tier:"platinum"},{id:"immortal",title:" Imortal",description:"Alcance o nvel 20",requirement:{type:"max_level",value:20},reward:800,tier:"platinum"},{id:"combo_legend",title:" Lenda do Combo",description:"Alcance um combo de 15x",requirement:{type:"max_combo",value:15},reward:700,tier:"platinum"},{id:"tspin_legend",title:" Lenda T-Spin",description:"Faa 200 T-Spins no total",requirement:{type:"tspins_total",value:200},reward:800,tier:"platinum"},{id:"veteran",title:" Veterano",description:"Jogue 200 partidas",requirement:{type:"games_played",value:200},reward:600,tier:"platinum"},{id:"ultimate_cleaner",title:" Limpador Supremo",description:"Limpe 2.000 linhas no total",requirement:{type:"lines_total",value:2e3},reward:700,tier:"platinum"}];class _S{constructor(t,n,r){this.gameRepository=t,this.currencyService=n,this.statisticsService=r,this.achievements=this.loadAchievements()}loadAchievements(){const t=this.gameRepository.load("achievements");if(!t)return va.map(r=>({...r,unlocked:!1,unlockedAt:null,progress:0}));const n=new Map(t.map(r=>[r.id,r]));return va.map(r=>n.get(r.id)||{...r,unlocked:!1,unlockedAt:null,progress:0})}save(){this.gameRepository.save("achievements",this.achievements)}getAchievements(){return[...this.achievements]}getUnlocked(){return this.achievements.filter(t=>t.unlocked)}getLocked(){return this.achievements.filter(t=>!t.unlocked)}getByTier(t){return this.achievements.filter(n=>n.tier===t)}checkAchievements(t){const n=[];return this.achievements.forEach(r=>{if(r.unlocked)return;const{type:s,value:i}=r.requirement;let o=0;switch(s){case"lines_total":o=t.linesCleared||0;break;case"games_played":o=t.gamesPlayed||0;break;case"score_single":o=t.highScore||0;break;case"max_combo":o=t.maxCombo||0;break;case"tspins_total":o=t.tSpins||0;break;case"survive_time":o=t.longestGame||0;break;case"max_level":o=t.maxLevel||0;break}r.progress=Math.min(o,i),o>=i&&(r.unlocked=!0,r.unlockedAt=new Date().toISOString(),this.currencyService.addFish(r.reward,`Achievement: ${r.title}`),n.push(r))}),n.length>0&&this.save(),n}getStats(){const t=this.achievements.length,n=this.achievements.filter(o=>o.unlocked).length,r=this.achievements.reduce((o,a)=>o+a.reward,0),s=this.achievements.filter(o=>o.unlocked).reduce((o,a)=>o+a.reward,0),i={bronze:this.getByTier("bronze").filter(o=>o.unlocked).length,silver:this.getByTier("silver").filter(o=>o.unlocked).length,gold:this.getByTier("gold").filter(o=>o.unlocked).length,platinum:this.getByTier("platinum").filter(o=>o.unlocked).length};return{total:t,unlocked:n,percentage:Math.floor(n/t*100),totalRewards:r,earnedRewards:s,byTier:i}}reset(){this.achievements=va.map(t=>({...t,unlocked:!1,unlockedAt:null,progress:0})),this.save()}}class AS{constructor(t){this.gameRepository=t,this.stats=this.loadStats()}loadStats(){return this.gameRepository.load("playerStats")||{gamesPlayed:0,linesCleared:0,piecesPlaced:0,tSpins:0,backToBack:0,totalPlayTime:0,highScore:0,maxLevel:0,maxCombo:0,longestGame:0,mostLinesInGame:0,lastUpdated:new Date().toISOString(),lastPlayedDate:null,currentStreak:0,longestStreak:0}}save(){this.stats.lastUpdated=new Date().toISOString(),this.gameRepository.save("playerStats",this.stats)}getStats(){return{...this.stats}}updateAfterGame(t){this.stats.gamesPlayed+=1,this.stats.linesCleared+=t.linesCleared||0,this.stats.piecesPlaced+=t.piecesPlaced||0,this.stats.tSpins+=t.tSpins||0,this.stats.backToBack+=t.backToBack||0,this.stats.totalPlayTime+=t.playTime||0,t.score>this.stats.highScore&&(this.stats.highScore=t.score),t.level>this.stats.maxLevel&&(this.stats.maxLevel=t.level),t.maxCombo>this.stats.maxCombo&&(this.stats.maxCombo=t.maxCombo),t.playTime>this.stats.longestGame&&(this.stats.longestGame=t.playTime),t.linesCleared>this.stats.mostLinesInGame&&(this.stats.mostLinesInGame=t.linesCleared),this.updateStreak(),this.save()}updateStreak(){const t=new Date().toDateString(),n=this.stats.lastPlayedDate;if(n!==t){if(!n)this.stats.currentStreak=1,this.stats.longestStreak=1;else{const r=new Date(n),s=new Date(t);Math.floor((s-r)/(1e3*60*60*24))===1?(this.stats.currentStreak+=1,this.stats.currentStreak>this.stats.longestStreak&&(this.stats.longestStreak=this.stats.currentStreak)):this.stats.currentStreak=1}this.stats.lastPlayedDate=t}}incrementStat(t,n=1){this.stats.hasOwnProperty(t)&&(this.stats[t]+=n,this.save())}updateRecord(t,n){return this.stats.hasOwnProperty(t)&&n>this.stats[t]?(this.stats[t]=n,this.save(),!0):!1}reset(){this.stats={gamesPlayed:0,linesCleared:0,piecesPlaced:0,tSpins:0,backToBack:0,totalPlayTime:0,highScore:0,maxLevel:0,maxCombo:0,longestGame:0,mostLinesInGame:0,lastUpdated:new Date().toISOString(),lastPlayedDate:null,currentStreak:0,longestStreak:0},this.save()}}const Wt={classic:{id:"classic",name:" Tetris Clssico",description:"Cores oficiais do Tetris",price:0,default:!0,pieces:{I:{emoji:"",color:"#00F0F0"},O:{emoji:"",color:"#F0F000"},T:{emoji:"",color:"#A000F0"},S:{emoji:"",color:"#00F000"},Z:{emoji:"",color:"#F00000"},J:{emoji:"",color:"#0000F0"},L:{emoji:"",color:"#F0A000"}}},cats:{id:"cats",name:" Gatos Clssicos",description:"Os gatinhos originais do Cat Tetris",price:0,default:!0,pieces:{I:{emoji:"",color:"#00f0f0"},O:{emoji:"",color:"#f0f000"},T:{emoji:"",color:"#a000f0"},S:{emoji:"",color:"#00f000"},Z:{emoji:"",color:"#f00000"},J:{emoji:"",color:"#f0a000"},L:{emoji:"",color:"#ffc0cb"}}},dogs:{id:"dogs",name:" Cachorros Felizes",description:"Amigos caninos adorveis",price:500,pieces:{I:{emoji:"",color:"#8B4513"},O:{emoji:"",color:"#D2691E"},T:{emoji:"",color:"#CD853F"},S:{emoji:"",color:"#DEB887"},Z:{emoji:"",color:"#F4A460"},J:{emoji:"",color:"#FFDEAD"},L:{emoji:"",color:"#FFE4B5"}}},pandas:{id:"pandas",name:" Pandas Fofos",description:"Ursinhos preto e branco",price:600,pieces:{I:{emoji:"",color:"#000000"},O:{emoji:"",color:"#808080"},T:{emoji:"",color:"#A0A0A0"},S:{emoji:"",color:"#FFFFFF"},Z:{emoji:"",color:"#D3D3D3"},J:{emoji:"",color:"#90EE90"},L:{emoji:"",color:"#98FB98"}}},foxes:{id:"foxes",name:" Raposas Astutas",description:"Raposinhas espertas e geis",price:700,pieces:{I:{emoji:"",color:"#FF4500"},O:{emoji:"",color:"#FF6347"},T:{emoji:"",color:"#FF7F50"},S:{emoji:"",color:"#CD5C5C"},Z:{emoji:"",color:"#D2691E"},J:{emoji:"",color:"#8B4513"},L:{emoji:"",color:"#DAA520"}}},unicorns:{id:"unicorns",name:" Unicrnios Mgicos",description:"Criaturas msticas e coloridas",price:900,pieces:{I:{emoji:"",color:"#FF00FF"},O:{emoji:"",color:"#FFD700"},T:{emoji:"",color:"#87CEEB"},S:{emoji:"",color:"#FF69B4"},Z:{emoji:"",color:"#9370DB"},J:{emoji:"",color:"#DA70D6"},L:{emoji:"",color:"#FFC0CB"}}},robots:{id:"robots",name:" Robs Futuristas",description:"Tecnologia do futuro",price:800,pieces:{I:{emoji:"",color:"#708090"},O:{emoji:"",color:"#778899"},T:{emoji:"",color:"#4682B4"},S:{emoji:"",color:"#5F9EA0"},Z:{emoji:"",color:"#00CED1"},J:{emoji:"",color:"#1E90FF"},L:{emoji:"",color:"#4169E1"}}},foods:{id:"foods",name:" Comidas Deliciosas",description:"Para quem joga com fome",price:750,pieces:{I:{emoji:"",color:"#FF6347"},O:{emoji:"",color:"#FFD700"},T:{emoji:"",color:"#FFA500"},S:{emoji:"",color:"#FF4500"},Z:{emoji:"",color:"#FFB6C1"},J:{emoji:"",color:"#DDA0DD"},L:{emoji:"",color:"#D2691E"}}},crystals:{id:"crystals",name:" Cristais Brilhantes",description:"Gemas preciosas reluzentes",price:1e3,premium:!0,pieces:{I:{emoji:"",color:"#00FFFF"},O:{emoji:"",color:"#FFD700"},T:{emoji:"",color:"#9370DB"},S:{emoji:"",color:"#00FF00"},Z:{emoji:"",color:"#FF0000"},J:{emoji:"",color:"#FFA500"},L:{emoji:"",color:"#FF1493"}}},ocean:{id:"ocean",name:" Mundo Marinho",description:"Criaturas do oceano",price:850,pieces:{I:{emoji:"",color:"#1E90FF"},O:{emoji:"",color:"#00CED1"},T:{emoji:"",color:"#4682B4"},S:{emoji:"",color:"#87CEEB"},Z:{emoji:"",color:"#5F9EA0"},J:{emoji:"",color:"#6495ED"},L:{emoji:"",color:"#FF6347"}}},space:{id:"space",name:" Espao Sideral",description:"Explorao espacial",price:950,pieces:{I:{emoji:"",color:"#4169E1"},O:{emoji:"",color:"#00FFFF"},T:{emoji:"",color:"#32CD32"},S:{emoji:"",color:"#FFD700"},Z:{emoji:"",color:"#FFFF00"},J:{emoji:"",color:"#FF8C00"},L:{emoji:"",color:"#FF4500"}}}};class Wp{constructor(t,n){this.gameRepository=t,this.currencyService=n,this.inventory=this.loadInventory()}loadInventory(){const t=this.gameRepository.load("shopInventory");if(t){const n=Object.values(Wt).filter(s=>s.price===0).map(s=>s.id);let r=!1;for(const s of n)t.ownedThemes.includes(s)||(t.ownedThemes.push(s),r=!0);return r&&this.gameRepository.save("shopInventory",t),t}return{ownedThemes:["cats","classic"],equippedTheme:"cats",purchaseHistory:[]}}save(){this.gameRepository.save("shopInventory",this.inventory)}getAllThemes(){return Object.values(Wt).map(t=>({...t,owned:this.inventory.ownedThemes.includes(t.id),equipped:this.inventory.equippedTheme===t.id}))}getOwnedThemes(){return this.inventory.ownedThemes.map(t=>Wt[t])}getEquippedTheme(){return Wt[this.inventory.equippedTheme]}ownsTheme(t){return this.inventory.ownedThemes.includes(t)}purchaseTheme(t){const n=Wt[t];return n?this.ownsTheme(t)?{success:!1,error:"Already owned"}:this.currencyService.canAfford(n.price)?this.currencyService.spendFish(n.price,`Theme: ${n.name}`)?(this.inventory.ownedThemes.push(t),this.inventory.purchaseHistory.push({themeId:t,purchasedAt:new Date().toISOString(),price:n.price}),this.save(),{success:!0,theme:n}):{success:!1,error:"Purchase failed"}:{success:!1,error:"Insufficient funds"}:{success:!1,error:"Theme not found"}}equipTheme(t){if(!this.ownsTheme(t))return{success:!1,error:"Theme not owned"};this.inventory.equippedTheme=t,this.save();const n=Wt[t];return window.dispatchEvent(new CustomEvent("themeEquipped",{detail:{themeId:t,theme:n}})),{success:!0,theme:n}}getStats(){return{totalThemes:Object.keys(Wt).length,ownedThemes:this.inventory.ownedThemes.length,totalSpent:this.inventory.purchaseHistory.reduce((t,n)=>t+n.price,0),equippedTheme:this.inventory.equippedTheme}}reset(){this.inventory={ownedThemes:["cats"],equippedTheme:"cats",purchaseHistory:[]},this.save()}}const MS=Object.freeze(Object.defineProperty({__proto__:null,PIECE_THEMES:Wt,ShopService:Wp},Symbol.toStringTag,{value:"Module"})),mt={CLASSIC:{id:"classic",name:" Clssico",description:"O Tetris tradicional",icon:"",rules:{gameOver:!0,timeLimit:!1,lineGoal:!1,speedIncrease:!0}},SPRINT:{id:"sprint",name:" Sprint 40",description:"Limpe 40 linhas o mais rpido possvel",icon:"",rules:{gameOver:!1,timeLimit:!1,lineGoal:40,speedIncrease:!1,fixedLevel:1}},ULTRA:{id:"ultra",name:" Ultra 3min",description:"Mximo de pontos em 3 minutos",icon:"",rules:{gameOver:!1,timeLimit:180,lineGoal:!1,speedIncrease:!0}},ZEN:{id:"zen",name:" Zen",description:"Jogue sem presso, sem game over",icon:"",rules:{gameOver:!1,timeLimit:!1,lineGoal:!1,speedIncrease:!1,fixedLevel:1,relaxed:!0}},SURVIVAL:{id:"survival",name:" Sobrevivncia",description:"Comece no nvel 10, quanto tempo aguenta?",icon:"",rules:{gameOver:!0,timeLimit:!1,lineGoal:!1,speedIncrease:!0,startLevel:10}}};class LS{constructor(t){this.gameRepository=t,this.currentMode=mt.CLASSIC,this.modeStats=this.loadModeStats()}loadModeStats(){return this.gameRepository.load("gameModesStats")||this.initializeStats()}initializeStats(){const t={};return Object.keys(mt).forEach(n=>{const r=mt[n];t[r.id]={gamesPlayed:0,bestScore:0,bestTime:r.rules.timeLimit?r.rules.timeLimit:0,bestLines:0,totalGames:0}}),t}save(){this.gameRepository.save("gameModesStats",this.modeStats)}getAllModes(){return Object.values(mt)}getCurrentMode(){return this.currentMode}setMode(t){const n=Object.values(mt).find(r=>r.id===t);return n?(this.currentMode=n,!0):!1}getModeStats(t){return this.modeStats[t]||null}getAllStats(){return{...this.modeStats}}updateStats(t,n){if(!this.modeStats[t])return;const r=this.modeStats[t];r.gamesPlayed+=1,r.totalGames+=1,n.score>r.bestScore&&(r.bestScore=n.score),n.time&&(r.bestTime===0||n.time<r.bestTime)&&(r.bestTime=n.time),n.lines>r.bestLines&&(r.bestLines=n.lines),this.save()}checkGoal(t,n){return t.rules?t.rules.lineGoal?n.score.lines>=t.rules.lineGoal:(t.rules.timeLimit,!1):!1}getRecommendedOrder(){return[mt.CLASSIC,mt.ZEN,mt.SPRINT,mt.ULTRA,mt.SURVIVAL]}reset(){this.modeStats=this.initializeStats(),this.currentMode=mt.CLASSIC,this.save()}}const oh=[{id:"bot1",name:"MeowMaster",score:25e4,level:18,lines:120,country:"BR"},{id:"bot2",name:"NyanCat",score:18e4,level:15,lines:95,country:"US"},{id:"bot3",name:"FelixPro",score:15e4,level:14,lines:85,country:"JP"},{id:"bot4",name:"WhiskerKing",score:12e4,level:12,lines:75,country:"KR"},{id:"bot5",name:"PawsGaming",score:1e5,level:11,lines:68,country:"FR"},{id:"bot6",name:"CatNinja",score:85e3,level:10,lines:60,country:"DE"},{id:"bot7",name:"TigerClaw",score:7e4,level:9,lines:55,country:"BR"},{id:"bot8",name:"LionHeart",score:65e3,level:8,lines:50,country:"UK"},{id:"bot9",name:"CheetahSpeed",score:55e3,level:8,lines:45,country:"ES"},{id:"bot10",name:"PantherShadow",score:5e4,level:7,lines:42,country:"IT"},{id:"bot11",name:"JaguarForce",score:45e3,level:7,lines:40,country:"MX"},{id:"bot12",name:"LynxSwift",score:4e4,level:6,lines:38,country:"CA"},{id:"bot13",name:"OcelotPro",score:35e3,level:6,lines:35,country:"AR"},{id:"bot14",name:"BobcatGamer",score:3e4,level:5,lines:32,country:"AU"},{id:"bot15",name:"CougarRush",score:28e3,level:5,lines:30,country:"NZ"}];class DS{constructor(t,n){this.gameRepository=t,this.playerStatsService=n,this.playerName=this.loadPlayerName(),this.playerId=this.loadPlayerId()}loadPlayerName(){const t=this.gameRepository.load("playerProfile");return(t==null?void 0:t.name)||"Jogador"}loadPlayerId(){let t=this.gameRepository.load("playerProfile");return(!t||!t.id)&&(t={...t,id:`player_${Date.now()}_${Math.random().toString(36).substr(2,9)}`},this.gameRepository.save("playerProfile",t)),t.id}setPlayerName(t){const n=this.gameRepository.load("playerProfile")||{};n.name=t,n.id=this.playerId,this.gameRepository.save("playerProfile",n),this.playerName=t}getPlayerName(){return this.playerName}getGlobalLeaderboard(t=100){const n=this.playerStatsService.getStats(),r={id:this.playerId,name:this.playerName,score:n.highScore,level:n.maxLevel,lines:n.linesCleared,country:"BR",isPlayer:!0},s=[...oh,r];return s.sort((i,o)=>o.score-i.score),s.slice(0,t)}getWeeklyLeaderboard(t=50){return this.getGlobalLeaderboard(t)}getCountryLeaderboard(t="BR",n=50){return this.getGlobalLeaderboard(200).filter(s=>s.country===t).slice(0,n)}getPlayerRank(){const t=this.getGlobalLeaderboard(1e3),n=t.findIndex(r=>r.id===this.playerId);return n===-1?{rank:t.length+1,total:t.length,percentile:0}:{rank:n+1,total:t.length,percentile:Math.floor((t.length-n)/t.length*100)}}getAroundPlayer(t=5){const n=this.getGlobalLeaderboard(1e3),r=n.findIndex(o=>o.id===this.playerId);if(r===-1)return[];const s=Math.max(0,r-t),i=Math.min(n.length,r+t+1);return n.slice(s,i)}submitScore(t){return Promise.resolve({success:!0})}getModeLeaderboard(t,n=50){return this.getGlobalLeaderboard(n)}getFriendsLeaderboard(){return oh.slice(0,5)}getLeaderboardStats(){const t=this.getPlayerRank(),n=this.playerStatsService.getStats();return{playerName:this.playerName,rank:t.rank,total:t.total,percentile:t.percentile,score:n.highScore,level:n.maxLevel,lines:n.linesCleared}}}class RS{constructor(t){this.playerStatsService=t}generateShareText(t){const{score:n,level:r,lines:s,mode:i}=t;return` Cat Tetris${i?` no modo ${i}`:""}!
 Pontuao: ${n.toLocaleString()}
 Nvel: ${r}
 Linhas: ${s}

Consegue me superar? `}generateShareURL(t){const n=window.location.origin+window.location.pathname,r=new URLSearchParams({score:t.score,level:t.level,lines:t.lines});return`${n}?${r.toString()}`}async copyToClipboard(t){try{return await navigator.clipboard.writeText(t),{success:!0}}catch(n){return{success:!1,error:n.message}}}async shareNative(t){if(!navigator.share)return{success:!1,error:"Web Share API not supported"};try{const n=this.generateShareText(t),r=this.generateShareURL(t);return await navigator.share({title:"Minha pontuao no Cat Tetris",text:n,url:r}),{success:!0}}catch(n){return n.name==="AbortError"?{success:!1,error:"Share cancelled"}:{success:!1,error:n.message}}}shareToTwitter(t){const n=this.generateShareText(t),r=this.generateShareURL(t),s=`https://twitter.com/intent/tweet?text=${encodeURIComponent(n)}&url=${encodeURIComponent(r)}`;return window.open(s,"_blank","width=600,height=400"),{success:!0}}shareToFacebook(t){const n=this.generateShareURL(t),r=`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(n)}`;return window.open(r,"_blank","width=600,height=400"),{success:!0}}shareToWhatsApp(t){const n=this.generateShareText(t),r=this.generateShareURL(t),s=`${n}

${r}`,i=`https://wa.me/?text=${encodeURIComponent(s)}`;return window.open(i,"_blank"),{success:!0}}async takeScreenshot(t){return{success:!1,error:"Not implemented"}}getAvailableMethods(){return{native:!!navigator.share,clipboard:!!navigator.clipboard,twitter:!0,facebook:!0,whatsapp:!0}}}class us{constructor(){this.difficulty="medium",this.thinkingTime=100,this.lastDecision=Date.now(),this._actionQueue=[],this._isExpert=!1}setDifficulty(t){switch(this.difficulty=t,this._isExpert=t.startsWith("expert"),t){case"easy":this.thinkingTime=250;break;case"medium":this.thinkingTime=120;break;case"hard":this.thinkingTime=60;break;case"expert":this.thinkingTime=20;break;case"expert-tetris":this.thinkingTime=20;break;default:this.thinkingTime=120}}decideNextMove(t){const n=Date.now();if(this._actionQueue.length>0)return this._isExpert?this._actionQueue.shift():n-this.lastDecision<this.thinkingTime?null:(this.lastDecision=n,this._actionQueue.shift());if(n-this.lastDecision<this.thinkingTime)return null;this.lastDecision=n;const{currentPiece:r,board:s,heldPiece:i,canHold:o,nextPieces:a}=t;if(!r)return null;try{const c=(a==null?void 0:a[0])||null;let u=this._findBestMoveWithLookahead(r,s,c),h=!1;if(this._isExpert&&o){const d=i||c;if(d&&d.type!==r.type){const f=i?c:(a==null?void 0:a[1])||null,v=this._findBestMoveWithLookahead(d,s,f);v&&(!u||v.score>u.score+50)&&(u=v,h=!0)}}if(!u)this._actionQueue=[{action:"drop"}];else{const d=[];h&&d.push({action:"hold"});const f=h?i||(a==null?void 0:a[0]):r;d.push(...this._buildActionSequence(f,u.rotations,u.targetX,h)),this._actionQueue=d}}catch{this._actionQueue=[{action:"drop"}]}return this._actionQueue.length>0?this._actionQueue.shift():{action:"down"}}_findBestMoveWithLookahead(t,n,r){var u;let s=-1/0,i=null;const o=n.length,a=((u=n[0])==null?void 0:u.length)||10,c=this._isExpert&&r;for(let h=0;h<4;h++){const d=this._rotateShape(t.shape,h),f=d[0].length;for(let v=-1;v<=a-f+1;v++){const x=this._findLandingRow(d,n,v,o,a);if(x===null||x<0)continue;const S=this._placeOnBoard(d,n,v,x);if(!S)continue;const{board:b}=this._simulateClear(S);let p=this._evaluate(S,t);if(c){let m=-1/0;for(let g=0;g<4;g++){const w=this._rotateShape(r.shape,g),k=w[0].length;for(let j=-1;j<=a-k+1;j++){const C=this._findLandingRow(w,b,j,o,a);if(C===null||C<0)continue;const P=this._placeOnBoard(w,b,j,C);if(!P)continue;const E=this._evaluate(P,r);E>m&&(m=E)}}if(m>-1/0){const g=this.difficulty==="expert-tetris"?.3:.4;p=p*(1-g)+m*g}}this.difficulty==="easy"?p+=(Math.random()-.5)*1200:this.difficulty==="medium"&&Math.random()<.2&&(p+=(Math.random()-.5)*500),p>s&&(s=p,i={rotations:h,targetX:v,score:s})}}return i}_evaluate(t,n){switch(this.difficulty){case"expert":return this._evalSurvival(t,n);case"expert-tetris":return this._evalTetris(t,n);default:return this._evalDefault(t,n)}}_simulateClear(t){const n=t[0].length,r=[];let s=0;for(const i of t)i.every(o=>o!=null)?s++:r.push([...i]);for(;r.length<t.length;)r.unshift(new Array(n).fill(null));return{board:r,cleared:s}}_evalDefault(t,n){const{board:r,cleared:s}=this._simulateClear(t);let i=0;return i+=s*800,i-=this._getHeight(r)*45,i-=this._countHoles(r)*400,i-=this._getBumpiness(r)*35,i-=this._getRowTransitions(r)*15,i-=this._getColTransitions(r)*10,this.difficulty==="hard"&&(i+=s>=2?s*400:0,i-=this._countHoles(r)*200,i-=this._getCoveredHoles(r)*100,i-=this._getHeight(r)*30,this._countHoles(r)===0&&(i+=300),this._getHeight(r)<=6&&(i+=200)),i}_evalSurvival(t){const{board:n,cleared:r}=this._simulateClear(t),s=this._getHeight(n),i=this._countHoles(n),o=this._getBumpiness(n),a=this._getCoveredHoles(n);let c=0;return c+=r*3e3,r>=2&&(c+=r*r*600),r===4&&(c+=12e3),c-=s*200,c-=i*2500,c-=a*600,c-=o*180,c-=this._getRowTransitions(n)*45,c-=this._getColTransitions(n)*35,c-=this._getWellDepths(n)*100,s<=3?c+=2500:s<=5?c+=1200:s<=8&&(c+=500),i===0&&(c+=2500),o<=2?c+=1e3:o<=4&&(c+=400),s>12&&(c-=(s-12)*1e3),s>15&&(c-=(s-15)*2500),s>18&&(c-=25e3),c}_evalCombo(t,n){const{board:r,cleared:s}=this._simulateClear(t),i=r[0].length,o=this._getHeight(r),a=this._countHoles(r),c=this._getBumpiness(r),u=this._getCoveredHoles(r);let h=0;s===1?h+=6e3:s===2?h+=3500:s===3?h+=2500:s===4&&(h+=2e3);let d=0,f=0,v=0;const x={};for(let b=r.length-1;b>=0;b--){let p=0,m=-1;for(let g=0;g<i;g++)r[b][g]!=null?p++:m=g;p===i-1?(d++,f++,v=Math.max(v,f),m>=0&&(x[m]=(x[m]||0)+1)):p>=i-2?(d+=.5,f++,v=Math.max(v,f)):f=0}h+=d*2500,h+=v*v*600;let S=0;for(const b in x)x[b]>S&&(S=x[b]);return S>=2&&(h+=S*S*500),h-=a*2500,h-=u*700,h-=o*100,h-=c*120,h-=this._getRowTransitions(r)*35,h-=this._getColTransitions(r)*25,a===0&&(h+=1500),o<=6&&(h+=600),o>12&&(h-=(o-12)*800),o>15&&(h-=(o-15)*2e3),o>18&&(h-=25e3),h}_evalTetris(t,n){const{board:r,cleared:s}=this._simulateClear(t),i=r[0].length,o=r.length,a=this._getColumnHeights(r);this._getHeight(r);const c=this._countHoles(r),u=this._getCoveredHoles(r);let h=0;const d=i-1;s===4?h+=2e5:s>0&&(h-=s*15e3);let f=0;for(let w=0;w<o;w++)r[w][d]!=null&&f++;h-=f*6e3;const v=[];for(let w=0;w<i;w++)w!==d&&v.push(a[w]);const x=v.reduce((w,k)=>w+k,0)/v.length,S=x-a[d];h+=Math.max(0,S)*600,S>=4?h+=25e3:S>=3?h+=12e3:S>=2?h+=5e3:S>=1&&(h+=1e3);let b=0;for(let w=0;w<v.length-1;w++)b+=Math.abs(v[w]-v[w+1]);h-=b*500;const p=v.reduce((w,k)=>w+(k-x)**2,0)/v.length;h-=p*150,b===0?h+=6e3:b<=1?h+=2500:b<=2&&(h+=800);const m=this._countNearFullLinesExcluding(r,d);h+=m*5e3,m>=4?h+=2e4:m>=3?h+=8e3:m>=2&&(h+=3e3);for(let w=0;w<i;w++){if(w===d)continue;const k=a[w],j=w>0?a[w-1]:o,C=w<i-1?a[w+1]:o,P=Math.min(j,C)-k;P>1&&(h-=P*2e3)}n.type==="I"&&(s===4?h+=5e4:S<4&&(h-=2e4)),h-=c*5e3,h-=u*2e3,h-=this._getRowTransitions(r)*40,h-=this._getColTransitions(r)*30;const g=Math.max(...v);return g>14&&(h-=(g-14)*3e3),g>16&&(h-=(g-16)*6e3),g>18&&(h-=4e4),c===0&&(h+=4e3),x<=6&&(h+=1500),h}_countLines(t){let n=0;for(const r of t)r.every(s=>s!=null)&&n++;return n}_getHeight(t){for(let n=0;n<t.length;n++)if(t[n].some(r=>r!=null))return t.length-n;return 0}_countHoles(t){let n=0;const r=t[0].length;for(let s=0;s<r;s++){let i=!1;for(let o=0;o<t.length;o++)t[o][s]!=null?i=!0:i&&n++}return n}_getBumpiness(t){const n=this._getColumnHeights(t);let r=0;for(let s=0;s<n.length-1;s++)r+=Math.abs(n[s]-n[s+1]);return r}_getBumpinessExcluding(t,n){const r=this._getColumnHeights(t);let s=0;for(let i=0;i<r.length-1;i++)i===n||i+1===n||(s+=Math.abs(r[i]-r[i+1]));return s}_getColumnHeights(t){const n=t[0].length,r=[];for(let s=0;s<n;s++){let i=!1;for(let o=0;o<t.length;o++)if(t[o][s]!=null){r.push(t.length-o),i=!0;break}i||r.push(0)}return r}_getFlatness(t){const n=this._getColumnHeights(t),r=n.reduce((i,o)=>i+o,0)/n.length,s=n.reduce((i,o)=>i+(o-r)**2,0)/n.length;return Math.max(0,100-s)}_getWellDepths(t){const n=this._getColumnHeights(t);let r=0;for(let s=0;s<n.length;s++){const i=s>0?n[s-1]:20,o=s<n.length-1?n[s+1]:20,a=Math.min(i,o)-n[s];a>0&&(r+=a)}return r}_getRowTransitions(t){let n=0;const r=t[0].length;for(let s=0;s<t.length;s++){for(let i=0;i<r-1;i++){const o=t[s][i]!=null,a=t[s][i+1]!=null;o!==a&&n++}t[s][0]==null&&n++,t[s][r-1]==null&&n++}return n}_getColTransitions(t){let n=0;const r=t[0].length;for(let s=0;s<r;s++){for(let i=0;i<t.length-1;i++){const o=t[i][s]!=null,a=t[i+1][s]!=null;o!==a&&n++}t[t.length-1][s]==null&&n++}return n}_getCoveredHoles(t){let n=0;const r=t[0].length;for(let s=0;s<r;s++){let i=0;for(let o=0;o<t.length;o++)t[o][s]!=null?i++:i>0&&(n+=i)}return n}_countNearCompleteLines(t){let n=0;for(const r of t){const s=r.filter(i=>i!=null).length;s>=r.length-1&&s<r.length&&n++}return n}_countNearFullLinesExcluding(t,n){let r=0;for(const s of t){let i=0,o=-1;for(let a=0;a<s.length;a++)s[a]==null&&(i++,o=a);i===1&&o===n&&r++}return r}_buildActionSequence(t,n,r,s){var h;const i=[],o=n%4;for(let d=0;d<o;d++)i.push({action:"rotate"});const a=s?3:((h=t.position)==null?void 0:h.x)??3,c=r-a,u=c>0?"right":"left";for(let d=0;d<Math.abs(c);d++)i.push({action:u});return i.push({action:"drop"}),i}_rotateShape(t,n){let r=t;for(let s=0;s<n%4;s++)r=r[0].map((i,o)=>r.map(a=>a[o]).reverse());return r}_findLandingRow(t,n,r,s,i){for(let o=-t.length;o<s;o++)if(this._collides(t,n,r,o+1,s,i))return o;return s-t.length}_collides(t,n,r,s,i,o){for(let a=0;a<t.length;a++)for(let c=0;c<t[0].length;c++){if(!t[a][c])continue;const u=r+c,h=s+a;if(u<0||u>=o||h>=i||h>=0&&n[h][u]!=null)return!0}return!1}_placeOnBoard(t,n,r,s){const i=n.length,o=n[0].length,a=n.map(c=>[...c]);for(let c=0;c<t.length;c++)for(let u=0;u<t[0].length;u++){if(!t[c][u])continue;const h=r+u,d=s+c;if(h<0||h>=o||d<0||d>=i||a[d][h]!=null)return null;a[d][h]=1}return a}getDifficulties(){return[{id:"easy",name:"Fcil",emoji:"",description:"IA iniciante"},{id:"medium",name:"Mdio",emoji:"",description:"IA intermediria"},{id:"hard",name:"Difcil",emoji:"",description:"IA avanada"},{id:"expert",name:"Expert",emoji:"",description:"Mantm o board o mais baixo possvel"},{id:"expert-tetris",name:"Expert Tetris",emoji:"",description:"Constri para limpar 4 linhas de vez"}]}}class IS{constructor(t){this.gameRepository=t,this.currentMode=null,this.players=[],this.matchState=null}startLocalMatch(t="Jogador 1",n="Jogador 2"){return this.currentMode="1v1-local",this.players=[{id:"p1",name:t,score:0,level:1,lines:0,gameState:null,alive:!0},{id:"p2",name:n,score:0,level:1,lines:0,gameState:null,alive:!0}],this.matchState={startTime:Date.now(),status:"playing",winner:null},{mode:this.currentMode,players:this.players,matchId:`local_${Date.now()}`}}startAIMatch(t="Jogador",n="medium"){return this.currentMode="vs-ai",this.players=[{id:"p1",name:t,score:0,level:1,lines:0,gameState:null,alive:!0,isHuman:!0},{id:"ai",name:this.getAIName(n),score:0,level:1,lines:0,gameState:null,alive:!0,isAI:!0,difficulty:n}],this.matchState={startTime:Date.now(),status:"playing",winner:null,aiDifficulty:n},{mode:"vsAI",aiDifficulty:n,players:this.players,matchId:`ai_${Date.now()}`}}updatePlayerState(t,n){var s,i;const r=this.players.find(o=>o.id===t);r&&(r.gameState=n,r.score=((s=n.score)==null?void 0:s.points)||0,r.level=((i=n.score)==null?void 0:i.level)||1,r.lines=n.linesCleared||0,r.alive=!n.gameOver,this.checkWinCondition())}checkWinCondition(){const t=this.players.filter(n=>n.alive);return t.length===1?(this.matchState.status="finished",this.matchState.winner=t[0],this.matchState.endTime=Date.now(),this.matchState.duration=this.matchState.endTime-this.matchState.startTime,this.saveMatchResult(),{hasWinner:!0,winner:this.matchState.winner}):{hasWinner:!1}}saveMatchResult(){const t=this.gameRepository.load("multiplayerStats")||{localMatches:0,aiMatches:0,wins:0,losses:0,draws:0,totalTime:0};this.currentMode==="1v1-local"?t.localMatches++:this.currentMode==="vs-ai"&&(t.aiMatches++,this.matchState.winner.isHuman?t.wins++:this.matchState.winner.isAI&&t.losses++),t.totalTime+=this.matchState.duration,this.gameRepository.save("multiplayerStats",t)}getStats(){const t=this.gameRepository.load("multiplayerStats")||{localMatches:0,aiMatches:0,wins:0,losses:0,draws:0,totalTime:0};return{...t,winRate:t.aiMatches>0?(t.wins/t.aiMatches*100).toFixed(1):0,avgMatchTime:t.localMatches+t.aiMatches>0?Math.floor(t.totalTime/(t.localMatches+t.aiMatches)/1e3):0}}getMatchState(){return{...this.matchState,players:this.players,mode:this.currentMode}}endMatch(){const t={mode:this.currentMode,players:this.players,winner:this.matchState.winner,duration:Date.now()-this.matchState.startTime};return this.currentMode=null,this.players=[],this.matchState=null,t}startAIvsAIMatch(t="expert",n="expert-tetris"){return this.currentMode="ai-vs-ai",this.players=[{id:"ai1",name:this.getAIName(t),score:0,level:1,lines:0,gameState:null,alive:!0,isAI:!0,difficulty:t},{id:"ai2",name:this.getAIName(n),score:0,level:1,lines:0,gameState:null,alive:!0,isAI:!0,difficulty:n}],this.matchState={startTime:Date.now(),status:"playing",winner:null,ai1Difficulty:t,ai2Difficulty:n},{mode:"aiVsAI",ai1Difficulty:t,ai2Difficulty:n,players:this.players,matchId:`aivai_${Date.now()}`}}getAIName(t){return{easy:" MeowBot Iniciante",medium:" CatAI Intermedirio",hard:" FelineBot Avanado",expert:" NyanMaster Survival","expert-tetris":" TetrisNyan Expert"}[t]||"IA"}getAvailableModes(){return[{id:"vs-ai",name:"vs IA",emoji:"",description:"Enfrente o bot",players:1,type:"ai",difficulties:["easy","medium","hard","expert"]},{id:"ai-vs-ai",name:"IA vs IA",emoji:"",description:"Assista duas IAs se enfrentando (debug)",players:0,type:"debug"}]}}const bt={FUNDAMENTALS:"fundamentals",INTERMEDIATE:"intermediate",ADVANCED:"advanced",PRO:"pro"};class OS{constructor(t){this.gameRepository=t,this.lessons=this._buildLessons(),this.progress=this._loadProgress()}_buildLessons(){return[{id:1,module:bt.FUNDAMENTALS,title:"Movimentao",description:"Mover, rotacionar e dropar peas",difficulty:"beginner",estimatedTime:"2 min",intro:["   Setas movem a pea para os lados","  Seta para cima rotaciona a pea","  Seta para baixo = soft drop (desce rpido)","  Espao = hard drop (cai instantaneamente)","A sombra mostra onde a pea vai pousar"],practice:{objective:"Limpe 3 linhas usando os controles",validate:t=>{const n=t.linesCleared||0;return{complete:n>=3,progress:Math.min(1,n/3),feedback:n>=3?" timo! Voc dominou os controles!":`${n}/3 linhas`}}},rewards:{fishCoins:100,xp:50,badge:"first_move",unlocks:[2]}},{id:2,module:bt.FUNDAMENTALS,title:"Hold Piece",description:"Segure uma pea para usar depois",difficulty:"beginner",estimatedTime:"2 min",intro:["Aperte C ou Shift para guardar a pea atual","A pea guardada aparece no canto esquerdo","Voc pode trocar 1 vez por turno","Dica: guarde peas valiosas como I e T","Isso ajuda quando a pea atual no encaixa bem"],practice:{objective:"Use o hold e limpe 3 linhas",validate:t=>{const n=t.hasUsedHold,r=t.linesCleared||0;return n?{complete:r>=3,progress:Math.min(1,r/3),feedback:r>=3?" Hold dominado!":` Hold usado! ${r}/3 linhas`}:{complete:!1,progress:0,feedback:"Aperte C para segurar a pea!"}}},rewards:{fishCoins:100,xp:50,badge:"hold_learner",unlocks:[3]}},{id:3,module:bt.FUNDAMENTALS,title:"Planejamento",description:"Use o painel Next para planejar jogadas",difficulty:"beginner",estimatedTime:"3 min",intro:["O painel NEXT mostra as prximas peas","Olhe as prximas 2-3 peas antes de agir","Se vem uma pea I, deixe espao vertical","Pensar  frente = menos buracos = mais linhas","Tente limpar muitas linhas sem criar buracos!"],practice:{objective:"Limpe 8 linhas (planeje bem!)",validate:t=>{const n=t.linesCleared||0;return{complete:n>=8,progress:Math.min(1,n/8),feedback:n>=8?" Excelente planejamento!":`${n}/8 linhas`}}},rewards:{fishCoins:150,xp:75,badge:"planner",unlocks:[4]}},{id:4,module:bt.INTERMEDIATE,title:"Combos",description:"Limpe linhas consecutivas para bnus",difficulty:"intermediate",estimatedTime:"4 min",intro:["Combo = limpar linhas em peas consecutivas","Cada combo seguido d +50 pontos de bnus","Combo 5x = +250 pontos extras!","Dica: empilhe baixo e limpe 1 linha por vez","Foque em manter o ritmo, sem pausas"],practice:{objective:"Consiga um combo de 3 ou mais",validate:t=>{const n=t.currentCombo||0,r=t.maxCombo||n,s=Math.max(n,r);return{complete:s>=3,progress:Math.min(1,s/3),feedback:s>=3?" Combo master!":`Melhor combo: ${s}x (precisa 3)`}}},rewards:{fishCoins:200,xp:100,badge:"combo_starter",unlocks:[5]}},{id:5,module:bt.INTERMEDIATE,title:"Tetris (4 linhas)",description:"Limpe 4 linhas de uma vez para 800pts",difficulty:"intermediate",estimatedTime:"5 min",intro:["Tetris = limpar 4 linhas ao mesmo tempo","Vale 800 pontos  o clear mais valioso!","Deixe uma coluna vazia (geralmente a da direita)","Preencha as outras 9 colunas em 4 linhas","Use a pea I (barra) para completar o Tetris"],practice:{objective:"Alcance 2.000 pontos",validate:t=>{const n=t.score||0;return{complete:n>=2e3,progress:Math.min(1,n/2e3),feedback:n>=2e3?" Pontuao alta!":`${n.toLocaleString()}/2.000 pts`}}},rewards:{fishCoins:250,xp:125,badge:"tetris_scorer",unlocks:[6]}},{id:6,module:bt.ADVANCED,title:"T-Spin",description:"Rotacione o T no ltimo momento para bnus",difficulty:"advanced",estimatedTime:"6 min",intro:["T-Spin = rotacionar a pea T em espao apertado","Vale pontos extras e ativa back-to-back!",'Crie um buraco em forma de "T" na pilha',"Deslize a pea T para dentro e rotacione"," difcil, mas d muitos pontos!"],practice:{objective:"Faa pelo menos 1 T-Spin e 4.000 pontos",validate:t=>{const n=t.tSpins||0,r=t.score||0;return n===0?{complete:!1,progress:Math.min(.5,r/8e3),feedback:"Tente rotacionar o T em espao apertado!"}:{complete:r>=4e3,progress:Math.min(1,r/4e3),feedback:r>=4e3?` T-Spin pro! (${n} T-Spins)`:` T-Spin! ${r.toLocaleString()}/4.000 pts`}}},rewards:{fishCoins:400,xp:250,badge:"tspin_learner",unlocks:[7]}},{id:7,module:bt.ADVANCED,title:"Back-to-Back",description:"Tetris ou T-Spin seguidos do 50% bnus",difficulty:"advanced",estimatedTime:"6 min",intro:["Back-to-Back = dois clears difceis seguidos","Conta como: Tetris (4 linhas) ou T-Spin","Cada B2B seguido d +50% de pontos!","Limpar 1-3 linhas normais quebra a cadeia","Combine T-Spins e Tetris para pontuao mxima"],practice:{objective:"Alcance 6.000 pontos com back-to-back",validate:t=>{const n=t.score||0,r=t.backToBackActive;return{complete:n>=6e3,progress:Math.min(1,n/6e3),feedback:n>=6e3?" Back-to-back dominado!":r?` B2B ativo! ${n.toLocaleString()}/6.000 pts`:`${n.toLocaleString()}/6.000 pts`}}},rewards:{fishCoins:500,xp:300,badge:"b2b_learner",unlocks:[8]}},{id:8,module:bt.PRO,title:"Desafio Final",description:"Prove que domina o Tetris!",difficulty:"pro",estimatedTime:"10 min",intro:["Use TUDO que aprendeu at aqui","Movimentao, hold, combos, T-Spins, B2B...","O objetivo  alcanar uma pontuao alta","No tenha pressa  planeje cada jogada","Boa sorte, mestre! "],practice:{objective:"Alcance 15.000 pontos",validate:t=>{const n=t.score||0;return{complete:n>=15e3,progress:Math.min(1,n/15e3),feedback:n>=15e3?" MESTRE DO TETRIS!":`${n.toLocaleString()}/15.000 pts`}}},rewards:{fishCoins:1e3,xp:500,badge:"tetris_master",unlocks:[]}}]}_loadProgress(){var n,r;return((r=(n=this.gameRepository)==null?void 0:n.load)==null?void 0:r.call(n,"tutorialProgress"))||{completedLessons:[],unlockedLessons:[1],badges:[],totalXP:0,currentModule:bt.FUNDAMENTALS}}_saveProgress(){var t,n;(n=(t=this.gameRepository)==null?void 0:t.save)==null||n.call(t,"tutorialProgress",this.progress)}getProgress(){return this.progress}getLessonById(t){return this.lessons.find(n=>n.id===t)}getAvailableLessons(){return this.lessons.filter(t=>this.progress.unlockedLessons.includes(t.id))}completeLesson(t,n){var s;const r=this.getLessonById(t);return r?(this.progress.completedLessons.includes(t)||this.progress.completedLessons.push(t),(r.rewards.unlocks||[]).forEach(i=>{this.progress.unlockedLessons.includes(i)||this.progress.unlockedLessons.push(i)}),r.rewards.badge&&!this.progress.badges.includes(r.rewards.badge)&&this.progress.badges.push(r.rewards.badge),this.progress.totalXP+=r.rewards.xp||0,this._saveProgress(),{completed:!0,lessonId:t,lessonTitle:r.title,rewards:r.rewards,nextLesson:((s=r.rewards.unlocks)==null?void 0:s[0])||null,performance:n}):null}resetProgress(){this.progress={completedLessons:[],unlockedLessons:[1],badges:[],totalXP:0,currentModule:bt.FUNDAMENTALS},this._saveProgress()}}function FS(e=new cS){return e.registerSingleton("gameRepository",()=>new fS),e.registerSingleton("settingsService",()=>new kS),e.registerSingleton("statisticsService",()=>new CS),e.registerSingleton("scoringService",()=>new Vn),e.registerSingleton("pieceFactory",()=>new Nr),e.registerSingleton("movementStrategyFactory",()=>new _r),e.registerSingleton("keyboardInputService",()=>new TS),e.registerSingleton("playerStatsService",t=>new AS(t),["gameRepository"]),e.registerSingleton("currencyService",t=>new ES(t),["gameRepository"]),e.registerSingleton("missionsService",(t,n)=>new NS(t,n),["gameRepository","currencyService"]),e.registerSingleton("achievementsService",(t,n,r)=>new _S(t,n,r),["gameRepository","currencyService","playerStatsService"]),e.registerSingleton("shopService",(t,n)=>new Wp(t,n),["gameRepository","currencyService"]),e.registerSingleton("gameModesService",t=>new LS(t),["gameRepository"]),e.registerSingleton("leaderboardService",(t,n)=>new DS(t,n),["gameRepository","playerStatsService"]),e.registerSingleton("shareService",t=>new RS(t),["playerStatsService"]),e.registerSingleton("aiOpponentService",()=>new us),e.registerSingleton("multiplayerService",t=>new IS(t),["gameRepository"]),e.registerSingleton("tutorialService",t=>new OS(t),["gameRepository"]),e.registerSingleton("gameService",(t,n,r,s)=>new Er(t,n,r,s),["pieceFactory","movementStrategyFactory","gameRepository","scoringService"]),e}const F=FS();function Kp(){const[e,t]=y.useState(null),[n,r]=y.useState(!0);y.useEffect(()=>{try{const a=F.resolve("currencyService");t(a.getCurrency()),r(!1);const c=()=>{t(a.getCurrency())};return window.addEventListener("currencyUpdated",c),()=>{window.removeEventListener("currencyUpdated",c)}}catch{r(!1)}},[]);const s=y.useCallback((a,c)=>{try{const u=F.resolve("currencyService"),h=u.addFish(a,c);return h&&(t(u.getCurrency()),window.dispatchEvent(new Event("currencyUpdated"))),h}catch{return!1}},[]),i=y.useCallback((a,c)=>{try{const u=F.resolve("currencyService"),h=u.spendFish(a,c);return h&&(t(u.getCurrency()),window.dispatchEvent(new Event("currencyUpdated"))),h}catch{return!1}},[]),o=y.useCallback(a=>{try{return F.resolve("currencyService").canAfford(a)}catch{return!1}},[]);return{currency:e,loading:n,addFish:s,spendFish:i,canAfford:o}}function VS({className:e=""}){const{currency:t,loading:n}=Kp();return n||!t?l.jsxs("div",{className:`flex items-center gap-2 ${e}`,children:[l.jsx("div",{className:"text-2xl",children:""}),l.jsx("div",{className:"text-white/60",children:"..."})]}):l.jsxs(T.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:`flex items-center gap-2 bg-black/30 px-4 py-2 rounded-lg backdrop-blur-sm ${e}`,children:[l.jsx("span",{className:"text-2xl",children:""}),l.jsx(T.span,{initial:{scale:1.2,color:"#fbbf24"},animate:{scale:1,color:"#ffffff"},transition:{duration:.3},className:"text-xl font-bold",children:t.fish.toLocaleString()},t.fish)]})}function BS({onStartGame:e,onNewGame:t,onShowSettings:n,onShowShop:r,onShowMissions:s,onShowAchievements:i,onShowMultiplayer:o,onShowTutorial:a,onShowTutorialHub:c,onShowAIShowcase:u,onShowInstallPrompt:h,canInstallPWA:d,hasActiveGame:f,gameState:v}){var g,w;const[x,S]=y.useState(!0),b=lS(),p=y.useCallback(k=>{var j;x&&((j=b.playMenuSelect)==null||j.call(b)),k==null||k()},[x,b]);y.useEffect(()=>{const k=j=>{j.key==="Enter"&&(j.preventDefault(),p(e))};return window.addEventListener("keydown",k),()=>window.removeEventListener("keydown",k)},[p,e]);const m=(k=0)=>({initial:{opacity:0,y:16},animate:{opacity:1,y:0},transition:{duration:.35,delay:k,ease:"easeOut"}});return l.jsxs("div",{className:"h-screen bg-gradient-to-b from-slate-900 via-purple-950 to-slate-900 flex flex-col items-center justify-center p-4 relative overflow-hidden",children:[l.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[l.jsx("div",{className:"absolute top-1/4 -left-32 w-64 h-64 bg-purple-600/10 rounded-full blur-3xl"}),l.jsx("div",{className:"absolute bottom-1/4 -right-32 w-64 h-64 bg-blue-600/10 rounded-full blur-3xl"})]}),l.jsx("div",{className:"fixed top-3 right-3 z-50",children:l.jsx(VS,{})}),l.jsxs("div",{className:"w-full max-w-sm relative z-10 flex flex-col items-center",children:[l.jsxs(T.div,{...m(0),className:"text-center mb-4",children:[l.jsx("h1",{className:"text-4xl font-extrabold text-white tracking-tight drop-shadow-lg select-none",children:" Cat Tetris"}),l.jsx("p",{className:"text-white/50 text-xs mt-1",children:"Empilhe blocos com seus amigos felinos"})]}),l.jsx(T.div,{...m(.1),className:"w-full space-y-2 mb-4",children:f?l.jsxs(l.Fragment,{children:[l.jsxs("button",{onClick:()=>p(e),className:"w-full py-4 rounded-xl bg-emerald-500 hover:bg-emerald-400 active:scale-[0.98] text-white font-bold text-lg shadow-lg shadow-emerald-500/20 transition-all duration-150",children:[" Continuar",l.jsxs("span",{className:"block text-emerald-100/70 text-xs font-normal mt-0.5",children:["Nvel ",((g=v==null?void 0:v.score)==null?void 0:g.level)||1,"  ",(((w=v==null?void 0:v.score)==null?void 0:w.points)||0).toLocaleString()," pts"]})]}),l.jsx("button",{onClick:()=>p(t),className:"w-full py-3 rounded-xl bg-white/10 hover:bg-white/15 active:scale-[0.98] text-white font-semibold text-base border border-white/10 transition-all duration-150",children:"Novo Jogo"})]}):l.jsx("button",{onClick:()=>p(e),className:"w-full py-5 rounded-xl bg-gradient-to-r from-emerald-500 to-green-500 hover:from-emerald-400 hover:to-green-400 active:scale-[0.98] text-white font-bold text-xl shadow-lg shadow-emerald-500/25 transition-all duration-150",children:" Jogar"})}),l.jsxs(T.div,{...m(.18),className:"w-full grid grid-cols-3 gap-2 mb-4",children:[l.jsx(ya,{icon:"",label:"VS IA",sub:"Desafie o bot",onClick:()=>p(o)}),l.jsx(ya,{icon:"",label:"Tutorial",sub:"Aprenda a jogar",onClick:()=>p(c)}),l.jsx(ya,{icon:"",label:"IA Expert",sub:"Assista a IA jogar",onClick:()=>p(u)})]}),l.jsxs(T.div,{...m(.25),className:"w-full grid grid-cols-4 gap-1 mb-4",children:[l.jsx(ci,{icon:"",label:"Loja",onClick:()=>p(r)}),l.jsx(ci,{icon:"",label:"Misses",onClick:()=>p(s)}),l.jsx(ci,{icon:"",label:"Conquistas",onClick:()=>p(i)}),l.jsx(ci,{icon:"",label:"Config",onClick:()=>p(n)})]}),l.jsxs(T.div,{...m(.3),className:"flex items-center gap-3 text-xs text-white/25",children:[l.jsx("button",{onClick:()=>S(!x),className:"hover:text-white/50 transition-colors",children:x?"":""}),d&&l.jsx("button",{onClick:()=>p(h),className:"hover:text-white/50 transition-colors",children:" Instalar"}),l.jsx("span",{className:"select-none",children:"v1.0"})]})]})]})}function ya({icon:e,label:t,sub:n,onClick:r}){return l.jsxs("button",{onClick:r,className:"flex flex-col items-center text-center p-3 rounded-xl bg-white/[0.06] hover:bg-white/[0.1] border border-white/[0.06] hover:border-white/[0.12] active:scale-[0.97] transition-all duration-150",children:[l.jsx("span",{className:"text-2xl mb-1",children:e}),l.jsx("span",{className:"text-white font-semibold text-sm leading-tight",children:t}),l.jsx("span",{className:"text-white/40 text-[10px] mt-0.5 leading-tight",children:n})]})}function ci({icon:e,label:t,onClick:n}){return l.jsxs("button",{onClick:n,className:"flex flex-col items-center gap-1 px-2 py-2 rounded-lg hover:bg-white/[0.07] active:scale-95 transition-all duration-150",children:[l.jsx("span",{className:"text-lg",children:e}),l.jsx("span",{className:"text-white/40 text-[10px] leading-none",children:t})]})}function zS({onClose:e}){const[t,n]=y.useState(null),[r,s]=y.useState(!0),[i,o]=y.useState(!1);y.useEffect(()=>{const u=d=>{d.preventDefault(),n(d)},h=()=>{o(!0),s(!1),n(null),localStorage.setItem("cat-tetris-installed","true"),e&&e()};return window.addEventListener("beforeinstallprompt",u),window.addEventListener("appinstalled",h),window.matchMedia("(display-mode: standalone)").matches&&(o(!0),e&&e()),()=>{window.removeEventListener("beforeinstallprompt",u),window.removeEventListener("appinstalled",h)}},[e]);const a=async()=>{if(!t)return;t.prompt();const{outcome:u}=await t.userChoice;u==="accepted"&&(s(!1),e&&e()),localStorage.setItem("cat-tetris-install-prompt-seen","true"),n(null)},c=()=>{s(!1),localStorage.setItem("cat-tetris-install-prompt-seen","true"),e&&e()};return i?null:t?l.jsx(me,{children:r&&l.jsx(T.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:l.jsx(T.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},className:"bg-gradient-to-br from-purple-900 to-blue-900 rounded-2xl p-6 max-w-md w-full shadow-2xl border-2 border-purple-500/30",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-6xl mb-4",children:""}),l.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Instalar Cat Tetris"}),l.jsx("p",{className:"text-purple-200 mb-6",children:"Instale o Cat Tetris na sua tela inicial para jogar offline a qualquer momento! Funciona como um app nativo."}),l.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-6 text-sm",children:[l.jsxs("div",{className:"bg-white/10 rounded-lg p-3",children:[l.jsx("div",{className:"text-green-400 mb-1",children:" Acesso Rpido"}),l.jsx("div",{className:"text-purple-200",children:"cone na tela inicial"})]}),l.jsxs("div",{className:"bg-white/10 rounded-lg p-3",children:[l.jsx("div",{className:"text-green-400 mb-1",children:" Offline"}),l.jsx("div",{className:"text-purple-200",children:"Jogue sem internet"})]}),l.jsxs("div",{className:"bg-white/10 rounded-lg p-3",children:[l.jsx("div",{className:"text-green-400 mb-1",children:" Performance"}),l.jsx("div",{className:"text-purple-200",children:"Carregamento instantneo"})]}),l.jsxs("div",{className:"bg-white/10 rounded-lg p-3",children:[l.jsx("div",{className:"text-green-400 mb-1",children:" Experincia"}),l.jsx("div",{className:"text-purple-200",children:"Como app nativo"})]})]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx(T.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:c,className:"flex-1 bg-gray-600 hover:bg-gray-700 text-white py-3 px-4 rounded-xl font-semibold transition-colors",children:"Agora no"}),l.jsx(T.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:a,className:"flex-1 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white py-3 px-4 rounded-xl font-semibold transition-all shadow-lg",children:" Instalar"})]})]})})})}):l.jsx(T.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:l.jsx(T.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},className:"bg-gradient-to-br from-purple-900 to-blue-900 rounded-2xl p-6 max-w-md w-full shadow-2xl border-2 border-purple-500/30",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-6xl mb-4",children:""}),l.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"PWA no disponvel"}),l.jsx("p",{className:"text-purple-200 mb-6",children:"Este dispositivo no suporta instalao de PWA ou o app j est instalado."}),l.jsx(T.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:c,className:"w-full bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white py-3 px-4 rounded-xl font-semibold transition-all shadow-lg",children:" Entendi"})]})})})}function qp(){const[e,t]=y.useState([]),[n,r]=y.useState(!0);y.useEffect(()=>{try{const o=F.resolve("missionsService");t(o.getMissions()),r(!1);const a=()=>{t(o.getMissions())},c=({linesCleared:v})=>{o.incrementProgress(oe.CLEAR_LINES,v),v===4&&o.incrementProgress(oe.TETRIS_CLEAR,1),a()},u=()=>{o.incrementProgress(oe.T_SPINS,1),a()},h=()=>{o.incrementProgress(oe.PLACE_PIECES,1),a()},d=({score:v,level:x,combo:S})=>{v&&o.updateProgress(oe.SCORE_POINTS,v),x&&o.updateProgress(oe.REACH_LEVEL,x),S&&o.updateProgress(oe.COMBOS,S),a()},f=()=>{o.incrementProgress(oe.BACK_TO_BACK,1),a()};return L.on(I.LINE_CLEARED,c),L.on(I.T_SPIN,u),L.on(I.PIECE_PLACED,h),L.on(I.SCORE_UPDATED,d),L.on(I.BACK_TO_BACK,f),()=>{L.off(I.LINE_CLEARED,c),L.off(I.T_SPIN,u),L.off(I.PIECE_PLACED,h),L.off(I.SCORE_UPDATED,d),L.off(I.BACK_TO_BACK,f)}}catch{r(!1)}},[]),y.useEffect(()=>{if(n)return;const o=setInterval(()=>{try{const a=F.resolve("missionsService"),u=F.resolve("statisticsService").getStats();u.playTime>0&&(a.updateProgress(oe.SURVIVE_TIME,u.playTime),t(a.getMissions()))}catch{}},1e3);return()=>clearInterval(o)},[n]);const s=y.useCallback(o=>{try{const a=F.resolve("missionsService"),c=a.claimReward(o);return c.success&&(t(a.getMissions()),window.dispatchEvent(new Event("currencyUpdated"))),c}catch(a){return{success:!1,error:a.message}}},[]),i=y.useCallback(()=>{try{return F.resolve("missionsService").getStats()}catch{return null}},[]);return{missions:e,loading:n,claimReward:s,getMissionsStats:i}}function Qp({trigger:e,duration:t=3e3,message:n}){const[r,s]=y.useState(!1),[i,o]=y.useState([]);return y.useEffect(()=>{if(e){s(!0);const a=[];for(let c=0;c<50;c++)a.push({id:c,x:Math.random()*100,y:-10,rotation:Math.random()*360,color:["#FFD700","#FF6B6B","#4ECDC4","#45B7D1","#FFA07A","#98D8C8"][Math.floor(Math.random()*6)],size:Math.random()*10+5,delay:Math.random()*.5});o(a),setTimeout(()=>{s(!1),o([])},t)}},[e,t]),r?l.jsxs("div",{className:"fixed inset-0 pointer-events-none z-[9999] overflow-hidden",children:[i.map(a=>l.jsx(T.div,{initial:{x:`${a.x}vw`,y:a.y,rotate:a.rotation,opacity:1},animate:{y:"110vh",rotate:a.rotation+720,opacity:0},transition:{duration:2+Math.random(),delay:a.delay,ease:"easeIn"},style:{position:"absolute",width:a.size,height:a.size,backgroundColor:a.color,borderRadius:Math.random()>.5?"50%":"0"}},a.id)),n&&l.jsx(T.div,{initial:{scale:0,y:"50vh"},animate:{scale:1,y:"40vh"},exit:{scale:0,opacity:0},transition:{type:"spring",stiffness:200,damping:20},className:"absolute inset-x-0 flex justify-center",children:l.jsx("div",{className:"bg-gradient-to-r from-yellow-400 to-orange-500 text-white font-bold text-4xl px-8 py-4 rounded-2xl shadow-2xl border-4 border-white",children:n})}),l.jsx(T.div,{initial:{opacity:0},animate:{opacity:[0,1,0]},transition:{duration:1,repeat:3},className:"absolute inset-0 bg-gradient-to-b from-yellow-400/20 via-transparent to-transparent"})]}):null}function HS(){const[e,t]=y.useState([]);y.useEffect(()=>{const s=i=>{const{message:o,type:a="info",duration:c=3e3}=i.detail,u={id:`toast_${Date.now()}_${Math.random()}`,message:o,type:a,duration:c};t(h=>[...h,u]),setTimeout(()=>{t(h=>h.filter(d=>d.id!==u.id))},c)};return window.addEventListener("showToast",s),()=>window.removeEventListener("showToast",s)},[]);const n=s=>{switch(s){case"success":return"from-green-600 to-emerald-600 border-green-400";case"error":return"from-red-600 to-rose-600 border-red-400";case"warning":return"from-yellow-600 to-amber-600 border-yellow-400";case"info":default:return"from-blue-600 to-cyan-600 border-blue-400"}},r=s=>{switch(s){case"success":return"";case"error":return"";case"warning":return"";case"info":default:return""}};return l.jsx("div",{className:"fixed top-4 right-4 z-[9999] flex flex-col gap-2 pointer-events-none",children:l.jsx(me,{children:e.map(s=>l.jsx(T.div,{initial:{opacity:0,x:100,scale:.8},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:100,scale:.8},className:`bg-gradient-to-r ${n(s.type)} border-2 rounded-lg px-4 py-3 shadow-2xl min-w-[250px] max-w-[400px] pointer-events-auto`,children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("span",{className:"text-white text-xl font-bold",children:r(s.type)}),l.jsx("span",{className:"text-white font-medium flex-1",children:s.message})]})},s.id))})})}function ar(e,t="info",n=3e3){window.dispatchEvent(new CustomEvent("showToast",{detail:{message:e,type:t,duration:n}}))}function US({onClose:e}){const{missions:t,loading:n,claimReward:r,getMissionsStats:s}=qp(),[i,o]=ce.useState(!1),a=s(),c=d=>{const f=r(d);f.success?(ar(` Recompensa coletada: +${f.reward} `,"success"),s().allClaimed&&(o(!0),setTimeout(()=>o(!1),3e3))):ar(` ${f.error}`,"error")},u=d=>{switch(d){case"easy":return"text-green-400";case"medium":return"text-yellow-400";case"hard":return"text-red-400";default:return"text-white"}},h=d=>{switch(d){case"easy":return" Fcil";case"medium":return" Mdio";case"hard":return" Difcil";default:return d}};return n?l.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",children:l.jsx("div",{className:"text-white text-xl",children:"Carregando misses..."})}):l.jsxs(T.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:e,children:[l.jsxs(T.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},className:"bg-gradient-to-br from-purple-900/95 to-blue-900/95 rounded-2xl p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto border-2 border-white/20 shadow-2xl",onClick:d=>d.stopPropagation(),children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-3xl font-bold text-white flex items-center gap-2",children:" Misses Dirias"}),l.jsx("p",{className:"text-white/60 text-sm mt-1",children:"Complete misses para ganhar  Peixes"})]}),l.jsx("button",{onClick:e,className:"text-white/60 hover:text-white text-2xl transition-colors",children:""})]}),a&&l.jsxs("div",{className:"bg-black/30 rounded-lg p-4 mb-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-white/80",children:"Progresso Dirio:"}),l.jsxs("span",{className:"text-white font-bold",children:[a.completed,"/",a.total," completas"]})]}),l.jsxs("div",{className:"flex justify-between items-center mt-2",children:[l.jsx("span",{className:"text-white/80",children:"Recompensas Disponveis:"}),l.jsxs("span",{className:"text-yellow-400 font-bold flex items-center gap-1",children:[" ",a.claimedRewards,"/",a.totalRewards]})]})]}),l.jsx("div",{className:"space-y-4",children:t.map((d,f)=>{const v=Math.min(d.progress,d.target),x=v/d.target*100;return l.jsxs(T.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:f*.1},className:`bg-black/40 rounded-lg p-4 border-2 ${d.completed?"border-green-500/50":"border-white/10"}`,children:[l.jsxs("div",{className:"flex justify-between items-start mb-2",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx("h3",{className:"text-white font-bold text-lg",children:d.title}),d.completed&&!d.claimed&&l.jsx("span",{className:"text-green-400 text-xl animate-pulse",children:""}),d.claimed&&l.jsx("span",{className:"text-white/40 text-sm",children:"(Coletado)"})]}),l.jsx("p",{className:"text-white/60 text-sm",children:d.description}),l.jsx("span",{className:`text-xs ${u(d.difficulty)}`,children:h(d.difficulty)})]}),l.jsx("div",{className:"text-right",children:l.jsxs("div",{className:"text-yellow-400 font-bold flex items-center gap-1",children:[l.jsx("span",{className:"text-2xl",children:""}),l.jsx("span",{children:d.reward})]})})]}),l.jsxs("div",{className:"mt-3",children:[l.jsxs("div",{className:"flex justify-between text-sm text-white/60 mb-1",children:[l.jsx("span",{children:"Progresso"}),l.jsxs("span",{children:[v,"/",d.target]})]}),l.jsx("div",{className:"w-full bg-gray-700 rounded-full h-3 overflow-hidden",children:l.jsx(T.div,{initial:{width:0},animate:{width:`${x}%`},transition:{duration:.5},className:`h-full ${d.completed?"bg-green-500":"bg-blue-500"}`})})]}),d.completed&&!d.claimed&&l.jsx(T.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>c(d.id),className:"w-full mt-3 bg-green-600 hover:bg-green-500 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:" Coletar Recompensa"})]},d.id)})}),l.jsx("div",{className:"mt-6 text-center text-white/40 text-sm",children:"As misses resetam todos os dias s 00:00"})]}),l.jsx(Qp,{trigger:i,message:" Todas as misses completas! ",duration:3e3})]})}function Xp(){const[e,t]=y.useState([]),[n,r]=y.useState([]),[s,i]=y.useState(!0);y.useEffect(()=>{try{const h=F.resolve("achievementsService");t(h.getAchievements()),i(!1);const d=setInterval(()=>{const v=F.resolve("playerStatsService").getStats(),x=h.checkAchievements(v);x.length>0&&(t(h.getAchievements()),r(x),window.dispatchEvent(new CustomEvent("achievementsUnlocked",{detail:x})),setTimeout(()=>{r([])},5e3))},2e3);return()=>clearInterval(d)}catch{i(!1)}},[]);const o=y.useCallback(h=>{try{return F.resolve("achievementsService").getByTier(h)}catch{return[]}},[]),a=y.useCallback(()=>{try{return F.resolve("achievementsService").getUnlocked()}catch{return[]}},[]),c=y.useCallback(()=>{try{return F.resolve("achievementsService").getLocked()}catch{return[]}},[]),u=y.useCallback(()=>{try{return F.resolve("achievementsService").getStats()}catch{return null}},[]);return{achievements:e,newUnlocks:n,loading:s,getAchievementsByTier:o,getUnlocked:a,getLocked:c,getStats:u}}function GS({onClose:e}){const{achievements:t,loading:n,getStats:r,getAchievementsByTier:s}=Xp(),[i,o]=y.useState("all"),a=r(),c={bronze:"from-amber-700 to-amber-900",silver:"from-gray-400 to-gray-600",gold:"from-yellow-400 to-yellow-600",platinum:"from-cyan-400 to-blue-600"},u={bronze:"",silver:"",gold:"",platinum:""},h=i==="all"?t:s(i);return n?l.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",children:l.jsx("div",{className:"text-white text-xl",children:"Carregando conquistas..."})}):l.jsx(T.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:e,children:l.jsxs(T.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},className:"bg-gradient-to-br from-indigo-900/95 to-purple-900/95 rounded-2xl p-6 max-w-4xl w-full max-h-[90vh] overflow-y-auto border-2 border-white/20 shadow-2xl",onClick:d=>d.stopPropagation(),children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-3xl font-bold text-white flex items-center gap-2",children:" Conquistas"}),l.jsx("p",{className:"text-white/60 text-sm mt-1",children:"Desbloqueie conquistas para ganhar  Peixes"})]}),l.jsx("button",{onClick:e,className:"text-white/60 hover:text-white text-2xl transition-colors",children:""})]}),a&&l.jsxs("div",{className:"bg-black/30 rounded-lg p-4 mb-6",children:[l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-2xl font-bold text-white",children:[a.unlocked,"/",a.total]}),l.jsx("div",{className:"text-white/60 text-sm",children:"Desbloqueadas"})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-2xl font-bold text-green-400",children:[a.percentage,"%"]}),l.jsx("div",{className:"text-white/60 text-sm",children:"Completo"})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-2xl font-bold text-yellow-400 flex items-center justify-center gap-1",children:[" ",a.earnedRewards.toLocaleString()]}),l.jsx("div",{className:"text-white/60 text-sm",children:"Ganhos"})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-2xl font-bold text-white/40 flex items-center justify-center gap-1",children:[" ",a.totalRewards.toLocaleString()]}),l.jsx("div",{className:"text-white/60 text-sm",children:"Total"})]})]}),l.jsxs("div",{className:"flex justify-around mt-4 pt-4 border-t border-white/10",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-lg",children:""}),l.jsx("div",{className:"text-white/80 text-sm",children:a.byTier.bronze})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-lg",children:""}),l.jsx("div",{className:"text-white/80 text-sm",children:a.byTier.silver})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-lg",children:""}),l.jsx("div",{className:"text-white/80 text-sm",children:a.byTier.gold})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-lg",children:""}),l.jsx("div",{className:"text-white/80 text-sm",children:a.byTier.platinum})]})]})]}),l.jsxs("div",{className:"flex gap-2 mb-4 overflow-x-auto",children:[l.jsx("button",{onClick:()=>o("all"),className:`px-4 py-2 rounded-lg font-bold transition-colors whitespace-nowrap ${i==="all"?"bg-white text-black":"bg-white/20 text-white hover:bg-white/30"}`,children:"Todas"}),Object.keys(u).map(d=>l.jsxs("button",{onClick:()=>o(d),className:`px-4 py-2 rounded-lg font-bold transition-colors whitespace-nowrap ${i===d?`bg-gradient-to-r ${c[d]} text-white`:"bg-white/20 text-white hover:bg-white/30"}`,children:[u[d]," ",d.charAt(0).toUpperCase()+d.slice(1)]},d))]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:h.map((d,f)=>{const v=d.progress||0,x=d.requirement.value,S=Math.min(v/x*100,100);return l.jsxs(T.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:f*.05},className:`bg-black/40 rounded-lg p-4 border-2 relative overflow-hidden ${d.unlocked?`border-transparent bg-gradient-to-br ${c[d.tier]}`:"border-white/10"}`,children:[d.unlocked&&l.jsx("div",{className:"absolute top-2 right-2 text-3xl",children:""}),l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:"text-4xl",children:u[d.tier]}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:`font-bold text-lg mb-1 ${d.unlocked?"text-white":"text-white/60"}`,children:d.title}),l.jsx("p",{className:`text-sm mb-2 ${d.unlocked?"text-white/90":"text-white/40"}`,children:d.description}),l.jsxs("div",{className:`flex items-center gap-1 text-sm font-bold ${d.unlocked?"text-yellow-300":"text-white/40"}`,children:[" ",d.reward]}),!d.unlocked&&l.jsxs("div",{className:"mt-2",children:[l.jsxs("div",{className:"flex justify-between text-xs text-white/40 mb-1",children:[l.jsx("span",{children:"Progresso"}),l.jsxs("span",{children:[v,"/",x]})]}),l.jsx("div",{className:"w-full bg-gray-700/50 rounded-full h-2",children:l.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${S}%`}})})]}),d.unlocked&&d.unlockedAt&&l.jsxs("div",{className:"text-xs text-white/60 mt-2",children:["Desbloqueado em ",new Date(d.unlockedAt).toLocaleDateString()]})]})]})]},d.id)})}),h.length===0&&l.jsx("div",{className:"text-center text-white/40 py-8",children:"Nenhuma conquista nesta categoria"})]})})}function $S(){const[e,t]=y.useState([]),[n,r]=y.useState(!1);y.useEffect(()=>{const o=a=>{const c=a.detail;c.some(h=>h.tier==="platinum")&&(r(!0),setTimeout(()=>r(!1),3e3)),c.forEach((h,d)=>{setTimeout(()=>{const f={id:`${h.id}_${Date.now()}`,achievement:h};t(v=>[...v,f]),setTimeout(()=>{t(v=>v.filter(x=>x.id!==f.id))},5e3)},d*500)})};return window.addEventListener("achievementsUnlocked",o),()=>{window.removeEventListener("achievementsUnlocked",o)}},[]);const s={bronze:"",silver:"",gold:"",platinum:""},i={bronze:"from-amber-700 to-amber-900",silver:"from-gray-400 to-gray-600",gold:"from-yellow-400 to-yellow-600",platinum:"from-cyan-400 to-blue-600"};return l.jsxs("div",{className:"fixed top-4 right-4 z-[9999] pointer-events-none",children:[l.jsx(me,{children:e.map(o=>{const{achievement:a}=o;return l.jsx(T.div,{initial:{opacity:0,x:100,scale:.8},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:100,scale:.8},transition:{type:"spring",stiffness:200,damping:20},className:`bg-gradient-to-r ${i[a.tier]} rounded-lg p-4 shadow-2xl mb-3 border-2 border-white/30 pointer-events-auto max-w-sm`,children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"text-5xl",children:s[a.tier]}),l.jsxs("div",{className:"flex-1",children:[l.jsx("div",{className:"text-white/90 text-sm font-bold mb-1",children:" CONQUISTA DESBLOQUEADA!"}),l.jsx("h3",{className:"text-white font-bold text-lg",children:a.title}),l.jsx("p",{className:"text-white/80 text-sm",children:a.description}),l.jsxs("div",{className:"flex items-center gap-1 mt-2 text-yellow-200 font-bold",children:[l.jsx("span",{className:"text-xl",children:""}),l.jsxs("span",{children:["+",a.reward]})]})]})]})},o.id)})}),l.jsx(Qp,{trigger:n,message:" Conquista Lendria! ",duration:3e3})]})}function WS({mode:e,aiDifficulty:t,ai1Difficulty:n,ai2Difficulty:r,onExit:s}){var w,k,j,C,P,E,A,H,X,q,B,G,R,te,_,M,O,V,Y,Qe,Re,ht;const[i,o]=y.useState(null),[a,c]=y.useState(null),[u,h]=y.useState(null),[d,f]=y.useState(0),[v,x]=y.useState(0),S=y.useRef({p1:null,p2:null,ai:null,ai1:null,ai2:null}),b=y.useRef(0),p=y.useRef(null);y.useEffect(()=>{const $=new Er(new Nr,new _r,null,new Vn),J=new Er(new Nr,new _r,null,new Vn);let ve=null,K=null,U=null;if(e==="vsAI")try{ve=new us,ve.setDifficulty(t||"medium")}catch{}else e==="aiVsAI"&&(K=new us,K.setDifficulty(n||"expert"),U=new us,U.setDifficulty(r||"expert-tetris"));return $.initializeGame(),$.isPlaying=!0,J.initializeGame(),J.isPlaying=!0,S.current={p1:$,p2:J,ai:ve,ai1:K,ai2:U},o($.getGameState()),c(J.getGameState()),()=>{p.current&&cancelAnimationFrame(p.current)}},[e,t,n,r]),y.useEffect(()=>{const $=J=>{b.current||(b.current=J);const ve=J-b.current;b.current=J;const{p1:K,p2:U,ai:He,ai1:Rr,ai2:Bs}=S.current;if(!K||!U){p.current=requestAnimationFrame($);return}if(K.gameOver||U.gameOver){K.gameOver||(K.gameOver=!0,K._markDirty()),U.gameOver||(U.gameOver=!0,U._markDirty()),K.isDirty&&(o(K.getGameState()),K.clearDirty()),U.isDirty&&(c(U.getGameState()),U.clearDirty());return}K.isPaused||K.updateGame(ve),U.isPaused||U.updateGame(ve);const Z=K.consumeAttack();Z>0&&!U.gameOver&&U.receiveGarbage(Z);const Ie=U.consumeAttack();if(Ie>0&&!K.gameOver&&K.receiveGarbage(Ie),e==="aiVsAI"){if(Rr&&!K.gameOver)try{const je=Rr.decideNextMove(K.getGameState());if(je)switch(je.action){case"left":K.movePiece("left");break;case"right":K.movePiece("right");break;case"rotate":K.rotatePiece();break;case"down":K.movePiece("down");break;case"drop":K.hardDrop();break;case"hold":K.holdPiece();break}}catch{}if(Bs&&!U.gameOver)try{const je=Bs.decideNextMove(U.getGameState());if(je)switch(je.action){case"left":U.movePiece("left");break;case"right":U.movePiece("right");break;case"rotate":U.rotatePiece();break;case"down":U.movePiece("down");break;case"drop":U.hardDrop();break;case"hold":U.holdPiece();break}}catch{}}else if(e==="vsAI"&&He&&!U.gameOver)try{const je=He.decideNextMove(U.getGameState());if(je)switch(je.action){case"left":U.movePiece("left");break;case"right":U.movePiece("right");break;case"rotate":U.rotatePiece();break;case"down":U.movePiece("down");break;case"drop":U.hardDrop();break;case"hold":U.holdPiece();break}}catch{}K.isDirty&&(o(K.getGameState()),f(K.pendingGarbage),K.clearDirty()),U.isDirty&&(c(U.getGameState()),x(U.pendingGarbage),U.clearDirty()),p.current=requestAnimationFrame($)};return p.current=requestAnimationFrame($),()=>{p.current&&cancelAnimationFrame(p.current)}},[e]),y.useEffect(()=>{var $,J;u||!i||!a||(i.gameOver&&!a.gameOver?h("player2"):a.gameOver&&!i.gameOver?h("player1"):i.gameOver&&a.gameOver&&h(((($=i.score)==null?void 0:$.points)||0)>=(((J=a.score)==null?void 0:J.points)||0)?"player1":"player2"))},[i==null?void 0:i.gameOver,a==null?void 0:a.gameOver,u]),y.useEffect(()=>{if(u||e==="aiVsAI")return;const $=J=>{const ve=S.current.p1;if(!(!ve||ve.gameOver))switch(J.key){case"ArrowLeft":J.preventDefault(),ve.movePiece("left");break;case"ArrowRight":J.preventDefault(),ve.movePiece("right");break;case"ArrowDown":J.preventDefault(),ve.movePiece("down");break;case"ArrowUp":J.preventDefault(),ve.rotatePiece();break;case"z":case"Z":ve.rotatePiece("left");break;case"c":case"C":case"Shift":ve.holdPiece();break;case" ":J.preventDefault(),ve.hardDrop();break}};return window.addEventListener("keydown",$),()=>window.removeEventListener("keydown",$)},[u]);const m=ce.useMemo(()=>{var $;if(!(i!=null&&i.currentPiece)||i!=null&&i.gameOver)return null;try{return($=S.current.p1)==null?void 0:$.getDropPreview()}catch{return null}},[(k=(w=i==null?void 0:i.currentPiece)==null?void 0:w.position)==null?void 0:k.x,(C=(j=i==null?void 0:i.currentPiece)==null?void 0:j.position)==null?void 0:C.y,(P=i==null?void 0:i.currentPiece)==null?void 0:P.type,(E=i==null?void 0:i.currentPiece)==null?void 0:E.rotationState]),g=ce.useMemo(()=>{var $;if(!(a!=null&&a.currentPiece)||a!=null&&a.gameOver)return null;try{return($=S.current.p2)==null?void 0:$.getDropPreview()}catch{return null}},[(H=(A=a==null?void 0:a.currentPiece)==null?void 0:A.position)==null?void 0:H.x,(q=(X=a==null?void 0:a.currentPiece)==null?void 0:X.position)==null?void 0:q.y,(B=a==null?void 0:a.currentPiece)==null?void 0:B.type,(G=a==null?void 0:a.currentPiece)==null?void 0:G.rotationState]);return!i||!a?l.jsx("div",{className:"h-screen flex items-center justify-center bg-gradient-to-br from-purple-900 to-blue-900",children:l.jsx("div",{className:"text-white text-2xl",children:"Carregando multiplayer..."})}):l.jsxs("div",{className:"h-screen flex flex-col items-center bg-gradient-to-br from-purple-900 to-blue-900 p-2 overflow-hidden",children:[l.jsxs("div",{className:"flex justify-between items-center w-full max-w-5xl mb-2",children:[l.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-white",children:e==="aiVsAI"?" IA vs IA (Debug)":e==="vsAI"?" vs IA":" 1v1 Local"}),l.jsx("button",{onClick:s,className:"bg-red-600 hover:bg-red-700 text-white px-3 py-1.5 rounded-lg transition-colors text-sm font-bold",children:" Voltar"})]}),l.jsxs("div",{className:"flex gap-2 sm:gap-4 items-start justify-center flex-wrap",children:[l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("div",{className:"bg-blue-600 text-white px-4 py-1 rounded-t-lg font-bold text-sm sm:text-base",children:e==="aiVsAI"?` IA1 (${(n==null?void 0:n.toUpperCase())||"EXPERT"})`:e==="vsAI"?" VOC":" P1"}),l.jsx("div",{className:"bg-black/40 p-2 rounded-b-lg",children:l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx(Pr,{heldPiece:i.heldPiece,canHold:i.canHold}),e!=="aiVsAI"&&l.jsxs("div",{className:"text-white/60 text-[10px] leading-tight",children:[" mover",l.jsx("br",{})," rotacionar",l.jsx("br",{}),"C segurar",l.jsx("br",{}),"Espao dropar"]})]}),l.jsx(Fn,{board:i.board,currentPiece:i.currentPiece,dropPreview:m,gameOver:i.gameOver}),d>0&&l.jsx(ah,{count:d}),l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx(Cr,{pieces:i.nextPieces||[]}),l.jsx(jr,{score:((R=i.score)==null?void 0:R.points)||0,level:((te=i.score)==null?void 0:te.level)||1,lines:((_=i.score)==null?void 0:_.lines)||0,combo:((M=i.score)==null?void 0:M.combo)||0})]})]})})]}),l.jsx("div",{className:"flex items-center justify-center self-center",children:l.jsx("div",{className:"bg-yellow-500 text-black font-bold text-2xl sm:text-3xl px-4 py-2 rounded-full shadow-2xl animate-pulse",children:"VS"})}),l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("div",{className:"bg-red-600 text-white px-4 py-1 rounded-t-lg font-bold text-sm sm:text-base",children:e==="aiVsAI"?` IA2 (${(r==null?void 0:r.toUpperCase())||"EXPERT-TETRIS"})`:e==="vsAI"?` IA (${(t==null?void 0:t.toUpperCase())||"MEDIUM"})`:" P2"}),l.jsx("div",{className:"bg-black/40 p-2 rounded-b-lg",children:l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx(Pr,{heldPiece:a.heldPiece,canHold:a.canHold}),e==="1v1"&&l.jsxs("div",{className:"text-white/60 text-[10px] leading-tight",children:["Setas mover",l.jsx("br",{})," rotacionar",l.jsx("br",{}),"Ctrl segurar",l.jsx("br",{}),"Enter dropar"]})]}),l.jsx(Fn,{board:a.board,currentPiece:a.currentPiece,dropPreview:g,gameOver:a.gameOver}),v>0&&l.jsx(ah,{count:v}),l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx(Cr,{pieces:a.nextPieces||[]}),l.jsx(jr,{score:((O=a.score)==null?void 0:O.points)||0,level:((V=a.score)==null?void 0:V.level)||1,lines:((Y=a.score)==null?void 0:Y.lines)||0,combo:((Qe=a.score)==null?void 0:Qe.combo)||0})]})]})})]})]}),l.jsx(me,{children:u&&l.jsx(T.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/90 flex items-center justify-center z-50",children:l.jsxs(T.div,{initial:{scale:.8,y:50},animate:{scale:1,y:0},className:"bg-gradient-to-br from-yellow-500 to-orange-600 rounded-2xl p-12 text-center",children:[l.jsx("div",{className:"text-8xl mb-4",children:u==="player1"||e==="aiVsAI"?"":""}),l.jsx("h2",{className:"text-5xl font-bold text-white mb-4",children:e==="aiVsAI"?u==="player1"?"IA 1 VENCEU!":"IA 2 VENCEU!":u==="player1"?"VITRIA!":"DERROTA!"}),l.jsx("p",{className:"text-2xl text-white/80 mb-8",children:e==="aiVsAI"?`${u==="player1"?n==null?void 0:n.toUpperCase():r==null?void 0:r.toUpperCase()}  superior!`:u==="player1"?e==="vsAI"?"Voc venceu a IA!":"Player 1 venceu!":e==="vsAI"?"IA venceu!":"Player 2 venceu!"}),l.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-8 text-white",children:[l.jsxs("div",{className:"bg-black/30 rounded-lg p-4",children:[l.jsx("div",{className:"text-sm opacity-60",children:e==="aiVsAI"?`IA1 (${n})`:"Player 1"}),l.jsx("div",{className:"text-3xl font-bold",children:(((Re=i.score)==null?void 0:Re.points)||0).toLocaleString()})]}),l.jsxs("div",{className:"bg-black/30 rounded-lg p-4",children:[l.jsx("div",{className:"text-sm opacity-60",children:e==="aiVsAI"?`IA2 (${r})`:e==="vsAI"?"IA":"Player 2"}),l.jsx("div",{className:"text-3xl font-bold",children:(((ht=a.score)==null?void 0:ht.points)||0).toLocaleString()})]})]}),l.jsxs("div",{className:"flex gap-4",children:[l.jsx("button",{onClick:()=>window.location.reload(),className:"bg-green-600 hover:bg-green-700 text-white px-8 py-3 rounded-lg font-bold text-xl transition-colors",children:" Jogar Novamente"}),l.jsx("button",{onClick:s,className:"bg-gray-700 hover:bg-gray-800 text-white px-8 py-3 rounded-lg font-bold text-xl transition-colors",children:" Menu"})]})]})})})]})}function ah({count:e}){const n=Math.min(e,20);return l.jsx("div",{className:"flex flex-col-reverse justify-end w-3 rounded overflow-hidden",style:{height:"calc(var(--cell) * 22 + 22px)"},children:Array.from({length:n},(r,s)=>l.jsx("div",{className:"w-full",style:{height:`${100/20}%`,backgroundColor:e>8?"#ef4444":e>4?"#f59e0b":"#ef4444",opacity:.7+s/n*.3}},s))})}class KS{constructor(){this._actionQueue=[],this._lastPieceType=null,this._holdCooldown=0,this._comboCount=0,this.thinkingTime=0,this.lastDecision=0}setDifficulty(){}decideNextMove(t){var d;const n=Date.now();if(n-this.lastDecision<this.thinkingTime)return null;this.lastDecision=n;const{currentPiece:r,board:s,heldPiece:i,canHold:o}=t;if(!r||!s)return null;const a=r.type;if(a!==this._lastPieceType&&(this._lastPieceType=a,this._actionQueue=[],this._holdCooldown>0&&this._holdCooldown--),this._actionQueue.length>0)return this._actionQueue.shift();const c=s.length,u=((d=s[0])==null?void 0:d.length)||10,h=this._findBestMove(r,s,c,u);if(o&&this._holdCooldown<=0&&i){const f=this._findBestMove(i,s,c,u);if(f&&(!h||f.score>h.score+500))return this._holdCooldown=1,{action:"hold"}}return!h&&o&&this._holdCooldown<=0?(this._holdCooldown=1,{action:"hold"}):(h?this._actionQueue=this._buildActionSequence(r,h.rotations,h.targetX):this._actionQueue=[{action:"drop"}],this._actionQueue.shift()||{action:"drop"})}_findBestMove(t,n,r,s){let i=-1/0,o=null;for(let a=0;a<4;a++){const c=this._rotateShape(t.shape,a),u=c[0].length;for(let h=-1;h<=s-u+1;h++){const d=this._findLandingRow(c,n,h,r,s);if(d==null||d<0)continue;const f=this._placeOnBoard(c,n,h,d);if(!f)continue;const v=this._evaluate(f,n,d);v>i&&(i=v,o={rotations:a,targetX:h,score:v})}}return o}_evaluate(t,n,r){const s=t.length,i=t[0].length;let o=0;const a=this._countCompleteLines(t);a===1&&(o+=1e4),a===2&&(o+=25e3),a===3&&(o+=5e4),a>=4&&(o+=1e5);const c=this._removeCompleteLines(t);let u=0,h=0;for(let m=0;m<i;m++){let g=!1,w=0;for(let k=0;k<s;k++)c[k][m]!=null?(g=!0,w++):g&&(u++,h+=w)}o-=u*1e4,o-=h*1e3;const d=[];for(let m=0;m<i;m++){let g=0;for(let w=0;w<s;w++)if(c[w][m]!=null){g=s-w;break}d.push(g)}const f=Math.max(...d),v=d.reduce((m,g)=>m+g,0);o-=v*50,o-=f*100,f>12&&(o-=(f-12)*(f-12)*500),f>16&&(o-=1e5);let x=0;for(let m=0;m<i-1;m++)m===i-2?x+=Math.abs(d[m]-d[m+1])*.3:x+=Math.abs(d[m]-d[m+1]);o-=x*200;let S=0;for(let m=0;m<s;m++)if(c[m].filter(w=>w!=null).length!==0){for(let w=0;w<i-1;w++){const k=c[m][w]!=null,j=c[m][w+1]!=null;k!==j&&S++}c[m][0]==null&&S++,c[m][i-1]==null&&S++}o-=S*100;let b=0;for(let m=0;m<i;m++){for(let g=0;g<s-1;g++){const w=c[g][m]!=null,k=c[g+1][m]!=null;w!==k&&b++}c[s-1][m]==null&&b++}o-=b*80;const p=i-1;if(d[p]<d[p-1]){const m=d[p-1]-d[p];m>=1&&m<=4&&f<=12&&(o+=m*300)}for(let m=0;m<s;m++){const g=c[m].filter(w=>w!=null).length;g===9&&(o+=500),g===8&&(o+=200)}return o-=r>0?0:(s-r)*30,f>14&&(o+=a*5e4),o}_buildActionSequence(t,n,r){var u;const s=[],i=n%4;for(let h=0;h<i;h++)s.push({action:"rotate"});const o=((u=t.position)==null?void 0:u.x)??3,a=r-o,c=a>0?"right":"left";for(let h=0;h<Math.abs(a);h++)s.push({action:c});return s.push({action:"drop"}),s}_rotateShape(t,n){let r=t;for(let s=0;s<n%4;s++)r=r[0].map((i,o)=>r.map(a=>a[o]).reverse());return r}_findLandingRow(t,n,r,s,i){const o=t.length;for(let a=-o;a<s;a++)if(this._collides(t,n,r,a+1,s,i))return a;return s-o}_collides(t,n,r,s,i,o){for(let a=0;a<t.length;a++)for(let c=0;c<t[0].length;c++){if(!t[a][c])continue;const u=r+c,h=s+a;if(u<0||u>=o||h>=i||h>=0&&n[h][u]!=null)return!0}return!1}_placeOnBoard(t,n,r,s){const i=n.length,o=n[0].length,a=n.map(c=>[...c]);for(let c=0;c<t.length;c++)for(let u=0;u<t[0].length;u++){if(!t[c][u])continue;const h=r+u,d=s+c;if(h<0||h>=o||d<0||d>=i||a[d][h]!=null)return null;a[d][h]=1}return a}_removeCompleteLines(t){const n=t[0].length,r=t.filter(s=>!s.every(i=>i!=null));for(;r.length<t.length;)r.unshift(new Array(n).fill(null));return r}_countCompleteLines(t){return t.filter(n=>n.every(r=>r!=null)).length}_countHoles(t){let n=0;const r=t[0].length;for(let s=0;s<r;s++){let i=!1;for(let o=0;o<t.length;o++)t[o][s]!=null?i=!0:i&&n++}return n}_getMaxHeight(t){var s;const n=t.length,r=((s=t[0])==null?void 0:s.length)||10;for(let i=0;i<n;i++)for(let o=0;o<r;o++)if(t[i][o]!=null)return n-i;return 0}}const qS=50;function QS(e){const[t,n]=y.useState(null),[r,s]=y.useState({lines:0,combos:0,tetrises:0,maxCombo:0}),[i,o]=y.useState(!1),[a,c]=y.useState(!1),u=y.useRef(null),h=y.useRef(null),d=y.useRef(null),f=y.useRef(0),v=y.useRef(0),x=y.useRef({lines:0,combos:0,tetrises:0,maxCombo:0,currentCombo:0}),S=y.useCallback(()=>{const p=new Er(new Nr,new _r,null,new Vn);p.initializeGame(),p.isPlaying=!0;const m=new KS;u.current=p,h.current=m,v.current=0,f.current=0,x.current.currentCombo=0,n(p.getGameState()),c(!0)},[]);y.useEffect(()=>{if(!e){d.current&&cancelAnimationFrame(d.current),u.current=null,h.current=null,c(!1),n(null),s({lines:0,combos:0,tetrises:0,maxCombo:0}),x.current={lines:0,combos:0,tetrises:0,maxCombo:0,currentCombo:0};return}S();const p=({linesCleared:g})=>{const w=x.current;w.lines+=g,w.currentCombo++,w.currentCombo>1&&(w.combos++,w.currentCombo>w.maxCombo&&(w.maxCombo=w.currentCombo),o(!0),setTimeout(()=>o(!1),600)),g>=4&&w.tetrises++,s({lines:w.lines,combos:w.combos,tetrises:w.tetrises,maxCombo:w.maxCombo})},m=({linesCleared:g})=>{g===0&&(x.current.currentCombo=0)};return L.on(I.LINE_CLEARED,p),L.on(I.PIECE_PLACED,m),()=>{d.current&&cancelAnimationFrame(d.current),L.off(I.LINE_CLEARED,p),L.off(I.PIECE_PLACED,m),u.current=null,h.current=null}},[e,S]),y.useEffect(()=>{if(!a||!u.current||!e)return;const p=m=>{f.current||(f.current=m);let g=m-f.current;f.current=m,g>200&&(g=16);const w=u.current,k=h.current;if(!(!w||!k)){if(w.gameOver){S(),d.current=requestAnimationFrame(p);return}if(w.isPlaying&&!w.isPaused&&w.updateGame(g),v.current+=g,v.current>=qS){v.current=0;try{const j=w.getGameState(),C=k.decideNextMove(j);if(C)switch(C.action){case"left":w.movePiece("left");break;case"right":w.movePiece("right");break;case"rotate":w.rotatePiece();break;case"rotateLeft":w.rotatePieceLeft();break;case"down":w.movePiece("down");break;case"drop":w.hardDrop();break;case"hold":w.holdPiece();break}n(w.getGameState())}catch{}}d.current=requestAnimationFrame(p)}};return d.current=requestAnimationFrame(p),()=>{d.current&&cancelAnimationFrame(d.current)}},[a,e,S]);const b=y.useCallback(()=>{var p;try{return((p=u.current)==null?void 0:p.getDropPreview())||null}catch{return null}},[]);return{gameState:t,stats:r,comboFlash:i,isRunning:a,getDropPreview:b}}function XS({onClose:e}){const{gameState:t,stats:n,comboFlash:r,getDropPreview:s}=QS(!0),i=y.useMemo(()=>s(),[t,s]);if(!t)return l.jsx("div",{className:"h-screen bg-gradient-to-b from-slate-950 via-violet-950 to-slate-950 flex items-center justify-center overflow-hidden",children:l.jsx("p",{className:"text-white/50 animate-pulse",children:"Preparando IA Expert..."})});const o=t.score;return l.jsxs("div",{className:"h-screen bg-gradient-to-b from-slate-950 via-violet-950 to-slate-950 flex flex-col overflow-hidden select-none",children:[l.jsx("div",{className:"absolute inset-0 pointer-events-none overflow-hidden",children:l.jsx("div",{className:"absolute top-1/3 left-1/2 -translate-x-1/2 w-[500px] h-[500px] bg-cyan-600/10 rounded-full blur-[120px]"})}),l.jsxs("div",{className:"flex items-center justify-between px-3 py-1.5 bg-black/30 backdrop-blur-sm border-b border-white/10 shrink-0 relative z-10",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(T.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:e,className:"bg-white/15 hover:bg-white/25 text-white p-1.5 rounded-lg transition-colors",children:l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"})})}),l.jsx("span",{className:"text-sm font-bold text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-400",children:" Cat Tetris AI"})]}),l.jsxs("div",{className:`flex items-center gap-3 text-xs px-3 py-1 rounded-full transition-colors duration-300 ${r?"bg-cyan-500/30 text-cyan-300":"text-white/60"}`,children:[l.jsxs("span",{className:"font-bold",children:[n.lines," linhas"]}),l.jsxs("span",{children:["T:",n.tetrises]}),l.jsxs("span",{children:["C:",n.combos]}),l.jsxs("span",{children:["Max:",n.maxCombo]})]}),l.jsxs("div",{className:"text-xs text-white/50",children:[l.jsx("span",{className:"text-yellow-400 font-bold",children:((o==null?void 0:o.points)||0).toLocaleString()}),l.jsxs("span",{className:"ml-2",children:["Nv.",(o==null?void 0:o.level)||1]})]})]}),l.jsx(me,{children:r&&l.jsx(T.div,{initial:{opacity:0,scale:.7,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:1.2,y:-20},transition:{duration:.4,ease:"easeOut"},className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-50 pointer-events-none",children:l.jsx("div",{className:"text-5xl font-black text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 via-blue-400 to-yellow-300 drop-shadow-[0_0_30px_rgba(34,211,238,0.7)]",children:"COMBO!"})})}),l.jsx("div",{className:"flex-1 flex items-center justify-center overflow-hidden p-2 relative z-10",children:l.jsxs("div",{className:"flex gap-2 justify-center items-start",children:[l.jsx(Pr,{heldPiece:t.heldPiece,canHold:t.canHold}),l.jsx(Fn,{board:t.board,currentPiece:t.currentPiece,dropPreview:i,gameOver:t.gameOver}),l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx(Cr,{pieces:t.nextPieces||[]}),l.jsx(jr,{score:(o==null?void 0:o.points)||0,level:(o==null?void 0:o.level)||1,lines:(o==null?void 0:o.lines)||0,combo:(o==null?void 0:o.combo)||0})]})]})})]})}function Yp(){const[e,t]=y.useState([]),[n,r]=y.useState(null),[s,i]=y.useState(!0);y.useEffect(()=>{try{const u=F.resolve("shopService");t(u.getAllThemes()),r(u.getEquippedTheme()),i(!1);const h=f=>{r(f.detail.theme),t(u.getAllThemes())},d=()=>{t(u.getAllThemes())};return window.addEventListener("themeEquipped",h),window.addEventListener("currencyUpdated",d),()=>{window.removeEventListener("themeEquipped",h),window.removeEventListener("currencyUpdated",d)}}catch{i(!1)}},[]);const o=y.useCallback(u=>{try{const h=F.resolve("shopService"),d=h.purchaseTheme(u);return d.success&&(t(h.getAllThemes()),window.dispatchEvent(new Event("currencyUpdated"))),d}catch(h){return{success:!1,error:h.message}}},[]),a=y.useCallback(u=>{try{const h=F.resolve("shopService"),d=h.equipTheme(u);return d.success&&(r(d.theme),t(h.getAllThemes())),d}catch(h){return{success:!1,error:h.message}}},[]),c=y.useCallback(()=>{try{return F.resolve("shopService").getStats()}catch{return null}},[]);return{themes:e,equippedTheme:n,loading:s,purchaseTheme:o,equipTheme:a,getStats:c}}function YS({onClose:e}){var v,x;const{themes:t,equippedTheme:n,loading:r,purchaseTheme:s,equipTheme:i,getStats:o}=Yp(),{currency:a}=Kp(),[c,u]=y.useState(null),h=o();if(r)return l.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",children:l.jsx("div",{className:"text-white text-lg",children:"Carregando loja..."})});if(!t||t.length===0)return l.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-red-900/90 text-white p-6 rounded-lg",children:[l.jsx("p",{className:"text-xl",children:" Erro ao carregar temas"}),l.jsx("button",{onClick:e,className:"mt-4 bg-white text-black px-4 py-2 rounded",children:"Fechar"})]})});const d=S=>{const b=s(S);b.success?ar(` ${b.theme.name} comprado com sucesso!`,"success"):ar(` ${b.error}`,"error")},f=S=>{const b=i(S);b.success?ar(` ${b.theme.name} equipado!`,"success"):ar(` ${b.error}`,"error")};return r?l.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",children:l.jsx("div",{className:"text-white text-xl",children:"Carregando loja..."})}):l.jsx(T.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:e,children:l.jsxs(T.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},className:"bg-gradient-to-br from-pink-900/95 to-purple-900/95 rounded-2xl p-6 max-w-6xl w-full max-h-[90vh] overflow-y-auto border-2 border-white/20 shadow-2xl",onClick:S=>S.stopPropagation(),children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-3xl font-bold text-white flex items-center gap-2",children:" Loja de Temas"}),l.jsx("p",{className:"text-white/60 text-sm mt-1",children:"Personalize suas peas de Tetris"})]}),l.jsx("button",{onClick:e,className:"text-white/60 hover:text-white text-2xl transition-colors",children:""})]}),l.jsx("div",{className:"bg-black/30 rounded-lg p-4 mb-6",children:l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-2xl font-bold text-yellow-400 flex items-center justify-center gap-1",children:[" ",((v=a==null?void 0:a.fish)==null?void 0:v.toLocaleString())||0]}),l.jsx("div",{className:"text-white/60 text-sm",children:"Seus Peixes"})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-2xl font-bold text-white",children:[h==null?void 0:h.ownedThemes,"/",h==null?void 0:h.totalThemes]}),l.jsx("div",{className:"text-white/60 text-sm",children:"Temas Desbloqueados"})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-2xl font-bold text-green-400",children:[Math.floor((h==null?void 0:h.ownedThemes)/(h==null?void 0:h.totalThemes)*100),"%"]}),l.jsx("div",{className:"text-white/60 text-sm",children:"Coleo"})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-2xl font-bold text-purple-400 flex items-center justify-center gap-1",children:[" ",((x=h==null?void 0:h.totalSpent)==null?void 0:x.toLocaleString())||0]}),l.jsx("div",{className:"text-white/60 text-sm",children:"Gasto Total"})]})]})}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map((S,b)=>{const p=!S.owned&&(a==null?void 0:a.fish)>=S.price;return l.jsxs(T.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:b*.05},className:`bg-black/40 rounded-lg p-4 border-2 relative ${S.equipped?"border-green-500 shadow-lg shadow-green-500/30":S.owned?"border-white/20":"border-white/10"}`,children:[S.equipped&&l.jsx("div",{className:"absolute top-2 right-2 bg-green-600 text-white text-xs px-2 py-1 rounded-full font-bold",children:" Equipado"}),S.premium&&l.jsx("div",{className:"absolute top-2 left-2 bg-gradient-to-r from-yellow-400 to-orange-500 text-white text-xs px-2 py-1 rounded-full font-bold",children:" Premium"}),l.jsxs("div",{className:"mb-4",children:[l.jsx("h3",{className:"text-white font-bold text-lg mb-1",children:S.name}),l.jsx("p",{className:"text-white/60 text-sm",children:S.description})]}),l.jsx("div",{className:"bg-black/30 rounded-lg p-3 mb-4",children:l.jsx("div",{className:"flex justify-center gap-2 flex-wrap",children:Object.entries(S.pieces).map(([m,g])=>l.jsx("div",{className:"w-12 h-12 rounded flex items-center justify-center text-2xl border border-white/10",style:{backgroundColor:g.color},children:g.emoji},m))})}),l.jsxs("div",{className:"flex gap-2",children:[S.owned?S.equipped?l.jsx("button",{disabled:!0,className:"flex-1 bg-green-600 text-white py-2 px-4 rounded-lg font-bold cursor-default",children:"Em Uso"}):l.jsx("button",{onClick:()=>f(S.id),className:"flex-1 bg-blue-600 hover:bg-blue-500 text-white py-2 px-4 rounded-lg font-bold transition-colors",children:"Equipar"}):l.jsx("button",{onClick:()=>d(S.id),disabled:!p,className:`flex-1 py-2 px-4 rounded-lg font-bold transition-colors ${p?"bg-yellow-600 hover:bg-yellow-500 text-white":"bg-gray-600 text-white/40 cursor-not-allowed"}`,children:S.default?"Gratuito":l.jsxs(l.Fragment,{children:[" ",S.price.toLocaleString()]})}),l.jsx("button",{onClick:()=>u(S),className:"bg-purple-600 hover:bg-purple-500 text-white py-2 px-4 rounded-lg font-bold transition-colors",children:""})]})]},S.id)})}),l.jsx(me,{children:c&&l.jsx(T.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/90 flex items-center justify-center z-[60]",onClick:()=>u(null),children:l.jsxs(T.div,{initial:{scale:.8},animate:{scale:1},exit:{scale:.8},className:"bg-gray-900 rounded-xl p-6 max-w-md",onClick:S=>S.stopPropagation(),children:[l.jsx("h3",{className:"text-white font-bold text-2xl mb-4",children:c.name}),l.jsx("div",{className:"grid grid-cols-4 gap-3 mb-4",children:Object.entries(c.pieces).map(([S,b])=>l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"w-16 h-16 rounded-lg flex items-center justify-center text-3xl mb-2 border-2 border-white/20",style:{backgroundColor:b.color},children:b.emoji}),l.jsx("div",{className:"text-white/60 text-xs",children:S})]},S))}),l.jsx("button",{onClick:()=>u(null),className:"w-full bg-purple-600 hover:bg-purple-500 text-white py-2 rounded-lg font-bold",children:"Fechar"})]})})})]})})}function Jp(){const[e,t]=y.useState([]),[n,r]=y.useState(null),[s,i]=y.useState(null),[o,a]=y.useState(!0);y.useEffect(()=>{try{const d=F.resolve("gameModesService");t(d.getAllModes()),r(d.getCurrentMode()),i(d.getAllStats()),a(!1)}catch{a(!1)}},[]);const c=y.useCallback(d=>{try{const f=F.resolve("gameModesService"),v=f.setMode(d);return v&&(r(f.getCurrentMode()),window.dispatchEvent(new CustomEvent("gameModeChanged",{detail:{mode:f.getCurrentMode()}}))),v}catch{return!1}},[]),u=y.useCallback(d=>{try{return F.resolve("gameModesService").getModeStats(d)}catch{return null}},[]),h=y.useCallback((d,f)=>{try{const v=F.resolve("gameModesService");v.updateStats(d,f),i(v.getAllStats())}catch{}},[]);return{modes:e,currentMode:n,modeStats:s,loading:o,selectMode:c,getModeStats:u,updateStats:h}}function JS({onClose:e,onStartGame:t}){const{modes:n,currentMode:r,modeStats:s,loading:i,selectMode:o}=Jp(),a=u=>{o(u),setTimeout(()=>{t(),e()},300)},c=u=>{const h=Math.floor(u/60),d=u%60;return`${h}:${d.toString().padStart(2,"0")}`};return i?l.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",children:l.jsx("div",{className:"text-white text-xl",children:"Carregando modos..."})}):!n||n.length===0?l.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-red-900/90 text-white p-6 rounded-lg",children:[l.jsx("p",{className:"text-xl",children:" Erro ao carregar modos"}),l.jsx("button",{onClick:e,className:"mt-4 bg-white text-black px-4 py-2 rounded",children:"Fechar"})]})}):l.jsx(T.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:e,children:l.jsxs(T.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},className:"bg-gradient-to-br from-blue-900/95 to-indigo-900/95 rounded-2xl p-6 max-w-4xl w-full max-h-[90vh] overflow-y-auto border-2 border-white/20 shadow-2xl",onClick:u=>u.stopPropagation(),children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-3xl font-bold text-white flex items-center gap-2",children:" Modos de Jogo"}),l.jsx("p",{className:"text-white/60 text-sm mt-1",children:"Escolha seu desafio"})]}),l.jsx("button",{onClick:e,className:"text-white/60 hover:text-white text-2xl transition-colors",children:""})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:n.map((u,h)=>{const d=s[u.id],f=(r==null?void 0:r.id)===u.id;return l.jsxs(T.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:h*.1},className:`bg-black/40 rounded-lg p-5 border-2 cursor-pointer transition-all hover:scale-105 ${f?"border-green-500 shadow-lg shadow-green-500/30":"border-white/10 hover:border-white/30"}`,onClick:()=>a(u.id),children:[f&&l.jsx("div",{className:"absolute top-3 right-3 bg-green-600 text-white text-xs px-2 py-1 rounded-full font-bold",children:" Selecionado"}),l.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[l.jsx("div",{className:"text-5xl",children:u.icon}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"text-white font-bold text-xl",children:u.name}),l.jsx("p",{className:"text-white/60 text-sm",children:u.description})]})]}),l.jsx("div",{className:"bg-black/30 rounded-lg p-3 mb-3",children:l.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[u.rules.lineGoal&&l.jsxs("div",{className:"text-white/80",children:[" Meta: ",u.rules.lineGoal," linhas"]}),u.rules.timeLimit&&l.jsxs("div",{className:"text-white/80",children:[" Tempo: ",c(u.rules.timeLimit)]}),u.rules.gameOver!==void 0&&l.jsx("div",{className:"text-white/80",children:u.rules.gameOver?" Game Over":" Sem Game Over"}),u.rules.speedIncrease!==void 0&&l.jsx("div",{className:"text-white/80",children:u.rules.speedIncrease?" Velocidade aumenta":" Velocidade fixa"}),u.rules.startLevel&&l.jsxs("div",{className:"text-white/80",children:[" Incio: Nvel ",u.rules.startLevel]}),u.rules.relaxed&&l.jsx("div",{className:"text-white/80",children:" Modo relaxado"})]})}),d&&d.gamesPlayed>0&&l.jsxs("div",{className:"bg-black/30 rounded-lg p-3",children:[l.jsx("div",{className:"text-white/60 text-xs mb-2",children:"Seus recordes:"}),l.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-yellow-400 font-bold",children:d.bestScore.toLocaleString()}),l.jsx("div",{className:"text-white/40 text-xs",children:"Melhor Pontuao"})]}),u.rules.lineGoal&&d.bestTime>0&&l.jsxs("div",{children:[l.jsx("div",{className:"text-green-400 font-bold",children:c(d.bestTime)}),l.jsx("div",{className:"text-white/40 text-xs",children:"Melhor Tempo"})]}),!u.rules.lineGoal&&l.jsxs("div",{children:[l.jsx("div",{className:"text-blue-400 font-bold",children:d.bestLines}),l.jsx("div",{className:"text-white/40 text-xs",children:"Mais Linhas"})]})]}),l.jsxs("div",{className:"text-white/40 text-xs mt-2",children:[d.gamesPlayed," partidas jogadas"]})]}),(!d||d.gamesPlayed===0)&&l.jsx("div",{className:"bg-black/30 rounded-lg p-3 text-center",children:l.jsx("div",{className:"text-white/40 text-sm",children:" Nenhum recorde ainda"})}),l.jsx(T.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"w-full mt-3 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-500 hover:to-emerald-500 text-white font-bold py-3 rounded-lg transition-colors",children:" Jogar"})]},u.id)})})]})})}function ZS(){const[e,t]=y.useState(null),[n,r]=y.useState([]),[s,i]=y.useState(null),[o,a]=y.useState(null);y.useEffect(()=>{try{const S=F.resolve("multiplayerService");a(S.getStats())}catch{}},[]);const c=y.useCallback((S,b)=>{try{const p=F.resolve("multiplayerService"),m=p.startLocalMatch(S,b);return t(m.mode),r(m.players),i(p.getMatchState()),m}catch{return null}},[]),u=y.useCallback((S,b)=>{try{const p=F.resolve("multiplayerService"),m=p.startAIMatch(S,b);return t(m.mode),r(m.players),i(p.getMatchState()),m}catch{return null}},[]),h=y.useCallback((S,b)=>{try{const p=F.resolve("multiplayerService"),m=p.startAIvsAIMatch(S,b);return t(m.mode),r(m.players),i(p.getMatchState()),m}catch{return null}},[]),d=y.useCallback((S,b)=>{try{const p=F.resolve("multiplayerService");p.updatePlayerState(S,b);const m=p.getMatchState();return i(m),r(m.players),m}catch{return null}},[]),f=y.useCallback(()=>{try{const S=F.resolve("multiplayerService"),b=S.endMatch();return t(null),r([]),i(null),a(S.getStats()),b}catch{return null}},[]),v=y.useCallback(()=>{try{return F.resolve("multiplayerService").getAvailableModes()}catch{return[]}},[]),x=y.useCallback(()=>{try{const S=F.resolve("multiplayerService");a(S.getStats())}catch{}},[]);return{currentMode:e,players:n,matchState:s,stats:o,startLocalMatch:c,startAIMatch:u,startAIvsAIMatch:h,updatePlayerState:d,endMatch:f,getAvailableModes:v,refreshStats:x}}function eb(){const[e,t]=y.useState("medium"),[n,r]=y.useState(null);y.useEffect(()=>{try{const a=F.resolve("aiOpponentService");a.setDifficulty(e),r(a)}catch{}},[e]);const s=y.useCallback(a=>{if(!n)return null;try{return n.decideNextMove(a)}catch{return null}},[n]),i=y.useCallback(a=>{t(a),n&&n.setDifficulty(a)},[n]),o=y.useCallback(()=>n?n.getDifficulties():[],[n]);return{difficulty:e,changeDifficulty:i,getNextMove:s,getDifficulties:o}}function tb({onClose:e,onStartMatch:t}){const{getAvailableModes:n,stats:r,startLocalMatch:s,startAIMatch:i,startAIvsAIMatch:o}=ZS(),{getDifficulties:a}=eb(),[c,u]=y.useState(null),[h,d]=y.useState("Jogador 1");y.useState("Jogador 2");const[f,v]=y.useState("medium"),[x,S]=y.useState("expert"),[b,p]=y.useState("expert-tetris"),m=n(),g=a();if(!m||m.length===0)return l.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-red-900/90 text-white p-6 rounded-lg",children:[l.jsx("p",{className:"text-xl",children:" Erro ao carregar multiplayer"}),l.jsx("button",{onClick:e,className:"mt-4 bg-white text-black px-4 py-2 rounded",children:"Fechar"})]})});const w=j=>{j.disabled||u(j)},k=()=>{let j=null;c.id==="vs-ai"?j=i(h,f):c.id==="ai-vs-ai"&&(j=o(x,b)),j&&t&&t(j)};return l.jsx(T.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:e,children:l.jsxs(T.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},className:"bg-gradient-to-br from-purple-900/95 to-indigo-900/95 rounded-2xl p-6 max-w-4xl w-full max-h-[90vh] overflow-y-auto border-2 border-white/20 shadow-2xl",onClick:j=>j.stopPropagation(),children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-3xl font-bold text-white flex items-center gap-2",children:" Multiplayer"}),l.jsx("p",{className:"text-white/60 text-sm mt-1",children:"Desafie amigos ou enfrente a IA"})]}),l.jsx("button",{onClick:e,className:"text-white/60 hover:text-white text-2xl transition-colors",children:""})]}),r&&l.jsxs("div",{className:"bg-black/30 rounded-lg p-4 mb-6 grid grid-cols-3 gap-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-white",children:r.aiMatches}),l.jsx("div",{className:"text-white/60 text-sm",children:"Partidas vs IA"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-green-400",children:r.wins}),l.jsx("div",{className:"text-white/60 text-sm",children:"Vitrias"})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-2xl font-bold text-yellow-400",children:[r.winRate,"%"]}),l.jsx("div",{className:"text-white/60 text-sm",children:"Taxa de Vitria"})]})]}),c?l.jsxs("div",{children:[l.jsx("button",{onClick:()=>u(null),className:"text-white/60 hover:text-white mb-4 flex items-center gap-2",children:" Voltar"}),l.jsxs("div",{className:"bg-black/30 rounded-lg p-6",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[l.jsx("span",{className:"text-5xl",children:c.emoji}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-2xl font-bold text-white",children:c.name}),l.jsx("p",{className:"text-white/60",children:c.description})]})]}),c.id==="vs-ai"&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-white/80 mb-2",children:"Seu Nome:"}),l.jsx("input",{type:"text",value:h,onChange:j=>d(j.target.value),className:"w-full bg-black/30 text-white px-4 py-2 rounded-lg border border-white/20 focus:border-blue-500 focus:outline-none",maxLength:20})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-white/80 mb-2",children:"Dificuldade da IA:"}),l.jsx("div",{className:"grid grid-cols-2 gap-3",children:g.map(j=>l.jsxs("button",{onClick:()=>v(j.id),className:`p-3 rounded-lg border-2 transition-all ${f===j.id?"bg-blue-600 border-blue-400":"bg-black/30 border-white/20 hover:border-white/40"}`,children:[l.jsx("div",{className:"text-2xl mb-1",children:j.emoji}),l.jsx("div",{className:"text-white font-bold",children:j.name}),l.jsx("div",{className:"text-white/60 text-xs",children:j.description})]},j.id))})]})]}),c.id==="ai-vs-ai"&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-white/80 mb-2",children:" IA 1 (Esquerda):"}),l.jsx("div",{className:"grid grid-cols-2 gap-3",children:g.map(j=>l.jsxs("button",{onClick:()=>S(j.id),className:`p-3 rounded-lg border-2 transition-all ${x===j.id?"bg-blue-600 border-blue-400":"bg-black/30 border-white/20 hover:border-white/40"}`,children:[l.jsx("div",{className:"text-2xl mb-1",children:j.emoji}),l.jsx("div",{className:"text-white font-bold",children:j.name}),l.jsx("div",{className:"text-white/60 text-xs",children:j.description})]},j.id))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-white/80 mb-2",children:" IA 2 (Direita):"}),l.jsx("div",{className:"grid grid-cols-2 gap-3",children:g.map(j=>l.jsxs("button",{onClick:()=>p(j.id),className:`p-3 rounded-lg border-2 transition-all ${b===j.id?"bg-red-600 border-red-400":"bg-black/30 border-white/20 hover:border-white/40"}`,children:[l.jsx("div",{className:"text-2xl mb-1",children:j.emoji}),l.jsx("div",{className:"text-white font-bold",children:j.name}),l.jsx("div",{className:"text-white/60 text-xs",children:j.description})]},j.id))})]})]}),l.jsx(T.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:k,className:"w-full mt-6 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-400 hover:to-emerald-500 text-white font-bold py-4 px-6 rounded-lg shadow-lg transition-all",children:" Iniciar Partida"})]})]}):l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:m.map(j=>l.jsxs(T.button,{whileHover:j.disabled?{}:{scale:1.02},whileTap:j.disabled?{}:{scale:.98},onClick:()=>w(j),disabled:j.disabled,className:`p-6 rounded-xl border-2 text-left transition-all ${j.disabled?"bg-gray-800/50 border-gray-700 opacity-50 cursor-not-allowed":"bg-gradient-to-br from-blue-600/30 to-purple-600/30 border-blue-500/50 hover:border-blue-400 cursor-pointer"}`,children:[l.jsx("div",{className:"text-4xl mb-3",children:j.emoji}),l.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:j.name}),l.jsx("p",{className:"text-white/70 text-sm mb-3",children:j.description}),l.jsx("div",{className:"flex items-center gap-2 text-white/50 text-sm",children:l.jsxs("span",{children:[" ",j.players," jogador",j.players>1?"es":""]})}),j.disabled&&l.jsx("div",{className:"mt-3 text-yellow-400 text-xs font-bold",children:" EM BREVE"})]},j.id))})]})})}function nb({onComplete:e}){const[t,n]=y.useState(0),[r,s]=y.useState(!1);y.useEffect(()=>{localStorage.getItem("catTetris_tutorialCompleted")||s(!0)},[]);const i=[{title:" Bem-vindo ao Cat Tetris!",description:"Um Tetris com gatinhos e sistema de progresso viciante!",tips:[" Use as setas para mover as peas"," Seta para cima para rotacionar"," Seta para baixo para drop rpido","C para segurar pea (Hold)"]},{title:" Sistema de Moedas",description:"Ganhe Peixes () completando misses e conquistas!",tips:[" 3 misses dirias (resetam  meia-noite)"," 22 conquistas desbloqueveis"," Use  para comprar temas na loja"," Quanto mais voc joga, mais voc ganha!"]},{title:" Misses Dirias",description:"Complete desafios dirios para ganhar recompensas!",tips:[" Misso Fcil: 100"," Misso Mdia: 200"," Misso Difcil: 400"," Complete todas para celebrao especial!"]},{title:" Loja e Personalizao",description:"Customize suas peas com temas exclusivos!",tips:[" 10 temas diferentes disponveis"," Cristais e Espao so os mais caros"," Cada tema muda os emojis das peas"," Desbloqueie todos com suas moedas!"]},{title:" Ranking Global",description:"Compete com jogadores do mundo todo!",tips:[" Veja sua posio no ranking global"," 4 tipos de ranking: Global, Semanal, Pas, Ao Redor"," Compartilhe seus recordes"," Chegue ao Top 3 para medalha!"]},{title:" Pronto para Jogar!",description:"Agora voc sabe tudo. Divirta-se!",tips:[" Dica: Use a sombra da pea para planejar"," Faa combos para mais pontos"," T-Spins valem MUITO mais"," Modo Zen  perfeito para relaxar"]}],o=()=>{t<i.length-1?n(t+1):c()},a=()=>{c()},c=()=>{localStorage.setItem("catTetris_tutorialCompleted","true"),s(!1),e&&e()};if(!r)return null;const u=i[t],h=t===i.length-1;return l.jsx(T.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/90 backdrop-blur-sm flex items-center justify-center z-[100] p-4",children:l.jsxs(T.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-gradient-to-br from-purple-900/95 to-indigo-900/95 rounded-2xl p-8 max-w-lg w-full border-2 border-white/20 shadow-2xl max-h-[90vh] overflow-y-auto",children:[l.jsx("div",{className:"flex gap-2 mb-6",children:i.map((d,f)=>l.jsx("div",{className:`h-2 flex-1 rounded-full transition-colors ${f<=t?"bg-green-500":"bg-white/20"}`},f))}),l.jsx(T.h2,{initial:{y:-20},animate:{y:0},className:"text-3xl font-bold text-white mb-3",children:u.title}),l.jsx(T.p,{initial:{y:-10},animate:{y:0},className:"text-white/80 text-lg mb-6",children:u.description}),l.jsx(T.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},className:"bg-black/30 rounded-lg p-4 mb-6 space-y-2",children:u.tips.map((d,f)=>l.jsxs(T.div,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.3+f*.1},className:"text-white/90 flex items-start gap-2",children:[l.jsx("span",{className:"text-green-400 mt-0.5",children:""}),l.jsx("span",{children:d})]},f))}),l.jsxs("div",{className:"flex gap-3",children:[!h&&l.jsx("button",{onClick:a,className:"flex-1 bg-white/10 hover:bg-white/20 text-white font-bold py-3 px-6 rounded-lg transition-colors",children:"Pular Tutorial"}),l.jsx("button",{onClick:o,className:"flex-1 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-400 hover:to-emerald-500 text-white font-bold py-3 px-6 rounded-lg transition-all shadow-lg",children:h?" Comear a Jogar!":"Prximo "})]}),l.jsxs("div",{className:"text-center mt-4 text-white/40 text-sm",children:["Passo ",t+1," de ",i.length]})]},t)})}function rb(e){const[t,n]=y.useState(null),[r,s]=y.useState(!1),i=y.useRef(null),o=y.useRef(0);y.useEffect(()=>{if(!e){n(null),s(!1),i.current=null,o.current=0;return}const d=new Er(new Nr,new _r,null,new Vn);return d.initializeGame(),d.isPlaying=!0,o.current=0,i.current=d,n(d.getGameState()),s(!0),()=>{i.current=null,s(!1)}},[e]);const a=y.useRef(0),c=y.useRef(null);y.useEffect(()=>{if(!i.current||!r)return;a.current=0;const d=f=>{var S;a.current||(a.current=f);const v=f-a.current;a.current=f;const x=i.current;if(x){x.isPlaying&&!x.isPaused&&!x.gameOver&&x.updateGame(v);const b=x.getGameState(),p=((S=b.score)==null?void 0:S.combo)||0;p>o.current&&(o.current=p),n(b)}c.current=requestAnimationFrame(d)};return c.current=requestAnimationFrame(d),()=>{c.current&&cancelAnimationFrame(c.current)}},[r]);const u={movePiece:y.useCallback(d=>{var f;(f=i.current)==null||f.movePiece(d)},[]),rotatePiece:y.useCallback(()=>{var d;(d=i.current)==null||d.rotatePiece()},[]),rotatePieceLeft:y.useCallback(()=>{var d,f;(f=(d=i.current)==null?void 0:d.rotatePieceLeft)==null||f.call(d)},[]),hardDrop:y.useCallback(()=>{var d;(d=i.current)==null||d.hardDrop()},[]),holdPiece:y.useCallback(()=>{var d;(d=i.current)==null||d.holdPiece()},[]),pause:y.useCallback(()=>{var d;(d=i.current)==null||d.pause()},[]),resume:y.useCallback(()=>{var d;(d=i.current)==null||d.resume()},[]),restart:y.useCallback(()=>{i.current&&(i.current.restart(),o.current=0)},[]),getDropPreview:y.useCallback(()=>{var d;try{return((d=i.current)==null?void 0:d.getDropPreview())||null}catch{return null}},[])},h=y.useCallback(()=>{var d,f,v,x,S;return t?{score:((d=t.score)==null?void 0:d.points)||0,level:((f=t.score)==null?void 0:f.level)||1,linesCleared:((v=t.score)==null?void 0:v.lines)||0,currentPiece:t.currentPiece,hasCurrentPiece:!!t.currentPiece,heldPiece:t.heldPiece,hasUsedHold:!!t.heldPiece,currentCombo:((x=t.score)==null?void 0:x.combo)||0,maxCombo:o.current,backToBackActive:t.backToBack||!1,board:t.board,gameOver:t.gameOver,isPlaying:t.isPlaying,isPaused:t.isPaused,tSpins:((S=t.score)==null?void 0:S.tSpins)||0}:null},[t]);return{gameState:t,actions:u,isInitialized:r,getValidationState:h}}const lh={1:{difficulty:"easy",forceHold:!1,comboBoost:!1,label:"Movendo peas..."},2:{difficulty:"easy",forceHold:!0,comboBoost:!1,label:"Usando Hold (C)..."},3:{difficulty:"medium",forceHold:!1,comboBoost:!1,label:"Planejando jogadas..."},4:{difficulty:"medium",forceHold:!1,comboBoost:!0,label:"Buscando combos..."},5:{difficulty:"hard",forceHold:!1,comboBoost:!1,label:"Montando Tetris..."},6:{difficulty:"expert",forceHold:!0,comboBoost:!1,label:"Tentando T-Spins..."},7:{difficulty:"expert",forceHold:!0,comboBoost:!1,label:"Buscando Back-to-Back..."},8:{difficulty:"hard",forceHold:!0,comboBoost:!1,label:"Jogando no mximo..."}};function sb(e,t){const[n,r]=y.useState(null),[s,i]=y.useState(!1),[o,a]=y.useState(!1),[c,u]=y.useState(""),h=y.useRef(null),d=y.useRef(null),f=y.useRef(0),v=y.useRef(null),x=y.useRef(0),S=y.useRef(0),b=y.useRef(0),p=y.useRef(null),m=250,g=25;y.useEffect(()=>{if(!e){r(null),i(!1),a(!1),u(""),h.current=null,d.current=null,S.current=0,b.current=0,v.current&&cancelAnimationFrame(v.current);return}const k=lh[t]||lh[1];p.current=k,u(k.label);const j=new Er(new Nr,new _r,null,new Vn);j.initializeGame(),j.isPlaying=!0;const C=new us;if(C.setDifficulty(k.difficulty),C.thinkingTime=0,k.comboBoost){const P=C._evaluateBoard.bind(C);C._evaluateBoard=(E,A)=>{let H=P(E,A);for(let X=0;X<E.length;X++){const q=E[X].filter(B=>B!=null).length;q>=8&&(H+=200),q>=9&&(H+=500)}return H}}return h.current=j,d.current=C,S.current=0,b.current=0,x.current=0,f.current=0,r(j.getGameState()),i(!0),a(!1),()=>{v.current&&cancelAnimationFrame(v.current),h.current=null,d.current=null}},[e,t]),y.useEffect(()=>{if(!h.current||!s||!e)return;f.current=0,x.current=0;let k=null;const j=C=>{var X;f.current||(f.current=C);const P=C-f.current;f.current=C;const E=h.current,A=d.current,H=p.current;if(E&&A&&!E.gameOver){E.isPlaying&&!E.isPaused&&E.updateGame(P);const q=E.getGameState(),B=(X=q.currentPiece)==null?void 0:X.type;if(k&&B!==k&&(S.current++,b.current++,S.current>=g)){a(!0),r(q);return}if(k=B,x.current+=P,x.current>=m){if(x.current=0,H!=null&&H.forceHold&&b.current>=3&&q.currentPiece&&q.canHold!==!1){E.holdPiece(),b.current=0,r(E.getGameState()),v.current=requestAnimationFrame(j);return}const G=A.decideNextMove(q);if(G)switch(G.action){case"left":E.movePiece("left");break;case"right":E.movePiece("right");break;case"rotate":E.rotatePiece();break;case"down":E.movePiece("down");break;case"drop":E.hardDrop();break;case"hold":E.holdPiece();break}}r(q)}else if(E!=null&&E.gameOver){a(!0),r(E.getGameState());return}v.current=requestAnimationFrame(j)};return v.current=requestAnimationFrame(j),()=>{v.current&&cancelAnimationFrame(v.current)}},[s,e]);const w=y.useCallback(()=>{var k;try{return((k=h.current)==null?void 0:k.getDropPreview())||null}catch{return null}},[]);return{gameState:n,isInitialized:s,demoComplete:o,statusLabel:c,getDropPreview:w}}function Zp(e,t,n=!0){const r=y.useRef(t);r.current=t;const s=y.useRef(e);s.current=e,y.useEffect(()=>{if(!(!e||!n))try{const d=F.resolve("keyboardInputService"),f=()=>{var k;return!((k=r.current)!=null&&k.gameOver)},v=()=>{f()&&s.current.movePiece("left")},x=()=>{f()&&s.current.movePiece("right")},S=()=>{f()&&s.current.movePiece("down")},b=()=>{f()&&s.current.rotatePiece()},p=()=>{var k,j;f()&&((j=(k=s.current).rotatePieceLeft)==null||j.call(k))},m=()=>{f()&&s.current.hardDrop()},g=()=>{f()&&s.current.holdPiece()},w=()=>{var k,j;(k=r.current)!=null&&k.gameOver||((j=r.current)!=null&&j.isPaused?s.current.resume():s.current.pause())};return d.registerHandler("moveLeft",v),d.registerHandler("moveRight",x),d.registerHandler("moveDown",S),d.registerHandler("rotate",b),d.registerHandler("rotateLeft",p),d.registerHandler("hardDrop",m),d.registerHandler("hold",g),d.registerHandler("pause",w),d.startListening(),()=>{d.unregisterHandler("moveLeft",v),d.unregisterHandler("moveRight",x),d.unregisterHandler("moveDown",S),d.unregisterHandler("rotate",b),d.unregisterHandler("rotateLeft",p),d.unregisterHandler("hardDrop",m),d.unregisterHandler("hold",g),d.unregisterHandler("pause",w),d.stopListening()}}catch{return()=>{}}},[n]);const i=y.useCallback((d,f)=>{try{F.resolve("keyboardInputService").setKeyMapping(d,f)}catch{}},[]),o=y.useCallback(()=>{try{return F.resolve("keyboardInputService").getKeyMappings()}catch{return{}}},[]),a=y.useCallback(d=>{try{F.resolve("keyboardInputService").setDAS(d)}catch{}},[]),c=y.useCallback(d=>{try{F.resolve("keyboardInputService").setARR(d)}catch{}},[]),u=y.useCallback(()=>{try{return F.resolve("keyboardInputService").getDAS()}catch{return 133}},[]),h=y.useCallback(()=>{try{return F.resolve("keyboardInputService").getARR()}catch{return 10}},[]);return{customizeKeyMapping:i,getKeyMappings:o,setDAS:a,setARR:c,getDAS:u,getARR:h}}function ib({show:e,onComplete:t}){const[n,r]=y.useState([]);return y.useEffect(()=>{if(!e)return;const s=Array.from({length:50},(o,a)=>({id:a,x:Math.random()*window.innerWidth,y:-20,rotation:Math.random()*360,color:["#FF6B6B","#4ECDC4","#45B7D1","#FFA07A","#98D8C8","#F7DC6F","#BB8FCE","#85C1E2"][Math.floor(Math.random()*8)],size:Math.random()*10+5,delay:Math.random()*.5,duration:Math.random()*2+2,xOffset:(Math.random()-.5)*300}));r(s);const i=setTimeout(()=>{r([]),t&&t()},4e3);return()=>clearTimeout(i)},[e,t]),!e||n.length===0?null:l.jsx("div",{className:"fixed inset-0 pointer-events-none z-50 overflow-hidden",children:n.map(s=>l.jsx(T.div,{initial:{x:s.x,y:s.y,rotate:0,opacity:1},animate:{x:s.x+s.xOffset,y:window.innerHeight+100,rotate:s.rotation+720,opacity:0},transition:{duration:s.duration,delay:s.delay,ease:"easeIn"},style:{position:"absolute",width:s.size,height:s.size,backgroundColor:s.color,borderRadius:"50%"}},s.id))})}function ob({lesson:e,onStartDemo:t,onStartPractice:n}){return l.jsxs(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"max-w-lg mx-auto",children:[l.jsxs("div",{className:"bg-white/[0.06] border border-white/[0.08] rounded-xl p-6 mb-5 text-center",children:[l.jsx("div",{className:"text-4xl mb-3",children:""}),l.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:"Objetivo"}),l.jsx("p",{className:"text-white/70 text-base leading-relaxed",children:e.practice.objective})]}),e.intro&&e.intro.length>0&&l.jsxs("div",{className:"bg-white/[0.04] border border-white/[0.06] rounded-xl p-5 mb-5",children:[l.jsx("h4",{className:"text-sm font-semibold text-white/50 uppercase tracking-wide mb-3",children:"Como funciona"}),l.jsx("div",{className:"space-y-2.5",children:e.intro.map((r,s)=>l.jsxs(T.p,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:s*.08},className:"text-white/70 text-sm leading-relaxed flex items-start gap-2",children:[l.jsxs("span",{className:"text-white/25 font-mono text-xs mt-0.5 flex-shrink-0",children:[s+1,"."]}),l.jsx("span",{children:r})]},s))})]}),e.rewards&&l.jsxs("div",{className:"flex justify-center gap-4 mb-5 text-xs text-white/30",children:[l.jsxs("span",{children:[" ",e.rewards.fishCoins]}),l.jsxs("span",{children:[" ",e.rewards.xp," XP"]})]}),l.jsxs("div",{className:"flex flex-col items-center gap-3",children:[l.jsxs(T.button,{whileHover:{scale:1.03},whileTap:{scale:.97},onClick:t,className:`bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-500 hover:to-indigo-500
                   text-white px-8 py-3 rounded-xl font-bold text-sm shadow-lg shadow-blue-900/30 transition-all
                   flex items-center gap-2`,children:[l.jsx("span",{children:""}),l.jsx("span",{children:"Ver IA Jogar Primeiro"})]}),l.jsx("button",{onClick:n,className:"text-white/30 hover:text-white/50 text-xs transition-all",children:"Ir direto para prtica "})]})]},"intro")}function ab({lesson:e,gameState:t,isInitialized:n,demoComplete:r,dropPreview:s,statusLabel:i,onSkip:o}){var c,u,h,d,f;if(!t||!n)return l.jsx("div",{className:"text-center text-white/40 text-sm py-12",children:"Preparando demonstrao..."});const a=y.useMemo(()=>{var S;if(!e.intro||e.intro.length===0)return null;const v=((S=t.score)==null?void 0:S.lines)||0,x=Math.min(Math.floor(v/2),e.intro.length-1);return e.intro[x]},[e.intro,(c=t.score)==null?void 0:c.lines]);return l.jsxs(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"text-center",children:[l.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-xl p-3 mb-3 max-w-md mx-auto",children:[l.jsxs("div",{className:"flex items-center justify-center gap-2",children:[l.jsx("span",{className:"text-lg",children:""}),l.jsx("p",{className:"text-sm font-semibold text-blue-300",children:"IA jogando  observe como ela faz!"})]}),i&&l.jsx("p",{className:"text-xs text-blue-400/70 mt-1",children:i})]}),a&&l.jsx(T.div,{initial:{opacity:0,y:-5},animate:{opacity:1,y:0},className:"bg-white/[0.04] border border-white/[0.06] rounded-lg p-2.5 mb-3 max-w-md mx-auto",children:l.jsxs("p",{className:"text-xs text-white/60",children:[" ",a]})},a),l.jsxs("div",{className:"flex gap-3 justify-center items-start",children:[l.jsx(Pr,{heldPiece:t.heldPiece,canHold:t.canHold}),l.jsx(Fn,{board:t.board,currentPiece:t.currentPiece,dropPreview:s,gameOver:t.gameOver}),l.jsxs("div",{className:"flex flex-col gap-3",children:[l.jsx(Cr,{pieces:t.nextPieces||[]}),l.jsx(jr,{score:((u=t.score)==null?void 0:u.points)||0,level:((h=t.score)==null?void 0:h.level)||1,lines:((d=t.score)==null?void 0:d.lines)||0,combo:((f=t.score)==null?void 0:f.combo)||0})]})]}),l.jsx("div",{className:"mt-4",children:r?l.jsx(T.button,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},whileHover:{scale:1.03},whileTap:{scale:.97},onClick:o,className:`bg-gradient-to-r from-emerald-600 to-green-600 hover:from-emerald-500 hover:to-green-500
                     text-white px-6 py-2.5 rounded-xl font-bold text-sm shadow-lg shadow-emerald-900/30 transition-all`,children:"  Agora  sua vez!"}):l.jsx("button",{onClick:o,className:"text-white/30 hover:text-white/50 text-xs transition-all",children:"Pular demonstrao "})})]},"demo")}function lb({lesson:e,gameState:t,isInitialized:n,practiceState:r,onRestart:s,dropPreview:i}){var o,a,c,u;return!t||!n?l.jsx("div",{className:"text-center text-white/40 text-sm py-12",children:"Carregando..."}):l.jsxs(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"text-center",children:[l.jsxs("div",{className:"bg-white/[0.06] border border-white/[0.06] rounded-xl p-3 mb-3 max-w-md mx-auto",children:[l.jsxs("p",{className:"text-sm font-semibold text-white mb-2",children:[" ",e.practice.objective]}),r.progress>0&&l.jsxs("div",{children:[l.jsx("div",{className:"h-1.5 bg-white/[0.08] rounded-full overflow-hidden",children:l.jsx(T.div,{className:`h-full rounded-full ${r.complete?"bg-emerald-400":"bg-gradient-to-r from-blue-500 to-indigo-500"}`,initial:{width:0},animate:{width:`${Math.min(100,r.progress*100)}%`},transition:{duration:.3}})}),l.jsxs("div",{className:"text-white/30 text-[10px] mt-1",children:[Math.round(r.progress*100),"%"]})]})]}),l.jsxs("div",{className:"flex gap-3 justify-center items-start",children:[l.jsx(Pr,{heldPiece:t.heldPiece,canHold:t.canHold}),l.jsx(Fn,{board:t.board,currentPiece:t.currentPiece,dropPreview:i,gameOver:t.gameOver}),l.jsxs("div",{className:"flex flex-col gap-3",children:[l.jsx(Cr,{pieces:t.nextPieces||[]}),l.jsx(jr,{score:((o=t.score)==null?void 0:o.points)||0,level:((a=t.score)==null?void 0:a.level)||1,lines:((c=t.score)==null?void 0:c.lines)||0,combo:((u=t.score)==null?void 0:u.combo)||0})]})]}),l.jsx("div",{className:"mt-3 text-white/20 text-[10px]",children:" Mover   Rotao   Soft Drop  Espao: Hard Drop  C: Hold"}),r.feedback&&!r.complete&&l.jsx(T.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"mt-3 bg-white/[0.06] border border-white/[0.08] rounded-lg p-3 max-w-md mx-auto",children:l.jsx("p",{className:"text-sm text-white/70",children:r.feedback})},r.feedback),t.gameOver&&!r.complete&&l.jsxs(T.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"mt-4",children:[l.jsx("p",{className:"text-white/40 text-sm mb-2",children:"Game Over  tente de novo!"}),l.jsx("button",{onClick:s,className:"bg-white/[0.08] hover:bg-white/[0.12] text-white text-sm px-4 py-2 rounded-lg transition-all",children:" Recomear"})]}),r.complete&&l.jsxs(T.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",bounce:.4},className:"mt-4 bg-emerald-500/10 border border-emerald-500/20 rounded-xl p-6 max-w-sm mx-auto",children:[l.jsx("div",{className:"text-4xl mb-2",children:""}),l.jsx("h3",{className:"text-lg font-bold text-white mb-1",children:"Parabns!"}),l.jsx("p",{className:"text-emerald-300/70 text-sm",children:r.feedback})]})]},"practice")}function cb({lesson:e,onComplete:t,onExit:n}){const[r,s]=y.useState("introduction"),[i,o]=y.useState({progress:0,feedback:"",complete:!1}),[a,c]=y.useState(!1),{gameState:u,isInitialized:h,demoComplete:d,statusLabel:f,getDropPreview:v}=sb(r==="demo",e==null?void 0:e.id),x=y.useMemo(()=>r!=="demo"||!h?null:(v==null?void 0:v())||null,[r,h,v,u]),{gameState:S,actions:b,isInitialized:p,getValidationState:m}=rb(r==="practice"?e:null);Zp(b,S,r==="practice"&&p);const g=y.useMemo(()=>{var P;return r!=="practice"||!p?null:((P=b.getDropPreview)==null?void 0:P.call(b))||null},[r,p,b,S]);y.useEffect(()=>{var A;if(r!=="practice"||!p||!S)return;const P=m();if(!P||!((A=e.practice)!=null&&A.validate))return;const E=e.practice.validate(P);o(H=>({...H,progress:E.progress||0,feedback:E.feedback||"",complete:E.complete||!1})),E.complete&&!i.complete&&(c(!0),setTimeout(()=>{t(e.id,{score:P.score})},2e3))},[r,p,S,e,m,i.complete,t]);const w=y.useCallback(()=>{s("demo")},[]),k=y.useCallback(()=>{s("practice"),o({progress:0,feedback:"",complete:!1})},[]),j=y.useCallback(()=>{var P;(P=b.restart)==null||P.call(b),o({progress:0,feedback:"",complete:!1})},[b]),C=r==="introduction"?" Introduo":r==="demo"?" Demonstrao":" Prtica";return l.jsxs("div",{className:"fixed inset-0 bg-gradient-to-b from-slate-900 via-indigo-950 to-slate-900 z-50 flex flex-col",children:[l.jsx("div",{className:"bg-black/30 border-b border-white/[0.06] px-4 py-2 flex-shrink-0",children:l.jsxs("div",{className:"flex items-center justify-between max-w-4xl mx-auto",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("span",{className:"text-2xl",children:e.module==="fundamentals"?"":e.module==="intermediate"?"":e.module==="advanced"?"":""}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-bold text-white",children:e.title}),l.jsx("p",{className:"text-white/40 text-xs",children:e.description})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-xs text-white/30 bg-white/[0.06] px-2 py-1 rounded",children:C}),l.jsx("button",{onClick:n,className:"text-white/40 hover:text-white/70 bg-white/[0.06] hover:bg-white/[0.1] rounded-lg px-3 py-1.5 text-sm transition-all",children:" Sair"})]})]})}),l.jsx("div",{className:"flex-1 overflow-auto p-3",children:l.jsx("div",{className:"max-w-4xl w-full mx-auto",children:l.jsxs(me,{mode:"wait",children:[r==="introduction"&&l.jsx(ob,{lesson:e,onStartDemo:w,onStartPractice:k}),r==="demo"&&l.jsx(ab,{lesson:e,gameState:u,isInitialized:h,demoComplete:d,dropPreview:x,statusLabel:f,onSkip:k}),r==="practice"&&l.jsx(lb,{lesson:e,gameState:S,isInitialized:p,practiceState:i,onRestart:j,dropPreview:g})]})})}),l.jsx(ib,{show:a,onComplete:()=>c(!1)})]})}function ub({tutorialService:e,onClose:t,onLessonComplete:n}){const[r,s]=y.useState(null),[i,o]=y.useState(e.getProgress()),[a,c]=y.useState("fundamentals"),u=e.lessons,h=[{key:"fundamentals",icon:"",name:"Fundamentos",desc:"O bsico do Tetris"},{key:"intermediate",icon:"",name:"Intermedirio",desc:"T-spins e combos"},{key:"advanced",icon:"",name:"Avanado",desc:"Setups e estratgias"},{key:"pro",icon:"",name:"Profissional",desc:"Tcnicas PRO"}],d=u.filter(g=>g.module===a),f=g=>{const w=u.filter(j=>j.module===g).map(j=>j.id);return{done:w.filter(j=>i.completedLessons.includes(j)).length,total:w.length}},v=(g,w)=>{const k=e.completeLesson(g,w);o(e.getProgress()),s(null),n&&n(k)},x=g=>i.unlockedLessons.includes(g),S=g=>i.completedLessons.includes(g);if(r)return l.jsx(cb,{lesson:r,onComplete:v,onExit:()=>s(null)});const b=i.completedLessons.length,p=u.length,m=p>0?Math.round(b/p*100):0;return l.jsx(T.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-gradient-to-b from-slate-900 via-indigo-950 to-slate-900 z-40 overflow-y-auto",children:l.jsxs("div",{className:"min-h-screen max-w-lg mx-auto px-4 py-6 flex flex-col",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-extrabold text-white",children:" Tutorial"}),l.jsx("p",{className:"text-white/40 text-sm mt-0.5",children:"Aprenda do zero ao PRO"})]}),l.jsx("button",{onClick:t,className:"text-white/40 hover:text-white/70 bg-white/[0.06] hover:bg-white/[0.1] rounded-lg px-3 py-1.5 text-sm transition-all",children:" Voltar"})]}),l.jsxs("div",{className:"mb-6",children:[l.jsxs("div",{className:"flex justify-between text-xs text-white/40 mb-1.5",children:[l.jsx("span",{children:"Progresso geral"}),l.jsxs("span",{children:[b,"/",p," (",m,"%)"]})]}),l.jsx("div",{className:"h-2 bg-white/[0.08] rounded-full overflow-hidden",children:l.jsx(T.div,{className:"h-full bg-gradient-to-r from-emerald-500 to-green-400 rounded-full",initial:{width:0},animate:{width:`${m}%`},transition:{duration:.6,ease:"easeOut"}})})]}),l.jsx("div",{className:"flex gap-1.5 mb-5 overflow-x-auto pb-1 -mx-1 px-1",children:h.map(g=>{const w=f(g.key),k=a===g.key;return l.jsx("button",{onClick:()=>c(g.key),className:`flex-shrink-0 rounded-lg px-3 py-2 text-left transition-all duration-150 ${k?"bg-white/[0.12] border border-white/[0.15]":"bg-white/[0.04] border border-transparent hover:bg-white/[0.07]"}`,children:l.jsxs("div",{className:"flex items-center gap-1.5",children:[l.jsx("span",{className:"text-base",children:g.icon}),l.jsx("span",{className:`text-xs font-semibold ${k?"text-white":"text-white/50"}`,children:g.name}),l.jsxs("span",{className:`text-[10px] ml-1 ${w.done===w.total&&w.total>0?"text-emerald-400":"text-white/30"}`,children:[w.done,"/",w.total]})]})},g.key)})}),l.jsx("div",{className:"flex-1 space-y-2",children:l.jsx(me,{mode:"wait",children:l.jsxs(T.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},transition:{duration:.2},className:"space-y-2",children:[d.map((g,w)=>{var C,P;const k=x(g.id),j=S(g.id);return l.jsxs(T.button,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:w*.04},disabled:!k,onClick:()=>k&&s(g),className:`w-full text-left rounded-xl p-4 transition-all duration-150 flex items-center gap-3 ${k?"bg-white/[0.06] hover:bg-white/[0.1] border border-white/[0.06] hover:border-white/[0.12] active:scale-[0.99]":"bg-white/[0.02] border border-white/[0.03] opacity-40 cursor-not-allowed"} ${j?"border-emerald-500/30":""}`,children:[l.jsx("div",{className:`w-9 h-9 rounded-lg flex items-center justify-center text-sm flex-shrink-0 ${j?"bg-emerald-500/20 text-emerald-400":k?"bg-white/[0.08] text-white/60":"bg-white/[0.04] text-white/20"}`,children:j?"":k?w+1:""}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("div",{className:"text-sm font-semibold text-white truncate",children:g.title}),l.jsx("div",{className:"text-xs text-white/35 mt-0.5 truncate",children:g.description}),l.jsxs("div",{className:"flex items-center gap-3 mt-1.5 text-[10px] text-white/25",children:[l.jsxs("span",{children:[" ",g.estimatedTime]}),l.jsxs("span",{children:[" ",((C=g.rewards)==null?void 0:C.fishCoins)||0]}),l.jsxs("span",{children:[" ",((P=g.rewards)==null?void 0:P.xp)||0," XP"]})]})]}),l.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[l.jsx("span",{className:`w-2 h-2 rounded-full ${g.difficulty==="beginner"?"bg-green-400":g.difficulty==="intermediate"?"bg-yellow-400":g.difficulty==="advanced"?"bg-red-400":"bg-purple-400"}`}),k&&l.jsx("svg",{className:"w-4 h-4 text-white/20",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]},g.id)}),d.length===0&&l.jsx("div",{className:"text-center py-12 text-white/20 text-sm",children:"Nenhuma lio neste mdulo"})]},a)})}),i.badges.length>0&&l.jsxs("div",{className:"mt-6 pt-4 border-t border-white/[0.06]",children:[l.jsx("div",{className:"text-xs text-white/30 mb-2",children:"Badges conquistadas"}),l.jsx("div",{className:"flex flex-wrap gap-2",children:i.badges.map(g=>l.jsxs("span",{className:"bg-amber-500/10 text-amber-300/70 text-[10px] px-2 py-1 rounded-md font-medium",children:[" ",g.replace(/_/g," ")]},g))})]})]})})}function db({reward:e,onClose:t}){var n,r,s;return ce.useEffect(()=>{const i=setTimeout(()=>{t()},5e3);return()=>clearTimeout(i)},[t]),e?l.jsx(T.div,{initial:{opacity:0,y:-50,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,scale:.9},className:"fixed top-24 right-6 z-[60] max-w-md",children:l.jsx("div",{className:"bg-gradient-to-br from-green-600 to-emerald-600 rounded-xl p-6 shadow-2xl border-2 border-white/20",children:l.jsxs("div",{className:"flex items-start gap-4",children:[l.jsx("div",{className:"text-4xl",children:""}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Lesson Completa!"}),e.lessonTitle&&l.jsx("p",{className:"text-white/90 text-sm mb-3",children:e.lessonTitle}),l.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[((n=e.rewards)==null?void 0:n.fishCoins)>0&&l.jsxs("div",{className:"bg-white/10 rounded-lg p-2 text-center",children:[l.jsx("div",{className:"text-xl",children:""}),l.jsxs("div",{className:"text-lg font-bold text-white",children:["+",e.rewards.fishCoins]}),l.jsx("div",{className:"text-xs text-white/70",children:"Peixes"})]}),((r=e.rewards)==null?void 0:r.xp)>0&&l.jsxs("div",{className:"bg-white/10 rounded-lg p-2 text-center",children:[l.jsx("div",{className:"text-xl",children:""}),l.jsxs("div",{className:"text-lg font-bold text-white",children:["+",e.rewards.xp]}),l.jsx("div",{className:"text-xs text-white/70",children:"XP"})]}),((s=e.rewards)==null?void 0:s.badge)&&l.jsxs("div",{className:"bg-white/10 rounded-lg p-2 text-center",children:[l.jsx("div",{className:"text-xl",children:""}),l.jsx("div",{className:"text-xs font-bold text-white mt-1",children:"Badge"}),l.jsx("div",{className:"text-xs text-white/70",children:e.rewards.badge.split("_")[0]})]})]})]}),l.jsx("button",{onClick:t,className:"text-white/60 hover:text-white transition-colors",children:""})]})})}):null}function hb(){const[e,t]=y.useState(null),n=y.useRef(null),r=y.useRef(null),s=y.useRef(0),i=y.useRef(!1),o=y.useRef(!1);y.useEffect(()=>{if(!i.current){i.current=!0;try{const w=F.resolve("gameService");n.current=w,w.initializeGame(),t(w.getGameState());const k=()=>{o.current=!0};return Object.values(I).forEach(j=>{L.on(j,k)}),()=>{Object.values(I).forEach(j=>{L.off(j,k)}),r.current&&cancelAnimationFrame(r.current)}}catch(w){throw Le.logError("useGameService","init",w.message,{stack:w.stack}),w}}},[]),y.useEffect(()=>{if(!n.current)return;const w=k=>{s.current||(s.current=k);const j=k-s.current;s.current=k,n.current&&(n.current.isPlaying&&!n.current.isPaused&&!n.current.gameOver&&n.current.updateGame(j),o.current&&(o.current=!1,t(n.current.getGameState()))),r.current=requestAnimationFrame(w)};return r.current=requestAnimationFrame(w),()=>{r.current&&cancelAnimationFrame(r.current)}},[]);const a=y.useCallback(w=>(...k)=>{if(n.current&&typeof n.current[w]=="function")try{return["getDropPreview","updateGame","getGameState"].includes(w)||Le.logAction("useGameService",w,{args:k.length>0?k:void 0}),n.current[w](...k)}catch(j){if(Le.logError("useGameService",w,j.message,{stack:j.stack,args:k.map(C=>String(C).slice(0,100))}),w==="getDropPreview")return null;throw j}},[]),c=y.useCallback(a("movePiece"),[a]),u=y.useCallback(a("rotatePiece"),[a]),h=y.useCallback(a("rotatePieceLeft"),[a]),d=y.useCallback(a("hardDrop"),[a]),f=y.useCallback(a("holdPiece"),[a]),v=y.useCallback(a("getDropPreview"),[a]),x=y.useCallback(a("pause"),[a]),S=y.useCallback(a("resume"),[a]),b=y.useCallback(a("restart"),[a]),p=y.useCallback(a("saveGame"),[a]),m=y.useCallback(a("loadGame"),[a]);return{gameState:e,actions:{movePiece:c,rotatePiece:u,rotatePieceLeft:h,hardDrop:d,holdPiece:f,getDropPreview:v,pause:x,resume:S,restart:b,saveGame:p,loadGame:m}}}function fb(){const[e,t]=y.useState({volume:80,gameSpeed:"normal",soundEnabled:!0,particlesEnabled:!0,das:167,arr:33}),[n,r]=y.useState(!0),[s,i]=y.useState(null);y.useEffect(()=>{try{const h=F.resolve("settingsService").getSettings();t(h||{volume:80,gameSpeed:"normal",soundEnabled:!0,particlesEnabled:!0,das:167,arr:33}),r(!1)}catch(u){i(u.message),r(!1),t({volume:80,gameSpeed:"normal",soundEnabled:!0,particlesEnabled:!0,das:167,arr:33})}},[]);const o=y.useCallback(async u=>{try{i(null);const d=F.resolve("settingsService").saveSettings(u);return t(d),d}catch(h){throw i(h.message),h}},[]),a=y.useCallback(async(u,h)=>{try{i(null);const f=F.resolve("settingsService").updateSetting(u,h);return t(f),f}catch(d){throw i(d.message),d}},[]),c=y.useCallback(async()=>{try{i(null);const h=F.resolve("settingsService").resetSettings();return t(h),h}catch(u){throw i(u.message),u}},[]);return{settings:e,loading:n,error:s,updateSettings:o,updateSetting:a,resetSettings:c}}function mb(){const e=y.useCallback((b,p,m="sine",g=.1)=>{const w=Tr();if(w)try{const k=w.createOscillator(),j=w.createGain();k.connect(j),j.connect(w.destination),k.frequency.setValueAtTime(b,w.currentTime),k.type=m,j.gain.setValueAtTime(g,w.currentTime),j.gain.exponentialRampToValueAtTime(.001,w.currentTime+p),k.start(w.currentTime),k.stop(w.currentTime+p)}catch{}},[]),t=y.useCallback((b,p=.05)=>{const m=Tr();if(m)try{const g=m.sampleRate*b,w=m.createBuffer(1,g,m.sampleRate),k=w.getChannelData(0);for(let C=0;C<g;C++)k[C]=(Math.random()*2-1)*p;const j=m.createBufferSource();j.buffer=w,j.connect(m.destination),j.start()}catch{}},[]),n=y.useCallback(b=>{switch(b){case"I":[800,700,600,500].forEach((p,m)=>{setTimeout(()=>e(p,.1,"square",.08),m*50)});break;case"O":e(600,.1,"sine",.1),setTimeout(()=>e(600,.1,"sine",.1),80);break;case"T":e(523,.08,"triangle",.08),setTimeout(()=>e(659,.08,"triangle",.08),40),setTimeout(()=>e(523,.08,"triangle",.08),80);break;case"S":[440,494,523,587].forEach((p,m)=>{setTimeout(()=>e(p,.06,"sawtooth",.06),m*30)});break;case"Z":[587,523,494,440].forEach((p,m)=>{setTimeout(()=>e(p,.06,"sawtooth",.06),m*30)});break;case"J":[330,415,523].forEach((p,m)=>{setTimeout(()=>e(p,.15,"triangle",.07),m*20)});break;case"L":[392,494,659].forEach((p,m)=>{setTimeout(()=>e(p,.15,"sine",.08),m*30)});break;default:e(440,.1,"sine",.05)}},[e]),r=y.useCallback(b=>{switch(b){case 1:[440,494,523].forEach((p,m)=>{setTimeout(()=>e(p,.1,"triangle",.1),m*80)});break;case 2:[440,523,659,784].forEach((p,m)=>{setTimeout(()=>e(p,.12,"triangle",.1),m*60)});break;case 3:[523,659,784,1047,1319].forEach((p,m)=>{setTimeout(()=>e(p,.15,"triangle",.12),m*50)});break;case 4:t(.02),setTimeout(()=>{[262,330,392,523,659,784,1047].forEach((p,m)=>{setTimeout(()=>e(p,.2,"sawtooth",.15),m*40)})},50),setTimeout(()=>{[1047,1319,1568,2093].forEach((p,m)=>{setTimeout(()=>e(p,.3,"triangle",.2),m*30)})},350);break}},[e,t]),s=y.useCallback(()=>{[{freq:523,delay:0},{freq:659,delay:100},{freq:784,delay:200},{freq:1047,delay:300},{freq:784,delay:400},{freq:1047,delay:500},{freq:1319,delay:600},{freq:1568,delay:700}].forEach(p=>{setTimeout(()=>e(p.freq,.15,"triangle",.12),p.delay)}),setTimeout(()=>{[1047,1319,1568,2093].forEach((p,m)=>{setTimeout(()=>e(p,.4,"triangle",.15),m*50)})},800)},[e]),i=y.useCallback(()=>{e(200,.05,"square",.03),e(120,.06,"sine",.04)},[e]),o=y.useCallback(()=>{t(.04,.08),e(80,.08,"square",.12),e(60,.1,"sine",.1)},[e,t]),a=y.useCallback(()=>{t(.03,.04),[349,440,523,659,784].forEach((b,p)=>{setTimeout(()=>e(b,.2,"sawtooth",.1),p*40)}),setTimeout(()=>{e(1047,.4,"triangle",.15)},250)},[e,t]),c=y.useCallback(()=>{[660,880,1100,1320,1760].forEach((b,p)=>{setTimeout(()=>e(b,.12,"triangle",.08),p*50)})},[e]),u=y.useCallback(b=>{const p=400+b*80;e(p,.1,"triangle",.08),setTimeout(()=>e(p*1.25,.08,"triangle",.06),50)},[e]),h=y.useCallback(()=>{[523,494,440,392,349,330,294,262].forEach((p,m)=>{setTimeout(()=>e(p,.3,"sine",.1),m*150)})},[e]),d=y.useCallback(()=>{e(440,.2,"triangle",.08)},[e]),f=y.useCallback(()=>{e(523,.15,"triangle",.08),setTimeout(()=>e(659,.1,"triangle",.06),100)},[e]),v=y.useCallback(()=>{e(880,.1,"sine",.06),setTimeout(()=>e(1100,.08,"sine",.05),60)},[e]),x=y.useCallback(()=>{e(1200,.05,"square",.04)},[e]),S=y.useCallback(()=>{e(800,.03,"square",.02)},[e]);return{playPieceSound:n,playLineClear:r,playLevelUp:s,playPieceLand:i,playHardDrop:o,playTSpin:a,playBackToBack:c,playCombo:u,playGameOver:h,playPause:d,playResume:f,playHold:v,playRotate:x,playMove:S}}function pb(){const e=mb(),t=y.useRef(e);t.current=e,y.useEffect(()=>{const n=()=>t.current,r=x=>{var S;n().playPieceLand(),(S=x==null?void 0:x.piece)!=null&&S.type&&n().playPieceSound(x.piece.type)},s=x=>{(x==null?void 0:x.linesCleared)>0&&n().playLineClear(x.linesCleared)},i=()=>n().playHardDrop(),o=()=>n().playTSpin(),a=()=>n().playBackToBack(),c=x=>{(x==null?void 0:x.combo)>=2&&n().playCombo(x.combo)},u=()=>n().playHold(),h=()=>n().playRotate(),d=()=>n().playMove(),f=()=>n().playGameOver(),v=()=>n().playLevelUp();return L.on(I.PIECE_PLACED,r),L.on(I.LINE_CLEARED,s),L.on(I.HARD_DROP,i),L.on(I.T_SPIN,o),L.on(I.BACK_TO_BACK,a),L.on(I.SCORE_UPDATED,c),L.on(I.PIECE_HELD,u),L.on(I.PIECE_ROTATED,h),L.on(I.PIECE_MOVED,d),L.on(I.GAME_OVER,f),L.on(I.LEVEL_UP,v),()=>{L.off(I.PIECE_PLACED,r),L.off(I.LINE_CLEARED,s),L.off(I.HARD_DROP,i),L.off(I.T_SPIN,o),L.off(I.BACK_TO_BACK,a),L.off(I.SCORE_UPDATED,c),L.off(I.PIECE_HELD,u),L.off(I.PIECE_ROTATED,h),L.off(I.PIECE_MOVED,d),L.off(I.GAME_OVER,f),L.off(I.LEVEL_UP,v)}},[])}function gb(){const[e,t]=y.useState(!1),[n,r]=y.useState(null),s=y.useRef(null),i=y.useRef([]),o=y.useRef(null),a=y.useCallback(()=>{s.current&&(s.current.pause(),s.current.currentTime=0),i.current.forEach(f=>{try{f.stop()}catch{}}),i.current=[],o.current&&(clearTimeout(o.current),o.current=null),t(!1),r(null)},[]),c=y.useCallback(async()=>{try{a();const f=new Audio("/cat-tetris/sounds/background-music.mp3");f.loop=!0,f.volume=.3,s.current=f,await f.play(),t(!0),r("background")}catch{h()}},[a]),u=y.useCallback(async()=>{try{a();const f=new Audio("/cat-tetris/sounds/game-music.mp3");f.loop=!0,f.volume=.4,s.current=f,await f.play(),t(!0),r("game")}catch{d()}},[a]),h=y.useCallback(()=>{a();try{const f=Tr();if(!f)return;const v=[{freq:523.25,duration:.4},{freq:587.33,duration:.4},{freq:659.25,duration:.4},{freq:698.46,duration:.4},{freq:783.99,duration:.6},{freq:659.25,duration:.4},{freq:523.25,duration:.8},{freq:587.33,duration:.4},{freq:659.25,duration:.4},{freq:698.46,duration:.4},{freq:783.99,duration:.6},{freq:880,duration:.4},{freq:783.99,duration:.8},{freq:659.25,duration:.4},{freq:698.46,duration:.4},{freq:783.99,duration:.4},{freq:880,duration:.6},{freq:987.77,duration:.4},{freq:1046.5,duration:.8}];let x=f.currentTime;v.forEach((S,b)=>{const p=f.createOscillator(),m=f.createGain();if(p.connect(m),m.connect(f.destination),p.frequency.setValueAtTime(S.freq,x),p.type="sine",m.gain.setValueAtTime(0,x),m.gain.linearRampToValueAtTime(.1,x+.05),m.gain.exponentialRampToValueAtTime(.01,x+S.duration),p.start(x),p.stop(x+S.duration),i.current.push(p),b<v.length-1){const g=f.createOscillator(),w=f.createGain();g.connect(w),w.connect(f.destination),g.frequency.setValueAtTime(S.freq*1.25,x),g.type="triangle",w.gain.setValueAtTime(0,x),w.gain.linearRampToValueAtTime(.05,x+.05),w.gain.exponentialRampToValueAtTime(.01,x+S.duration),g.start(x),g.stop(x+S.duration),i.current.push(g)}x+=S.duration}),o.current=setTimeout(()=>{s.current||h()},x*1e3+1e3),t(!0),r("cheerful-fallback")}catch{}},[a]),d=y.useCallback(()=>{a();try{const f=Tr();if(!f)return;const v=[{freq:261.63,duration:.2},{freq:329.63,duration:.2},{freq:392,duration:.2},{freq:523.25,duration:.3},{freq:392,duration:.1},{freq:523.25,duration:.3},{freq:293.66,duration:.2},{freq:369.99,duration:.2},{freq:440,duration:.2},{freq:587.33,duration:.3},{freq:440,duration:.1},{freq:587.33,duration:.3},{freq:329.63,duration:.2},{freq:415.3,duration:.2},{freq:493.88,duration:.2},{freq:659.25,duration:.4},{freq:493.88,duration:.2},{freq:659.25,duration:.4}];let x=f.currentTime;v.forEach((S,b)=>{const p=f.createOscillator(),m=f.createGain();if(p.connect(m),m.connect(f.destination),p.frequency.setValueAtTime(S.freq,x),p.type="square",m.gain.setValueAtTime(0,x),m.gain.linearRampToValueAtTime(.15,x+.02),m.gain.exponentialRampToValueAtTime(.01,x+S.duration),p.start(x),p.stop(x+S.duration),i.current.push(p),b%2===0){const g=f.createOscillator(),w=f.createGain();g.connect(w),w.connect(f.destination),g.frequency.setValueAtTime(S.freq*.5,x),g.type="sawtooth",w.gain.setValueAtTime(0,x),w.gain.linearRampToValueAtTime(.08,x+.02),w.gain.exponentialRampToValueAtTime(.01,x+S.duration),g.start(x),g.stop(x+S.duration),i.current.push(g)}x+=S.duration}),o.current=setTimeout(()=>{s.current||d()},x*1e3+500),t(!0),r("energetic-fallback")}catch{}},[a]);return{isPlaying:e,currentTrack:n,startBackgroundMusic:c,startGameMusic:u,stopMusic:a,playCheerfulMelody:h,playEnergeticMelody:d}}const st={DPAD_UP:12,DPAD_DOWN:13,DPAD_LEFT:14,DPAD_RIGHT:15,FACE_BUTTON_BOTTOM:0,FACE_BUTTON_RIGHT:1,FACE_BUTTON_LEFT:2,FACE_BUTTON_TOP:3,BUMPER_LEFT:4,BUMPER_RIGHT:5,TRIGGER_LEFT:6,TRIGGER_RIGHT:7,BUTTON_BACK:8,BUTTON_START:9,STICK_LEFT:10,STICK_RIGHT:11},vb=(e=null)=>{const[t,n]=y.useState([]),[r,s]=y.useState(!1),i=y.useRef({}),o=y.useRef(100),a=y.useRef({}),c=y.useRef({}),u=y.useRef(200);y.useEffect(()=>{const v=b=>{n(p=>[...p,b.gamepad]),s(!0),b.gamepad.vibrationActuator&&b.gamepad.vibrationActuator.playEffect("dual-rumble",{duration:200,strongMagnitude:.5,weakMagnitude:.5})},x=b=>{n(m=>m.filter(g=>g.id!==b.gamepad.id));const p=navigator.getGamepads().filter(m=>m&&m.connected);s(p.length>0)};return window.addEventListener("gamepadconnected",v),window.addEventListener("gamepaddisconnected",x),(()=>{const b=navigator.getGamepads(),p=Array.from(b).filter(m=>m&&m.connected);p.length>0&&(n(p),s(!0))})(),()=>{window.removeEventListener("gamepadconnected",v),window.removeEventListener("gamepaddisconnected",x)}},[]);const h=y.useCallback((v,x,S=.3)=>Math.abs(v)<S&&Math.abs(x)<S?null:Math.abs(v)>Math.abs(x)?v>0?"right":"left":x>0?"down":"up",[]),d=y.useCallback(()=>{var X,q,B;if(!r||!e)return;const v=navigator.getGamepads(),x=Array.from(v).find(G=>G&&G.connected);if(!x)return;const S=Date.now(),{movePiece:b,rotatePiece:p,rotatePieceLeft:m,hardDrop:g,holdPiece:w,pause:k}=e;if(!b)return;const j=(G,R)=>{const te=`movement_${G}`,_=i.current[te]||0,M=c.current[te]||!1;if(R&&!M){c.current[te]=!0,i.current[te]=S,C(G);return}if(R&&M){const O=u.current,V=o.current,Y=_===i.current[te]&&S-_>=O?O:V;S-_>=Y&&(i.current[te]=S,C(G));return}!R&&M&&(c.current[te]=!1)},C=G=>{e.movePiece&&e.movePiece(G)},P=((X=x.buttons[st.DPAD_LEFT])==null?void 0:X.pressed)||h(x.axes[0],x.axes[1])==="left",E=((q=x.buttons[st.DPAD_RIGHT])==null?void 0:q.pressed)||h(x.axes[0],x.axes[1])==="right",A=((B=x.buttons[st.DPAD_DOWN])==null?void 0:B.pressed)||h(x.axes[0],x.axes[1])==="down";j("left",P),j("right",E),j("down",A);const H={};[{button:st.DPAD_UP,action:()=>g==null?void 0:g()},{button:st.FACE_BUTTON_BOTTOM,action:()=>p==null?void 0:p()},{button:st.FACE_BUTTON_RIGHT,action:()=>m==null?void 0:m()},{button:st.FACE_BUTTON_LEFT,action:()=>p==null?void 0:p()},{button:st.FACE_BUTTON_TOP,action:()=>p==null?void 0:p()},{button:st.BUMPER_LEFT,action:()=>w==null?void 0:w()},{button:st.BUMPER_RIGHT,action:()=>w==null?void 0:w()},{button:st.BUTTON_START,action:()=>k==null?void 0:k()}].forEach(({button:G,action:R})=>{var M;const te=(M=x.buttons[G])==null?void 0:M.pressed,_=a.current[G];if(H[G]=te,te&&!_&&(R(),x.vibrationActuator)){const O=G===st.DPAD_UP?.3:.1;x.vibrationActuator.playEffect("dual-rumble",{duration:50,strongMagnitude:O,weakMagnitude:O*.5})}}),a.current=H},[r,h,e]),f=y.useCallback(()=>{const v=navigator.getGamepads(),x=Array.from(v).find(S=>S&&S.connected);return x?{id:x.id,index:x.index,connected:x.connected,buttonsCount:x.buttons.length,axesCount:x.axes.length}:null},[]);return{isGamepadActive:r,connectedGamepads:t,processGamepadInput:d,getGamepadInfo:f,controllerCount:t.length}};function yb(){const[e,t]=y.useState(null),[n,r]=y.useState(!0);y.useEffect(()=>{try{const o=F.resolve("playerStatsService");t(o.getStats()),r(!1);const a=()=>{try{const c=F.resolve("statisticsService"),h=F.resolve("gameService").getGameState(),d=c.getStats(),f={score:h.score.points,level:h.score.level,linesCleared:d.linesCleared,piecesPlaced:d.piecesPlaced,tSpins:d.tSpins,backToBack:d.backToBack,maxCombo:d.maxCombo,playTime:d.playTime};o.updateAfterGame(f),t(o.getStats()),window.dispatchEvent(new Event("playerStatsUpdated"))}catch{}};return L.on(I.GAME_OVER,a),()=>{L.off(I.GAME_OVER,a)}}catch{r(!1)}},[]);const s=y.useCallback((o,a)=>{try{const c=F.resolve("playerStatsService"),u=c.updateRecord(o,a);return u&&(t(c.getStats()),window.dispatchEvent(new Event("playerStatsUpdated"))),u}catch{return!1}},[]),i=y.useCallback((o,a=1)=>{try{const c=F.resolve("playerStatsService");c.incrementStat(o,a),t(c.getStats()),window.dispatchEvent(new Event("playerStatsUpdated"))}catch{}},[]);return{playerStats:e,loading:n,updateRecord:s,incrementStat:i}}const xb=({isConnected:e,controllerCount:t,gamepadInfo:n,className:r=""})=>{const[s,i]=y.useState(!1);return e?l.jsx("div",{className:`fixed top-4 right-4 z-50 ${r}`,children:l.jsxs(T.div,{initial:{opacity:0,scale:.8,x:20},animate:{opacity:1,scale:1,x:0},exit:{opacity:0,scale:.8,x:20},transition:{duration:.3},className:"bg-gray-900/90 backdrop-blur-sm text-white p-3 rounded-lg border border-green-500/30 shadow-lg",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(T.div,{animate:{rotate:[0,-10,10,-10,0],scale:[1,1.1,1]},transition:{duration:2,repeat:1/0,repeatDelay:3},children:""}),l.jsxs("div",{className:"text-sm",children:[l.jsxs("div",{className:"text-green-400 font-semibold",children:[t," Controle",t!==1?"s":""," Conectado",t!==1?"s":""]}),l.jsx("div",{className:"text-gray-300 text-xs",children:"Pronto para jogar!"})]}),l.jsx(T.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>i(!s),className:"ml-2 text-gray-400 hover:text-white transition-colors",title:"Mostrar controles",children:l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"})})})]}),l.jsx(me,{children:s&&l.jsx(T.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},className:"mt-3 pt-3 border-t border-gray-700",children:l.jsxs("div",{className:"text-xs text-gray-300 space-y-1",children:[l.jsx("div",{className:"font-semibold text-white mb-2",children:" Controles:"}),l.jsxs("div",{className:"grid grid-cols-2 gap-1 text-xs",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-yellow-400",children:"D-Pad  "}),l.jsx("div",{className:"text-gray-400",children:"Mover"})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-yellow-400",children:"D-Pad "}),l.jsx("div",{className:"text-gray-400",children:"Acelerar"})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-yellow-400",children:"D-Pad "}),l.jsx("div",{className:"text-gray-400",children:"Hard Drop"})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-yellow-400",children:"A/B/X/Y"}),l.jsx("div",{className:"text-gray-400",children:"Girar"})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-yellow-400",children:"L/R"}),l.jsx("div",{className:"text-gray-400",children:"Guardar"})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-yellow-400",children:"Start"}),l.jsx("div",{className:"text-gray-400",children:"Pausar"})]})]}),l.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-700",children:[l.jsx("div",{className:"text-green-400 text-xs",children:" Analog Stick Esquerdo tambm funciona!"}),l.jsx("div",{className:"text-blue-400 text-xs",children:" Gatilhos L2/R2 para rotao"})]}),n&&n.length>0&&l.jsx("div",{className:"mt-2 pt-2 border-t border-gray-700",children:l.jsx("div",{className:"text-xs text-gray-400",children:n.map((o,a)=>l.jsxs("div",{className:"mb-1",children:[l.jsxs("div",{className:"font-semibold text-white",children:["Controle ",o.index+1,":"]}),l.jsx("div",{className:"text-gray-300 truncate",children:o.id.length>30?o.id.substring(0,30)+"...":o.id}),l.jsxs("div",{className:"flex gap-2 text-xs",children:[l.jsxs("span",{className:"text-blue-400",children:[o.buttons," botes"]}),l.jsxs("span",{className:"text-green-400",children:[o.axes," eixos"]}),o.vibration&&l.jsx("span",{className:"text-purple-400",children:" Vibrao"})]})]},a))})})]})})})]})}):null};function wb(){const[e,t]=y.useState(!1),[n,r]=y.useState([]),[s,i]=y.useState("all"),[o,a]=y.useState(0);y.useEffect(()=>{const v=()=>{const S=Le.getCurrentSessionLogs();r(S),a(S.filter(b=>b.level==="error").length)};v();const x=setInterval(v,2e3);return()=>clearInterval(x)},[]),y.useEffect(()=>{const v=x=>{x.ctrlKey&&x.shiftKey&&x.key==="D"&&(x.preventDefault(),t(S=>!S))};return window.addEventListener("keydown",v),()=>window.removeEventListener("keydown",v)},[]);const c=s==="all"?n:n.filter(v=>v.level===s),u=()=>{Le.saveForExternalAccess(),Le.downloadLogs()},h=()=>{Le.clearLogs(),r([]),a(0)},d={error:"",warn:"",info:"",action:""},f={error:"text-red-400 bg-red-900/30",warn:"text-yellow-400 bg-yellow-900/30",info:"text-blue-400 bg-blue-900/30",action:"text-green-400 bg-green-900/30"};return l.jsxs(l.Fragment,{children:[l.jsxs("button",{onClick:()=>t(!e),className:`fixed bottom-4 left-4 z-[9999] bg-gray-900/90 hover:bg-gray-800
                   text-white rounded-full w-10 h-10 flex items-center justify-center
                   border border-gray-600 shadow-lg transition-all`,title:"Debug Panel (Ctrl+Shift+D)",children:[l.jsx("span",{className:"text-lg",children:""}),o>0&&l.jsx("span",{className:`absolute -top-1 -right-1 bg-red-500 text-white text-xs
                          rounded-full w-5 h-5 flex items-center justify-center font-bold`,children:o>99?"99+":o})]}),l.jsx(me,{children:e&&l.jsxs(T.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:50},className:`fixed bottom-16 left-4 z-[9999] w-[500px] max-w-[90vw] max-h-[70vh]
                       bg-gray-900/95 backdrop-blur-sm border border-gray-600 rounded-xl
                       shadow-2xl flex flex-col overflow-hidden`,children:[l.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-b border-gray-700 bg-gray-800/50",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-lg",children:""}),l.jsx("span",{className:"text-white font-bold text-sm",children:"Debug Log"}),l.jsxs("span",{className:"text-gray-400 text-xs",children:["(",c.length," entries)"]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:u,className:"text-xs bg-blue-600 hover:bg-blue-500 text-white px-2 py-1 rounded",title:"Exportar logs para arquivo JSON",children:" Exportar"}),l.jsx("button",{onClick:h,className:"text-xs bg-red-600 hover:bg-red-500 text-white px-2 py-1 rounded",title:"Limpar todos os logs",children:" Limpar"}),l.jsx("button",{onClick:()=>t(!1),className:"text-gray-400 hover:text-white text-xl leading-none",children:""})]})]}),l.jsx("div",{className:"flex gap-1 px-4 py-2 border-b border-gray-700",children:["all","error","warn","info","action"].map(v=>l.jsxs("button",{onClick:()=>i(v),className:`text-xs px-2 py-1 rounded transition-colors ${s===v?"bg-white/20 text-white":"text-gray-400 hover:text-white hover:bg-white/10"}`,children:[v==="all"?" Todos":`${d[v]} ${v}`,v==="error"&&o>0&&l.jsxs("span",{className:"ml-1 text-red-400",children:["(",o,")"]})]},v))}),l.jsx("div",{className:"flex-1 overflow-y-auto px-2 py-1 space-y-1 font-mono text-xs",children:c.length===0?l.jsx("div",{className:"text-gray-500 text-center py-8",children:s==="error"?" Nenhum erro registrado!":"Nenhum log ainda."}):[...c].reverse().map(v=>l.jsx(Sb,{entry:v,levelIcon:d,levelColor:f},v.id))}),l.jsxs("div",{className:"px-4 py-1 border-t border-gray-700 text-gray-500 text-xs flex justify-between",children:[l.jsxs("span",{children:["Session: ",Le.sessionId.slice(-8)]}),l.jsx("span",{children:"Ctrl+Shift+D para toggle"})]})]})})]})}function Sb({entry:e,levelIcon:t,levelColor:n}){const[r,s]=y.useState(!1),i=new Date(e.timestamp).toLocaleTimeString();return l.jsxs("div",{className:`rounded px-2 py-1 cursor-pointer hover:bg-white/5 ${n[e.level]||"text-gray-300"}`,onClick:()=>s(!r),children:[l.jsxs("div",{className:"flex items-start gap-1",children:[l.jsx("span",{className:"flex-shrink-0",children:t[e.level]||""}),l.jsxs("span",{className:"text-gray-500 flex-shrink-0",children:["[",i,"]"]}),l.jsx("span",{className:"text-white/70 flex-shrink-0",children:e.source}),l.jsx("span",{className:"text-gray-600",children:"."}),l.jsx("span",{className:"text-purple-300 flex-shrink-0",children:e.action}),l.jsx("span",{className:"text-gray-300 truncate",children:e.message})]}),r&&l.jsxs("div",{className:"mt-1 ml-6 space-y-1",children:[e.details&&l.jsxs("div",{className:"text-gray-400 bg-black/30 rounded p-1 overflow-x-auto",children:[l.jsx("div",{className:"text-gray-500 text-[10px] uppercase",children:"Details:"}),l.jsx("pre",{className:"whitespace-pre-wrap break-all",children:typeof e.details=="string"?e.details:JSON.stringify(e.details,null,2)})]}),e.gameState&&l.jsxs("div",{className:"text-gray-400 bg-black/30 rounded p-1 overflow-x-auto",children:[l.jsx("div",{className:"text-gray-500 text-[10px] uppercase",children:"Game State:"}),l.jsx("pre",{className:"whitespace-pre-wrap break-all",children:JSON.stringify(e.gameState,null,2)})]})]})]})}const bb=y.lazy(()=>bm(()=>import("./SettingsMenu-c9061662.js"),[]));function kb(){return l.jsx("div",{className:"flex items-center justify-center p-8",children:l.jsx(T.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"text-4xl",children:""})})}function jb({gameState:e,actions:t,onBackToMenu:n,isGamepadActive:r,controllerCount:s,getGamepadInfo:i}){var f,v,x,S,b,p;const o=ce.useMemo(()=>{if(!(e!=null&&e.currentPiece)||e!=null&&e.gameOver||e!=null&&e.isPaused)return null;try{return t.getDropPreview()}catch{return null}},[(v=(f=e==null?void 0:e.currentPiece)==null?void 0:f.position)==null?void 0:v.x,(S=(x=e==null?void 0:e.currentPiece)==null?void 0:x.position)==null?void 0:S.y,(b=e==null?void 0:e.currentPiece)==null?void 0:b.type,(p=e==null?void 0:e.currentPiece)==null?void 0:p.shape,e==null?void 0:e.gameOver,e==null?void 0:e.isPaused]),[a,c]=ce.useState({hardDrop:!1,hold:!1,pause:!1}),u=ce.useCallback(()=>{a.hardDrop||e!=null&&e.gameOver||(t.hardDrop(),c(m=>({...m,hardDrop:!0})),setTimeout(()=>{c(m=>({...m,hardDrop:!1}))},300))},[t,a.hardDrop,e==null?void 0:e.gameOver]),h=ce.useCallback(()=>{a.hold||e!=null&&e.gameOver||!(e!=null&&e.canHold)||(t.holdPiece(),c(m=>({...m,hold:!0})),setTimeout(()=>{c(m=>({...m,hold:!1}))},500))},[t,a.hold,e==null?void 0:e.gameOver,e==null?void 0:e.canHold]),d=ce.useCallback(()=>{a.pause||e!=null&&e.gameOver||(e!=null&&e.isPaused?t.resume():t.pause(),c(m=>({...m,pause:!0})),setTimeout(()=>{c(m=>({...m,pause:!1}))},300))},[t,a.pause,e==null?void 0:e.gameOver,e==null?void 0:e.isPaused]);return l.jsxs("div",{className:"h-screen cat-bg flex flex-col overflow-hidden",children:[l.jsxs("div",{className:"flex items-center justify-between px-3 py-1.5 bg-black/30 backdrop-blur-sm border-b border-white/10 shrink-0",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(T.button,{onClick:n,whileHover:{scale:1.05},whileTap:{scale:.95},className:"bg-white/15 hover:bg-white/25 text-white p-1.5 rounded-lg transition-colors",title:"Voltar ao Menu",children:l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"})})}),l.jsx("span",{className:"text-white font-bold text-sm",children:" Cat Tetris"})]}),l.jsxs("div",{className:"flex items-center gap-3 text-xs text-white/70",children:[l.jsxs("span",{className:"text-yellow-400 font-bold",children:[e.score.points.toLocaleString()," pts"]}),l.jsxs("span",{children:["Nv.",e.score.level]}),l.jsxs("span",{children:[e.score.lines," linhas"]})]}),l.jsx("div",{className:"flex items-center gap-1.5",children:l.jsx(T.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:e.isPaused?t.resume:t.pause,disabled:e.gameOver,className:"bg-white/10 hover:bg-white/20 text-white px-2.5 py-1 rounded-lg text-xs transition-colors disabled:opacity-50",children:e.isPaused?"":""})})]}),l.jsxs("div",{className:"flex-1 flex items-center justify-center overflow-hidden p-2",children:[l.jsxs("div",{className:"flex flex-col lg:flex-row gap-2 items-center justify-center",children:[l.jsxs("div",{className:"hidden lg:flex flex-col lg:flex-row gap-2 items-center justify-center",children:[l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx(Pr,{heldPiece:e.heldPiece,canHold:e.canHold}),l.jsx(Cr,{pieces:e.nextPieces})]}),l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx(Fn,{board:e.board,currentPiece:e.currentPiece,dropPreview:o,gameOver:e.gameOver}),l.jsx(Z1,{onMove:t.movePiece,onRotate:t.rotatePiece,onHardDrop:t.hardDrop,onPause:e.isPaused?t.resume:t.pause,onHold:t.holdPiece,isPaused:e.isPaused,gameOver:e.gameOver,canHold:e.canHold})]}),l.jsx("div",{className:"flex flex-col gap-2",children:l.jsx(jr,{score:e.score.points,level:e.score.level,lines:e.score.lines,combo:e.score.combo})})]}),l.jsxs("div",{className:"flex lg:hidden flex-col w-full h-full","data-testid":"mobile-layout",children:[l.jsxs("div",{className:"flex justify-between items-center mb-2 px-2 bg-black/30 rounded-lg mx-2 py-1",children:[l.jsxs("div",{className:"text-white text-sm",children:[l.jsx("span",{className:"text-yellow-400 font-bold",children:e.score.points.toLocaleString()}),l.jsxs("span",{className:"text-white/60 ml-2",children:["Nv.",e.score.level]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[e.heldPiece&&l.jsx("div",{className:"text-xs text-white/60",children:""}),l.jsx("div",{className:"text-xs text-white/60",children:"Prxima:"}),l.jsx("div",{className:"bg-gray-800/50 p-1 rounded",children:e.nextPieces[0]?l.jsx("div",{className:"grid gap-0.5",style:{gridTemplateColumns:`repeat(${Math.max(...e.nextPieces[0].shape.map(m=>m.length))}, 8px)`,gridTemplateRows:`repeat(${e.nextPieces[0].shape.length}, 8px)`},children:e.nextPieces[0].shape.map((m,g)=>m.map((w,k)=>l.jsx("div",{className:"w-2 h-2 rounded-sm",style:{backgroundColor:w?mr(e.nextPieces[0].color):"transparent",border:w?"1px solid rgba(255,255,255,0.3)":"none"},children:w&&e.nextPieces[0].emoji?l.jsx("span",{className:"text-[6px] leading-none block text-center",children:e.nextPieces[0].emoji}):null},`next-${k}-${g}`)))}):l.jsx("div",{className:"w-8 h-6 flex items-center justify-center",children:l.jsx("span",{className:"text-xs text-white/40",children:"?"})})})]})]}),l.jsxs("div",{className:"flex items-center justify-center flex-1 relative px-1",children:[l.jsxs("div",{className:"flex flex-col gap-1 mr-2",children:[l.jsx(T.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onTouchStart:()=>t.rotatePiece(),onClick:()=>t.rotatePiece(),disabled:e.gameOver,className:"bg-blue-500 text-white p-4 rounded-full shadow-lg hover:bg-blue-600 disabled:opacity-50 touch-manipulation text-lg",children:""}),l.jsx(T.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onTouchStart:()=>t.movePiece("left"),onClick:()=>t.movePiece("left"),disabled:e.gameOver,className:"bg-gray-600 text-white p-4 rounded-lg shadow-lg hover:bg-gray-700 disabled:opacity-50 touch-manipulation text-lg",children:""})]}),l.jsx("div",{className:"flex-shrink-0 mx-1",children:l.jsx(Fn,{board:e.board,currentPiece:e.currentPiece,dropPreview:o,gameOver:e.gameOver})}),l.jsxs("div",{className:"flex flex-col gap-1 ml-2",children:[l.jsx(T.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onTouchStart:u,onClick:u,disabled:e.gameOver||a.hardDrop,className:`text-white p-4 rounded-full shadow-lg disabled:opacity-50 touch-manipulation text-lg ${a.hardDrop?"bg-red-400":"bg-red-500 hover:bg-red-600"}`,children:""}),l.jsx(T.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onTouchStart:()=>t.movePiece("right"),onClick:()=>t.movePiece("right"),disabled:e.gameOver,className:"bg-gray-600 text-white p-4 rounded-lg shadow-lg hover:bg-gray-700 disabled:opacity-50 touch-manipulation text-lg",children:""})]})]}),l.jsxs("div",{className:"flex justify-center gap-2 py-2 px-2",children:[l.jsx(T.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onTouchStart:()=>t.movePiece("down"),onClick:()=>t.movePiece("down"),disabled:e.gameOver,className:"bg-gray-700 text-white px-4 py-2 rounded-lg shadow-lg hover:bg-gray-600 disabled:opacity-50 touch-manipulation",children:" Acelerar"}),e.canHold&&l.jsx(T.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onTouchStart:h,onClick:h,disabled:e.gameOver||!e.canHold||a.hold,className:`text-white px-4 py-2 rounded-lg shadow-lg disabled:opacity-50 touch-manipulation ${a.hold?"bg-green-400":e.canHold?"bg-green-600 hover:bg-green-500":"bg-gray-500"}`,children:" Guardar"}),l.jsx(T.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onTouchStart:d,onClick:d,disabled:e.gameOver||a.pause,className:`text-white px-4 py-2 rounded-lg shadow-lg disabled:opacity-50 touch-manipulation ${a.pause?"bg-yellow-400":"bg-yellow-500 hover:bg-yellow-600"}`,children:e.isPaused?"":""})]})]})]}),l.jsx(me,{children:e.gameOver&&l.jsx(tS,{score:e.score,onRestart:t.restart,onBackToMenu:n})}),l.jsx(xb,{isConnected:r,controllerCount:s,gamepadInfo:i()})]})]})}function Cb(){const[e,t]=y.useState("menu"),[n,r]=y.useState(!1),[s,i]=y.useState(!1),[o,a]=y.useState(!1),[c,u]=y.useState(!1),[h,d]=y.useState(!1),[f,v]=y.useState(!1),[x,S]=y.useState(!1),[b,p]=y.useState(!1),[m,g]=y.useState(!1),[w,k]=y.useState(!0),[j,C]=y.useState(!1),[P,E]=y.useState(null),[A,H]=y.useState(null),[X,q]=y.useState(!1),{gameState:B,actions:G}=hb();ce.useEffect(()=>{Le.setGameStateProvider(()=>{try{return F.resolve("gameService").getGameState()}catch{return null}})},[]);const{settings:R,updateSettings:te}=fb(),{startBackgroundMusic:_,startGameMusic:M,stopMusic:O}=gb(),{isGamepadActive:V,controllerCount:Y,processGamepadInput:Qe,getGamepadInfo:Re}=vb(G);qp(),Xp(),yb(),Yp(),Jp(),pb();const ht=e==="game",{setDAS:$,setARR:J}=Zp(G,B,ht);ce.useEffect(()=>{(R==null?void 0:R.das)!=null&&$(R.das),(R==null?void 0:R.arr)!=null&&J(R.arr)},[R==null?void 0:R.das,R==null?void 0:R.arr,$,J]),ce.useEffect(()=>{const Z=Ie=>{try{F.resolve("gameService").setGameMode(Ie.detail.mode)}catch{}};return window.addEventListener("gameModeChanged",Z),()=>window.removeEventListener("gameModeChanged",Z)},[]),ce.useEffect(()=>{B&&!B.gameOver&&B.score.points>0&&B.isPlaying?u(!0):u(!1)},[B]),ce.useEffect(()=>(_&&O&&(R!=null&&R.soundEnabled)?e==="menu"?_():e==="game"&&M():O(),()=>{O()}),[e,R==null?void 0:R.soundEnabled,_,M,O]),ce.useEffect(()=>{if(V&&e==="game"){const Z=setInterval(()=>{Qe()},16);return()=>clearInterval(Z)}},[V,e,Qe]),ce.useEffect(()=>{const Z=je=>{je.preventDefault(),a(!0)},Ie=()=>{a(!1),i(!1)};return window.addEventListener("beforeinstallprompt",Z),window.addEventListener("appinstalled",Ie),window.matchMedia("(display-mode: standalone)").matches&&a(!1),()=>{window.removeEventListener("beforeinstallprompt",Z),window.removeEventListener("appinstalled",Ie)}},[]);const ve=Z=>{te(Z),Z.das!=null&&$(Z.das),Z.arr!=null&&J(Z.arr),Z.soundEnabled?e==="menu"?_==null||_():e==="game"&&(M==null||M()):O==null||O()},K=()=>{t("game"),R!=null&&R.soundEnabled&&(M==null||M()),B!=null&&B.gameOver?G.restart():B!=null&&B.isPaused?G.resume():B!=null&&B.isPlaying||G.restart()},U=()=>{t("game"),R!=null&&R.soundEnabled&&(M==null||M()),B!=null&&B.isPaused&&G.resume()},He=()=>{t("game"),R!=null&&R.soundEnabled&&(M==null||M()),G.restart()},Rr=()=>{t("menu"),R!=null&&R.soundEnabled&&(_==null||_()),B&&!B.gameOver&&G.pause()},Bs=()=>{i(!0)};return X?l.jsx(XS,{onClose:()=>q(!1)}):A?l.jsx(WS,{mode:A.mode,aiDifficulty:A.aiDifficulty,ai1Difficulty:A.ai1Difficulty,ai2Difficulty:A.ai2Difficulty,onExit:()=>{H(null),t("menu")}}):e==="menu"?l.jsxs(l.Fragment,{children:[l.jsx(BS,{onStartGame:c?U:K,onNewGame:He,onShowSettings:()=>r(!0),onShowGameModes:()=>p(!0),onShowShop:()=>S(!0),onShowMissions:()=>d(!0),onShowAchievements:()=>v(!0),onShowMultiplayer:()=>g(!0),onShowTutorial:()=>k(!0),onShowTutorialHub:()=>C(!0),onShowAIShowcase:()=>q(!0),onShowInstallPrompt:Bs,canInstallPWA:o,hasActiveGame:c,gameState:B}),l.jsx(me,{children:m&&l.jsx(tb,{onClose:()=>g(!1),onStartMatch:Z=>{g(!1),H(Z)}})}),l.jsx(me,{children:b&&l.jsx(JS,{onClose:()=>p(!1),onStartGame:He})}),l.jsx(me,{children:x&&l.jsx(YS,{onClose:()=>S(!1)})}),l.jsx(me,{children:h&&l.jsx(US,{onClose:()=>d(!1)})}),l.jsx(me,{children:f&&l.jsx(GS,{onClose:()=>v(!1)})}),l.jsx(me,{children:j&&l.jsx(ub,{tutorialService:F.resolve("tutorialService"),onClose:()=>C(!1),onLessonComplete:Z=>{if(!(!Z||!Z.rewards)){try{const Ie=F.resolve("currencyService");Z.rewards.fishCoins&&Ie.addFish(Z.rewards.fishCoins,`Tutorial: ${Z.lessonTitle||"Lesson"}`)}catch{}try{Z.rewards.xp&&F.resolve("playerStatsService").incrementStat("totalPlayTime",Z.rewards.xp)}catch{}try{if(Z.rewards.achievement){const Ie=F.resolve("achievementsService"),je=F.resolve("playerStatsService");Ie.checkAchievements(je.getStats())}}catch{}E(Z)}}})}),l.jsx(me,{children:l.jsx(y.Suspense,{fallback:l.jsx(kb,{}),children:l.jsx(bb,{isOpen:n,settings:R||{},onSettingsChange:ve,onClose:()=>r(!1)})})}),s&&l.jsx(zS,{onClose:()=>i(!1)}),l.jsx($S,{}),l.jsx(me,{children:P&&l.jsx(db,{reward:P,onClose:()=>E(null)})})]}):B?l.jsxs(l.Fragment,{children:[l.jsx(jb,{gameState:B,actions:G,onBackToMenu:Rr,isGamepadActive:V,controllerCount:Y,getGamepadInfo:Re}),l.jsx(me,{children:w&&l.jsx(nb,{onComplete:()=>k(!1)})})]}):l.jsx("div",{className:"h-screen cat-bg flex items-center justify-center overflow-hidden",children:l.jsx("div",{className:"text-white text-xl",children:"Carregando..."})})}function Pb(){return l.jsxs(iS,{children:[l.jsx(Cb,{}),l.jsx(HS,{}),l.jsx(wb,{})]})}xa.createRoot(document.getElementById("root")).render(l.jsx(Pb,{}));export{me as A,l as j,T as m,y as r};
