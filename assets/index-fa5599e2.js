var V0=Object.defineProperty;var B0=(e,t,n)=>t in e?V0(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Zs=(e,t,n)=>(B0(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function H0(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Bh={exports:{}},xo={},Hh={exports:{}},ne={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Us=Symbol.for("react.element"),z0=Symbol.for("react.portal"),U0=Symbol.for("react.fragment"),$0=Symbol.for("react.strict_mode"),q0=Symbol.for("react.profiler"),W0=Symbol.for("react.provider"),K0=Symbol.for("react.context"),Q0=Symbol.for("react.forward_ref"),X0=Symbol.for("react.suspense"),J0=Symbol.for("react.memo"),Y0=Symbol.for("react.lazy"),gu=Symbol.iterator;function Z0(e){return e===null||typeof e!="object"?null:(e=gu&&e[gu]||e["@@iterator"],typeof e=="function"?e:null)}var zh={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Uh=Object.assign,$h={};function zr(e,t,n){this.props=e,this.context=t,this.refs=$h,this.updater=n||zh}zr.prototype.isReactComponent={};zr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};zr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function qh(){}qh.prototype=zr.prototype;function ql(e,t,n){this.props=e,this.context=t,this.refs=$h,this.updater=n||zh}var Wl=ql.prototype=new qh;Wl.constructor=ql;Uh(Wl,zr.prototype);Wl.isPureReactComponent=!0;var vu=Array.isArray,Wh=Object.prototype.hasOwnProperty,Kl={current:null},Kh={key:!0,ref:!0,__self:!0,__source:!0};function Qh(e,t,n){var r,s={},i=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)Wh.call(t,r)&&!Kh.hasOwnProperty(r)&&(s[r]=t[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var c=Array(a),u=0;u<a;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Us,type:e,key:i,ref:o,props:s,_owner:Kl.current}}function eg(e,t){return{$$typeof:Us,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Ql(e){return typeof e=="object"&&e!==null&&e.$$typeof===Us}function tg(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var yu=/\/+/g;function qo(e,t){return typeof e=="object"&&e!==null&&e.key!=null?tg(""+e.key):t.toString(36)}function Ci(e,t,n,r,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Us:case z0:o=!0}}if(o)return o=e,s=s(o),e=r===""?"."+qo(o,0):r,vu(s)?(n="",e!=null&&(n=e.replace(yu,"$&/")+"/"),Ci(s,t,n,"",function(u){return u})):s!=null&&(Ql(s)&&(s=eg(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(yu,"$&/")+"/")+e)),t.push(s)),1;if(o=0,r=r===""?".":r+":",vu(e))for(var a=0;a<e.length;a++){i=e[a];var c=r+qo(i,a);o+=Ci(i,t,n,c,s)}else if(c=Z0(e),typeof c=="function")for(e=c.call(e),a=0;!(i=e.next()).done;)i=i.value,c=r+qo(i,a++),o+=Ci(i,t,n,c,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function ei(e,t,n){if(e==null)return e;var r=[],s=0;return Ci(e,r,"","",function(i){return t.call(n,i,s++)}),r}function ng(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var $e={current:null},ki={transition:null},rg={ReactCurrentDispatcher:$e,ReactCurrentBatchConfig:ki,ReactCurrentOwner:Kl};function Xh(){throw Error("act(...) is not supported in production builds of React.")}ne.Children={map:ei,forEach:function(e,t,n){ei(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return ei(e,function(){t++}),t},toArray:function(e){return ei(e,function(t){return t})||[]},only:function(e){if(!Ql(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ne.Component=zr;ne.Fragment=U0;ne.Profiler=q0;ne.PureComponent=ql;ne.StrictMode=$0;ne.Suspense=X0;ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rg;ne.act=Xh;ne.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Uh({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=Kl.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(c in t)Wh.call(t,c)&&!Kh.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&a!==void 0?a[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var u=0;u<c;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Us,type:e.type,key:s,ref:i,props:r,_owner:o}};ne.createContext=function(e){return e={$$typeof:K0,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:W0,_context:e},e.Consumer=e};ne.createElement=Qh;ne.createFactory=function(e){var t=Qh.bind(null,e);return t.type=e,t};ne.createRef=function(){return{current:null}};ne.forwardRef=function(e){return{$$typeof:Q0,render:e}};ne.isValidElement=Ql;ne.lazy=function(e){return{$$typeof:Y0,_payload:{_status:-1,_result:e},_init:ng}};ne.memo=function(e,t){return{$$typeof:J0,type:e,compare:t===void 0?null:t}};ne.startTransition=function(e){var t=ki.transition;ki.transition={};try{e()}finally{ki.transition=t}};ne.unstable_act=Xh;ne.useCallback=function(e,t){return $e.current.useCallback(e,t)};ne.useContext=function(e){return $e.current.useContext(e)};ne.useDebugValue=function(){};ne.useDeferredValue=function(e){return $e.current.useDeferredValue(e)};ne.useEffect=function(e,t){return $e.current.useEffect(e,t)};ne.useId=function(){return $e.current.useId()};ne.useImperativeHandle=function(e,t,n){return $e.current.useImperativeHandle(e,t,n)};ne.useInsertionEffect=function(e,t){return $e.current.useInsertionEffect(e,t)};ne.useLayoutEffect=function(e,t){return $e.current.useLayoutEffect(e,t)};ne.useMemo=function(e,t){return $e.current.useMemo(e,t)};ne.useReducer=function(e,t,n){return $e.current.useReducer(e,t,n)};ne.useRef=function(e){return $e.current.useRef(e)};ne.useState=function(e){return $e.current.useState(e)};ne.useSyncExternalStore=function(e,t,n){return $e.current.useSyncExternalStore(e,t,n)};ne.useTransition=function(){return $e.current.useTransition()};ne.version="18.3.1";Hh.exports=ne;var v=Hh.exports;const ae=H0(v);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sg=v,ig=Symbol.for("react.element"),og=Symbol.for("react.fragment"),ag=Object.prototype.hasOwnProperty,lg=sg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,cg={key:!0,ref:!0,__self:!0,__source:!0};function Jh(e,t,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)ag.call(t,r)&&!cg.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:ig,type:e,key:i,ref:o,props:s,_owner:lg.current}}xo.Fragment=og;xo.jsx=Jh;xo.jsxs=Jh;Bh.exports=xo;var l=Bh.exports,Ra={},Yh={exports:{}},it={},Zh={exports:{}},em={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(R,z){var F=R.length;R.push(z);e:for(;0<F;){var U=F-1>>>1,K=R[U];if(0<s(K,z))R[U]=z,R[F]=K,F=U;else break e}}function n(R){return R.length===0?null:R[0]}function r(R){if(R.length===0)return null;var z=R[0],F=R.pop();if(F!==z){R[0]=F;e:for(var U=0,K=R.length,$=K>>>1;U<$;){var X=2*(U+1)-1,Z=R[X],J=X+1,he=R[J];if(0>s(Z,F))J<K&&0>s(he,Z)?(R[U]=he,R[J]=F,U=J):(R[U]=Z,R[X]=F,U=X);else if(J<K&&0>s(he,F))R[U]=he,R[J]=F,U=J;else break e}}return z}function s(R,z){var F=R.sortIndex-z.sortIndex;return F!==0?F:R.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var c=[],u=[],h=1,d=null,m=3,g=!1,x=!1,b=!1,k=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,f=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(R){for(var z=n(u);z!==null;){if(z.callback===null)r(u);else if(z.startTime<=R)r(u),z.sortIndex=z.expirationTime,t(c,z);else break;z=n(u)}}function w(R){if(b=!1,y(R),!x)if(n(c)!==null)x=!0,O(S);else{var z=n(u);z!==null&&Q(w,z.startTime-R)}}function S(R,z){x=!1,b&&(b=!1,p(T),T=-1),g=!0;var F=m;try{for(y(z),d=n(c);d!==null&&(!(d.expirationTime>z)||R&&!L());){var U=d.callback;if(typeof U=="function"){d.callback=null,m=d.priorityLevel;var K=U(d.expirationTime<=z);z=e.unstable_now(),typeof K=="function"?d.callback=K:d===n(c)&&r(c),y(z)}else r(c);d=n(c)}if(d!==null)var $=!0;else{var X=n(u);X!==null&&Q(w,X.startTime-z),$=!1}return $}finally{d=null,m=F,g=!1}}var C=!1,P=null,T=-1,j=5,E=-1;function L(){return!(e.unstable_now()-E<j)}function A(){if(P!==null){var R=e.unstable_now();E=R;var z=!0;try{z=P(!0,R)}finally{z?N():(C=!1,P=null)}}else C=!1}var N;if(typeof f=="function")N=function(){f(A)};else if(typeof MessageChannel<"u"){var _=new MessageChannel,se=_.port2;_.port1.onmessage=A,N=function(){se.postMessage(null)}}else N=function(){k(A,0)};function O(R){P=R,C||(C=!0,N())}function Q(R,z){T=k(function(){R(e.unstable_now())},z)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(R){R.callback=null},e.unstable_continueExecution=function(){x||g||(x=!0,O(S))},e.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<R?Math.floor(1e3/R):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(R){switch(m){case 1:case 2:case 3:var z=3;break;default:z=m}var F=m;m=z;try{return R()}finally{m=F}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(R,z){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var F=m;m=R;try{return z()}finally{m=F}},e.unstable_scheduleCallback=function(R,z,F){var U=e.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?U+F:U):F=U,R){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=F+K,R={id:h++,callback:z,priorityLevel:R,startTime:F,expirationTime:K,sortIndex:-1},F>U?(R.sortIndex=F,t(u,R),n(c)===null&&R===n(u)&&(b?(p(T),T=-1):b=!0,Q(w,F-U))):(R.sortIndex=K,t(c,R),x||g||(x=!0,O(S))),R},e.unstable_shouldYield=L,e.unstable_wrapCallback=function(R){var z=m;return function(){var F=m;m=z;try{return R.apply(this,arguments)}finally{m=F}}}})(em);Zh.exports=em;var ug=Zh.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dg=v,rt=ug;function D(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var tm=new Set,Cs={};function nr(e,t){Lr(e,t),Lr(e+"Capture",t)}function Lr(e,t){for(Cs[e]=t,e=0;e<t.length;e++)tm.add(t[e])}var qt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ia=Object.prototype.hasOwnProperty,hg=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,xu={},wu={};function mg(e){return Ia.call(wu,e)?!0:Ia.call(xu,e)?!1:hg.test(e)?wu[e]=!0:(xu[e]=!0,!1)}function fg(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function pg(e,t,n,r){if(t===null||typeof t>"u"||fg(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function qe(e,t,n,r,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var De={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){De[e]=new qe(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];De[t]=new qe(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){De[e]=new qe(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){De[e]=new qe(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){De[e]=new qe(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){De[e]=new qe(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){De[e]=new qe(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){De[e]=new qe(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){De[e]=new qe(e,5,!1,e.toLowerCase(),null,!1,!1)});var Xl=/[\-:]([a-z])/g;function Jl(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Xl,Jl);De[t]=new qe(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Xl,Jl);De[t]=new qe(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Xl,Jl);De[t]=new qe(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){De[e]=new qe(e,1,!1,e.toLowerCase(),null,!1,!1)});De.xlinkHref=new qe("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){De[e]=new qe(e,1,!1,e.toLowerCase(),null,!0,!0)});function Yl(e,t,n,r){var s=De.hasOwnProperty(t)?De[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(pg(t,n,s,r)&&(n=null),r||s===null?mg(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Jt=dg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ti=Symbol.for("react.element"),lr=Symbol.for("react.portal"),cr=Symbol.for("react.fragment"),Zl=Symbol.for("react.strict_mode"),Oa=Symbol.for("react.profiler"),nm=Symbol.for("react.provider"),rm=Symbol.for("react.context"),ec=Symbol.for("react.forward_ref"),Ga=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),tc=Symbol.for("react.memo"),nn=Symbol.for("react.lazy"),sm=Symbol.for("react.offscreen"),bu=Symbol.iterator;function Wr(e){return e===null||typeof e!="object"?null:(e=bu&&e[bu]||e["@@iterator"],typeof e=="function"?e:null)}var ye=Object.assign,Wo;function ss(e){if(Wo===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Wo=t&&t[1]||""}return`
`+Wo+e}var Ko=!1;function Qo(e,t){if(!e||Ko)return"";Ko=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var c=`
`+s[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=a);break}}}finally{Ko=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?ss(e):""}function gg(e){switch(e.tag){case 5:return ss(e.type);case 16:return ss("Lazy");case 13:return ss("Suspense");case 19:return ss("SuspenseList");case 0:case 2:case 15:return e=Qo(e.type,!1),e;case 11:return e=Qo(e.type.render,!1),e;case 1:return e=Qo(e.type,!0),e;default:return""}}function Va(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case cr:return"Fragment";case lr:return"Portal";case Oa:return"Profiler";case Zl:return"StrictMode";case Ga:return"Suspense";case Fa:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case rm:return(e.displayName||"Context")+".Consumer";case nm:return(e._context.displayName||"Context")+".Provider";case ec:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case tc:return t=e.displayName||null,t!==null?t:Va(e.type)||"Memo";case nn:t=e._payload,e=e._init;try{return Va(e(t))}catch{}}return null}function vg(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Va(t);case 8:return t===Zl?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function bn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function im(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function yg(e){var t=im(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ni(e){e._valueTracker||(e._valueTracker=yg(e))}function om(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=im(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Gi(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ba(e,t){var n=t.checked;return ye({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Su(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=bn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function am(e,t){t=t.checked,t!=null&&Yl(e,"checked",t,!1)}function Ha(e,t){am(e,t);var n=bn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?za(e,t.type,n):t.hasOwnProperty("defaultValue")&&za(e,t.type,bn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Cu(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function za(e,t,n){(t!=="number"||Gi(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var is=Array.isArray;function Pr(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+bn(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Ua(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(D(91));return ye({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ku(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(D(92));if(is(n)){if(1<n.length)throw Error(D(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:bn(n)}}function lm(e,t){var n=bn(t.value),r=bn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Pu(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function cm(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $a(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?cm(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ri,um=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ri=ri||document.createElement("div"),ri.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ri.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ks(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var cs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xg=["Webkit","ms","Moz","O"];Object.keys(cs).forEach(function(e){xg.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),cs[t]=cs[e]})});function dm(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||cs.hasOwnProperty(e)&&cs[e]?(""+t).trim():t+"px"}function hm(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=dm(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var wg=ye({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function qa(e,t){if(t){if(wg[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(D(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(D(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(D(61))}if(t.style!=null&&typeof t.style!="object")throw Error(D(62))}}function Wa(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ka=null;function nc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Qa=null,Tr=null,jr=null;function Tu(e){if(e=Ws(e)){if(typeof Qa!="function")throw Error(D(280));var t=e.stateNode;t&&(t=ko(t),Qa(e.stateNode,e.type,t))}}function mm(e){Tr?jr?jr.push(e):jr=[e]:Tr=e}function fm(){if(Tr){var e=Tr,t=jr;if(jr=Tr=null,Tu(e),t)for(e=0;e<t.length;e++)Tu(t[e])}}function pm(e,t){return e(t)}function gm(){}var Xo=!1;function vm(e,t,n){if(Xo)return e(t,n);Xo=!0;try{return pm(e,t,n)}finally{Xo=!1,(Tr!==null||jr!==null)&&(gm(),fm())}}function Ps(e,t){var n=e.stateNode;if(n===null)return null;var r=ko(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(D(231,t,typeof n));return n}var Xa=!1;if(qt)try{var Kr={};Object.defineProperty(Kr,"passive",{get:function(){Xa=!0}}),window.addEventListener("test",Kr,Kr),window.removeEventListener("test",Kr,Kr)}catch{Xa=!1}function bg(e,t,n,r,s,i,o,a,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(h){this.onError(h)}}var us=!1,Fi=null,Vi=!1,Ja=null,Sg={onError:function(e){us=!0,Fi=e}};function Cg(e,t,n,r,s,i,o,a,c){us=!1,Fi=null,bg.apply(Sg,arguments)}function kg(e,t,n,r,s,i,o,a,c){if(Cg.apply(this,arguments),us){if(us){var u=Fi;us=!1,Fi=null}else throw Error(D(198));Vi||(Vi=!0,Ja=u)}}function rr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function ym(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function ju(e){if(rr(e)!==e)throw Error(D(188))}function Pg(e){var t=e.alternate;if(!t){if(t=rr(e),t===null)throw Error(D(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return ju(s),e;if(i===r)return ju(s),t;i=i.sibling}throw Error(D(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(D(189))}}if(n.alternate!==r)throw Error(D(190))}if(n.tag!==3)throw Error(D(188));return n.stateNode.current===n?e:t}function xm(e){return e=Pg(e),e!==null?wm(e):null}function wm(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=wm(e);if(t!==null)return t;e=e.sibling}return null}var bm=rt.unstable_scheduleCallback,Eu=rt.unstable_cancelCallback,Tg=rt.unstable_shouldYield,jg=rt.unstable_requestPaint,Se=rt.unstable_now,Eg=rt.unstable_getCurrentPriorityLevel,rc=rt.unstable_ImmediatePriority,Sm=rt.unstable_UserBlockingPriority,Bi=rt.unstable_NormalPriority,Ng=rt.unstable_LowPriority,Cm=rt.unstable_IdlePriority,wo=null,Mt=null;function Ag(e){if(Mt&&typeof Mt.onCommitFiberRoot=="function")try{Mt.onCommitFiberRoot(wo,e,void 0,(e.current.flags&128)===128)}catch{}}var bt=Math.clz32?Math.clz32:_g,Mg=Math.log,Lg=Math.LN2;function _g(e){return e>>>=0,e===0?32:31-(Mg(e)/Lg|0)|0}var si=64,ii=4194304;function os(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Hi(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=os(a):(i&=o,i!==0&&(r=os(i)))}else o=n&~s,o!==0?r=os(o):i!==0&&(r=os(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-bt(t),s=1<<n,r|=e[n],t&=~s;return r}function Dg(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Rg(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-bt(i),a=1<<o,c=s[o];c===-1?(!(a&n)||a&r)&&(s[o]=Dg(a,t)):c<=t&&(e.expiredLanes|=a),i&=~a}}function Ya(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function km(){var e=si;return si<<=1,!(si&4194240)&&(si=64),e}function Jo(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function $s(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-bt(t),e[t]=n}function Ig(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-bt(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}function sc(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-bt(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var ie=0;function Pm(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Tm,ic,jm,Em,Nm,Za=!1,oi=[],dn=null,hn=null,mn=null,Ts=new Map,js=new Map,on=[],Og="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Nu(e,t){switch(e){case"focusin":case"focusout":dn=null;break;case"dragenter":case"dragleave":hn=null;break;case"mouseover":case"mouseout":mn=null;break;case"pointerover":case"pointerout":Ts.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":js.delete(t.pointerId)}}function Qr(e,t,n,r,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},t!==null&&(t=Ws(t),t!==null&&ic(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function Gg(e,t,n,r,s){switch(t){case"focusin":return dn=Qr(dn,e,t,n,r,s),!0;case"dragenter":return hn=Qr(hn,e,t,n,r,s),!0;case"mouseover":return mn=Qr(mn,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return Ts.set(i,Qr(Ts.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,js.set(i,Qr(js.get(i)||null,e,t,n,r,s)),!0}return!1}function Am(e){var t=Fn(e.target);if(t!==null){var n=rr(t);if(n!==null){if(t=n.tag,t===13){if(t=ym(n),t!==null){e.blockedOn=t,Nm(e.priority,function(){jm(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Pi(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=el(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Ka=r,n.target.dispatchEvent(r),Ka=null}else return t=Ws(n),t!==null&&ic(t),e.blockedOn=n,!1;t.shift()}return!0}function Au(e,t,n){Pi(e)&&n.delete(t)}function Fg(){Za=!1,dn!==null&&Pi(dn)&&(dn=null),hn!==null&&Pi(hn)&&(hn=null),mn!==null&&Pi(mn)&&(mn=null),Ts.forEach(Au),js.forEach(Au)}function Xr(e,t){e.blockedOn===t&&(e.blockedOn=null,Za||(Za=!0,rt.unstable_scheduleCallback(rt.unstable_NormalPriority,Fg)))}function Es(e){function t(s){return Xr(s,e)}if(0<oi.length){Xr(oi[0],e);for(var n=1;n<oi.length;n++){var r=oi[n];r.blockedOn===e&&(r.blockedOn=null)}}for(dn!==null&&Xr(dn,e),hn!==null&&Xr(hn,e),mn!==null&&Xr(mn,e),Ts.forEach(t),js.forEach(t),n=0;n<on.length;n++)r=on[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<on.length&&(n=on[0],n.blockedOn===null);)Am(n),n.blockedOn===null&&on.shift()}var Er=Jt.ReactCurrentBatchConfig,zi=!0;function Vg(e,t,n,r){var s=ie,i=Er.transition;Er.transition=null;try{ie=1,oc(e,t,n,r)}finally{ie=s,Er.transition=i}}function Bg(e,t,n,r){var s=ie,i=Er.transition;Er.transition=null;try{ie=4,oc(e,t,n,r)}finally{ie=s,Er.transition=i}}function oc(e,t,n,r){if(zi){var s=el(e,t,n,r);if(s===null)aa(e,t,r,Ui,n),Nu(e,r);else if(Gg(s,e,t,n,r))r.stopPropagation();else if(Nu(e,r),t&4&&-1<Og.indexOf(e)){for(;s!==null;){var i=Ws(s);if(i!==null&&Tm(i),i=el(e,t,n,r),i===null&&aa(e,t,r,Ui,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else aa(e,t,r,null,n)}}var Ui=null;function el(e,t,n,r){if(Ui=null,e=nc(r),e=Fn(e),e!==null)if(t=rr(e),t===null)e=null;else if(n=t.tag,n===13){if(e=ym(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ui=e,null}function Mm(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Eg()){case rc:return 1;case Sm:return 4;case Bi:case Ng:return 16;case Cm:return 536870912;default:return 16}default:return 16}}var ln=null,ac=null,Ti=null;function Lm(){if(Ti)return Ti;var e,t=ac,n=t.length,r,s="value"in ln?ln.value:ln.textContent,i=s.length;for(e=0;e<n&&t[e]===s[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===s[i-r];r++);return Ti=s.slice(e,1<r?1-r:void 0)}function ji(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ai(){return!0}function Mu(){return!1}function ot(e){function t(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ai:Mu,this.isPropagationStopped=Mu,this}return ye(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ai)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ai)},persist:function(){},isPersistent:ai}),t}var Ur={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lc=ot(Ur),qs=ye({},Ur,{view:0,detail:0}),Hg=ot(qs),Yo,Zo,Jr,bo=ye({},qs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Jr&&(Jr&&e.type==="mousemove"?(Yo=e.screenX-Jr.screenX,Zo=e.screenY-Jr.screenY):Zo=Yo=0,Jr=e),Yo)},movementY:function(e){return"movementY"in e?e.movementY:Zo}}),Lu=ot(bo),zg=ye({},bo,{dataTransfer:0}),Ug=ot(zg),$g=ye({},qs,{relatedTarget:0}),ea=ot($g),qg=ye({},Ur,{animationName:0,elapsedTime:0,pseudoElement:0}),Wg=ot(qg),Kg=ye({},Ur,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Qg=ot(Kg),Xg=ye({},Ur,{data:0}),_u=ot(Xg),Jg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Yg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Zg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ev(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Zg[e])?!!t[e]:!1}function cc(){return ev}var tv=ye({},qs,{key:function(e){if(e.key){var t=Jg[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ji(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Yg[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cc,charCode:function(e){return e.type==="keypress"?ji(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ji(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),nv=ot(tv),rv=ye({},bo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Du=ot(rv),sv=ye({},qs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cc}),iv=ot(sv),ov=ye({},Ur,{propertyName:0,elapsedTime:0,pseudoElement:0}),av=ot(ov),lv=ye({},bo,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),cv=ot(lv),uv=[9,13,27,32],uc=qt&&"CompositionEvent"in window,ds=null;qt&&"documentMode"in document&&(ds=document.documentMode);var dv=qt&&"TextEvent"in window&&!ds,_m=qt&&(!uc||ds&&8<ds&&11>=ds),Ru=String.fromCharCode(32),Iu=!1;function Dm(e,t){switch(e){case"keyup":return uv.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Rm(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ur=!1;function hv(e,t){switch(e){case"compositionend":return Rm(t);case"keypress":return t.which!==32?null:(Iu=!0,Ru);case"textInput":return e=t.data,e===Ru&&Iu?null:e;default:return null}}function mv(e,t){if(ur)return e==="compositionend"||!uc&&Dm(e,t)?(e=Lm(),Ti=ac=ln=null,ur=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return _m&&t.locale!=="ko"?null:t.data;default:return null}}var fv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ou(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!fv[e.type]:t==="textarea"}function Im(e,t,n,r){mm(r),t=$i(t,"onChange"),0<t.length&&(n=new lc("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var hs=null,Ns=null;function pv(e){Wm(e,0)}function So(e){var t=mr(e);if(om(t))return e}function gv(e,t){if(e==="change")return t}var Om=!1;if(qt){var ta;if(qt){var na="oninput"in document;if(!na){var Gu=document.createElement("div");Gu.setAttribute("oninput","return;"),na=typeof Gu.oninput=="function"}ta=na}else ta=!1;Om=ta&&(!document.documentMode||9<document.documentMode)}function Fu(){hs&&(hs.detachEvent("onpropertychange",Gm),Ns=hs=null)}function Gm(e){if(e.propertyName==="value"&&So(Ns)){var t=[];Im(t,Ns,e,nc(e)),vm(pv,t)}}function vv(e,t,n){e==="focusin"?(Fu(),hs=t,Ns=n,hs.attachEvent("onpropertychange",Gm)):e==="focusout"&&Fu()}function yv(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return So(Ns)}function xv(e,t){if(e==="click")return So(t)}function wv(e,t){if(e==="input"||e==="change")return So(t)}function bv(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ct=typeof Object.is=="function"?Object.is:bv;function As(e,t){if(Ct(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Ia.call(t,s)||!Ct(e[s],t[s]))return!1}return!0}function Vu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Bu(e,t){var n=Vu(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Vu(n)}}function Fm(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Fm(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Vm(){for(var e=window,t=Gi();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Gi(e.document)}return t}function dc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Sv(e){var t=Vm(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Fm(n.ownerDocument.documentElement,n)){if(r!==null&&dc(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=Bu(n,i);var o=Bu(n,r);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Cv=qt&&"documentMode"in document&&11>=document.documentMode,dr=null,tl=null,ms=null,nl=!1;function Hu(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;nl||dr==null||dr!==Gi(r)||(r=dr,"selectionStart"in r&&dc(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ms&&As(ms,r)||(ms=r,r=$i(tl,"onSelect"),0<r.length&&(t=new lc("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=dr)))}function li(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var hr={animationend:li("Animation","AnimationEnd"),animationiteration:li("Animation","AnimationIteration"),animationstart:li("Animation","AnimationStart"),transitionend:li("Transition","TransitionEnd")},ra={},Bm={};qt&&(Bm=document.createElement("div").style,"AnimationEvent"in window||(delete hr.animationend.animation,delete hr.animationiteration.animation,delete hr.animationstart.animation),"TransitionEvent"in window||delete hr.transitionend.transition);function Co(e){if(ra[e])return ra[e];if(!hr[e])return e;var t=hr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Bm)return ra[e]=t[n];return e}var Hm=Co("animationend"),zm=Co("animationiteration"),Um=Co("animationstart"),$m=Co("transitionend"),qm=new Map,zu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function jn(e,t){qm.set(e,t),nr(t,[e])}for(var sa=0;sa<zu.length;sa++){var ia=zu[sa],kv=ia.toLowerCase(),Pv=ia[0].toUpperCase()+ia.slice(1);jn(kv,"on"+Pv)}jn(Hm,"onAnimationEnd");jn(zm,"onAnimationIteration");jn(Um,"onAnimationStart");jn("dblclick","onDoubleClick");jn("focusin","onFocus");jn("focusout","onBlur");jn($m,"onTransitionEnd");Lr("onMouseEnter",["mouseout","mouseover"]);Lr("onMouseLeave",["mouseout","mouseover"]);Lr("onPointerEnter",["pointerout","pointerover"]);Lr("onPointerLeave",["pointerout","pointerover"]);nr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));nr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));nr("onBeforeInput",["compositionend","keypress","textInput","paste"]);nr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));nr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));nr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var as="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Tv=new Set("cancel close invalid load scroll toggle".split(" ").concat(as));function Uu(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,kg(r,t,void 0,e),e.currentTarget=null}function Wm(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,u=a.currentTarget;if(a=a.listener,c!==i&&s.isPropagationStopped())break e;Uu(s,a,u),i=c}else for(o=0;o<r.length;o++){if(a=r[o],c=a.instance,u=a.currentTarget,a=a.listener,c!==i&&s.isPropagationStopped())break e;Uu(s,a,u),i=c}}}if(Vi)throw e=Ja,Vi=!1,Ja=null,e}function ue(e,t){var n=t[al];n===void 0&&(n=t[al]=new Set);var r=e+"__bubble";n.has(r)||(Km(t,e,2,!1),n.add(r))}function oa(e,t,n){var r=0;t&&(r|=4),Km(n,e,r,t)}var ci="_reactListening"+Math.random().toString(36).slice(2);function Ms(e){if(!e[ci]){e[ci]=!0,tm.forEach(function(n){n!=="selectionchange"&&(Tv.has(n)||oa(n,!1,e),oa(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ci]||(t[ci]=!0,oa("selectionchange",!1,t))}}function Km(e,t,n,r){switch(Mm(t)){case 1:var s=Vg;break;case 4:s=Bg;break;default:s=oc}n=s.bind(null,t,n,e),s=void 0,!Xa||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function aa(e,t,n,r,s){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Fn(a),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}a=a.parentNode}}r=r.return}vm(function(){var u=i,h=nc(n),d=[];e:{var m=qm.get(e);if(m!==void 0){var g=lc,x=e;switch(e){case"keypress":if(ji(n)===0)break e;case"keydown":case"keyup":g=nv;break;case"focusin":x="focus",g=ea;break;case"focusout":x="blur",g=ea;break;case"beforeblur":case"afterblur":g=ea;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Lu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=Ug;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=iv;break;case Hm:case zm:case Um:g=Wg;break;case $m:g=av;break;case"scroll":g=Hg;break;case"wheel":g=cv;break;case"copy":case"cut":case"paste":g=Qg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Du}var b=(t&4)!==0,k=!b&&e==="scroll",p=b?m!==null?m+"Capture":null:m;b=[];for(var f=u,y;f!==null;){y=f;var w=y.stateNode;if(y.tag===5&&w!==null&&(y=w,p!==null&&(w=Ps(f,p),w!=null&&b.push(Ls(f,w,y)))),k)break;f=f.return}0<b.length&&(m=new g(m,x,null,n,h),d.push({event:m,listeners:b}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",g=e==="mouseout"||e==="pointerout",m&&n!==Ka&&(x=n.relatedTarget||n.fromElement)&&(Fn(x)||x[Wt]))break e;if((g||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,g?(x=n.relatedTarget||n.toElement,g=u,x=x?Fn(x):null,x!==null&&(k=rr(x),x!==k||x.tag!==5&&x.tag!==6)&&(x=null)):(g=null,x=u),g!==x)){if(b=Lu,w="onMouseLeave",p="onMouseEnter",f="mouse",(e==="pointerout"||e==="pointerover")&&(b=Du,w="onPointerLeave",p="onPointerEnter",f="pointer"),k=g==null?m:mr(g),y=x==null?m:mr(x),m=new b(w,f+"leave",g,n,h),m.target=k,m.relatedTarget=y,w=null,Fn(h)===u&&(b=new b(p,f+"enter",x,n,h),b.target=y,b.relatedTarget=k,w=b),k=w,g&&x)t:{for(b=g,p=x,f=0,y=b;y;y=or(y))f++;for(y=0,w=p;w;w=or(w))y++;for(;0<f-y;)b=or(b),f--;for(;0<y-f;)p=or(p),y--;for(;f--;){if(b===p||p!==null&&b===p.alternate)break t;b=or(b),p=or(p)}b=null}else b=null;g!==null&&$u(d,m,g,b,!1),x!==null&&k!==null&&$u(d,k,x,b,!0)}}e:{if(m=u?mr(u):window,g=m.nodeName&&m.nodeName.toLowerCase(),g==="select"||g==="input"&&m.type==="file")var S=gv;else if(Ou(m))if(Om)S=wv;else{S=yv;var C=vv}else(g=m.nodeName)&&g.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(S=xv);if(S&&(S=S(e,u))){Im(d,S,n,h);break e}C&&C(e,m,u),e==="focusout"&&(C=m._wrapperState)&&C.controlled&&m.type==="number"&&za(m,"number",m.value)}switch(C=u?mr(u):window,e){case"focusin":(Ou(C)||C.contentEditable==="true")&&(dr=C,tl=u,ms=null);break;case"focusout":ms=tl=dr=null;break;case"mousedown":nl=!0;break;case"contextmenu":case"mouseup":case"dragend":nl=!1,Hu(d,n,h);break;case"selectionchange":if(Cv)break;case"keydown":case"keyup":Hu(d,n,h)}var P;if(uc)e:{switch(e){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else ur?Dm(e,n)&&(T="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(_m&&n.locale!=="ko"&&(ur||T!=="onCompositionStart"?T==="onCompositionEnd"&&ur&&(P=Lm()):(ln=h,ac="value"in ln?ln.value:ln.textContent,ur=!0)),C=$i(u,T),0<C.length&&(T=new _u(T,e,null,n,h),d.push({event:T,listeners:C}),P?T.data=P:(P=Rm(n),P!==null&&(T.data=P)))),(P=dv?hv(e,n):mv(e,n))&&(u=$i(u,"onBeforeInput"),0<u.length&&(h=new _u("onBeforeInput","beforeinput",null,n,h),d.push({event:h,listeners:u}),h.data=P))}Wm(d,t)})}function Ls(e,t,n){return{instance:e,listener:t,currentTarget:n}}function $i(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Ps(e,n),i!=null&&r.unshift(Ls(e,i,s)),i=Ps(e,t),i!=null&&r.push(Ls(e,i,s))),e=e.return}return r}function or(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function $u(e,t,n,r,s){for(var i=t._reactName,o=[];n!==null&&n!==r;){var a=n,c=a.alternate,u=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&u!==null&&(a=u,s?(c=Ps(n,i),c!=null&&o.unshift(Ls(n,c,a))):s||(c=Ps(n,i),c!=null&&o.push(Ls(n,c,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var jv=/\r\n?/g,Ev=/\u0000|\uFFFD/g;function qu(e){return(typeof e=="string"?e:""+e).replace(jv,`
`).replace(Ev,"")}function ui(e,t,n){if(t=qu(t),qu(e)!==t&&n)throw Error(D(425))}function qi(){}var rl=null,sl=null;function il(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ol=typeof setTimeout=="function"?setTimeout:void 0,Nv=typeof clearTimeout=="function"?clearTimeout:void 0,Wu=typeof Promise=="function"?Promise:void 0,Av=typeof queueMicrotask=="function"?queueMicrotask:typeof Wu<"u"?function(e){return Wu.resolve(null).then(e).catch(Mv)}:ol;function Mv(e){setTimeout(function(){throw e})}function la(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),Es(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Es(t)}function fn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Ku(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var $r=Math.random().toString(36).slice(2),Nt="__reactFiber$"+$r,_s="__reactProps$"+$r,Wt="__reactContainer$"+$r,al="__reactEvents$"+$r,Lv="__reactListeners$"+$r,_v="__reactHandles$"+$r;function Fn(e){var t=e[Nt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Wt]||n[Nt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Ku(e);e!==null;){if(n=e[Nt])return n;e=Ku(e)}return t}e=n,n=e.parentNode}return null}function Ws(e){return e=e[Nt]||e[Wt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function mr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(D(33))}function ko(e){return e[_s]||null}var ll=[],fr=-1;function En(e){return{current:e}}function de(e){0>fr||(e.current=ll[fr],ll[fr]=null,fr--)}function le(e,t){fr++,ll[fr]=e.current,e.current=t}var Sn={},Ve=En(Sn),Xe=En(!1),$n=Sn;function _r(e,t){var n=e.type.contextTypes;if(!n)return Sn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Je(e){return e=e.childContextTypes,e!=null}function Wi(){de(Xe),de(Ve)}function Qu(e,t,n){if(Ve.current!==Sn)throw Error(D(168));le(Ve,t),le(Xe,n)}function Qm(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(D(108,vg(e)||"Unknown",s));return ye({},n,r)}function Ki(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Sn,$n=Ve.current,le(Ve,e),le(Xe,Xe.current),!0}function Xu(e,t,n){var r=e.stateNode;if(!r)throw Error(D(169));n?(e=Qm(e,t,$n),r.__reactInternalMemoizedMergedChildContext=e,de(Xe),de(Ve),le(Ve,e)):de(Xe),le(Xe,n)}var It=null,Po=!1,ca=!1;function Xm(e){It===null?It=[e]:It.push(e)}function Dv(e){Po=!0,Xm(e)}function Nn(){if(!ca&&It!==null){ca=!0;var e=0,t=ie;try{var n=It;for(ie=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}It=null,Po=!1}catch(s){throw It!==null&&(It=It.slice(e+1)),bm(rc,Nn),s}finally{ie=t,ca=!1}}return null}var pr=[],gr=0,Qi=null,Xi=0,ct=[],ut=0,qn=null,Ft=1,Vt="";function Dn(e,t){pr[gr++]=Xi,pr[gr++]=Qi,Qi=e,Xi=t}function Jm(e,t,n){ct[ut++]=Ft,ct[ut++]=Vt,ct[ut++]=qn,qn=e;var r=Ft;e=Vt;var s=32-bt(r)-1;r&=~(1<<s),n+=1;var i=32-bt(t)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Ft=1<<32-bt(t)+s|n<<s|r,Vt=i+e}else Ft=1<<i|n<<s|r,Vt=e}function hc(e){e.return!==null&&(Dn(e,1),Jm(e,1,0))}function mc(e){for(;e===Qi;)Qi=pr[--gr],pr[gr]=null,Xi=pr[--gr],pr[gr]=null;for(;e===qn;)qn=ct[--ut],ct[ut]=null,Vt=ct[--ut],ct[ut]=null,Ft=ct[--ut],ct[ut]=null}var nt=null,tt=null,fe=!1,wt=null;function Ym(e,t){var n=dt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Ju(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,nt=e,tt=fn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,nt=e,tt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=qn!==null?{id:Ft,overflow:Vt}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=dt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,nt=e,tt=null,!0):!1;default:return!1}}function cl(e){return(e.mode&1)!==0&&(e.flags&128)===0}function ul(e){if(fe){var t=tt;if(t){var n=t;if(!Ju(e,t)){if(cl(e))throw Error(D(418));t=fn(n.nextSibling);var r=nt;t&&Ju(e,t)?Ym(r,n):(e.flags=e.flags&-4097|2,fe=!1,nt=e)}}else{if(cl(e))throw Error(D(418));e.flags=e.flags&-4097|2,fe=!1,nt=e}}}function Yu(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;nt=e}function di(e){if(e!==nt)return!1;if(!fe)return Yu(e),fe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!il(e.type,e.memoizedProps)),t&&(t=tt)){if(cl(e))throw Zm(),Error(D(418));for(;t;)Ym(e,t),t=fn(t.nextSibling)}if(Yu(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(D(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){tt=fn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}tt=null}}else tt=nt?fn(e.stateNode.nextSibling):null;return!0}function Zm(){for(var e=tt;e;)e=fn(e.nextSibling)}function Dr(){tt=nt=null,fe=!1}function fc(e){wt===null?wt=[e]:wt.push(e)}var Rv=Jt.ReactCurrentBatchConfig;function Yr(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(D(309));var r=n.stateNode}if(!r)throw Error(D(147,e));var s=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(D(284));if(!n._owner)throw Error(D(290,e))}return e}function hi(e,t){throw e=Object.prototype.toString.call(t),Error(D(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Zu(e){var t=e._init;return t(e._payload)}function ef(e){function t(p,f){if(e){var y=p.deletions;y===null?(p.deletions=[f],p.flags|=16):y.push(f)}}function n(p,f){if(!e)return null;for(;f!==null;)t(p,f),f=f.sibling;return null}function r(p,f){for(p=new Map;f!==null;)f.key!==null?p.set(f.key,f):p.set(f.index,f),f=f.sibling;return p}function s(p,f){return p=yn(p,f),p.index=0,p.sibling=null,p}function i(p,f,y){return p.index=y,e?(y=p.alternate,y!==null?(y=y.index,y<f?(p.flags|=2,f):y):(p.flags|=2,f)):(p.flags|=1048576,f)}function o(p){return e&&p.alternate===null&&(p.flags|=2),p}function a(p,f,y,w){return f===null||f.tag!==6?(f=ga(y,p.mode,w),f.return=p,f):(f=s(f,y),f.return=p,f)}function c(p,f,y,w){var S=y.type;return S===cr?h(p,f,y.props.children,w,y.key):f!==null&&(f.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===nn&&Zu(S)===f.type)?(w=s(f,y.props),w.ref=Yr(p,f,y),w.return=p,w):(w=Di(y.type,y.key,y.props,null,p.mode,w),w.ref=Yr(p,f,y),w.return=p,w)}function u(p,f,y,w){return f===null||f.tag!==4||f.stateNode.containerInfo!==y.containerInfo||f.stateNode.implementation!==y.implementation?(f=va(y,p.mode,w),f.return=p,f):(f=s(f,y.children||[]),f.return=p,f)}function h(p,f,y,w,S){return f===null||f.tag!==7?(f=Un(y,p.mode,w,S),f.return=p,f):(f=s(f,y),f.return=p,f)}function d(p,f,y){if(typeof f=="string"&&f!==""||typeof f=="number")return f=ga(""+f,p.mode,y),f.return=p,f;if(typeof f=="object"&&f!==null){switch(f.$$typeof){case ti:return y=Di(f.type,f.key,f.props,null,p.mode,y),y.ref=Yr(p,null,f),y.return=p,y;case lr:return f=va(f,p.mode,y),f.return=p,f;case nn:var w=f._init;return d(p,w(f._payload),y)}if(is(f)||Wr(f))return f=Un(f,p.mode,y,null),f.return=p,f;hi(p,f)}return null}function m(p,f,y,w){var S=f!==null?f.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return S!==null?null:a(p,f,""+y,w);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case ti:return y.key===S?c(p,f,y,w):null;case lr:return y.key===S?u(p,f,y,w):null;case nn:return S=y._init,m(p,f,S(y._payload),w)}if(is(y)||Wr(y))return S!==null?null:h(p,f,y,w,null);hi(p,y)}return null}function g(p,f,y,w,S){if(typeof w=="string"&&w!==""||typeof w=="number")return p=p.get(y)||null,a(f,p,""+w,S);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case ti:return p=p.get(w.key===null?y:w.key)||null,c(f,p,w,S);case lr:return p=p.get(w.key===null?y:w.key)||null,u(f,p,w,S);case nn:var C=w._init;return g(p,f,y,C(w._payload),S)}if(is(w)||Wr(w))return p=p.get(y)||null,h(f,p,w,S,null);hi(f,w)}return null}function x(p,f,y,w){for(var S=null,C=null,P=f,T=f=0,j=null;P!==null&&T<y.length;T++){P.index>T?(j=P,P=null):j=P.sibling;var E=m(p,P,y[T],w);if(E===null){P===null&&(P=j);break}e&&P&&E.alternate===null&&t(p,P),f=i(E,f,T),C===null?S=E:C.sibling=E,C=E,P=j}if(T===y.length)return n(p,P),fe&&Dn(p,T),S;if(P===null){for(;T<y.length;T++)P=d(p,y[T],w),P!==null&&(f=i(P,f,T),C===null?S=P:C.sibling=P,C=P);return fe&&Dn(p,T),S}for(P=r(p,P);T<y.length;T++)j=g(P,p,T,y[T],w),j!==null&&(e&&j.alternate!==null&&P.delete(j.key===null?T:j.key),f=i(j,f,T),C===null?S=j:C.sibling=j,C=j);return e&&P.forEach(function(L){return t(p,L)}),fe&&Dn(p,T),S}function b(p,f,y,w){var S=Wr(y);if(typeof S!="function")throw Error(D(150));if(y=S.call(y),y==null)throw Error(D(151));for(var C=S=null,P=f,T=f=0,j=null,E=y.next();P!==null&&!E.done;T++,E=y.next()){P.index>T?(j=P,P=null):j=P.sibling;var L=m(p,P,E.value,w);if(L===null){P===null&&(P=j);break}e&&P&&L.alternate===null&&t(p,P),f=i(L,f,T),C===null?S=L:C.sibling=L,C=L,P=j}if(E.done)return n(p,P),fe&&Dn(p,T),S;if(P===null){for(;!E.done;T++,E=y.next())E=d(p,E.value,w),E!==null&&(f=i(E,f,T),C===null?S=E:C.sibling=E,C=E);return fe&&Dn(p,T),S}for(P=r(p,P);!E.done;T++,E=y.next())E=g(P,p,T,E.value,w),E!==null&&(e&&E.alternate!==null&&P.delete(E.key===null?T:E.key),f=i(E,f,T),C===null?S=E:C.sibling=E,C=E);return e&&P.forEach(function(A){return t(p,A)}),fe&&Dn(p,T),S}function k(p,f,y,w){if(typeof y=="object"&&y!==null&&y.type===cr&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case ti:e:{for(var S=y.key,C=f;C!==null;){if(C.key===S){if(S=y.type,S===cr){if(C.tag===7){n(p,C.sibling),f=s(C,y.props.children),f.return=p,p=f;break e}}else if(C.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===nn&&Zu(S)===C.type){n(p,C.sibling),f=s(C,y.props),f.ref=Yr(p,C,y),f.return=p,p=f;break e}n(p,C);break}else t(p,C);C=C.sibling}y.type===cr?(f=Un(y.props.children,p.mode,w,y.key),f.return=p,p=f):(w=Di(y.type,y.key,y.props,null,p.mode,w),w.ref=Yr(p,f,y),w.return=p,p=w)}return o(p);case lr:e:{for(C=y.key;f!==null;){if(f.key===C)if(f.tag===4&&f.stateNode.containerInfo===y.containerInfo&&f.stateNode.implementation===y.implementation){n(p,f.sibling),f=s(f,y.children||[]),f.return=p,p=f;break e}else{n(p,f);break}else t(p,f);f=f.sibling}f=va(y,p.mode,w),f.return=p,p=f}return o(p);case nn:return C=y._init,k(p,f,C(y._payload),w)}if(is(y))return x(p,f,y,w);if(Wr(y))return b(p,f,y,w);hi(p,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,f!==null&&f.tag===6?(n(p,f.sibling),f=s(f,y),f.return=p,p=f):(n(p,f),f=ga(y,p.mode,w),f.return=p,p=f),o(p)):n(p,f)}return k}var Rr=ef(!0),tf=ef(!1),Ji=En(null),Yi=null,vr=null,pc=null;function gc(){pc=vr=Yi=null}function vc(e){var t=Ji.current;de(Ji),e._currentValue=t}function dl(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Nr(e,t){Yi=e,pc=vr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Qe=!0),e.firstContext=null)}function mt(e){var t=e._currentValue;if(pc!==e)if(e={context:e,memoizedValue:t,next:null},vr===null){if(Yi===null)throw Error(D(308));vr=e,Yi.dependencies={lanes:0,firstContext:e}}else vr=vr.next=e;return t}var Vn=null;function yc(e){Vn===null?Vn=[e]:Vn.push(e)}function nf(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,yc(t)):(n.next=s.next,s.next=n),t.interleaved=n,Kt(e,r)}function Kt(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var rn=!1;function xc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function rf(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function zt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function pn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,re&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Kt(e,n)}return s=r.interleaved,s===null?(t.next=t,yc(r)):(t.next=s.next,s.next=t),r.interleaved=t,Kt(e,n)}function Ei(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,sc(e,n)}}function ed(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=t:i=i.next=t}else s=i=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Zi(e,t,n,r){var s=e.updateQueue;rn=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var c=a,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var h=e.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=u:a.next=u,h.lastBaseUpdate=c))}if(i!==null){var d=s.baseState;o=0,h=u=c=null,a=i;do{var m=a.lane,g=a.eventTime;if((r&m)===m){h!==null&&(h=h.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var x=e,b=a;switch(m=t,g=n,b.tag){case 1:if(x=b.payload,typeof x=="function"){d=x.call(g,d,m);break e}d=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=b.payload,m=typeof x=="function"?x.call(g,d,m):x,m==null)break e;d=ye({},d,m);break e;case 2:rn=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,m=s.effects,m===null?s.effects=[a]:m.push(a))}else g={eventTime:g,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(u=h=g,c=d):h=h.next=g,o|=m;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;m=a,a=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(1);if(h===null&&(c=d),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=h,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);Kn|=o,e.lanes=o,e.memoizedState=d}}function td(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(D(191,s));s.call(r)}}}var Ks={},Lt=En(Ks),Ds=En(Ks),Rs=En(Ks);function Bn(e){if(e===Ks)throw Error(D(174));return e}function wc(e,t){switch(le(Rs,t),le(Ds,e),le(Lt,Ks),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:$a(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=$a(t,e)}de(Lt),le(Lt,t)}function Ir(){de(Lt),de(Ds),de(Rs)}function sf(e){Bn(Rs.current);var t=Bn(Lt.current),n=$a(t,e.type);t!==n&&(le(Ds,e),le(Lt,n))}function bc(e){Ds.current===e&&(de(Lt),de(Ds))}var pe=En(0);function eo(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ua=[];function Sc(){for(var e=0;e<ua.length;e++)ua[e]._workInProgressVersionPrimary=null;ua.length=0}var Ni=Jt.ReactCurrentDispatcher,da=Jt.ReactCurrentBatchConfig,Wn=0,ve=null,Te=null,Ne=null,to=!1,fs=!1,Is=0,Iv=0;function Re(){throw Error(D(321))}function Cc(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ct(e[n],t[n]))return!1;return!0}function kc(e,t,n,r,s,i){if(Wn=i,ve=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ni.current=e===null||e.memoizedState===null?Vv:Bv,e=n(r,s),fs){i=0;do{if(fs=!1,Is=0,25<=i)throw Error(D(301));i+=1,Ne=Te=null,t.updateQueue=null,Ni.current=Hv,e=n(r,s)}while(fs)}if(Ni.current=no,t=Te!==null&&Te.next!==null,Wn=0,Ne=Te=ve=null,to=!1,t)throw Error(D(300));return e}function Pc(){var e=Is!==0;return Is=0,e}function Et(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ne===null?ve.memoizedState=Ne=e:Ne=Ne.next=e,Ne}function ft(){if(Te===null){var e=ve.alternate;e=e!==null?e.memoizedState:null}else e=Te.next;var t=Ne===null?ve.memoizedState:Ne.next;if(t!==null)Ne=t,Te=e;else{if(e===null)throw Error(D(310));Te=e,e={memoizedState:Te.memoizedState,baseState:Te.baseState,baseQueue:Te.baseQueue,queue:Te.queue,next:null},Ne===null?ve.memoizedState=Ne=e:Ne=Ne.next=e}return Ne}function Os(e,t){return typeof t=="function"?t(e):t}function ha(e){var t=ft(),n=t.queue;if(n===null)throw Error(D(311));n.lastRenderedReducer=e;var r=Te,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,c=null,u=i;do{var h=u.lane;if((Wn&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(a=c=d,o=r):c=c.next=d,ve.lanes|=h,Kn|=h}u=u.next}while(u!==null&&u!==i);c===null?o=r:c.next=a,Ct(r,t.memoizedState)||(Qe=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do i=s.lane,ve.lanes|=i,Kn|=i,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ma(e){var t=ft(),n=t.queue;if(n===null)throw Error(D(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);Ct(i,t.memoizedState)||(Qe=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function of(){}function af(e,t){var n=ve,r=ft(),s=t(),i=!Ct(r.memoizedState,s);if(i&&(r.memoizedState=s,Qe=!0),r=r.queue,Tc(uf.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||Ne!==null&&Ne.memoizedState.tag&1){if(n.flags|=2048,Gs(9,cf.bind(null,n,r,s,t),void 0,null),Ae===null)throw Error(D(349));Wn&30||lf(n,t,s)}return s}function lf(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=ve.updateQueue,t===null?(t={lastEffect:null,stores:null},ve.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function cf(e,t,n,r){t.value=n,t.getSnapshot=r,df(t)&&hf(e)}function uf(e,t,n){return n(function(){df(t)&&hf(e)})}function df(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Ct(e,n)}catch{return!0}}function hf(e){var t=Kt(e,1);t!==null&&St(t,e,1,-1)}function nd(e){var t=Et();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Os,lastRenderedState:e},t.queue=e,e=e.dispatch=Fv.bind(null,ve,e),[t.memoizedState,e]}function Gs(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=ve.updateQueue,t===null?(t={lastEffect:null,stores:null},ve.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function mf(){return ft().memoizedState}function Ai(e,t,n,r){var s=Et();ve.flags|=e,s.memoizedState=Gs(1|t,n,void 0,r===void 0?null:r)}function To(e,t,n,r){var s=ft();r=r===void 0?null:r;var i=void 0;if(Te!==null){var o=Te.memoizedState;if(i=o.destroy,r!==null&&Cc(r,o.deps)){s.memoizedState=Gs(t,n,i,r);return}}ve.flags|=e,s.memoizedState=Gs(1|t,n,i,r)}function rd(e,t){return Ai(8390656,8,e,t)}function Tc(e,t){return To(2048,8,e,t)}function ff(e,t){return To(4,2,e,t)}function pf(e,t){return To(4,4,e,t)}function gf(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function vf(e,t,n){return n=n!=null?n.concat([e]):null,To(4,4,gf.bind(null,t,e),n)}function jc(){}function yf(e,t){var n=ft();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Cc(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function xf(e,t){var n=ft();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Cc(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function wf(e,t,n){return Wn&21?(Ct(n,t)||(n=km(),ve.lanes|=n,Kn|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Qe=!0),e.memoizedState=n)}function Ov(e,t){var n=ie;ie=n!==0&&4>n?n:4,e(!0);var r=da.transition;da.transition={};try{e(!1),t()}finally{ie=n,da.transition=r}}function bf(){return ft().memoizedState}function Gv(e,t,n){var r=vn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Sf(e))Cf(t,n);else if(n=nf(e,t,n,r),n!==null){var s=Ue();St(n,e,r,s),kf(n,t,r)}}function Fv(e,t,n){var r=vn(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Sf(e))Cf(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Ct(a,o)){var c=t.interleaved;c===null?(s.next=s,yc(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}n=nf(e,t,s,r),n!==null&&(s=Ue(),St(n,e,r,s),kf(n,t,r))}}function Sf(e){var t=e.alternate;return e===ve||t!==null&&t===ve}function Cf(e,t){fs=to=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function kf(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,sc(e,n)}}var no={readContext:mt,useCallback:Re,useContext:Re,useEffect:Re,useImperativeHandle:Re,useInsertionEffect:Re,useLayoutEffect:Re,useMemo:Re,useReducer:Re,useRef:Re,useState:Re,useDebugValue:Re,useDeferredValue:Re,useTransition:Re,useMutableSource:Re,useSyncExternalStore:Re,useId:Re,unstable_isNewReconciler:!1},Vv={readContext:mt,useCallback:function(e,t){return Et().memoizedState=[e,t===void 0?null:t],e},useContext:mt,useEffect:rd,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Ai(4194308,4,gf.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ai(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ai(4,2,e,t)},useMemo:function(e,t){var n=Et();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Et();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Gv.bind(null,ve,e),[r.memoizedState,e]},useRef:function(e){var t=Et();return e={current:e},t.memoizedState=e},useState:nd,useDebugValue:jc,useDeferredValue:function(e){return Et().memoizedState=e},useTransition:function(){var e=nd(!1),t=e[0];return e=Ov.bind(null,e[1]),Et().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ve,s=Et();if(fe){if(n===void 0)throw Error(D(407));n=n()}else{if(n=t(),Ae===null)throw Error(D(349));Wn&30||lf(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,rd(uf.bind(null,r,i,e),[e]),r.flags|=2048,Gs(9,cf.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=Et(),t=Ae.identifierPrefix;if(fe){var n=Vt,r=Ft;n=(r&~(1<<32-bt(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Is++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Iv++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Bv={readContext:mt,useCallback:yf,useContext:mt,useEffect:Tc,useImperativeHandle:vf,useInsertionEffect:ff,useLayoutEffect:pf,useMemo:xf,useReducer:ha,useRef:mf,useState:function(){return ha(Os)},useDebugValue:jc,useDeferredValue:function(e){var t=ft();return wf(t,Te.memoizedState,e)},useTransition:function(){var e=ha(Os)[0],t=ft().memoizedState;return[e,t]},useMutableSource:of,useSyncExternalStore:af,useId:bf,unstable_isNewReconciler:!1},Hv={readContext:mt,useCallback:yf,useContext:mt,useEffect:Tc,useImperativeHandle:vf,useInsertionEffect:ff,useLayoutEffect:pf,useMemo:xf,useReducer:ma,useRef:mf,useState:function(){return ma(Os)},useDebugValue:jc,useDeferredValue:function(e){var t=ft();return Te===null?t.memoizedState=e:wf(t,Te.memoizedState,e)},useTransition:function(){var e=ma(Os)[0],t=ft().memoizedState;return[e,t]},useMutableSource:of,useSyncExternalStore:af,useId:bf,unstable_isNewReconciler:!1};function yt(e,t){if(e&&e.defaultProps){t=ye({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function hl(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:ye({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var jo={isMounted:function(e){return(e=e._reactInternals)?rr(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Ue(),s=vn(e),i=zt(r,s);i.payload=t,n!=null&&(i.callback=n),t=pn(e,i,s),t!==null&&(St(t,e,s,r),Ei(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Ue(),s=vn(e),i=zt(r,s);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=pn(e,i,s),t!==null&&(St(t,e,s,r),Ei(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ue(),r=vn(e),s=zt(n,r);s.tag=2,t!=null&&(s.callback=t),t=pn(e,s,r),t!==null&&(St(t,e,r,n),Ei(t,e,r))}};function sd(e,t,n,r,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,o):t.prototype&&t.prototype.isPureReactComponent?!As(n,r)||!As(s,i):!0}function Pf(e,t,n){var r=!1,s=Sn,i=t.contextType;return typeof i=="object"&&i!==null?i=mt(i):(s=Je(t)?$n:Ve.current,r=t.contextTypes,i=(r=r!=null)?_r(e,s):Sn),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=jo,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function id(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&jo.enqueueReplaceState(t,t.state,null)}function ml(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},xc(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=mt(i):(i=Je(t)?$n:Ve.current,s.context=_r(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(hl(e,t,i,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&jo.enqueueReplaceState(s,s.state,null),Zi(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Or(e,t){try{var n="",r=t;do n+=gg(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function fa(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function fl(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var zv=typeof WeakMap=="function"?WeakMap:Map;function Tf(e,t,n){n=zt(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){so||(so=!0,kl=r),fl(e,t)},n}function jf(e,t,n){n=zt(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){fl(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){fl(e,t),typeof r!="function"&&(gn===null?gn=new Set([this]):gn.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function od(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new zv;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=ry.bind(null,e,t,n),t.then(e,e))}function ad(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function ld(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=zt(-1,1),t.tag=2,pn(n,t,1))),n.lanes|=1),e)}var Uv=Jt.ReactCurrentOwner,Qe=!1;function ze(e,t,n,r){t.child=e===null?tf(t,null,n,r):Rr(t,e.child,n,r)}function cd(e,t,n,r,s){n=n.render;var i=t.ref;return Nr(t,s),r=kc(e,t,n,r,i,s),n=Pc(),e!==null&&!Qe?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Qt(e,t,s)):(fe&&n&&hc(t),t.flags|=1,ze(e,t,r,s),t.child)}function ud(e,t,n,r,s){if(e===null){var i=n.type;return typeof i=="function"&&!Rc(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,Ef(e,t,i,r,s)):(e=Di(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:As,n(o,r)&&e.ref===t.ref)return Qt(e,t,s)}return t.flags|=1,e=yn(i,r),e.ref=t.ref,e.return=t,t.child=e}function Ef(e,t,n,r,s){if(e!==null){var i=e.memoizedProps;if(As(i,r)&&e.ref===t.ref)if(Qe=!1,t.pendingProps=r=i,(e.lanes&s)!==0)e.flags&131072&&(Qe=!0);else return t.lanes=e.lanes,Qt(e,t,s)}return pl(e,t,n,r,s)}function Nf(e,t,n){var r=t.pendingProps,s=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},le(xr,et),et|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,le(xr,et),et|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,le(xr,et),et|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,le(xr,et),et|=r;return ze(e,t,s,n),t.child}function Af(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function pl(e,t,n,r,s){var i=Je(n)?$n:Ve.current;return i=_r(t,i),Nr(t,s),n=kc(e,t,n,r,i,s),r=Pc(),e!==null&&!Qe?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Qt(e,t,s)):(fe&&r&&hc(t),t.flags|=1,ze(e,t,n,s),t.child)}function dd(e,t,n,r,s){if(Je(n)){var i=!0;Ki(t)}else i=!1;if(Nr(t,s),t.stateNode===null)Mi(e,t),Pf(t,n,r),ml(t,n,r,s),r=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=mt(u):(u=Je(n)?$n:Ve.current,u=_r(t,u));var h=n.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||c!==u)&&id(t,o,r,u),rn=!1;var m=t.memoizedState;o.state=m,Zi(t,r,o,s),c=t.memoizedState,a!==r||m!==c||Xe.current||rn?(typeof h=="function"&&(hl(t,n,h,r),c=t.memoizedState),(a=rn||sd(t,n,a,r,m,c,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),o.props=r,o.state=c,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,rf(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:yt(t.type,a),o.props=u,d=t.pendingProps,m=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=mt(c):(c=Je(n)?$n:Ve.current,c=_r(t,c));var g=n.getDerivedStateFromProps;(h=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||m!==c)&&id(t,o,r,c),rn=!1,m=t.memoizedState,o.state=m,Zi(t,r,o,s);var x=t.memoizedState;a!==d||m!==x||Xe.current||rn?(typeof g=="function"&&(hl(t,n,g,r),x=t.memoizedState),(u=rn||sd(t,n,u,r,m,x,c)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,x,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,x,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=x),o.props=r,o.state=x,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),r=!1)}return gl(e,t,n,r,i,s)}function gl(e,t,n,r,s,i){Af(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return s&&Xu(t,n,!1),Qt(e,t,i);r=t.stateNode,Uv.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=Rr(t,e.child,null,i),t.child=Rr(t,null,a,i)):ze(e,t,a,i),t.memoizedState=r.state,s&&Xu(t,n,!0),t.child}function Mf(e){var t=e.stateNode;t.pendingContext?Qu(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Qu(e,t.context,!1),wc(e,t.containerInfo)}function hd(e,t,n,r,s){return Dr(),fc(s),t.flags|=256,ze(e,t,n,r),t.child}var vl={dehydrated:null,treeContext:null,retryLane:0};function yl(e){return{baseLanes:e,cachePool:null,transitions:null}}function Lf(e,t,n){var r=t.pendingProps,s=pe.current,i=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(s&2)!==0),a?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),le(pe,s&1),e===null)return ul(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,i?(r=t.mode,i=t.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Ao(o,r,0,null),e=Un(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=yl(n),t.memoizedState=vl,e):Ec(t,o));if(s=e.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return $v(e,t,o,r,a,s,n);if(i){i=r.fallback,o=t.mode,s=e.child,a=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=yn(s,c),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=yn(a,i):(i=Un(i,o,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,o=e.child.memoizedState,o=o===null?yl(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~n,t.memoizedState=vl,r}return i=e.child,e=i.sibling,r=yn(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Ec(e,t){return t=Ao({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function mi(e,t,n,r){return r!==null&&fc(r),Rr(t,e.child,null,n),e=Ec(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function $v(e,t,n,r,s,i,o){if(n)return t.flags&256?(t.flags&=-257,r=fa(Error(D(422))),mi(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,s=t.mode,r=Ao({mode:"visible",children:r.children},s,0,null),i=Un(i,s,o,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&Rr(t,e.child,null,o),t.child.memoizedState=yl(o),t.memoizedState=vl,i);if(!(t.mode&1))return mi(e,t,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(D(419)),r=fa(i,r,void 0),mi(e,t,o,r)}if(a=(o&e.childLanes)!==0,Qe||a){if(r=Ae,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Kt(e,s),St(r,e,s,-1))}return Dc(),r=fa(Error(D(421))),mi(e,t,o,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=sy.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,tt=fn(s.nextSibling),nt=t,fe=!0,wt=null,e!==null&&(ct[ut++]=Ft,ct[ut++]=Vt,ct[ut++]=qn,Ft=e.id,Vt=e.overflow,qn=t),t=Ec(t,r.children),t.flags|=4096,t)}function md(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),dl(e.return,t,n)}function pa(e,t,n,r,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function _f(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(ze(e,t,r.children,n),r=pe.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&md(e,n,t);else if(e.tag===19)md(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(le(pe,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&eo(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),pa(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&eo(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}pa(t,!0,n,null,i);break;case"together":pa(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Mi(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Qt(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Kn|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(D(153));if(t.child!==null){for(e=t.child,n=yn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=yn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function qv(e,t,n){switch(t.tag){case 3:Mf(t),Dr();break;case 5:sf(t);break;case 1:Je(t.type)&&Ki(t);break;case 4:wc(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;le(Ji,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(le(pe,pe.current&1),t.flags|=128,null):n&t.child.childLanes?Lf(e,t,n):(le(pe,pe.current&1),e=Qt(e,t,n),e!==null?e.sibling:null);le(pe,pe.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return _f(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),le(pe,pe.current),r)break;return null;case 22:case 23:return t.lanes=0,Nf(e,t,n)}return Qt(e,t,n)}var Df,xl,Rf,If;Df=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};xl=function(){};Rf=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Bn(Lt.current);var i=null;switch(n){case"input":s=Ba(e,s),r=Ba(e,r),i=[];break;case"select":s=ye({},s,{value:void 0}),r=ye({},r,{value:void 0}),i=[];break;case"textarea":s=Ua(e,s),r=Ua(e,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=qi)}qa(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Cs.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(a=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==a&&(c!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Cs.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&ue("scroll",e),i||a===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};If=function(e,t,n,r){n!==r&&(t.flags|=4)};function Zr(e,t){if(!fe)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ie(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Wv(e,t,n){var r=t.pendingProps;switch(mc(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ie(t),null;case 1:return Je(t.type)&&Wi(),Ie(t),null;case 3:return r=t.stateNode,Ir(),de(Xe),de(Ve),Sc(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(di(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,wt!==null&&(jl(wt),wt=null))),xl(e,t),Ie(t),null;case 5:bc(t);var s=Bn(Rs.current);if(n=t.type,e!==null&&t.stateNode!=null)Rf(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(D(166));return Ie(t),null}if(e=Bn(Lt.current),di(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[Nt]=t,r[_s]=i,e=(t.mode&1)!==0,n){case"dialog":ue("cancel",r),ue("close",r);break;case"iframe":case"object":case"embed":ue("load",r);break;case"video":case"audio":for(s=0;s<as.length;s++)ue(as[s],r);break;case"source":ue("error",r);break;case"img":case"image":case"link":ue("error",r),ue("load",r);break;case"details":ue("toggle",r);break;case"input":Su(r,i),ue("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ue("invalid",r);break;case"textarea":ku(r,i),ue("invalid",r)}qa(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&ui(r.textContent,a,e),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&ui(r.textContent,a,e),s=["children",""+a]):Cs.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ue("scroll",r)}switch(n){case"input":ni(r),Cu(r,i,!0);break;case"textarea":ni(r),Pu(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=qi)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=cm(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[Nt]=t,e[_s]=r,Df(e,t,!1,!1),t.stateNode=e;e:{switch(o=Wa(n,r),n){case"dialog":ue("cancel",e),ue("close",e),s=r;break;case"iframe":case"object":case"embed":ue("load",e),s=r;break;case"video":case"audio":for(s=0;s<as.length;s++)ue(as[s],e);s=r;break;case"source":ue("error",e),s=r;break;case"img":case"image":case"link":ue("error",e),ue("load",e),s=r;break;case"details":ue("toggle",e),s=r;break;case"input":Su(e,r),s=Ba(e,r),ue("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=ye({},r,{value:void 0}),ue("invalid",e);break;case"textarea":ku(e,r),s=Ua(e,r),ue("invalid",e);break;default:s=r}qa(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var c=a[i];i==="style"?hm(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&um(e,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&ks(e,c):typeof c=="number"&&ks(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Cs.hasOwnProperty(i)?c!=null&&i==="onScroll"&&ue("scroll",e):c!=null&&Yl(e,i,c,o))}switch(n){case"input":ni(e),Cu(e,r,!1);break;case"textarea":ni(e),Pu(e);break;case"option":r.value!=null&&e.setAttribute("value",""+bn(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?Pr(e,!!r.multiple,i,!1):r.defaultValue!=null&&Pr(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=qi)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ie(t),null;case 6:if(e&&t.stateNode!=null)If(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(D(166));if(n=Bn(Rs.current),Bn(Lt.current),di(t)){if(r=t.stateNode,n=t.memoizedProps,r[Nt]=t,(i=r.nodeValue!==n)&&(e=nt,e!==null))switch(e.tag){case 3:ui(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ui(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Nt]=t,t.stateNode=r}return Ie(t),null;case 13:if(de(pe),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(fe&&tt!==null&&t.mode&1&&!(t.flags&128))Zm(),Dr(),t.flags|=98560,i=!1;else if(i=di(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(D(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(D(317));i[Nt]=t}else Dr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ie(t),i=!1}else wt!==null&&(jl(wt),wt=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||pe.current&1?je===0&&(je=3):Dc())),t.updateQueue!==null&&(t.flags|=4),Ie(t),null);case 4:return Ir(),xl(e,t),e===null&&Ms(t.stateNode.containerInfo),Ie(t),null;case 10:return vc(t.type._context),Ie(t),null;case 17:return Je(t.type)&&Wi(),Ie(t),null;case 19:if(de(pe),i=t.memoizedState,i===null)return Ie(t),null;if(r=(t.flags&128)!==0,o=i.rendering,o===null)if(r)Zr(i,!1);else{if(je!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=eo(e),o!==null){for(t.flags|=128,Zr(i,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return le(pe,pe.current&1|2),t.child}e=e.sibling}i.tail!==null&&Se()>Gr&&(t.flags|=128,r=!0,Zr(i,!1),t.lanes=4194304)}else{if(!r)if(e=eo(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Zr(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!fe)return Ie(t),null}else 2*Se()-i.renderingStartTime>Gr&&n!==1073741824&&(t.flags|=128,r=!0,Zr(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(n=i.last,n!==null?n.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Se(),t.sibling=null,n=pe.current,le(pe,r?n&1|2:n&1),t):(Ie(t),null);case 22:case 23:return _c(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?et&1073741824&&(Ie(t),t.subtreeFlags&6&&(t.flags|=8192)):Ie(t),null;case 24:return null;case 25:return null}throw Error(D(156,t.tag))}function Kv(e,t){switch(mc(t),t.tag){case 1:return Je(t.type)&&Wi(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ir(),de(Xe),de(Ve),Sc(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return bc(t),null;case 13:if(de(pe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(D(340));Dr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return de(pe),null;case 4:return Ir(),null;case 10:return vc(t.type._context),null;case 22:case 23:return _c(),null;case 24:return null;default:return null}}var fi=!1,Ge=!1,Qv=typeof WeakSet=="function"?WeakSet:Set,H=null;function yr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){we(e,t,r)}else n.current=null}function wl(e,t,n){try{n()}catch(r){we(e,t,r)}}var fd=!1;function Xv(e,t){if(rl=zi,e=Vm(),dc(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,u=0,h=0,d=e,m=null;t:for(;;){for(var g;d!==n||s!==0&&d.nodeType!==3||(a=o+s),d!==i||r!==0&&d.nodeType!==3||(c=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(g=d.firstChild)!==null;)m=d,d=g;for(;;){if(d===e)break t;if(m===n&&++u===s&&(a=o),m===i&&++h===r&&(c=o),(g=d.nextSibling)!==null)break;d=m,m=d.parentNode}d=g}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(sl={focusedElem:e,selectionRange:n},zi=!1,H=t;H!==null;)if(t=H,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,H=e;else for(;H!==null;){t=H;try{var x=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var b=x.memoizedProps,k=x.memoizedState,p=t.stateNode,f=p.getSnapshotBeforeUpdate(t.elementType===t.type?b:yt(t.type,b),k);p.__reactInternalSnapshotBeforeUpdate=f}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(D(163))}}catch(w){we(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,H=e;break}H=t.return}return x=fd,fd=!1,x}function ps(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&wl(t,n,i)}s=s.next}while(s!==r)}}function Eo(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function bl(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Of(e){var t=e.alternate;t!==null&&(e.alternate=null,Of(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Nt],delete t[_s],delete t[al],delete t[Lv],delete t[_v])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Gf(e){return e.tag===5||e.tag===3||e.tag===4}function pd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Gf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Sl(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=qi));else if(r!==4&&(e=e.child,e!==null))for(Sl(e,t,n),e=e.sibling;e!==null;)Sl(e,t,n),e=e.sibling}function Cl(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Cl(e,t,n),e=e.sibling;e!==null;)Cl(e,t,n),e=e.sibling}var Le=null,xt=!1;function Zt(e,t,n){for(n=n.child;n!==null;)Ff(e,t,n),n=n.sibling}function Ff(e,t,n){if(Mt&&typeof Mt.onCommitFiberUnmount=="function")try{Mt.onCommitFiberUnmount(wo,n)}catch{}switch(n.tag){case 5:Ge||yr(n,t);case 6:var r=Le,s=xt;Le=null,Zt(e,t,n),Le=r,xt=s,Le!==null&&(xt?(e=Le,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Le.removeChild(n.stateNode));break;case 18:Le!==null&&(xt?(e=Le,n=n.stateNode,e.nodeType===8?la(e.parentNode,n):e.nodeType===1&&la(e,n),Es(e)):la(Le,n.stateNode));break;case 4:r=Le,s=xt,Le=n.stateNode.containerInfo,xt=!0,Zt(e,t,n),Le=r,xt=s;break;case 0:case 11:case 14:case 15:if(!Ge&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&wl(n,t,o),s=s.next}while(s!==r)}Zt(e,t,n);break;case 1:if(!Ge&&(yr(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){we(n,t,a)}Zt(e,t,n);break;case 21:Zt(e,t,n);break;case 22:n.mode&1?(Ge=(r=Ge)||n.memoizedState!==null,Zt(e,t,n),Ge=r):Zt(e,t,n);break;default:Zt(e,t,n)}}function gd(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Qv),t.forEach(function(r){var s=iy.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function gt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:Le=a.stateNode,xt=!1;break e;case 3:Le=a.stateNode.containerInfo,xt=!0;break e;case 4:Le=a.stateNode.containerInfo,xt=!0;break e}a=a.return}if(Le===null)throw Error(D(160));Ff(i,o,s),Le=null,xt=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){we(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Vf(t,e),t=t.sibling}function Vf(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gt(t,e),Tt(e),r&4){try{ps(3,e,e.return),Eo(3,e)}catch(b){we(e,e.return,b)}try{ps(5,e,e.return)}catch(b){we(e,e.return,b)}}break;case 1:gt(t,e),Tt(e),r&512&&n!==null&&yr(n,n.return);break;case 5:if(gt(t,e),Tt(e),r&512&&n!==null&&yr(n,n.return),e.flags&32){var s=e.stateNode;try{ks(s,"")}catch(b){we(e,e.return,b)}}if(r&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=n!==null?n.memoizedProps:i,a=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&am(s,i),Wa(a,o);var u=Wa(a,i);for(o=0;o<c.length;o+=2){var h=c[o],d=c[o+1];h==="style"?hm(s,d):h==="dangerouslySetInnerHTML"?um(s,d):h==="children"?ks(s,d):Yl(s,h,d,u)}switch(a){case"input":Ha(s,i);break;case"textarea":lm(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?Pr(s,!!i.multiple,g,!1):m!==!!i.multiple&&(i.defaultValue!=null?Pr(s,!!i.multiple,i.defaultValue,!0):Pr(s,!!i.multiple,i.multiple?[]:"",!1))}s[_s]=i}catch(b){we(e,e.return,b)}}break;case 6:if(gt(t,e),Tt(e),r&4){if(e.stateNode===null)throw Error(D(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(b){we(e,e.return,b)}}break;case 3:if(gt(t,e),Tt(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Es(t.containerInfo)}catch(b){we(e,e.return,b)}break;case 4:gt(t,e),Tt(e);break;case 13:gt(t,e),Tt(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Mc=Se())),r&4&&gd(e);break;case 22:if(h=n!==null&&n.memoizedState!==null,e.mode&1?(Ge=(u=Ge)||h,gt(t,e),Ge=u):gt(t,e),Tt(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!h&&e.mode&1)for(H=e,h=e.child;h!==null;){for(d=H=h;H!==null;){switch(m=H,g=m.child,m.tag){case 0:case 11:case 14:case 15:ps(4,m,m.return);break;case 1:yr(m,m.return);var x=m.stateNode;if(typeof x.componentWillUnmount=="function"){r=m,n=m.return;try{t=r,x.props=t.memoizedProps,x.state=t.memoizedState,x.componentWillUnmount()}catch(b){we(r,n,b)}}break;case 5:yr(m,m.return);break;case 22:if(m.memoizedState!==null){yd(d);continue}}g!==null?(g.return=m,H=g):yd(d)}h=h.sibling}e:for(h=null,d=e;;){if(d.tag===5){if(h===null){h=d;try{s=d.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=dm("display",o))}catch(b){we(e,e.return,b)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(b){we(e,e.return,b)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:gt(t,e),Tt(e),r&4&&gd(e);break;case 21:break;default:gt(t,e),Tt(e)}}function Tt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Gf(n)){var r=n;break e}n=n.return}throw Error(D(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(ks(s,""),r.flags&=-33);var i=pd(e);Cl(e,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=pd(e);Sl(e,a,o);break;default:throw Error(D(161))}}catch(c){we(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Jv(e,t,n){H=e,Bf(e)}function Bf(e,t,n){for(var r=(e.mode&1)!==0;H!==null;){var s=H,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||fi;if(!o){var a=s.alternate,c=a!==null&&a.memoizedState!==null||Ge;a=fi;var u=Ge;if(fi=o,(Ge=c)&&!u)for(H=s;H!==null;)o=H,c=o.child,o.tag===22&&o.memoizedState!==null?xd(s):c!==null?(c.return=o,H=c):xd(s);for(;i!==null;)H=i,Bf(i),i=i.sibling;H=s,fi=a,Ge=u}vd(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,H=i):vd(e)}}function vd(e){for(;H!==null;){var t=H;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ge||Eo(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Ge)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:yt(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&td(t,i,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}td(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&Es(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(D(163))}Ge||t.flags&512&&bl(t)}catch(m){we(t,t.return,m)}}if(t===e){H=null;break}if(n=t.sibling,n!==null){n.return=t.return,H=n;break}H=t.return}}function yd(e){for(;H!==null;){var t=H;if(t===e){H=null;break}var n=t.sibling;if(n!==null){n.return=t.return,H=n;break}H=t.return}}function xd(e){for(;H!==null;){var t=H;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Eo(4,t)}catch(c){we(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(c){we(t,s,c)}}var i=t.return;try{bl(t)}catch(c){we(t,i,c)}break;case 5:var o=t.return;try{bl(t)}catch(c){we(t,o,c)}}}catch(c){we(t,t.return,c)}if(t===e){H=null;break}var a=t.sibling;if(a!==null){a.return=t.return,H=a;break}H=t.return}}var Yv=Math.ceil,ro=Jt.ReactCurrentDispatcher,Nc=Jt.ReactCurrentOwner,ht=Jt.ReactCurrentBatchConfig,re=0,Ae=null,Pe=null,_e=0,et=0,xr=En(0),je=0,Fs=null,Kn=0,No=0,Ac=0,gs=null,Ke=null,Mc=0,Gr=1/0,Rt=null,so=!1,kl=null,gn=null,pi=!1,cn=null,io=0,vs=0,Pl=null,Li=-1,_i=0;function Ue(){return re&6?Se():Li!==-1?Li:Li=Se()}function vn(e){return e.mode&1?re&2&&_e!==0?_e&-_e:Rv.transition!==null?(_i===0&&(_i=km()),_i):(e=ie,e!==0||(e=window.event,e=e===void 0?16:Mm(e.type)),e):1}function St(e,t,n,r){if(50<vs)throw vs=0,Pl=null,Error(D(185));$s(e,n,r),(!(re&2)||e!==Ae)&&(e===Ae&&(!(re&2)&&(No|=n),je===4&&an(e,_e)),Ye(e,r),n===1&&re===0&&!(t.mode&1)&&(Gr=Se()+500,Po&&Nn()))}function Ye(e,t){var n=e.callbackNode;Rg(e,t);var r=Hi(e,e===Ae?_e:0);if(r===0)n!==null&&Eu(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Eu(n),t===1)e.tag===0?Dv(wd.bind(null,e)):Xm(wd.bind(null,e)),Av(function(){!(re&6)&&Nn()}),n=null;else{switch(Pm(r)){case 1:n=rc;break;case 4:n=Sm;break;case 16:n=Bi;break;case 536870912:n=Cm;break;default:n=Bi}n=Qf(n,Hf.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Hf(e,t){if(Li=-1,_i=0,re&6)throw Error(D(327));var n=e.callbackNode;if(Ar()&&e.callbackNode!==n)return null;var r=Hi(e,e===Ae?_e:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=oo(e,r);else{t=r;var s=re;re|=2;var i=Uf();(Ae!==e||_e!==t)&&(Rt=null,Gr=Se()+500,zn(e,t));do try{ty();break}catch(a){zf(e,a)}while(1);gc(),ro.current=i,re=s,Pe!==null?t=0:(Ae=null,_e=0,t=je)}if(t!==0){if(t===2&&(s=Ya(e),s!==0&&(r=s,t=Tl(e,s))),t===1)throw n=Fs,zn(e,0),an(e,r),Ye(e,Se()),n;if(t===6)an(e,r);else{if(s=e.current.alternate,!(r&30)&&!Zv(s)&&(t=oo(e,r),t===2&&(i=Ya(e),i!==0&&(r=i,t=Tl(e,i))),t===1))throw n=Fs,zn(e,0),an(e,r),Ye(e,Se()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(D(345));case 2:Rn(e,Ke,Rt);break;case 3:if(an(e,r),(r&130023424)===r&&(t=Mc+500-Se(),10<t)){if(Hi(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){Ue(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=ol(Rn.bind(null,e,Ke,Rt),t);break}Rn(e,Ke,Rt);break;case 4:if(an(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var o=31-bt(r);i=1<<o,o=t[o],o>s&&(s=o),r&=~i}if(r=s,r=Se()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Yv(r/1960))-r,10<r){e.timeoutHandle=ol(Rn.bind(null,e,Ke,Rt),r);break}Rn(e,Ke,Rt);break;case 5:Rn(e,Ke,Rt);break;default:throw Error(D(329))}}}return Ye(e,Se()),e.callbackNode===n?Hf.bind(null,e):null}function Tl(e,t){var n=gs;return e.current.memoizedState.isDehydrated&&(zn(e,t).flags|=256),e=oo(e,t),e!==2&&(t=Ke,Ke=n,t!==null&&jl(t)),e}function jl(e){Ke===null?Ke=e:Ke.push.apply(Ke,e)}function Zv(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Ct(i(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function an(e,t){for(t&=~Ac,t&=~No,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-bt(t),r=1<<n;e[n]=-1,t&=~r}}function wd(e){if(re&6)throw Error(D(327));Ar();var t=Hi(e,0);if(!(t&1))return Ye(e,Se()),null;var n=oo(e,t);if(e.tag!==0&&n===2){var r=Ya(e);r!==0&&(t=r,n=Tl(e,r))}if(n===1)throw n=Fs,zn(e,0),an(e,t),Ye(e,Se()),n;if(n===6)throw Error(D(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Rn(e,Ke,Rt),Ye(e,Se()),null}function Lc(e,t){var n=re;re|=1;try{return e(t)}finally{re=n,re===0&&(Gr=Se()+500,Po&&Nn())}}function Qn(e){cn!==null&&cn.tag===0&&!(re&6)&&Ar();var t=re;re|=1;var n=ht.transition,r=ie;try{if(ht.transition=null,ie=1,e)return e()}finally{ie=r,ht.transition=n,re=t,!(re&6)&&Nn()}}function _c(){et=xr.current,de(xr)}function zn(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Nv(n)),Pe!==null)for(n=Pe.return;n!==null;){var r=n;switch(mc(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Wi();break;case 3:Ir(),de(Xe),de(Ve),Sc();break;case 5:bc(r);break;case 4:Ir();break;case 13:de(pe);break;case 19:de(pe);break;case 10:vc(r.type._context);break;case 22:case 23:_c()}n=n.return}if(Ae=e,Pe=e=yn(e.current,null),_e=et=t,je=0,Fs=null,Ac=No=Kn=0,Ke=gs=null,Vn!==null){for(t=0;t<Vn.length;t++)if(n=Vn[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Vn=null}return e}function zf(e,t){do{var n=Pe;try{if(gc(),Ni.current=no,to){for(var r=ve.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}to=!1}if(Wn=0,Ne=Te=ve=null,fs=!1,Is=0,Nc.current=null,n===null||n.return===null){je=1,Fs=t,Pe=null;break}e:{var i=e,o=n.return,a=n,c=t;if(t=_e,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var g=ad(o);if(g!==null){g.flags&=-257,ld(g,o,a,i,t),g.mode&1&&od(i,u,t),t=g,c=u;var x=t.updateQueue;if(x===null){var b=new Set;b.add(c),t.updateQueue=b}else x.add(c);break e}else{if(!(t&1)){od(i,u,t),Dc();break e}c=Error(D(426))}}else if(fe&&a.mode&1){var k=ad(o);if(k!==null){!(k.flags&65536)&&(k.flags|=256),ld(k,o,a,i,t),fc(Or(c,a));break e}}i=c=Or(c,a),je!==4&&(je=2),gs===null?gs=[i]:gs.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var p=Tf(i,c,t);ed(i,p);break e;case 1:a=c;var f=i.type,y=i.stateNode;if(!(i.flags&128)&&(typeof f.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(gn===null||!gn.has(y)))){i.flags|=65536,t&=-t,i.lanes|=t;var w=jf(i,a,t);ed(i,w);break e}}i=i.return}while(i!==null)}qf(n)}catch(S){t=S,Pe===n&&n!==null&&(Pe=n=n.return);continue}break}while(1)}function Uf(){var e=ro.current;return ro.current=no,e===null?no:e}function Dc(){(je===0||je===3||je===2)&&(je=4),Ae===null||!(Kn&268435455)&&!(No&268435455)||an(Ae,_e)}function oo(e,t){var n=re;re|=2;var r=Uf();(Ae!==e||_e!==t)&&(Rt=null,zn(e,t));do try{ey();break}catch(s){zf(e,s)}while(1);if(gc(),re=n,ro.current=r,Pe!==null)throw Error(D(261));return Ae=null,_e=0,je}function ey(){for(;Pe!==null;)$f(Pe)}function ty(){for(;Pe!==null&&!Tg();)$f(Pe)}function $f(e){var t=Kf(e.alternate,e,et);e.memoizedProps=e.pendingProps,t===null?qf(e):Pe=t,Nc.current=null}function qf(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Kv(n,t),n!==null){n.flags&=32767,Pe=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{je=6,Pe=null;return}}else if(n=Wv(n,t,et),n!==null){Pe=n;return}if(t=t.sibling,t!==null){Pe=t;return}Pe=t=e}while(t!==null);je===0&&(je=5)}function Rn(e,t,n){var r=ie,s=ht.transition;try{ht.transition=null,ie=1,ny(e,t,n,r)}finally{ht.transition=s,ie=r}return null}function ny(e,t,n,r){do Ar();while(cn!==null);if(re&6)throw Error(D(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(D(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(Ig(e,i),e===Ae&&(Pe=Ae=null,_e=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||pi||(pi=!0,Qf(Bi,function(){return Ar(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=ht.transition,ht.transition=null;var o=ie;ie=1;var a=re;re|=4,Nc.current=null,Xv(e,n),Vf(n,e),Sv(sl),zi=!!rl,sl=rl=null,e.current=n,Jv(n),jg(),re=a,ie=o,ht.transition=i}else e.current=n;if(pi&&(pi=!1,cn=e,io=s),i=e.pendingLanes,i===0&&(gn=null),Ag(n.stateNode),Ye(e,Se()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(so)throw so=!1,e=kl,kl=null,e;return io&1&&e.tag!==0&&Ar(),i=e.pendingLanes,i&1?e===Pl?vs++:(vs=0,Pl=e):vs=0,Nn(),null}function Ar(){if(cn!==null){var e=Pm(io),t=ht.transition,n=ie;try{if(ht.transition=null,ie=16>e?16:e,cn===null)var r=!1;else{if(e=cn,cn=null,io=0,re&6)throw Error(D(331));var s=re;for(re|=4,H=e.current;H!==null;){var i=H,o=i.child;if(H.flags&16){var a=i.deletions;if(a!==null){for(var c=0;c<a.length;c++){var u=a[c];for(H=u;H!==null;){var h=H;switch(h.tag){case 0:case 11:case 15:ps(8,h,i)}var d=h.child;if(d!==null)d.return=h,H=d;else for(;H!==null;){h=H;var m=h.sibling,g=h.return;if(Of(h),h===u){H=null;break}if(m!==null){m.return=g,H=m;break}H=g}}}var x=i.alternate;if(x!==null){var b=x.child;if(b!==null){x.child=null;do{var k=b.sibling;b.sibling=null,b=k}while(b!==null)}}H=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,H=o;else e:for(;H!==null;){if(i=H,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ps(9,i,i.return)}var p=i.sibling;if(p!==null){p.return=i.return,H=p;break e}H=i.return}}var f=e.current;for(H=f;H!==null;){o=H;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,H=y;else e:for(o=f;H!==null;){if(a=H,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Eo(9,a)}}catch(S){we(a,a.return,S)}if(a===o){H=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,H=w;break e}H=a.return}}if(re=s,Nn(),Mt&&typeof Mt.onPostCommitFiberRoot=="function")try{Mt.onPostCommitFiberRoot(wo,e)}catch{}r=!0}return r}finally{ie=n,ht.transition=t}}return!1}function bd(e,t,n){t=Or(n,t),t=Tf(e,t,1),e=pn(e,t,1),t=Ue(),e!==null&&($s(e,1,t),Ye(e,t))}function we(e,t,n){if(e.tag===3)bd(e,e,n);else for(;t!==null;){if(t.tag===3){bd(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(gn===null||!gn.has(r))){e=Or(n,e),e=jf(t,e,1),t=pn(t,e,1),e=Ue(),t!==null&&($s(t,1,e),Ye(t,e));break}}t=t.return}}function ry(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Ue(),e.pingedLanes|=e.suspendedLanes&n,Ae===e&&(_e&n)===n&&(je===4||je===3&&(_e&130023424)===_e&&500>Se()-Mc?zn(e,0):Ac|=n),Ye(e,t)}function Wf(e,t){t===0&&(e.mode&1?(t=ii,ii<<=1,!(ii&130023424)&&(ii=4194304)):t=1);var n=Ue();e=Kt(e,t),e!==null&&($s(e,t,n),Ye(e,n))}function sy(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Wf(e,n)}function iy(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(D(314))}r!==null&&r.delete(t),Wf(e,n)}var Kf;Kf=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Xe.current)Qe=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Qe=!1,qv(e,t,n);Qe=!!(e.flags&131072)}else Qe=!1,fe&&t.flags&1048576&&Jm(t,Xi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Mi(e,t),e=t.pendingProps;var s=_r(t,Ve.current);Nr(t,n),s=kc(null,t,r,e,s,n);var i=Pc();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Je(r)?(i=!0,Ki(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,xc(t),s.updater=jo,t.stateNode=s,s._reactInternals=t,ml(t,r,e,n),t=gl(null,t,r,!0,i,n)):(t.tag=0,fe&&i&&hc(t),ze(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Mi(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=ay(r),e=yt(r,e),s){case 0:t=pl(null,t,r,e,n);break e;case 1:t=dd(null,t,r,e,n);break e;case 11:t=cd(null,t,r,e,n);break e;case 14:t=ud(null,t,r,yt(r.type,e),n);break e}throw Error(D(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:yt(r,s),pl(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:yt(r,s),dd(e,t,r,s,n);case 3:e:{if(Mf(t),e===null)throw Error(D(387));r=t.pendingProps,i=t.memoizedState,s=i.element,rf(e,t),Zi(t,r,null,n);var o=t.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=Or(Error(D(423)),t),t=hd(e,t,r,n,s);break e}else if(r!==s){s=Or(Error(D(424)),t),t=hd(e,t,r,n,s);break e}else for(tt=fn(t.stateNode.containerInfo.firstChild),nt=t,fe=!0,wt=null,n=tf(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Dr(),r===s){t=Qt(e,t,n);break e}ze(e,t,r,n)}t=t.child}return t;case 5:return sf(t),e===null&&ul(t),r=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,il(r,s)?o=null:i!==null&&il(r,i)&&(t.flags|=32),Af(e,t),ze(e,t,o,n),t.child;case 6:return e===null&&ul(t),null;case 13:return Lf(e,t,n);case 4:return wc(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Rr(t,null,r,n):ze(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:yt(r,s),cd(e,t,r,s,n);case 7:return ze(e,t,t.pendingProps,n),t.child;case 8:return ze(e,t,t.pendingProps.children,n),t.child;case 12:return ze(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,le(Ji,r._currentValue),r._currentValue=o,i!==null)if(Ct(i.value,o)){if(i.children===s.children&&!Xe.current){t=Qt(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=zt(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),dl(i.return,n,t),a.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(D(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),dl(o,n,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}ze(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Nr(t,n),s=mt(s),r=r(s),t.flags|=1,ze(e,t,r,n),t.child;case 14:return r=t.type,s=yt(r,t.pendingProps),s=yt(r.type,s),ud(e,t,r,s,n);case 15:return Ef(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:yt(r,s),Mi(e,t),t.tag=1,Je(r)?(e=!0,Ki(t)):e=!1,Nr(t,n),Pf(t,r,s),ml(t,r,s,n),gl(null,t,r,!0,e,n);case 19:return _f(e,t,n);case 22:return Nf(e,t,n)}throw Error(D(156,t.tag))};function Qf(e,t){return bm(e,t)}function oy(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function dt(e,t,n,r){return new oy(e,t,n,r)}function Rc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ay(e){if(typeof e=="function")return Rc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===ec)return 11;if(e===tc)return 14}return 2}function yn(e,t){var n=e.alternate;return n===null?(n=dt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Di(e,t,n,r,s,i){var o=2;if(r=e,typeof e=="function")Rc(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case cr:return Un(n.children,s,i,t);case Zl:o=8,s|=8;break;case Oa:return e=dt(12,n,t,s|2),e.elementType=Oa,e.lanes=i,e;case Ga:return e=dt(13,n,t,s),e.elementType=Ga,e.lanes=i,e;case Fa:return e=dt(19,n,t,s),e.elementType=Fa,e.lanes=i,e;case sm:return Ao(n,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case nm:o=10;break e;case rm:o=9;break e;case ec:o=11;break e;case tc:o=14;break e;case nn:o=16,r=null;break e}throw Error(D(130,e==null?e:typeof e,""))}return t=dt(o,n,t,s),t.elementType=e,t.type=r,t.lanes=i,t}function Un(e,t,n,r){return e=dt(7,e,r,t),e.lanes=n,e}function Ao(e,t,n,r){return e=dt(22,e,r,t),e.elementType=sm,e.lanes=n,e.stateNode={isHidden:!1},e}function ga(e,t,n){return e=dt(6,e,null,t),e.lanes=n,e}function va(e,t,n){return t=dt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ly(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Jo(0),this.expirationTimes=Jo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Jo(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Ic(e,t,n,r,s,i,o,a,c){return e=new ly(e,t,n,a,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=dt(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},xc(i),e}function cy(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:lr,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Xf(e){if(!e)return Sn;e=e._reactInternals;e:{if(rr(e)!==e||e.tag!==1)throw Error(D(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Je(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(D(171))}if(e.tag===1){var n=e.type;if(Je(n))return Qm(e,n,t)}return t}function Jf(e,t,n,r,s,i,o,a,c){return e=Ic(n,r,!0,e,s,i,o,a,c),e.context=Xf(null),n=e.current,r=Ue(),s=vn(n),i=zt(r,s),i.callback=t??null,pn(n,i,s),e.current.lanes=s,$s(e,s,r),Ye(e,r),e}function Mo(e,t,n,r){var s=t.current,i=Ue(),o=vn(s);return n=Xf(n),t.context===null?t.context=n:t.pendingContext=n,t=zt(i,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=pn(s,t,o),e!==null&&(St(e,s,o,i),Ei(e,s,o)),o}function ao(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Sd(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Oc(e,t){Sd(e,t),(e=e.alternate)&&Sd(e,t)}function uy(){return null}var Yf=typeof reportError=="function"?reportError:function(e){console.error(e)};function Gc(e){this._internalRoot=e}Lo.prototype.render=Gc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(D(409));Mo(e,t,null,null)};Lo.prototype.unmount=Gc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Qn(function(){Mo(null,e,null,null)}),t[Wt]=null}};function Lo(e){this._internalRoot=e}Lo.prototype.unstable_scheduleHydration=function(e){if(e){var t=Em();e={blockedOn:null,target:e,priority:t};for(var n=0;n<on.length&&t!==0&&t<on[n].priority;n++);on.splice(n,0,e),n===0&&Am(e)}};function Fc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function _o(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Cd(){}function dy(e,t,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=ao(o);i.call(u)}}var o=Jf(t,r,e,0,null,!1,!1,"",Cd);return e._reactRootContainer=o,e[Wt]=o.current,Ms(e.nodeType===8?e.parentNode:e),Qn(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var u=ao(c);a.call(u)}}var c=Ic(e,0,!1,null,null,!1,!1,"",Cd);return e._reactRootContainer=c,e[Wt]=c.current,Ms(e.nodeType===8?e.parentNode:e),Qn(function(){Mo(t,c,n,r)}),c}function Do(e,t,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var c=ao(o);a.call(c)}}Mo(t,o,e,s)}else o=dy(n,t,e,s,r);return ao(o)}Tm=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=os(t.pendingLanes);n!==0&&(sc(t,n|1),Ye(t,Se()),!(re&6)&&(Gr=Se()+500,Nn()))}break;case 13:Qn(function(){var r=Kt(e,1);if(r!==null){var s=Ue();St(r,e,1,s)}}),Oc(e,1)}};ic=function(e){if(e.tag===13){var t=Kt(e,134217728);if(t!==null){var n=Ue();St(t,e,134217728,n)}Oc(e,134217728)}};jm=function(e){if(e.tag===13){var t=vn(e),n=Kt(e,t);if(n!==null){var r=Ue();St(n,e,t,r)}Oc(e,t)}};Em=function(){return ie};Nm=function(e,t){var n=ie;try{return ie=e,t()}finally{ie=n}};Qa=function(e,t,n){switch(t){case"input":if(Ha(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=ko(r);if(!s)throw Error(D(90));om(r),Ha(r,s)}}}break;case"textarea":lm(e,n);break;case"select":t=n.value,t!=null&&Pr(e,!!n.multiple,t,!1)}};pm=Lc;gm=Qn;var hy={usingClientEntryPoint:!1,Events:[Ws,mr,ko,mm,fm,Lc]},es={findFiberByHostInstance:Fn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},my={bundleType:es.bundleType,version:es.version,rendererPackageName:es.rendererPackageName,rendererConfig:es.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Jt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=xm(e),e===null?null:e.stateNode},findFiberByHostInstance:es.findFiberByHostInstance||uy,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var gi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!gi.isDisabled&&gi.supportsFiber)try{wo=gi.inject(my),Mt=gi}catch{}}it.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hy;it.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Fc(t))throw Error(D(200));return cy(e,t,null,n)};it.createRoot=function(e,t){if(!Fc(e))throw Error(D(299));var n=!1,r="",s=Yf;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Ic(e,1,!1,null,null,n,!1,r,s),e[Wt]=t.current,Ms(e.nodeType===8?e.parentNode:e),new Gc(t)};it.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(D(188)):(e=Object.keys(e).join(","),Error(D(268,e)));return e=xm(t),e=e===null?null:e.stateNode,e};it.flushSync=function(e){return Qn(e)};it.hydrate=function(e,t,n){if(!_o(t))throw Error(D(200));return Do(null,e,t,!0,n)};it.hydrateRoot=function(e,t,n){if(!Fc(e))throw Error(D(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=Yf;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=Jf(t,null,e,1,n??null,s,!1,i,o),e[Wt]=t.current,Ms(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Lo(t)};it.render=function(e,t,n){if(!_o(t))throw Error(D(200));return Do(null,e,t,!1,n)};it.unmountComponentAtNode=function(e){if(!_o(e))throw Error(D(40));return e._reactRootContainer?(Qn(function(){Do(null,null,e,!1,function(){e._reactRootContainer=null,e[Wt]=null})}),!0):!1};it.unstable_batchedUpdates=Lc;it.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!_o(n))throw Error(D(200));if(e==null||e._reactInternals===void 0)throw Error(D(38));return Do(e,t,n,!1,r)};it.version="18.3.1-next-f1338f8080-20240426";function Zf(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Zf)}catch(e){console.error(e)}}Zf(),Yh.exports=it;var fy=Yh.exports,kd=fy;Ra.createRoot=kd.createRoot,Ra.hydrateRoot=kd.hydrateRoot;const py="modulepreload",gy=function(e){return"/cat-tetris/"+e},Pd={},Vc=function(t,n,r){if(!n||n.length===0)return t();const s=document.getElementsByTagName("link");return Promise.all(n.map(i=>{if(i=gy(i),i in Pd)return;Pd[i]=!0;const o=i.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!r)for(let h=s.length-1;h>=0;h--){const d=s[h];if(d.href===i&&(!o||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${a}`))return;const u=document.createElement("link");if(u.rel=o?"stylesheet":py,o||(u.as="script",u.crossOrigin=""),u.href=i,document.head.appendChild(u),o)return new Promise((h,d)=>{u.addEventListener("load",h),u.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>t()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})},ep=v.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),Ro=v.createContext({}),Io=v.createContext(null),Oo=typeof document<"u",Bc=Oo?v.useLayoutEffect:v.useEffect,tp=v.createContext({strict:!1}),Hc=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),vy="framerAppearId",np="data-"+Hc(vy);function yy(e,t,n,r){const{visualElement:s}=v.useContext(Ro),i=v.useContext(tp),o=v.useContext(Io),a=v.useContext(ep).reducedMotion,c=v.useRef();r=r||i.renderer,!c.current&&r&&(c.current=r(e,{visualState:t,parent:s,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:a}));const u=c.current;v.useInsertionEffect(()=>{u&&u.update(n,o)});const h=v.useRef(!!(n[np]&&!window.HandoffComplete));return Bc(()=>{u&&(u.render(),h.current&&u.animationState&&u.animationState.animateChanges())}),v.useEffect(()=>{u&&(u.updateFeatures(),!h.current&&u.animationState&&u.animationState.animateChanges(),h.current&&(h.current=!1,window.HandoffComplete=!0))}),u}function wr(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function xy(e,t,n){return v.useCallback(r=>{r&&e.mount&&e.mount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):wr(n)&&(n.current=r))},[t])}function Vs(e){return typeof e=="string"||Array.isArray(e)}function Go(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const zc=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Uc=["initial",...zc];function Fo(e){return Go(e.animate)||Uc.some(t=>Vs(e[t]))}function rp(e){return!!(Fo(e)||e.variants)}function wy(e,t){if(Fo(e)){const{initial:n,animate:r}=e;return{initial:n===!1||Vs(n)?n:void 0,animate:Vs(r)?r:void 0}}return e.inherit!==!1?t:{}}function by(e){const{initial:t,animate:n}=wy(e,v.useContext(Ro));return v.useMemo(()=>({initial:t,animate:n}),[Td(t),Td(n)])}function Td(e){return Array.isArray(e)?e.join(" "):e}const jd={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Bs={};for(const e in jd)Bs[e]={isEnabled:t=>jd[e].some(n=>!!t[n])};function Sy(e){for(const t in e)Bs[t]={...Bs[t],...e[t]}}const $c=v.createContext({}),sp=v.createContext({}),Cy=Symbol.for("motionComponentSymbol");function ky({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:r,Component:s}){e&&Sy(e);function i(a,c){let u;const h={...v.useContext(ep),...a,layoutId:Py(a)},{isStatic:d}=h,m=by(a),g=r(a,d);if(!d&&Oo){m.visualElement=yy(s,g,h,t);const x=v.useContext(sp),b=v.useContext(tp).strict;m.visualElement&&(u=m.visualElement.loadFeatures(h,b,e,x))}return v.createElement(Ro.Provider,{value:m},u&&m.visualElement?v.createElement(u,{visualElement:m.visualElement,...h}):null,n(s,a,xy(g,m.visualElement,c),g,d,m.visualElement))}const o=v.forwardRef(i);return o[Cy]=s,o}function Py({layoutId:e}){const t=v.useContext($c).id;return t&&e!==void 0?t+"-"+e:e}function Ty(e){function t(r,s={}){return ky(e(r,s))}if(typeof Proxy>"u")return t;const n=new Map;return new Proxy(t,{get:(r,s)=>(n.has(s)||n.set(s,t(s)),n.get(s))})}const jy=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function qc(e){return typeof e!="string"||e.includes("-")?!1:!!(jy.indexOf(e)>-1||/[A-Z]/.test(e))}const lo={};function Ey(e){Object.assign(lo,e)}const Qs=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],sr=new Set(Qs);function ip(e,{layout:t,layoutId:n}){return sr.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!lo[e]||e==="opacity")}const Ze=e=>!!(e&&e.getVelocity),Ny={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Ay=Qs.length;function My(e,{enableHardwareAcceleration:t=!0,allowTransformNone:n=!0},r,s){let i="";for(let o=0;o<Ay;o++){const a=Qs[o];if(e[a]!==void 0){const c=Ny[a]||a;i+=`${c}(${e[a]}) `}}return t&&!e.z&&(i+="translateZ(0)"),i=i.trim(),s?i=s(e,r?"":i):n&&r&&(i="none"),i}const op=e=>t=>typeof t=="string"&&t.startsWith(e),ap=op("--"),El=op("var(--"),Ly=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,_y=(e,t)=>t&&typeof e=="number"?t.transform(e):e,Cn=(e,t,n)=>Math.min(Math.max(n,e),t),ir={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},ys={...ir,transform:e=>Cn(0,1,e)},vi={...ir,default:1},xs=e=>Math.round(e*1e5)/1e5,Vo=/(-)?([\d]*\.?[\d])+/g,lp=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,Dy=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Xs(e){return typeof e=="string"}const Js=e=>({test:t=>Xs(t)&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),en=Js("deg"),_t=Js("%"),Y=Js("px"),Ry=Js("vh"),Iy=Js("vw"),Ed={..._t,parse:e=>_t.parse(e)/100,transform:e=>_t.transform(e*100)},Nd={...ir,transform:Math.round},cp={borderWidth:Y,borderTopWidth:Y,borderRightWidth:Y,borderBottomWidth:Y,borderLeftWidth:Y,borderRadius:Y,radius:Y,borderTopLeftRadius:Y,borderTopRightRadius:Y,borderBottomRightRadius:Y,borderBottomLeftRadius:Y,width:Y,maxWidth:Y,height:Y,maxHeight:Y,size:Y,top:Y,right:Y,bottom:Y,left:Y,padding:Y,paddingTop:Y,paddingRight:Y,paddingBottom:Y,paddingLeft:Y,margin:Y,marginTop:Y,marginRight:Y,marginBottom:Y,marginLeft:Y,rotate:en,rotateX:en,rotateY:en,rotateZ:en,scale:vi,scaleX:vi,scaleY:vi,scaleZ:vi,skew:en,skewX:en,skewY:en,distance:Y,translateX:Y,translateY:Y,translateZ:Y,x:Y,y:Y,z:Y,perspective:Y,transformPerspective:Y,opacity:ys,originX:Ed,originY:Ed,originZ:Y,zIndex:Nd,fillOpacity:ys,strokeOpacity:ys,numOctaves:Nd};function Wc(e,t,n,r){const{style:s,vars:i,transform:o,transformOrigin:a}=e;let c=!1,u=!1,h=!0;for(const d in t){const m=t[d];if(ap(d)){i[d]=m;continue}const g=cp[d],x=_y(m,g);if(sr.has(d)){if(c=!0,o[d]=x,!h)continue;m!==(g.default||0)&&(h=!1)}else d.startsWith("origin")?(u=!0,a[d]=x):s[d]=x}if(t.transform||(c||r?s.transform=My(e.transform,n,h,r):s.transform&&(s.transform="none")),u){const{originX:d="50%",originY:m="50%",originZ:g=0}=a;s.transformOrigin=`${d} ${m} ${g}`}}const Kc=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function up(e,t,n){for(const r in t)!Ze(t[r])&&!ip(r,n)&&(e[r]=t[r])}function Oy({transformTemplate:e},t,n){return v.useMemo(()=>{const r=Kc();return Wc(r,t,{enableHardwareAcceleration:!n},e),Object.assign({},r.vars,r.style)},[t])}function Gy(e,t,n){const r=e.style||{},s={};return up(s,r,e),Object.assign(s,Oy(e,t,n)),e.transformValues?e.transformValues(s):s}function Fy(e,t,n){const r={},s=Gy(e,t,n);return e.drag&&e.dragListener!==!1&&(r.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=s,r}const Vy=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function co(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||Vy.has(e)}let dp=e=>!co(e);function By(e){e&&(dp=t=>t.startsWith("on")?!co(t):e(t))}try{By(require("@emotion/is-prop-valid").default)}catch{}function Hy(e,t,n){const r={};for(const s in e)s==="values"&&typeof e.values=="object"||(dp(s)||n===!0&&co(s)||!t&&!co(s)||e.draggable&&s.startsWith("onDrag"))&&(r[s]=e[s]);return r}function Ad(e,t,n){return typeof e=="string"?e:Y.transform(t+n*e)}function zy(e,t,n){const r=Ad(t,e.x,e.width),s=Ad(n,e.y,e.height);return`${r} ${s}`}const Uy={offset:"stroke-dashoffset",array:"stroke-dasharray"},$y={offset:"strokeDashoffset",array:"strokeDasharray"};function qy(e,t,n=1,r=0,s=!0){e.pathLength=1;const i=s?Uy:$y;e[i.offset]=Y.transform(-r);const o=Y.transform(t),a=Y.transform(n);e[i.array]=`${o} ${a}`}function Qc(e,{attrX:t,attrY:n,attrScale:r,originX:s,originY:i,pathLength:o,pathSpacing:a=1,pathOffset:c=0,...u},h,d,m){if(Wc(e,u,h,m),d){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:g,style:x,dimensions:b}=e;g.transform&&(b&&(x.transform=g.transform),delete g.transform),b&&(s!==void 0||i!==void 0||x.transform)&&(x.transformOrigin=zy(b,s!==void 0?s:.5,i!==void 0?i:.5)),t!==void 0&&(g.x=t),n!==void 0&&(g.y=n),r!==void 0&&(g.scale=r),o!==void 0&&qy(g,o,a,c,!1)}const hp=()=>({...Kc(),attrs:{}}),Xc=e=>typeof e=="string"&&e.toLowerCase()==="svg";function Wy(e,t,n,r){const s=v.useMemo(()=>{const i=hp();return Qc(i,t,{enableHardwareAcceleration:!1},Xc(r),e.transformTemplate),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};up(i,e.style,e),s.style={...i,...s.style}}return s}function Ky(e=!1){return(n,r,s,{latestValues:i},o)=>{const c=(qc(n)?Wy:Fy)(r,i,o,n),h={...Hy(r,typeof n=="string",e),...c,ref:s},{children:d}=r,m=v.useMemo(()=>Ze(d)?d.get():d,[d]);return v.createElement(n,{...h,children:m})}}function mp(e,{style:t,vars:n},r,s){Object.assign(e.style,t,s&&s.getProjectionStyles(r));for(const i in n)e.style.setProperty(i,n[i])}const fp=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function pp(e,t,n,r){mp(e,t,void 0,r);for(const s in t.attrs)e.setAttribute(fp.has(s)?s:Hc(s),t.attrs[s])}function Jc(e,t){const{style:n}=e,r={};for(const s in n)(Ze(n[s])||t.style&&Ze(t.style[s])||ip(s,e))&&(r[s]=n[s]);return r}function gp(e,t){const n=Jc(e,t);for(const r in e)if(Ze(e[r])||Ze(t[r])){const s=Qs.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[s]=e[r]}return n}function Yc(e,t,n,r={},s={}){return typeof t=="function"&&(t=t(n!==void 0?n:e.custom,r,s)),typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"&&(t=t(n!==void 0?n:e.custom,r,s)),t}function vp(e){const t=v.useRef(null);return t.current===null&&(t.current=e()),t.current}const uo=e=>Array.isArray(e),Qy=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),Xy=e=>uo(e)?e[e.length-1]||0:e;function Ri(e){const t=Ze(e)?e.get():e;return Qy(t)?t.toValue():t}function Jy({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:n},r,s,i){const o={latestValues:Yy(r,s,i,e),renderState:t()};return n&&(o.mount=a=>n(r,a,o)),o}const yp=e=>(t,n)=>{const r=v.useContext(Ro),s=v.useContext(Io),i=()=>Jy(e,t,r,s);return n?i():vp(i)};function Yy(e,t,n,r){const s={},i=r(e,{});for(const m in i)s[m]=Ri(i[m]);let{initial:o,animate:a}=e;const c=Fo(e),u=rp(e);t&&u&&!c&&e.inherit!==!1&&(o===void 0&&(o=t.initial),a===void 0&&(a=t.animate));let h=n?n.initial===!1:!1;h=h||o===!1;const d=h?a:o;return d&&typeof d!="boolean"&&!Go(d)&&(Array.isArray(d)?d:[d]).forEach(g=>{const x=Yc(e,g);if(!x)return;const{transitionEnd:b,transition:k,...p}=x;for(const f in p){let y=p[f];if(Array.isArray(y)){const w=h?y.length-1:0;y=y[w]}y!==null&&(s[f]=y)}for(const f in b)s[f]=b[f]}),s}const be=e=>e;class Md{constructor(){this.order=[],this.scheduled=new Set}add(t){if(!this.scheduled.has(t))return this.scheduled.add(t),this.order.push(t),!0}remove(t){const n=this.order.indexOf(t);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(t))}clear(){this.order.length=0,this.scheduled.clear()}}function Zy(e){let t=new Md,n=new Md,r=0,s=!1,i=!1;const o=new WeakSet,a={schedule:(c,u=!1,h=!1)=>{const d=h&&s,m=d?t:n;return u&&o.add(c),m.add(c)&&d&&s&&(r=t.order.length),c},cancel:c=>{n.remove(c),o.delete(c)},process:c=>{if(s){i=!0;return}if(s=!0,[t,n]=[n,t],n.clear(),r=t.order.length,r)for(let u=0;u<r;u++){const h=t.order[u];h(c),o.has(h)&&(a.schedule(h),e())}s=!1,i&&(i=!1,a.process(c))}};return a}const yi=["prepare","read","update","preRender","render","postRender"],ex=40;function tx(e,t){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=yi.reduce((d,m)=>(d[m]=Zy(()=>n=!0),d),{}),o=d=>i[d].process(s),a=()=>{const d=performance.now();n=!1,s.delta=r?1e3/60:Math.max(Math.min(d-s.timestamp,ex),1),s.timestamp=d,s.isProcessing=!0,yi.forEach(o),s.isProcessing=!1,n&&t&&(r=!1,e(a))},c=()=>{n=!0,r=!0,s.isProcessing||e(a)};return{schedule:yi.reduce((d,m)=>{const g=i[m];return d[m]=(x,b=!1,k=!1)=>(n||c(),g.schedule(x,b,k)),d},{}),cancel:d=>yi.forEach(m=>i[m].cancel(d)),state:s,steps:i}}const{schedule:ce,cancel:Xt,state:Oe,steps:ya}=tx(typeof requestAnimationFrame<"u"?requestAnimationFrame:be,!0),nx={useVisualState:yp({scrapeMotionValuesFromProps:gp,createRenderState:hp,onMount:(e,t,{renderState:n,latestValues:r})=>{ce.read(()=>{try{n.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),ce.render(()=>{Qc(n,r,{enableHardwareAcceleration:!1},Xc(t.tagName),e.transformTemplate),pp(t,n)})}})},rx={useVisualState:yp({scrapeMotionValuesFromProps:Jc,createRenderState:Kc})};function sx(e,{forwardMotionProps:t=!1},n,r){return{...qc(e)?nx:rx,preloadedFeatures:n,useRender:Ky(t),createVisualElement:r,Component:e}}function Bt(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}const xp=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function Bo(e,t="page"){return{point:{x:e[t+"X"],y:e[t+"Y"]}}}const ix=e=>t=>xp(t)&&e(t,Bo(t));function Ut(e,t,n,r){return Bt(e,t,ix(n),r)}const ox=(e,t)=>n=>t(e(n)),xn=(...e)=>e.reduce(ox);function wp(e){let t=null;return()=>{const n=()=>{t=null};return t===null?(t=e,n):!1}}const Ld=wp("dragHorizontal"),_d=wp("dragVertical");function bp(e){let t=!1;if(e==="y")t=_d();else if(e==="x")t=Ld();else{const n=Ld(),r=_d();n&&r?t=()=>{n(),r()}:(n&&n(),r&&r())}return t}function Sp(){const e=bp(!0);return e?(e(),!1):!0}class An{constructor(t){this.isMounted=!1,this.node=t}update(){}}function Dd(e,t){const n="pointer"+(t?"enter":"leave"),r="onHover"+(t?"Start":"End"),s=(i,o)=>{if(i.pointerType==="touch"||Sp())return;const a=e.getProps();e.animationState&&a.whileHover&&e.animationState.setActive("whileHover",t),a[r]&&ce.update(()=>a[r](i,o))};return Ut(e.current,n,s,{passive:!e.getProps()[r]})}class ax extends An{mount(){this.unmount=xn(Dd(this.node,!0),Dd(this.node,!1))}unmount(){}}class lx extends An{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=xn(Bt(this.node.current,"focus",()=>this.onFocus()),Bt(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const Cp=(e,t)=>t?e===t?!0:Cp(e,t.parentElement):!1;function xa(e,t){if(!t)return;const n=new PointerEvent("pointer"+e);t(n,Bo(n))}class cx extends An{constructor(){super(...arguments),this.removeStartListeners=be,this.removeEndListeners=be,this.removeAccessibleListeners=be,this.startPointerPress=(t,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),i=Ut(window,"pointerup",(a,c)=>{if(!this.checkPressEnd())return;const{onTap:u,onTapCancel:h,globalTapTarget:d}=this.node.getProps();ce.update(()=>{!d&&!Cp(this.node.current,a.target)?h&&h(a,c):u&&u(a,c)})},{passive:!(r.onTap||r.onPointerUp)}),o=Ut(window,"pointercancel",(a,c)=>this.cancelPress(a,c),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=xn(i,o),this.startPress(t,n)},this.startAccessiblePress=()=>{const t=i=>{if(i.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||xa("up",(c,u)=>{const{onTap:h}=this.node.getProps();h&&ce.update(()=>h(c,u))})};this.removeEndListeners(),this.removeEndListeners=Bt(this.node.current,"keyup",o),xa("down",(a,c)=>{this.startPress(a,c)})},n=Bt(this.node.current,"keydown",t),r=()=>{this.isPressing&&xa("cancel",(i,o)=>this.cancelPress(i,o))},s=Bt(this.node.current,"blur",r);this.removeAccessibleListeners=xn(n,s)}}startPress(t,n){this.isPressing=!0;const{onTapStart:r,whileTap:s}=this.node.getProps();s&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&ce.update(()=>r(t,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!Sp()}cancelPress(t,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&ce.update(()=>r(t,n))}mount(){const t=this.node.getProps(),n=Ut(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),r=Bt(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=xn(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const Nl=new WeakMap,wa=new WeakMap,ux=e=>{const t=Nl.get(e.target);t&&t(e)},dx=e=>{e.forEach(ux)};function hx({root:e,...t}){const n=e||document;wa.has(n)||wa.set(n,{});const r=wa.get(n),s=JSON.stringify(t);return r[s]||(r[s]=new IntersectionObserver(dx,{root:e,...t})),r[s]}function mx(e,t,n){const r=hx(t);return Nl.set(e,n),r.observe(e),()=>{Nl.delete(e),r.unobserve(e)}}const fx={some:0,all:1};class px extends An{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:i}=t,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:fx[s]},a=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,i&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:h,onViewportLeave:d}=this.node.getProps(),m=u?h:d;m&&m(c)};return mx(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(gx(t,n))&&this.startObserver()}unmount(){}}function gx({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const vx={inView:{Feature:px},tap:{Feature:cx},focus:{Feature:lx},hover:{Feature:ax}};function kp(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function yx(e){const t={};return e.values.forEach((n,r)=>t[r]=n.get()),t}function xx(e){const t={};return e.values.forEach((n,r)=>t[r]=n.getVelocity()),t}function Ho(e,t,n){const r=e.getProps();return Yc(r,t,n!==void 0?n:r.custom,yx(e),xx(e))}let wx=be,Zc=be;const wn=e=>e*1e3,$t=e=>e/1e3,bx={current:!1},Pp=e=>Array.isArray(e)&&typeof e[0]=="number";function Tp(e){return!!(!e||typeof e=="string"&&jp[e]||Pp(e)||Array.isArray(e)&&e.every(Tp))}const ls=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,jp={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ls([0,.65,.55,1]),circOut:ls([.55,0,1,.45]),backIn:ls([.31,.01,.66,-.59]),backOut:ls([.33,1.53,.69,.99])};function Ep(e){if(e)return Pp(e)?ls(e):Array.isArray(e)?e.map(Ep):jp[e]}function Sx(e,t,n,{delay:r=0,duration:s,repeat:i=0,repeatType:o="loop",ease:a,times:c}={}){const u={[t]:n};c&&(u.offset=c);const h=Ep(a);return Array.isArray(h)&&(u.easing=h),e.animate(u,{delay:r,duration:s,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"})}function Cx(e,{repeat:t,repeatType:n="loop"}){const r=t&&n!=="loop"&&t%2===1?0:e.length-1;return e[r]}const Np=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,kx=1e-7,Px=12;function Tx(e,t,n,r,s){let i,o,a=0;do o=t+(n-t)/2,i=Np(o,r,s)-e,i>0?n=o:t=o;while(Math.abs(i)>kx&&++a<Px);return o}function Ys(e,t,n,r){if(e===t&&n===r)return be;const s=i=>Tx(i,0,1,e,n);return i=>i===0||i===1?i:Np(s(i),t,r)}const jx=Ys(.42,0,1,1),Ex=Ys(0,0,.58,1),Ap=Ys(.42,0,.58,1),Nx=e=>Array.isArray(e)&&typeof e[0]!="number",Mp=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,Lp=e=>t=>1-e(1-t),eu=e=>1-Math.sin(Math.acos(e)),_p=Lp(eu),Ax=Mp(eu),Dp=Ys(.33,1.53,.69,.99),tu=Lp(Dp),Mx=Mp(tu),Lx=e=>(e*=2)<1?.5*tu(e):.5*(2-Math.pow(2,-10*(e-1))),_x={linear:be,easeIn:jx,easeInOut:Ap,easeOut:Ex,circIn:eu,circInOut:Ax,circOut:_p,backIn:tu,backInOut:Mx,backOut:Dp,anticipate:Lx},Rd=e=>{if(Array.isArray(e)){Zc(e.length===4);const[t,n,r,s]=e;return Ys(t,n,r,s)}else if(typeof e=="string")return _x[e];return e},nu=(e,t)=>n=>!!(Xs(n)&&Dy.test(n)&&n.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(n,t)),Rp=(e,t,n)=>r=>{if(!Xs(r))return r;const[s,i,o,a]=r.match(Vo);return{[e]:parseFloat(s),[t]:parseFloat(i),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},Dx=e=>Cn(0,255,e),ba={...ir,transform:e=>Math.round(Dx(e))},Hn={test:nu("rgb","red"),parse:Rp("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+ba.transform(e)+", "+ba.transform(t)+", "+ba.transform(n)+", "+xs(ys.transform(r))+")"};function Rx(e){let t="",n="",r="",s="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),s=e.substring(4,5),t+=t,n+=n,r+=r,s+=s),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const Al={test:nu("#"),parse:Rx,transform:Hn.transform},br={test:nu("hsl","hue"),parse:Rp("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+_t.transform(xs(t))+", "+_t.transform(xs(n))+", "+xs(ys.transform(r))+")"},He={test:e=>Hn.test(e)||Al.test(e)||br.test(e),parse:e=>Hn.test(e)?Hn.parse(e):br.test(e)?br.parse(e):Al.parse(e),transform:e=>Xs(e)?e:e.hasOwnProperty("red")?Hn.transform(e):br.transform(e)},ge=(e,t,n)=>-n*e+n*t+e;function Sa(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function Ix({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let s=0,i=0,o=0;if(!t)s=i=o=n;else{const a=n<.5?n*(1+t):n+t-n*t,c=2*n-a;s=Sa(c,a,e+1/3),i=Sa(c,a,e),o=Sa(c,a,e-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:r}}const Ca=(e,t,n)=>{const r=e*e;return Math.sqrt(Math.max(0,n*(t*t-r)+r))},Ox=[Al,Hn,br],Gx=e=>Ox.find(t=>t.test(e));function Id(e){const t=Gx(e);let n=t.parse(e);return t===br&&(n=Ix(n)),n}const Ip=(e,t)=>{const n=Id(e),r=Id(t),s={...n};return i=>(s.red=Ca(n.red,r.red,i),s.green=Ca(n.green,r.green,i),s.blue=Ca(n.blue,r.blue,i),s.alpha=ge(n.alpha,r.alpha,i),Hn.transform(s))};function Fx(e){var t,n;return isNaN(e)&&Xs(e)&&(((t=e.match(Vo))===null||t===void 0?void 0:t.length)||0)+(((n=e.match(lp))===null||n===void 0?void 0:n.length)||0)>0}const Op={regex:Ly,countKey:"Vars",token:"${v}",parse:be},Gp={regex:lp,countKey:"Colors",token:"${c}",parse:He.parse},Fp={regex:Vo,countKey:"Numbers",token:"${n}",parse:ir.parse};function ka(e,{regex:t,countKey:n,token:r,parse:s}){const i=e.tokenised.match(t);i&&(e["num"+n]=i.length,e.tokenised=e.tokenised.replace(t,r),e.values.push(...i.map(s)))}function ho(e){const t=e.toString(),n={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&ka(n,Op),ka(n,Gp),ka(n,Fp),n}function Vp(e){return ho(e).values}function Bp(e){const{values:t,numColors:n,numVars:r,tokenised:s}=ho(e),i=t.length;return o=>{let a=s;for(let c=0;c<i;c++)c<r?a=a.replace(Op.token,o[c]):c<r+n?a=a.replace(Gp.token,He.transform(o[c])):a=a.replace(Fp.token,xs(o[c]));return a}}const Vx=e=>typeof e=="number"?0:e;function Bx(e){const t=Vp(e);return Bp(e)(t.map(Vx))}const kn={test:Fx,parse:Vp,createTransformer:Bp,getAnimatableNone:Bx},Hp=(e,t)=>n=>`${n>0?t:e}`;function zp(e,t){return typeof e=="number"?n=>ge(e,t,n):He.test(e)?Ip(e,t):e.startsWith("var(")?Hp(e,t):$p(e,t)}const Up=(e,t)=>{const n=[...e],r=n.length,s=e.map((i,o)=>zp(i,t[o]));return i=>{for(let o=0;o<r;o++)n[o]=s[o](i);return n}},Hx=(e,t)=>{const n={...e,...t},r={};for(const s in n)e[s]!==void 0&&t[s]!==void 0&&(r[s]=zp(e[s],t[s]));return s=>{for(const i in r)n[i]=r[i](s);return n}},$p=(e,t)=>{const n=kn.createTransformer(t),r=ho(e),s=ho(t);return r.numVars===s.numVars&&r.numColors===s.numColors&&r.numNumbers>=s.numNumbers?xn(Up(r.values,s.values),n):Hp(e,t)},Hs=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r},Od=(e,t)=>n=>ge(e,t,n);function zx(e){return typeof e=="number"?Od:typeof e=="string"?He.test(e)?Ip:$p:Array.isArray(e)?Up:typeof e=="object"?Hx:Od}function Ux(e,t,n){const r=[],s=n||zx(e[0]),i=e.length-1;for(let o=0;o<i;o++){let a=s(e[o],e[o+1]);if(t){const c=Array.isArray(t)?t[o]||be:t;a=xn(c,a)}r.push(a)}return r}function qp(e,t,{clamp:n=!0,ease:r,mixer:s}={}){const i=e.length;if(Zc(i===t.length),i===1)return()=>t[0];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=Ux(t,r,s),a=o.length,c=u=>{let h=0;if(a>1)for(;h<e.length-2&&!(u<e[h+1]);h++);const d=Hs(e[h],e[h+1],u);return o[h](d)};return n?u=>c(Cn(e[0],e[i-1],u)):c}function $x(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const s=Hs(0,t,r);e.push(ge(n,1,s))}}function qx(e){const t=[0];return $x(t,e.length-1),t}function Wx(e,t){return e.map(n=>n*t)}function Kx(e,t){return e.map(()=>t||Ap).splice(0,e.length-1)}function mo({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const s=Nx(r)?r.map(Rd):Rd(r),i={done:!1,value:t[0]},o=Wx(n&&n.length===t.length?n:qx(t),e),a=qp(o,t,{ease:Array.isArray(s)?s:Kx(t,s)});return{calculatedDuration:e,next:c=>(i.value=a(c),i.done=c>=e,i)}}function Wp(e,t){return t?e*(1e3/t):0}const Qx=5;function Kp(e,t,n){const r=Math.max(t-Qx,0);return Wp(n-e(r),t-r)}const Pa=.001,Xx=.01,Gd=10,Jx=.05,Yx=1;function Zx({duration:e=800,bounce:t=.25,velocity:n=0,mass:r=1}){let s,i;wx(e<=wn(Gd));let o=1-t;o=Cn(Jx,Yx,o),e=Cn(Xx,Gd,$t(e)),o<1?(s=u=>{const h=u*o,d=h*e,m=h-n,g=Ml(u,o),x=Math.exp(-d);return Pa-m/g*x},i=u=>{const d=u*o*e,m=d*n+n,g=Math.pow(o,2)*Math.pow(u,2)*e,x=Math.exp(-d),b=Ml(Math.pow(u,2),o);return(-s(u)+Pa>0?-1:1)*((m-g)*x)/b}):(s=u=>{const h=Math.exp(-u*e),d=(u-n)*e+1;return-Pa+h*d},i=u=>{const h=Math.exp(-u*e),d=(n-u)*(e*e);return h*d});const a=5/e,c=tw(s,i,a);if(e=wn(e),isNaN(c))return{stiffness:100,damping:10,duration:e};{const u=Math.pow(c,2)*r;return{stiffness:u,damping:o*2*Math.sqrt(r*u),duration:e}}}const ew=12;function tw(e,t,n){let r=n;for(let s=1;s<ew;s++)r=r-e(r)/t(r);return r}function Ml(e,t){return e*Math.sqrt(1-t*t)}const nw=["duration","bounce"],rw=["stiffness","damping","mass"];function Fd(e,t){return t.some(n=>e[n]!==void 0)}function sw(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!Fd(e,rw)&&Fd(e,nw)){const n=Zx(e);t={...t,...n,mass:1},t.isResolvedFromDuration=!0}return t}function Qp({keyframes:e,restDelta:t,restSpeed:n,...r}){const s=e[0],i=e[e.length-1],o={done:!1,value:s},{stiffness:a,damping:c,mass:u,duration:h,velocity:d,isResolvedFromDuration:m}=sw({...r,velocity:-$t(r.velocity||0)}),g=d||0,x=c/(2*Math.sqrt(a*u)),b=i-s,k=$t(Math.sqrt(a/u)),p=Math.abs(b)<5;n||(n=p?.01:2),t||(t=p?.005:.5);let f;if(x<1){const y=Ml(k,x);f=w=>{const S=Math.exp(-x*k*w);return i-S*((g+x*k*b)/y*Math.sin(y*w)+b*Math.cos(y*w))}}else if(x===1)f=y=>i-Math.exp(-k*y)*(b+(g+k*b)*y);else{const y=k*Math.sqrt(x*x-1);f=w=>{const S=Math.exp(-x*k*w),C=Math.min(y*w,300);return i-S*((g+x*k*b)*Math.sinh(C)+y*b*Math.cosh(C))/y}}return{calculatedDuration:m&&h||null,next:y=>{const w=f(y);if(m)o.done=y>=h;else{let S=g;y!==0&&(x<1?S=Kp(f,y,w):S=0);const C=Math.abs(S)<=n,P=Math.abs(i-w)<=t;o.done=C&&P}return o.value=o.done?i:w,o}}}function Vd({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:a,max:c,restDelta:u=.5,restSpeed:h}){const d=e[0],m={done:!1,value:d},g=T=>a!==void 0&&T<a||c!==void 0&&T>c,x=T=>a===void 0?c:c===void 0||Math.abs(a-T)<Math.abs(c-T)?a:c;let b=n*t;const k=d+b,p=o===void 0?k:o(k);p!==k&&(b=p-d);const f=T=>-b*Math.exp(-T/r),y=T=>p+f(T),w=T=>{const j=f(T),E=y(T);m.done=Math.abs(j)<=u,m.value=m.done?p:E};let S,C;const P=T=>{g(m.value)&&(S=T,C=Qp({keyframes:[m.value,x(m.value)],velocity:Kp(y,T,m.value),damping:s,stiffness:i,restDelta:u,restSpeed:h}))};return P(0),{calculatedDuration:null,next:T=>{let j=!1;return!C&&S===void 0&&(j=!0,w(T),P(T)),S!==void 0&&T>S?C.next(T-S):(!j&&w(T),m)}}}const iw=e=>{const t=({timestamp:n})=>e(n);return{start:()=>ce.update(t,!0),stop:()=>Xt(t),now:()=>Oe.isProcessing?Oe.timestamp:performance.now()}},Bd=2e4;function Hd(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<Bd;)t+=n,r=e.next(t);return t>=Bd?1/0:t}const ow={decay:Vd,inertia:Vd,tween:mo,keyframes:mo,spring:Qp};function fo({autoplay:e=!0,delay:t=0,driver:n=iw,keyframes:r,type:s="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:a="loop",onPlay:c,onStop:u,onComplete:h,onUpdate:d,...m}){let g=1,x=!1,b,k;const p=()=>{k=new Promise(U=>{b=U})};p();let f;const y=ow[s]||mo;let w;y!==mo&&typeof r[0]!="number"&&(w=qp([0,100],r,{clamp:!1}),r=[0,100]);const S=y({...m,keyframes:r});let C;a==="mirror"&&(C=y({...m,keyframes:[...r].reverse(),velocity:-(m.velocity||0)}));let P="idle",T=null,j=null,E=null;S.calculatedDuration===null&&i&&(S.calculatedDuration=Hd(S));const{calculatedDuration:L}=S;let A=1/0,N=1/0;L!==null&&(A=L+o,N=A*(i+1)-o);let _=0;const se=U=>{if(j===null)return;g>0&&(j=Math.min(j,U)),g<0&&(j=Math.min(U-N/g,j)),T!==null?_=T:_=Math.round(U-j)*g;const K=_-t*(g>=0?1:-1),$=g>=0?K<0:K>N;_=Math.max(K,0),P==="finished"&&T===null&&(_=N);let X=_,Z=S;if(i){const oe=Math.min(_,N)/A;let Ee=Math.floor(oe),xe=oe%1;!xe&&oe>=1&&(xe=1),xe===1&&Ee--,Ee=Math.min(Ee,i+1),!!(Ee%2)&&(a==="reverse"?(xe=1-xe,o&&(xe-=o/A)):a==="mirror"&&(Z=C)),X=Cn(0,1,xe)*A}const J=$?{done:!1,value:r[0]}:Z.next(X);w&&(J.value=w(J.value));let{done:he}=J;!$&&L!==null&&(he=g>=0?_>=N:_<=0);const We=T===null&&(P==="finished"||P==="running"&&he);return d&&d(J.value),We&&R(),J},O=()=>{f&&f.stop(),f=void 0},Q=()=>{P="idle",O(),b(),p(),j=E=null},R=()=>{P="finished",h&&h(),O(),b()},z=()=>{if(x)return;f||(f=n(se));const U=f.now();c&&c(),T!==null?j=U-T:(!j||P==="finished")&&(j=U),P==="finished"&&p(),E=j,T=null,P="running",f.start()};e&&z();const F={then(U,K){return k.then(U,K)},get time(){return $t(_)},set time(U){U=wn(U),_=U,T!==null||!f||g===0?T=U:j=f.now()-U/g},get duration(){const U=S.calculatedDuration===null?Hd(S):S.calculatedDuration;return $t(U)},get speed(){return g},set speed(U){U===g||!f||(g=U,F.time=$t(_))},get state(){return P},play:z,pause:()=>{P="paused",T=_},stop:()=>{x=!0,P!=="idle"&&(P="idle",u&&u(),Q())},cancel:()=>{E!==null&&se(E),Q()},complete:()=>{P="finished"},sample:U=>(j=0,se(U))};return F}function aw(e){let t;return()=>(t===void 0&&(t=e()),t)}const lw=aw(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),cw=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),xi=10,uw=2e4,dw=(e,t)=>t.type==="spring"||e==="backgroundColor"||!Tp(t.ease);function hw(e,t,{onUpdate:n,onComplete:r,...s}){if(!(lw()&&cw.has(t)&&!s.repeatDelay&&s.repeatType!=="mirror"&&s.damping!==0&&s.type!=="inertia"))return!1;let o=!1,a,c,u=!1;const h=()=>{c=new Promise(y=>{a=y})};h();let{keyframes:d,duration:m=300,ease:g,times:x}=s;if(dw(t,s)){const y=fo({...s,repeat:0,delay:0});let w={done:!1,value:d[0]};const S=[];let C=0;for(;!w.done&&C<uw;)w=y.sample(C),S.push(w.value),C+=xi;x=void 0,d=S,m=C-xi,g="linear"}const b=Sx(e.owner.current,t,d,{...s,duration:m,ease:g,times:x}),k=()=>{u=!1,b.cancel()},p=()=>{u=!0,ce.update(k),a(),h()};return b.onfinish=()=>{u||(e.set(Cx(d,s)),r&&r(),p())},{then(y,w){return c.then(y,w)},attachTimeline(y){return b.timeline=y,b.onfinish=null,be},get time(){return $t(b.currentTime||0)},set time(y){b.currentTime=wn(y)},get speed(){return b.playbackRate},set speed(y){b.playbackRate=y},get duration(){return $t(m)},play:()=>{o||(b.play(),Xt(k))},pause:()=>b.pause(),stop:()=>{if(o=!0,b.playState==="idle")return;const{currentTime:y}=b;if(y){const w=fo({...s,autoplay:!1});e.setWithVelocity(w.sample(y-xi).value,w.sample(y).value,xi)}p()},complete:()=>{u||b.finish()},cancel:p}}function mw({keyframes:e,delay:t,onUpdate:n,onComplete:r}){const s=()=>(n&&n(e[e.length-1]),r&&r(),{time:0,speed:1,duration:0,play:be,pause:be,stop:be,then:i=>(i(),Promise.resolve()),cancel:be,complete:be});return t?fo({keyframes:[0,1],duration:0,delay:t,onComplete:s}):s()}const fw={type:"spring",stiffness:500,damping:25,restSpeed:10},pw=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),gw={type:"keyframes",duration:.8},vw={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},yw=(e,{keyframes:t})=>t.length>2?gw:sr.has(e)?e.startsWith("scale")?pw(t[1]):fw:vw,Ll=(e,t)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(kn.test(t)||t==="0")&&!t.startsWith("url(")),xw=new Set(["brightness","contrast","saturate","opacity"]);function ww(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(Vo)||[];if(!r)return e;const s=n.replace(r,"");let i=xw.has(t)?1:0;return r!==n&&(i*=100),t+"("+i+s+")"}const bw=/([a-z-]*)\(.*?\)/g,_l={...kn,getAnimatableNone:e=>{const t=e.match(bw);return t?t.map(ww).join(" "):e}},Sw={...cp,color:He,backgroundColor:He,outlineColor:He,fill:He,stroke:He,borderColor:He,borderTopColor:He,borderRightColor:He,borderBottomColor:He,borderLeftColor:He,filter:_l,WebkitFilter:_l},ru=e=>Sw[e];function Xp(e,t){let n=ru(e);return n!==_l&&(n=kn),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const Jp=e=>/^0[^.\s]+$/.test(e);function Cw(e){if(typeof e=="number")return e===0;if(e!==null)return e==="none"||e==="0"||Jp(e)}function kw(e,t,n,r){const s=Ll(t,n);let i;Array.isArray(n)?i=[...n]:i=[null,n];const o=r.from!==void 0?r.from:e.get();let a;const c=[];for(let u=0;u<i.length;u++)i[u]===null&&(i[u]=u===0?o:i[u-1]),Cw(i[u])&&c.push(u),typeof i[u]=="string"&&i[u]!=="none"&&i[u]!=="0"&&(a=i[u]);if(s&&c.length&&a)for(let u=0;u<c.length;u++){const h=c[u];i[h]=Xp(t,a)}return i}function Pw({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:a,from:c,elapsed:u,...h}){return!!Object.keys(h).length}function su(e,t){return e[t]||e.default||e}const Tw={skipAnimations:!1},iu=(e,t,n,r={})=>s=>{const i=su(r,e)||{},o=i.delay||r.delay||0;let{elapsed:a=0}=r;a=a-wn(o);const c=kw(t,e,n,i),u=c[0],h=c[c.length-1],d=Ll(e,u),m=Ll(e,h);let g={keyframes:c,velocity:t.getVelocity(),ease:"easeOut",...i,delay:-a,onUpdate:x=>{t.set(x),i.onUpdate&&i.onUpdate(x)},onComplete:()=>{s(),i.onComplete&&i.onComplete()}};if(Pw(i)||(g={...g,...yw(e,g)}),g.duration&&(g.duration=wn(g.duration)),g.repeatDelay&&(g.repeatDelay=wn(g.repeatDelay)),!d||!m||bx.current||i.type===!1||Tw.skipAnimations)return mw(g);if(!r.isHandoff&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const x=hw(t,e,g);if(x)return x}return fo(g)};function po(e){return!!(Ze(e)&&e.add)}const Yp=e=>/^\-?\d*\.?\d+$/.test(e);function ou(e,t){e.indexOf(t)===-1&&e.push(t)}function au(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class lu{constructor(){this.subscriptions=[]}add(t){return ou(this.subscriptions,t),()=>au(this.subscriptions,t)}notify(t,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,n,r);else for(let i=0;i<s;i++){const o=this.subscriptions[i];o&&o(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const jw=e=>!isNaN(parseFloat(e));class Ew{constructor(t,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,s=!0)=>{this.prev=this.current,this.current=r;const{delta:i,timestamp:o}=Oe;this.lastUpdated!==o&&(this.timeDelta=i,this.lastUpdated=o,ce.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>ce.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=jw(this.current),this.owner=n.owner}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new lu);const r=this.events[t].add(n);return t==="change"?()=>{r(),ce.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,r){this.set(n),this.prev=t,this.timeDelta=r}jump(t){this.updateAndNotify(t),this.prev=t,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?Wp(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Fr(e,t){return new Ew(e,t)}const Zp=e=>t=>t.test(e),Nw={test:e=>e==="auto",parse:e=>e},e0=[ir,Y,_t,en,Iy,Ry,Nw],ts=e=>e0.find(Zp(e)),Aw=[...e0,He,kn],Mw=e=>Aw.find(Zp(e));function Lw(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,Fr(n))}function _w(e,t){const n=Ho(e,t);let{transitionEnd:r={},transition:s={},...i}=n?e.makeTargetAnimatable(n,!1):{};i={...i,...r};for(const o in i){const a=Xy(i[o]);Lw(e,o,a)}}function Dw(e,t,n){var r,s;const i=Object.keys(t).filter(a=>!e.hasValue(a)),o=i.length;if(o)for(let a=0;a<o;a++){const c=i[a],u=t[c];let h=null;Array.isArray(u)&&(h=u[0]),h===null&&(h=(s=(r=n[c])!==null&&r!==void 0?r:e.readValue(c))!==null&&s!==void 0?s:t[c]),h!=null&&(typeof h=="string"&&(Yp(h)||Jp(h))?h=parseFloat(h):!Mw(h)&&kn.test(u)&&(h=Xp(c,u)),e.addValue(c,Fr(h,{owner:e})),n[c]===void 0&&(n[c]=h),h!==null&&e.setBaseTarget(c,h))}}function Rw(e,t){return t?(t[e]||t.default||t).from:void 0}function Iw(e,t,n){const r={};for(const s in e){const i=Rw(s,t);if(i!==void 0)r[s]=i;else{const o=n.getValue(s);o&&(r[s]=o.get())}}return r}function Ow({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function Gw(e,t){const n=e.get();if(Array.isArray(t)){for(let r=0;r<t.length;r++)if(t[r]!==n)return!0}else return n!==t}function t0(e,t,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:i=e.getDefaultTransition(),transitionEnd:o,...a}=e.makeTargetAnimatable(t);const c=e.getValue("willChange");r&&(i=r);const u=[],h=s&&e.animationState&&e.animationState.getState()[s];for(const d in a){const m=e.getValue(d),g=a[d];if(!m||g===void 0||h&&Ow(h,d))continue;const x={delay:n,elapsed:0,...su(i||{},d)};if(window.HandoffAppearAnimations){const p=e.getProps()[np];if(p){const f=window.HandoffAppearAnimations(p,d,m,ce);f!==null&&(x.elapsed=f,x.isHandoff=!0)}}let b=!x.isHandoff&&!Gw(m,g);if(x.type==="spring"&&(m.getVelocity()||x.velocity)&&(b=!1),m.animation&&(b=!1),b)continue;m.start(iu(d,m,g,e.shouldReduceMotion&&sr.has(d)?{type:!1}:x));const k=m.animation;po(c)&&(c.add(d),k.then(()=>c.remove(d))),u.push(k)}return o&&Promise.all(u).then(()=>{o&&_w(e,o)}),u}function Dl(e,t,n={}){const r=Ho(e,t,n.custom);let{transition:s=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const i=r?()=>Promise.all(t0(e,r,n)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:h,staggerDirection:d}=s;return Fw(e,t,u+c,h,d,n)}:()=>Promise.resolve(),{when:a}=s;if(a){const[c,u]=a==="beforeChildren"?[i,o]:[o,i];return c().then(()=>u())}else return Promise.all([i(),o(n.delay)])}function Fw(e,t,n=0,r=0,s=1,i){const o=[],a=(e.variantChildren.size-1)*r,c=s===1?(u=0)=>u*r:(u=0)=>a-u*r;return Array.from(e.variantChildren).sort(Vw).forEach((u,h)=>{u.notify("AnimationStart",t),o.push(Dl(u,t,{...i,delay:n+c(h)}).then(()=>u.notify("AnimationComplete",t)))}),Promise.all(o)}function Vw(e,t){return e.sortNodePosition(t)}function Bw(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const s=t.map(i=>Dl(e,i,n));r=Promise.all(s)}else if(typeof t=="string")r=Dl(e,t,n);else{const s=typeof t=="function"?Ho(e,t,n.custom):t;r=Promise.all(t0(e,s,n))}return r.then(()=>e.notify("AnimationComplete",t))}const Hw=[...zc].reverse(),zw=zc.length;function Uw(e){return t=>Promise.all(t.map(({animation:n,options:r})=>Bw(e,n,r)))}function $w(e){let t=Uw(e);const n=Ww();let r=!0;const s=(c,u)=>{const h=Ho(e,u);if(h){const{transition:d,transitionEnd:m,...g}=h;c={...c,...g,...m}}return c};function i(c){t=c(e)}function o(c,u){const h=e.getProps(),d=e.getVariantContext(!0)||{},m=[],g=new Set;let x={},b=1/0;for(let p=0;p<zw;p++){const f=Hw[p],y=n[f],w=h[f]!==void 0?h[f]:d[f],S=Vs(w),C=f===u?y.isActive:null;C===!1&&(b=p);let P=w===d[f]&&w!==h[f]&&S;if(P&&r&&e.manuallyAnimateOnMount&&(P=!1),y.protectedKeys={...x},!y.isActive&&C===null||!w&&!y.prevProp||Go(w)||typeof w=="boolean")continue;let j=qw(y.prevProp,w)||f===u&&y.isActive&&!P&&S||p>b&&S,E=!1;const L=Array.isArray(w)?w:[w];let A=L.reduce(s,{});C===!1&&(A={});const{prevResolvedValues:N={}}=y,_={...N,...A},se=O=>{j=!0,g.has(O)&&(E=!0,g.delete(O)),y.needsAnimating[O]=!0};for(const O in _){const Q=A[O],R=N[O];if(x.hasOwnProperty(O))continue;let z=!1;uo(Q)&&uo(R)?z=!kp(Q,R):z=Q!==R,z?Q!==void 0?se(O):g.add(O):Q!==void 0&&g.has(O)?se(O):y.protectedKeys[O]=!0}y.prevProp=w,y.prevResolvedValues=A,y.isActive&&(x={...x,...A}),r&&e.blockInitialAnimation&&(j=!1),j&&(!P||E)&&m.push(...L.map(O=>({animation:O,options:{type:f,...c}})))}if(g.size){const p={};g.forEach(f=>{const y=e.getBaseTarget(f);y!==void 0&&(p[f]=y)}),m.push({animation:p})}let k=!!m.length;return r&&(h.initial===!1||h.initial===h.animate)&&!e.manuallyAnimateOnMount&&(k=!1),r=!1,k?t(m):Promise.resolve()}function a(c,u,h){var d;if(n[c].isActive===u)return Promise.resolve();(d=e.variantChildren)===null||d===void 0||d.forEach(g=>{var x;return(x=g.animationState)===null||x===void 0?void 0:x.setActive(c,u)}),n[c].isActive=u;const m=o(h,c);for(const g in n)n[g].protectedKeys={};return m}return{animateChanges:o,setActive:a,setAnimateFunction:i,getState:()=>n}}function qw(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!kp(t,e):!1}function Ln(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Ww(){return{animate:Ln(!0),whileInView:Ln(),whileHover:Ln(),whileTap:Ln(),whileDrag:Ln(),whileFocus:Ln(),exit:Ln()}}class Kw extends An{constructor(t){super(t),t.animationState||(t.animationState=$w(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();this.unmount(),Go(t)&&(this.unmount=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let Qw=0;class Xw extends An{constructor(){super(...arguments),this.id=Qw++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n,custom:r}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===s)return;const i=this.node.animationState.setActive("exit",!t,{custom:r??this.node.getProps().custom});n&&!t&&i.then(()=>n(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const Jw={animation:{Feature:Kw},exit:{Feature:Xw}},zd=(e,t)=>Math.abs(e-t);function Yw(e,t){const n=zd(e.x,t.x),r=zd(e.y,t.y);return Math.sqrt(n**2+r**2)}class n0{constructor(t,n,{transformPagePoint:r,contextWindow:s,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=ja(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,g=Yw(d.offset,{x:0,y:0})>=3;if(!m&&!g)return;const{point:x}=d,{timestamp:b}=Oe;this.history.push({...x,timestamp:b});const{onStart:k,onMove:p}=this.handlers;m||(k&&k(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),p&&p(this.lastMoveEvent,d)},this.handlePointerMove=(d,m)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=Ta(m,this.transformPagePoint),ce.update(this.updatePoint,!0)},this.handlePointerUp=(d,m)=>{this.end();const{onEnd:g,onSessionEnd:x,resumeAnimation:b}=this.handlers;if(this.dragSnapToOrigin&&b&&b(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const k=ja(d.type==="pointercancel"?this.lastMoveEventInfo:Ta(m,this.transformPagePoint),this.history);this.startEvent&&g&&g(d,k),x&&x(d,k)},!xp(t))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.contextWindow=s||window;const o=Bo(t),a=Ta(o,this.transformPagePoint),{point:c}=a,{timestamp:u}=Oe;this.history=[{...c,timestamp:u}];const{onSessionStart:h}=n;h&&h(t,ja(a,this.history)),this.removeListeners=xn(Ut(this.contextWindow,"pointermove",this.handlePointerMove),Ut(this.contextWindow,"pointerup",this.handlePointerUp),Ut(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Xt(this.updatePoint)}}function Ta(e,t){return t?{point:t(e.point)}:e}function Ud(e,t){return{x:e.x-t.x,y:e.y-t.y}}function ja({point:e},t){return{point:e,delta:Ud(e,r0(t)),offset:Ud(e,Zw(t)),velocity:e1(t,.1)}}function Zw(e){return e[0]}function r0(e){return e[e.length-1]}function e1(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const s=r0(e);for(;n>=0&&(r=e[n],!(s.timestamp-r.timestamp>wn(t)));)n--;if(!r)return{x:0,y:0};const i=$t(s.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const o={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function st(e){return e.max-e.min}function Rl(e,t=0,n=.01){return Math.abs(e-t)<=n}function $d(e,t,n,r=.5){e.origin=r,e.originPoint=ge(t.min,t.max,e.origin),e.scale=st(n)/st(t),(Rl(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=ge(n.min,n.max,e.origin)-e.originPoint,(Rl(e.translate)||isNaN(e.translate))&&(e.translate=0)}function ws(e,t,n,r){$d(e.x,t.x,n.x,r?r.originX:void 0),$d(e.y,t.y,n.y,r?r.originY:void 0)}function qd(e,t,n){e.min=n.min+t.min,e.max=e.min+st(t)}function t1(e,t,n){qd(e.x,t.x,n.x),qd(e.y,t.y,n.y)}function Wd(e,t,n){e.min=t.min-n.min,e.max=e.min+st(t)}function bs(e,t,n){Wd(e.x,t.x,n.x),Wd(e.y,t.y,n.y)}function n1(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?ge(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?ge(n,e,r.max):Math.min(e,n)),e}function Kd(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function r1(e,{top:t,left:n,bottom:r,right:s}){return{x:Kd(e.x,n,s),y:Kd(e.y,t,r)}}function Qd(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function s1(e,t){return{x:Qd(e.x,t.x),y:Qd(e.y,t.y)}}function i1(e,t){let n=.5;const r=st(e),s=st(t);return s>r?n=Hs(t.min,t.max-r,e.min):r>s&&(n=Hs(e.min,e.max-s,t.min)),Cn(0,1,n)}function o1(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const Il=.35;function a1(e=Il){return e===!1?e=0:e===!0&&(e=Il),{x:Xd(e,"left","right"),y:Xd(e,"top","bottom")}}function Xd(e,t,n){return{min:Jd(e,t),max:Jd(e,n)}}function Jd(e,t){return typeof e=="number"?e:e[t]||0}const Yd=()=>({translate:0,scale:1,origin:0,originPoint:0}),Sr=()=>({x:Yd(),y:Yd()}),Zd=()=>({min:0,max:0}),Ce=()=>({x:Zd(),y:Zd()});function lt(e){return[e("x"),e("y")]}function s0({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function l1({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function c1(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Ea(e){return e===void 0||e===1}function Ol({scale:e,scaleX:t,scaleY:n}){return!Ea(e)||!Ea(t)||!Ea(n)}function In(e){return Ol(e)||i0(e)||e.z||e.rotate||e.rotateX||e.rotateY}function i0(e){return eh(e.x)||eh(e.y)}function eh(e){return e&&e!=="0%"}function go(e,t,n){const r=e-n,s=t*r;return n+s}function th(e,t,n,r,s){return s!==void 0&&(e=go(e,s,r)),go(e,n,r)+t}function Gl(e,t=0,n=1,r,s){e.min=th(e.min,t,n,r,s),e.max=th(e.max,t,n,r,s)}function o0(e,{x:t,y:n}){Gl(e.x,t.translate,t.scale,t.originPoint),Gl(e.y,n.translate,n.scale,n.originPoint)}function u1(e,t,n,r=!1){const s=n.length;if(!s)return;t.x=t.y=1;let i,o;for(let a=0;a<s;a++){i=n[a],o=i.projectionDelta;const c=i.instance;c&&c.style&&c.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&Cr(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,o0(e,o)),r&&In(i.latestValues)&&Cr(e,i.latestValues))}t.x=nh(t.x),t.y=nh(t.y)}function nh(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function sn(e,t){e.min=e.min+t,e.max=e.max+t}function rh(e,t,[n,r,s]){const i=t[s]!==void 0?t[s]:.5,o=ge(e.min,e.max,i);Gl(e,t[n],t[r],o,t.scale)}const d1=["x","scaleX","originX"],h1=["y","scaleY","originY"];function Cr(e,t){rh(e.x,t,d1),rh(e.y,t,h1)}function a0(e,t){return s0(c1(e.getBoundingClientRect(),t))}function m1(e,t,n){const r=a0(e,n),{scroll:s}=t;return s&&(sn(r.x,s.offset.x),sn(r.y,s.offset.y)),r}const l0=({current:e})=>e?e.ownerDocument.defaultView:null,f1=new WeakMap;class p1{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ce(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=h=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Bo(h,"page").point)},i=(h,d)=>{const{drag:m,dragPropagation:g,onDragStart:x}=this.getProps();if(m&&!g&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=bp(m),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),lt(k=>{let p=this.getAxisMotionValue(k).get()||0;if(_t.test(p)){const{projection:f}=this.visualElement;if(f&&f.layout){const y=f.layout.layoutBox[k];y&&(p=st(y)*(parseFloat(p)/100))}}this.originPoint[k]=p}),x&&ce.update(()=>x(h,d),!1,!0);const{animationState:b}=this.visualElement;b&&b.setActive("whileDrag",!0)},o=(h,d)=>{const{dragPropagation:m,dragDirectionLock:g,onDirectionLock:x,onDrag:b}=this.getProps();if(!m&&!this.openGlobalLock)return;const{offset:k}=d;if(g&&this.currentDirection===null){this.currentDirection=g1(k),this.currentDirection!==null&&x&&x(this.currentDirection);return}this.updateAxis("x",d.point,k),this.updateAxis("y",d.point,k),this.visualElement.render(),b&&b(h,d)},a=(h,d)=>this.stop(h,d),c=()=>lt(h=>{var d;return this.getAnimationState(h)==="paused"&&((d=this.getAxisMotionValue(h).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new n0(t,{onSessionStart:s,onStart:i,onMove:o,onSessionEnd:a,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:l0(this.visualElement)})}stop(t,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:s}=n;this.startAnimation(s);const{onDragEnd:i}=this.getProps();i&&ce.update(()=>i(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:s}=this.getProps();if(!r||!wi(t,s,this.currentDirection))return;const i=this.getAxisMotionValue(t);let o=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(o=n1(o,this.constraints[t],this.elastic[t])),i.set(o)}resolveConstraints(){var t;const{dragConstraints:n,dragElastic:r}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,i=this.constraints;n&&wr(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&s?this.constraints=r1(s.layoutBox,n):this.constraints=!1,this.elastic=a1(r),i!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&lt(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=o1(s.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!wr(t))return!1;const r=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=m1(r,s.root,this.visualElement.getTransformPagePoint());let o=s1(s.layout.layoutBox,i);if(n){const a=n(l1(o));this.hasMutatedConstraints=!!a,a&&(o=s0(a))}return o}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),c=this.constraints||{},u=lt(h=>{if(!wi(h,n,this.currentDirection))return;let d=c&&c[h]||{};o&&(d={min:0,max:0});const m=s?200:1e6,g=s?40:1e7,x={type:"inertia",velocity:r?t[h]:0,bounceStiffness:m,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...i,...d};return this.startAxisValueAnimation(h,x)});return Promise.all(u).then(a)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return r.start(iu(t,r,0,n))}stopAnimation(){lt(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){lt(t=>{var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(t){const n="_drag"+t.toUpperCase(),r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){lt(n=>{const{drag:r}=this.getProps();if(!wi(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(n);if(s&&s.layout){const{min:o,max:a}=s.layout.layoutBox[n];i.set(t[n]-ge(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!wr(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};lt(o=>{const a=this.getAxisMotionValue(o);if(a){const c=a.get();s[o]=i1({min:c,max:c},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),lt(o=>{if(!wi(o,t,null))return;const a=this.getAxisMotionValue(o),{min:c,max:u}=this.constraints[o];a.set(ge(c,u,s[o]))})}addListeners(){if(!this.visualElement.current)return;f1.set(this.visualElement,this);const t=this.visualElement.current,n=Ut(t,"pointerdown",c=>{const{drag:u,dragListener:h=!0}=this.getProps();u&&h&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();wr(c)&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),r();const o=Bt(window,"resize",()=>this.scalePositionWithinConstraints()),a=s.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(lt(h=>{const d=this.getAxisMotionValue(h);d&&(this.originPoint[h]+=c[h].translate,d.set(d.get()+c[h].translate))}),this.visualElement.render())});return()=>{o(),n(),i(),a&&a()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:o=Il,dragMomentum:a=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:i,dragElastic:o,dragMomentum:a}}}function wi(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function g1(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class v1 extends An{constructor(t){super(t),this.removeGroupControls=be,this.removeListeners=be,this.controls=new p1(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||be}unmount(){this.removeGroupControls(),this.removeListeners()}}const sh=e=>(t,n)=>{e&&ce.update(()=>e(t,n))};class y1 extends An{constructor(){super(...arguments),this.removePointerDownListener=be}onPointerDown(t){this.session=new n0(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:l0(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:sh(t),onStart:sh(n),onMove:r,onEnd:(i,o)=>{delete this.session,s&&ce.update(()=>s(i,o))}}}mount(){this.removePointerDownListener=Ut(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function x1(){const e=v.useContext(Io);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:n,register:r}=e,s=v.useId();return v.useEffect(()=>r(s),[]),!t&&n?[!1,()=>n&&n(s)]:[!0]}const Ii={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function ih(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const ns={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(Y.test(e))e=parseFloat(e);else return e;const n=ih(e,t.target.x),r=ih(e,t.target.y);return`${n}% ${r}%`}},w1={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,s=kn.parse(e);if(s.length>5)return r;const i=kn.createTransformer(e),o=typeof s[0]!="number"?1:0,a=n.x.scale*t.x,c=n.y.scale*t.y;s[0+o]/=a,s[1+o]/=c;const u=ge(a,c,.5);return typeof s[2+o]=="number"&&(s[2+o]/=u),typeof s[3+o]=="number"&&(s[3+o]/=u),i(s)}};class b1 extends ae.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:i}=t;Ey(S1),i&&(n.group&&n.group.add(i),r&&r.register&&s&&r.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Ii.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:s,isPresent:i}=this.props,o=r.projection;return o&&(o.isPresent=i,s||t.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?o.promote():o.relegate()||ce.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),queueMicrotask(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=t;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function c0(e){const[t,n]=x1(),r=v.useContext($c);return ae.createElement(b1,{...e,layoutGroup:r,switchLayoutGroup:v.useContext(sp),isPresent:t,safeToRemove:n})}const S1={borderRadius:{...ns,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:ns,borderTopRightRadius:ns,borderBottomLeftRadius:ns,borderBottomRightRadius:ns,boxShadow:w1},u0=["TopLeft","TopRight","BottomLeft","BottomRight"],C1=u0.length,oh=e=>typeof e=="string"?parseFloat(e):e,ah=e=>typeof e=="number"||Y.test(e);function k1(e,t,n,r,s,i){s?(e.opacity=ge(0,n.opacity!==void 0?n.opacity:1,P1(r)),e.opacityExit=ge(t.opacity!==void 0?t.opacity:1,0,T1(r))):i&&(e.opacity=ge(t.opacity!==void 0?t.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<C1;o++){const a=`border${u0[o]}Radius`;let c=lh(t,a),u=lh(n,a);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||ah(c)===ah(u)?(e[a]=Math.max(ge(oh(c),oh(u),r),0),(_t.test(u)||_t.test(c))&&(e[a]+="%")):e[a]=u}(t.rotate||n.rotate)&&(e.rotate=ge(t.rotate||0,n.rotate||0,r))}function lh(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const P1=d0(0,.5,_p),T1=d0(.5,.95,be);function d0(e,t,n){return r=>r<e?0:r>t?1:n(Hs(e,t,r))}function ch(e,t){e.min=t.min,e.max=t.max}function at(e,t){ch(e.x,t.x),ch(e.y,t.y)}function uh(e,t,n,r,s){return e-=t,e=go(e,1/n,r),s!==void 0&&(e=go(e,1/s,r)),e}function j1(e,t=0,n=1,r=.5,s,i=e,o=e){if(_t.test(t)&&(t=parseFloat(t),t=ge(o.min,o.max,t/100)-o.min),typeof t!="number")return;let a=ge(i.min,i.max,r);e===i&&(a-=t),e.min=uh(e.min,t,n,a,s),e.max=uh(e.max,t,n,a,s)}function dh(e,t,[n,r,s],i,o){j1(e,t[n],t[r],t[s],t.scale,i,o)}const E1=["x","scaleX","originX"],N1=["y","scaleY","originY"];function hh(e,t,n,r){dh(e.x,t,E1,n?n.x:void 0,r?r.x:void 0),dh(e.y,t,N1,n?n.y:void 0,r?r.y:void 0)}function mh(e){return e.translate===0&&e.scale===1}function h0(e){return mh(e.x)&&mh(e.y)}function A1(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}function m0(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function fh(e){return st(e.x)/st(e.y)}class M1{constructor(){this.members=[]}add(t){ou(this.members,t),t.scheduleRender()}remove(t){if(au(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(s=>t===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function ph(e,t,n){let r="";const s=e.x.translate/t.x,i=e.y.translate/t.y;if((s||i)&&(r=`translate3d(${s}px, ${i}px, 0) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{rotate:c,rotateX:u,rotateY:h}=n;c&&(r+=`rotate(${c}deg) `),u&&(r+=`rotateX(${u}deg) `),h&&(r+=`rotateY(${h}deg) `)}const o=e.x.scale*t.x,a=e.y.scale*t.y;return(o!==1||a!==1)&&(r+=`scale(${o}, ${a})`),r||"none"}const L1=(e,t)=>e.depth-t.depth;class _1{constructor(){this.children=[],this.isDirty=!1}add(t){ou(this.children,t),this.isDirty=!0}remove(t){au(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(L1),this.isDirty=!1,this.children.forEach(t)}}function D1(e,t){const n=performance.now(),r=({timestamp:s})=>{const i=s-n;i>=t&&(Xt(r),e(i-t))};return ce.read(r,!0),()=>Xt(r)}function R1(e){window.MotionDebug&&window.MotionDebug.record(e)}function I1(e){return e instanceof SVGElement&&e.tagName!=="svg"}function O1(e,t,n){const r=Ze(e)?e:Fr(e);return r.start(iu("",r,t,n)),r.animation}const gh=["","X","Y","Z"],G1={visibility:"hidden"},vh=1e3;let F1=0;const On={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function f0({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(o={},a=t==null?void 0:t()){this.id=F1++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,On.totalNodes=On.resolvedTargetDeltas=On.recalculatedProjection=0,this.nodes.forEach(H1),this.nodes.forEach(W1),this.nodes.forEach(K1),this.nodes.forEach(z1),R1(On)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new _1)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new lu),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const c=this.eventHandlers.get(o);c&&c.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=I1(o),this.instance=o;const{layoutId:c,layout:u,visualElement:h}=this.options;if(h&&!h.current&&h.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(u||c)&&(this.isLayoutDirty=!0),e){let d;const m=()=>this.root.updateBlockedByResize=!1;e(o,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=D1(m,250),Ii.hasAnimatedSinceResize&&(Ii.hasAnimatedSinceResize=!1,this.nodes.forEach(xh))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&h&&(c||u)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:m,hasRelativeTargetChanged:g,layout:x})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const b=this.options.transition||h.getDefaultTransition()||Z1,{onLayoutAnimationStart:k,onLayoutAnimationComplete:p}=h.getProps(),f=!this.targetLayout||!m0(this.targetLayout,x)||g,y=!m&&g;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||y||m&&(f||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,y);const w={...su(b,"layout"),onPlay:k,onComplete:p};(h.shouldReduceMotion||this.options.layoutRoot)&&(w.delay=0,w.type=!1),this.startAnimation(w)}else m||xh(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=x})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Xt(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Q1),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const d=this.path[h];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:a,layout:c}=this.options;if(a===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(yh);return}this.isUpdating||this.nodes.forEach($1),this.isUpdating=!1,this.nodes.forEach(q1),this.nodes.forEach(V1),this.nodes.forEach(B1),this.clearAllSnapshots();const a=performance.now();Oe.delta=Cn(0,1e3/60,a-Oe.timestamp),Oe.timestamp=a,Oe.isProcessing=!0,ya.update.process(Oe),ya.preRender.process(Oe),ya.render.process(Oe),Oe.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(U1),this.sharedNodes.forEach(X1)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ce.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ce.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Ce(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:r(this.instance),offset:n(this.instance)})}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform,a=this.projectionDelta&&!h0(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,h=u!==this.prevTransformTemplateValue;o&&(a||In(this.latestValues)||h)&&(s(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let c=this.removeElementScroll(a);return o&&(c=this.removeTransform(c)),eb(c),{animationId:this.root.animationId,measuredBox:a,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return Ce();const a=o.measureViewportBox(),{scroll:c}=this.root;return c&&(sn(a.x,c.offset.x),sn(a.y,c.offset.y)),a}removeElementScroll(o){const a=Ce();at(a,o);for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:h,options:d}=u;if(u!==this.root&&h&&d.layoutScroll){if(h.isRoot){at(a,o);const{scroll:m}=this.root;m&&(sn(a.x,-m.offset.x),sn(a.y,-m.offset.y))}sn(a.x,h.offset.x),sn(a.y,h.offset.y)}}return a}applyTransform(o,a=!1){const c=Ce();at(c,o);for(let u=0;u<this.path.length;u++){const h=this.path[u];!a&&h.options.layoutScroll&&h.scroll&&h!==h.root&&Cr(c,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),In(h.latestValues)&&Cr(c,h.latestValues)}return In(this.latestValues)&&Cr(c,this.latestValues),c}removeTransform(o){const a=Ce();at(a,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!In(u.latestValues))continue;Ol(u.latestValues)&&u.updateSnapshot();const h=Ce(),d=u.measurePageBox();at(h,d),hh(a,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,h)}return In(this.latestValues)&&hh(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Oe.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==c;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:d,layoutId:m}=this.options;if(!(!this.layout||!(d||m))){if(this.resolvedRelativeTargetAt=Oe.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ce(),this.relativeTargetOrigin=Ce(),bs(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),at(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Ce(),this.targetWithTransforms=Ce()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),t1(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):at(this.target,this.layout.layoutBox),o0(this.target,this.targetDelta)):at(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ce(),this.relativeTargetOrigin=Ce(),bs(this.relativeTargetOrigin,this.target,g.target),at(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}On.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Ol(this.parent.latestValues)||i0(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),c=!!this.resumingFrom||this!==a;let u=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(u=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===Oe.timestamp&&(u=!1),u)return;const{layout:h,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||d))return;at(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,g=this.treeScale.y;u1(this.layoutCorrected,this.treeScale,this.path,c),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox);const{target:x}=a;if(!x){this.projectionTransform&&(this.projectionDelta=Sr(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Sr(),this.projectionDeltaWithTransform=Sr());const b=this.projectionTransform;ws(this.projectionDelta,this.layoutCorrected,x,this.latestValues),this.projectionTransform=ph(this.projectionDelta,this.treeScale),(this.projectionTransform!==b||this.treeScale.x!==m||this.treeScale.y!==g)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",x)),On.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,a=!1){const c=this.snapshot,u=c?c.latestValues:{},h={...this.latestValues},d=Sr();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const m=Ce(),g=c?c.source:void 0,x=this.layout?this.layout.source:void 0,b=g!==x,k=this.getStack(),p=!k||k.members.length<=1,f=!!(b&&!p&&this.options.crossfade===!0&&!this.path.some(Y1));this.animationProgress=0;let y;this.mixTargetDelta=w=>{const S=w/1e3;wh(d.x,o.x,S),wh(d.y,o.y,S),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(bs(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),J1(this.relativeTarget,this.relativeTargetOrigin,m,S),y&&A1(this.relativeTarget,y)&&(this.isProjectionDirty=!1),y||(y=Ce()),at(y,this.relativeTarget)),b&&(this.animationValues=h,k1(h,u,this.latestValues,S,f,p)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=S},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Xt(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ce.update(()=>{Ii.hasAnimatedSinceResize=!0,this.currentAnimation=O1(0,vh,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(vh),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:c,layout:u,latestValues:h}=o;if(!(!a||!c||!u)){if(this!==o&&this.layout&&u&&p0(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||Ce();const d=st(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+d;const m=st(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+m}at(a,c),Cr(a,h),ws(this.projectionDeltaWithTransform,this.layoutCorrected,a,h)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new M1),this.sharedNodes.get(o).add(a);const u=a.options.initialPromotionConfig;a.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:c}=o;if((c.rotate||c.rotateX||c.rotateY||c.rotateZ)&&(a=!0),!a)return;const u={};for(let h=0;h<gh.length;h++){const d="rotate"+gh[h];c[d]&&(u[d]=c[d],o.setStaticValue(d,0))}o.render();for(const h in u)o.setStaticValue(h,u[h]);o.scheduleRender()}getProjectionStyles(o){var a,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return G1;const u={visibility:""},h=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=Ri(o==null?void 0:o.pointerEvents)||"",u.transform=h?h(this.latestValues,""):"none",u;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const b={};return this.options.layoutId&&(b.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,b.pointerEvents=Ri(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!In(this.latestValues)&&(b.transform=h?h({},""):"none",this.hasProjected=!1),b}const m=d.animationValues||d.latestValues;this.applyTransformsToTarget(),u.transform=ph(this.projectionDeltaWithTransform,this.treeScale,m),h&&(u.transform=h(m,u.transform));const{x:g,y:x}=this.projectionDelta;u.transformOrigin=`${g.origin*100}% ${x.origin*100}% 0`,d.animationValues?u.opacity=d===this?(c=(a=m.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:u.opacity=d===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const b in lo){if(m[b]===void 0)continue;const{correct:k,applyTo:p}=lo[b],f=u.transform==="none"?m[b]:k(m[b],d);if(p){const y=p.length;for(let w=0;w<y;w++)u[p[w]]=f}else u[b]=f}return this.options.layoutId&&(u.pointerEvents=d===this?Ri(o==null?void 0:o.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(yh),this.root.sharedNodes.clear()}}}function V1(e){e.updateLayout()}function B1(e){var t;const n=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=e.layout,{animationType:i}=e.options,o=n.source!==e.layout.source;i==="size"?lt(d=>{const m=o?n.measuredBox[d]:n.layoutBox[d],g=st(m);m.min=r[d].min,m.max=m.min+g}):p0(i,n.layoutBox,r)&&lt(d=>{const m=o?n.measuredBox[d]:n.layoutBox[d],g=st(r[d]);m.max=m.min+g,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[d].max=e.relativeTarget[d].min+g)});const a=Sr();ws(a,r,n.layoutBox);const c=Sr();o?ws(c,e.applyTransform(s,!0),n.measuredBox):ws(c,r,n.layoutBox);const u=!h0(a);let h=!1;if(!e.resumeFrom){const d=e.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:m,layout:g}=d;if(m&&g){const x=Ce();bs(x,n.layoutBox,m.layoutBox);const b=Ce();bs(b,r,g.layoutBox),m0(x,b)||(h=!0),d.options.layoutRoot&&(e.relativeTarget=b,e.relativeTargetOrigin=x,e.relativeParent=d)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:c,layoutDelta:a,hasLayoutChanged:u,hasRelativeTargetChanged:h})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function H1(e){On.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function z1(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function U1(e){e.clearSnapshot()}function yh(e){e.clearMeasurements()}function $1(e){e.isLayoutDirty=!1}function q1(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function xh(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function W1(e){e.resolveTargetDelta()}function K1(e){e.calcProjection()}function Q1(e){e.resetRotation()}function X1(e){e.removeLeadSnapshot()}function wh(e,t,n){e.translate=ge(t.translate,0,n),e.scale=ge(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function bh(e,t,n,r){e.min=ge(t.min,n.min,r),e.max=ge(t.max,n.max,r)}function J1(e,t,n,r){bh(e.x,t.x,n.x,r),bh(e.y,t.y,n.y,r)}function Y1(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const Z1={duration:.45,ease:[.4,0,.1,1]},Sh=e=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(e),Ch=Sh("applewebkit/")&&!Sh("chrome/")?Math.round:be;function kh(e){e.min=Ch(e.min),e.max=Ch(e.max)}function eb(e){kh(e.x),kh(e.y)}function p0(e,t,n){return e==="position"||e==="preserve-aspect"&&!Rl(fh(t),fh(n),.2)}const tb=f0({attachResizeListener:(e,t)=>Bt(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Na={current:void 0},g0=f0({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Na.current){const e=new tb({});e.mount(window),e.setOptions({layoutScroll:!0}),Na.current=e}return Na.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),nb={pan:{Feature:y1},drag:{Feature:v1,ProjectionNode:g0,MeasureLayout:c0}},rb=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function sb(e){const t=rb.exec(e);if(!t)return[,];const[,n,r]=t;return[n,r]}function Fl(e,t,n=1){const[r,s]=sb(e);if(!r)return;const i=window.getComputedStyle(t).getPropertyValue(r);if(i){const o=i.trim();return Yp(o)?parseFloat(o):o}else return El(s)?Fl(s,t,n+1):s}function ib(e,{...t},n){const r=e.current;if(!(r instanceof Element))return{target:t,transitionEnd:n};n&&(n={...n}),e.values.forEach(s=>{const i=s.get();if(!El(i))return;const o=Fl(i,r);o&&s.set(o)});for(const s in t){const i=t[s];if(!El(i))continue;const o=Fl(i,r);o&&(t[s]=o,n||(n={}),n[s]===void 0&&(n[s]=i))}return{target:t,transitionEnd:n}}const ob=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),v0=e=>ob.has(e),ab=e=>Object.keys(e).some(v0),Ph=e=>e===ir||e===Y,Th=(e,t)=>parseFloat(e.split(", ")[t]),jh=(e,t)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const s=r.match(/^matrix3d\((.+)\)$/);if(s)return Th(s[1],t);{const i=r.match(/^matrix\((.+)\)$/);return i?Th(i[1],e):0}},lb=new Set(["x","y","z"]),cb=Qs.filter(e=>!lb.has(e));function ub(e){const t=[];return cb.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t.length&&e.render(),t}const Vr={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:jh(4,13),y:jh(5,14)};Vr.translateX=Vr.x;Vr.translateY=Vr.y;const db=(e,t,n)=>{const r=t.measureViewportBox(),s=t.current,i=getComputedStyle(s),{display:o}=i,a={};o==="none"&&t.setStaticValue("display",e.display||"block"),n.forEach(u=>{a[u]=Vr[u](r,i)}),t.render();const c=t.measureViewportBox();return n.forEach(u=>{const h=t.getValue(u);h&&h.jump(a[u]),e[u]=Vr[u](c,i)}),e},hb=(e,t,n={},r={})=>{t={...t},r={...r};const s=Object.keys(t).filter(v0);let i=[],o=!1;const a=[];if(s.forEach(c=>{const u=e.getValue(c);if(!e.hasValue(c))return;let h=n[c],d=ts(h);const m=t[c];let g;if(uo(m)){const x=m.length,b=m[0]===null?1:0;h=m[b],d=ts(h);for(let k=b;k<x&&m[k]!==null;k++)g?Zc(ts(m[k])===g):g=ts(m[k])}else g=ts(m);if(d!==g)if(Ph(d)&&Ph(g)){const x=u.get();typeof x=="string"&&u.set(parseFloat(x)),typeof m=="string"?t[c]=parseFloat(m):Array.isArray(m)&&g===Y&&(t[c]=m.map(parseFloat))}else d!=null&&d.transform&&(g!=null&&g.transform)&&(h===0||m===0)?h===0?u.set(g.transform(h)):t[c]=d.transform(m):(o||(i=ub(e),o=!0),a.push(c),r[c]=r[c]!==void 0?r[c]:t[c],u.jump(m))}),a.length){const c=a.indexOf("height")>=0?window.pageYOffset:null,u=db(t,e,a);return i.length&&i.forEach(([h,d])=>{e.getValue(h).set(d)}),e.render(),Oo&&c!==null&&window.scrollTo({top:c}),{target:u,transitionEnd:r}}else return{target:t,transitionEnd:r}};function mb(e,t,n,r){return ab(t)?hb(e,t,n,r):{target:t,transitionEnd:r}}const fb=(e,t,n,r)=>{const s=ib(e,t,r);return t=s.target,r=s.transitionEnd,mb(e,t,n,r)},Vl={current:null},y0={current:!1};function pb(){if(y0.current=!0,!!Oo)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Vl.current=e.matches;e.addListener(t),t()}else Vl.current=!1}function gb(e,t,n){const{willChange:r}=t;for(const s in t){const i=t[s],o=n[s];if(Ze(i))e.addValue(s,i),po(r)&&r.add(s);else if(Ze(o))e.addValue(s,Fr(i,{owner:e})),po(r)&&r.remove(s);else if(o!==i)if(e.hasValue(s)){const a=e.getValue(s);!a.hasAnimated&&a.set(i)}else{const a=e.getStaticValue(s);e.addValue(s,Fr(a!==void 0?a:i,{owner:e}))}}for(const s in n)t[s]===void 0&&e.removeValue(s);return t}const Eh=new WeakMap,x0=Object.keys(Bs),vb=x0.length,Nh=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],yb=Uc.length;class xb{constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:s,visualState:i},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>ce.render(this.render,!1,!0);const{latestValues:a,renderState:c}=i;this.latestValues=a,this.baseTarget={...a},this.initialValues=n.initial?{...a}:{},this.renderState=c,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=o,this.isControllingVariants=Fo(n),this.isVariantNode=rp(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:u,...h}=this.scrapeMotionValuesFromProps(n,{});for(const d in h){const m=h[d];a[d]!==void 0&&Ze(m)&&(m.set(a[d],!1),po(u)&&u.add(d))}}scrapeMotionValuesFromProps(t,n){return{}}mount(t){this.current=t,Eh.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),y0.current||pb(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Vl.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Eh.delete(this.current),this.projection&&this.projection.unmount(),Xt(this.notifyUpdate),Xt(this.render),this.valueSubscriptions.forEach(t=>t()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features)this.features[t].unmount();this.current=null}bindToMotionValue(t,n){const r=sr.has(t),s=n.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&ce.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),i=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,()=>{s(),i()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}loadFeatures({children:t,...n},r,s,i){let o,a;for(let c=0;c<vb;c++){const u=x0[c],{isEnabled:h,Feature:d,ProjectionNode:m,MeasureLayout:g}=Bs[u];m&&(o=m),h(n)&&(!this.features[u]&&d&&(this.features[u]=new d(this)),g&&(a=g))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:c,layout:u,drag:h,dragConstraints:d,layoutScroll:m,layoutRoot:g}=n;this.projection.setOptions({layoutId:c,layout:u,alwaysMeasureLayout:!!h||d&&wr(d),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof u=="string"?u:"both",initialPromotionConfig:i,layoutScroll:m,layoutRoot:g})}return a}updateFeatures(){for(const t in this.features){const n=this.features[t];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ce()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}makeTargetAnimatable(t,n=!0){return this.makeTargetAnimatableFromInstance(t,this.props,n)}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<Nh.length;r++){const s=Nh[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i=t["on"+s];i&&(this.propEventSubscriptions[s]=this.on(s,i))}this.prevMotionValues=gb(this,this.scrapeMotionValuesFromProps(t,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(t=!1){if(t)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const n={};for(let r=0;r<yb;r++){const s=Uc[r],i=this.props[s];(Vs(i)||i===!1)&&(n[s]=i)}return n}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){n!==this.values.get(t)&&(this.removeValue(t),this.bindToMotionValue(t,n)),this.values.set(t,n),this.latestValues[t]=n.get()}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=Fr(n,{owner:this}),this.addValue(t,r)),r}readValue(t){var n;return this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(n=this.getBaseTargetFromProps(this.props,t))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,t,this.options)}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var n;const{initial:r}=this.props,s=typeof r=="string"||typeof r=="object"?(n=Yc(this.props,r))===null||n===void 0?void 0:n[t]:void 0;if(r&&s!==void 0)return s;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!Ze(i)?i:this.initialValues[t]!==void 0&&s===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new lu),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class w0 extends xb{sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}makeTargetAnimatableFromInstance({transition:t,transitionEnd:n,...r},{transformValues:s},i){let o=Iw(r,t||{},this);if(s&&(n&&(n=s(n)),r&&(r=s(r)),o&&(o=s(o))),i){Dw(this,r,o);const a=fb(this,r,o,n);n=a.transitionEnd,r=a.target}return{transition:t,transitionEnd:n,...r}}}function wb(e){return window.getComputedStyle(e)}class bb extends w0{constructor(){super(...arguments),this.type="html"}readValueFromInstance(t,n){if(sr.has(n)){const r=ru(n);return r&&r.default||0}else{const r=wb(t),s=(ap(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(t,{transformPagePoint:n}){return a0(t,n)}build(t,n,r,s){Wc(t,n,r,s.transformTemplate)}scrapeMotionValuesFromProps(t,n){return Jc(t,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Ze(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(t,n,r,s){mp(t,n,r,s)}}class Sb extends w0{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(sr.has(n)){const r=ru(n);return r&&r.default||0}return n=fp.has(n)?n:Hc(n),t.getAttribute(n)}measureInstanceViewportBox(){return Ce()}scrapeMotionValuesFromProps(t,n){return gp(t,n)}build(t,n,r,s){Qc(t,n,r,this.isSVGTag,s.transformTemplate)}renderInstance(t,n,r,s){pp(t,n,r,s)}mount(t){this.isSVGTag=Xc(t.tagName),super.mount(t)}}const Cb=(e,t)=>qc(e)?new Sb(t,{enableHardwareAcceleration:!1}):new bb(t,{enableHardwareAcceleration:!0}),kb={layout:{ProjectionNode:g0,MeasureLayout:c0}},Pb={...Jw,...vx,...nb,...kb},M=Ty((e,t)=>sx(e,t,Pb,Cb));function b0(){const e=v.useRef(!1);return Bc(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function Tb(){const e=b0(),[t,n]=v.useState(0),r=v.useCallback(()=>{e.current&&n(t+1)},[t]);return[v.useCallback(()=>ce.postRender(r),[r]),t]}class jb extends v.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function Eb({children:e,isPresent:t}){const n=v.useId(),r=v.useRef(null),s=v.useRef({width:0,height:0,top:0,left:0});return v.useInsertionEffect(()=>{const{width:i,height:o,top:a,left:c}=s.current;if(t||!r.current||!i||!o)return;r.current.dataset.motionPopId=n;const u=document.createElement("style");return document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${i}px !important;
            height: ${o}px !important;
            top: ${a}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[t]),v.createElement(jb,{isPresent:t,childRef:r,sizeRef:s},v.cloneElement(e,{ref:r}))}const Aa=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:i,mode:o})=>{const a=vp(Nb),c=v.useId(),u=v.useMemo(()=>({id:c,initial:t,isPresent:n,custom:s,onExitComplete:h=>{a.set(h,!0);for(const d of a.values())if(!d)return;r&&r()},register:h=>(a.set(h,!1),()=>a.delete(h))}),i?void 0:[n]);return v.useMemo(()=>{a.forEach((h,d)=>a.set(d,!1))},[n]),v.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),o==="popLayout"&&(e=v.createElement(Eb,{isPresent:n},e)),v.createElement(Io.Provider,{value:u},e)};function Nb(){return new Map}function Ab(e){return v.useEffect(()=>()=>e(),[])}const Gn=e=>e.key||"";function Mb(e,t){e.forEach(n=>{const r=Gn(n);t.set(r,n)})}function Lb(e){const t=[];return v.Children.forEach(e,n=>{v.isValidElement(n)&&t.push(n)}),t}const ke=({children:e,custom:t,initial:n=!0,onExitComplete:r,exitBeforeEnter:s,presenceAffectsLayout:i=!0,mode:o="sync"})=>{const a=v.useContext($c).forceRender||Tb()[0],c=b0(),u=Lb(e);let h=u;const d=v.useRef(new Map).current,m=v.useRef(h),g=v.useRef(new Map).current,x=v.useRef(!0);if(Bc(()=>{x.current=!1,Mb(u,g),m.current=h}),Ab(()=>{x.current=!0,g.clear(),d.clear()}),x.current)return v.createElement(v.Fragment,null,h.map(f=>v.createElement(Aa,{key:Gn(f),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:i,mode:o},f)));h=[...h];const b=m.current.map(Gn),k=u.map(Gn),p=b.length;for(let f=0;f<p;f++){const y=b[f];k.indexOf(y)===-1&&!d.has(y)&&d.set(y,void 0)}return o==="wait"&&d.size&&(h=[]),d.forEach((f,y)=>{if(k.indexOf(y)!==-1)return;const w=g.get(y);if(!w)return;const S=b.indexOf(y);let C=f;if(!C){const P=()=>{d.delete(y);const T=Array.from(g.keys()).filter(j=>!k.includes(j));if(T.forEach(j=>g.delete(j)),m.current=u.filter(j=>{const E=Gn(j);return E===y||T.includes(E)}),!d.size){if(c.current===!1)return;a(),r&&r()}};C=v.createElement(Aa,{key:Gn(w),isPresent:!1,onExitComplete:P,custom:t,presenceAffectsLayout:i,mode:o},w),d.set(y,C)}h.splice(S,0,C)}),h=h.map(f=>{const y=f.key;return d.has(y)?f:v.createElement(Aa,{key:Gn(f),isPresent:!0,presenceAffectsLayout:i,mode:o},f)}),v.createElement(v.Fragment,null,d.size?h:h.map(f=>v.cloneElement(f)))},_n={I:"I",O:"O",T:"T",S:"S",Z:"Z",J:"J",L:"L"},S0={[_n.I]:{shape:[[0,0,0,0],[1,1,1,1],[0,0,0,0],[0,0,0,0]],color:"#00f5ff",emoji:"",name:"I-Piece"},[_n.O]:{shape:[[1,1],[1,1]],color:"#ffff00",emoji:"",name:"O-Piece"},[_n.T]:{shape:[[0,1,0],[1,1,1],[0,0,0]],color:"#a000f0",emoji:"",name:"T-Piece"},[_n.S]:{shape:[[0,1,1],[1,1,0],[0,0,0]],color:"#00f000",emoji:"",name:"S-Piece"},[_n.Z]:{shape:[[1,1,0],[0,1,1],[0,0,0]],color:"#f00000",emoji:"",name:"Z-Piece"},[_n.J]:{shape:[[1,0,0],[1,1,1],[0,0,0]],color:"#0000f0",emoji:"",name:"J-Piece"},[_n.L]:{shape:[[0,0,1],[1,1,1],[0,0,0]],color:"#ff7f00",emoji:"",name:"L-Piece"}};let Ht={...S0};function Ah(e){if(!e||!e.pieces){Ht={...S0};return}Object.keys(Ht).forEach(t=>{e.pieces[t]&&(Ht[t]={...Ht[t],color:e.pieces[t].color,emoji:e.pieces[t].emoji})})}if(typeof window<"u"){window.addEventListener("themeEquipped",e=>{Ah(e.detail.theme)});try{const e=localStorage.getItem("cat-tetris-shopInventory");if(e){const n=JSON.parse(e).equippedTheme;Vc(()=>Promise.resolve().then(()=>TS),void 0).then(({PIECE_THEMES:r})=>{r[n]&&Ah(r[n])})}}catch{}}function Mr(e){return{"#00f5ff":"#00f5ff","#ffff00":"#ffff00","#a000f0":"#a000f0","#00f000":"#00f000","#f00000":"#f00000","#0000f0":"#0000f0","#ff7f00":"#ff7f00"}[e]||e}class _b{constructor(){this.events={}}on(t,n){this.events[t]||(this.events[t]=[]),this.events[t].push(n)}off(t,n){this.events[t]&&(this.events[t]=this.events[t].filter(r=>r!==n))}emit(t,n){this.events[t]&&this.events[t].forEach(r=>{try{r(n)}catch(s){typeof window<"u"&&window.__ERROR_LOGGER__&&window.__ERROR_LOGGER__.logError("EventEmitter",`emit:${t}`,s.message,{event:t,stack:s.stack})}})}clear(){this.events={}}}const G=new _b,V={GAME_INITIALIZED:"game_initialized",PIECE_MOVED:"piece_moved",PIECE_ROTATED:"piece_rotated",PIECE_PLACED:"piece_placed",PIECE_HELD:"piece_held",HARD_DROP:"hard_drop",LINE_CLEARED:"line_cleared",T_SPIN:"t_spin",BACK_TO_BACK:"back_to_back",SCORE_UPDATED:"score_updated",LEVEL_UP:"level_up",GAME_OVER:"game_over",GAME_PAUSED:"game_paused",GAME_RESUMED:"game_resumed"},Oi=2;function Db({text:e,color:t,id:n}){return l.jsx(M.div,{initial:{opacity:1,y:0,scale:.5},animate:{opacity:0,y:-60,scale:1.3},exit:{opacity:0},transition:{duration:1.2,ease:"easeOut"},className:"absolute left-1/2 top-1/3 -translate-x-1/2 pointer-events-none font-black text-lg drop-shadow-lg whitespace-nowrap",style:{color:t,zIndex:50,textShadow:`0 0 12px ${t}`},children:e},n)}function Rb({lines:e}){const t=v.useMemo(()=>{const n=[];return e.forEach(r=>{for(let s=0;s<14;s++)n.push({id:`${r}-${s}`,startX:Math.random()*220,startY:(r+Oi)*21+10,endX:(Math.random()-.5)*300,endY:-(Math.random()*120+40),size:Math.random()*5+2,color:["#FFD700","#FF6B6B","#4ECDC4","#A78BFA","#F472B6","#34D399"][Math.floor(Math.random()*6)],delay:Math.random()*.15})}),n},[e]);return l.jsx("div",{className:"absolute inset-0 pointer-events-none overflow-visible",style:{zIndex:35},children:t.map(n=>l.jsx(M.div,{initial:{x:n.startX,y:n.startY,scale:1,opacity:1},animate:{x:n.startX+n.endX,y:n.startY+n.endY,scale:0,opacity:0},transition:{duration:.8,delay:n.delay,ease:"easeOut"},className:"absolute rounded-full",style:{width:n.size,height:n.size,backgroundColor:n.color,boxShadow:`0 0 ${n.size+4}px ${n.color}`}},n.id))})}const Ib=({board:e,currentPiece:t,dropPreview:n,gameOver:r})=>{var p;const[s,i]=v.useState([]),[o,a]=v.useState([]),[c,u]=v.useState(0),h=v.useRef(0),d=v.useRef(null),m=v.useRef([]);v.useEffect(()=>()=>{m.current.forEach(clearTimeout),m.current=[]},[]);const g=v.useCallback((f,y)=>{const w=setTimeout(()=>{m.current=m.current.filter(S=>S!==w),f()},y);return m.current.push(w),w},[]),x=((p=e==null?void 0:e[0])==null?void 0:p.length)||10,b=v.useMemo(()=>[...Array(Oi).fill(null).map(()=>Array(x).fill(null)),...e],[e,x]);v.useEffect(()=>{const f=()=>{u(.12),g(()=>u(0),150)};return G.on("hard_drop",f),()=>G.off("hard_drop",f)},[g]),v.useEffect(()=>{const f=[];for(let y=0;y<e.length;y++)e[y]&&e[y].every(w=>w!==null)&&f.push(y);f.length>0&&(i(f),u(f.length>=4?.3:.18),g(()=>u(0),250),g(()=>i([]),800))},[e]),v.useEffect(()=>{const f=y=>{const w=(y==null?void 0:y.linesCleared)||0;if(w<=0)return;let S,C;w===1?(S="Single",C="#4ECDC4"):w===2?(S="Double!",C="#A78BFA"):w===3?(S="Triple!!",C="#F472B6"):(S=" TETRIS!! ",C="#FFD700");const P=++h.current;a(T=>[...T,{id:P,text:S,color:C}]),g(()=>a(T=>T.filter(j=>j.id!==P)),1400)};return G.on("line_cleared",f),()=>G.off("line_cleared",f)},[g]),v.useEffect(()=>{const f=y=>{const w=(y==null?void 0:y.combo)||0;if(w>=2){const S=++h.current;a(C=>[...C,{id:S,text:`${w}x Combo! `,color:"#FF6B6B"}]),g(()=>a(C=>C.filter(P=>P.id!==S)),1400)}};return G.on("score_updated",f),()=>G.off("score_updated",f)},[g]),v.useEffect(()=>{const f=()=>{const y=++h.current;a(w=>[...w,{id:y,text:" Back-to-Back!",color:"#FBBF24"}]),g(()=>a(w=>w.filter(S=>S.id!==y)),1400)};return G.on("back_to_back",f),()=>G.off("back_to_back",f)},[g]),v.useEffect(()=>{const f=()=>{const y=++h.current;a(w=>[...w,{id:y,text:"T-SPIN!",color:"#C084FC"}]),g(()=>a(w=>w.filter(S=>S.id!==y)),1400)};return G.on("t_spin",f),()=>G.off("t_spin",f)},[g]);const k=v.useCallback((f,y,w,S)=>{let C=null,P=null;const T=s.includes(w);if(t){const{position:{x:j,y:E},shape:L}=t;for(let A=0;A<L.length;A++){for(let N=0;N<L[A].length;N++)L[A][N]&&j+N===y&&E+A===w&&(C=t);if(C)break}}if(n&&n!==t){const{position:{x:j,y:E},shape:L}=n;for(let A=0;A<L.length;A++){for(let N=0;N<L[A].length;N++)L[A][N]&&j+N===y&&E+A===w&&(P=n);if(P)break}}if(C){const j=Mr(C.color);return l.jsx("div",{className:"tetris-cell rounded-sm flex items-center justify-center border border-white/40",style:{backgroundColor:j,boxShadow:`0 0 6px ${j}80, inset 0 1px 0 rgba(255,255,255,0.3)`},children:l.jsx("span",{className:"text-xs drop-shadow",children:C.emoji})},`${y}-${w}`)}if(P){const j=Mr(P.color);return l.jsx("div",{className:"tetris-cell rounded-sm flex items-center justify-center border-2 border-dashed",style:{borderColor:j+"50",backgroundColor:j+"12"},children:l.jsx("span",{className:"text-xs opacity-30",children:P.emoji})},`${y}-${w}`)}if(f){const j=Mr(f.color);return l.jsx("div",{className:`cat-block tetris-cell rounded-sm flex items-center justify-center ${T?"line-clearing":""}`,style:{backgroundColor:T?"#fff":j,borderColor:"rgba(255, 255, 255, 0.35)",boxShadow:T?`0 0 20px #fff, 0 0 40px ${j}`:"inset 0 1px 0 rgba(255,255,255,0.25), 0 1px 3px rgba(0,0,0,0.3)",transform:T?"scale(1.1)":void 0,transition:"all 0.15s ease-out",zIndex:T?10:1},children:l.jsx("span",{className:`text-xs ${T?"opacity-0":""}`,children:f.emoji})},`${y}-${w}`)}return l.jsx("div",{className:`tetris-cell rounded-sm ${S?"bg-gray-900/30 border border-gray-500/10":"border border-white/[0.06] bg-white/[0.02]"}`},`${y}-${w}`)},[t,n,s]);return l.jsx("div",{className:"flex flex-col items-center",children:l.jsx("div",{className:"relative bg-gray-900/60 p-3 rounded-xl border-2 border-white/15 shadow-2xl overflow-hidden flex-shrink-0",ref:d,style:{width:"fit-content"},children:l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"tetris-grid",children:b.map((f,y)=>{const w=y-Oi,S=y<Oi;return f.map((C,P)=>k(C,P,w,S))})}),s.length>0&&l.jsx(l.Fragment,{children:l.jsx(Rb,{lines:s})}),l.jsx(ke,{children:c>0&&l.jsx(M.div,{initial:{opacity:c},animate:{opacity:0},exit:{opacity:0},transition:{duration:.3},className:"absolute inset-0 rounded-lg pointer-events-none",style:{background:"white",zIndex:20}},"flash")}),l.jsx(ke,{children:o.map(f=>l.jsx(Db,{id:f.id,text:f.text,color:f.color},f.id))}),r&&l.jsx(M.div,{initial:{opacity:0},animate:{opacity:1},className:"absolute inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center rounded-lg",style:{zIndex:50},children:l.jsxs(M.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",damping:12},className:"text-center",children:[l.jsx("div",{className:"text-5xl mb-2",children:""}),l.jsx("div",{className:"text-white font-black text-xl drop-shadow-lg",children:"Game Over!"})]})})]})})})},Pn=ae.memo(Ib);class Ob{constructor(){this.HIGH_SCORE_KEY="tetris_high_score"}getHighScore(){try{const t=localStorage.getItem(this.HIGH_SCORE_KEY);return t?parseInt(t,10):0}catch{return 0}}saveHighScore(t){try{const n=this.getHighScore();return t>n?(localStorage.setItem(this.HIGH_SCORE_KEY,t.toString()),!0):!1}catch{return!1}}clearHighScore(){try{localStorage.removeItem(this.HIGH_SCORE_KEY)}catch{}}}const Mh=new Ob,C0=v.createContext(),k0="cattetris_language",Bl=[{code:"en",label:" English",flag:""},{code:"pt",label:" Portugus",flag:""},{code:"es",label:" Espaol",flag:""},{code:"ja",label:" ",flag:""},{code:"fr",label:" Franais",flag:""}],Gb={"menu.title":" Cat Tetris","menu.subtitle":"Stack blocks with your feline friends","menu.continue":" Continue","menu.continueInfo":"Level {level}  {points} pts","menu.newGame":"New Game","menu.play":" Play","menu.vsAI":"VS AI","menu.vsAISub":"Challenge the bot","menu.tutorial":"Tutorial","menu.tutorialSub":"Learn to play","menu.creator":"Creator","menu.creatorSub":"Train T-Spins","menu.aiExpert":"AI Expert","menu.aiExpertSub":"Watch the AI play","menu.shop":"Shop","menu.missions":"Missions","menu.achievements":"Achievements","menu.settings":"Settings","menu.install":" Install","menu.language":" Language","game.held":"Hold","game.heldEmpty":"Empty","game.next":"Next","game.nextLabel":"Next:","game.backToMenu":"Back to Menu","game.level":"Lv.{level}","game.lines":"{n} lines","game.accelerate":" Speed Up","game.hold":" Hold","game.loading":"Loading...","game.scoreTitle":" Score","game.points":"Points:","game.record":"Record:","game.levelLabel":"Level:","game.linesLabel":"Lines:","game.comboLabel":"Combo:","gameOver.title":"Game Over!","gameOver.points":"{score} points","gameOver.msgLow":"Don't give up! Every try makes you better! ","gameOver.msgMed":"Nice work! Keep practicing! ","gameOver.msgHigh":"Excellent! You're getting really good! ","gameOver.msgTop":"Amazing! You're a Cat Tetris master! ","gameOver.playAgain":" Play Again","gameOver.backToMenu":" Back to Menu","gameOver.tip1":" Tip: Use the shadow to plan ahead!","gameOver.tip2":" Try combos for more points!","settings.title":" Settings","settings.audio":"Audio","settings.volume":"Master Volume","settings.soundEnabled":"Sound Enabled","settings.handling":"Handling (DAS/ARR)","settings.dasLabel":"DAS (Delayed Auto-Shift)","settings.dasHelp":"Delay before piece auto-moves when holding a key. Pro: 83-100ms","settings.arrLabel":"ARR (Auto-Repeat Rate)","settings.arrHelp":"Repeat speed when holding. 0 = teleport. Pro: 0-2ms","settings.controls":"Controls","settings.ctrlMove":"Move","settings.ctrlRotateR":"Rotate ","settings.ctrlRotateL":"Rotate ","settings.ctrlSoftDrop":"Soft drop","settings.ctrlHardDrop":"Hard drop","settings.ctrlHold":"Hold","settings.ctrlPause":"Pause","settings.visual":"Visual","settings.particles":"Particle Effects","settings.save":"Save","settings.cancel":"Cancel","shop.title":" Theme Shop","shop.subtitle":"Customize your Tetris pieces","shop.loading":"Loading shop...","shop.errorLoading":" Error loading themes","shop.yourFish":"Your Fish","shop.themesUnlocked":"Themes Unlocked","shop.collection":"Collection","shop.totalSpent":"Total Spent","shop.equipped":" Equipped","shop.premium":" Premium","shop.free":"Free","shop.equip":"Equip","shop.inUse":"In Use","shop.close":"Close","shop.purchaseSuccess":" {name} purchased!","shop.equipSuccess":" {name} equipped!","achievements.title":" Achievements","achievements.subtitle":"Unlock achievements to earn  Fish","achievements.loading":"Loading achievements...","achievements.unlocked":"Unlocked","achievements.complete":"Complete","achievements.earned":"Earned","achievements.total":"Total","achievements.filterAll":"All","achievements.progress":"Progress","achievements.unlockedAt":"Unlocked on {date}","achievements.noneInCategory":"No achievements in this category","achievements.unlockBanner":" ACHIEVEMENT UNLOCKED!","achievements.legendary":" Legendary Achievement! ","missions.title":" Daily Missions","missions.subtitle":"Complete missions to earn  Fish","missions.loading":"Loading missions...","missions.dailyProgress":"Daily Progress:","missions.completedOf":"{completed}/{total} complete","missions.rewardsAvailable":"Rewards Available:","missions.claimed":"(Claimed)","missions.easy":" Easy","missions.medium":" Medium","missions.hard":" Hard","missions.progress":"Progress","missions.claimReward":" Claim Reward","missions.resetNote":"Missions reset daily at 00:00","missions.allCompleted":" All missions complete! ","missions.claimSuccess":" Reward claimed: +{reward} ","multiplayer.title":" Multiplayer","multiplayer.subtitle":"Challenge friends or face the AI","multiplayer.errorLoading":" Error loading multiplayer","multiplayer.matchesVsAI":"Matches vs AI","multiplayer.wins":"Wins","multiplayer.winRate":"Win Rate","multiplayer.player":"player","multiplayer.players":"players","multiplayer.comingSoon":" COMING SOON","multiplayer.back":" Back","multiplayer.yourName":"Your Name:","multiplayer.aiDifficulty":"AI Difficulty:","multiplayer.ai1Left":" AI 1 (Left):","multiplayer.ai2Right":" AI 2 (Right):","multiplayer.startMatch":" Start Match","multiplayer.player1":"Player 1","multiplayer.player2":"Player 2","gameModes.title":" Game Modes","gameModes.subtitle":"Choose your challenge","gameModes.loading":"Loading modes...","gameModes.errorLoading":" Error loading modes","gameModes.selected":" Selected","gameModes.goalLines":" Goal: {n} lines","gameModes.timeLimit":" Time: {time}","gameModes.gameOverYes":" Game Over","gameModes.gameOverNo":" No Game Over","gameModes.speedUp":" Speed increases","gameModes.speedFixed":" Fixed speed","gameModes.startLevel":" Start: Level {n}","gameModes.relaxed":" Relaxed mode","gameModes.yourRecords":"Your records:","gameModes.bestScore":"Best Score","gameModes.bestTime":"Best Time","gameModes.mostLines":"Most Lines","gameModes.gamesPlayed":"{n} games played","gameModes.noRecords":" No records yet","gameModes.play":" Play","tutorial.title":" Tutorial","tutorial.subtitle":"Learn from zero to PRO","tutorial.close":" Back","tutorial.overallProgress":"Overall progress","tutorial.fundamentals":"Fundamentals","tutorial.fundamentalsDesc":"Tetris basics","tutorial.intermediate":"Intermediate","tutorial.intermediateDesc":"T-spins and combos","tutorial.advanced":"Advanced","tutorial.advancedDesc":"Setups and strategies","tutorial.pro":"Professional","tutorial.proDesc":"PRO techniques","tutorial.noLessons":"No lessons in this module","tutorial.badgesEarned":"Badges earned","controls.hint":"  move |  rotate |  soft | Space = hard drop | C = hold","controls.continue":" Continue","controls.pause":" Pause","controls.touchFriendly":" Touch-friendly controls","controls.useShadow":" Use the shadow to plan!","gamepad.connected":"{n} Controller Connected","gamepad.connectedPlural":"{n} Controllers Connected","gamepad.ready":"Ready to play!","gamepad.showControls":"Show controls","gamepad.controlsTitle":" Controls:","gamepad.move":"Move","gamepad.accelerate":"Speed Up","gamepad.hardDrop":"Hard Drop","gamepad.rotateRight":"Rotate ","gamepad.rotateLeft":"Rotate ","gamepad.hold":"Hold","gamepad.pause":"Pause","gamepad.analogNote":" Left Analog Stick also works!","gamepad.triggerNote":" L2/R2 also rotate","gamepad.backNote":" Back/Select = Back to menu","gamepad.controllerLabel":"Controller {n}:","gamepad.buttons":"{n} buttons","gamepad.axes":"{n} axes","gamepad.vibration":" Vibration","reward.lessonComplete":"Lesson Complete!","reward.fish":"Fish","reward.xp":"XP","reward.badge":"Badge","pwa.notAvailableTitle":"PWA not available","pwa.notAvailableText":"This device does not support PWA installation or the app is already installed.","pwa.understood":" Got it","pwa.installTitle":"Install Cat Tetris","pwa.installText":"Install Cat Tetris on your home screen to play offline anytime! Works like a native app.","pwa.quickAccess":" Quick Access","pwa.quickAccessDesc":"Home screen icon","pwa.offline":" Offline","pwa.offlineDesc":"Play without internet","pwa.performance":" Performance","pwa.performanceDesc":"Instant loading","pwa.experience":" Experience","pwa.experienceDesc":"Like a native app","pwa.notNow":"Not now","pwa.install":" Install","share.prompt":"Share your score:","share.text":` Cat Tetris!
 {score} points
 Level {level}
 {lines} lines

Can you beat me? `,"share.title":"My Cat Tetris score","share.share":" Share","share.copied":" Copied!","share.copy":" Copy","share.twitter":" Twitter","share.whatsapp":" WhatsApp","share.close":"Close","statistics.title":" Statistics","statistics.playTime":"Play Time:","statistics.piecesPlaced":"Pieces Placed:","statistics.linesCleared":"Lines Cleared:","statistics.tSpins":"T-Spins:","statistics.backToBack":"Back-to-Back:","statistics.maxCombo":"Max Combo:","statistics.tetrisCount":"Tetris (4 lines):","statistics.lps":"LPS (Lines/sec):","error.title":" Oops! Something went wrong","error.message":"The game encountered an unexpected problem.","error.restart":" Restart Game ","error.details":"Error details","common.close":"Close","common.back":" Back","common.points":"points","common.level":"Level","common.lines":"lines"},Fb={"menu.title":" Cat Tetris","menu.subtitle":"Empilhe blocos com seus amigos felinos","menu.continue":" Continuar","menu.continueInfo":"Nvel {level}  {points} pts","menu.newGame":"Novo Jogo","menu.play":" Jogar","menu.vsAI":"VS IA","menu.vsAISub":"Desafie o bot","menu.tutorial":"Tutorial","menu.tutorialSub":"Aprenda a jogar","menu.creator":"Criador","menu.creatorSub":"Treine T-Spins","menu.aiExpert":"IA Expert","menu.aiExpertSub":"Assista a IA jogar","menu.shop":"Loja","menu.missions":"Misses","menu.achievements":"Conquistas","menu.settings":"Config","menu.install":" Instalar","menu.language":" Idioma","game.held":"Guardada","game.heldEmpty":"Vazio","game.next":"Prximas","game.nextLabel":"Prxima:","game.backToMenu":"Voltar ao Menu","game.level":"Nv.{level}","game.lines":"{n} linhas","game.accelerate":" Acelerar","game.hold":" Guardar","game.loading":"Carregando...","game.scoreTitle":" Pontuao","game.points":"Pontos:","game.record":"Recorde:","game.levelLabel":"Nvel:","game.linesLabel":"Linhas:","game.comboLabel":"Combo:","gameOver.title":"Game Over!","gameOver.points":"{score} pontos","gameOver.msgLow":"No desista! Cada tentativa te torna melhor! ","gameOver.msgMed":"Bom trabalho! Continue praticando! ","gameOver.msgHigh":"Excelente! Voc est ficando muito bom! ","gameOver.msgTop":"Incrvel! Voc  um mestre do Cat Tetris! ","gameOver.playAgain":" Jogar Novamente","gameOver.backToMenu":" Voltar ao Menu","gameOver.tip1":" Dica: Use a sombra para planejar melhor!","gameOver.tip2":" Tente fazer combos para mais pontos!","settings.title":" Configuraes","settings.audio":"udio","settings.volume":"Volume Geral","settings.soundEnabled":"Som Habilitado","settings.handling":"Handling (DAS/ARR)","settings.dasLabel":"DAS (Delayed Auto-Shift)","settings.dasHelp":"Delay antes da pea mover automaticamente ao segurar a tecla. Pro: 83-100ms","settings.arrLabel":"ARR (Auto-Repeat Rate)","settings.arrHelp":"Velocidade de repetio ao segurar. 0 = teleporta. Pro: 0-2ms","settings.controls":"Controles","settings.ctrlMove":"Mover","settings.ctrlRotateR":"Girar ","settings.ctrlRotateL":"Girar ","settings.ctrlSoftDrop":"Soft drop","settings.ctrlHardDrop":"Hard drop","settings.ctrlHold":"Hold","settings.ctrlPause":"Pausar","settings.visual":"Visual","settings.particles":"Efeitos de Partculas","settings.save":"Salvar","settings.cancel":"Cancelar","shop.title":" Loja de Temas","shop.subtitle":"Personalize suas peas de Tetris","shop.loading":"Carregando loja...","shop.errorLoading":" Erro ao carregar temas","shop.yourFish":"Seus Peixes","shop.themesUnlocked":"Temas Desbloqueados","shop.collection":"Coleo","shop.totalSpent":"Gasto Total","shop.equipped":" Equipado","shop.premium":" Premium","shop.free":"Gratuito","shop.equip":"Equipar","shop.inUse":"Em Uso","shop.close":"Fechar","shop.purchaseSuccess":" {name} comprado com sucesso!","shop.equipSuccess":" {name} equipado!","achievements.title":" Conquistas","achievements.subtitle":"Desbloqueie conquistas para ganhar  Peixes","achievements.loading":"Carregando conquistas...","achievements.unlocked":"Desbloqueadas","achievements.complete":"Completo","achievements.earned":"Ganhos","achievements.total":"Total","achievements.filterAll":"Todas","achievements.progress":"Progresso","achievements.unlockedAt":"Desbloqueado em {date}","achievements.noneInCategory":"Nenhuma conquista nesta categoria","achievements.unlockBanner":" CONQUISTA DESBLOQUEADA!","achievements.legendary":" Conquista Lendria! ","missions.title":" Misses Dirias","missions.subtitle":"Complete misses para ganhar  Peixes","missions.loading":"Carregando misses...","missions.dailyProgress":"Progresso Dirio:","missions.completedOf":"{completed}/{total} completas","missions.rewardsAvailable":"Recompensas Disponveis:","missions.claimed":"(Coletado)","missions.easy":" Fcil","missions.medium":" Mdio","missions.hard":" Difcil","missions.progress":"Progresso","missions.claimReward":" Coletar Recompensa","missions.resetNote":"As misses resetam todos os dias s 00:00","missions.allCompleted":" Todas as misses completas! ","missions.claimSuccess":" Recompensa coletada: +{reward} ","multiplayer.title":" Multiplayer","multiplayer.subtitle":"Desafie amigos ou enfrente a IA","multiplayer.errorLoading":" Erro ao carregar multiplayer","multiplayer.matchesVsAI":"Partidas vs IA","multiplayer.wins":"Vitrias","multiplayer.winRate":"Taxa de Vitria","multiplayer.player":"jogador","multiplayer.players":"jogadores","multiplayer.comingSoon":" EM BREVE","multiplayer.back":" Voltar","multiplayer.yourName":"Seu Nome:","multiplayer.aiDifficulty":"Dificuldade da IA:","multiplayer.ai1Left":" IA 1 (Esquerda):","multiplayer.ai2Right":" IA 2 (Direita):","multiplayer.startMatch":" Iniciar Partida","multiplayer.player1":"Jogador 1","multiplayer.player2":"Jogador 2","gameModes.title":" Modos de Jogo","gameModes.subtitle":"Escolha seu desafio","gameModes.loading":"Carregando modos...","gameModes.errorLoading":" Erro ao carregar modos","gameModes.selected":" Selecionado","gameModes.goalLines":" Meta: {n} linhas","gameModes.timeLimit":" Tempo: {time}","gameModes.gameOverYes":" Game Over","gameModes.gameOverNo":" Sem Game Over","gameModes.speedUp":" Velocidade aumenta","gameModes.speedFixed":" Velocidade fixa","gameModes.startLevel":" Incio: Nvel {n}","gameModes.relaxed":" Modo relaxado","gameModes.yourRecords":"Seus recordes:","gameModes.bestScore":"Melhor Pontuao","gameModes.bestTime":"Melhor Tempo","gameModes.mostLines":"Mais Linhas","gameModes.gamesPlayed":"{n} partidas jogadas","gameModes.noRecords":" Nenhum recorde ainda","gameModes.play":" Jogar","tutorial.title":" Tutorial","tutorial.subtitle":"Aprenda do zero ao PRO","tutorial.close":" Voltar","tutorial.overallProgress":"Progresso geral","tutorial.fundamentals":"Fundamentos","tutorial.fundamentalsDesc":"O bsico do Tetris","tutorial.intermediate":"Intermedirio","tutorial.intermediateDesc":"T-spins e combos","tutorial.advanced":"Avanado","tutorial.advancedDesc":"Setups e estratgias","tutorial.pro":"Profissional","tutorial.proDesc":"Tcnicas PRO","tutorial.noLessons":"Nenhuma lio neste mdulo","tutorial.badgesEarned":"Badges conquistadas","controls.hint":"  mover |  girar |  soft | Espao = hard drop | C = hold","controls.continue":" Continuar","controls.pause":" Pausar","controls.touchFriendly":" Controles touch-friendly","controls.useShadow":" Use a sombra para planejar!","gamepad.connected":"{n} Controle Conectado","gamepad.connectedPlural":"{n} Controles Conectados","gamepad.ready":"Pronto para jogar!","gamepad.showControls":"Mostrar controles","gamepad.controlsTitle":" Controles:","gamepad.move":"Mover","gamepad.accelerate":"Acelerar","gamepad.hardDrop":"Hard Drop","gamepad.rotateRight":"Girar ","gamepad.rotateLeft":"Girar ","gamepad.hold":"Guardar","gamepad.pause":"Pausar","gamepad.analogNote":" Analog Stick Esquerdo tambm funciona!","gamepad.triggerNote":" L2/R2 tambm giram a pea","gamepad.backNote":" Back/Select = Voltar ao menu","gamepad.controllerLabel":"Controle {n}:","gamepad.buttons":"{n} botes","gamepad.axes":"{n} eixos","gamepad.vibration":" Vibrao","reward.lessonComplete":"Lio Completa!","reward.fish":"Peixes","reward.xp":"XP","reward.badge":"Badge","pwa.notAvailableTitle":"PWA no disponvel","pwa.notAvailableText":"Este dispositivo no suporta instalao de PWA ou o app j est instalado.","pwa.understood":" Entendi","pwa.installTitle":"Instalar Cat Tetris","pwa.installText":"Instale o Cat Tetris na sua tela inicial para jogar offline a qualquer momento! Funciona como um app nativo.","pwa.quickAccess":" Acesso Rpido","pwa.quickAccessDesc":"cone na tela inicial","pwa.offline":" Offline","pwa.offlineDesc":"Jogue sem internet","pwa.performance":" Performance","pwa.performanceDesc":"Carregamento instantneo","pwa.experience":" Experincia","pwa.experienceDesc":"Como app nativo","pwa.notNow":"Agora no","pwa.install":" Instalar","share.prompt":"Compartilhe sua pontuao:","share.text":` Cat Tetris!
 {score} pontos
 Nvel {level}
 {lines} linhas

Consegue me superar? `,"share.title":"Minha pontuao no Cat Tetris","share.share":" Compartilhar","share.copied":" Copiado!","share.copy":" Copiar","share.twitter":" Twitter","share.whatsapp":" WhatsApp","share.close":"Fechar","statistics.title":" Estatsticas","statistics.playTime":"Tempo Jogado:","statistics.piecesPlaced":"Peas Colocadas:","statistics.linesCleared":"Linhas Limpas:","statistics.tSpins":"T-Spins:","statistics.backToBack":"Back-to-Back:","statistics.maxCombo":"Combo Mximo:","statistics.tetrisCount":"Tetris (4 linhas):","statistics.lps":"LPS (Linhas/seg):","error.title":" Ops! Algo deu errado","error.message":"O jogo encontrou um problema inesperado.","error.restart":" Reiniciar Jogo ","error.details":"Detalhes do erro","common.close":"Fechar","common.back":" Voltar","common.points":"pontos","common.level":"Nvel","common.lines":"linhas"},Vb={"menu.title":" Cat Tetris","menu.subtitle":"Apila bloques con tus amigos felinos","menu.continue":" Continuar","menu.continueInfo":"Nivel {level}  {points} pts","menu.newGame":"Nuevo Juego","menu.play":" Jugar","menu.vsAI":"VS IA","menu.vsAISub":"Desafa al bot","menu.tutorial":"Tutorial","menu.tutorialSub":"Aprende a jugar","menu.creator":"Creador","menu.creatorSub":"Entrena T-Spins","menu.aiExpert":"IA Expert","menu.aiExpertSub":"Mira la IA jugar","menu.shop":"Tienda","menu.missions":"Misiones","menu.achievements":"Logros","menu.settings":"Ajustes","menu.install":" Instalar","menu.language":" Idioma","game.held":"Reserva","game.heldEmpty":"Vaco","game.next":"Siguientes","game.nextLabel":"Siguiente:","game.backToMenu":"Volver al Men","game.level":"Nv.{level}","game.lines":"{n} lneas","game.accelerate":" Acelerar","game.hold":" Reservar","game.loading":"Cargando...","game.scoreTitle":" Puntuacin","game.points":"Puntos:","game.record":"Rcord:","game.levelLabel":"Nivel:","game.linesLabel":"Lneas:","game.comboLabel":"Combo:","gameOver.title":"Game Over!","gameOver.points":"{score} puntos","gameOver.msgLow":"No te rindas! Cada intento te hace mejor! ","gameOver.msgMed":"Buen trabajo! Sigue practicando! ","gameOver.msgHigh":"Excelente! Ests mejorando mucho! ","gameOver.msgTop":"Increble! Eres un maestro de Cat Tetris! ","gameOver.playAgain":" Jugar de Nuevo","gameOver.backToMenu":" Volver al Men","gameOver.tip1":" Consejo: Usa la sombra para planificar!","gameOver.tip2":" Intenta combos para ms puntos!","settings.title":" Ajustes","settings.audio":"Audio","settings.volume":"Volumen General","settings.soundEnabled":"Sonido Habilitado","settings.handling":"Handling (DAS/ARR)","settings.dasLabel":"DAS (Delayed Auto-Shift)","settings.dasHelp":"Retardo antes de que la pieza se mueva al mantener la tecla. Pro: 83-100ms","settings.arrLabel":"ARR (Auto-Repeat Rate)","settings.arrHelp":"Velocidad de repeticin al mantener. 0 = teletransporte. Pro: 0-2ms","settings.controls":"Controles","settings.ctrlMove":"Mover","settings.ctrlRotateR":"Girar ","settings.ctrlRotateL":"Girar ","settings.ctrlSoftDrop":"Soft drop","settings.ctrlHardDrop":"Hard drop","settings.ctrlHold":"Hold","settings.ctrlPause":"Pausa","settings.visual":"Visual","settings.particles":"Efectos de Partculas","settings.save":"Guardar","settings.cancel":"Cancelar","shop.title":" Tienda de Temas","shop.subtitle":"Personaliza tus piezas de Tetris","shop.loading":"Cargando tienda...","shop.errorLoading":" Error al cargar temas","shop.yourFish":"Tus Peces","shop.themesUnlocked":"Temas Desbloqueados","shop.collection":"Coleccin","shop.totalSpent":"Gasto Total","shop.equipped":" Equipado","shop.premium":" Premium","shop.free":"Gratuito","shop.equip":"Equipar","shop.inUse":"En Uso","shop.close":"Cerrar","shop.purchaseSuccess":" {name} comprado!","shop.equipSuccess":" {name} equipado!","achievements.title":" Logros","achievements.subtitle":"Desbloquea logros para ganar  Peces","achievements.loading":"Cargando logros...","achievements.unlocked":"Desbloqueados","achievements.complete":"Completo","achievements.earned":"Ganados","achievements.total":"Total","achievements.filterAll":"Todos","achievements.progress":"Progreso","achievements.unlockedAt":"Desbloqueado el {date}","achievements.noneInCategory":"No hay logros en esta categora","achievements.unlockBanner":" LOGRO DESBLOQUEADO!","achievements.legendary":" Logro Legendario! ","missions.title":" Misiones Diarias","missions.subtitle":"Completa misiones para ganar  Peces","missions.loading":"Cargando misiones...","missions.dailyProgress":"Progreso Diario:","missions.completedOf":"{completed}/{total} completas","missions.rewardsAvailable":"Recompensas Disponibles:","missions.claimed":"(Reclamado)","missions.easy":" Fcil","missions.medium":" Medio","missions.hard":" Difcil","missions.progress":"Progreso","missions.claimReward":" Reclamar Recompensa","missions.resetNote":"Las misiones se reinician cada da a las 00:00","missions.allCompleted":" Todas las misiones completas! ","missions.claimSuccess":" Recompensa reclamada: +{reward} ","multiplayer.title":" Multijugador","multiplayer.subtitle":"Desafa amigos o enfrenta la IA","multiplayer.errorLoading":" Error al cargar multijugador","multiplayer.matchesVsAI":"Partidas vs IA","multiplayer.wins":"Victorias","multiplayer.winRate":"Tasa de Victoria","multiplayer.player":"jugador","multiplayer.players":"jugadores","multiplayer.comingSoon":" PRXIMAMENTE","multiplayer.back":" Volver","multiplayer.yourName":"Tu Nombre:","multiplayer.aiDifficulty":"Dificultad de IA:","multiplayer.ai1Left":" IA 1 (Izquierda):","multiplayer.ai2Right":" IA 2 (Derecha):","multiplayer.startMatch":" Iniciar Partida","multiplayer.player1":"Jugador 1","multiplayer.player2":"Jugador 2","gameModes.title":" Modos de Juego","gameModes.subtitle":"Elige tu desafo","gameModes.loading":"Cargando modos...","gameModes.errorLoading":" Error al cargar modos","gameModes.selected":" Seleccionado","gameModes.goalLines":" Meta: {n} lneas","gameModes.timeLimit":" Tiempo: {time}","gameModes.gameOverYes":" Game Over","gameModes.gameOverNo":" Sin Game Over","gameModes.speedUp":" Velocidad aumenta","gameModes.speedFixed":" Velocidad fija","gameModes.startLevel":" Inicio: Nivel {n}","gameModes.relaxed":" Modo relajado","gameModes.yourRecords":"Tus rcords:","gameModes.bestScore":"Mejor Puntuacin","gameModes.bestTime":"Mejor Tiempo","gameModes.mostLines":"Ms Lneas","gameModes.gamesPlayed":"{n} partidas jugadas","gameModes.noRecords":" Sin rcords an","gameModes.play":" Jugar","tutorial.title":" Tutorial","tutorial.subtitle":"Aprende de cero a PRO","tutorial.close":" Volver","tutorial.overallProgress":"Progreso general","tutorial.fundamentals":"Fundamentos","tutorial.fundamentalsDesc":"Lo bsico del Tetris","tutorial.intermediate":"Intermedio","tutorial.intermediateDesc":"T-spins y combos","tutorial.advanced":"Avanzado","tutorial.advancedDesc":"Setups y estrategias","tutorial.pro":"Profesional","tutorial.proDesc":"Tcnicas PRO","tutorial.noLessons":"No hay lecciones en este mdulo","tutorial.badgesEarned":"Badges obtenidas","controls.hint":"  mover |  girar |  soft | Espacio = hard drop | C = hold","controls.continue":" Continuar","controls.pause":" Pausa","controls.touchFriendly":" Controles tctiles","controls.useShadow":" Usa la sombra para planificar!","gamepad.connected":"{n} Mando Conectado","gamepad.connectedPlural":"{n} Mandos Conectados","gamepad.ready":"Listo para jugar!","gamepad.showControls":"Mostrar controles","gamepad.controlsTitle":" Controles:","gamepad.move":"Mover","gamepad.accelerate":"Acelerar","gamepad.hardDrop":"Hard Drop","gamepad.rotateRight":"Girar ","gamepad.rotateLeft":"Girar ","gamepad.hold":"Reservar","gamepad.pause":"Pausa","gamepad.analogNote":" El stick izquierdo tambin funciona!","gamepad.triggerNote":" L2/R2 tambin giran","gamepad.backNote":" Back/Select = Volver al men","gamepad.controllerLabel":"Mando {n}:","gamepad.buttons":"{n} botones","gamepad.axes":"{n} ejes","gamepad.vibration":" Vibracin","reward.lessonComplete":"Leccin Completa!","reward.fish":"Peces","reward.xp":"XP","reward.badge":"Badge","pwa.notAvailableTitle":"PWA no disponible","pwa.notAvailableText":"Este dispositivo no soporta la instalacin de PWA o la app ya est instalada.","pwa.understood":" Entendido","pwa.installTitle":"Instalar Cat Tetris","pwa.installText":"Instala Cat Tetris en tu pantalla de inicio para jugar offline! Funciona como una app nativa.","pwa.quickAccess":" Acceso Rpido","pwa.quickAccessDesc":"cono en pantalla","pwa.offline":" Offline","pwa.offlineDesc":"Juega sin internet","pwa.performance":" Rendimiento","pwa.performanceDesc":"Carga instantnea","pwa.experience":" Experiencia","pwa.experienceDesc":"Como app nativa","pwa.notNow":"Ahora no","pwa.install":" Instalar","share.prompt":"Comparte tu puntuacin:","share.text":` Cat Tetris!
 {score} puntos
 Nivel {level}
 {lines} lneas

Puedes superarme? `,"share.title":"Mi puntuacin en Cat Tetris","share.share":" Compartir","share.copied":" Copiado!","share.copy":" Copiar","share.twitter":" Twitter","share.whatsapp":" WhatsApp","share.close":"Cerrar","statistics.title":" Estadsticas","statistics.playTime":"Tiempo Jugado:","statistics.piecesPlaced":"Piezas Colocadas:","statistics.linesCleared":"Lneas Limpiadas:","statistics.tSpins":"T-Spins:","statistics.backToBack":"Back-to-Back:","statistics.maxCombo":"Combo Mximo:","statistics.tetrisCount":"Tetris (4 lneas):","statistics.lps":"LPS (Lneas/seg):","error.title":" Ups! Algo sali mal","error.message":"El juego encontr un problema inesperado.","error.restart":" Reiniciar Juego ","error.details":"Detalles del error","common.close":"Cerrar","common.back":" Volver","common.points":"puntos","common.level":"Nivel","common.lines":"lneas"},Bb={"menu.title":" Cat Tetris","menu.subtitle":"","menu.continue":" ","menu.continueInfo":" {level}  {points} pts","menu.newGame":"","menu.play":" ","menu.vsAI":"VS AI","menu.vsAISub":"AI","menu.tutorial":"","menu.tutorialSub":"","menu.creator":"","menu.creatorSub":"T-Spin","menu.aiExpert":"AI","menu.aiExpertSub":"AI","menu.shop":"","menu.missions":"","menu.achievements":"","menu.settings":"","menu.install":" ","menu.language":" ","game.held":"","game.heldEmpty":"","game.next":"","game.nextLabel":":","game.backToMenu":"","game.level":"Lv.{level}","game.lines":"{n} ","game.accelerate":" ","game.hold":" ","game.loading":"...","game.scoreTitle":" ","game.points":":","game.record":":","game.levelLabel":":","game.linesLabel":":","game.comboLabel":":","gameOver.title":"!","gameOver.points":"{score} ","gameOver.msgLow":" ","gameOver.msgMed":" ","gameOver.msgHigh":" ","gameOver.msgTop":"Cat Tetris ","gameOver.playAgain":" ","gameOver.backToMenu":" ","gameOver.tip1":" : ","gameOver.tip2":" ","settings.title":" ","settings.audio":"","settings.volume":"","settings.soundEnabled":"","settings.handling":" (DAS/ARR)","settings.dasLabel":"DAS ()","settings.dasHelp":": 83-100ms","settings.arrLabel":"ARR ()","settings.arrHelp":"0 = : 0-2ms","settings.controls":"","settings.ctrlMove":"","settings.ctrlRotateR":"","settings.ctrlRotateL":"","settings.ctrlSoftDrop":"","settings.ctrlHardDrop":"","settings.ctrlHold":"","settings.ctrlPause":"","settings.visual":"","settings.particles":"","settings.save":"","settings.cancel":"","shop.title":" ","shop.subtitle":"","shop.loading":"...","shop.errorLoading":" ","shop.yourFish":"","shop.themesUnlocked":"","shop.collection":"","shop.totalSpent":"","shop.equipped":" ","shop.premium":" ","shop.free":"","shop.equip":"","shop.inUse":"","shop.close":"","shop.purchaseSuccess":" {name} ","shop.equipSuccess":" {name} ","achievements.title":" ","achievements.subtitle":"  ","achievements.loading":"...","achievements.unlocked":"","achievements.complete":"","achievements.earned":"","achievements.total":"","achievements.filterAll":"","achievements.progress":"","achievements.unlockedAt":"{date} ","achievements.noneInCategory":"","achievements.unlockBanner":" ","achievements.legendary":"  ","missions.title":" ","missions.subtitle":"  ","missions.loading":"...","missions.dailyProgress":":","missions.completedOf":"{completed}/{total} ","missions.rewardsAvailable":":","missions.claimed":"()","missions.easy":" ","missions.medium":" ","missions.hard":" ","missions.progress":"","missions.claimReward":" ","missions.resetNote":"00:00","missions.allCompleted":"  ","missions.claimSuccess":" : +{reward} ","multiplayer.title":" ","multiplayer.subtitle":"AI","multiplayer.errorLoading":" ","multiplayer.matchesVsAI":"AI","multiplayer.wins":"","multiplayer.winRate":"","multiplayer.player":"","multiplayer.players":"","multiplayer.comingSoon":" ","multiplayer.back":" ","multiplayer.yourName":":","multiplayer.aiDifficulty":"AI:","multiplayer.ai1Left":" AI 1 ():","multiplayer.ai2Right":" AI 2 ():","multiplayer.startMatch":" ","multiplayer.player1":" 1","multiplayer.player2":" 2","gameModes.title":" ","gameModes.subtitle":"","gameModes.loading":"...","gameModes.errorLoading":" ","gameModes.selected":" ","gameModes.goalLines":" : {n} ","gameModes.timeLimit":" : {time}","gameModes.gameOverYes":" ","gameModes.gameOverNo":" ","gameModes.speedUp":" ","gameModes.speedFixed":" ","gameModes.startLevel":" :  {n}","gameModes.relaxed":" ","gameModes.yourRecords":":","gameModes.bestScore":"","gameModes.bestTime":"","gameModes.mostLines":"","gameModes.gamesPlayed":"{n} ","gameModes.noRecords":" ","gameModes.play":" ","tutorial.title":" ","tutorial.subtitle":"PRO","tutorial.close":" ","tutorial.overallProgress":"","tutorial.fundamentals":"","tutorial.fundamentalsDesc":"","tutorial.intermediate":"","tutorial.intermediateDesc":"T-spin","tutorial.advanced":"","tutorial.advancedDesc":"","tutorial.pro":"","tutorial.proDesc":"PRO ","tutorial.noLessons":"","tutorial.badgesEarned":"","controls.hint":"   |   |   |  =  | C = ","controls.continue":" ","controls.pause":" ","controls.touchFriendly":" ","controls.useShadow":" ","gamepad.connected":"{n} ","gamepad.connectedPlural":"{n} ","gamepad.ready":"","gamepad.showControls":"","gamepad.controlsTitle":" :","gamepad.move":"","gamepad.accelerate":"","gamepad.hardDrop":"","gamepad.rotateRight":"","gamepad.rotateLeft":"","gamepad.hold":"","gamepad.pause":"","gamepad.analogNote":" ","gamepad.triggerNote":" L2/R2","gamepad.backNote":" Back/Select = ","gamepad.controllerLabel":" {n}:","gamepad.buttons":"{n} ","gamepad.axes":"{n} ","gamepad.vibration":" ","reward.lessonComplete":"","reward.fish":"","reward.xp":"XP","reward.badge":"","pwa.notAvailableTitle":"PWA","pwa.notAvailableText":"PWA","pwa.understood":" ","pwa.installTitle":"Cat Tetris","pwa.installText":"","pwa.quickAccess":" ","pwa.quickAccessDesc":"","pwa.offline":" ","pwa.offlineDesc":"","pwa.performance":" ","pwa.performanceDesc":"","pwa.experience":" ","pwa.experienceDesc":"","pwa.notNow":"","pwa.install":" ","share.prompt":":","share.text":` Cat Tetris!
 {score} 
  {level}
 {lines} 

 `,"share.title":"Cat Tetris","share.share":" ","share.copied":" ","share.copy":" ","share.twitter":" Twitter","share.whatsapp":" WhatsApp","share.close":"","statistics.title":" ","statistics.playTime":":","statistics.piecesPlaced":":","statistics.linesCleared":":","statistics.tSpins":"T-Spins:","statistics.backToBack":"Back-to-Back:","statistics.maxCombo":":","statistics.tetrisCount":"(4):","statistics.lps":"LPS (/):","error.title":" ","error.message":"","error.restart":"  ","error.details":"","common.close":"","common.back":" ","common.points":"","common.level":"","common.lines":""},Hb={"menu.title":" Cat Tetris","menu.subtitle":"Empilez les blocs avec vos amis flins","menu.continue":" Continuer","menu.continueInfo":"Niveau {level}  {points} pts","menu.newGame":"Nouvelle Partie","menu.play":" Jouer","menu.vsAI":"VS IA","menu.vsAISub":"Dfiez le bot","menu.tutorial":"Tutoriel","menu.tutorialSub":"Apprenez  jouer","menu.creator":"Crateur","menu.creatorSub":"Entranez T-Spins","menu.aiExpert":"IA Expert","menu.aiExpertSub":"Regardez l'IA jouer","menu.shop":"Boutique","menu.missions":"Missions","menu.achievements":"Succs","menu.settings":"Options","menu.install":" Installer","menu.language":" Langue","game.held":"Rserve","game.heldEmpty":"Vide","game.next":"Suivantes","game.nextLabel":"Suivante:","game.backToMenu":"Retour au Menu","game.level":"Nv.{level}","game.lines":"{n} lignes","game.accelerate":" Acclrer","game.hold":" Rserve","game.loading":"Chargement...","game.scoreTitle":" Score","game.points":"Points:","game.record":"Record:","game.levelLabel":"Niveau:","game.linesLabel":"Lignes:","game.comboLabel":"Combo:","gameOver.title":"Game Over!","gameOver.points":"{score} points","gameOver.msgLow":"N'abandonnez pas ! Chaque essai vous rend meilleur ! ","gameOver.msgMed":"Bien jou ! Continuez  pratiquer ! ","gameOver.msgHigh":"Excellent ! Vous progressez vraiment ! ","gameOver.msgTop":"Incroyable ! Vous tes un matre du Cat Tetris ! ","gameOver.playAgain":" Rejouer","gameOver.backToMenu":" Retour au Menu","gameOver.tip1":" Astuce: Utilisez l'ombre pour planifier !","gameOver.tip2":" Tentez des combos pour plus de points !","settings.title":" Options","settings.audio":"Audio","settings.volume":"Volume Gnral","settings.soundEnabled":"Son Activ","settings.handling":"Maniement (DAS/ARR)","settings.dasLabel":"DAS (Dlai Auto-Shift)","settings.dasHelp":"Dlai avant le dplacement auto en maintenant. Pro: 83-100ms","settings.arrLabel":"ARR (Vitesse Auto-Repeat)","settings.arrHelp":"Vitesse de rptition en maintenant. 0 = tlportation. Pro: 0-2ms","settings.controls":"Contrles","settings.ctrlMove":"Dplacer","settings.ctrlRotateR":"Tourner ","settings.ctrlRotateL":"Tourner ","settings.ctrlSoftDrop":"Soft drop","settings.ctrlHardDrop":"Hard drop","settings.ctrlHold":"Rserve","settings.ctrlPause":"Pause","settings.visual":"Visuel","settings.particles":"Effets de Particules","settings.save":"Sauvegarder","settings.cancel":"Annuler","shop.title":" Boutique de Thmes","shop.subtitle":"Personnalisez vos pices de Tetris","shop.loading":"Chargement boutique...","shop.errorLoading":" Erreur de chargement","shop.yourFish":"Vos Poissons","shop.themesUnlocked":"Thmes Dbloqus","shop.collection":"Collection","shop.totalSpent":"Total Dpens","shop.equipped":" quip","shop.premium":" Premium","shop.free":"Gratuit","shop.equip":"quiper","shop.inUse":"Utilis","shop.close":"Fermer","shop.purchaseSuccess":" {name} achet !","shop.equipSuccess":" {name} quip !","achievements.title":" Succs","achievements.subtitle":"Dbloquez des succs pour gagner des ","achievements.loading":"Chargement succs...","achievements.unlocked":"Dbloqus","achievements.complete":"Complet","achievements.earned":"Gagns","achievements.total":"Total","achievements.filterAll":"Tous","achievements.progress":"Progrs","achievements.unlockedAt":"Dbloqu le {date}","achievements.noneInCategory":"Aucun succs dans cette catgorie","achievements.unlockBanner":" SUCCS DBLOQU !","achievements.legendary":" Succs Lgendaire ! ","missions.title":" Missions Quotidiennes","missions.subtitle":"Compltez des missions pour gagner des ","missions.loading":"Chargement missions...","missions.dailyProgress":"Progrs Quotidien:","missions.completedOf":"{completed}/{total} compltes","missions.rewardsAvailable":"Rcompenses Disponibles:","missions.claimed":"(Rclam)","missions.easy":" Facile","missions.medium":" Moyen","missions.hard":" Difficile","missions.progress":"Progrs","missions.claimReward":" Rclamer","missions.resetNote":"Les missions se rinitialisent chaque jour  00:00","missions.allCompleted":" Toutes les missions termines ! ","missions.claimSuccess":" Rcompense rclame: +{reward} ","multiplayer.title":" Multijoueur","multiplayer.subtitle":"Dfiez vos amis ou affrontez l'IA","multiplayer.errorLoading":" Erreur de chargement","multiplayer.matchesVsAI":"Matchs vs IA","multiplayer.wins":"Victoires","multiplayer.winRate":"Taux de Victoire","multiplayer.player":"joueur","multiplayer.players":"joueurs","multiplayer.comingSoon":" BIENTT","multiplayer.back":" Retour","multiplayer.yourName":"Votre Nom:","multiplayer.aiDifficulty":"Difficult de l'IA:","multiplayer.ai1Left":" IA 1 (Gauche):","multiplayer.ai2Right":" IA 2 (Droite):","multiplayer.startMatch":" Lancer le Match","multiplayer.player1":"Joueur 1","multiplayer.player2":"Joueur 2","gameModes.title":" Modes de Jeu","gameModes.subtitle":"Choisissez votre dfi","gameModes.loading":"Chargement modes...","gameModes.errorLoading":" Erreur","gameModes.selected":" Slectionn","gameModes.goalLines":" Objectif: {n} lignes","gameModes.timeLimit":" Temps: {time}","gameModes.gameOverYes":" Game Over","gameModes.gameOverNo":" Sans Game Over","gameModes.speedUp":" La vitesse augmente","gameModes.speedFixed":" Vitesse fixe","gameModes.startLevel":" Dbut: Niveau {n}","gameModes.relaxed":" Mode dtente","gameModes.yourRecords":"Vos records:","gameModes.bestScore":"Meilleur Score","gameModes.bestTime":"Meilleur Temps","gameModes.mostLines":"Plus de Lignes","gameModes.gamesPlayed":"{n} parties joues","gameModes.noRecords":" Pas encore de record","gameModes.play":" Jouer","tutorial.title":" Tutoriel","tutorial.subtitle":"Apprenez de zro  PRO","tutorial.close":" Retour","tutorial.overallProgress":"Progrs global","tutorial.fundamentals":"Fondamentaux","tutorial.fundamentalsDesc":"Les bases du Tetris","tutorial.intermediate":"Intermdiaire","tutorial.intermediateDesc":"T-spins et combos","tutorial.advanced":"Avanc","tutorial.advancedDesc":"Setups et stratgies","tutorial.pro":"Professionnel","tutorial.proDesc":"Techniques PRO","tutorial.noLessons":"Aucune leon dans ce module","tutorial.badgesEarned":"Badges obtenus","controls.hint":"  dplacer |  tourner |  soft | Espace = hard drop | C = rserve","controls.continue":" Continuer","controls.pause":" Pause","controls.touchFriendly":" Contrles tactiles","controls.useShadow":" Utilisez l'ombre pour planifier !","gamepad.connected":"{n} Manette Connecte","gamepad.connectedPlural":"{n} Manettes Connectes","gamepad.ready":"Prt  jouer !","gamepad.showControls":"Afficher contrles","gamepad.controlsTitle":" Contrles:","gamepad.move":"Dplacer","gamepad.accelerate":"Acclrer","gamepad.hardDrop":"Hard Drop","gamepad.rotateRight":"Tourner ","gamepad.rotateLeft":"Tourner ","gamepad.hold":"Rserve","gamepad.pause":"Pause","gamepad.analogNote":" Le stick gauche fonctionne aussi !","gamepad.triggerNote":" L2/R2 tournent aussi","gamepad.backNote":" Back/Select = Retour au menu","gamepad.controllerLabel":"Manette {n}:","gamepad.buttons":"{n} boutons","gamepad.axes":"{n} axes","gamepad.vibration":" Vibration","reward.lessonComplete":"Leon Termine !","reward.fish":"Poissons","reward.xp":"XP","reward.badge":"Badge","pwa.notAvailableTitle":"PWA non disponible","pwa.notAvailableText":"Cet appareil ne supporte pas l'installation PWA ou l'app est dj installe.","pwa.understood":" Compris","pwa.installTitle":"Installer Cat Tetris","pwa.installText":"Installez Cat Tetris sur votre cran d'accueil pour jouer hors-ligne ! Fonctionne comme une app native.","pwa.quickAccess":" Accs Rapide","pwa.quickAccessDesc":"Icne sur l'cran","pwa.offline":" Hors-ligne","pwa.offlineDesc":"Jouez sans internet","pwa.performance":" Performance","pwa.performanceDesc":"Chargement instantan","pwa.experience":" Exprience","pwa.experienceDesc":"Comme une app native","pwa.notNow":"Pas maintenant","pwa.install":" Installer","share.prompt":"Partagez votre score:","share.text":` Cat Tetris!
 {score} points
 Niveau {level}
 {lines} lignes

Pouvez-vous me battre ? `,"share.title":"Mon score Cat Tetris","share.share":" Partager","share.copied":" Copi !","share.copy":" Copier","share.twitter":" Twitter","share.whatsapp":" WhatsApp","share.close":"Fermer","statistics.title":" Statistiques","statistics.playTime":"Temps de Jeu:","statistics.piecesPlaced":"Pices Places:","statistics.linesCleared":"Lignes Effaces:","statistics.tSpins":"T-Spins:","statistics.backToBack":"Back-to-Back:","statistics.maxCombo":"Combo Max:","statistics.tetrisCount":"Tetris (4 lignes):","statistics.lps":"LPS (Lignes/sec):","error.title":" Oups ! Quelque chose a mal tourn","error.message":"Le jeu a rencontr un problme inattendu.","error.restart":" Redmarrer le Jeu ","error.details":"Dtails de l'erreur","common.close":"Fermer","common.back":" Retour","common.points":"points","common.level":"Niveau","common.lines":"lignes"},Ma={en:Gb,pt:Fb,es:Vb,ja:Bb,fr:Hb};function zb(){try{return localStorage.getItem(k0)||"en"}catch{return"en"}}function Ub({children:e}){const[t,n]=v.useState(zb),r=v.useCallback(i=>{n(i);try{localStorage.setItem(k0,i)}catch{}},[]),s=v.useCallback((i,o={})=>{let c=(Ma[t]||Ma.en)[i]??Ma.en[i]??i;return Object.entries(o).forEach(([u,h])=>{c=c.replace(new RegExp(`\\{${u}\\}`,"g"),h)}),c},[t]);return l.jsx(C0.Provider,{value:{language:t,setLanguage:r,t:s,languages:Bl},children:e})}function Me(){const e=v.useContext(C0);if(!e)throw new Error("useI18n must be used within I18nProvider");return e}const $b=({score:e,level:t,lines:n,combo:r})=>{const{t:s}=Me(),[i,o]=v.useState(0);return v.useEffect(()=>{o(Mh.getHighScore())},[]),v.useEffect(()=>{Mh.saveHighScore(e)&&o(e)},[e]),l.jsxs("div",{className:"bg-gray-900/50 p-2 rounded-xl border-2 border-white/20 shadow-2xl w-28",children:[l.jsx("h2",{className:"text-xs font-bold text-white mb-1 text-center",children:s("game.scoreTitle")}),l.jsxs("div",{className:"space-y-0.5 text-xs",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-white/70",children:s("game.points")}),l.jsx("span",{className:"text-yellow-400 font-bold",children:e.toLocaleString()})]}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-white/70",children:s("game.record")}),l.jsx("span",{className:"text-green-400 font-bold",children:i.toLocaleString()})]}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-white/70",children:s("game.levelLabel")}),l.jsx("span",{className:"text-blue-400 font-bold",children:t})]}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-white/70",children:s("game.linesLabel")}),l.jsx("span",{className:"text-purple-400 font-bold",children:n})]}),r>0&&l.jsxs("div",{className:"flex justify-between items-center bg-orange-500/20 px-1.5 py-0.5 rounded border border-orange-400/30 mt-0.5",children:[l.jsx("span",{className:"text-white/90",children:s("game.comboLabel")}),l.jsxs("span",{className:"text-orange-400 font-bold",children:[r,"x"]})]})]})]})},Xn=ae.memo($b),qb=({onMove:e,onRotate:t,onHardDrop:n,onPause:r,onHold:s,isPaused:i,gameOver:o,canHold:a})=>{const{t:c}=Me(),u=h=>{if(!o)switch(h){case"left":e("left");break;case"right":e("right");break;case"down":e("down");break;case"rotate":t();break;case"hardDrop":n();break;case"hold":s();break;case"pause":r();break}};return l.jsxs("div",{className:"flex flex-col items-center gap-1",children:[l.jsx("div",{className:"hidden lg:block",children:l.jsx("div",{className:"text-center text-white/50 text-[11px]",children:l.jsx("p",{children:c("controls.hint")})})}),l.jsxs("div",{className:"lg:hidden",children:[l.jsxs("div",{className:"grid grid-cols-3 gap-3 max-w-xs",children:[l.jsx("div",{}),l.jsx(M.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>u("rotate"),disabled:o,className:"bg-blue-500 text-white p-4 rounded-full shadow-lg hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed",children:""}),l.jsx("div",{}),l.jsx(M.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>u("left"),disabled:o,className:"bg-gray-600 text-white p-4 rounded-full shadow-lg hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:""}),l.jsx(M.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>u("down"),disabled:o,className:"bg-gray-600 text-white p-4 rounded-full shadow-lg hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:""}),l.jsx(M.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>u("right"),disabled:o,className:"bg-gray-600 text-white p-4 rounded-full shadow-lg hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:""}),l.jsx(M.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>u("hardDrop"),disabled:o,className:"bg-red-500 text-white p-4 rounded-full shadow-lg hover:bg-red-600 disabled:opacity-50 disabled:cursor-not-allowed",children:""}),l.jsx(M.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>u("hold"),disabled:o||!a,className:`p-4 rounded-full shadow-lg disabled:opacity-50 disabled:cursor-not-allowed ${a?"bg-green-500 text-white hover:bg-green-600":"bg-gray-500 text-white"}`,children:""})]}),l.jsx("div",{className:"mt-4 flex justify-center",children:l.jsx(M.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>u("pause"),disabled:o,className:"bg-yellow-500 text-white px-6 py-3 rounded-lg shadow-lg hover:bg-yellow-600 disabled:opacity-50 disabled:cursor-not-allowed",children:c(i?"controls.continue":"controls.pause")})}),l.jsxs("div",{className:"mt-4 text-center text-white/60 text-xs",children:[l.jsx("p",{children:c("controls.touchFriendly")}),l.jsx("p",{children:c("controls.useShadow")})]})]})]})};function Wb({scoreData:e,onClose:t}){const{t:n}=Me(),[r,s]=v.useState(!1),i=n("share.text",{score:e.score,level:e.level,lines:e.lines}),o=async()=>{try{await navigator.clipboard.writeText(i),s(!0),setTimeout(()=>s(!1),2e3)}catch{}},a=async()=>{if(navigator.share)try{await navigator.share({title:n("share.title"),text:i})}catch(h){h.name}},c=()=>{const h=`https://twitter.com/intent/tweet?text=${encodeURIComponent(i)}`;window.open(h,"_blank","width=600,height=400")},u=()=>{const h=`https://wa.me/?text=${encodeURIComponent(i)}`;window.open(h,"_blank")};return l.jsxs(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-black/40 rounded-lg p-4 mt-4",children:[l.jsx("div",{className:"text-white/80 text-sm mb-3 text-center",children:n("share.prompt")}),l.jsxs("div",{className:"flex flex-wrap gap-2 justify-center",children:[navigator.share&&l.jsx(M.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:a,className:"bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-lg font-bold flex items-center gap-2 transition-colors",children:n("share.share")}),l.jsx(M.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:o,className:`${r?"bg-green-600":"bg-gray-600 hover:bg-gray-500"} text-white px-4 py-2 rounded-lg font-bold flex items-center gap-2 transition-colors`,children:n(r?"share.copied":"share.copy")}),l.jsx(M.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:c,className:"bg-[#1DA1F2] hover:bg-[#1a8cd8] text-white px-4 py-2 rounded-lg font-bold flex items-center gap-2 transition-colors",children:n("share.twitter")}),l.jsx(M.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:u,className:"bg-[#25D366] hover:bg-[#20bd5a] text-white px-4 py-2 rounded-lg font-bold flex items-center gap-2 transition-colors",children:n("share.whatsapp")})]}),t&&l.jsx("div",{className:"text-center mt-3",children:l.jsx("button",{onClick:t,className:"text-white/60 hover:text-white text-sm transition-colors",children:n("share.close")})})]})}const cu="catTetris_gamepadConfig",LC={0:"A",1:"B",2:"X",3:"Y",4:"LB",5:"RB",6:"LT",7:"RT",8:"Back",9:"Start",10:"L3",11:"R3",12:"D-Pad ",13:"D-Pad ",14:"D-Pad ",15:"D-Pad "},Hl={menuConfirm:0,menuBack:1,menuAltConfirm:9,rotateCW:0,rotateCCW:1,hardDrop:12,hold:4,pause:9,backToMenu:8},_C={menuConfirm:"Confirmar (Menu)",menuBack:"Voltar (Menu)",menuAltConfirm:"Confirmar Alt (Menu)",rotateCW:"Rotao Horria",rotateCCW:"Rotao Anti-horria",hardDrop:"Hard Drop",hold:"Segurar Pea",pause:"Pausar",backToMenu:"Voltar ao Menu"},DC=["menuConfirm","menuBack","menuAltConfirm"],RC=["rotateCW","rotateCCW","hardDrop","hold","pause","backToMenu"];function zl(){try{const e=localStorage.getItem(cu);if(e){const t=JSON.parse(e);return{...Hl,...t}}}catch{}return{...Hl}}function IC(e){try{localStorage.setItem(cu,JSON.stringify(e))}catch{}}function OC(){try{localStorage.removeItem(cu)}catch{}return{...Hl}}function Be({itemCount:e=0,onConfirm:t,onBack:n,active:r=!0,vertical:s=!0,columns:i=1,wrap:o=!0,navMap:a=null}={}){const[c,u]=v.useState(0),h=v.useRef(0),d=v.useRef({}),m=v.useRef({}),g=250,x=400,b=v.useRef({}),k=.5;v.useEffect(()=>{h.current=c},[c]);const p=v.useRef(t),f=v.useRef(n),y=v.useRef(a);v.useEffect(()=>{p.current=t},[t]),v.useEffect(()=>{f.current=n},[n]),v.useEffect(()=>{y.current=a},[a]),v.useEffect(()=>{u(C=>C>=e?Math.max(0,e-1):C)},[e]),v.useEffect(()=>{var C,P,T;if(r){u(0);try{const j=navigator.getGamepads(),E=Array.from(j).find(L=>L&&L.connected);if(E){const L=zl();m.current={confirm:((C=E.buttons[L.menuConfirm])==null?void 0:C.pressed)||!1,back:((P=E.buttons[L.menuBack])==null?void 0:P.pressed)||!1,altConfirm:((T=E.buttons[L.menuAltConfirm])==null?void 0:T.pressed)||!1}}}catch{}}},[r]);const w=v.useCallback(C=>{if(!C||C.length<2)return null;const P=C[0],T=C[1];return Math.abs(P)<k&&Math.abs(T)<k?null:Math.abs(P)>Math.abs(T)?P>0?"right":"left":T>0?"down":"up"},[]),S=v.useCallback(()=>{var Z,J,he,We,oe,Ee,xe,pt,Dt,B;if(!r||e===0)return;const C=navigator.getGamepads(),P=Array.from(C).find(I=>I&&I.connected);if(!P)return;const T=Date.now(),j=w(P.axes),E=(I,te)=>{const W=`nav_${I}`,ee=b.current[W+"_pressed"]||!1,kt=b.current[W+"_start"]||0,Pt=d.current[W]||0;if(te&&!ee){b.current[W+"_pressed"]=!0,b.current[W+"_start"]=T,d.current[W]=T,L(I);return}if(te&&ee){T-kt>=x&&T-Pt>=g&&(d.current[W]=T,L(I));return}!te&&ee&&(b.current[W+"_pressed"]=!1)},L=I=>{u(te=>{let W=te;if(y.current){const ee=y.current[te];return ee&&ee[I]!==void 0?ee[I]:te}if(i===1)I==="up"||I==="left"?(W=te-1,W<0&&(W=o?e-1:0)):(I==="down"||I==="right")&&(W=te+1,W>=e&&(W=o?0:e-1));else{const ee=Math.floor(te/i),kt=te%i,Pt=Math.ceil(e/i);I==="up"?W=(ee-1<0?o?Pt-1:0:ee-1)*i+kt:I==="down"?W=(ee+1>=Pt?o?0:Pt-1:ee+1)*i+kt:I==="left"?(W=te-1,W<0&&(W=o?e-1:0)):I==="right"&&(W=te+1,W>=e&&(W=o?0:e-1)),W>=e&&(W=e-1)}return W});try{P.vibrationActuator&&P.vibrationActuator.playEffect("dual-rumble",{duration:30,strongMagnitude:.05,weakMagnitude:.03})}catch{}},A=((Z=P.buttons[12])==null?void 0:Z.pressed)||j==="up",N=((J=P.buttons[13])==null?void 0:J.pressed)||j==="down",_=((he=P.buttons[14])==null?void 0:he.pressed)||j==="left",se=((We=P.buttons[15])==null?void 0:We.pressed)||j==="right";s?(E("up",A),E("down",N),E("left",_),E("right",se)):(E("left",_),E("right",se));const O=zl(),Q=O.menuConfirm,R=O.menuBack,z=O.menuAltConfirm,F=(oe=P.buttons[Q])==null?void 0:oe.pressed,U=m.current.confirm;if(F&&!U){(Ee=p.current)==null||Ee.call(p,h.current);try{P.vibrationActuator&&P.vibrationActuator.playEffect("dual-rumble",{duration:50,strongMagnitude:.15,weakMagnitude:.1})}catch{}}const K=(xe=P.buttons[R])==null?void 0:xe.pressed,$=m.current.back;K&&!$&&((pt=f.current)==null||pt.call(f));let X=!1;if(z!==Q){X=(Dt=P.buttons[z])==null?void 0:Dt.pressed;const I=m.current.altConfirm;X&&!I&&((B=p.current)==null||B.call(p,h.current))}m.current={confirm:F,back:K,altConfirm:X}},[r,e,i,o,s,w]);return v.useEffect(()=>{if(!r)return;const C=setInterval(S,16);return()=>clearInterval(C)},[r,S]),{selectedIndex:c,setSelectedIndex:u}}const Kb=({score:e,onRestart:t,onBackToMenu:n})=>{const{t:r}=Me(),s=typeof e=="number"?e:e.points,i=typeof e=="object"?e.level:1,o=typeof e=="object"?e.lines:0,a=[t,n],c=v.useCallback(m=>{var g;(g=a[m])==null||g.call(a)},[t,n]),{selectedIndex:u}=Be({itemCount:2,onConfirm:c,active:!0,wrap:!0}),h=m=>m<1e3?r("gameOver.msgLow"):m<5e3?r("gameOver.msgMed"):m<1e4?r("gameOver.msgHigh"):r("gameOver.msgTop"),d=m=>m<1e3?"":m<5e3?"":m<1e4?"":"";return l.jsx(M.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",children:l.jsx(M.div,{initial:{scale:.8,y:20},animate:{scale:1,y:0},transition:{type:"spring",damping:15},className:"bg-gray-900/90 p-8 rounded-2xl border-2 border-white/20 shadow-2xl max-w-md w-full mx-4 max-h-[90vh] overflow-y-auto",children:l.jsxs("div",{className:"text-center",children:[l.jsx(M.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring"},className:"text-6xl mb-4",children:d(s)}),l.jsx(M.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"text-3xl font-cat font-bold text-white mb-2",children:r("gameOver.title")}),l.jsx(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-gradient-to-r from-yellow-400 to-orange-400 text-gray-900 font-bold text-xl p-3 rounded-lg mb-4",children:r("gameOver.points",{score:s.toLocaleString()})}),l.jsx(M.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"text-white/80 mb-6 text-lg",children:h(s)}),l.jsx(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.55},children:l.jsx(Wb,{scoreData:{score:s,level:i,lines:o}})}),l.jsxs(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"space-y-3 mt-4",children:[l.jsx(M.button,{onClick:m=>{m.stopPropagation(),t()},whileHover:{scale:1.05},whileTap:{scale:.95},className:`w-full bg-gradient-to-r from-green-500 to-emerald-600 text-white font-bold py-3 px-6 rounded-lg hover:from-green-400 hover:to-emerald-500 transition-all duration-300 shadow-lg ${u===0?"ring-2 ring-yellow-400 ring-offset-2 ring-offset-gray-900 scale-105":""}`,children:r("gameOver.playAgain")}),l.jsx(M.button,{onClick:m=>{m.stopPropagation(),n()},whileHover:{scale:1.05},whileTap:{scale:.95},className:`w-full bg-gradient-to-r from-blue-500 to-cyan-600 text-white font-bold py-3 px-6 rounded-lg hover:from-blue-400 hover:to-cyan-500 transition-all duration-300 shadow-lg ${u===1?"ring-2 ring-yellow-400 ring-offset-2 ring-offset-gray-900 scale-105":""}`,children:r("gameOver.backToMenu")})]}),l.jsxs(M.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},className:"mt-6 text-center text-white/60 text-sm",children:[l.jsx("p",{children:r("gameOver.tip1")}),l.jsx("p",{children:r("gameOver.tip2")})]})]})})})},Qb=({pieces:e})=>{const{t}=Me(),n=(r,s)=>{if(!r)return null;const i=Math.max(...r.shape.map(a=>a.length)),o=r.shape.length;return l.jsx("div",{className:"bg-gray-800/50 p-1.5 rounded-lg border border-white/20",children:l.jsx("div",{className:"flex justify-center",children:l.jsx("div",{className:"grid gap-1",style:{gridTemplateColumns:`repeat(${i}, 1fr)`,gridTemplateRows:`repeat(${o}, 1fr)`},children:r.shape.map((a,c)=>a.map((u,h)=>l.jsx("div",{className:`w-5 h-5 rounded-sm flex items-center justify-center ${u?"border border-white/40 shadow-sm":""}`,style:{backgroundColor:u?Mr(r.color):"transparent"},children:u&&u!==0?l.jsx("span",{className:"text-xs leading-none",children:r.emoji}):null},`${h}-${c}`)))})})},s)};return l.jsxs("div",{className:"bg-gray-900/50 p-2 rounded-xl border-2 border-white/20 shadow-2xl w-24",children:[l.jsxs("h2",{className:"text-xs font-bold text-white mb-1 text-center flex items-center justify-center gap-1",children:[l.jsx("span",{children:""}),l.jsx("span",{className:"hidden lg:inline",children:t("game.next")})]}),l.jsx("div",{className:"space-y-1.5",children:e.map((r,s)=>n(r,s))})]})},Jn=ae.memo(Qb),Xb=({heldPiece:e,canHold:t})=>{const{t:n}=Me(),r=()=>{if(!e)return l.jsx("div",{className:"bg-gray-800/50 p-2 lg:p-4 rounded-lg border-2 border-dashed border-white/20 flex items-center justify-center",children:l.jsx("span",{className:"text-white/40 text-xs lg:text-sm",children:n("game.heldEmpty")})});const s=Math.max(...e.shape.map(o=>o.length)),i=e.shape.length;return l.jsx("div",{className:"bg-gray-800/50 p-1.5 rounded-lg border border-white/20",children:l.jsx("div",{className:"flex justify-center",children:l.jsx("div",{className:"grid gap-1",style:{gridTemplateColumns:`repeat(${s}, 1fr)`,gridTemplateRows:`repeat(${i}, 1fr)`},children:e.shape.map((o,a)=>o.map((c,u)=>l.jsx("div",{className:`w-5 h-5 rounded-sm flex items-center justify-center ${c?"border border-white/40 shadow-sm":""}`,style:{backgroundColor:c?Mr(e.color):"transparent"},children:c&&c!==0?l.jsx("span",{className:"text-xs leading-none",children:e.emoji}):null},`${u}-${a}`)))})})})};return l.jsxs("div",{className:"bg-gray-900/50 p-2 rounded-xl border-2 border-white/20 shadow-2xl w-24",children:[l.jsxs("h2",{className:"text-xs font-bold text-white mb-1 text-center flex items-center justify-center gap-1",children:[l.jsx("span",{children:""}),l.jsx("span",{className:"hidden lg:inline",children:n("game.held")})]}),l.jsx("div",{children:r()})]})},Yn=ae.memo(Xb),Lh=500,La="cat_tetris_error_log";class Jb{constructor(){this.logs=this._loadLogs(),this.sessionId=`session_${Date.now()}_${Math.random().toString(36).substr(2,6)}`,this._gameStateProvider=null,this._setupGlobalHandlers()}_loadLogs(){try{const t=localStorage.getItem(La);return t?JSON.parse(t):[]}catch{return[]}}_saveLogs(){try{this.logs.length>Lh&&(this.logs=this.logs.slice(-Lh)),localStorage.setItem(La,JSON.stringify(this.logs))}catch{this.logs=this.logs.slice(-50);try{localStorage.setItem(La,JSON.stringify(this.logs))}catch{}}}_setupGlobalHandlers(){typeof window>"u"||(window.addEventListener("error",t=>{var n;this.logError("window","uncaughtError",t.message,{filename:t.filename,lineno:t.lineno,colno:t.colno,stack:(n=t.error)==null?void 0:n.stack})}),window.addEventListener("unhandledrejection",t=>{var n;this.logError("window","unhandledRejection",String(t.reason),{stack:(n=t.reason)==null?void 0:n.stack,type:typeof t.reason})}))}setGameStateProvider(t){this._gameStateProvider=t}_getGameStateSnapshot(){var t,n,r,s,i,o;if(!this._gameStateProvider)return null;try{const a=this._gameStateProvider();return a?{isPlaying:a.isPlaying,isPaused:a.isPaused,gameOver:a.gameOver,score:(t=a.score)==null?void 0:t.points,level:(n=a.score)==null?void 0:n.level,lines:(r=a.score)==null?void 0:r.lines,currentPiece:(s=a.currentPiece)==null?void 0:s.type,gameMode:((i=a.gameMode)==null?void 0:i.id)||((o=a.gameMode)==null?void 0:o.name)||null}:null}catch(a){return{snapshotError:a.message}}}logError(t,n,r,s=null){const i={id:`${Date.now()}_${Math.random().toString(36).substr(2,4)}`,timestamp:new Date().toISOString(),sessionId:this.sessionId,level:"error",source:t,action:n,message:r,details:s,gameState:this._getGameStateSnapshot()};return this.logs.push(i),this._saveLogs(),i}logWarn(t,n,r,s=null){const i={id:`${Date.now()}_${Math.random().toString(36).substr(2,4)}`,timestamp:new Date().toISOString(),sessionId:this.sessionId,level:"warn",source:t,action:n,message:r,details:s,gameState:this._getGameStateSnapshot()};return this.logs.push(i),this._saveLogs(),i}getErrors(){return this.logs.filter(t=>t.level==="error")}clearLogs(){this.logs=[],this._saveLogs()}}const Gt=new Jb;function Yb({error:e}){const{t}=Me();return l.jsx("div",{className:"min-h-screen cat-bg flex items-center justify-center p-4",children:l.jsxs("div",{className:"game-container rounded-2xl p-6 shadow-2xl text-center",children:[l.jsx("h1",{className:"text-3xl font-cat font-bold text-white mb-4",children:t("error.title")}),l.jsx("p",{className:"text-white/80 mb-4",children:t("error.message")}),l.jsx("button",{onClick:()=>window.location.reload(),className:"bg-gradient-to-r from-cat-green to-cat-blue text-white font-bold py-3 px-6 rounded-xl hover:from-cat-blue hover:to-cat-green transition-all duration-200 border-2 border-white/30",children:t("error.restart")}),!1]})})}class Zb extends ae.Component{constructor(t){super(t),this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,n){Gt.logError("ErrorBoundary","componentDidCatch",t.message,{stack:t.stack,componentStack:n==null?void 0:n.componentStack})}render(){return this.state.hasError?l.jsx(Yb,{error:this.state.error}):this.props.children}}let Ot=null,_h=!1;function eS(){Ot&&Ot.state==="suspended"&&Ot.resume().catch(()=>{})}function tS(){_h||(_h=!0,["click","touchstart","keydown"].forEach(e=>{document.addEventListener(e,eS,{once:!1,passive:!0})}))}function Br(){if(Ot)return Ot.state==="suspended"&&Ot.resume().catch(()=>{}),Ot;try{return Ot=new(window.AudioContext||window.webkitAudioContext),tS(),Ot}catch{return null}}function nS(){const e=v.useCallback((a,c,u="sine")=>{const h=Br();if(h)try{const d=h.createOscillator(),m=h.createGain();d.connect(m),m.connect(h.destination),d.frequency.setValueAtTime(a,h.currentTime),d.type=u,m.gain.setValueAtTime(.1,h.currentTime),m.gain.exponentialRampToValueAtTime(.001,h.currentTime+c),d.start(h.currentTime),d.stop(h.currentTime+c)}catch{}},[]),t=v.useCallback(()=>{e(523,.1)},[e]),n=v.useCallback(()=>{e(659,.2),setTimeout(()=>e(784,.15),50)},[e]),r=v.useCallback(()=>{e(440,.15),setTimeout(()=>e(330,.1),80)},[e]),s=v.useCallback(()=>{e(392,.1),setTimeout(()=>e(494,.1),100),setTimeout(()=>e(588,.15),200)},[e]),i=v.useCallback(()=>{const a=Br();if(a)try{((h,d,m=.3)=>{h.forEach(g=>{const x=a.createOscillator(),b=a.createGain();x.connect(b),b.connect(a.destination),x.frequency.setValueAtTime(g,a.currentTime),x.type="triangle",b.gain.setValueAtTime(.05,a.currentTime+d),b.gain.exponentialRampToValueAtTime(.001,a.currentTime+d+m),x.start(a.currentTime+d),x.stop(a.currentTime+d+m)})})([523,659,784,1047],0,.5)}catch{}},[]),o=v.useCallback(()=>{e(698,.15),setTimeout(()=>e(880,.15),100),setTimeout(()=>e(1047,.2),200)},[e]);return{playMenuHover:t,playMenuSelect:n,playMenuBack:r,playMenuOpen:s,playGameStart:i,playPWAInstall:o}}class rS{constructor(){this.services=new Map,this.singletons=new Map}register(t,n,r={}){this.services.set(t,{factory:n,singleton:r.singleton||!1,dependencies:r.dependencies||[]})}resolve(t){const n=this.services.get(t);if(!n)throw new Error(`Service '${t}' not found in container`);if(n.singleton&&this.singletons.has(t))return this.singletons.get(t);const r=n.dependencies.map(i=>this.resolve(i)),s=n.factory(...r);return n.singleton&&this.singletons.set(t,s),s}registerSingleton(t,n,r=[]){this.register(t,n,{singleton:!0,dependencies:r})}registerTransient(t,n,r=[]){this.register(t,n,{singleton:!1,dependencies:r})}has(t){return this.services.has(t)}clear(){this.services.clear(),this.singletons.clear()}}class sS{initializeGame(){throw new Error("Must be implemented")}movePiece(t){throw new Error("Must be implemented")}rotatePiece(){throw new Error("Must be implemented")}rotatePieceLeft(){throw new Error("Must be implemented")}placePiece(){throw new Error("Must be implemented")}holdPiece(){throw new Error("Must be implemented")}hardDrop(){throw new Error("Must be implemented")}updateGame(t){throw new Error("Must be implemented")}pause(){throw new Error("Must be implemented")}resume(){throw new Error("Must be implemented")}restart(){throw new Error("Must be implemented")}getDropPreview(){throw new Error("Must be implemented")}}class vo{constructor(t=10,n=20){this.width=t,this.height=n,this.bufferHeight=4,this.grid=this.createEmptyGrid(),this._buffer=this.createEmptyBuffer()}createEmptyGrid(){return Array(this.height).fill(null).map(()=>Array(this.width).fill(null))}createEmptyBuffer(){return Array(this.bufferHeight).fill(null).map(()=>Array(this.width).fill(null))}clone(){const t=new vo(this.width,this.height);return t.grid=this.grid.map(n=>[...n]),t._buffer=this._buffer.map(n=>[...n]),t}isWithinBounds(t,n){return t>=0&&t<this.width&&n>=-this.bufferHeight&&n<this.height}getCell(t,n){if(!(t<0||t>=this.width)&&!(n<-this.bufferHeight||n>=this.height))return n<0?this._buffer[this.bufferHeight+n][t]:this.grid[n][t]}setCell(t,n,r){return t<0||t>=this.width||n<-this.bufferHeight||n>=this.height?!1:n<0?(this._buffer[this.bufferHeight+n][t]=r,!0):(this.grid[n][t]=r,!0)}clearCell(t,n){return this.setCell(t,n,null)}placePiece(t){t.getCells().forEach(r=>{this.setCell(r.x,r.y,{type:r.type,color:r.color,emoji:r.emoji})})}canPlacePiece(t){return t.getCells().every(r=>r.x<0||r.x>=this.width||r.y>=this.height||r.y<-this.bufferHeight?!1:this.getCell(r.x,r.y)===null)}clearLines(){const t=[...this._buffer,...this.grid],n=[];let r=0;for(let s=t.length-1;s>=0;s--)t[s].every(o=>o!==null)?r++:n.unshift(t[s]);for(;n.length<t.length;)n.unshift(Array(this.width).fill(null));return this._buffer=n.slice(0,this.bufferHeight),this.grid=n.slice(this.bufferHeight),r}getFilledRows(){const t=[];for(let n=0;n<this.height;n++)this.grid[n].every(r=>r!==null)&&t.push(n);return t}isGameOver(){return this._buffer.some(t=>t.some(n=>n!==null))}getBoardState(){return this.grid.map(t=>[...t])}setBoardState(t){this.grid=t.map(n=>[...n]),this._buffer=this.createEmptyBuffer()}clear(){this.grid=this.createEmptyGrid(),this._buffer=this.createEmptyBuffer()}addGarbageLines(t,n=-1){if(t<=0)return!1;const r=n>=0?n:Math.floor(Math.random()*this.width),s=[];for(let h=0;h<t;h++){const d=Array(this.width).fill(null).map((m,g)=>g===r?null:{type:"garbage",color:"#808080",emoji:""});s.push(d)}const i=[...this._buffer,...this.grid,...s],o=this.bufferHeight+this.height,c=(i.length>o?i.slice(0,i.length-o):[]).some(h=>h.some(d=>d!==null)),u=i.slice(-o);return this._buffer=u.slice(0,this.bufferHeight),this.grid=u.slice(this.bufferHeight),c}}class yo{constructor(){this.points=0,this.level=1,this.lines=0,this.combo=0,this.tSpins=0,this.backToBack=0,this.tetrisCount=0,this._fixedLevel=null}addPoints(t){this.points+=t}addLines(t){this.lines+=t,this.updateLevel()}incrementCombo(){this.combo++}resetCombo(){this.combo=0}addTSpin(){this.tSpins++}addBackToBack(){this.backToBack++}addTetris(){this.tetrisCount++}updateLevel(){this._fixedLevel||(this.level=Math.min(15,Math.floor(this.lines/10)+1))}getLevel(){return this.level}getDropTime(){const t=this._fixedLevel||this.level;return[1e3,793,618,473,355,262,190,135,94,64,43,28,18,11,7][Math.min(t,15)-1]||7}reset(){this.points=0,this.level=1,this.lines=0,this.combo=0,this.tSpins=0,this.backToBack=0,this.tetrisCount=0,this._fixedLevel=null}clone(){const t=new yo;return t.points=this.points,t.level=this.level,t.lines=this.lines,t.combo=this.combo,t.tSpins=this.tSpins,t.backToBack=this.backToBack,t.tetrisCount=this.tetrisCount,t._fixedLevel=this._fixedLevel,t}toJSON(){return{points:this.points,level:this.level,lines:this.lines,combo:this.combo,tSpins:this.tSpins,backToBack:this.backToBack,tetrisCount:this.tetrisCount,_fixedLevel:this._fixedLevel}}}class At{constructor(t,n,r,s,i,o=!1,a=0){this.type=t,this.shape=n,this.color=r,this.emoji=s,this.position=i,this.isTSpin=o,this.rotationState=a}move(t,n){return new At(this.type,this.shape,this.color,this.emoji,{x:this.position.x+t,y:this.position.y+n},this.isTSpin,this.rotationState)}rotate(){const t=this.shape[0].map((n,r)=>this.shape.map(s=>s[r]).reverse());return new At(this.type,t,this.color,this.emoji,this.position,this.isTSpin,(this.rotationState+1)%4)}setTSpin(t){return new At(this.type,this.shape,this.color,this.emoji,this.position,t,this.rotationState)}clone(){return new At(this.type,this.shape.map(t=>[...t]),this.color,this.emoji,{...this.position},this.isTSpin,this.rotationState)}reset(t,n,r,s,i,o=!1){return this.type=t,this.shape=n,this.color=r,this.emoji=s,this.position=i,this.isTSpin=o,this.rotationState=0,this}getWidth(){var t;return((t=this.shape[0])==null?void 0:t.length)||0}getHeight(){return this.shape.length||0}getCells(){const t=[];return this.shape.forEach((n,r)=>{n.forEach((s,i)=>{s&&t.push({x:this.position.x+i,y:this.position.y+r,type:this.type,color:this.color,emoji:this.emoji})})}),t}}class iS{calculateScore(t,n,r,s,i){throw new Error("Must be implemented")}calculateSoftDropPoints(){throw new Error("Must be implemented")}calculateTSpinBonus(t){throw new Error("Must be implemented")}calculateBackToBackBonus(t){throw new Error("Must be implemented")}calculateComboBonus(t){throw new Error("Must be implemented")}}class Tn extends iS{calculateScore(t,n,r,s,i){let o=this.getBasePoints(t);return s&&(o=this.calculateTSpinBonus(t)),i&&(o=this.calculateBackToBackBonus(o)),o*=n,o+=this.calculateComboBonus(r),o}calculateSoftDropPoints(){return 1}calculateTSpinBonus(t){return[0,800,1200,1600,2e3][t]||0}calculateBackToBackBonus(t){return Math.floor(t*1.5)}calculateComboBonus(t){return t*50}getBasePoints(t){return[0,100,300,500,800][t]||0}}const Fe={BOARD_WIDTH:10,BOARD_HEIGHT:20,BUFFER_ROWS:4,INITIAL_DROP_TIME:1e3,LOCK_DELAY:500,SOFT_DROP_MULTIPLIER:20,NEXT_PIECES_COUNT:3,BAG_SIZE:7,KICK_OFFSETS:[{x:-1,y:0},{x:1,y:0},{x:0,y:-1},{x:-1,y:-1},{x:1,y:-1}],SRS_KICKS_CW:{"0>1":[{x:-1,y:0},{x:-1,y:-1},{x:0,y:2},{x:-1,y:2}],"1>2":[{x:1,y:0},{x:1,y:1},{x:0,y:-2},{x:1,y:-2}],"2>3":[{x:1,y:0},{x:1,y:-1},{x:0,y:2},{x:1,y:2}],"3>0":[{x:-1,y:0},{x:-1,y:1},{x:0,y:-2},{x:-1,y:-2}]},SRS_KICKS_CCW:{"1>0":[{x:1,y:0},{x:1,y:1},{x:0,y:-2},{x:1,y:-2}],"2>1":[{x:-1,y:0},{x:-1,y:-1},{x:0,y:2},{x:-1,y:2}],"3>2":[{x:-1,y:0},{x:-1,y:1},{x:0,y:-2},{x:-1,y:-2}],"0>3":[{x:1,y:0},{x:1,y:-1},{x:0,y:2},{x:1,y:2}]},DROP_TIMES:[1e3,850,700,600,500,400,350,300,250,200,150,100,80,60,50],LEVEL_LINES_REQUIREMENT:10,MAX_LEVEL:15};class Zn extends sS{constructor(t,n,r,s=new Tn){super(),this.pieceFactory=t,this.movementStrategyFactory=n,this.gameRepository=r,this.scoringService=s,this.board=new vo(Fe.BOARD_WIDTH,Fe.BOARD_HEIGHT),this.score=new yo,this.currentPiece=null,this.nextPieces=[],this.heldPiece=null,this.canHold=!0,this.isPlaying=!1,this.isPaused=!1,this.gameOver=!1,this.lastDropTime=0,this.backToBack=!1,this._lockDelayActive=!1,this._lockDelayElapsed=0,this._lockDelayResets=0,this._lockDelayMax=Fe.LOCK_DELAY,this._lockDelayMaxResets=15,this.gameMode=null,this.modeTimeElapsed=0,this.modeStartTime=0,this.pendingGarbage=0,this._lastAttack=0,this._dirty=!0,this._cachedState=null}_markDirty(){this._dirty=!0,this._cachedState=null}get isDirty(){return this._dirty}clearDirty(){this._dirty=!1}initializeGame(){this.pieceFactory.resetBag(),this.board=new vo(Fe.BOARD_WIDTH,Fe.BOARD_HEIGHT),this.score=new yo,this.currentPiece=this.pieceFactory.createRandomPiece(),this.nextPieces=this.pieceFactory.createNextPieces(Fe.NEXT_PIECES_COUNT),this.heldPiece=null,this.canHold=!0,this.isPlaying=!1,this.isPaused=!1,this.gameOver=!1,this.lastDropTime=0,this.backToBack=!1,this._lockDelayActive=!1,this._lockDelayElapsed=0,this._lockDelayResets=0,this.modeTimeElapsed=0,this.modeStartTime=Date.now(),this.pendingGarbage=0,this._lastAttack=0,this.applyGameMode(),G.emit(V.GAME_INITIALIZED),this._markDirty()}setGameMode(t){this.gameMode=t}applyGameMode(){if(!this.gameMode||!this.gameMode.rules)return;const t=this.gameMode.rules;t.startLevel&&(this.score.level=t.startLevel),t.fixedLevel?this.score._fixedLevel=t.fixedLevel:this.score._fixedLevel=null,this._modeRules=t}movePiece(t){var n,r;if(!(!this.currentPiece||this.gameOver||this.isPaused))try{const s=this.movementStrategyFactory.createStrategy(t),i=s.execute(this.currentPiece,this.board.grid);if(i!==this.currentPiece){if(this.currentPiece=i,this._markDirty(),t==="down"){if(this._lockDelayActive=!1,this._lockDelayElapsed=0,this.lastDropTime=0,s.getSoftDropPoints){const o=this.scoringService.calculateSoftDropPoints();this.score.addPoints(o)}}else(t==="left"||t==="right")&&(this._resetLockDelay(),this._checkUngrounded());G.emit(V.PIECE_MOVED,{direction:t,piece:i})}else t==="down"&&(this._markDirty(),this._lockDelayActive||(this._lockDelayActive=!0,this._lockDelayElapsed=0,this._lockDelayResets=0))}catch(s){Gt.logError("GameService","movePiece",s.message,{direction:t,pieceType:(n=this.currentPiece)==null?void 0:n.type,piecePos:(r=this.currentPiece)==null?void 0:r.position,stack:s.stack})}}rotatePiece(){var t,n;if(!(!this.currentPiece||this.gameOver||this.isPaused))try{const s=this.movementStrategyFactory.createStrategy("rotate").execute(this.currentPiece,this.board.grid);s!==this.currentPiece&&(this.currentPiece=s,this._markDirty(),this._resetLockDelay(),this._checkUngrounded(),G.emit(V.PIECE_ROTATED,{piece:s}))}catch(r){Gt.logError("GameService","rotatePiece",r.message,{pieceType:(t=this.currentPiece)==null?void 0:t.type,piecePos:(n=this.currentPiece)==null?void 0:n.position,stack:r.stack})}}rotatePieceLeft(){var t,n;if(!(!this.currentPiece||this.gameOver||this.isPaused))try{const s=this.movementStrategyFactory.createStrategy("rotateLeft").execute(this.currentPiece,this.board.grid);s!==this.currentPiece&&(this.currentPiece=s,this._markDirty(),this._resetLockDelay(),this._checkUngrounded(),G.emit(V.PIECE_ROTATED,{piece:s}))}catch(r){Gt.logError("GameService","rotatePieceLeft",r.message,{pieceType:(t=this.currentPiece)==null?void 0:t.type,piecePos:(n=this.currentPiece)==null?void 0:n.position,stack:r.stack})}}placePiece(){var n,r;if(!this.currentPiece)return;this._markDirty(),this._lockDelayActive=!1,this._lockDelayElapsed=0,this._lockDelayResets=0,this._lastAttack=0,this.board.placePiece(this.currentPiece);const t=this.board.clearLines();if(t>0){this.score.addLines(t),this.score.incrementCombo();const s=this.currentPiece.isTSpin,i=this.backToBack,o=this.scoringService.calculateScore(t,this.score.getLevel(),this.score.combo,s,this.backToBack);if(this.score.addPoints(o),s||t===4?(this.backToBack&&G.emit(V.BACK_TO_BACK),this.backToBack=!0,s&&(this.score.addTSpin(),G.emit(V.T_SPIN,{linesCleared:t}))):this.backToBack=!1,G.emit(V.LINE_CLEARED,{linesCleared:t}),G.emit(V.SCORE_UPDATED,{score:this.score.points,level:this.score.level,combo:this.score.combo,points:o,isTSpin:s}),this._lastAttack=this._calculateAttack(t,s,this.score.combo,i),this._lastAttack>0&&this.pendingGarbage>0){const a=Math.min(this._lastAttack,this.pendingGarbage);this._lastAttack-=a,this.pendingGarbage-=a}}else this.score.resetCombo();if(G.emit(V.PIECE_PLACED,{piece:this.currentPiece,linesCleared:t}),this.pendingGarbage>0){const s=this.board.addGarbageLines(this.pendingGarbage);if(this.pendingGarbage=0,s&&this.board.isGameOver()){this.gameOver=!0,G.emit(V.GAME_OVER);return}}if(this.getNextPiece(),this.canHold=!0,(n=this._modeRules)!=null&&n.lineGoal&&this.score.lines>=this._modeRules.lineGoal){this.gameOver=!0,G.emit(V.GAME_OVER);return}if(((r=this._modeRules)==null?void 0:r.gameOver)===!1){if(this.board.isGameOver()){this.board._buffer=this.board.createEmptyBuffer();for(let s=0;s<4;s++)for(let i=0;i<this.board.width;i++)this.board.clearCell(i,s)}}else this.board.isGameOver()&&(this.gameOver=!0,G.emit(V.GAME_OVER))}_calculateAttack(t,n,r,s){if(t===0)return 0;let i=0;if(n?i=[0,2,4,6][t]||0:i=[0,0,1,2,4][t]||0,s&&(n||t===4)&&(i+=1),r>=1){const a=[0,0,1,1,2,2,3,3,4,4];i+=a[Math.min(r,a.length-1)]||4}return this.board.grid.every(a=>a.every(c=>c===null))&&(i=10),i}receiveGarbage(t){t>0&&(this.pendingGarbage+=t,this._markDirty())}consumeAttack(){const t=this._lastAttack;return this._lastAttack=0,t}holdPiece(){var t,n;if(!(!this.canHold||!this.currentPiece)){this._lockDelayActive=!1,this._lockDelayElapsed=0,this._lockDelayResets=0;try{const r=this.heldPiece,s=this.currentPiece.type,i=Ht[s];if(this.heldPiece=new At(s,i.shape,i.color,i.emoji,{x:3,y:0},!1,0),r){const o=r.type==="I"?{x:3,y:-2}:{x:3,y:0},a=Ht[r.type];this.currentPiece=new At(r.type,a.shape,a.color,a.emoji,o,!1,0)}else this.getNextPiece();this.canHold=!1,this._markDirty(),G.emit(V.PIECE_HELD,{heldPiece:this.heldPiece})}catch(r){Gt.logError("GameService","holdPiece",r.message,{currentPieceType:(t=this.currentPiece)==null?void 0:t.type,heldPieceType:(n=this.heldPiece)==null?void 0:n.type,stack:r.stack})}}}hardDrop(){var t,n;if(!(!this.currentPiece||this.gameOver||this.isPaused))try{this._lockDelayActive=!1,this._lockDelayElapsed=0;const s=this.movementStrategyFactory.createStrategy("hardDrop").execute(this.currentPiece,this.board.grid);this.currentPiece=s.piece,this.score.addPoints(s.dropDistance),this._markDirty();const i=this.currentPiece;G.emit(V.HARD_DROP,{dropDistance:s.dropDistance}),G.emit(V.PIECE_MOVED,{direction:"hardDrop",piece:i}),this.placePiece()}catch(r){Gt.logError("GameService","hardDrop",r.message,{pieceType:(t=this.currentPiece)==null?void 0:t.type,piecePos:(n=this.currentPiece)==null?void 0:n.position,stack:r.stack})}}updateGame(t){var n;if(!(!this.isPlaying||this.gameOver||this.isPaused)){if((n=this._modeRules)!=null&&n.timeLimit&&(this.modeTimeElapsed=(Date.now()-this.modeStartTime)/1e3,this.modeTimeElapsed>=this._modeRules.timeLimit)){this.gameOver=!0,this._markDirty(),G.emit(V.GAME_OVER);return}if(this._lockDelayActive){if(this._lockDelayElapsed+=t,this._lockDelayElapsed>=this._lockDelayMax){this._lockDelayActive=!1,this._lockDelayElapsed=0,this.placePiece(),this.lastDropTime=0;return}return}this.lastDropTime+=t,this.lastDropTime>=this.score.getDropTime()&&(this.movePiece("down"),this.lastDropTime=0)}}_resetLockDelay(){this._lockDelayActive&&this._lockDelayResets<this._lockDelayMaxResets&&(this._lockDelayElapsed=0,this._lockDelayResets++)}_checkUngrounded(){if(!this._lockDelayActive||!this.currentPiece)return;this.board.canPlacePiece(this.currentPiece.move(0,1))&&(this._lockDelayActive=!1,this._lockDelayElapsed=0,this._lockDelayResets=0)}pause(){this.isPaused=!0,this._markDirty(),G.emit(V.GAME_PAUSED)}resume(){this.isPaused=!1,this.isPlaying=!0,this._markDirty(),G.emit(V.GAME_RESUMED)}restart(){this.initializeGame(),this.isPlaying=!0,this.isPaused=!1,this._markDirty()}getDropPreview(){if(!this.currentPiece)return null;let t=this.currentPiece,n=0;const r=20;for(;n<r&&this.board.canPlacePiece(t.move(0,1));)t=t.move(0,1),n++;return t}getNextPiece(){const t=this.nextPieces.shift();this.nextPieces.push(this.pieceFactory.createRandomPiece()),this.currentPiece=t,this.currentPiece&&!this.board.canPlacePiece(this.currentPiece)&&(this.gameOver=!0,this._markDirty(),G.emit(V.GAME_OVER))}getGameState(){var t;return this._cachedState&&!this._dirty?this._cachedState:(this._cachedState={board:this.board.grid.map(n=>[...n]),currentPiece:this.currentPiece,nextPieces:[...this.nextPieces],heldPiece:this.heldPiece,canHold:this.canHold,score:this.score.toJSON(),isPlaying:this.isPlaying,isPaused:this.isPaused,gameOver:this.gameOver,backToBack:this.backToBack,gameMode:this.gameMode,modeTimeElapsed:(t=this._modeRules)!=null&&t.timeLimit?Math.max(0,this._modeRules.timeLimit-(Date.now()-this.modeStartTime)/1e3):null},this._cachedState)}setGameState(t){this.board.setBoardState(t.board),this.currentPiece=t.currentPiece,this.nextPieces=t.nextPieces,this.heldPiece=t.heldPiece,this.canHold=t.canHold,this.isPlaying=t.isPlaying,this.isPaused=t.isPaused,this.gameOver=t.gameOver,this.backToBack=t.backToBack;const n=this.score._fixedLevel;Object.assign(this.score,t.score),n!=null&&t.score._fixedLevel==null&&(this.score._fixedLevel=n)}}class oS{saveHighScore(t){throw new Error("Must be implemented")}getHighScore(){throw new Error("Must be implemented")}saveSettings(t){throw new Error("Must be implemented")}getSettings(){throw new Error("Must be implemented")}saveGameState(t){throw new Error("Must be implemented")}getGameState(){throw new Error("Must be implemented")}clearGameState(){throw new Error("Must be implemented")}}class aS extends oS{constructor(){super(),this.highScoreKey="cat-tetris-high-score",this.settingsKey="cat-tetris-settings",this.gameStateKey="cat-tetris-game-state"}saveHighScore(t){localStorage.setItem(this.highScoreKey,t.toString())}getHighScore(){return parseInt(localStorage.getItem(this.highScoreKey)||"0")}saveSettings(t){localStorage.setItem(this.settingsKey,JSON.stringify(t))}getSettings(){const t=localStorage.getItem(this.settingsKey);return t?JSON.parse(t):{volume:80,gameSpeed:"normal",soundEnabled:!0,particlesEnabled:!0}}saveGameState(t){localStorage.setItem(this.gameStateKey,JSON.stringify(t))}getGameState(){const t=localStorage.getItem(this.gameStateKey);return t?JSON.parse(t):null}clearGameState(){localStorage.removeItem(this.gameStateKey)}load(t){const n=localStorage.getItem(`cat-tetris-${t}`);return n?JSON.parse(n):null}save(t,n){localStorage.setItem(`cat-tetris-${t}`,JSON.stringify(n))}remove(t){localStorage.removeItem(`cat-tetris-${t}`)}}class lS{createPiece(t,n){throw new Error("Must be implemented")}createRandomPiece(){throw new Error("Must be implemented")}createNextPieces(t){throw new Error("Must be implemented")}}class cS{execute(t,n){throw new Error("Must be implemented")}}class qr extends cS{execute(t,n){throw new Error("execute method must be implemented")}movePiece(t,n,r,s){if(!t||!n||!Array.isArray(n))return t;const i={x:t.position.x+r,y:t.position.y+s};return this.isValidMove(t,n,i)?t.move(r,s):t}isValidMove(t,n,r){return!t||!t.shape||!n||!Array.isArray(n)?!1:t.shape.every((s,i)=>Array.isArray(s)?s.every((o,a)=>{if(!o)return!0;const c=r.x+a,u=r.y+i;return c<0||c>=Fe.BOARD_WIDTH||u>=Fe.BOARD_HEIGHT?!1:u<0?!0:n[u]&&Array.isArray(n[u])&&!n[u][c]}):!0)}}class uS extends qr{execute(t,n){return this.movePiece(t,n,-1,0)}}class dS extends qr{execute(t,n){return this.movePiece(t,n,1,0)}}class hS extends qr{execute(t,n){if(!t||!n)return t;const r={x:t.position.x,y:t.position.y+1};return this.isValidMove(t,n,r)?t.move(0,1):t}getSoftDropPoints(){return 1}}class mS extends qr{execute(t,n){var u;if(!t||!t.shape||!n)return t;const r=this.rotatePiece(t);let s=!1;if(this.isValidMove(r,n,r.position))return s=this.detectTSpin(r,n),r.setTSpin(s);const i=t.rotationState??0,o=(i+1)%4,a=`${i}>${o}`,c=((u=Fe.SRS_KICKS_CW)==null?void 0:u[a])||Fe.KICK_OFFSETS;for(const h of c){const d={x:r.position.x+h.x,y:r.position.y+h.y};if(this.isValidMove(r,n,d)){const m=r.move(h.x,h.y);return s=this.detectTSpin(m,n),m.setTSpin(s)}}return t}detectTSpin(t,n){return t.type!=="T"?!1:this.getCornerPositions(t).filter(o=>o.x<0||o.x>=Fe.BOARD_WIDTH||o.y<0||o.y>=Fe.BOARD_HEIGHT||n[o.y]&&n[o.y][o.x]).length>=3}getCornerPositions(t){const n=[],r=t.position.x,s=t.position.y;return n.push({x:r,y:s}),n.push({x:r+2,y:s}),n.push({x:r,y:s+2}),n.push({x:r+2,y:s+2}),n}rotatePiece(t){return!t||!t.shape||!Array.isArray(t.shape)||t.shape.length===0?t:t.rotate()}}class fS extends qr{execute(t,n){var u;if(!t||!t.shape||!n)return t;const r=this.rotatePieceLeft(t);let s=!1;if(this.isValidMove(r,n,r.position))return s=this.detectTSpin(r,n),r.setTSpin(s);const i=t.rotationState??0,o=(i+3)%4,a=`${i}>${o}`,c=((u=Fe.SRS_KICKS_CCW)==null?void 0:u[a])||Fe.KICK_OFFSETS;for(const h of c){const d={x:r.position.x+h.x,y:r.position.y+h.y};if(this.isValidMove(r,n,d)){const m=r.move(h.x,h.y);return s=this.detectTSpin(m,n),m.setTSpin(s)}}return t}detectTSpin(t,n){return t.type!=="T"?!1:this.getCornerPositions(t).filter(o=>o.x<0||o.x>=Fe.BOARD_WIDTH||o.y<0||o.y>=Fe.BOARD_HEIGHT||n[o.y]&&n[o.y][o.x]).length>=3}getCornerPositions(t){const n=[],r=t.position.x,s=t.position.y;return n.push({x:r,y:s}),n.push({x:r+2,y:s}),n.push({x:r,y:s+2}),n.push({x:r+2,y:s+2}),n}rotatePieceLeft(t){if(!t||!t.shape||!Array.isArray(t.shape)||t.shape.length===0)return t;const n=t.shape[0].map((r,s)=>t.shape.map(i=>i[i.length-1-s]));return new At(t.type,n,t.color,t.emoji,t.position,t.isTSpin,(t.rotationState+3)%4)}}class pS extends qr{execute(t,n){if(!t||!n)return{piece:t,dropDistance:0};let r=t,s=0;for(;;){const i={x:r.position.x,y:r.position.y+1};if(this.isValidMove(r,n,i))r=r.move(0,1),s++;else break}return{piece:r,dropDistance:s}}}class Dh{constructor(){this.reset()}reset(){return this.piece={type:null,shape:[],color:"#000000",emoji:"",position:{x:3,y:0},isTSpin:!1},this}setType(t){return this.piece.type=t,this}setShape(t){return this.piece.shape=t,this}setColor(t){return this.piece.color=t,this}setEmoji(t){return this.piece.emoji=t,this}setPosition(t,n){return this.piece.position={x:t,y:n},this}setTSpin(t){return this.piece.isTSpin=t,this}build(){const t=new At(this.piece.type,this.piece.shape,this.piece.color,this.piece.emoji,this.piece.position,this.piece.isTSpin);return this.reset(),t}}class er extends lS{constructor(){super(),this.pieceConfigs=Ht,this._bag=[],this._bagIndex=0}_refillBag(){this._bag=Object.keys(this.pieceConfigs);for(let t=this._bag.length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1));[this._bag[t],this._bag[n]]=[this._bag[n],this._bag[t]]}this._bagIndex=0}resetBag(){this._bag=[],this._bagIndex=0}_getNextType(){return this._bagIndex>=this._bag.length&&this._refillBag(),this._bag[this._bagIndex++]}createPiece(t,n={x:3,y:0}){const r=this.pieceConfigs[t];if(!r)throw new Error(`Tipo de pea invlido: ${t}`);return new Dh().setType(t).setShape(r.shape).setColor(r.color).setEmoji(r.emoji).setPosition(n.x,n.y).build()}createRandomPiece(){const t=this._getNextType(),n=this.pieceConfigs[t];let r={x:3,y:0};return t==="I"&&(r={x:3,y:-2}),new Dh().setType(t).setShape(n.shape).setColor(n.color).setEmoji(n.emoji).setPosition(r.x,r.y).build()}createNextPieces(t=3){const n=[];for(let r=0;r<t;r++)n.push(this.createRandomPiece());return n}registerPieceType(t,n){this.pieceConfigs[t]=n}getPieceTypes(){return Object.keys(this.pieceConfigs)}}class tr{constructor(){this.strategies=new Map,this.registerDefaultStrategies()}registerDefaultStrategies(){this.strategies.set("left",()=>new uS),this.strategies.set("right",()=>new dS),this.strategies.set("down",()=>new hS),this.strategies.set("rotate",()=>new mS),this.strategies.set("rotateLeft",()=>new fS),this.strategies.set("hardDrop",()=>new pS)}createStrategy(t){const n=this.strategies.get(t);if(!n)throw new Error(`Strategy type '${t}' not found`);return n()}registerStrategy(t,n){if(typeof n!="function")throw new Error("Strategy factory must be a function");this.strategies.set(t,n)}unregisterStrategy(t){this.strategies.delete(t)}getAvailableStrategies(){return Array.from(this.strategies.keys())}hasStrategy(t){return this.strategies.has(t)}}class gS{getSettings(){throw new Error("Method getSettings must be implemented")}saveSettings(t){throw new Error("Method saveSettings must be implemented")}updateSetting(t,n){throw new Error("Method updateSetting must be implemented")}resetSettings(){throw new Error("Method resetSettings must be implemented")}}class vS extends gS{constructor(){super(),this.storageKey="cat-tetris-settings",this.defaultSettings={volume:80,gameSpeed:"normal",soundEnabled:!0,particlesEnabled:!0}}getSettings(){try{const t=localStorage.getItem(this.storageKey);return t?{...this.defaultSettings,...JSON.parse(t)}:this.defaultSettings}catch{return this.defaultSettings}}saveSettings(t){try{const n={...this.defaultSettings,...t};return localStorage.setItem(this.storageKey,JSON.stringify(n)),n}catch{throw new Error("Failed to save settings")}}resetSettings(){try{return localStorage.removeItem(this.storageKey),this.defaultSettings}catch{throw new Error("Failed to reset settings")}}updateSetting(t,n){const s={...this.getSettings(),[t]:n};return this.saveSettings(s)}}class yS{getStats(){throw new Error("Method getStats must be implemented")}incrementPlayTime(){throw new Error("Method incrementPlayTime must be implemented")}incrementPiecesPlaced(){throw new Error("Method incrementPiecesPlaced must be implemented")}addLinesCleared(t){throw new Error("Method addLinesCleared must be implemented")}incrementTSpins(){throw new Error("Method incrementTSpins must be implemented")}updateMaxCombo(t){throw new Error("Method updateMaxCombo must be implemented")}reset(){throw new Error("Method reset must be implemented")}}class xS extends yS{constructor(){super(),this.stats={playTime:0,piecesPlaced:0,linesCleared:0,tSpins:0,backToBack:0,maxCombo:0,tetrisCount:0,linesPerSecond:0},this.sessionStartTime=Date.now()}getStats(){return{...this.stats}}incrementPlayTime(){this.stats.playTime+=1,this.calculateLinesPerSecond()}incrementPiecesPlaced(){this.stats.piecesPlaced+=1}addLinesCleared(t){this.stats.linesCleared+=t,t===4&&(this.stats.tetrisCount+=1),this.calculateLinesPerSecond()}incrementTSpins(){this.stats.tSpins+=1}incrementBackToBack(){this.stats.backToBack+=1}updateMaxCombo(t){t>this.stats.maxCombo&&(this.stats.maxCombo=t)}calculateLinesPerSecond(){this.stats.playTime>0?this.stats.linesPerSecond=this.stats.linesCleared/this.stats.playTime:this.stats.linesPerSecond=0}reset(){this.stats={playTime:0,piecesPlaced:0,linesCleared:0,tSpins:0,backToBack:0,maxCombo:0,tetrisCount:0,linesPerSecond:0},this.sessionStartTime=Date.now()}getSessionDuration(){return Date.now()-this.sessionStartTime}}class wS{registerHandler(t,n){throw new Error("Method registerHandler must be implemented")}unregisterHandler(t,n){throw new Error("Method unregisterHandler must be implemented")}startListening(){throw new Error("Method startListening must be implemented")}stopListening(){throw new Error("Method stopListening must be implemented")}setKeyMapping(t,n){throw new Error("Method setKeyMapping must be implemented")}getKeyMappings(){throw new Error("Method getKeyMappings must be implemented")}}class bS extends wS{constructor(){super();Zs(this,"_handleKeyDown",n=>{if(this.preventDefaultKeys.includes(n.key)&&n.preventDefault(),n.repeat)return;const r=this.keyMappings[n.key];r&&(this._fireAction(r),this._dasActions.has(r)&&this._pressedKeys.set(n.key,{action:r,dasTimer:0,arrTimer:0,dasTriggered:!1}))});Zs(this,"_handleKeyUp",n=>{this._pressedKeys.delete(n.key)});Zs(this,"_handleBlur",()=>{this._pressedKeys.clear()});this.keyMappings={ArrowLeft:"moveLeft",ArrowRight:"moveRight",ArrowDown:"moveDown",ArrowUp:"rotate",x:"rotate",X:"rotate",z:"rotateLeft",Z:"rotateLeft"," ":"hardDrop",c:"hold",C:"hold",Shift:"hold",p:"pause",P:"pause",Escape:"pause"},this.preventDefaultKeys=["ArrowLeft","ArrowRight","ArrowDown","ArrowUp"," "],this.handlers=new Map,this.isListening=!1,this.das=167,this.arr=33,this.sdf=5,this._dasActions=new Set(["moveLeft","moveRight","moveDown"]),this._pressedKeys=new Map,this._rafId=null,this._lastTime=0}setDAS(n){this.das=Math.max(0,n)}setARR(n){this.arr=Math.max(0,n)}getDAS(){return this.das}getARR(){return this.arr}registerHandler(n,r){this.handlers.has(n)||this.handlers.set(n,[]),this.handlers.get(n).push(r)}unregisterHandler(n,r){if(this.handlers.has(n)){const s=this.handlers.get(n),i=s.indexOf(r);i>-1&&s.splice(i,1)}}_fireAction(n){this.handlers.has(n)&&this.handlers.get(n).forEach(r=>{try{r()}catch{}})}startListening(){this.isListening||(window.addEventListener("keydown",this._handleKeyDown),window.addEventListener("keyup",this._handleKeyUp),window.addEventListener("blur",this._handleBlur),this.isListening=!0,this._startLoop())}stopListening(){this.isListening&&(window.removeEventListener("keydown",this._handleKeyDown),window.removeEventListener("keyup",this._handleKeyUp),window.removeEventListener("blur",this._handleBlur),this.isListening=!1,this._stopLoop(),this._pressedKeys.clear())}_startLoop(){this._lastTime=performance.now();const n=r=>{const s=r-this._lastTime;this._lastTime=r,this._updateDAS(s),this._rafId=requestAnimationFrame(n)};this._rafId=requestAnimationFrame(n)}_stopLoop(){this._rafId&&(cancelAnimationFrame(this._rafId),this._rafId=null)}_updateDAS(n){for(const[r,s]of this._pressedKeys)if(s.dasTriggered)if(s.arrTimer+=n,this.arr===0){for(let i=0;i<20;i++)this._fireAction(s.action);s.arrTimer=0}else for(;s.arrTimer>=this.arr;)s.arrTimer-=this.arr,this._fireAction(s.action);else if(s.dasTimer+=n,s.dasTimer>=this.das)if(s.dasTriggered=!0,s.arrTimer=0,this.arr===0)for(let i=0;i<20;i++)this._fireAction(s.action);else this._fireAction(s.action)}setKeyMapping(n,r){this.keyMappings[n]=r}removeKeyMapping(n){delete this.keyMappings[n]}getKeyMappings(){return{...this.keyMappings}}clear(){this.handlers.clear(),this.stopListening()}}class SS{constructor(t){this.gameRepository=t,this.currency=this.loadCurrency()}loadCurrency(){return this.gameRepository.load("playerCurrency")||{fish:0,totalEarned:0,totalSpent:0}}save(){this.gameRepository.save("playerCurrency",this.currency)}getFish(){return this.currency.fish}getCurrency(){return{...this.currency}}addFish(t,n="unknown"){return t<=0?!1:(this.currency.fish+=t,this.currency.totalEarned+=t,this.save(),!0)}spendFish(t,n="unknown"){return t<=0||this.currency.fish<t?!1:(this.currency.fish-=t,this.currency.totalSpent+=t,this.save(),!0)}canAfford(t){return this.currency.fish>=t}reset(){this.currency={fish:0,totalEarned:0,totalSpent:0},this.save()}getStats(){return{currentFish:this.currency.fish,totalEarned:this.currency.totalEarned,totalSpent:this.currency.totalSpent,netWorth:this.currency.totalEarned-this.currency.totalSpent}}}const me={CLEAR_LINES:"clear_lines",T_SPINS:"t_spins",COMBOS:"combos",SURVIVE_TIME:"survive_time",REACH_LEVEL:"reach_level",SCORE_POINTS:"score_points",PLACE_PIECES:"place_pieces",BACK_TO_BACK:"back_to_back",TETRIS_CLEAR:"tetris_clear"},_a=[{type:me.CLEAR_LINES,target:20,reward:100,difficulty:"easy",title:"Limpeza Bsica",description:"Limpe 20 linhas"},{type:me.PLACE_PIECES,target:30,reward:100,difficulty:"easy",title:"Gato Trabalhador",description:"Coloque 30 peas"},{type:me.SURVIVE_TIME,target:180,reward:120,difficulty:"easy",title:"Sobrevivente",description:"Sobreviva por 3 minutos"},{type:me.SCORE_POINTS,target:5e3,reward:150,difficulty:"easy",title:"Fazendo Pontos",description:"Alcance 5.000 pontos"},{type:me.CLEAR_LINES,target:40,reward:200,difficulty:"medium",title:"Limpeza Profunda",description:"Limpe 40 linhas em uma partida"},{type:me.T_SPINS,target:3,reward:250,difficulty:"medium",title:"Mestre do T-Spin",description:"Faa 3 T-Spins"},{type:me.COMBOS,target:7,reward:200,difficulty:"medium",title:"Combo Felino",description:"Alcance um combo de 7x"},{type:me.REACH_LEVEL,target:8,reward:180,difficulty:"medium",title:"Subindo de Nvel",description:"Alcance o nvel 8"},{type:me.TETRIS_CLEAR,target:2,reward:220,difficulty:"medium",title:"Tetris Duplo",description:"Faa 2 Tetris (4 linhas)"},{type:me.T_SPINS,target:5,reward:350,difficulty:"hard",title:"Ninja T-Spin",description:"Faa 5 T-Spins em uma partida"},{type:me.COMBOS,target:10,reward:300,difficulty:"hard",title:"Combo Insano",description:"Alcance um combo de 10x"},{type:me.SURVIVE_TIME,target:600,reward:400,difficulty:"hard",title:"Resistncia Felina",description:"Sobreviva por 10 minutos"},{type:me.REACH_LEVEL,target:12,reward:350,difficulty:"hard",title:"Mestre dos Gatos",description:"Alcance o nvel 12"},{type:me.SCORE_POINTS,target:5e4,reward:400,difficulty:"hard",title:"Pontuao Lendria",description:"Alcance 50.000 pontos"},{type:me.BACK_TO_BACK,target:3,reward:380,difficulty:"hard",title:"Back-to-Back Master",description:"Faa 3 back-to-backs"}];class CS{constructor(t,n){this.gameRepository=t,this.currencyService=n,this.missions=this.loadMissions(),this.checkAndResetDaily()}loadMissions(){return this.gameRepository.load("dailyMissions")||this.generateNewMissions()}save(){this.gameRepository.save("dailyMissions",this.missions)}checkAndResetDaily(){const n=new Date().toDateString();this.missions.lastResetDate!==n&&(this.missions=this.generateNewMissions(),this.save())}generateNewMissions(){const t=_a.filter(o=>o.difficulty==="easy"),n=_a.filter(o=>o.difficulty==="medium"),r=_a.filter(o=>o.difficulty==="hard"),s=[this.selectRandomMission(t),this.selectRandomMission(n),this.selectRandomMission(r)],i=new Date;return{lastResetDate:i.toDateString(),missions:s.map((o,a)=>({id:`mission_${i.getTime()}_${a}`,...o,progress:0,completed:!1,claimed:!1}))}}selectRandomMission(t){return t[Math.floor(Math.random()*t.length)]}getMissions(){return this.checkAndResetDaily(),this.missions.missions}updateProgress(t,n){let r=!1;return this.missions.missions.forEach(s=>{s.type===t&&!s.completed&&(s.progress=Math.max(s.progress,n),s.progress>=s.target&&(s.completed=!0,r=!0))}),r&&this.save(),r}incrementProgress(t,n=1){let r=!1;return this.missions.missions.forEach(s=>{s.type===t&&!s.completed&&(s.progress+=n,s.progress>=s.target&&(s.completed=!0,r=!0))}),r&&this.save(),r}claimReward(t){const n=this.missions.missions.find(r=>r.id===t);return n?n.completed?n.claimed?{success:!1,error:"Already claimed"}:(n.claimed=!0,this.currencyService.addFish(n.reward,`Mission: ${n.title}`),this.save(),{success:!0,reward:n.reward,title:n.title}):{success:!1,error:"Mission not completed"}:{success:!1,error:"Mission not found"}}getStats(){const t=this.missions.missions.length,n=this.missions.missions.filter(o=>o.completed).length,r=this.missions.missions.filter(o=>o.claimed).length,s=this.missions.missions.reduce((o,a)=>o+a.reward,0),i=this.missions.missions.filter(o=>o.claimed).reduce((o,a)=>o+a.reward,0);return{total:t,completed:n,claimed:r,totalRewards:s,claimedRewards:i,allCompleted:n===t,allClaimed:r===t}}reset(){this.missions=this.generateNewMissions(),this.save()}}const Da=[{id:"first_line",title:" Primeira Linha",description:"Limpe sua primeira linha",requirement:{type:"lines_total",value:1},reward:50,tier:"bronze"},{id:"first_game",title:" Primeira Partida",description:"Complete sua primeira partida",requirement:{type:"games_played",value:1},reward:50,tier:"bronze"},{id:"scorer",title:" Pontuador",description:"Alcance 10.000 pontos em uma partida",requirement:{type:"score_single",value:1e4},reward:100,tier:"bronze"},{id:"combo_starter",title:" Combo Starter",description:"Alcance um combo de 5x",requirement:{type:"max_combo",value:5},reward:150,tier:"silver"},{id:"tspin_novice",title:" Aprendiz T-Spin",description:"Faa seu primeiro T-Spin",requirement:{type:"tspins_total",value:1},reward:150,tier:"silver"},{id:"survivor",title:" Sobrevivente",description:"Sobreviva por 5 minutos",requirement:{type:"survive_time",value:300},reward:150,tier:"silver"},{id:"level_5",title:" Nvel 5",description:"Alcance o nvel 5",requirement:{type:"max_level",value:5},reward:100,tier:"silver"},{id:"line_clearer",title:" Limpador",description:"Limpe 100 linhas no total",requirement:{type:"lines_total",value:100},reward:200,tier:"silver"},{id:"combo_master",title:" Combo Master",description:"Alcance um combo de 10x",requirement:{type:"max_combo",value:10},reward:300,tier:"gold"},{id:"tspin_master",title:" Mestre T-Spin",description:"Faa 50 T-Spins no total",requirement:{type:"tspins_total",value:50},reward:400,tier:"gold"},{id:"speed_demon",title:" Speed Demon",description:"Alcance o nvel 15",requirement:{type:"max_level",value:15},reward:350,tier:"gold"},{id:"high_scorer",title:" Alto Pontuador",description:"Alcance 100.000 pontos em uma partida",requirement:{type:"score_single",value:1e5},reward:400,tier:"gold"},{id:"dedicated",title:" Dedicado",description:"Jogue 50 partidas",requirement:{type:"games_played",value:50},reward:300,tier:"gold"},{id:"marathon",title:" Maratonista",description:"Limpe 500 linhas no total",requirement:{type:"lines_total",value:500},reward:350,tier:"gold"},{id:"cat_king",title:" Rei dos Gatos",description:"Alcance 1.000.000 de pontos em uma partida",requirement:{type:"score_single",value:1e6},reward:1e3,tier:"platinum"},{id:"immortal",title:" Imortal",description:"Alcance o nvel 20",requirement:{type:"max_level",value:20},reward:800,tier:"platinum"},{id:"combo_legend",title:" Lenda do Combo",description:"Alcance um combo de 15x",requirement:{type:"max_combo",value:15},reward:700,tier:"platinum"},{id:"tspin_legend",title:" Lenda T-Spin",description:"Faa 200 T-Spins no total",requirement:{type:"tspins_total",value:200},reward:800,tier:"platinum"},{id:"veteran",title:" Veterano",description:"Jogue 200 partidas",requirement:{type:"games_played",value:200},reward:600,tier:"platinum"},{id:"ultimate_cleaner",title:" Limpador Supremo",description:"Limpe 2.000 linhas no total",requirement:{type:"lines_total",value:2e3},reward:700,tier:"platinum"}];class kS{constructor(t,n,r){this.gameRepository=t,this.currencyService=n,this.statisticsService=r,this.achievements=this.loadAchievements()}loadAchievements(){const t=this.gameRepository.load("achievements");if(!t)return Da.map(r=>({...r,unlocked:!1,unlockedAt:null,progress:0}));const n=new Map(t.map(r=>[r.id,r]));return Da.map(r=>{const s=n.get(r.id);return s?{...r,unlocked:s.unlocked||!1,unlockedAt:s.unlockedAt||null,progress:s.progress||0}:{...r,unlocked:!1,unlockedAt:null,progress:0}})}save(){this.gameRepository.save("achievements",this.achievements)}getAchievements(){return[...this.achievements]}getUnlocked(){return this.achievements.filter(t=>t.unlocked)}getLocked(){return this.achievements.filter(t=>!t.unlocked)}getByTier(t){return this.achievements.filter(n=>n.tier===t)}checkAchievements(t){const n=[];return this.achievements.forEach(r=>{if(r.unlocked)return;const{type:s,value:i}=r.requirement;let o=0;switch(s){case"lines_total":o=t.linesCleared||0;break;case"games_played":o=t.gamesPlayed||0;break;case"score_single":o=t.highScore||0;break;case"max_combo":o=t.maxCombo||0;break;case"tspins_total":o=t.tSpins||0;break;case"survive_time":o=t.longestGame||0;break;case"max_level":o=t.maxLevel||0;break}r.progress=Math.min(o,i),o>=i&&(r.unlocked=!0,r.unlockedAt=new Date().toISOString(),this.currencyService.addFish(r.reward,`Achievement: ${r.title}`),n.push(r))}),n.length>0&&this.save(),n}getStats(){const t=this.achievements.length,n=this.achievements.filter(o=>o.unlocked).length,r=this.achievements.reduce((o,a)=>o+a.reward,0),s=this.achievements.filter(o=>o.unlocked).reduce((o,a)=>o+a.reward,0),i={bronze:this.getByTier("bronze").filter(o=>o.unlocked).length,silver:this.getByTier("silver").filter(o=>o.unlocked).length,gold:this.getByTier("gold").filter(o=>o.unlocked).length,platinum:this.getByTier("platinum").filter(o=>o.unlocked).length};return{total:t,unlocked:n,percentage:Math.floor(n/t*100),totalRewards:r,earnedRewards:s,byTier:i}}reset(){this.achievements=Da.map(t=>({...t,unlocked:!1,unlockedAt:null,progress:0})),this.save()}}class PS{constructor(t){this.gameRepository=t,this.stats=this.loadStats()}loadStats(){return this.gameRepository.load("playerStats")||{gamesPlayed:0,linesCleared:0,piecesPlaced:0,tSpins:0,backToBack:0,totalPlayTime:0,highScore:0,maxLevel:0,maxCombo:0,longestGame:0,mostLinesInGame:0,lastUpdated:new Date().toISOString(),lastPlayedDate:null,currentStreak:0,longestStreak:0}}save(){this.stats.lastUpdated=new Date().toISOString(),this.gameRepository.save("playerStats",this.stats)}getStats(){return{...this.stats}}updateAfterGame(t){this.stats.gamesPlayed+=1,this.stats.linesCleared+=t.linesCleared||0,this.stats.piecesPlaced+=t.piecesPlaced||0,this.stats.tSpins+=t.tSpins||0,this.stats.backToBack+=t.backToBack||0,this.stats.totalPlayTime+=t.playTime||0,t.score>this.stats.highScore&&(this.stats.highScore=t.score),t.level>this.stats.maxLevel&&(this.stats.maxLevel=t.level),t.maxCombo>this.stats.maxCombo&&(this.stats.maxCombo=t.maxCombo),t.playTime>this.stats.longestGame&&(this.stats.longestGame=t.playTime),t.linesCleared>this.stats.mostLinesInGame&&(this.stats.mostLinesInGame=t.linesCleared),this.updateStreak(),this.save()}updateStreak(){const t=new Date().toDateString(),n=this.stats.lastPlayedDate;if(n!==t){if(!n)this.stats.currentStreak=1,this.stats.longestStreak=1;else{const r=new Date(n),s=new Date(t);Math.floor((s-r)/(1e3*60*60*24))===1?(this.stats.currentStreak+=1,this.stats.currentStreak>this.stats.longestStreak&&(this.stats.longestStreak=this.stats.currentStreak)):this.stats.currentStreak=1}this.stats.lastPlayedDate=t}}incrementStat(t,n=1){this.stats.hasOwnProperty(t)&&(this.stats[t]+=n,this.save())}updateRecord(t,n){return this.stats.hasOwnProperty(t)&&n>this.stats[t]?(this.stats[t]=n,this.save(),!0):!1}reset(){this.stats={gamesPlayed:0,linesCleared:0,piecesPlaced:0,tSpins:0,backToBack:0,totalPlayTime:0,highScore:0,maxLevel:0,maxCombo:0,longestGame:0,mostLinesInGame:0,lastUpdated:new Date().toISOString(),lastPlayedDate:null,currentStreak:0,longestStreak:0},this.save()}}const tn={classic:{id:"classic",name:" Tetris Clssico",description:"Cores oficiais do Tetris",price:0,default:!0,pieces:{I:{emoji:"",color:"#00F0F0"},O:{emoji:"",color:"#F0F000"},T:{emoji:"",color:"#A000F0"},S:{emoji:"",color:"#00F000"},Z:{emoji:"",color:"#F00000"},J:{emoji:"",color:"#0000F0"},L:{emoji:"",color:"#F0A000"}}},cats:{id:"cats",name:" Gatos Clssicos",description:"Os gatinhos originais do Cat Tetris",price:0,default:!0,pieces:{I:{emoji:"",color:"#00f0f0"},O:{emoji:"",color:"#f0f000"},T:{emoji:"",color:"#a000f0"},S:{emoji:"",color:"#00f000"},Z:{emoji:"",color:"#f00000"},J:{emoji:"",color:"#f0a000"},L:{emoji:"",color:"#ffc0cb"}}},dogs:{id:"dogs",name:" Cachorros Felizes",description:"Amigos caninos adorveis",price:500,pieces:{I:{emoji:"",color:"#8B4513"},O:{emoji:"",color:"#D2691E"},T:{emoji:"",color:"#CD853F"},S:{emoji:"",color:"#DEB887"},Z:{emoji:"",color:"#F4A460"},J:{emoji:"",color:"#FFDEAD"},L:{emoji:"",color:"#FFE4B5"}}},pandas:{id:"pandas",name:" Pandas Fofos",description:"Ursinhos preto e branco",price:600,pieces:{I:{emoji:"",color:"#000000"},O:{emoji:"",color:"#808080"},T:{emoji:"",color:"#A0A0A0"},S:{emoji:"",color:"#FFFFFF"},Z:{emoji:"",color:"#D3D3D3"},J:{emoji:"",color:"#90EE90"},L:{emoji:"",color:"#98FB98"}}},foxes:{id:"foxes",name:" Raposas Astutas",description:"Raposinhas espertas e geis",price:700,pieces:{I:{emoji:"",color:"#FF4500"},O:{emoji:"",color:"#FF6347"},T:{emoji:"",color:"#FF7F50"},S:{emoji:"",color:"#CD5C5C"},Z:{emoji:"",color:"#D2691E"},J:{emoji:"",color:"#8B4513"},L:{emoji:"",color:"#DAA520"}}},unicorns:{id:"unicorns",name:" Unicrnios Mgicos",description:"Criaturas msticas e coloridas",price:900,pieces:{I:{emoji:"",color:"#FF00FF"},O:{emoji:"",color:"#FFD700"},T:{emoji:"",color:"#87CEEB"},S:{emoji:"",color:"#FF69B4"},Z:{emoji:"",color:"#9370DB"},J:{emoji:"",color:"#DA70D6"},L:{emoji:"",color:"#FFC0CB"}}},robots:{id:"robots",name:" Robs Futuristas",description:"Tecnologia do futuro",price:800,pieces:{I:{emoji:"",color:"#708090"},O:{emoji:"",color:"#778899"},T:{emoji:"",color:"#4682B4"},S:{emoji:"",color:"#5F9EA0"},Z:{emoji:"",color:"#00CED1"},J:{emoji:"",color:"#1E90FF"},L:{emoji:"",color:"#4169E1"}}},foods:{id:"foods",name:" Comidas Deliciosas",description:"Para quem joga com fome",price:750,pieces:{I:{emoji:"",color:"#FF6347"},O:{emoji:"",color:"#FFD700"},T:{emoji:"",color:"#FFA500"},S:{emoji:"",color:"#FF4500"},Z:{emoji:"",color:"#FFB6C1"},J:{emoji:"",color:"#DDA0DD"},L:{emoji:"",color:"#D2691E"}}},crystals:{id:"crystals",name:" Cristais Brilhantes",description:"Gemas preciosas reluzentes",price:1e3,premium:!0,pieces:{I:{emoji:"",color:"#00FFFF"},O:{emoji:"",color:"#FFD700"},T:{emoji:"",color:"#9370DB"},S:{emoji:"",color:"#00FF00"},Z:{emoji:"",color:"#FF0000"},J:{emoji:"",color:"#FFA500"},L:{emoji:"",color:"#FF1493"}}},ocean:{id:"ocean",name:" Mundo Marinho",description:"Criaturas do oceano",price:850,pieces:{I:{emoji:"",color:"#1E90FF"},O:{emoji:"",color:"#00CED1"},T:{emoji:"",color:"#4682B4"},S:{emoji:"",color:"#87CEEB"},Z:{emoji:"",color:"#5F9EA0"},J:{emoji:"",color:"#6495ED"},L:{emoji:"",color:"#FF6347"}}},space:{id:"space",name:" Espao Sideral",description:"Explorao espacial",price:950,pieces:{I:{emoji:"",color:"#4169E1"},O:{emoji:"",color:"#00FFFF"},T:{emoji:"",color:"#32CD32"},S:{emoji:"",color:"#FFD700"},Z:{emoji:"",color:"#FFFF00"},J:{emoji:"",color:"#FF8C00"},L:{emoji:"",color:"#FF4500"}}}};class P0{constructor(t,n){this.gameRepository=t,this.currencyService=n,this.inventory=this.loadInventory()}loadInventory(){const t=this.gameRepository.load("shopInventory");if(t){const n=Object.values(tn).filter(s=>s.price===0).map(s=>s.id);let r=!1;for(const s of n)t.ownedThemes.includes(s)||(t.ownedThemes.push(s),r=!0);return r&&this.gameRepository.save("shopInventory",t),t}return{ownedThemes:["cats","classic"],equippedTheme:"cats",purchaseHistory:[]}}save(){this.gameRepository.save("shopInventory",this.inventory)}getAllThemes(){return Object.values(tn).map(t=>({...t,owned:this.inventory.ownedThemes.includes(t.id),equipped:this.inventory.equippedTheme===t.id}))}getOwnedThemes(){return this.inventory.ownedThemes.map(t=>tn[t])}getEquippedTheme(){return tn[this.inventory.equippedTheme]}ownsTheme(t){return this.inventory.ownedThemes.includes(t)}purchaseTheme(t){const n=tn[t];return n?this.ownsTheme(t)?{success:!1,error:"Already owned"}:this.currencyService.canAfford(n.price)?this.currencyService.spendFish(n.price,`Theme: ${n.name}`)?(this.inventory.ownedThemes.push(t),this.inventory.purchaseHistory.push({themeId:t,purchasedAt:new Date().toISOString(),price:n.price}),this.save(),{success:!0,theme:n}):{success:!1,error:"Purchase failed"}:{success:!1,error:"Insufficient funds"}:{success:!1,error:"Theme not found"}}equipTheme(t){if(!this.ownsTheme(t))return{success:!1,error:"Theme not owned"};this.inventory.equippedTheme=t,this.save();const n=tn[t];return window.dispatchEvent(new CustomEvent("themeEquipped",{detail:{themeId:t,theme:n}})),{success:!0,theme:n}}getStats(){return{totalThemes:Object.keys(tn).length,ownedThemes:this.inventory.ownedThemes.length,totalSpent:this.inventory.purchaseHistory.reduce((t,n)=>t+n.price,0),equippedTheme:this.inventory.equippedTheme}}reset(){this.inventory={ownedThemes:["cats"],equippedTheme:"cats",purchaseHistory:[]},this.save()}}const TS=Object.freeze(Object.defineProperty({__proto__:null,PIECE_THEMES:tn,ShopService:P0},Symbol.toStringTag,{value:"Module"})),vt={CLASSIC:{id:"classic",name:" Clssico",description:"O Tetris tradicional",icon:"",rules:{gameOver:!0,timeLimit:!1,lineGoal:!1,speedIncrease:!0}},SPRINT:{id:"sprint",name:" Sprint 40",description:"Limpe 40 linhas o mais rpido possvel",icon:"",rules:{gameOver:!1,timeLimit:!1,lineGoal:40,speedIncrease:!1,fixedLevel:1}},ULTRA:{id:"ultra",name:" Ultra 3min",description:"Mximo de pontos em 3 minutos",icon:"",rules:{gameOver:!1,timeLimit:180,lineGoal:!1,speedIncrease:!0}},ZEN:{id:"zen",name:" Zen",description:"Jogue sem presso, sem game over",icon:"",rules:{gameOver:!1,timeLimit:!1,lineGoal:!1,speedIncrease:!1,fixedLevel:1,relaxed:!0}},SURVIVAL:{id:"survival",name:" Sobrevivncia",description:"Comece no nvel 10, quanto tempo aguenta?",icon:"",rules:{gameOver:!0,timeLimit:!1,lineGoal:!1,speedIncrease:!0,startLevel:10}}};class jS{constructor(t){this.gameRepository=t,this.currentMode=vt.CLASSIC,this.modeStats=this.loadModeStats()}loadModeStats(){return this.gameRepository.load("gameModesStats")||this.initializeStats()}initializeStats(){const t={};return Object.keys(vt).forEach(n=>{const r=vt[n];t[r.id]={gamesPlayed:0,bestScore:0,bestTime:r.rules.timeLimit?r.rules.timeLimit:0,bestLines:0,totalGames:0}}),t}save(){this.gameRepository.save("gameModesStats",this.modeStats)}getAllModes(){return Object.values(vt)}getCurrentMode(){return this.currentMode}setMode(t){const n=Object.values(vt).find(r=>r.id===t);return n?(this.currentMode=n,!0):!1}getModeStats(t){return this.modeStats[t]||null}getAllStats(){return{...this.modeStats}}updateStats(t,n){if(!this.modeStats[t])return;const r=this.modeStats[t];r.gamesPlayed+=1,r.totalGames+=1,n.score>r.bestScore&&(r.bestScore=n.score),n.time&&(r.bestTime===0||n.time<r.bestTime)&&(r.bestTime=n.time),n.lines>r.bestLines&&(r.bestLines=n.lines),this.save()}checkGoal(t,n){return t.rules?t.rules.lineGoal?n.score.lines>=t.rules.lineGoal:(t.rules.timeLimit,!1):!1}getRecommendedOrder(){return[vt.CLASSIC,vt.ZEN,vt.SPRINT,vt.ULTRA,vt.SURVIVAL]}reset(){this.modeStats=this.initializeStats(),this.currentMode=vt.CLASSIC,this.save()}}const Rh=[{id:"bot1",name:"MeowMaster",score:25e4,level:18,lines:120,country:"BR"},{id:"bot2",name:"NyanCat",score:18e4,level:15,lines:95,country:"US"},{id:"bot3",name:"FelixPro",score:15e4,level:14,lines:85,country:"JP"},{id:"bot4",name:"WhiskerKing",score:12e4,level:12,lines:75,country:"KR"},{id:"bot5",name:"PawsGaming",score:1e5,level:11,lines:68,country:"FR"},{id:"bot6",name:"CatNinja",score:85e3,level:10,lines:60,country:"DE"},{id:"bot7",name:"TigerClaw",score:7e4,level:9,lines:55,country:"BR"},{id:"bot8",name:"LionHeart",score:65e3,level:8,lines:50,country:"UK"},{id:"bot9",name:"CheetahSpeed",score:55e3,level:8,lines:45,country:"ES"},{id:"bot10",name:"PantherShadow",score:5e4,level:7,lines:42,country:"IT"},{id:"bot11",name:"JaguarForce",score:45e3,level:7,lines:40,country:"MX"},{id:"bot12",name:"LynxSwift",score:4e4,level:6,lines:38,country:"CA"},{id:"bot13",name:"OcelotPro",score:35e3,level:6,lines:35,country:"AR"},{id:"bot14",name:"BobcatGamer",score:3e4,level:5,lines:32,country:"AU"},{id:"bot15",name:"CougarRush",score:28e3,level:5,lines:30,country:"NZ"}];class ES{constructor(t,n){this.gameRepository=t,this.playerStatsService=n,this.playerName=this.loadPlayerName(),this.playerId=this.loadPlayerId()}loadPlayerName(){const t=this.gameRepository.load("playerProfile");return(t==null?void 0:t.name)||"Jogador"}loadPlayerId(){let t=this.gameRepository.load("playerProfile");return(!t||!t.id)&&(t={...t,id:`player_${Date.now()}_${Math.random().toString(36).substr(2,9)}`},this.gameRepository.save("playerProfile",t)),t.id}setPlayerName(t){const n=this.gameRepository.load("playerProfile")||{};n.name=t,n.id=this.playerId,this.gameRepository.save("playerProfile",n),this.playerName=t}getPlayerName(){return this.playerName}getGlobalLeaderboard(t=100){const n=this.playerStatsService.getStats(),r={id:this.playerId,name:this.playerName,score:n.highScore,level:n.maxLevel,lines:n.linesCleared,country:"BR",isPlayer:!0},s=[...Rh,r];return s.sort((i,o)=>o.score-i.score),s.slice(0,t)}getWeeklyLeaderboard(t=50){return this.getGlobalLeaderboard(t)}getCountryLeaderboard(t="BR",n=50){return this.getGlobalLeaderboard(200).filter(s=>s.country===t).slice(0,n)}getPlayerRank(){const t=this.getGlobalLeaderboard(1e3),n=t.findIndex(r=>r.id===this.playerId);return n===-1?{rank:t.length+1,total:t.length,percentile:0}:{rank:n+1,total:t.length,percentile:Math.floor((t.length-n)/t.length*100)}}getAroundPlayer(t=5){const n=this.getGlobalLeaderboard(1e3),r=n.findIndex(o=>o.id===this.playerId);if(r===-1)return[];const s=Math.max(0,r-t),i=Math.min(n.length,r+t+1);return n.slice(s,i)}submitScore(t){return Promise.resolve({success:!0})}getModeLeaderboard(t,n=50){return this.getGlobalLeaderboard(n)}getFriendsLeaderboard(){return Rh.slice(0,5)}getLeaderboardStats(){const t=this.getPlayerRank(),n=this.playerStatsService.getStats();return{playerName:this.playerName,rank:t.rank,total:t.total,percentile:t.percentile,score:n.highScore,level:n.maxLevel,lines:n.linesCleared}}}class NS{constructor(t){this.playerStatsService=t}generateShareText(t){const{score:n,level:r,lines:s,mode:i}=t;return` Cat Tetris${i?` no modo ${i}`:""}!
 Pontuao: ${n.toLocaleString()}
 Nvel: ${r}
 Linhas: ${s}

Consegue me superar? `}generateShareURL(t){const n=window.location.origin+window.location.pathname,r=new URLSearchParams({score:t.score,level:t.level,lines:t.lines});return`${n}?${r.toString()}`}async copyToClipboard(t){try{return await navigator.clipboard.writeText(t),{success:!0}}catch(n){return{success:!1,error:n.message}}}async shareNative(t){if(!navigator.share)return{success:!1,error:"Web Share API not supported"};try{const n=this.generateShareText(t),r=this.generateShareURL(t);return await navigator.share({title:"Minha pontuao no Cat Tetris",text:n,url:r}),{success:!0}}catch(n){return n.name==="AbortError"?{success:!1,error:"Share cancelled"}:{success:!1,error:n.message}}}shareToTwitter(t){const n=this.generateShareText(t),r=this.generateShareURL(t),s=`https://twitter.com/intent/tweet?text=${encodeURIComponent(n)}&url=${encodeURIComponent(r)}`;return window.open(s,"_blank","width=600,height=400"),{success:!0}}shareToFacebook(t){const n=this.generateShareURL(t),r=`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(n)}`;return window.open(r,"_blank","width=600,height=400"),{success:!0}}shareToWhatsApp(t){const n=this.generateShareText(t),r=this.generateShareURL(t),s=`${n}

${r}`,i=`https://wa.me/?text=${encodeURIComponent(s)}`;return window.open(i,"_blank"),{success:!0}}async takeScreenshot(t){return{success:!1,error:"Not implemented"}}getAvailableMethods(){return{native:!!navigator.share,clipboard:!!navigator.clipboard,twitter:!0,facebook:!0,whatsapp:!0}}}class Ss{constructor(){this.difficulty="medium",this.thinkingTime=100,this.lastDecision=Date.now(),this._actionQueue=[],this._isExpert=!1,this._visualMode=!1,this._visualActionDelay=40}setDifficulty(t){switch(this.difficulty=t,this._isExpert=t.startsWith("expert"),t){case"easy":this.thinkingTime=250;break;case"medium":this.thinkingTime=120;break;case"hard":this.thinkingTime=60;break;case"expert":this.thinkingTime=80;break;default:this.thinkingTime=120}}setVisualMode(t){this._visualMode=t}decideNextMove(t){const n=Date.now(),r=this._visualMode?this._visualActionDelay:this.thinkingTime;if(this._actionQueue.length>0)return n-this.lastDecision<r?null:(this.lastDecision=n,this._actionQueue.shift());if(!this._isExpert&&n-this.lastDecision<r||this._visualMode&&n-this.lastDecision<r)return null;this.lastDecision=n;const{currentPiece:s,board:i,heldPiece:o,canHold:a,nextPieces:c}=t;if(!s)return null;try{const u=(c==null?void 0:c[0])||null;let h=this._findBestMoveWithLookahead(s,i,u),d=!1;if(a){const m=o||u;if(m&&m.type!==s.type){const g=o?u:(c==null?void 0:c[1])||null,x=this._findBestMoveWithLookahead(m,i,g);x&&(!h||x.score>h.score)&&(h=x,d=!0)}}if(!h)this._actionQueue=[{action:"drop"}];else{const m=[];d&&m.push({action:"hold"});const g=d?o||(c==null?void 0:c[0]):s;m.push(...this._buildActionSequence(g,h.rotations,h.targetX,d)),this._actionQueue=m}}catch{this._actionQueue=[{action:"drop"}]}return this._actionQueue.length>0?this._actionQueue.shift():{action:"down"}}_findBestMoveWithLookahead(t,n,r){var u;let s=-1/0,i=null;const o=n.length,a=((u=n[0])==null?void 0:u.length)||10,c=this._isExpert&&r;for(let h=0;h<4;h++){const d=this._rotateShape(t.shape,h),m=d[0].length;for(let g=-2;g<=a-m+2;g++){const x=this._findLandingRow(d,n,g,o,a);if(x===null||x<0)continue;const b=this._placeOnBoard(d,n,g,x);if(!b)continue;const{board:k}=this._simulateClear(b);let p=this._evaluate(b,t);if(c){let f=-1/0;for(let y=0;y<4;y++){const w=this._rotateShape(r.shape,y),S=w[0].length;for(let C=-2;C<=a-S+2;C++){const P=this._findLandingRow(w,k,C,o,a);if(P===null||P<0)continue;const T=this._placeOnBoard(w,k,C,P);if(!T)continue;const j=this._evaluate(T,r);j>f&&(f=j)}}f>-1/0&&(p=p*(1-.3)+f*.3)}this.difficulty==="easy"?p+=(Math.random()-.5)*1200:this.difficulty==="medium"&&Math.random()<.2?p+=(Math.random()-.5)*500:this.difficulty==="expert"&&Math.random()<.12&&(p+=(Math.random()-.5)*600),p>s&&(s=p,i={rotations:h,targetX:g,score:s})}}return i}_evaluate(t,n){switch(this.difficulty){case"expert":return this._evalSurvival(t,n);default:return this._evalDefault(t,n)}}_simulateClear(t){const n=t[0].length,r=[];let s=0;for(const i of t)i.every(o=>o!=null)?s++:r.push([...i]);for(;r.length<t.length;)r.unshift(new Array(n).fill(null));return{board:r,cleared:s}}_evalDefault(t,n){const{board:r,cleared:s}=this._simulateClear(t);let i=0;return i+=s*800,i-=this._getHeight(r)*45,i-=this._countHoles(r)*400,i-=this._getBumpiness(r)*35,i-=this._getRowTransitions(r)*15,i-=this._getColTransitions(r)*10,this.difficulty==="hard"&&(i+=s>=2?s*400:0,i-=this._countHoles(r)*200,i-=this._getCoveredHoles(r)*100,i-=this._getHeight(r)*30,this._countHoles(r)===0&&(i+=300),this._getHeight(r)<=6&&(i+=200)),i}_evalSurvival(t){const{board:n,cleared:r}=this._simulateClear(t),s=this._getHeight(n),i=this._countHoles(n),o=this._getBumpiness(n),a=this._getCoveredHoles(n),c=this._getColumnHeights(n),u=Math.max(...c),h=Math.min(...c),d=this._getRowTransitions(n),m=this._getColTransitions(n),g=this._getWellDepths(n);let x=0;x+=r*5e3,r>=2&&(x+=r*r*1500),r===3&&(x+=8e3),r===4&&(x+=25e3),s>10&&(x+=r*8e3,r>=2&&(x+=r*5e3)),s>14&&(x+=r*2e4),x-=s*s*25,x-=s*300,x-=u*u*15,x-=i*4e3,x-=i*i*500,x-=a*1200,x-=o*250;const b=c.reduce((y,w)=>y+w,0)/c.length,k=c.reduce((y,w)=>y+(w-b)**2,0)/c.length;x-=k*80;const p=u-h;p>4&&(x-=(p-4)*800),p>6&&(x-=(p-6)*1500),x-=d*60,x-=m*50,x-=g*200,s===0?x+=15e3:s<=2?x+=6e3:s<=4?x+=3e3:s<=6&&(x+=1500),i===0&&(x+=5e3),i===0&&s<=4&&(x+=3e3),o<=1?x+=2e3:o<=3&&(x+=800),s>10&&(x-=(s-10)*2e3),s>12&&(x-=(s-12)*(s-12)*800),s>14&&(x-=(s-14)*(s-14)*1500),s>16&&(x-=6e4),s>18&&(x-=2e5);const f=this._countNearCompleteLines(n);return s>8&&(x+=f*1500),x}_evalCombo(t,n){const{board:r,cleared:s}=this._simulateClear(t),i=r[0].length,o=this._getHeight(r),a=this._countHoles(r),c=this._getBumpiness(r),u=this._getCoveredHoles(r);let h=0;s===1?h+=6e3:s===2?h+=3500:s===3?h+=2500:s===4&&(h+=2e3);let d=0,m=0,g=0;const x={};for(let k=r.length-1;k>=0;k--){let p=0,f=-1;for(let y=0;y<i;y++)r[k][y]!=null?p++:f=y;p===i-1?(d++,m++,g=Math.max(g,m),f>=0&&(x[f]=(x[f]||0)+1)):p>=i-2?(d+=.5,m++,g=Math.max(g,m)):m=0}h+=d*2500,h+=g*g*600;let b=0;for(const k in x)x[k]>b&&(b=x[k]);return b>=2&&(h+=b*b*500),h-=a*2500,h-=u*700,h-=o*100,h-=c*120,h-=this._getRowTransitions(r)*35,h-=this._getColTransitions(r)*25,a===0&&(h+=1500),o<=6&&(h+=600),o>12&&(h-=(o-12)*800),o>15&&(h-=(o-15)*2e3),o>18&&(h-=25e3),h}_evalTetris(t,n){const{board:r,cleared:s}=this._simulateClear(t),i=r[0].length,o=r.length,a=this._getColumnHeights(r);this._getHeight(r);const c=this._countHoles(r),u=this._getCoveredHoles(r);let h=0;const d=i-1;s===4?h+=2e5:s>0&&(h-=s*15e3);let m=0;for(let w=0;w<o;w++)r[w][d]!=null&&m++;h-=m*6e3;const g=[];for(let w=0;w<i;w++)w!==d&&g.push(a[w]);const x=g.reduce((w,S)=>w+S,0)/g.length,b=x-a[d];h+=Math.max(0,b)*600,b>=4?h+=25e3:b>=3?h+=12e3:b>=2?h+=5e3:b>=1&&(h+=1e3);let k=0;for(let w=0;w<g.length-1;w++)k+=Math.abs(g[w]-g[w+1]);h-=k*500;const p=g.reduce((w,S)=>w+(S-x)**2,0)/g.length;h-=p*150,k===0?h+=6e3:k<=1?h+=2500:k<=2&&(h+=800);const f=this._countNearFullLinesExcluding(r,d);h+=f*5e3,f>=4?h+=2e4:f>=3?h+=8e3:f>=2&&(h+=3e3);for(let w=0;w<i;w++){if(w===d)continue;const S=a[w],C=w>0?a[w-1]:o,P=w<i-1?a[w+1]:o,T=Math.min(C,P)-S;T>1&&(h-=T*2e3)}n.type==="I"&&(s===4?h+=5e4:b<4&&(h-=2e4)),h-=c*5e3,h-=u*2e3,h-=this._getRowTransitions(r)*40,h-=this._getColTransitions(r)*30;const y=Math.max(...g);return y>14&&(h-=(y-14)*3e3),y>16&&(h-=(y-16)*6e3),y>18&&(h-=4e4),c===0&&(h+=4e3),x<=6&&(h+=1500),h}_countLines(t){let n=0;for(const r of t)r.every(s=>s!=null)&&n++;return n}_getHeight(t){for(let n=0;n<t.length;n++)if(t[n].some(r=>r!=null))return t.length-n;return 0}_countHoles(t){let n=0;const r=t[0].length;for(let s=0;s<r;s++){let i=!1;for(let o=0;o<t.length;o++)t[o][s]!=null?i=!0:i&&n++}return n}_getBumpiness(t){const n=this._getColumnHeights(t);let r=0;for(let s=0;s<n.length-1;s++)r+=Math.abs(n[s]-n[s+1]);return r}_getBumpinessExcluding(t,n){const r=this._getColumnHeights(t);let s=0;for(let i=0;i<r.length-1;i++)i===n||i+1===n||(s+=Math.abs(r[i]-r[i+1]));return s}_getColumnHeights(t){const n=t[0].length,r=[];for(let s=0;s<n;s++){let i=!1;for(let o=0;o<t.length;o++)if(t[o][s]!=null){r.push(t.length-o),i=!0;break}i||r.push(0)}return r}_getFlatness(t){const n=this._getColumnHeights(t),r=n.reduce((i,o)=>i+o,0)/n.length,s=n.reduce((i,o)=>i+(o-r)**2,0)/n.length;return Math.max(0,100-s)}_getWellDepths(t){const n=this._getColumnHeights(t);let r=0;for(let s=0;s<n.length;s++){const i=s>0?n[s-1]:20,o=s<n.length-1?n[s+1]:20,a=Math.min(i,o)-n[s];a>0&&(r+=a)}return r}_getRowTransitions(t){let n=0;const r=t[0].length;for(let s=0;s<t.length;s++){for(let i=0;i<r-1;i++){const o=t[s][i]!=null,a=t[s][i+1]!=null;o!==a&&n++}t[s][0]==null&&n++,t[s][r-1]==null&&n++}return n}_getColTransitions(t){let n=0;const r=t[0].length;for(let s=0;s<r;s++){for(let i=0;i<t.length-1;i++){const o=t[i][s]!=null,a=t[i+1][s]!=null;o!==a&&n++}t[t.length-1][s]==null&&n++}return n}_getCoveredHoles(t){let n=0;const r=t[0].length;for(let s=0;s<r;s++){let i=0;for(let o=0;o<t.length;o++)t[o][s]!=null?i++:i>0&&(n+=i)}return n}_countNearCompleteLines(t){let n=0;for(const r of t){const s=r.filter(i=>i!=null).length;s>=r.length-1&&s<r.length&&n++}return n}_countNearFullLinesExcluding(t,n){let r=0;for(const s of t){let i=0,o=-1;for(let a=0;a<s.length;a++)s[a]==null&&(i++,o=a);i===1&&o===n&&r++}return r}_buildActionSequence(t,n,r,s){var h;const i=[],o=n%4;for(let d=0;d<o;d++)i.push({action:"rotate"});const a=s?3:((h=t.position)==null?void 0:h.x)??3,c=r-a,u=c>0?"right":"left";for(let d=0;d<Math.abs(c);d++)i.push({action:u});return i.push({action:"drop"}),i}_rotateShape(t,n){let r=t;for(let s=0;s<n%4;s++)r=r[0].map((i,o)=>r.map(a=>a[o]).reverse());return r}_findLandingRow(t,n,r,s,i){for(let o=-t.length;o<s;o++)if(this._collides(t,n,r,o+1,s,i))return o;return s-t.length}_collides(t,n,r,s,i,o){for(let a=0;a<t.length;a++)for(let c=0;c<t[0].length;c++){if(!t[a][c])continue;const u=r+c,h=s+a;if(u<0||u>=o||h>=i||h>=0&&n[h][u]!=null)return!0}return!1}_placeOnBoard(t,n,r,s){const i=n.length,o=n[0].length,a=n.map(c=>[...c]);for(let c=0;c<t.length;c++)for(let u=0;u<t[0].length;u++){if(!t[c][u])continue;const h=r+u,d=s+c;if(h<0||h>=o||d<0||d>=i||a[d][h]!=null)return null;a[d][h]=1}return a}getDifficulties(){return[{id:"easy",name:"Fcil",emoji:"",description:"IA iniciante"},{id:"medium",name:"Mdio",emoji:"",description:"IA intermediria"},{id:"hard",name:"Difcil",emoji:"",description:"IA avanada"},{id:"expert",name:"Expert",emoji:"",description:"Mantm o board o mais baixo possvel"}]}}class AS{constructor(t){this.gameRepository=t,this.currentMode=null,this.players=[],this.matchState=null}startLocalMatch(t="Jogador 1",n="Jogador 2"){return this.currentMode="1v1-local",this.players=[{id:"p1",name:t,score:0,level:1,lines:0,gameState:null,alive:!0},{id:"p2",name:n,score:0,level:1,lines:0,gameState:null,alive:!0}],this.matchState={startTime:Date.now(),status:"playing",winner:null},{mode:this.currentMode,players:this.players,matchId:`local_${Date.now()}`}}startAIMatch(t="Jogador",n="medium"){return this.currentMode="vs-ai",this.players=[{id:"p1",name:t,score:0,level:1,lines:0,gameState:null,alive:!0,isHuman:!0},{id:"ai",name:this.getAIName(n),score:0,level:1,lines:0,gameState:null,alive:!0,isAI:!0,difficulty:n}],this.matchState={startTime:Date.now(),status:"playing",winner:null,aiDifficulty:n},{mode:"vsAI",aiDifficulty:n,players:this.players,matchId:`ai_${Date.now()}`}}updatePlayerState(t,n){var s,i;const r=this.players.find(o=>o.id===t);r&&(r.gameState=n,r.score=((s=n.score)==null?void 0:s.points)||0,r.level=((i=n.score)==null?void 0:i.level)||1,r.lines=n.linesCleared||0,r.alive=!n.gameOver,this.checkWinCondition())}checkWinCondition(){const t=this.players.filter(n=>n.alive);return t.length===1?(this.matchState.status="finished",this.matchState.winner=t[0],this.matchState.endTime=Date.now(),this.matchState.duration=this.matchState.endTime-this.matchState.startTime,this.saveMatchResult(),{hasWinner:!0,winner:this.matchState.winner}):{hasWinner:!1}}saveMatchResult(){const t=this.gameRepository.load("multiplayerStats")||{localMatches:0,aiMatches:0,wins:0,losses:0,draws:0,totalTime:0};this.currentMode==="1v1-local"?t.localMatches++:this.currentMode==="vs-ai"&&(t.aiMatches++,this.matchState.winner.isHuman?t.wins++:this.matchState.winner.isAI&&t.losses++),t.totalTime+=this.matchState.duration,this.gameRepository.save("multiplayerStats",t)}getStats(){const t=this.gameRepository.load("multiplayerStats")||{localMatches:0,aiMatches:0,wins:0,losses:0,draws:0,totalTime:0};return{...t,winRate:t.aiMatches>0?(t.wins/t.aiMatches*100).toFixed(1):0,avgMatchTime:t.localMatches+t.aiMatches>0?Math.floor(t.totalTime/(t.localMatches+t.aiMatches)/1e3):0}}getMatchState(){return{...this.matchState,players:this.players,mode:this.currentMode}}endMatch(){const t={mode:this.currentMode,players:this.players,winner:this.matchState.winner,duration:Date.now()-this.matchState.startTime};return this.currentMode=null,this.players=[],this.matchState=null,t}startAIvsAIMatch(t="expert",n="expert"){return this.currentMode="ai-vs-ai",this.players=[{id:"ai1",name:this.getAIName(t),score:0,level:1,lines:0,gameState:null,alive:!0,isAI:!0,difficulty:t},{id:"ai2",name:this.getAIName(n),score:0,level:1,lines:0,gameState:null,alive:!0,isAI:!0,difficulty:n}],this.matchState={startTime:Date.now(),status:"playing",winner:null,ai1Difficulty:t,ai2Difficulty:n},{mode:"aiVsAI",ai1Difficulty:t,ai2Difficulty:n,players:this.players,matchId:`aivai_${Date.now()}`}}getAIName(t){return{easy:" MeowBot Iniciante",medium:" CatAI Intermedirio",hard:" FelineBot Avanado",expert:" NyanMaster Survival"}[t]||"IA"}getAvailableModes(){return[{id:"vs-ai",name:"vs IA",emoji:"",description:"Enfrente o bot",players:1,type:"ai",difficulties:["easy","medium","hard","expert"]},{id:"ai-vs-ai",name:"IA vs IA",emoji:"",description:"Assista duas IAs se enfrentando (debug)",players:0,type:"debug"}]}}const jt={FUNDAMENTALS:"fundamentals",INTERMEDIATE:"intermediate",ADVANCED:"advanced",PRO:"pro"};class MS{constructor(t){this.gameRepository=t,this.lessons=this._buildLessons(),this.progress=this._loadProgress()}_buildLessons(){return[{id:1,module:jt.FUNDAMENTALS,title:"Movimentao",description:"Mover, rotacionar e dropar peas",difficulty:"beginner",estimatedTime:"2 min",intro:["   Setas movem a pea para os lados","  Seta para cima rotaciona a pea","  Seta para baixo = soft drop (desce rpido)","  Espao = hard drop (cai instantaneamente)","A sombra mostra onde a pea vai pousar"],practice:{objective:"Limpe 3 linhas usando os controles",validate:t=>{const n=t.linesCleared||0;return{complete:n>=3,progress:Math.min(1,n/3),feedback:n>=3?" timo! Voc dominou os controles!":`${n}/3 linhas`}}},rewards:{fishCoins:100,xp:50,badge:"first_move",unlocks:[2]}},{id:2,module:jt.FUNDAMENTALS,title:"Hold Piece",description:"Segure uma pea para usar depois",difficulty:"beginner",estimatedTime:"2 min",intro:["Aperte C ou Shift para guardar a pea atual","A pea guardada aparece no canto esquerdo","Voc pode trocar 1 vez por turno","Dica: guarde peas valiosas como I e T","Isso ajuda quando a pea atual no encaixa bem"],practice:{objective:"Use o hold e limpe 3 linhas",validate:t=>{const n=t.hasUsedHold,r=t.linesCleared||0;return n?{complete:r>=3,progress:Math.min(1,r/3),feedback:r>=3?" Hold dominado!":` Hold usado! ${r}/3 linhas`}:{complete:!1,progress:0,feedback:"Aperte C para segurar a pea!"}}},rewards:{fishCoins:100,xp:50,badge:"hold_learner",unlocks:[3]}},{id:3,module:jt.FUNDAMENTALS,title:"Planejamento",description:"Use o painel Next para planejar jogadas",difficulty:"beginner",estimatedTime:"3 min",intro:["O painel NEXT mostra as prximas peas","Olhe as prximas 2-3 peas antes de agir","Se vem uma pea I, deixe espao vertical","Pensar  frente = menos buracos = mais linhas","Tente limpar muitas linhas sem criar buracos!"],practice:{objective:"Limpe 8 linhas (planeje bem!)",validate:t=>{const n=t.linesCleared||0;return{complete:n>=8,progress:Math.min(1,n/8),feedback:n>=8?" Excelente planejamento!":`${n}/8 linhas`}}},rewards:{fishCoins:150,xp:75,badge:"planner",unlocks:[4]}},{id:4,module:jt.INTERMEDIATE,title:"Combos",description:"Limpe linhas consecutivas para bnus",difficulty:"intermediate",estimatedTime:"4 min",intro:["Combo = limpar linhas em peas consecutivas","Cada combo seguido d +50 pontos de bnus","Combo 5x = +250 pontos extras!","Dica: empilhe baixo e limpe 1 linha por vez","Foque em manter o ritmo, sem pausas"],practice:{objective:"Consiga um combo de 3 ou mais",validate:t=>{const n=t.currentCombo||0,r=t.maxCombo||n,s=Math.max(n,r);return{complete:s>=3,progress:Math.min(1,s/3),feedback:s>=3?" Combo master!":`Melhor combo: ${s}x (precisa 3)`}}},rewards:{fishCoins:200,xp:100,badge:"combo_starter",unlocks:[5]}},{id:5,module:jt.INTERMEDIATE,title:"Tetris (4 linhas)",description:"Limpe 4 linhas de uma vez para 800pts",difficulty:"intermediate",estimatedTime:"5 min",intro:["Tetris = limpar 4 linhas ao mesmo tempo","Vale 800 pontos  o clear mais valioso!","Deixe uma coluna vazia (geralmente a da direita)","Preencha as outras 9 colunas em 4 linhas","Use a pea I (barra) para completar o Tetris"],practice:{objective:"Alcance 2.000 pontos",validate:t=>{const n=t.score||0;return{complete:n>=2e3,progress:Math.min(1,n/2e3),feedback:n>=2e3?" Pontuao alta!":`${n.toLocaleString()}/2.000 pts`}}},rewards:{fishCoins:250,xp:125,badge:"tetris_scorer",unlocks:[6]}},{id:6,module:jt.ADVANCED,title:"T-Spin",description:"Rotacione o T no ltimo momento para bnus",difficulty:"advanced",estimatedTime:"6 min",intro:["T-Spin = rotacionar a pea T em espao apertado","Vale pontos extras e ativa back-to-back!",'Crie um buraco em forma de "T" na pilha',"Deslize a pea T para dentro e rotacione"," difcil, mas d muitos pontos!"],practice:{objective:"Faa pelo menos 1 T-Spin e 4.000 pontos",validate:t=>{const n=t.tSpins||0,r=t.score||0;return n===0?{complete:!1,progress:Math.min(.5,r/8e3),feedback:"Tente rotacionar o T em espao apertado!"}:{complete:r>=4e3,progress:Math.min(1,r/4e3),feedback:r>=4e3?` T-Spin pro! (${n} T-Spins)`:` T-Spin! ${r.toLocaleString()}/4.000 pts`}}},rewards:{fishCoins:400,xp:250,badge:"tspin_learner",unlocks:[7]}},{id:7,module:jt.ADVANCED,title:"Back-to-Back",description:"Tetris ou T-Spin seguidos do 50% bnus",difficulty:"advanced",estimatedTime:"6 min",intro:["Back-to-Back = dois clears difceis seguidos","Conta como: Tetris (4 linhas) ou T-Spin","Cada B2B seguido d +50% de pontos!","Limpar 1-3 linhas normais quebra a cadeia","Combine T-Spins e Tetris para pontuao mxima"],practice:{objective:"Alcance 6.000 pontos com back-to-back",validate:t=>{const n=t.score||0,r=t.backToBackActive;return{complete:n>=6e3,progress:Math.min(1,n/6e3),feedback:n>=6e3?" Back-to-back dominado!":r?` B2B ativo! ${n.toLocaleString()}/6.000 pts`:`${n.toLocaleString()}/6.000 pts`}}},rewards:{fishCoins:500,xp:300,badge:"b2b_learner",unlocks:[8]}},{id:8,module:jt.PRO,title:"Desafio Final",description:"Prove que domina o Tetris!",difficulty:"pro",estimatedTime:"10 min",intro:["Use TUDO que aprendeu at aqui","Movimentao, hold, combos, T-Spins, B2B...","O objetivo  alcanar uma pontuao alta","No tenha pressa  planeje cada jogada","Boa sorte, mestre! "],practice:{objective:"Alcance 15.000 pontos",validate:t=>{const n=t.score||0;return{complete:n>=15e3,progress:Math.min(1,n/15e3),feedback:n>=15e3?" MESTRE DO TETRIS!":`${n.toLocaleString()}/15.000 pts`}}},rewards:{fishCoins:1e3,xp:500,badge:"tetris_master",unlocks:[]}}]}_loadProgress(){var n,r;return((r=(n=this.gameRepository)==null?void 0:n.load)==null?void 0:r.call(n,"tutorialProgress"))||{completedLessons:[],unlockedLessons:[1],badges:[],totalXP:0,currentModule:jt.FUNDAMENTALS}}_saveProgress(){var t,n;(n=(t=this.gameRepository)==null?void 0:t.save)==null||n.call(t,"tutorialProgress",this.progress)}getProgress(){return this.progress}getLessonById(t){return this.lessons.find(n=>n.id===t)}getAvailableLessons(){return this.lessons.filter(t=>this.progress.unlockedLessons.includes(t.id))}completeLesson(t,n){var s;const r=this.getLessonById(t);return r?(this.progress.completedLessons.includes(t)||this.progress.completedLessons.push(t),(r.rewards.unlocks||[]).forEach(i=>{this.progress.unlockedLessons.includes(i)||this.progress.unlockedLessons.push(i)}),r.rewards.badge&&!this.progress.badges.includes(r.rewards.badge)&&this.progress.badges.push(r.rewards.badge),this.progress.totalXP+=r.rewards.xp||0,this._saveProgress(),{completed:!0,lessonId:t,lessonTitle:r.title,rewards:r.rewards,nextLesson:((s=r.rewards.unlocks)==null?void 0:s[0])||null,performance:n}):null}resetProgress(){this.progress={completedLessons:[],unlockedLessons:[1],badges:[],totalXP:0,currentModule:jt.FUNDAMENTALS},this._saveProgress()}}function LS(e=new rS){return e.registerSingleton("gameRepository",()=>new aS),e.registerSingleton("settingsService",()=>new vS),e.registerSingleton("statisticsService",()=>new xS),e.registerSingleton("scoringService",()=>new Tn),e.registerSingleton("pieceFactory",()=>new er),e.registerSingleton("movementStrategyFactory",()=>new tr),e.registerSingleton("keyboardInputService",()=>new bS),e.registerSingleton("playerStatsService",t=>new PS(t),["gameRepository"]),e.registerSingleton("currencyService",t=>new SS(t),["gameRepository"]),e.registerSingleton("missionsService",(t,n)=>new CS(t,n),["gameRepository","currencyService"]),e.registerSingleton("achievementsService",(t,n,r)=>new kS(t,n,r),["gameRepository","currencyService","playerStatsService"]),e.registerSingleton("shopService",(t,n)=>new P0(t,n),["gameRepository","currencyService"]),e.registerSingleton("gameModesService",t=>new jS(t),["gameRepository"]),e.registerSingleton("leaderboardService",(t,n)=>new ES(t,n),["gameRepository","playerStatsService"]),e.registerSingleton("shareService",t=>new NS(t),["playerStatsService"]),e.registerSingleton("aiOpponentService",()=>new Ss),e.registerSingleton("multiplayerService",t=>new AS(t),["gameRepository"]),e.registerSingleton("tutorialService",t=>new MS(t),["gameRepository"]),e.registerSingleton("gameService",(t,n,r,s)=>new Zn(t,n,r,s),["pieceFactory","movementStrategyFactory","gameRepository","scoringService"]),e}const q=LS();function T0(){const[e,t]=v.useState(null),[n,r]=v.useState(!0);v.useEffect(()=>{try{const a=q.resolve("currencyService");t(a.getCurrency()),r(!1);const c=()=>{t(a.getCurrency())};return window.addEventListener("currencyUpdated",c),()=>{window.removeEventListener("currencyUpdated",c)}}catch{r(!1)}},[]);const s=v.useCallback((a,c)=>{try{const u=q.resolve("currencyService"),h=u.addFish(a,c);return h&&(t(u.getCurrency()),window.dispatchEvent(new Event("currencyUpdated"))),h}catch{return!1}},[]),i=v.useCallback((a,c)=>{try{const u=q.resolve("currencyService"),h=u.spendFish(a,c);return h&&(t(u.getCurrency()),window.dispatchEvent(new Event("currencyUpdated"))),h}catch{return!1}},[]),o=v.useCallback(a=>{try{return q.resolve("currencyService").canAfford(a)}catch{return!1}},[]);return{currency:e,loading:n,addFish:s,spendFish:i,canAfford:o}}function _S({className:e=""}){const{currency:t,loading:n}=T0();return n||!t?l.jsxs("div",{className:`flex items-center gap-2 ${e}`,children:[l.jsx("div",{className:"text-2xl",children:""}),l.jsx("div",{className:"text-white/60",children:"..."})]}):l.jsxs(M.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:`flex items-center gap-2 bg-black/30 px-4 py-2 rounded-lg backdrop-blur-sm ${e}`,children:[l.jsx("span",{className:"text-2xl",children:""}),l.jsx(M.span,{initial:{scale:1.2,color:"#fbbf24"},animate:{scale:1,color:"#ffffff"},transition:{duration:.3},className:"text-xl font-bold",children:t.fish.toLocaleString()},t.fish)]})}function DS({onStartGame:e,onNewGame:t,onShowSettings:n,onShowShop:r,onShowMissions:s,onShowAchievements:i,onShowMultiplayer:o,onShowTutorial:a,onShowTutorialHub:c,onShowAIShowcase:u,onShowCreatorMode:h,hasActiveGame:d,gameState:m,hasOverlayOpen:g}){var N,_,se;const[x,b]=v.useState(!0),[k,p]=v.useState(!1),f=nS(),{t:y,language:w,setLanguage:S}=Me(),C=v.useCallback(O=>{var Q;x&&((Q=f.playMenuSelect)==null||Q.call(f)),O==null||O()},[x,f]),P=v.useMemo(()=>{const O=[];return d?(O.push({id:"continue",action:e}),O.push({id:"newGame",action:t})):O.push({id:"play",action:e}),O.push({id:"vsAI",action:o}),O.push({id:"tutorial",action:c}),O.push({id:"creator",action:h}),O.push({id:"aiExpert",action:u}),O.push({id:"shop",action:r}),O.push({id:"missions",action:s}),O.push({id:"achievements",action:i}),O.push({id:"settings",action:n}),O},[d,e,t,o,c,h,u,r,s,i,n]),T=v.useMemo(()=>d?{0:{up:7,down:2,left:1,right:1},1:{up:8,down:3,left:0,right:0},2:{up:0,down:4,left:3,right:3},3:{up:1,down:5,left:2,right:2},4:{up:2,down:7,left:5,right:5},5:{up:3,down:8,left:4,right:4},6:{up:4,down:0,left:9,right:7},7:{up:4,down:0,left:6,right:8},8:{up:5,down:1,left:7,right:9},9:{up:5,down:1,left:8,right:6}}:{0:{up:6,down:1,left:0,right:0},1:{up:0,down:3,left:2,right:2},2:{up:0,down:4,left:1,right:1},3:{up:1,down:6,left:4,right:4},4:{up:2,down:7,left:3,right:3},5:{up:3,down:0,left:8,right:6},6:{up:3,down:0,left:5,right:7},7:{up:4,down:0,left:6,right:8},8:{up:4,down:0,left:7,right:5}},[d]),j=v.useCallback(O=>{P[O]&&C(P[O].action)},[P,C]),{selectedIndex:E}=Be({itemCount:P.length,onConfirm:j,active:!g&&!k,wrap:!0,navMap:T}),L=v.useCallback(O=>{var Q;return((Q=P[E])==null?void 0:Q.id)===O},[P,E]);v.useEffect(()=>{const O=Q=>{Q.key==="Enter"&&(Q.preventDefault(),C(e))};return window.addEventListener("keydown",O),()=>window.removeEventListener("keydown",O)},[C,e]);const A=(O=0)=>({initial:{opacity:0,y:16},animate:{opacity:1,y:0},transition:{duration:.35,delay:O,ease:"easeOut"}});return l.jsxs("div",{className:"h-screen bg-gradient-to-b from-slate-900 via-purple-950 to-slate-900 flex flex-col items-center justify-center p-4 relative overflow-hidden",children:[l.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[l.jsx("div",{className:"absolute top-1/4 -left-32 w-64 h-64 bg-purple-600/10 rounded-full blur-3xl"}),l.jsx("div",{className:"absolute bottom-1/4 -right-32 w-64 h-64 bg-blue-600/10 rounded-full blur-3xl"})]}),l.jsx("div",{className:"fixed top-3 right-3 z-50",children:l.jsx(_S,{})}),l.jsxs("div",{className:"w-full max-w-sm relative z-10 flex flex-col items-center",children:[l.jsxs(M.div,{...A(0),className:"text-center mb-4",children:[l.jsx("h1",{className:"text-4xl font-extrabold text-white tracking-tight drop-shadow-lg select-none",children:y("menu.title")}),l.jsx("p",{className:"text-white/50 text-xs mt-1",children:y("menu.subtitle")})]}),l.jsx(M.div,{...A(.1),className:"w-full space-y-2 mb-4",children:d?l.jsxs(l.Fragment,{children:[l.jsxs("button",{onClick:()=>C(e),className:`w-full py-4 rounded-xl bg-emerald-500 hover:bg-emerald-400 active:scale-[0.98] text-white font-bold text-lg shadow-lg shadow-emerald-500/20 transition-all duration-150 ${L("continue")?"ring-2 ring-yellow-400 ring-offset-2 ring-offset-slate-900 scale-[1.02]":""}`,children:[y("menu.continue"),l.jsx("span",{className:"block text-emerald-100/70 text-xs font-normal mt-0.5",children:y("menu.continueInfo",{level:((N=m==null?void 0:m.score)==null?void 0:N.level)||1,points:(((_=m==null?void 0:m.score)==null?void 0:_.points)||0).toLocaleString()})})]}),l.jsx("button",{onClick:()=>C(t),className:`w-full py-3 rounded-xl bg-white/10 hover:bg-white/15 active:scale-[0.98] text-white font-semibold text-base border border-white/10 transition-all duration-150 ${L("newGame")?"ring-2 ring-yellow-400 ring-offset-2 ring-offset-slate-900 scale-[1.02]":""}`,children:y("menu.newGame")})]}):l.jsx("button",{onClick:()=>C(e),className:`w-full py-5 rounded-xl bg-gradient-to-r from-emerald-500 to-green-500 hover:from-emerald-400 hover:to-green-400 active:scale-[0.98] text-white font-bold text-xl shadow-lg shadow-emerald-500/25 transition-all duration-150 ${L("play")?"ring-2 ring-yellow-400 ring-offset-2 ring-offset-slate-900 scale-[1.02]":""}`,children:y("menu.play")})}),l.jsxs(M.div,{...A(.18),className:"w-full grid grid-cols-2 gap-2 mb-4",children:[l.jsx(bi,{icon:"",label:y("menu.vsAI"),sub:y("menu.vsAISub"),onClick:()=>C(o),selected:L("vsAI")}),l.jsx(bi,{icon:"",label:y("menu.tutorial"),sub:y("menu.tutorialSub"),onClick:()=>C(c),selected:L("tutorial")}),l.jsx(bi,{icon:"",label:y("menu.creator"),sub:y("menu.creatorSub"),onClick:()=>C(h),selected:L("creator")}),l.jsx(bi,{icon:"",label:y("menu.aiExpert"),sub:y("menu.aiExpertSub"),onClick:()=>C(u),selected:L("aiExpert")})]}),l.jsxs(M.div,{...A(.25),className:"w-full grid grid-cols-4 gap-1 mb-4",children:[l.jsx(Si,{icon:"",label:y("menu.shop"),onClick:()=>C(r),selected:L("shop")}),l.jsx(Si,{icon:"",label:y("menu.missions"),onClick:()=>C(s),selected:L("missions")}),l.jsx(Si,{icon:"",label:y("menu.achievements"),onClick:()=>C(i),selected:L("achievements")}),l.jsx(Si,{icon:"",label:y("menu.settings"),onClick:()=>C(n),selected:L("settings")})]}),l.jsxs(M.div,{...A(.3),className:"flex items-center gap-3 text-xs text-white/25",children:[l.jsx("button",{onClick:()=>b(!x),className:"hover:text-white/50 transition-colors",children:x?"":""}),l.jsxs("button",{onClick:()=>p(O=>!O),className:"hover:text-white/50 transition-colors flex items-center gap-1",children:[((se=Bl.find(O=>O.code===w))==null?void 0:se.flag)||""," ",w.toUpperCase()]}),l.jsx("span",{className:"select-none",children:"v1.0"})]}),k&&l.jsx(M.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},className:"absolute bottom-16 bg-slate-800/95 backdrop-blur-sm rounded-xl border border-white/10 p-2 z-50 shadow-xl",children:Bl.map(O=>l.jsx("button",{onClick:()=>{S(O.code),p(!1)},className:`w-full text-left px-3 py-2 rounded-lg text-sm transition-colors ${w===O.code?"bg-purple-600/40 text-white font-semibold":"text-white/70 hover:bg-white/10 hover:text-white"}`,children:O.label},O.code))})]})]})}function bi({icon:e,label:t,sub:n,onClick:r,selected:s}){return l.jsxs("button",{onClick:r,className:`flex flex-col items-center text-center p-3 rounded-xl bg-white/[0.06] hover:bg-white/[0.1] border border-white/[0.06] hover:border-white/[0.12] active:scale-[0.97] transition-all duration-150 ${s?"ring-2 ring-yellow-400 bg-white/[0.12] border-yellow-400/30 scale-[1.03]":""}`,children:[l.jsx("span",{className:"text-2xl mb-1",children:e}),l.jsx("span",{className:"text-white font-semibold text-sm leading-tight",children:t}),l.jsx("span",{className:"text-white/40 text-[10px] mt-0.5 leading-tight",children:n})]})}function Si({icon:e,label:t,onClick:n,selected:r}){return l.jsxs("button",{onClick:n,className:`flex flex-col items-center gap-1 px-2 py-2 rounded-lg hover:bg-white/[0.07] active:scale-95 transition-all duration-150 ${r?"ring-2 ring-yellow-400 bg-white/[0.1] scale-105":""}`,children:[l.jsx("span",{className:"text-lg",children:e}),l.jsx("span",{className:"text-white/40 text-[10px] leading-none",children:t})]})}function j0(){const[e,t]=v.useState([]),[n,r]=v.useState(!0);v.useEffect(()=>{try{const o=q.resolve("missionsService");t(o.getMissions()),r(!1);const a=()=>{t(o.getMissions())},c=({linesCleared:g})=>{o.incrementProgress(me.CLEAR_LINES,g),g===4&&o.incrementProgress(me.TETRIS_CLEAR,1),a()},u=()=>{o.incrementProgress(me.T_SPINS,1),a()},h=()=>{o.incrementProgress(me.PLACE_PIECES,1),a()},d=({score:g,level:x,combo:b})=>{g&&o.updateProgress(me.SCORE_POINTS,g),x&&o.updateProgress(me.REACH_LEVEL,x),b&&o.updateProgress(me.COMBOS,b),a()},m=()=>{o.incrementProgress(me.BACK_TO_BACK,1),a()};return G.on(V.LINE_CLEARED,c),G.on(V.T_SPIN,u),G.on(V.PIECE_PLACED,h),G.on(V.SCORE_UPDATED,d),G.on(V.BACK_TO_BACK,m),()=>{G.off(V.LINE_CLEARED,c),G.off(V.T_SPIN,u),G.off(V.PIECE_PLACED,h),G.off(V.SCORE_UPDATED,d),G.off(V.BACK_TO_BACK,m)}}catch{r(!1)}},[]),v.useEffect(()=>{if(n)return;const o=setInterval(()=>{try{const a=q.resolve("missionsService"),u=q.resolve("statisticsService").getStats();u.playTime>0&&(a.updateProgress(me.SURVIVE_TIME,u.playTime),t(a.getMissions()))}catch{}},1e3);return()=>clearInterval(o)},[n]);const s=v.useCallback(o=>{try{const a=q.resolve("missionsService"),c=a.claimReward(o);return c.success&&(t(a.getMissions()),window.dispatchEvent(new Event("currencyUpdated"))),c}catch(a){return{success:!1,error:a.message}}},[]),i=v.useCallback(()=>{try{return q.resolve("missionsService").getStats()}catch{return null}},[]);return{missions:e,loading:n,claimReward:s,getMissionsStats:i}}function E0({trigger:e,duration:t=3e3,message:n}){const[r,s]=v.useState(!1),[i,o]=v.useState([]);return v.useEffect(()=>{if(e){s(!0);const a=[];for(let c=0;c<50;c++)a.push({id:c,x:Math.random()*100,y:-10,rotation:Math.random()*360,color:["#FFD700","#FF6B6B","#4ECDC4","#45B7D1","#FFA07A","#98D8C8"][Math.floor(Math.random()*6)],size:Math.random()*10+5,delay:Math.random()*.5});o(a),setTimeout(()=>{s(!1),o([])},t)}},[e,t]),r?l.jsxs("div",{className:"fixed inset-0 pointer-events-none z-[9999] overflow-hidden",children:[i.map(a=>l.jsx(M.div,{initial:{x:`${a.x}vw`,y:a.y,rotate:a.rotation,opacity:1},animate:{y:"110vh",rotate:a.rotation+720,opacity:0},transition:{duration:2+Math.random(),delay:a.delay,ease:"easeIn"},style:{position:"absolute",width:a.size,height:a.size,backgroundColor:a.color,borderRadius:Math.random()>.5?"50%":"0"}},a.id)),n&&l.jsx(M.div,{initial:{scale:0,y:"50vh"},animate:{scale:1,y:"40vh"},exit:{scale:0,opacity:0},transition:{type:"spring",stiffness:200,damping:20},className:"absolute inset-x-0 flex justify-center",children:l.jsx("div",{className:"bg-gradient-to-r from-yellow-400 to-orange-500 text-white font-bold text-4xl px-8 py-4 rounded-2xl shadow-2xl border-4 border-white",children:n})}),l.jsx(M.div,{initial:{opacity:0},animate:{opacity:[0,1,0]},transition:{duration:1,repeat:3},className:"absolute inset-0 bg-gradient-to-b from-yellow-400/20 via-transparent to-transparent"})]}):null}function RS(){const[e,t]=v.useState([]);v.useEffect(()=>{const s=i=>{const{message:o,type:a="info",duration:c=3e3}=i.detail,u={id:`toast_${Date.now()}_${Math.random()}`,message:o,type:a,duration:c};t(h=>[...h,u]),setTimeout(()=>{t(h=>h.filter(d=>d.id!==u.id))},c)};return window.addEventListener("showToast",s),()=>window.removeEventListener("showToast",s)},[]);const n=s=>{switch(s){case"success":return"from-green-600 to-emerald-600 border-green-400";case"error":return"from-red-600 to-rose-600 border-red-400";case"warning":return"from-yellow-600 to-amber-600 border-yellow-400";case"info":default:return"from-blue-600 to-cyan-600 border-blue-400"}},r=s=>{switch(s){case"success":return"";case"error":return"";case"warning":return"";case"info":default:return""}};return l.jsx("div",{className:"fixed top-4 right-4 z-[9999] flex flex-col gap-2 pointer-events-none",children:l.jsx(ke,{children:e.map(s=>l.jsx(M.div,{initial:{opacity:0,x:100,scale:.8},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:100,scale:.8},className:`bg-gradient-to-r ${n(s.type)} border-2 rounded-lg px-4 py-3 shadow-2xl min-w-[250px] max-w-[400px] pointer-events-auto`,children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("span",{className:"text-white text-xl font-bold",children:r(s.type)}),l.jsx("span",{className:"text-white font-medium flex-1",children:s.message})]})},s.id))})})}function kr(e,t="info",n=3e3){window.dispatchEvent(new CustomEvent("showToast",{detail:{message:e,type:t,duration:n}}))}function IS({onClose:e}){const{t}=Me(),{missions:n,loading:r,claimReward:s,getMissionsStats:i}=j0(),[o,a]=ae.useState(!1),{selectedIndex:c}=Be({itemCount:(n==null?void 0:n.length)||0,onConfirm:g=>{const x=n[g];x&&x.completed&&!x.claimed&&h(x.id)},onBack:e,active:!0,wrap:!0}),u=i(),h=g=>{const x=s(g);x.success?(kr(t("missions.claimSuccess",{reward:x.reward}),"success"),i().allClaimed&&(a(!0),setTimeout(()=>a(!1),3e3))):kr(` ${x.error}`,"error")},d=g=>{switch(g){case"easy":return"text-green-400";case"medium":return"text-yellow-400";case"hard":return"text-red-400";default:return"text-white"}},m=g=>{switch(g){case"easy":return t("missions.easy");case"medium":return t("missions.medium");case"hard":return t("missions.hard");default:return g}};return r?l.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",children:l.jsx("div",{className:"text-white text-xl",children:t("missions.loading")})}):l.jsxs(M.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:e,children:[l.jsxs(M.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},className:"bg-gradient-to-br from-purple-900/95 to-blue-900/95 rounded-2xl p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto border-2 border-white/20 shadow-2xl",onClick:g=>g.stopPropagation(),children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-3xl font-bold text-white flex items-center gap-2",children:t("missions.title")}),l.jsx("p",{className:"text-white/60 text-sm mt-1",children:t("missions.subtitle")})]}),l.jsx("button",{onClick:e,className:"text-white/60 hover:text-white text-2xl transition-colors",children:""})]}),u&&l.jsxs("div",{className:"bg-black/30 rounded-lg p-4 mb-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-white/80",children:t("missions.dailyProgress")}),l.jsx("span",{className:"text-white font-bold",children:t("missions.completedOf",{completed:u.completed,total:u.total})})]}),l.jsxs("div",{className:"flex justify-between items-center mt-2",children:[l.jsx("span",{className:"text-white/80",children:t("missions.rewardsAvailable")}),l.jsxs("span",{className:"text-yellow-400 font-bold flex items-center gap-1",children:[" ",u.claimedRewards,"/",u.totalRewards]})]})]}),l.jsx("div",{className:"space-y-4",children:n.map((g,x)=>{const b=Math.min(g.progress,g.target),k=b/g.target*100;return l.jsxs(M.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:x*.1},className:`bg-black/40 rounded-lg p-4 border-2 ${g.completed?"border-green-500/50":"border-white/10"} ${x===c?"ring-2 ring-yellow-400 ring-offset-2 ring-offset-purple-900":""}`,children:[l.jsxs("div",{className:"flex justify-between items-start mb-2",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx("h3",{className:"text-white font-bold text-lg",children:g.title}),g.completed&&!g.claimed&&l.jsx("span",{className:"text-green-400 text-xl animate-pulse",children:""}),g.claimed&&l.jsx("span",{className:"text-white/40 text-sm",children:t("missions.claimed")})]}),l.jsx("p",{className:"text-white/60 text-sm",children:g.description}),l.jsx("span",{className:`text-xs ${d(g.difficulty)}`,children:m(g.difficulty)})]}),l.jsx("div",{className:"text-right",children:l.jsxs("div",{className:"text-yellow-400 font-bold flex items-center gap-1",children:[l.jsx("span",{className:"text-2xl",children:""}),l.jsx("span",{children:g.reward})]})})]}),l.jsxs("div",{className:"mt-3",children:[l.jsxs("div",{className:"flex justify-between text-sm text-white/60 mb-1",children:[l.jsx("span",{children:t("missions.progress")}),l.jsxs("span",{children:[b,"/",g.target]})]}),l.jsx("div",{className:"w-full bg-gray-700 rounded-full h-3 overflow-hidden",children:l.jsx(M.div,{initial:{width:0},animate:{width:`${k}%`},transition:{duration:.5},className:`h-full ${g.completed?"bg-green-500":"bg-blue-500"}`})})]}),g.completed&&!g.claimed&&l.jsx(M.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>h(g.id),className:"w-full mt-3 bg-green-600 hover:bg-green-500 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:t("missions.claimReward")})]},g.id)})}),l.jsx("div",{className:"mt-6 text-center text-white/40 text-sm",children:t("missions.resetNote")})]}),l.jsx(E0,{trigger:o,message:t("missions.allCompleted"),duration:3e3})]})}function N0(){const[e,t]=v.useState([]),[n,r]=v.useState([]),[s,i]=v.useState(!0);v.useEffect(()=>{try{const h=q.resolve("achievementsService");t(h.getAchievements()),i(!1);const d=()=>{try{const b=q.resolve("playerStatsService").getStats(),k=h.checkAchievements(b);k.length>0&&(t(h.getAchievements()),r(k),window.dispatchEvent(new CustomEvent("achievementsUnlocked",{detail:k})),setTimeout(()=>{r([])},5e3))}catch{}},m=setInterval(d,2e3),g=()=>d();return window.addEventListener("playerStatsUpdated",g),()=>{clearInterval(m),window.removeEventListener("playerStatsUpdated",g)}}catch{i(!1)}},[]);const o=v.useCallback(h=>{try{return q.resolve("achievementsService").getByTier(h)}catch{return[]}},[]),a=v.useCallback(()=>{try{return q.resolve("achievementsService").getUnlocked()}catch{return[]}},[]),c=v.useCallback(()=>{try{return q.resolve("achievementsService").getLocked()}catch{return[]}},[]),u=v.useCallback(()=>{try{return q.resolve("achievementsService").getStats()}catch{return null}},[]);return{achievements:e,newUnlocks:n,loading:s,getAchievementsByTier:o,getUnlocked:a,getLocked:c,getStats:u}}function OS({onClose:e}){const{achievements:t,loading:n,getStats:r,getAchievementsByTier:s}=N0(),{t:i}=Me(),[o,a]=v.useState("all"),c={bronze:"from-amber-700 to-amber-900",silver:"from-gray-400 to-gray-600",gold:"from-yellow-400 to-yellow-600",platinum:"from-cyan-400 to-blue-600"},u={bronze:"",silver:"",gold:"",platinum:""},h=["all",...Object.keys(u)],{selectedIndex:d}=Be({itemCount:h.length,onConfirm:x=>a(h[x]),onBack:e,active:!n,wrap:!0}),m=r(),g=o==="all"?t:s(o);return n?l.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",children:l.jsx("div",{className:"text-white text-xl",children:i("achievements.loading")})}):l.jsx(M.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:e,children:l.jsxs(M.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},className:"bg-gradient-to-br from-indigo-900/95 to-purple-900/95 rounded-2xl p-6 max-w-4xl w-full max-h-[90vh] overflow-y-auto border-2 border-white/20 shadow-2xl",onClick:x=>x.stopPropagation(),children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-3xl font-bold text-white flex items-center gap-2",children:i("achievements.title")}),l.jsx("p",{className:"text-white/60 text-sm mt-1",children:i("achievements.subtitle")})]}),l.jsx("button",{onClick:e,className:"text-white/60 hover:text-white text-2xl transition-colors",children:""})]}),m&&l.jsxs("div",{className:"bg-black/30 rounded-lg p-4 mb-6",children:[l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-2xl font-bold text-white",children:[m.unlocked,"/",m.total]}),l.jsx("div",{className:"text-white/60 text-sm",children:i("achievements.unlocked")})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-2xl font-bold text-green-400",children:[m.percentage,"%"]}),l.jsx("div",{className:"text-white/60 text-sm",children:i("achievements.complete")})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-2xl font-bold text-yellow-400 flex items-center justify-center gap-1",children:[" ",m.earnedRewards.toLocaleString()]}),l.jsx("div",{className:"text-white/60 text-sm",children:i("achievements.earned")})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-2xl font-bold text-white/40 flex items-center justify-center gap-1",children:[" ",m.totalRewards.toLocaleString()]}),l.jsx("div",{className:"text-white/60 text-sm",children:i("achievements.total")})]})]}),l.jsxs("div",{className:"flex justify-around mt-4 pt-4 border-t border-white/10",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-lg",children:""}),l.jsx("div",{className:"text-white/80 text-sm",children:m.byTier.bronze})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-lg",children:""}),l.jsx("div",{className:"text-white/80 text-sm",children:m.byTier.silver})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-lg",children:""}),l.jsx("div",{className:"text-white/80 text-sm",children:m.byTier.gold})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-lg",children:""}),l.jsx("div",{className:"text-white/80 text-sm",children:m.byTier.platinum})]})]})]}),l.jsxs("div",{className:"flex gap-2 mb-4 overflow-x-auto",children:[l.jsx("button",{onClick:()=>a("all"),className:`px-4 py-2 rounded-lg font-bold transition-colors whitespace-nowrap ${o==="all"?"bg-white text-black":"bg-white/20 text-white hover:bg-white/30"} ${d===0?"ring-2 ring-yellow-400 ring-offset-2 ring-offset-indigo-900":""}`,children:i("achievements.filterAll")}),Object.keys(u).map(x=>l.jsxs("button",{onClick:()=>a(x),className:`px-4 py-2 rounded-lg font-bold transition-colors whitespace-nowrap ${o===x?`bg-gradient-to-r ${c[x]} text-white`:"bg-white/20 text-white hover:bg-white/30"} ${d===h.indexOf(x)?"ring-2 ring-yellow-400 ring-offset-2 ring-offset-indigo-900":""}`,children:[u[x]," ",x.charAt(0).toUpperCase()+x.slice(1)]},x))]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:g.map((x,b)=>{const k=x.progress||0,p=x.requirement.value,f=Math.min(k/p*100,100);return l.jsxs(M.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:b*.05},className:`bg-black/40 rounded-lg p-4 border-2 relative overflow-hidden ${x.unlocked?`border-transparent bg-gradient-to-br ${c[x.tier]}`:"border-white/10"}`,children:[x.unlocked&&l.jsx("div",{className:"absolute top-2 right-2 text-3xl",children:""}),l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:"text-4xl",children:u[x.tier]}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:`font-bold text-lg mb-1 ${x.unlocked?"text-white":"text-white/60"}`,children:x.title}),l.jsx("p",{className:`text-sm mb-2 ${x.unlocked?"text-white/90":"text-white/40"}`,children:x.description}),l.jsxs("div",{className:`flex items-center gap-1 text-sm font-bold ${x.unlocked?"text-yellow-300":"text-white/40"}`,children:[" ",x.reward]}),!x.unlocked&&l.jsxs("div",{className:"mt-2",children:[l.jsxs("div",{className:"flex justify-between text-xs text-white/40 mb-1",children:[l.jsx("span",{children:i("achievements.progress")}),l.jsxs("span",{children:[k,"/",p]})]}),l.jsx("div",{className:"w-full bg-gray-700/50 rounded-full h-2",children:l.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${f}%`}})})]}),x.unlocked&&x.unlockedAt&&l.jsx("div",{className:"text-xs text-white/60 mt-2",children:i("achievements.unlockedAt",{date:new Date(x.unlockedAt).toLocaleDateString()})})]})]})]},x.id)})}),g.length===0&&l.jsx("div",{className:"text-center text-white/40 py-8",children:i("achievements.noneInCategory")})]})})}function GS(){const{t:e}=Me(),[t,n]=v.useState([]),[r,s]=v.useState(!1);v.useEffect(()=>{const a=c=>{const u=c.detail;u.some(d=>d.tier==="platinum")&&(s(!0),setTimeout(()=>s(!1),3e3)),u.forEach((d,m)=>{setTimeout(()=>{const g={id:`${d.id}_${Date.now()}`,achievement:d};n(x=>[...x,g]),setTimeout(()=>{n(x=>x.filter(b=>b.id!==g.id))},5e3)},m*500)})};return window.addEventListener("achievementsUnlocked",a),()=>{window.removeEventListener("achievementsUnlocked",a)}},[]);const i={bronze:"",silver:"",gold:"",platinum:""},o={bronze:"from-amber-700 to-amber-900",silver:"from-gray-400 to-gray-600",gold:"from-yellow-400 to-yellow-600",platinum:"from-cyan-400 to-blue-600"};return l.jsxs("div",{className:"fixed top-4 right-4 z-[9999] pointer-events-none",children:[l.jsx(ke,{children:t.map(a=>{const{achievement:c}=a;return l.jsx(M.div,{initial:{opacity:0,x:100,scale:.8},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:100,scale:.8},transition:{type:"spring",stiffness:200,damping:20},className:`bg-gradient-to-r ${o[c.tier]} rounded-lg p-4 shadow-2xl mb-3 border-2 border-white/30 pointer-events-auto max-w-sm`,children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"text-5xl",children:i[c.tier]}),l.jsxs("div",{className:"flex-1",children:[l.jsx("div",{className:"text-white/90 text-sm font-bold mb-1",children:e("achievements.unlockBanner")}),l.jsx("h3",{className:"text-white font-bold text-lg",children:c.title}),l.jsx("p",{className:"text-white/80 text-sm",children:c.description}),l.jsxs("div",{className:"flex items-center gap-1 mt-2 text-yellow-200 font-bold",children:[l.jsx("span",{className:"text-xl",children:""}),l.jsxs("span",{children:["+",c.reward]})]})]})]})},a.id)})}),l.jsx(E0,{trigger:r,message:e("achievements.legendary"),duration:3e3})]})}const A0=({isConnected:e,controllerCount:t,gamepadInfo:n,className:r=""})=>{const{t:s}=Me(),[i,o]=v.useState(!1);return e?l.jsx("div",{className:`fixed top-4 right-4 z-50 ${r}`,children:l.jsxs(M.div,{initial:{opacity:0,scale:.8,x:20},animate:{opacity:1,scale:1,x:0},exit:{opacity:0,scale:.8,x:20},transition:{duration:.3},className:"bg-gray-900/90 backdrop-blur-sm text-white p-3 rounded-lg border border-green-500/30 shadow-lg",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(M.div,{animate:{rotate:[0,-10,10,-10,0],scale:[1,1.1,1]},transition:{duration:2,repeat:1/0,repeatDelay:3},children:""}),l.jsxs("div",{className:"text-sm",children:[l.jsx("div",{className:"text-green-400 font-semibold",children:t===1?s("gamepad.connected",{n:t}):s("gamepad.connectedPlural",{n:t})}),l.jsx("div",{className:"text-gray-300 text-xs",children:s("gamepad.ready")})]}),l.jsx(M.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>o(!i),className:"ml-2 text-gray-400 hover:text-white transition-colors",title:s("gamepad.showControls"),children:l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"})})})]}),l.jsx(ke,{children:i&&l.jsx(M.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},className:"mt-3 pt-3 border-t border-gray-700",children:l.jsxs("div",{className:"text-xs text-gray-300 space-y-1",children:[l.jsx("div",{className:"font-semibold text-white mb-2",children:s("gamepad.controlsTitle")}),l.jsxs("div",{className:"grid grid-cols-2 gap-1 text-xs",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-yellow-400",children:"D-Pad  "}),l.jsx("div",{className:"text-gray-400",children:s("gamepad.move")})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-yellow-400",children:"D-Pad "}),l.jsx("div",{className:"text-gray-400",children:s("gamepad.accelerate")})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-yellow-400",children:"D-Pad "}),l.jsx("div",{className:"text-gray-400",children:s("gamepad.hardDrop")})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-yellow-400",children:"A/X/Y"}),l.jsx("div",{className:"text-gray-400",children:s("gamepad.rotateRight")})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-yellow-400",children:"B"}),l.jsx("div",{className:"text-gray-400",children:s("gamepad.rotateLeft")})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-yellow-400",children:"L/R"}),l.jsx("div",{className:"text-gray-400",children:s("gamepad.hold")})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-yellow-400",children:"Start"}),l.jsx("div",{className:"text-gray-400",children:s("gamepad.pause")})]})]}),l.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-700",children:[l.jsx("div",{className:"text-green-400 text-xs",children:s("gamepad.analogNote")}),l.jsx("div",{className:"text-blue-400 text-xs",children:s("gamepad.triggerNote")}),l.jsx("div",{className:"text-purple-400 text-xs",children:s("gamepad.backNote")})]}),n&&(Array.isArray(n)?n:[n]).length>0&&l.jsx("div",{className:"mt-2 pt-2 border-t border-gray-700",children:l.jsx("div",{className:"text-xs text-gray-400",children:(Array.isArray(n)?n:[n]).map((a,c)=>l.jsxs("div",{className:"mb-1",children:[l.jsx("div",{className:"font-semibold text-white",children:s("gamepad.controllerLabel",{n:a.index+1})}),l.jsx("div",{className:"text-gray-300 truncate",children:a.id.length>30?a.id.substring(0,30)+"...":a.id}),l.jsxs("div",{className:"flex gap-2 text-xs",children:[l.jsx("span",{className:"text-blue-400",children:s("gamepad.buttons",{n:a.buttons})}),l.jsx("span",{className:"text-green-400",children:s("gamepad.axes",{n:a.axes})}),a.vibration&&l.jsx("span",{className:"text-purple-400",children:s("gamepad.vibration")})]})]},c))})})]})})})]})}):null},rs={DPAD_UP:12,DPAD_DOWN:13,DPAD_LEFT:14,DPAD_RIGHT:15,FACE_BUTTON_BOTTOM:0,FACE_BUTTON_RIGHT:1,FACE_BUTTON_LEFT:2,FACE_BUTTON_TOP:3,BUMPER_LEFT:4,BUMPER_RIGHT:5,TRIGGER_LEFT:6,TRIGGER_RIGHT:7,BUTTON_BACK:8,BUTTON_START:9,STICK_LEFT:10,STICK_RIGHT:11},uu=(e=null)=>{const[t,n]=v.useState([]),[r,s]=v.useState(!1),i=v.useRef({}),o=v.useRef(33),a=v.useRef({}),c=v.useRef({}),u=v.useRef(167),h=.5,d=.5;v.useEffect(()=>{const k=y=>{n(w=>w.some(S=>S.index===y.gamepad.index)?w:[...w,y.gamepad]),s(!0);try{y.gamepad.vibrationActuator&&y.gamepad.vibrationActuator.playEffect("dual-rumble",{duration:200,strongMagnitude:.5,weakMagnitude:.5})}catch{}},p=y=>{n(S=>S.filter(C=>C.index!==y.gamepad.index));const w=navigator.getGamepads().filter(S=>S&&S.connected);s(w.length>0)};return window.addEventListener("gamepadconnected",k),window.addEventListener("gamepaddisconnected",p),(()=>{const y=navigator.getGamepads(),w=Array.from(y).filter(S=>S&&S.connected);w.length>0&&(n(w),s(!0))})(),()=>{window.removeEventListener("gamepadconnected",k),window.removeEventListener("gamepaddisconnected",p)}},[]);const m=v.useCallback((k,p,f)=>{const y=f??d;return Math.abs(k)<y&&Math.abs(p)<y?null:Math.abs(k)>Math.abs(p)?k>0?"right":"left":p>0?"down":"up"},[]),g=v.useCallback(()=>{var O,Q,R,z;if(!r||!e)return;const k=navigator.getGamepads(),p=Array.from(k).find(F=>F&&F.connected);if(!p)return;const f=Date.now(),{movePiece:y,rotatePiece:w,rotatePieceLeft:S,hardDrop:C,holdPiece:P,pause:T,resume:j,togglePause:E}=e,L=zl();if([{button:L.pause,action:()=>{E?E():T&&T()}},{button:L.backToMenu,action:()=>{e.backToMenu&&e.backToMenu()}}].forEach(({button:F,action:U})=>{var X;const K=(X=p.buttons[F])==null?void 0:X.pressed,$=a.current[F];a.current[F]=K,K&&!$&&(U(),x(p,F))}),!y)return;const N=((O=e.isGameOver)==null?void 0:O.call(e))??!1,_=(F,U)=>{const K=`movement_${F}`,$=i.current[K]||0,X=c.current[K]||!1;if(U&&!X){c.current[K]=!0,c.current[K+"_start"]=f,i.current[K]=f,se(F);return}if(U&&X){const J=f-(c.current[K+"_start"]||$)<u.current?u.current:o.current;f-$>=J&&(i.current[K]=f,se(F));return}!U&&X&&(c.current[K]=!1,c.current[K+"_start"]=0)},se=F=>{e.movePiece&&e.movePiece(F)};if(!N){const F=m(p.axes[0],p.axes[1]),U=((Q=p.buttons[rs.DPAD_LEFT])==null?void 0:Q.pressed)||F==="left",K=((R=p.buttons[rs.DPAD_RIGHT])==null?void 0:R.pressed)||F==="right",$=((z=p.buttons[rs.DPAD_DOWN])==null?void 0:z.pressed)||F==="down";_("left",U),_("right",K),_("down",$);const X={},Z=new Map,J=(oe,Ee,xe=!1)=>{oe!=null&&!Z.has(oe)&&Z.set(oe,{action:Ee,isTrigger:xe||oe===6||oe===7})};J(L.rotateCW,()=>w==null?void 0:w()),J(L.rotateCCW,()=>S==null?void 0:S()),J(L.hardDrop,()=>C==null?void 0:C()),J(L.hold,()=>P==null?void 0:P()),Z.has(2)||J(2,()=>w==null?void 0:w()),Z.has(3)||J(3,()=>w==null?void 0:w()),Z.has(4)||J(4,()=>P==null?void 0:P()),Z.has(5)||J(5,()=>P==null?void 0:P()),Z.has(6)||J(6,()=>S==null?void 0:S(),!0),Z.has(7)||J(7,()=>w==null?void 0:w(),!0),Array.from(Z.entries()).map(([oe,{action:Ee,isTrigger:xe}])=>({button:oe,action:Ee,isTrigger:xe})).forEach(({button:oe,action:Ee,isTrigger:xe})=>{var B,I;const pt=xe?(((B=p.buttons[oe])==null?void 0:B.value)??0)>h:(I=p.buttons[oe])==null?void 0:I.pressed,Dt=a.current[oe];X[oe]=pt,pt&&!Dt&&(Ee(),x(p,oe))});const We="stick_up_hardDrop";F==="up"&&!a.current[We]&&(C==null||C(),x(p,rs.DPAD_UP)),X[We]=F==="up",a.current={...a.current,...X}}},[r,m,e]),x=v.useCallback((k,p)=>{try{if(k.vibrationActuator){const f=p===rs.DPAD_UP;k.vibrationActuator.playEffect("dual-rumble",{duration:f?80:50,strongMagnitude:f?.3:.1,weakMagnitude:f?.15:.05})}}catch{}},[]),b=v.useCallback(()=>{const k=navigator.getGamepads(),p=Array.from(k).filter(f=>f&&f.connected);return p.length===0?[]:p.map(f=>({id:f.id,index:f.index,connected:f.connected,buttons:f.buttons.length,axes:f.axes.length,vibration:!!f.vibrationActuator}))},[]);return{isGamepadActive:r,connectedGamepads:t,processGamepadInput:g,getGamepadInfo:b,controllerCount:t.length}};function FS({mode:e,aiDifficulty:t,ai1Difficulty:n,ai2Difficulty:r,onExit:s}){var A,N,_,se,O,Q,R,z,F,U,K,$,X,Z,J,he,We,oe,Ee,xe,pt,Dt;const[i,o]=v.useState(null),[a,c]=v.useState(null),[u,h]=v.useState(null),[d,m]=v.useState(0),[g,x]=v.useState(0),b=v.useRef({p1:null,p2:null,ai:null,ai1:null,ai2:null}),k=v.useRef(0),p=v.useRef(null),f=v.useRef(null);v.useEffect(()=>{const B=new Zn(new er,new tr,null,new Tn),I=new Zn(new er,new tr,null,new Tn);let te=null,W=null,ee=null;if(e==="vsAI")try{te=new Ss,te.setDifficulty(t||"medium"),t==="expert"&&(I.score._fixedLevel=1)}catch{}else e==="aiVsAI"&&(W=new Ss,W.setDifficulty(n||"expert"),W.setVisualMode(!0),ee=new Ss,ee.setDifficulty(r||"expert"),ee.setVisualMode(!0),(n||"expert")==="expert"&&(B.score._fixedLevel=1),(r||"expert")==="expert"&&(I.score._fixedLevel=1));return B.initializeGame(),B.isPlaying=!0,I.initializeGame(),I.isPlaying=!0,e==="vsAI"&&t==="expert"?(I._lockDelayMax=2e3,I._lockDelayMaxResets=50):e==="aiVsAI"&&((n||"expert")==="expert"&&(B._lockDelayMax=2e3,B._lockDelayMaxResets=50),(r||"expert")==="expert"&&(I._lockDelayMax=2e3,I._lockDelayMaxResets=50)),b.current={p1:B,p2:I,ai:te,ai1:W,ai2:ee},o(B.getGameState()),c(I.getGameState()),()=>{p.current&&cancelAnimationFrame(p.current)}},[e,t,n,r]),v.useEffect(()=>{const B=I=>{var mu,fu;k.current||(k.current=I);const te=I-k.current;k.current=I;const{p1:W,p2:ee,ai:kt,ai1:Pt,ai2:Mn}=b.current;if(!W||!ee){p.current=requestAnimationFrame(B);return}if(W.gameOver||ee.gameOver){f.current||(W.gameOver&&!ee.gameOver?f.current="player2":!W.gameOver&&ee.gameOver?f.current="player1":f.current=(((mu=W.score)==null?void 0:mu.points)||0)>=(((fu=ee.score)==null?void 0:fu.points)||0)?"player1":"player2",h(f.current)),W.gameOver||(W.gameOver=!0,W._markDirty()),ee.gameOver||(ee.gameOver=!0,ee._markDirty()),W.isDirty&&(o(W.getGameState()),W.clearDirty()),ee.isDirty&&(c(ee.getGameState()),ee.clearDirty());return}W.isPaused||W.updateGame(te),ee.isPaused||ee.updateGame(te);const du=W.consumeAttack();du>0&&!ee.gameOver&&ee.receiveGarbage(du);const hu=ee.consumeAttack();hu>0&&!W.gameOver&&W.receiveGarbage(hu);const zo=(Uo,Yt)=>{if(!(!Uo||Yt.gameOver))try{const F0=e==="aiVsAI"?3:Uo._isExpert?2:1;for(let pu=0;pu<F0;pu++){const $o=Uo.decideNextMove(Yt.getGameState());if(!$o)break;switch($o.action){case"left":Yt.movePiece("left");break;case"right":Yt.movePiece("right");break;case"rotate":Yt.rotatePiece();break;case"down":Yt.movePiece("down");break;case"drop":Yt.hardDrop();break;case"hold":Yt.holdPiece();break}if($o.action==="drop")break}}catch{}};e==="aiVsAI"?(zo(Pt,W),zo(Mn,ee)):e==="vsAI"&&zo(kt,ee),W.isDirty&&(o(W.getGameState()),m(W.pendingGarbage),W.clearDirty()),ee.isDirty&&(c(ee.getGameState()),x(ee.pendingGarbage),ee.clearDirty()),p.current=requestAnimationFrame(B)};return p.current=requestAnimationFrame(B),()=>{p.current&&cancelAnimationFrame(p.current)}},[e]),v.useEffect(()=>{if(u||e==="aiVsAI")return;const B=I=>{const te=b.current.p1;if(!(!te||te.gameOver))switch(I.key){case"ArrowLeft":I.preventDefault(),te.movePiece("left");break;case"ArrowRight":I.preventDefault(),te.movePiece("right");break;case"ArrowDown":I.preventDefault(),te.movePiece("down");break;case"ArrowUp":I.preventDefault(),te.rotatePiece();break;case"z":case"Z":te.rotatePiece("left");break;case"c":case"C":case"Shift":te.holdPiece();break;case" ":I.preventDefault(),te.hardDrop();break}};return window.addEventListener("keydown",B),()=>window.removeEventListener("keydown",B)},[u,e]);const y=ae.useMemo(()=>{const B={backToMenu:s,togglePause:()=>{},isGameOver:()=>{const I=b.current.p1;return(I==null?void 0:I.gameOver)??!0}};return u||e==="aiVsAI"?B:{...B,movePiece:I=>{const te=b.current.p1;te&&!te.gameOver&&te.movePiece(I)},rotatePiece:()=>{const I=b.current.p1;I&&!I.gameOver&&I.rotatePiece()},rotatePieceLeft:()=>{const I=b.current.p1;I&&!I.gameOver&&I.rotatePiece("left")},hardDrop:()=>{const I=b.current.p1;I&&!I.gameOver&&I.hardDrop()},holdPiece:()=>{const I=b.current.p1;I&&!I.gameOver&&I.holdPiece()}}},[u,e,s]),{isGamepadActive:w,controllerCount:S,processGamepadInput:C,getGamepadInfo:P}=uu(y);v.useEffect(()=>{if(!w)return;const B=setInterval(()=>C(),16);return()=>clearInterval(B)},[w,C]);const T=v.useCallback(()=>{var kt,Pt,Mn;const{p1:B,p2:I,ai:te,ai1:W,ai2:ee}=b.current;B&&(B.initializeGame(),B.isPlaying=!0),I&&(I.initializeGame(),I.isPlaying=!0),te&&((kt=te.reset)==null||kt.call(te)),W&&((Pt=W.reset)==null||Pt.call(W)),ee&&((Mn=ee.reset)==null||Mn.call(ee)),f.current=null,k.current=0,h(null),m(0),x(0),B&&o(B.getGameState()),I&&c(I.getGameState())},[]),{selectedIndex:j}=Be({itemCount:2,onConfirm:B=>{B===0?T():s()},onBack:s,active:!!u,wrap:!0}),E=ae.useMemo(()=>{var B;if(!(i!=null&&i.currentPiece)||i!=null&&i.gameOver)return null;try{return(B=b.current.p1)==null?void 0:B.getDropPreview()}catch{return null}},[(N=(A=i==null?void 0:i.currentPiece)==null?void 0:A.position)==null?void 0:N.x,(se=(_=i==null?void 0:i.currentPiece)==null?void 0:_.position)==null?void 0:se.y,(O=i==null?void 0:i.currentPiece)==null?void 0:O.type,(Q=i==null?void 0:i.currentPiece)==null?void 0:Q.rotationState]),L=ae.useMemo(()=>{var B;if(!(a!=null&&a.currentPiece)||a!=null&&a.gameOver)return null;try{return(B=b.current.p2)==null?void 0:B.getDropPreview()}catch{return null}},[(z=(R=a==null?void 0:a.currentPiece)==null?void 0:R.position)==null?void 0:z.x,(U=(F=a==null?void 0:a.currentPiece)==null?void 0:F.position)==null?void 0:U.y,(K=a==null?void 0:a.currentPiece)==null?void 0:K.type,($=a==null?void 0:a.currentPiece)==null?void 0:$.rotationState]);return!i||!a?l.jsx("div",{className:"h-screen flex items-center justify-center bg-gradient-to-br from-purple-900 to-blue-900",children:l.jsx("div",{className:"text-white text-2xl",children:"Carregando multiplayer..."})}):l.jsxs("div",{className:"h-screen flex flex-col items-center bg-gradient-to-br from-purple-900 to-blue-900 p-2 overflow-hidden",children:[w&&l.jsx(A0,{isConnected:w,controllerCount:S,gamepadInfo:P()}),l.jsxs("div",{className:"flex justify-between items-center w-full max-w-5xl mb-2",children:[l.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-white",children:e==="aiVsAI"?" IA vs IA (Debug)":e==="vsAI"?" vs IA":" 1v1 Local"}),l.jsx("button",{onClick:s,className:"bg-red-600 hover:bg-red-700 text-white px-3 py-1.5 rounded-lg transition-colors text-sm font-bold",children:" Voltar"})]}),l.jsxs("div",{className:"flex gap-2 sm:gap-4 items-start justify-center flex-wrap",children:[l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("div",{className:"bg-blue-600 text-white px-4 py-1 rounded-t-lg font-bold text-sm sm:text-base",children:e==="aiVsAI"?` IA1 (${(n==null?void 0:n.toUpperCase())||"EXPERT"})`:e==="vsAI"?" VOC":" P1"}),l.jsx("div",{className:"bg-black/40 p-2 rounded-b-lg",children:l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx(Yn,{heldPiece:i.heldPiece,canHold:i.canHold}),e!=="aiVsAI"&&l.jsxs("div",{className:"text-white/60 text-[10px] leading-tight",children:[" mover",l.jsx("br",{})," rotacionar",l.jsx("br",{}),"C segurar",l.jsx("br",{}),"Espao dropar"]})]}),l.jsx(Pn,{board:i.board,currentPiece:i.currentPiece,dropPreview:E,gameOver:i.gameOver}),d>0&&l.jsx(Ih,{count:d}),l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx(Jn,{pieces:i.nextPieces||[]}),l.jsx(Xn,{score:((X=i.score)==null?void 0:X.points)||0,level:((Z=i.score)==null?void 0:Z.level)||1,lines:((J=i.score)==null?void 0:J.lines)||0,combo:((he=i.score)==null?void 0:he.combo)||0})]})]})})]}),l.jsx("div",{className:"flex items-center justify-center self-center",children:l.jsx("div",{className:"bg-yellow-500 text-black font-bold text-2xl sm:text-3xl px-4 py-2 rounded-full shadow-2xl animate-pulse",children:"VS"})}),l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("div",{className:"bg-red-600 text-white px-4 py-1 rounded-t-lg font-bold text-sm sm:text-base",children:e==="aiVsAI"?` IA2 (${(r==null?void 0:r.toUpperCase())||"EXPERT"})`:e==="vsAI"?` IA (${(t==null?void 0:t.toUpperCase())||"MEDIUM"})`:" P2"}),l.jsx("div",{className:"bg-black/40 p-2 rounded-b-lg",children:l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx(Yn,{heldPiece:a.heldPiece,canHold:a.canHold}),e==="1v1"&&l.jsxs("div",{className:"text-white/60 text-[10px] leading-tight",children:["Setas mover",l.jsx("br",{})," rotacionar",l.jsx("br",{}),"Ctrl segurar",l.jsx("br",{}),"Enter dropar"]})]}),l.jsx(Pn,{board:a.board,currentPiece:a.currentPiece,dropPreview:L,gameOver:a.gameOver}),g>0&&l.jsx(Ih,{count:g}),l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx(Jn,{pieces:a.nextPieces||[]}),l.jsx(Xn,{score:((We=a.score)==null?void 0:We.points)||0,level:((oe=a.score)==null?void 0:oe.level)||1,lines:((Ee=a.score)==null?void 0:Ee.lines)||0,combo:((xe=a.score)==null?void 0:xe.combo)||0})]})]})})]})]}),l.jsx(ke,{children:u&&l.jsx(M.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/90 flex items-center justify-center z-50",children:l.jsxs(M.div,{initial:{scale:.8,y:50},animate:{scale:1,y:0},className:"bg-gradient-to-br from-yellow-500 to-orange-600 rounded-2xl p-12 text-center",children:[l.jsx("div",{className:"text-8xl mb-4",children:u==="player1"||e==="aiVsAI"?"":""}),l.jsx("h2",{className:"text-5xl font-bold text-white mb-4",children:e==="aiVsAI"?u==="player1"?"IA 1 VENCEU!":"IA 2 VENCEU!":u==="player1"?"VITRIA!":"DERROTA!"}),l.jsx("p",{className:"text-2xl text-white/80 mb-8",children:e==="aiVsAI"?`${u==="player1"?n==null?void 0:n.toUpperCase():r==null?void 0:r.toUpperCase()}  superior!`:u==="player1"?e==="vsAI"?"Voc venceu a IA!":"Player 1 venceu!":e==="vsAI"?"IA venceu!":"Player 2 venceu!"}),l.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-8 text-white",children:[l.jsxs("div",{className:"bg-black/30 rounded-lg p-4",children:[l.jsx("div",{className:"text-sm opacity-60",children:e==="aiVsAI"?`IA1 (${n})`:"Player 1"}),l.jsx("div",{className:"text-3xl font-bold",children:(((pt=i.score)==null?void 0:pt.points)||0).toLocaleString()})]}),l.jsxs("div",{className:"bg-black/30 rounded-lg p-4",children:[l.jsx("div",{className:"text-sm opacity-60",children:e==="aiVsAI"?`IA2 (${r})`:e==="vsAI"?"IA":"Player 2"}),l.jsx("div",{className:"text-3xl font-bold",children:(((Dt=a.score)==null?void 0:Dt.points)||0).toLocaleString()})]})]}),l.jsxs("div",{className:"flex gap-4",children:[l.jsx("button",{onClick:T,className:`bg-green-600 hover:bg-green-700 text-white px-8 py-3 rounded-lg font-bold text-xl transition-colors ${j===0?"ring-2 ring-yellow-400 ring-offset-2 ring-offset-orange-600":""}`,children:" Jogar Novamente"}),l.jsx("button",{onClick:s,className:`bg-gray-700 hover:bg-gray-800 text-white px-8 py-3 rounded-lg font-bold text-xl transition-colors ${j===1?"ring-2 ring-yellow-400 ring-offset-2 ring-offset-orange-600":""}`,children:" Menu"})]})]})})})]})}function Ih({count:e}){const n=Math.min(e,20);return l.jsx("div",{className:"flex flex-col-reverse justify-end w-3 rounded overflow-hidden",style:{height:"calc(var(--cell) * 22 + 22px)"},children:Array.from({length:n},(r,s)=>l.jsx("div",{className:"w-full",style:{height:`${100/20}%`,backgroundColor:e>8?"#ef4444":e>4?"#f59e0b":"#ef4444",opacity:.7+s/n*.3}},s))})}class VS{constructor(){this._actionQueue=[],this._lastPieceType=null,this._holdCooldown=0,this._comboCount=0,this.thinkingTime=0,this.lastDecision=0}setDifficulty(){}decideNextMove(t){var d;const n=Date.now();if(n-this.lastDecision<this.thinkingTime)return null;this.lastDecision=n;const{currentPiece:r,board:s,heldPiece:i,canHold:o}=t;if(!r||!s)return null;const a=r.type;if(a!==this._lastPieceType&&(this._lastPieceType=a,this._actionQueue=[],this._holdCooldown>0&&this._holdCooldown--),this._actionQueue.length>0)return this._actionQueue.shift();const c=s.length,u=((d=s[0])==null?void 0:d.length)||10,h=this._findBestMove(r,s,c,u);if(o&&this._holdCooldown<=0&&i){const m=this._findBestMove(i,s,c,u);if(m&&(!h||m.score>h.score+500))return this._holdCooldown=1,{action:"hold"}}return!h&&o&&this._holdCooldown<=0?(this._holdCooldown=1,{action:"hold"}):(h?this._actionQueue=this._buildActionSequence(r,h.rotations,h.targetX):this._actionQueue=[{action:"drop"}],this._actionQueue.shift()||{action:"drop"})}_findBestMove(t,n,r,s){let i=-1/0,o=null;for(let a=0;a<4;a++){const c=this._rotateShape(t.shape,a),u=c[0].length;for(let h=-1;h<=s-u+1;h++){const d=this._findLandingRow(c,n,h,r,s);if(d==null||d<0)continue;const m=this._placeOnBoard(c,n,h,d);if(!m)continue;const g=this._evaluate(m,n,d);g>i&&(i=g,o={rotations:a,targetX:h,score:g})}}return o}_evaluate(t,n,r){const s=t.length,i=t[0].length;let o=0;const a=this._countCompleteLines(t);a===1&&(o+=1e4),a===2&&(o+=25e3),a===3&&(o+=5e4),a>=4&&(o+=1e5);const c=this._removeCompleteLines(t);let u=0,h=0;for(let f=0;f<i;f++){let y=!1,w=0;for(let S=0;S<s;S++)c[S][f]!=null?(y=!0,w++):y&&(u++,h+=w)}o-=u*1e4,o-=h*1e3;const d=[];for(let f=0;f<i;f++){let y=0;for(let w=0;w<s;w++)if(c[w][f]!=null){y=s-w;break}d.push(y)}const m=Math.max(...d),g=d.reduce((f,y)=>f+y,0);o-=g*50,o-=m*100,m>12&&(o-=(m-12)*(m-12)*500),m>16&&(o-=1e5);let x=0;for(let f=0;f<i-1;f++)f===i-2?x+=Math.abs(d[f]-d[f+1])*.3:x+=Math.abs(d[f]-d[f+1]);o-=x*200;let b=0;for(let f=0;f<s;f++)if(c[f].filter(w=>w!=null).length!==0){for(let w=0;w<i-1;w++){const S=c[f][w]!=null,C=c[f][w+1]!=null;S!==C&&b++}c[f][0]==null&&b++,c[f][i-1]==null&&b++}o-=b*100;let k=0;for(let f=0;f<i;f++){for(let y=0;y<s-1;y++){const w=c[y][f]!=null,S=c[y+1][f]!=null;w!==S&&k++}c[s-1][f]==null&&k++}o-=k*80;const p=i-1;if(d[p]<d[p-1]){const f=d[p-1]-d[p];f>=1&&f<=4&&m<=12&&(o+=f*300)}for(let f=0;f<s;f++){const y=c[f].filter(w=>w!=null).length;y===9&&(o+=500),y===8&&(o+=200)}return o-=r>0?0:(s-r)*30,m>14&&(o+=a*5e4),o}_buildActionSequence(t,n,r){var u;const s=[],i=n%4;for(let h=0;h<i;h++)s.push({action:"rotate"});const o=((u=t.position)==null?void 0:u.x)??3,a=r-o,c=a>0?"right":"left";for(let h=0;h<Math.abs(a);h++)s.push({action:c});return s.push({action:"drop"}),s}_rotateShape(t,n){let r=t;for(let s=0;s<n%4;s++)r=r[0].map((i,o)=>r.map(a=>a[o]).reverse());return r}_findLandingRow(t,n,r,s,i){const o=t.length;for(let a=-o;a<s;a++)if(this._collides(t,n,r,a+1,s,i))return a;return s-o}_collides(t,n,r,s,i,o){for(let a=0;a<t.length;a++)for(let c=0;c<t[0].length;c++){if(!t[a][c])continue;const u=r+c,h=s+a;if(u<0||u>=o||h>=i||h>=0&&n[h][u]!=null)return!0}return!1}_placeOnBoard(t,n,r,s){const i=n.length,o=n[0].length,a=n.map(c=>[...c]);for(let c=0;c<t.length;c++)for(let u=0;u<t[0].length;u++){if(!t[c][u])continue;const h=r+u,d=s+c;if(h<0||h>=o||d<0||d>=i||a[d][h]!=null)return null;a[d][h]=1}return a}_removeCompleteLines(t){const n=t[0].length,r=t.filter(s=>!s.every(i=>i!=null));for(;r.length<t.length;)r.unshift(new Array(n).fill(null));return r}_countCompleteLines(t){return t.filter(n=>n.every(r=>r!=null)).length}_countHoles(t){let n=0;const r=t[0].length;for(let s=0;s<r;s++){let i=!1;for(let o=0;o<t.length;o++)t[o][s]!=null?i=!0:i&&n++}return n}_getMaxHeight(t){var s;const n=t.length,r=((s=t[0])==null?void 0:s.length)||10;for(let i=0;i<n;i++)for(let o=0;o<r;o++)if(t[i][o]!=null)return n-i;return 0}}const BS=50;function HS(e){const[t,n]=v.useState(null),[r,s]=v.useState({lines:0,combos:0,tetrises:0,maxCombo:0}),[i,o]=v.useState(!1),[a,c]=v.useState(!1),u=v.useRef(null),h=v.useRef(null),d=v.useRef(null),m=v.useRef(0),g=v.useRef(0),x=v.useRef({lines:0,combos:0,tetrises:0,maxCombo:0,currentCombo:0}),b=v.useCallback(()=>{const p=new Zn(new er,new tr,null,new Tn);p.initializeGame(),p.isPlaying=!0;const f=new VS;u.current=p,h.current=f,g.current=0,m.current=0,x.current.currentCombo=0,n(p.getGameState()),c(!0)},[]);v.useEffect(()=>{if(!e){d.current&&cancelAnimationFrame(d.current),u.current=null,h.current=null,c(!1),n(null),s({lines:0,combos:0,tetrises:0,maxCombo:0}),x.current={lines:0,combos:0,tetrises:0,maxCombo:0,currentCombo:0};return}b();const p=({linesCleared:y})=>{const w=x.current;w.lines+=y,w.currentCombo++,w.currentCombo>1&&(w.combos++,w.currentCombo>w.maxCombo&&(w.maxCombo=w.currentCombo),o(!0),setTimeout(()=>o(!1),600)),y>=4&&w.tetrises++,s({lines:w.lines,combos:w.combos,tetrises:w.tetrises,maxCombo:w.maxCombo})},f=({linesCleared:y})=>{y===0&&(x.current.currentCombo=0)};return G.on(V.LINE_CLEARED,p),G.on(V.PIECE_PLACED,f),()=>{d.current&&cancelAnimationFrame(d.current),G.off(V.LINE_CLEARED,p),G.off(V.PIECE_PLACED,f),u.current=null,h.current=null}},[e,b]),v.useEffect(()=>{if(!a||!u.current||!e)return;const p=f=>{m.current||(m.current=f);let y=f-m.current;m.current=f,y>200&&(y=16);const w=u.current,S=h.current;if(!(!w||!S)){if(w.gameOver){b(),d.current=requestAnimationFrame(p);return}if(w.isPlaying&&!w.isPaused&&w.updateGame(y),g.current+=y,g.current>=BS){g.current=0;try{const C=w.getGameState(),P=S.decideNextMove(C);if(P)switch(P.action){case"left":w.movePiece("left");break;case"right":w.movePiece("right");break;case"rotate":w.rotatePiece();break;case"rotateLeft":w.rotatePieceLeft();break;case"down":w.movePiece("down");break;case"drop":w.hardDrop();break;case"hold":w.holdPiece();break}n(w.getGameState())}catch{}}d.current=requestAnimationFrame(p)}};return d.current=requestAnimationFrame(p),()=>{d.current&&cancelAnimationFrame(d.current)}},[a,e,b]);const k=v.useCallback(()=>{var p;try{return((p=u.current)==null?void 0:p.getDropPreview())||null}catch{return null}},[]);return{gameState:t,stats:r,comboFlash:i,isRunning:a,getDropPreview:k}}function zS({onClose:e}){const{gameState:t,stats:n,comboFlash:r,getDropPreview:s}=HS(!0),i=v.useCallback(()=>e(),[e]),{selectedIndex:o}=Be({itemCount:1,onConfirm:i,onBack:i,active:!0}),a=v.useMemo(()=>s(),[t,s]);if(!t)return l.jsx("div",{className:"h-screen bg-gradient-to-b from-slate-950 via-violet-950 to-slate-950 flex items-center justify-center overflow-hidden",children:l.jsx("p",{className:"text-white/50 animate-pulse",children:"Preparando IA Expert..."})});const c=t.score;return l.jsxs("div",{className:"h-screen bg-gradient-to-b from-slate-950 via-violet-950 to-slate-950 flex flex-col overflow-hidden select-none",children:[l.jsx("div",{className:"absolute inset-0 pointer-events-none overflow-hidden",children:l.jsx("div",{className:"absolute top-1/3 left-1/2 -translate-x-1/2 w-[500px] h-[500px] bg-cyan-600/10 rounded-full blur-[120px]"})}),l.jsxs("div",{className:"flex items-center justify-between px-3 py-1.5 bg-black/30 backdrop-blur-sm border-b border-white/10 shrink-0 relative z-10",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(M.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:e,className:`bg-white/15 hover:bg-white/25 text-white p-1.5 rounded-lg transition-colors ${o===0?"ring-2 ring-yellow-400":""}`,children:l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"})})}),l.jsx("span",{className:"text-sm font-bold text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-400",children:" Cat Tetris AI"})]}),l.jsxs("div",{className:`flex items-center gap-3 text-xs px-3 py-1 rounded-full transition-colors duration-300 ${r?"bg-cyan-500/30 text-cyan-300":"text-white/60"}`,children:[l.jsxs("span",{className:"font-bold",children:[n.lines," linhas"]}),l.jsxs("span",{children:["T:",n.tetrises]}),l.jsxs("span",{children:["C:",n.combos]}),l.jsxs("span",{children:["Max:",n.maxCombo]})]}),l.jsxs("div",{className:"text-xs text-white/50",children:[l.jsx("span",{className:"text-yellow-400 font-bold",children:((c==null?void 0:c.points)||0).toLocaleString()}),l.jsxs("span",{className:"ml-2",children:["Nv.",(c==null?void 0:c.level)||1]})]})]}),l.jsx(ke,{children:r&&l.jsx(M.div,{initial:{opacity:0,scale:.7,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:1.2,y:-20},transition:{duration:.4,ease:"easeOut"},className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-50 pointer-events-none",children:l.jsx("div",{className:"text-5xl font-black text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 via-blue-400 to-yellow-300 drop-shadow-[0_0_30px_rgba(34,211,238,0.7)]",children:"COMBO!"})})}),l.jsx("div",{className:"flex-1 flex items-center justify-center overflow-hidden p-2 relative z-10",children:l.jsxs("div",{className:"flex gap-2 justify-center items-start",children:[l.jsx(Yn,{heldPiece:t.heldPiece,canHold:t.canHold}),l.jsx(Pn,{board:t.board,currentPiece:t.currentPiece,dropPreview:a,gameOver:t.gameOver}),l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx(Jn,{pieces:t.nextPieces||[]}),l.jsx(Xn,{score:(c==null?void 0:c.points)||0,level:(c==null?void 0:c.level)||1,lines:(c==null?void 0:c.lines)||0,combo:(c==null?void 0:c.combo)||0})]})]})})]})}const Hr=10,zs=20,Oh=["I","O","T","S","Z","J","L"],un={I:"#00f5ff",O:"#ffff00",T:"#a000f0",S:"#00f000",Z:"#f00000",J:"#0000f0",L:"#ff7f00",G:"#888888"},M0=[{id:"tss",name:"T-Spin Single",emoji:"",desc:"O T-Spin mais simples  limpa 1 linha",board:ar(18,["GGG..GGGGG","GGG...GGGG"]),queue:["T"],isDefault:!0},{id:"tsd-right",name:"T-Spin Double (Direita)",emoji:"",desc:"O clssico TSD  limpa 2 linhas",board:ar(17,["GGG..GGGGG","GGG...GGGG","GGGG.GGGGG"]),queue:["T"],isDefault:!0},{id:"tsd-left",name:"T-Spin Double (Esquerda)",emoji:"",desc:"TSD espelhado  limpa 2 linhas",board:ar(17,["GGGGG..GGG","GGGG...GGG","GGGGG.GGGG"]),queue:["T"],isDefault:!0},{id:"tsd-chain",name:"TSD em Cadeia",emoji:"",desc:"Dois T-Spin Doubles seguidos  Back-to-Back!",board:ar(12,["G....GGGGG","G...GGGGGG","GGG..GGGGG","GGG...GGGG","GGGG.GGGGG","GGG..GGGGG","GGG...GGGG","GGGG.GGGGG"]),queue:["T","T"],isDefault:!0},{id:"dt-cannon",name:"DT Cannon",emoji:"",desc:"TSD + TST combinados!",board:ar(13,["G...GGGGGG","G....GGGGG","GGGG.GGGGG","GGG..GGGGG","GGG...GGGG","GGGG.GGGGG","GGGG.GGGGG"]),queue:["T","T"],isDefault:!0},{id:"stsd",name:"Super T-Spin Double",emoji:"",desc:"STSD  usa wall kick avanado pra entrar na cavidade!",board:ar(13,["GGG..GGGGG","GGG..GGGGG","GGG..GGGGG","GGG...GGGG","GGGGG.GGGG","GGGG..GGGG","GGGG..GGGG"]),queue:["T","T"],isDefault:!0}];function ar(e,t){const n=[];for(let r=0;r<zs;r++)r>=e&&r<e+t.length?n.push(t[r-e]):n.push("..........");return n}function US(e){return e.map(t=>Array.from(t).map(n=>n==="."||n===" "?null:{type:"G",color:un[n]||"#888",emoji:""}))}function Ul(){return Array(zs).fill(null).map(()=>Array(Hr).fill(null))}function L0(e){return e.map(t=>t.map(n=>n?{...n}:null))}const $l="cattetris_all_setups";function _0(e){return e.map(t=>t.map(n=>n?n.type||"G":".").join(""))}function $S(e){return e.map(t=>Array.from(t).map(n=>n==="."?null:{type:n,color:un[n]||"#888",emoji:""}))}function D0(e){return{id:e.id,name:e.name,emoji:e.emoji||"",desc:e.desc||"",board:Array.isArray(e.board)&&typeof e.board[0]=="string"?e.board:_0(e.board||[]),queue:e.queue||[],steps:e.steps||[],isDefault:e.isDefault||!1}}function qS(){try{const t=localStorage.getItem($l);if(t){const n=JSON.parse(t);if(Array.isArray(n)&&n.length>0)return n}}catch{}const e=M0.map(D0);return localStorage.setItem($l,JSON.stringify(e)),e}function WS(e){localStorage.setItem($l,JSON.stringify(e))}function Gh(e){const t=JSON.stringify(e,null,2),n=new Blob([t],{type:"application/json"}),r=URL.createObjectURL(n),s=document.createElement("a");s.href=r,s.download="cat-tetris-setups.json",s.click(),URL.revokeObjectURL(r)}function KS(e){return new Promise((t,n)=>{const r=new FileReader;r.onload=s=>{try{const i=JSON.parse(s.target.result);if(!Array.isArray(i))throw new Error("not array");const o=i.filter(a=>a.name&&a.board&&Array.isArray(a.board)&&Array.isArray(a.queue));t(o.map(a=>({...a,id:a.id||"imp_"+Date.now()+"_"+Math.random().toString(36).slice(2,6)})))}catch(i){n(i)}},r.onerror=n,r.readAsText(e)})}function QS(e,t){const n=new Zn(new er,new tr,null,new Tn);n.initializeGame(),n.isPlaying=!0;for(let r=0;r<zs;r++)for(let s=0;s<Hr;s++)e[r][s]&&n.board.setCell(s,r,e[r][s]);if(t.length>0){const r=s=>{const i=Ht[s],o=s==="I"?{x:3,y:-2}:{x:3,y:0};return new At(s,i.shape,i.color,i.emoji,o,!1,0)};for(n.currentPiece=r(t[0]),n.nextPieces=t.slice(1).map(r);n.nextPieces.length<3;)n.nextPieces.push(n.pieceFactory.createRandomPiece())}return n._markDirty(),n}function XS({onExit:e}){const[t,n]=v.useState("menu"),[r,s]=v.useState(null),[i,o]=v.useState(()=>qS()),[a,c]=v.useState(null),[u,h]=v.useState(null),[d,m]=v.useState(Ul),[g,x]=v.useState([]),[b,k]=v.useState(""),[p,f]=v.useState(""),[y,w]=v.useState(""),[S,C]=v.useState("G"),P=v.useRef(null),T=v.useCallback($=>{o($),WS($)},[]),j=v.useCallback($=>{s($),n("play")},[]),E=v.useCallback(()=>{s({id:"custom_preview",name:b||"Setup Personalizado",emoji:p,board:null,queue:[...g],_rawBoard:L0(d)}),n("play")},[d,g,b,p]),L=v.useCallback(()=>{c(null),m(Ul()),x([]),k(""),f(""),w(""),n("editor")},[]),A=v.useCallback($=>{c($),m($S($.board)),x([...$.queue]),k($.name),f($.emoji||""),w($.desc||""),n("editor")},[]),N=v.useCallback(()=>{const $=b.trim()||"Meu Setup",X=_0(d);if(a){const Z=i.map(J=>J.id===a.id?{...J,name:$,emoji:p,desc:y,board:X,queue:[...g]}:J);T(Z)}else{const Z={id:"custom_"+Date.now(),name:$,emoji:p,desc:y,board:X,queue:[...g],steps:[],isDefault:!1};T([...i,Z])}n("menu")},[d,g,b,p,y,a,i,T]),_=v.useCallback($=>{T(i.filter(X=>X.id!==$))},[i,T]),se=v.useCallback(()=>{const $=M0.map(D0),X=i.filter(Z=>!Z.isDefault);T([...$,...X])},[i,T]),O=v.useCallback(async $=>{var Z;const X=(Z=$.target.files)==null?void 0:Z[0];if(X){try{const J=await KS(X);if(J.length===0){h("Nenhum setup vlido no arquivo.");return}T([...i,...J]),h(`${J.length} setup(s) importado(s)!`),setTimeout(()=>h(null),3e3)}catch{h("Erro ao ler o arquivo JSON."),setTimeout(()=>h(null),3e3)}$.target.value=""}},[i,T]),Q=v.useCallback(()=>{i.length!==0&&Gh(i)},[i]),R=v.useCallback(($,X)=>{const Z=i.findIndex(We=>We.id===$);if(Z<0)return;const J=Z+X;if(J<0||J>=i.length)return;const he=[...i];[he[Z],he[J]]=[he[J],he[Z]],T(he)},[i,T]),z=5,F=z+i.length,U=v.useCallback($=>{var X;switch($){case 0:e();break;case 1:L();break;case 2:(X=P.current)==null||X.click();break;case 3:Q();break;case 4:se();break;default:{const Z=$-z;Z>=0&&Z<i.length&&j(i[Z])}}},[e,L,Q,se,i,j]),{selectedIndex:K}=Be({itemCount:F,onConfirm:U,onBack:e,active:t==="menu"});return t==="play"&&r?l.jsx(ZS,{template:r,onBack:()=>n("menu"),onExit:e}):t==="editor"?l.jsx(eC,{board:d,setBoard:m,queue:g,setQueue:x,name:b,setName:k,emoji:p,setEmoji:f,desc:y,setDesc:w,selectedColor:S,setSelectedColor:C,onPlay:E,onSave:N,isEditing:!!a,onBack:()=>n("menu"),onExit:e}):l.jsxs("div",{className:"h-screen bg-gradient-to-b from-slate-900 via-indigo-950 to-slate-900 flex flex-col items-center p-4 overflow-auto",children:[l.jsxs("div",{className:"flex justify-between items-center w-full max-w-lg mb-4",children:[l.jsx("h1",{className:"text-2xl font-bold text-white",children:" Modo Criador"}),l.jsx("button",{onClick:e,className:`bg-red-600 hover:bg-red-700 text-white px-3 py-1.5 rounded-lg text-sm font-bold ${K===0?"ring-2 ring-yellow-400":""}`,children:" Voltar"})]}),l.jsx("p",{className:"text-white/50 text-sm mb-4 text-center max-w-md",children:"Crie, edite e organize seus setups de treino! |   Voltar"}),l.jsxs("div",{className:"flex gap-2 w-full max-w-lg mb-4 flex-wrap justify-center",children:[l.jsxs(M.button,{whileHover:{scale:1.03},whileTap:{scale:.97},onClick:L,className:`flex-1 min-w-[140px] p-3 rounded-xl bg-gradient-to-r from-violet-600/30 to-fuchsia-600/30 hover:from-violet-600/40 hover:to-fuchsia-600/40 border border-violet-500/30 hover:border-violet-500/50 transition-all flex items-center gap-3 ${K===1?"ring-2 ring-yellow-400":""}`,children:[l.jsx("span",{className:"text-2xl",children:""}),l.jsxs("div",{className:"text-left",children:[l.jsx("div",{className:"text-white font-bold text-sm",children:"Criar Novo"}),l.jsx("div",{className:"text-white/40 text-[10px]",children:"Monte do zero"})]})]}),l.jsx("button",{onClick:()=>{var $;return($=P.current)==null?void 0:$.click()},className:`bg-green-600/40 hover:bg-green-600/60 text-white px-4 py-3 rounded-xl text-xs font-bold transition-colors border border-green-500/20 ${K===2?"ring-2 ring-yellow-400":""}`,children:" Importar"}),l.jsx("button",{onClick:Q,className:`bg-blue-600/40 hover:bg-blue-600/60 text-white px-4 py-3 rounded-xl text-xs font-bold transition-colors border border-blue-500/20 ${K===3?"ring-2 ring-yellow-400":""}`,disabled:i.length===0,children:" Exportar"}),l.jsx("button",{onClick:se,className:`bg-orange-600/40 hover:bg-orange-600/60 text-white px-4 py-3 rounded-xl text-xs font-bold transition-colors border border-orange-500/20 ${K===4?"ring-2 ring-yellow-400":""}`,children:" Resetar Padro"})]}),l.jsx("input",{ref:P,type:"file",accept:".json",onChange:O,className:"hidden"}),u&&l.jsx("div",{className:"w-full max-w-lg mb-3 px-4 py-2 rounded-lg bg-blue-500/20 border border-blue-500/30 text-blue-200 text-xs text-center font-medium",children:u}),l.jsxs("div",{className:"text-white/40 text-xs font-semibold uppercase tracking-wide mb-2",children:["Todos os Setups (",i.length,")"]}),l.jsxs("div",{className:"grid grid-cols-1 gap-2 w-full max-w-lg pb-8",children:[i.map(($,X)=>l.jsx(JS,{setup:$,onPlay:()=>j($),onEdit:()=>A($),onDelete:()=>_($.id),onExport:()=>Gh([$]),onMoveUp:X>0?()=>R($.id,-1):null,onMoveDown:X<i.length-1?()=>R($.id,1):null,isHighlighted:K===z+X},$.id)),i.length===0&&l.jsx("div",{className:"text-center py-8 text-white/30 text-sm",children:'Nenhum setup. Clique em "Criar Novo" ou "Resetar Padro".'})]})]})}function JS({setup:e,onPlay:t,onEdit:n,onDelete:r,onExport:s,onMoveUp:i,onMoveDown:o,isHighlighted:a}){const[c,u]=v.useState(!1),h=e.isDefault;return l.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl border transition-all ${h?"bg-white/[0.04] border-white/[0.06] hover:bg-white/[0.07]":"bg-violet-500/[0.06] border-violet-500/[0.12] hover:bg-violet-500/[0.1]"} ${a?"ring-2 ring-yellow-400":""}`,children:[l.jsx("div",{className:"flex flex-col items-center min-w-[44px]",children:l.jsx(YS,{boardRows:e.board})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-center gap-1.5",children:[l.jsx("span",{className:"text-lg",children:e.emoji||""}),l.jsx("span",{className:"text-white font-bold text-sm truncate",children:e.name}),h&&l.jsx("span",{className:"text-[9px] px-1.5 py-0.5 rounded bg-blue-500/20 text-blue-300 border border-blue-500/20 shrink-0",children:"padro"})]}),e.desc&&l.jsx("p",{className:"text-white/40 text-[11px] mt-0.5 leading-tight truncate",children:e.desc}),l.jsxs("div",{className:"flex items-center gap-1.5 mt-1",children:[l.jsx("span",{className:"text-white/30 text-[10px]",children:"Peas:"}),(e.queue||[]).map((d,m)=>l.jsx("span",{className:"inline-block w-3.5 h-3.5 rounded",style:{backgroundColor:un[d]},title:d},m)),(!e.queue||e.queue.length===0)&&l.jsx("span",{className:"text-white/20 text-[10px]",children:"aleatria"})]})]}),l.jsxs("div",{className:"flex flex-col gap-1 shrink-0",children:[l.jsxs("div",{className:"flex gap-1",children:[l.jsx("button",{onClick:t,className:"bg-emerald-600 hover:bg-emerald-500 text-white px-2.5 py-1 rounded text-[10px] font-bold transition-colors",title:"Jogar",children:""}),l.jsx("button",{onClick:n,className:"bg-blue-600 hover:bg-blue-500 text-white px-2.5 py-1 rounded text-[10px] font-bold transition-colors",title:"Editar",children:""}),l.jsx("button",{onClick:s,className:"bg-slate-600 hover:bg-slate-500 text-white px-2.5 py-1 rounded text-[10px] font-bold transition-colors",title:"Exportar",children:""})]}),l.jsxs("div",{className:"flex gap-1",children:[i&&l.jsx("button",{onClick:i,className:"bg-white/10 hover:bg-white/20 text-white px-2 py-1 rounded text-[10px] font-bold flex-1",title:"Mover pra cima",children:""}),o&&l.jsx("button",{onClick:o,className:"bg-white/10 hover:bg-white/20 text-white px-2 py-1 rounded text-[10px] font-bold flex-1",title:"Mover pra baixo",children:""})]}),c?l.jsxs("div",{className:"flex gap-1",children:[l.jsx("button",{onClick:()=>{r(),u(!1)},className:"bg-red-600 hover:bg-red-500 text-white px-2 py-1 rounded text-[9px] font-bold flex-1",children:"Sim"}),l.jsx("button",{onClick:()=>u(!1),className:"bg-slate-600 hover:bg-slate-500 text-white px-2 py-1 rounded text-[9px] font-bold flex-1",children:"No"})]}):l.jsx("button",{onClick:()=>u(!0),className:"bg-red-700/40 hover:bg-red-700/70 text-red-300 px-2.5 py-1 rounded text-[10px] font-bold transition-colors w-full",children:" Excluir"})]})]})}function YS({boardRows:e}){const n=e.findIndex(s=>s!==".........."),r=e.slice(Math.max(n>=0?n:zs-4,zs-6));return l.jsx("div",{className:"bg-black/40 rounded border border-white/10 p-0.5",children:r.map((s,i)=>l.jsx("div",{className:"flex",children:Array.from(s).map((o,a)=>l.jsx("div",{style:{width:3,height:3,backgroundColor:o!=="."?"#888":"transparent"}},a))},i))})}function ZS({template:e,onBack:t,onExit:n}){var k,p,f,y,w,S,C,P,T,j;const[r,s]=v.useState(null),[i,o]=v.useState(0),a=v.useRef(null),c=v.useRef(null),u=v.useRef(0),h=v.useMemo(()=>e._rawBoard?L0(e._rawBoard):US(e.board),[e]),d=v.useCallback(()=>{c.current&&cancelAnimationFrame(c.current);const E=QS(h,e.queue);a.current=E,s(E.getGameState()),u.current=0,o(L=>L+1)},[h,e.queue]);v.useEffect(()=>{d()},[d]),v.useEffect(()=>{const E=L=>{u.current||(u.current=L);const A=L-u.current;u.current=L;const N=a.current;N&&(!N.gameOver&&!N.isPaused&&N.updateGame(A),N.isDirty&&(s(N.getGameState()),N.clearDirty()),c.current=requestAnimationFrame(E))};return c.current=requestAnimationFrame(E),()=>{c.current&&cancelAnimationFrame(c.current)}},[i]),v.useEffect(()=>{const E=L=>{const A=a.current;if(!(!A||A.gameOver))switch(L.key){case"ArrowLeft":L.preventDefault(),A.movePiece("left");break;case"ArrowRight":L.preventDefault(),A.movePiece("right");break;case"ArrowDown":L.preventDefault(),A.movePiece("down");break;case"ArrowUp":L.preventDefault(),A.rotatePiece();break;case"z":case"Z":A.rotatePieceLeft();break;case"c":case"C":case"Shift":A.holdPiece();break;case" ":L.preventDefault(),A.hardDrop();break;case"r":case"R":d();break}};return window.addEventListener("keydown",E),()=>window.removeEventListener("keydown",E)},[d]);const m=v.useMemo(()=>({movePiece:E=>{const L=a.current;L&&!L.gameOver&&L.movePiece(E)},rotatePiece:()=>{const E=a.current;E&&!E.gameOver&&E.rotatePiece()},rotatePieceLeft:()=>{const E=a.current;E&&!E.gameOver&&E.rotatePieceLeft()},hardDrop:()=>{const E=a.current;E&&!E.gameOver&&E.hardDrop()},holdPiece:()=>{const E=a.current;E&&!E.gameOver&&E.holdPiece()},isGameOver:()=>{var E;return((E=a.current)==null?void 0:E.gameOver)??!1},backToMenu:n,togglePause:()=>{}}),[n]),{isGamepadActive:g,processGamepadInput:x}=uu(m);v.useEffect(()=>{if(!g)return;const E=setInterval(()=>x(),16);return()=>clearInterval(E)},[g,x]);const b=v.useMemo(()=>{var E;if(!(r!=null&&r.currentPiece)||r!=null&&r.gameOver)return null;try{return(E=a.current)==null?void 0:E.getDropPreview()}catch{return null}},[(p=(k=r==null?void 0:r.currentPiece)==null?void 0:k.position)==null?void 0:p.x,(y=(f=r==null?void 0:r.currentPiece)==null?void 0:f.position)==null?void 0:y.y,(w=r==null?void 0:r.currentPiece)==null?void 0:w.type,(S=r==null?void 0:r.currentPiece)==null?void 0:S.rotationState]);return l.jsxs("div",{className:"h-screen bg-gradient-to-b from-slate-900 via-indigo-950 to-slate-900 flex flex-col items-center p-2 overflow-hidden",children:[l.jsxs("div",{className:"flex justify-between items-center w-full max-w-xl mb-2",children:[l.jsxs("h1",{className:"text-lg font-bold text-white truncate",children:[e.emoji," ",e.name]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:d,className:"bg-yellow-600 hover:bg-yellow-700 text-white px-3 py-1 rounded-lg text-xs font-bold",children:" Replay"}),l.jsx("button",{onClick:t,className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded-lg text-xs font-bold",children:" Voltar"}),l.jsx("button",{onClick:n,className:"bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded-lg text-xs font-bold",children:"Sair"})]})]}),r&&l.jsxs("div",{className:"flex gap-3 items-start justify-center",children:[l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx(Yn,{heldPiece:r.heldPiece,canHold:r.canHold}),l.jsxs("div",{className:"text-white/50 text-[10px] leading-tight",children:[" mover",l.jsx("br",{})," girar",l.jsx("br",{}),"C hold",l.jsx("br",{}),"Espao drop",l.jsx("br",{}),"R replay"]})]}),l.jsx(Pn,{board:r.board,currentPiece:r.currentPiece,dropPreview:b,gameOver:r.gameOver}),l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx(Jn,{pieces:r.nextPieces||[]}),l.jsx(Xn,{score:((C=r.score)==null?void 0:C.points)||0,level:((P=r.score)==null?void 0:P.level)||1,lines:((T=r.score)==null?void 0:T.lines)||0,combo:((j=r.score)==null?void 0:j.combo)||0})]})]}),(r==null?void 0:r.gameOver)&&l.jsxs("div",{className:"mt-4 flex gap-3",children:[l.jsx("button",{onClick:d,className:"bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg font-bold text-lg",children:" Tentar Novamente"}),l.jsx("button",{onClick:t,className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-bold text-lg",children:" Voltar"})]})]})}function eC({board:e,setBoard:t,queue:n,setQueue:r,name:s,setName:i,emoji:o,setEmoji:a,desc:c,setDesc:u,selectedColor:h,setSelectedColor:d,onPlay:m,onSave:g,isEditing:x,onBack:b,onExit:k}){const p=v.useCallback((C,P)=>{t(T=>{const j=T.map(E=>[...E]);return j[P][C]=j[P][C]?null:{type:h,color:un[h],emoji:""},j})},[h,t]),f=v.useCallback((C,P)=>{t(T=>{const j=T.map(E=>[...E]);for(let E=0;E<Hr;E++)j[C][E]=E===P?null:{type:"G",color:un.G,emoji:""};return j})},[t]),y=v.useCallback(C=>{t(P=>{const T=P.map(j=>[...j]);for(let j=0;j<Hr;j++)T[C][j]=null;return T})},[t]),w=v.useCallback(C=>{switch(C){case 0:b();break;case 1:k();break;case 2:g();break;case 3:m();break}},[b,k,g,m]),{selectedIndex:S}=Be({itemCount:4,onConfirm:w,onBack:b,active:!0});return l.jsxs("div",{className:"h-screen bg-gradient-to-b from-slate-900 via-indigo-950 to-slate-900 flex flex-col items-center p-3 overflow-auto",children:[l.jsxs("div",{className:"flex justify-between items-center w-full max-w-2xl mb-3",children:[l.jsx("h1",{className:"text-xl font-bold text-white",children:x?" Editar Setup":" Criar Meu Setup"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:b,className:`bg-slate-600 hover:bg-slate-700 text-white px-3 py-1 rounded-lg text-sm font-bold ${S===0?"ring-2 ring-yellow-400":""}`,children:" Voltar"}),l.jsx("button",{onClick:k,className:`bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded-lg text-sm font-bold ${S===1?"ring-2 ring-yellow-400":""}`,children:"Sair"})]})]}),l.jsxs("div",{className:"flex gap-4 items-start justify-center flex-wrap max-w-2xl",children:[l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx("div",{className:"text-white/60 text-xs font-semibold mb-1",children:"TABULEIRO (clique para editar)"}),l.jsx(tC,{board:e,onToggle:p,onFillRow:f,onClearRow:y}),l.jsxs("div",{className:"flex gap-1 items-center mt-1",children:[l.jsx("span",{className:"text-white/50 text-xs mr-1",children:"Cor:"}),Oh.map(C=>l.jsx("button",{onClick:()=>d(C),className:`w-6 h-6 rounded border-2 transition-all ${h===C?"border-white scale-110":"border-white/20"}`,style:{backgroundColor:un[C]},title:C},C)),l.jsx("button",{onClick:()=>d("G"),className:`w-6 h-6 rounded border-2 transition-all ${h==="G"?"border-white scale-110":"border-white/20"}`,style:{backgroundColor:un.G},title:"Cinza"})]}),l.jsx("button",{onClick:()=>t(Ul()),className:"bg-red-700/60 hover:bg-red-700 text-white px-3 py-1 rounded text-xs font-semibold mt-1 w-fit",children:"Limpar Tudo"})]}),l.jsxs("div",{className:"flex flex-col gap-3 min-w-[160px]",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-white/60 text-xs font-semibold mb-2",children:"FILA DE PEAS"}),l.jsx("div",{className:"flex flex-wrap gap-1 mb-2",children:Oh.map(C=>l.jsx("button",{onClick:()=>r(P=>[...P,C]),className:"flex items-center justify-center w-9 h-9 rounded-lg bg-white/10 hover:bg-white/20 border border-white/10 transition-all",title:`Adicionar ${C}`,children:l.jsx(Fh,{type:C})},C))}),l.jsxs("div",{className:"flex flex-col gap-1 min-h-[60px] bg-black/30 rounded-lg p-2",children:[n.length===0?l.jsxs("span",{className:"text-white/30 text-xs text-center py-2",children:["Clique nas peas acima",l.jsx("br",{}),"(vazio = fila aleatria)"]}):l.jsx("div",{className:"flex flex-wrap gap-1",children:n.map((C,P)=>l.jsxs("button",{onClick:()=>r(T=>T.filter((j,E)=>E!==P)),className:"flex items-center justify-center w-8 h-8 rounded bg-white/10 hover:bg-red-500/30 border border-white/10 transition-all group relative",title:"Remover",children:[l.jsx(Fh,{type:C,size:10}),l.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-[8px] rounded-full w-3 h-3 flex items-center justify-center opacity-0 group-hover:opacity-100",children:""})]},P))}),n.length>0&&l.jsx("button",{onClick:()=>r([]),className:"text-red-400 text-[10px] mt-1 hover:text-red-300",children:"Limpar fila"})]})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-white/60 text-xs font-semibold mb-2",children:"DETALHES"}),l.jsxs("div",{className:"flex gap-2 mb-2",children:[l.jsx("input",{type:"text",value:o,onChange:C=>a(C.target.value),placeholder:"",maxLength:4,className:"w-14 px-2 py-2 rounded-lg bg-black/30 border border-white/10 text-white text-center text-lg focus:border-violet-500/50 focus:outline-none",title:"Emoji"}),l.jsx("input",{type:"text",value:s,onChange:C=>i(C.target.value),placeholder:"Nome do setup",maxLength:40,className:"flex-1 px-3 py-2 rounded-lg bg-black/30 border border-white/10 text-white text-sm placeholder-white/20 focus:border-violet-500/50 focus:outline-none"})]}),l.jsx("input",{type:"text",value:c,onChange:C=>u(C.target.value),placeholder:"Descrio (opcional)",maxLength:80,className:"w-full px-3 py-2 rounded-lg bg-black/30 border border-white/10 text-white text-xs placeholder-white/20 focus:border-violet-500/50 focus:outline-none mb-3"})]}),l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx("button",{onClick:g,className:`w-full py-3 rounded-xl bg-gradient-to-r from-violet-500 to-purple-500 hover:from-violet-400 hover:to-purple-400 text-white font-bold text-base shadow-lg shadow-violet-500/25 transition-all active:scale-95 ${S===2?"ring-2 ring-yellow-400":""}`,children:x?" Salvar Alteraes":" Salvar Setup"}),l.jsx("button",{onClick:m,className:`w-full py-2.5 rounded-xl bg-gradient-to-r from-emerald-500 to-green-500 hover:from-emerald-400 hover:to-green-400 text-white font-bold text-sm shadow-lg shadow-emerald-500/25 transition-all active:scale-95 ${S===3?"ring-2 ring-yellow-400":""}`,children:" Testar (sem salvar)"})]})]})]})]})}function tC({board:e,onToggle:t,onFillRow:n,onClearRow:r}){const[s,i]=v.useState(!1),[o,a]=v.useState(null),c=22,u=(m,g)=>{i(!0),a(e[g][m]?"erase":"place"),t(m,g)},h=(m,g)=>{s&&(o==="place"&&!e[g][m]&&t(m,g),o==="erase"&&e[g][m]&&t(m,g))},d=()=>{i(!1),a(null)};return v.useEffect(()=>(window.addEventListener("pointerup",d),()=>window.removeEventListener("pointerup",d)),[]),l.jsx("div",{className:"relative bg-black/50 rounded-lg border border-white/10 select-none",style:{width:c*Hr+2,padding:1},onContextMenu:m=>m.preventDefault(),children:e.map((m,g)=>l.jsxs("div",{className:"flex",style:{height:c},children:[m.map((x,b)=>l.jsx("div",{onPointerDown:()=>u(b,g),onPointerEnter:()=>h(b,g),className:"cursor-pointer border border-white/[0.04] hover:border-white/20 transition-colors",style:{width:c,height:c,backgroundColor:x?x.color:"transparent",opacity:x?.85:1}},b)),l.jsx("button",{onClick:()=>m.some(x=>x)?r(g):n(g,Math.floor(Math.random()*Hr)),className:"ml-0.5 text-white/20 hover:text-white/60 text-[9px] w-4 flex items-center justify-center",title:m.some(x=>x)?"Limpar linha":"Preencher linha",children:m.some(x=>x)?"":"+"})]},g))})}function Fh({type:e,size:t=12}){var u;const n=(u=Ht[e])==null?void 0:u.shape;if(!n)return null;const r=un[e],s=n.filter(h=>h.some(d=>d));let i=1/0,o=-1;for(const h of s)for(let d=0;d<h.length;d++)h[d]&&(i=Math.min(i,d),o=Math.max(o,d));if(o<0)return null;const a=s.map(h=>h.slice(i,o+1)),c=o-i+1;return l.jsx("div",{className:"flex flex-col items-center",children:a.map((h,d)=>l.jsx("div",{className:"flex",children:Array.from({length:c},(m,g)=>l.jsx("div",{style:{width:t,height:t,backgroundColor:h[g]?r:"transparent",borderRadius:1}},g))},d))})}function R0(){const[e,t]=v.useState([]),[n,r]=v.useState(null),[s,i]=v.useState(!0);v.useEffect(()=>{try{const u=q.resolve("shopService");t(u.getAllThemes()),r(u.getEquippedTheme()),i(!1);const h=m=>{r(m.detail.theme),t(u.getAllThemes())},d=()=>{t(u.getAllThemes())};return window.addEventListener("themeEquipped",h),window.addEventListener("currencyUpdated",d),()=>{window.removeEventListener("themeEquipped",h),window.removeEventListener("currencyUpdated",d)}}catch{i(!1)}},[]);const o=v.useCallback(u=>{try{const h=q.resolve("shopService"),d=h.purchaseTheme(u);return d.success&&(t(h.getAllThemes()),window.dispatchEvent(new Event("currencyUpdated"))),d}catch(h){return{success:!1,error:h.message}}},[]),a=v.useCallback(u=>{try{const h=q.resolve("shopService"),d=h.equipTheme(u);return d.success&&(r(d.theme),t(h.getAllThemes())),d}catch(h){return{success:!1,error:h.message}}},[]),c=v.useCallback(()=>{try{return q.resolve("shopService").getStats()}catch{return null}},[]);return{themes:e,equippedTheme:n,loading:s,purchaseTheme:o,equipTheme:a,getStats:c}}function nC({onClose:e}){var b,k;const{themes:t,equippedTheme:n,loading:r,purchaseTheme:s,equipTheme:i,getStats:o}=R0(),{currency:a}=T0(),[c,u]=v.useState(null),{t:h}=Me(),d=o(),m=p=>{const f=s(p);f.success?kr(h("shop.purchaseSuccess",{name:f.theme.name}),"success"):kr(` ${f.error}`,"error")},g=p=>{const f=i(p);f.success?kr(h("shop.equipSuccess",{name:f.theme.name}),"success"):kr(` ${f.error}`,"error")},{selectedIndex:x}=Be({itemCount:(t==null?void 0:t.length)||0,onConfirm:p=>{const f=t[p];f&&(f.owned?f.equipped||g(f.id):m(f.id))},onBack:e,active:!c&&!r,wrap:!0});return Be({itemCount:1,onConfirm:()=>u(null),onBack:()=>u(null),active:!!c}),r?l.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",children:l.jsx("div",{className:"text-white text-lg",children:h("shop.loading")})}):!t||t.length===0?l.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-red-900/90 text-white p-6 rounded-lg",children:[l.jsx("p",{className:"text-xl",children:h("shop.errorLoading")}),l.jsx("button",{onClick:e,className:"mt-4 bg-white text-black px-4 py-2 rounded",children:h("shop.close")})]})}):l.jsx(M.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:e,children:l.jsxs(M.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},className:"bg-gradient-to-br from-pink-900/95 to-purple-900/95 rounded-2xl p-6 max-w-6xl w-full max-h-[90vh] overflow-y-auto border-2 border-white/20 shadow-2xl",onClick:p=>p.stopPropagation(),children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-3xl font-bold text-white flex items-center gap-2",children:h("shop.title")}),l.jsx("p",{className:"text-white/60 text-sm mt-1",children:h("shop.subtitle")})]}),l.jsx("button",{onClick:e,className:"text-white/60 hover:text-white text-2xl transition-colors",children:""})]}),l.jsx("div",{className:"bg-black/30 rounded-lg p-4 mb-6",children:l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-2xl font-bold text-yellow-400 flex items-center justify-center gap-1",children:[" ",((b=a==null?void 0:a.fish)==null?void 0:b.toLocaleString())||0]}),l.jsx("div",{className:"text-white/60 text-sm",children:h("shop.yourFish")})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-2xl font-bold text-white",children:[d==null?void 0:d.ownedThemes,"/",d==null?void 0:d.totalThemes]}),l.jsx("div",{className:"text-white/60 text-sm",children:h("shop.themesUnlocked")})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-2xl font-bold text-green-400",children:[d!=null&&d.totalThemes?Math.floor(d.ownedThemes/d.totalThemes*100):0,"%"]}),l.jsx("div",{className:"text-white/60 text-sm",children:h("shop.collection")})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-2xl font-bold text-purple-400 flex items-center justify-center gap-1",children:[" ",((k=d==null?void 0:d.totalSpent)==null?void 0:k.toLocaleString())||0]}),l.jsx("div",{className:"text-white/60 text-sm",children:h("shop.totalSpent")})]})]})}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map((p,f)=>{const y=!p.owned&&(a==null?void 0:a.fish)>=p.price;return l.jsxs(M.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:f*.05},className:`bg-black/40 rounded-lg p-4 border-2 relative ${p.equipped?"border-green-500 shadow-lg shadow-green-500/30":p.owned?"border-white/20":"border-white/10"} ${f===x?"ring-2 ring-yellow-400 ring-offset-2 ring-offset-purple-900 scale-[1.02]":""}`,children:[p.equipped&&l.jsx("div",{className:"absolute top-2 right-2 bg-green-600 text-white text-xs px-2 py-1 rounded-full font-bold",children:h("shop.equipped")}),p.premium&&l.jsx("div",{className:"absolute top-2 left-2 bg-gradient-to-r from-yellow-400 to-orange-500 text-white text-xs px-2 py-1 rounded-full font-bold",children:h("shop.premium")}),l.jsxs("div",{className:"mb-4",children:[l.jsx("h3",{className:"text-white font-bold text-lg mb-1",children:p.name}),l.jsx("p",{className:"text-white/60 text-sm",children:p.description})]}),l.jsx("div",{className:"bg-black/30 rounded-lg p-3 mb-4",children:l.jsx("div",{className:"flex justify-center gap-2 flex-wrap",children:Object.entries(p.pieces).map(([w,S])=>l.jsx("div",{className:"w-12 h-12 rounded flex items-center justify-center text-2xl border border-white/10",style:{backgroundColor:S.color},children:S.emoji},w))})}),l.jsxs("div",{className:"flex gap-2",children:[p.owned?p.equipped?l.jsx("button",{disabled:!0,className:"flex-1 bg-green-600 text-white py-2 px-4 rounded-lg font-bold cursor-default",children:h("shop.inUse")}):l.jsx("button",{onClick:()=>g(p.id),className:"flex-1 bg-blue-600 hover:bg-blue-500 text-white py-2 px-4 rounded-lg font-bold transition-colors",children:h("shop.equip")}):l.jsx("button",{onClick:()=>m(p.id),disabled:!y,className:`flex-1 py-2 px-4 rounded-lg font-bold transition-colors ${y?"bg-yellow-600 hover:bg-yellow-500 text-white":"bg-gray-600 text-white/40 cursor-not-allowed"}`,children:p.default?h("shop.free"):l.jsxs(l.Fragment,{children:[" ",p.price.toLocaleString()]})}),l.jsx("button",{onClick:()=>u(p),className:"bg-purple-600 hover:bg-purple-500 text-white py-2 px-4 rounded-lg font-bold transition-colors",children:""})]})]},p.id)})}),l.jsx(ke,{children:c&&l.jsx(M.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/90 flex items-center justify-center z-[60]",onClick:()=>u(null),children:l.jsxs(M.div,{initial:{scale:.8},animate:{scale:1},exit:{scale:.8},className:"bg-gray-900 rounded-xl p-6 max-w-md",onClick:p=>p.stopPropagation(),children:[l.jsx("h3",{className:"text-white font-bold text-2xl mb-4",children:c.name}),l.jsx("div",{className:"grid grid-cols-4 gap-3 mb-4",children:Object.entries(c.pieces).map(([p,f])=>l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"w-16 h-16 rounded-lg flex items-center justify-center text-3xl mb-2 border-2 border-white/20",style:{backgroundColor:f.color},children:f.emoji}),l.jsx("div",{className:"text-white/60 text-xs",children:p})]},p))}),l.jsx("button",{onClick:()=>u(null),className:"w-full bg-purple-600 hover:bg-purple-500 text-white py-2 rounded-lg font-bold",children:h("shop.close")})]})})})]})})}function I0(){const[e,t]=v.useState([]),[n,r]=v.useState(null),[s,i]=v.useState(null),[o,a]=v.useState(!0);v.useEffect(()=>{try{const d=q.resolve("gameModesService");t(d.getAllModes()),r(d.getCurrentMode()),i(d.getAllStats()),a(!1)}catch{a(!1)}},[]);const c=v.useCallback(d=>{try{const m=q.resolve("gameModesService"),g=m.setMode(d);return g&&(r(m.getCurrentMode()),window.dispatchEvent(new CustomEvent("gameModeChanged",{detail:{mode:m.getCurrentMode()}}))),g}catch{return!1}},[]),u=v.useCallback(d=>{try{return q.resolve("gameModesService").getModeStats(d)}catch{return null}},[]),h=v.useCallback((d,m)=>{try{const g=q.resolve("gameModesService");g.updateStats(d,m),i(g.getAllStats())}catch{}},[]);return{modes:e,currentMode:n,modeStats:s,loading:o,selectMode:c,getModeStats:u,updateStats:h}}function rC({onClose:e,onStartGame:t}){const{modes:n,currentMode:r,modeStats:s,loading:i,selectMode:o}=I0(),{t:a}=Me(),{selectedIndex:c}=Be({itemCount:(n==null?void 0:n.length)||0,columns:2,onConfirm:d=>{const m=n[d];m&&u(m.id)},onBack:e,active:!0,wrap:!0}),u=d=>{o(d),setTimeout(()=>{t(),e()},300)},h=d=>{const m=Math.floor(d/60),g=d%60;return`${m}:${g.toString().padStart(2,"0")}`};return i?l.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",children:l.jsx("div",{className:"text-white text-xl",children:a("gameModes.loading")})}):!n||n.length===0?l.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-red-900/90 text-white p-6 rounded-lg",children:[l.jsx("p",{className:"text-xl",children:a("gameModes.errorLoading")}),l.jsx("button",{onClick:e,className:"mt-4 bg-white text-black px-4 py-2 rounded",children:"Fechar"})]})}):l.jsx(M.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:e,children:l.jsxs(M.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},className:"bg-gradient-to-br from-blue-900/95 to-indigo-900/95 rounded-2xl p-6 max-w-4xl w-full max-h-[90vh] overflow-y-auto border-2 border-white/20 shadow-2xl",onClick:d=>d.stopPropagation(),children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-3xl font-bold text-white flex items-center gap-2",children:a("gameModes.title")}),l.jsx("p",{className:"text-white/60 text-sm mt-1",children:a("gameModes.subtitle")})]}),l.jsx("button",{onClick:e,className:"text-white/60 hover:text-white text-2xl transition-colors",children:""})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:n.map((d,m)=>{const g=s[d.id],x=(r==null?void 0:r.id)===d.id;return l.jsxs(M.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:m*.1},className:`bg-black/40 rounded-lg p-5 border-2 cursor-pointer transition-all hover:scale-105 ${x?"border-green-500 shadow-lg shadow-green-500/30":"border-white/10 hover:border-white/30"} ${m===c?"ring-2 ring-yellow-400 ring-offset-2 ring-offset-blue-900":""}`,onClick:()=>u(d.id),children:[x&&l.jsx("div",{className:"absolute top-3 right-3 bg-green-600 text-white text-xs px-2 py-1 rounded-full font-bold",children:a("gameModes.selected")}),l.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[l.jsx("div",{className:"text-5xl",children:d.icon}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"text-white font-bold text-xl",children:d.name}),l.jsx("p",{className:"text-white/60 text-sm",children:d.description})]})]}),l.jsx("div",{className:"bg-black/30 rounded-lg p-3 mb-3",children:l.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[d.rules.lineGoal&&l.jsx("div",{className:"text-white/80",children:a("gameModes.goalLines",{n:d.rules.lineGoal})}),d.rules.timeLimit&&l.jsx("div",{className:"text-white/80",children:a("gameModes.timeLimit",{time:h(d.rules.timeLimit)})}),d.rules.gameOver!==void 0&&l.jsx("div",{className:"text-white/80",children:d.rules.gameOver?a("gameModes.gameOverYes"):a("gameModes.gameOverNo")}),d.rules.speedIncrease!==void 0&&l.jsx("div",{className:"text-white/80",children:d.rules.speedIncrease?a("gameModes.speedUp"):a("gameModes.speedFixed")}),d.rules.startLevel&&l.jsx("div",{className:"text-white/80",children:a("gameModes.startLevel",{n:d.rules.startLevel})}),d.rules.relaxed&&l.jsx("div",{className:"text-white/80",children:a("gameModes.relaxed")})]})}),g&&g.gamesPlayed>0&&l.jsxs("div",{className:"bg-black/30 rounded-lg p-3",children:[l.jsx("div",{className:"text-white/60 text-xs mb-2",children:a("gameModes.yourRecords")}),l.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-yellow-400 font-bold",children:g.bestScore.toLocaleString()}),l.jsx("div",{className:"text-white/40 text-xs",children:a("gameModes.bestScore")})]}),d.rules.lineGoal&&g.bestTime>0&&l.jsxs("div",{children:[l.jsx("div",{className:"text-green-400 font-bold",children:h(g.bestTime)}),l.jsx("div",{className:"text-white/40 text-xs",children:a("gameModes.bestTime")})]}),!d.rules.lineGoal&&l.jsxs("div",{children:[l.jsx("div",{className:"text-blue-400 font-bold",children:g.bestLines}),l.jsx("div",{className:"text-white/40 text-xs",children:a("gameModes.mostLines")})]})]}),l.jsx("div",{className:"text-white/40 text-xs mt-2",children:a("gameModes.gamesPlayed",{n:g.gamesPlayed})})]}),(!g||g.gamesPlayed===0)&&l.jsx("div",{className:"bg-black/30 rounded-lg p-3 text-center",children:l.jsx("div",{className:"text-white/40 text-sm",children:a("gameModes.noRecords")})}),l.jsx(M.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"w-full mt-3 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-500 hover:to-emerald-500 text-white font-bold py-3 rounded-lg transition-colors",children:a("gameModes.play")})]},d.id)})})]})})}function sC(){const[e,t]=v.useState(null),[n,r]=v.useState([]),[s,i]=v.useState(null),[o,a]=v.useState(null);v.useEffect(()=>{try{const b=q.resolve("multiplayerService");a(b.getStats())}catch{}},[]);const c=v.useCallback((b,k)=>{try{const p=q.resolve("multiplayerService"),f=p.startLocalMatch(b,k);return t(f.mode),r(f.players),i(p.getMatchState()),f}catch{return null}},[]),u=v.useCallback((b,k)=>{try{const p=q.resolve("multiplayerService"),f=p.startAIMatch(b,k);return t(f.mode),r(f.players),i(p.getMatchState()),f}catch{return null}},[]),h=v.useCallback((b,k)=>{try{const p=q.resolve("multiplayerService"),f=p.startAIvsAIMatch(b,k);return t(f.mode),r(f.players),i(p.getMatchState()),f}catch{return null}},[]),d=v.useCallback((b,k)=>{try{const p=q.resolve("multiplayerService");p.updatePlayerState(b,k);const f=p.getMatchState();return i(f),r(f.players),f}catch{return null}},[]),m=v.useCallback(()=>{try{const b=q.resolve("multiplayerService"),k=b.endMatch();return t(null),r([]),i(null),a(b.getStats()),k}catch{return null}},[]),g=v.useCallback(()=>{try{return q.resolve("multiplayerService").getAvailableModes()}catch{return[]}},[]),x=v.useCallback(()=>{try{const b=q.resolve("multiplayerService");a(b.getStats())}catch{}},[]);return{currentMode:e,players:n,matchState:s,stats:o,startLocalMatch:c,startAIMatch:u,startAIvsAIMatch:h,updatePlayerState:d,endMatch:m,getAvailableModes:g,refreshStats:x}}function iC(){const[e,t]=v.useState("medium"),[n,r]=v.useState(null);v.useEffect(()=>{try{const a=q.resolve("aiOpponentService");a.setDifficulty(e),r(a)}catch{}},[e]);const s=v.useCallback(a=>{if(!n)return null;try{return n.decideNextMove(a)}catch{return null}},[n]),i=v.useCallback(a=>{t(a),n&&n.setDifficulty(a)},[n]),o=v.useCallback(()=>n?n.getDifficulties():[],[n]);return{difficulty:e,changeDifficulty:i,getNextMove:s,getDifficulties:o}}function oC({onClose:e,onStartMatch:t}){const{getAvailableModes:n,stats:r,startLocalMatch:s,startAIMatch:i,startAIvsAIMatch:o}=sC(),{getDifficulties:a}=iC(),{t:c}=Me(),[u,h]=v.useState(null),[d,m]=v.useState(c("multiplayer.player1"));v.useState(c("multiplayer.player2"));const[g,x]=v.useState("medium"),[b,k]=v.useState("expert"),[p,f]=v.useState("expert"),y=n(),w=a(),S=((y==null?void 0:y.length)||0)+1,{selectedIndex:C}=Be({itemCount:S,columns:2,onConfirm:N=>{if(N<y.length){const _=y[N];_&&!_.disabled&&E(_)}else e()},onBack:e,active:!u,wrap:!0}),P=(w==null?void 0:w.length)||0,T=(u==null?void 0:u.id)==="ai-vs-ai"?P*2+2:P+2,{selectedIndex:j}=Be({itemCount:T,columns:2,onConfirm:N=>{(u==null?void 0:u.id)==="vs-ai"?N<P?x(w[N].id):N===P?L():h(null):(u==null?void 0:u.id)==="ai-vs-ai"&&(N<P?k(w[N].id):N<P*2?f(w[N-P].id):N===P*2?L():h(null))},onBack:()=>h(null),active:!!u,wrap:!0});if(!y||y.length===0)return l.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-red-900/90 text-white p-6 rounded-lg",children:[l.jsx("p",{className:"text-xl",children:c("multiplayer.errorLoading")}),l.jsx("button",{onClick:e,className:"mt-4 bg-white text-black px-4 py-2 rounded",children:"Fechar"})]})});const E=N=>{N.disabled||h(N)},L=()=>{let N=null;u.id==="vs-ai"?N=i(d,g):u.id==="ai-vs-ai"&&(N=o(b,p)),N&&t&&t(N)},A="ring-2 ring-yellow-400 ring-offset-2 ring-offset-purple-900";return l.jsx(M.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:e,children:l.jsxs(M.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},className:"bg-gradient-to-br from-purple-900/95 to-indigo-900/95 rounded-2xl p-4 sm:p-5 max-w-2xl w-full border-2 border-white/20 shadow-2xl",onClick:N=>N.stopPropagation(),children:[l.jsxs("div",{className:"flex justify-between items-center mb-3",children:[l.jsx("h2",{className:"text-2xl font-bold text-white",children:c("multiplayer.title")}),l.jsx("button",{onClick:e,className:"text-white/60 hover:text-white text-xl transition-colors",children:""})]}),u?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex items-center gap-3 mb-3 bg-black/30 rounded-lg p-3",children:[l.jsx("span",{className:"text-3xl",children:u.emoji}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-bold text-white",children:u.name}),l.jsx("p",{className:"text-white/60 text-xs",children:u.description})]})]}),u.id==="vs-ai"&&l.jsxs(l.Fragment,{children:[l.jsx("label",{className:"block text-white/80 text-sm mb-1",children:c("multiplayer.aiDifficulty")}),l.jsx("div",{className:"grid grid-cols-2 gap-2 mb-3",children:w.map((N,_)=>l.jsx("button",{onClick:()=>x(N.id),className:`p-2.5 rounded-lg border-2 transition-all text-left ${g===N.id?"bg-blue-600 border-blue-400":"bg-black/30 border-white/20 hover:border-white/40"} ${j===_?A:""}`,children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-xl",children:N.emoji}),l.jsxs("div",{children:[l.jsx("div",{className:"text-white font-bold text-sm",children:N.name}),l.jsx("div",{className:"text-white/60 text-[10px]",children:N.description})]})]})},N.id))})]}),u.id==="ai-vs-ai"&&l.jsxs(l.Fragment,{children:[l.jsx("label",{className:"block text-white/80 text-sm mb-1",children:c("multiplayer.ai1Left")}),l.jsx("div",{className:"grid grid-cols-2 gap-2 mb-2",children:w.map((N,_)=>l.jsx("button",{onClick:()=>k(N.id),className:`p-2 rounded-lg border-2 transition-all text-left ${b===N.id?"bg-blue-600 border-blue-400":"bg-black/30 border-white/20 hover:border-white/40"} ${j===_?A:""}`,children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-lg",children:N.emoji}),l.jsx("div",{className:"text-white font-bold text-xs",children:N.name})]})},N.id))}),l.jsx("label",{className:"block text-white/80 text-sm mb-1",children:c("multiplayer.ai2Right")}),l.jsx("div",{className:"grid grid-cols-2 gap-2 mb-2",children:w.map((N,_)=>l.jsx("button",{onClick:()=>f(N.id),className:`p-2 rounded-lg border-2 transition-all text-left ${p===N.id?"bg-red-600 border-red-400":"bg-black/30 border-white/20 hover:border-white/40"} ${j===_+P?A:""}`,children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-lg",children:N.emoji}),l.jsx("div",{className:"text-white font-bold text-xs",children:N.name})]})},N.id))})]}),l.jsxs("div",{className:"flex gap-2 mt-2",children:[l.jsxs(M.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:L,className:`flex-1 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-400 hover:to-emerald-500 text-white font-bold py-3 rounded-lg shadow-lg transition-all ${j===T-2?A:""}`,children:[" ",c("multiplayer.startMatch")]}),l.jsxs("button",{onClick:()=>h(null),className:`px-4 py-3 rounded-lg text-white/70 hover:text-white bg-white/10 hover:bg-white/20 transition-all font-bold ${j===T-1?A:""}`,children:[" ",c("multiplayer.back")]})]}),l.jsx("p",{className:"text-white/30 text-xs text-center mt-2",children:" B = voltar"})]}):l.jsxs(l.Fragment,{children:[r&&l.jsxs("div",{className:"flex gap-4 justify-center bg-black/30 rounded-lg px-3 py-2 mb-3 text-sm",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("span",{className:"font-bold text-white",children:r.aiMatches}),l.jsx("span",{className:"text-white/50 ml-1",children:c("multiplayer.matchesVsAI")})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("span",{className:"font-bold text-green-400",children:r.wins}),l.jsx("span",{className:"text-white/50 ml-1",children:c("multiplayer.wins")})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("span",{className:"font-bold text-yellow-400",children:[r.winRate,"%"]}),l.jsx("span",{className:"text-white/50 ml-1",children:c("multiplayer.winRate")})]})]}),l.jsx("div",{className:"grid grid-cols-2 gap-3 mb-3",children:y.map((N,_)=>l.jsxs(M.button,{whileHover:N.disabled?{}:{scale:1.02},whileTap:N.disabled?{}:{scale:.98},onClick:()=>E(N),disabled:N.disabled,className:`p-4 rounded-xl border-2 text-left transition-all ${N.disabled?"bg-gray-800/50 border-gray-700 opacity-50 cursor-not-allowed":"bg-gradient-to-br from-blue-600/30 to-purple-600/30 border-blue-500/50 hover:border-blue-400 cursor-pointer"} ${_===C?A:""}`,children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx("span",{className:"text-2xl",children:N.emoji}),l.jsx("h3",{className:"text-base font-bold text-white",children:N.name})]}),l.jsx("p",{className:"text-white/70 text-xs",children:N.description}),N.disabled&&l.jsx("div",{className:"mt-1 text-yellow-400 text-xs font-bold",children:c("multiplayer.comingSoon")})]},N.id))}),l.jsxs("button",{onClick:e,className:`w-full py-2 rounded-lg text-white/70 hover:text-white bg-white/10 hover:bg-white/20 transition-all text-sm font-bold ${C===y.length?A:""}`,children:[" ",c("multiplayer.back")]}),l.jsx("p",{className:"text-white/30 text-xs text-center mt-2",children:" B = voltar"})]})]})})}function aC({onComplete:e}){const[t,n]=v.useState(0),[r,s]=v.useState(!1);v.useEffect(()=>{localStorage.getItem("catTetris_tutorialCompleted")||s(!0)},[]);const i=[{title:" Bem-vindo ao Cat Tetris!",description:"Um Tetris com gatinhos e sistema de progresso viciante!",tips:[" Use as setas para mover as peas"," Seta para cima para rotacionar"," Seta para baixo para drop rpido","C para segurar pea (Hold)"]},{title:" Sistema de Moedas",description:"Ganhe Peixes () completando misses e conquistas!",tips:[" 3 misses dirias (resetam  meia-noite)"," 22 conquistas desbloqueveis"," Use  para comprar temas na loja"," Quanto mais voc joga, mais voc ganha!"]},{title:" Misses Dirias",description:"Complete desafios dirios para ganhar recompensas!",tips:[" Misso Fcil: 100"," Misso Mdia: 200"," Misso Difcil: 400"," Complete todas para celebrao especial!"]},{title:" Loja e Personalizao",description:"Customize suas peas com temas exclusivos!",tips:[" 10 temas diferentes disponveis"," Cristais e Espao so os mais caros"," Cada tema muda os emojis das peas"," Desbloqueie todos com suas moedas!"]},{title:" Ranking Global",description:"Compete com jogadores do mundo todo!",tips:[" Veja sua posio no ranking global"," 4 tipos de ranking: Global, Semanal, Pas, Ao Redor"," Compartilhe seus recordes"," Chegue ao Top 3 para medalha!"]},{title:" Pronto para Jogar!",description:"Agora voc sabe tudo. Divirta-se!",tips:[" Dica: Use a sombra da pea para planejar"," Faa combos para mais pontos"," T-Spins valem MUITO mais"," Modo Zen  perfeito para relaxar"]}],o=()=>{t<i.length-1?n(t+1):c()},a=()=>{c()},c=()=>{localStorage.setItem("catTetris_tutorialCompleted","true"),s(!1),e&&e()};if(!r)return null;const u=i[t],h=t===i.length-1,d=h?1:2,m=v.useCallback(x=>{h?o():x===0?a():o()},[h,t]),{selectedIndex:g}=Be({itemCount:d,onConfirm:m,onBack:a,active:r});return l.jsx(M.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/90 backdrop-blur-sm flex items-center justify-center z-[100] p-4",children:l.jsxs(M.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-gradient-to-br from-purple-900/95 to-indigo-900/95 rounded-2xl p-8 max-w-lg w-full border-2 border-white/20 shadow-2xl max-h-[90vh] overflow-y-auto",children:[l.jsx("div",{className:"flex gap-2 mb-6",children:i.map((x,b)=>l.jsx("div",{className:`h-2 flex-1 rounded-full transition-colors ${b<=t?"bg-green-500":"bg-white/20"}`},b))}),l.jsx(M.h2,{initial:{y:-20},animate:{y:0},className:"text-3xl font-bold text-white mb-3",children:u.title}),l.jsx(M.p,{initial:{y:-10},animate:{y:0},className:"text-white/80 text-lg mb-6",children:u.description}),l.jsx(M.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},className:"bg-black/30 rounded-lg p-4 mb-6 space-y-2",children:u.tips.map((x,b)=>l.jsxs(M.div,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.3+b*.1},className:"text-white/90 flex items-start gap-2",children:[l.jsx("span",{className:"text-green-400 mt-0.5",children:""}),l.jsx("span",{children:x})]},b))}),l.jsxs("div",{className:"flex gap-3",children:[!h&&l.jsx("button",{onClick:a,className:`flex-1 bg-white/10 hover:bg-white/20 text-white font-bold py-3 px-6 rounded-lg transition-colors ${g===0?"ring-2 ring-yellow-400":""}`,children:"Pular Tutorial"}),l.jsx("button",{onClick:o,className:`flex-1 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-400 hover:to-emerald-500 text-white font-bold py-3 px-6 rounded-lg transition-all shadow-lg ${(h?g===0:g===1)?"ring-2 ring-yellow-400":""}`,children:h?" Comear a Jogar!":"Prximo "})]}),l.jsxs("div",{className:"text-center mt-4 text-white/40 text-sm",children:["Passo ",t+1," de ",i.length," |   Pular"]})]},t)})}function lC(e){const[t,n]=v.useState(null),[r,s]=v.useState(!1),i=v.useRef(null),o=v.useRef(0);v.useEffect(()=>{if(!e){n(null),s(!1),i.current=null,o.current=0;return}const d=new Zn(new er,new tr,null,new Tn);return d.initializeGame(),d.isPlaying=!0,o.current=0,i.current=d,n(d.getGameState()),s(!0),()=>{i.current=null,s(!1)}},[e]);const a=v.useRef(0),c=v.useRef(null);v.useEffect(()=>{if(!i.current||!r)return;a.current=0;const d=m=>{var b;a.current||(a.current=m);const g=m-a.current;a.current=m;const x=i.current;if(x){x.isPlaying&&!x.isPaused&&!x.gameOver&&x.updateGame(g);const k=x.getGameState(),p=((b=k.score)==null?void 0:b.combo)||0;p>o.current&&(o.current=p),n(k)}c.current=requestAnimationFrame(d)};return c.current=requestAnimationFrame(d),()=>{c.current&&cancelAnimationFrame(c.current)}},[r]);const u={movePiece:v.useCallback(d=>{var m;(m=i.current)==null||m.movePiece(d)},[]),rotatePiece:v.useCallback(()=>{var d;(d=i.current)==null||d.rotatePiece()},[]),rotatePieceLeft:v.useCallback(()=>{var d,m;(m=(d=i.current)==null?void 0:d.rotatePieceLeft)==null||m.call(d)},[]),hardDrop:v.useCallback(()=>{var d;(d=i.current)==null||d.hardDrop()},[]),holdPiece:v.useCallback(()=>{var d;(d=i.current)==null||d.holdPiece()},[]),pause:v.useCallback(()=>{var d;(d=i.current)==null||d.pause()},[]),resume:v.useCallback(()=>{var d;(d=i.current)==null||d.resume()},[]),restart:v.useCallback(()=>{i.current&&(i.current.restart(),o.current=0)},[]),getDropPreview:v.useCallback(()=>{var d;try{return((d=i.current)==null?void 0:d.getDropPreview())||null}catch{return null}},[])},h=v.useCallback(()=>{var d,m,g,x,b;return t?{score:((d=t.score)==null?void 0:d.points)||0,level:((m=t.score)==null?void 0:m.level)||1,linesCleared:((g=t.score)==null?void 0:g.lines)||0,currentPiece:t.currentPiece,hasCurrentPiece:!!t.currentPiece,heldPiece:t.heldPiece,hasUsedHold:!!t.heldPiece,currentCombo:((x=t.score)==null?void 0:x.combo)||0,maxCombo:o.current,backToBackActive:t.backToBack||!1,board:t.board,gameOver:t.gameOver,isPlaying:t.isPlaying,isPaused:t.isPaused,tSpins:((b=t.score)==null?void 0:b.tSpins)||0}:null},[t]);return{gameState:t,actions:u,isInitialized:r,getValidationState:h}}const Vh={1:{difficulty:"easy",forceHold:!1,comboBoost:!1,label:"Movendo peas..."},2:{difficulty:"easy",forceHold:!0,comboBoost:!1,label:"Usando Hold (C)..."},3:{difficulty:"medium",forceHold:!1,comboBoost:!1,label:"Planejando jogadas..."},4:{difficulty:"medium",forceHold:!1,comboBoost:!0,label:"Buscando combos..."},5:{difficulty:"hard",forceHold:!1,comboBoost:!1,label:"Montando Tetris..."},6:{difficulty:"expert",forceHold:!0,comboBoost:!1,label:"Tentando T-Spins..."},7:{difficulty:"expert",forceHold:!0,comboBoost:!1,label:"Buscando Back-to-Back..."},8:{difficulty:"hard",forceHold:!0,comboBoost:!1,label:"Jogando no mximo..."}};function cC(e,t){const[n,r]=v.useState(null),[s,i]=v.useState(!1),[o,a]=v.useState(!1),[c,u]=v.useState(""),h=v.useRef(null),d=v.useRef(null),m=v.useRef(0),g=v.useRef(null),x=v.useRef(0),b=v.useRef(0),k=v.useRef(0),p=v.useRef(null),f=250,y=25;v.useEffect(()=>{if(!e){r(null),i(!1),a(!1),u(""),h.current=null,d.current=null,b.current=0,k.current=0,g.current&&cancelAnimationFrame(g.current);return}const S=Vh[t]||Vh[1];p.current=S,u(S.label);const C=new Zn(new er,new tr,null,new Tn);C.initializeGame(),C.isPlaying=!0;const P=new Ss;if(P.setDifficulty(S.difficulty),P.thinkingTime=0,S.comboBoost){const T=P._evaluateBoard.bind(P);P._evaluateBoard=(j,E)=>{let L=T(j,E);for(let A=0;A<j.length;A++){const N=j[A].filter(_=>_!=null).length;N>=8&&(L+=200),N>=9&&(L+=500)}return L}}return h.current=C,d.current=P,b.current=0,k.current=0,x.current=0,m.current=0,r(C.getGameState()),i(!0),a(!1),()=>{g.current&&cancelAnimationFrame(g.current),h.current=null,d.current=null}},[e,t]),v.useEffect(()=>{if(!h.current||!s||!e)return;m.current=0,x.current=0;let S=null;const C=P=>{var A;m.current||(m.current=P);const T=P-m.current;m.current=P;const j=h.current,E=d.current,L=p.current;if(j&&E&&!j.gameOver){j.isPlaying&&!j.isPaused&&j.updateGame(T);const N=j.getGameState(),_=(A=N.currentPiece)==null?void 0:A.type;if(S&&_!==S&&(b.current++,k.current++,b.current>=y)){a(!0),r(N);return}if(S=_,x.current+=T,x.current>=f){if(x.current=0,L!=null&&L.forceHold&&k.current>=3&&N.currentPiece&&N.canHold!==!1){j.holdPiece(),k.current=0,r(j.getGameState()),g.current=requestAnimationFrame(C);return}const se=E.decideNextMove(N);if(se)switch(se.action){case"left":j.movePiece("left");break;case"right":j.movePiece("right");break;case"rotate":j.rotatePiece();break;case"down":j.movePiece("down");break;case"drop":j.hardDrop();break;case"hold":j.holdPiece();break}}r(N)}else if(j!=null&&j.gameOver){a(!0),r(j.getGameState());return}g.current=requestAnimationFrame(C)};return g.current=requestAnimationFrame(C),()=>{g.current&&cancelAnimationFrame(g.current)}},[s,e]);const w=v.useCallback(()=>{var S;try{return((S=h.current)==null?void 0:S.getDropPreview())||null}catch{return null}},[]);return{gameState:n,isInitialized:s,demoComplete:o,statusLabel:c,getDropPreview:w}}function O0(e,t,n=!0){const r=v.useRef(t);r.current=t;const s=v.useRef(e);s.current=e,v.useEffect(()=>{if(!(!e||!n))try{const d=q.resolve("keyboardInputService"),m=()=>{var S;return!((S=r.current)!=null&&S.gameOver)},g=()=>{m()&&s.current.movePiece("left")},x=()=>{m()&&s.current.movePiece("right")},b=()=>{m()&&s.current.movePiece("down")},k=()=>{m()&&s.current.rotatePiece()},p=()=>{var S,C;m()&&((C=(S=s.current).rotatePieceLeft)==null||C.call(S))},f=()=>{m()&&s.current.hardDrop()},y=()=>{m()&&s.current.holdPiece()},w=()=>{var S,C;(S=r.current)!=null&&S.gameOver||((C=r.current)!=null&&C.isPaused?s.current.resume():s.current.pause())};return d.registerHandler("moveLeft",g),d.registerHandler("moveRight",x),d.registerHandler("moveDown",b),d.registerHandler("rotate",k),d.registerHandler("rotateLeft",p),d.registerHandler("hardDrop",f),d.registerHandler("hold",y),d.registerHandler("pause",w),d.startListening(),()=>{d.unregisterHandler("moveLeft",g),d.unregisterHandler("moveRight",x),d.unregisterHandler("moveDown",b),d.unregisterHandler("rotate",k),d.unregisterHandler("rotateLeft",p),d.unregisterHandler("hardDrop",f),d.unregisterHandler("hold",y),d.unregisterHandler("pause",w),d.stopListening()}}catch{return()=>{}}},[n]);const i=v.useCallback((d,m)=>{try{q.resolve("keyboardInputService").setKeyMapping(d,m)}catch{}},[]),o=v.useCallback(()=>{try{return q.resolve("keyboardInputService").getKeyMappings()}catch{return{}}},[]),a=v.useCallback(d=>{try{q.resolve("keyboardInputService").setDAS(d)}catch{}},[]),c=v.useCallback(d=>{try{q.resolve("keyboardInputService").setARR(d)}catch{}},[]),u=v.useCallback(()=>{try{return q.resolve("keyboardInputService").getDAS()}catch{return 133}},[]),h=v.useCallback(()=>{try{return q.resolve("keyboardInputService").getARR()}catch{return 10}},[]);return{customizeKeyMapping:i,getKeyMappings:o,setDAS:a,setARR:c,getDAS:u,getARR:h}}function uC({show:e,onComplete:t}){const[n,r]=v.useState([]);return v.useEffect(()=>{if(!e)return;const s=Array.from({length:50},(o,a)=>({id:a,x:Math.random()*window.innerWidth,y:-20,rotation:Math.random()*360,color:["#FF6B6B","#4ECDC4","#45B7D1","#FFA07A","#98D8C8","#F7DC6F","#BB8FCE","#85C1E2"][Math.floor(Math.random()*8)],size:Math.random()*10+5,delay:Math.random()*.5,duration:Math.random()*2+2,xOffset:(Math.random()-.5)*300}));r(s);const i=setTimeout(()=>{r([]),t&&t()},4e3);return()=>clearTimeout(i)},[e,t]),!e||n.length===0?null:l.jsx("div",{className:"fixed inset-0 pointer-events-none z-50 overflow-hidden",children:n.map(s=>l.jsx(M.div,{initial:{x:s.x,y:s.y,rotate:0,opacity:1},animate:{x:s.x+s.xOffset,y:window.innerHeight+100,rotate:s.rotation+720,opacity:0},transition:{duration:s.duration,delay:s.delay,ease:"easeIn"},style:{position:"absolute",width:s.size,height:s.size,backgroundColor:s.color,borderRadius:"50%"}},s.id))})}function dC({lesson:e,onStartDemo:t,onStartPractice:n,gamepadSelectedIndex:r}){return l.jsxs(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"max-w-lg mx-auto",children:[l.jsxs("div",{className:"bg-white/[0.06] border border-white/[0.08] rounded-xl p-6 mb-5 text-center",children:[l.jsx("div",{className:"text-4xl mb-3",children:""}),l.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:"Objetivo"}),l.jsx("p",{className:"text-white/70 text-base leading-relaxed",children:e.practice.objective})]}),e.intro&&e.intro.length>0&&l.jsxs("div",{className:"bg-white/[0.04] border border-white/[0.06] rounded-xl p-5 mb-5",children:[l.jsx("h4",{className:"text-sm font-semibold text-white/50 uppercase tracking-wide mb-3",children:"Como funciona"}),l.jsx("div",{className:"space-y-2.5",children:e.intro.map((s,i)=>l.jsxs(M.p,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:i*.08},className:"text-white/70 text-sm leading-relaxed flex items-start gap-2",children:[l.jsxs("span",{className:"text-white/25 font-mono text-xs mt-0.5 flex-shrink-0",children:[i+1,"."]}),l.jsx("span",{children:s})]},i))})]}),e.rewards&&l.jsxs("div",{className:"flex justify-center gap-4 mb-5 text-xs text-white/30",children:[l.jsxs("span",{children:[" ",e.rewards.fishCoins]}),l.jsxs("span",{children:[" ",e.rewards.xp," XP"]})]}),l.jsxs("div",{className:"flex flex-col items-center gap-3",children:[l.jsxs(M.button,{whileHover:{scale:1.03},whileTap:{scale:.97},onClick:t,className:`bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-500 hover:to-indigo-500
                   text-white px-8 py-3 rounded-xl font-bold text-sm shadow-lg shadow-blue-900/30 transition-all
                   flex items-center gap-2 ${r===1?"ring-2 ring-yellow-400":""}`,children:[l.jsx("span",{children:""}),l.jsx("span",{children:"Ver IA Jogar Primeiro"})]}),l.jsx("button",{onClick:n,className:`text-white/30 hover:text-white/50 text-xs transition-all ${r===2?"ring-2 ring-yellow-400 rounded-lg px-2 py-1":""}`,children:"Ir direto para prtica "})]})]},"intro")}function hC({lesson:e,gameState:t,isInitialized:n,demoComplete:r,dropPreview:s,statusLabel:i,onSkip:o,gamepadSelectedIndex:a}){var u,h,d,m,g;if(!t||!n)return l.jsx("div",{className:"text-center text-white/40 text-sm py-12",children:"Preparando demonstrao..."});const c=v.useMemo(()=>{var k;if(!e.intro||e.intro.length===0)return null;const x=((k=t.score)==null?void 0:k.lines)||0,b=Math.min(Math.floor(x/2),e.intro.length-1);return e.intro[b]},[e.intro,(u=t.score)==null?void 0:u.lines]);return l.jsxs(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"text-center",children:[l.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-xl p-3 mb-3 max-w-md mx-auto",children:[l.jsxs("div",{className:"flex items-center justify-center gap-2",children:[l.jsx("span",{className:"text-lg",children:""}),l.jsx("p",{className:"text-sm font-semibold text-blue-300",children:"IA jogando  observe como ela faz!"})]}),i&&l.jsx("p",{className:"text-xs text-blue-400/70 mt-1",children:i})]}),c&&l.jsx(M.div,{initial:{opacity:0,y:-5},animate:{opacity:1,y:0},className:"bg-white/[0.04] border border-white/[0.06] rounded-lg p-2.5 mb-3 max-w-md mx-auto",children:l.jsxs("p",{className:"text-xs text-white/60",children:[" ",c]})},c),l.jsxs("div",{className:"flex gap-3 justify-center items-start",children:[l.jsx(Yn,{heldPiece:t.heldPiece,canHold:t.canHold}),l.jsx(Pn,{board:t.board,currentPiece:t.currentPiece,dropPreview:s,gameOver:t.gameOver}),l.jsxs("div",{className:"flex flex-col gap-3",children:[l.jsx(Jn,{pieces:t.nextPieces||[]}),l.jsx(Xn,{score:((h=t.score)==null?void 0:h.points)||0,level:((d=t.score)==null?void 0:d.level)||1,lines:((m=t.score)==null?void 0:m.lines)||0,combo:((g=t.score)==null?void 0:g.combo)||0})]})]}),l.jsx("div",{className:"mt-4",children:r?l.jsx(M.button,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},whileHover:{scale:1.03},whileTap:{scale:.97},onClick:o,className:`bg-gradient-to-r from-emerald-600 to-green-600 hover:from-emerald-500 hover:to-green-500
                     text-white px-6 py-2.5 rounded-xl font-bold text-sm shadow-lg shadow-emerald-900/30 transition-all ${a===1?"ring-2 ring-yellow-400":""}`,children:"  Agora  sua vez!"}):l.jsx("button",{onClick:o,className:`text-white/30 hover:text-white/50 text-xs transition-all ${a===1?"ring-2 ring-yellow-400 rounded-lg px-2 py-1":""}`,children:"Pular demonstrao "})})]},"demo")}function mC({lesson:e,gameState:t,isInitialized:n,practiceState:r,onRestart:s,dropPreview:i,gamepadSelectedIndex:o}){var a,c,u,h;return!t||!n?l.jsx("div",{className:"text-center text-white/40 text-sm py-12",children:"Carregando..."}):l.jsxs(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"text-center",children:[l.jsxs("div",{className:"bg-white/[0.06] border border-white/[0.06] rounded-xl p-3 mb-3 max-w-md mx-auto",children:[l.jsxs("p",{className:"text-sm font-semibold text-white mb-2",children:[" ",e.practice.objective]}),r.progress>0&&l.jsxs("div",{children:[l.jsx("div",{className:"h-1.5 bg-white/[0.08] rounded-full overflow-hidden",children:l.jsx(M.div,{className:`h-full rounded-full ${r.complete?"bg-emerald-400":"bg-gradient-to-r from-blue-500 to-indigo-500"}`,initial:{width:0},animate:{width:`${Math.min(100,r.progress*100)}%`},transition:{duration:.3}})}),l.jsxs("div",{className:"text-white/30 text-[10px] mt-1",children:[Math.round(r.progress*100),"%"]})]})]}),l.jsxs("div",{className:"flex gap-3 justify-center items-start",children:[l.jsx(Yn,{heldPiece:t.heldPiece,canHold:t.canHold}),l.jsx(Pn,{board:t.board,currentPiece:t.currentPiece,dropPreview:i,gameOver:t.gameOver}),l.jsxs("div",{className:"flex flex-col gap-3",children:[l.jsx(Jn,{pieces:t.nextPieces||[]}),l.jsx(Xn,{score:((a=t.score)==null?void 0:a.points)||0,level:((c=t.score)==null?void 0:c.level)||1,lines:((u=t.score)==null?void 0:u.lines)||0,combo:((h=t.score)==null?void 0:h.combo)||0})]})]}),l.jsx("div",{className:"mt-3 text-white/20 text-[10px]",children:" Mover   Rotao   Soft Drop  Espao: Hard Drop  C: Hold"}),r.feedback&&!r.complete&&l.jsx(M.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"mt-3 bg-white/[0.06] border border-white/[0.08] rounded-lg p-3 max-w-md mx-auto",children:l.jsx("p",{className:"text-sm text-white/70",children:r.feedback})},r.feedback),t.gameOver&&!r.complete&&l.jsxs(M.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"mt-4",children:[l.jsx("p",{className:"text-white/40 text-sm mb-2",children:"Game Over  tente de novo!"}),l.jsx("button",{onClick:s,className:`bg-white/[0.08] hover:bg-white/[0.12] text-white text-sm px-4 py-2 rounded-lg transition-all ${o===1?"ring-2 ring-yellow-400":""}`,children:" Recomear"})]}),r.complete&&l.jsxs(M.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",bounce:.4},className:"mt-4 bg-emerald-500/10 border border-emerald-500/20 rounded-xl p-6 max-w-sm mx-auto",children:[l.jsx("div",{className:"text-4xl mb-2",children:""}),l.jsx("h3",{className:"text-lg font-bold text-white mb-1",children:"Parabns!"}),l.jsx("p",{className:"text-emerald-300/70 text-sm",children:r.feedback})]})]},"practice")}function fC({lesson:e,onComplete:t,onExit:n}){const[r,s]=v.useState("introduction"),[i,o]=v.useState({progress:0,feedback:"",complete:!1}),[a,c]=v.useState(!1),{gameState:u,isInitialized:h,demoComplete:d,statusLabel:m,getDropPreview:g}=cC(r==="demo",e==null?void 0:e.id),x=v.useMemo(()=>r!=="demo"||!h?null:(g==null?void 0:g())||null,[r,h,g,u]),{gameState:b,actions:k,isInitialized:p,getValidationState:f}=lC(r==="practice"?e:null);O0(k,b,r==="practice"&&p);const y=v.useMemo(()=>{var A;return r!=="practice"||!p?null:((A=k.getDropPreview)==null?void 0:A.call(k))||null},[r,p,k,b]);v.useEffect(()=>{var _;if(r!=="practice"||!p||!b)return;const A=f();if(!A||!((_=e.practice)!=null&&_.validate))return;const N=e.practice.validate(A);o(se=>({...se,progress:N.progress||0,feedback:N.feedback||"",complete:N.complete||!1})),N.complete&&!i.complete&&(c(!0),setTimeout(()=>{t(e.id,{score:A.score})},2e3))},[r,p,b,e,f,i.complete,t]);const w=v.useCallback(()=>{s("demo")},[]),S=v.useCallback(()=>{s("practice"),o({progress:0,feedback:"",complete:!1})},[]),C=v.useCallback(()=>{var A;(A=k.restart)==null||A.call(k),o({progress:0,feedback:"",complete:!1})},[k]),P=r==="practice"&&p&&b&&!b.gameOver,T=r==="introduction"?3:r==="demo"||b!=null&&b.gameOver&&!i.complete?2:1,j=v.useCallback(A=>{if(A===0){n();return}r==="introduction"?A===1?w():A===2&&S():r==="demo"?A===1&&S():r==="practice"&&(b!=null&&b.gameOver)&&A===1&&C()},[r,b==null?void 0:b.gameOver,n,w,S,C]),{selectedIndex:E}=Be({itemCount:T,onConfirm:j,onBack:n,active:!P}),L=r==="introduction"?"":r==="demo"?"":"";return l.jsxs("div",{className:"fixed inset-0 bg-gradient-to-b from-slate-900 via-indigo-950 to-slate-900 z-50 flex flex-col",children:[l.jsx("div",{className:"bg-black/30 border-b border-white/[0.06] px-4 py-2 flex-shrink-0",children:l.jsxs("div",{className:"flex items-center justify-between max-w-4xl mx-auto",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("span",{className:"text-2xl",children:e.module==="fundamentals"?"":e.module==="intermediate"?"":e.module==="advanced"?"":""}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-bold text-white",children:e.title}),l.jsx("p",{className:"text-white/40 text-xs",children:e.description})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-xs text-white/30 bg-white/[0.06] px-2 py-1 rounded",children:L}),l.jsx("button",{onClick:n,className:`text-white/40 hover:text-white/70 bg-white/[0.06] hover:bg-white/[0.1] rounded-lg px-3 py-1.5 text-sm transition-all ${E===0?"ring-2 ring-yellow-400":""}`,children:""})]})]})}),l.jsx("div",{className:"flex-1 overflow-auto p-3",children:l.jsx("div",{className:"max-w-4xl w-full mx-auto",children:l.jsxs(ke,{mode:"wait",children:[r==="introduction"&&l.jsx(dC,{lesson:e,onStartDemo:w,onStartPractice:S,gamepadSelectedIndex:E}),r==="demo"&&l.jsx(hC,{lesson:e,gameState:u,isInitialized:h,demoComplete:d,dropPreview:x,statusLabel:m,onSkip:S,gamepadSelectedIndex:E}),r==="practice"&&l.jsx(mC,{lesson:e,gameState:b,isInitialized:p,practiceState:i,onRestart:C,dropPreview:y,gamepadSelectedIndex:E})]})})}),l.jsx(uC,{show:a,onComplete:()=>c(!1)})]})}function pC({tutorialService:e,onClose:t,onLessonComplete:n}){const[r,s]=v.useState(null),[i,o]=v.useState(e.getProgress()),[a,c]=v.useState("fundamentals"),{t:u}=Me(),h=e.lessons,d=[{key:"fundamentals",icon:"",name:u("tutorial.fundamentals"),desc:u("tutorial.fundamentalsDesc")},{key:"intermediate",icon:"",name:u("tutorial.intermediate"),desc:u("tutorial.intermediateDesc")},{key:"advanced",icon:"",name:u("tutorial.advanced"),desc:u("tutorial.advancedDesc")},{key:"pro",icon:"",name:u("tutorial.pro"),desc:u("tutorial.proDesc")}],m=h.filter(S=>S.module===a),g=S=>{const C=h.filter(T=>T.module===S).map(T=>T.id);return{done:C.filter(T=>i.completedLessons.includes(T)).length,total:C.length}},x=(S,C)=>{const P=e.completeLesson(S,C);o(e.getProgress()),s(null),n&&n(P)},b=S=>i.unlockedLessons.includes(S),k=S=>i.completedLessons.includes(S),{selectedIndex:p}=Be({itemCount:m.length,onConfirm:S=>{const C=m[S];C&&b(C.id)&&s(C)},onBack:t,active:!r,wrap:!0});if(r)return l.jsx(fC,{lesson:r,onComplete:x,onExit:()=>s(null)});const f=i.completedLessons.length,y=h.length,w=y>0?Math.round(f/y*100):0;return l.jsx(M.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-gradient-to-b from-slate-900 via-indigo-950 to-slate-900 z-40 overflow-y-auto",children:l.jsxs("div",{className:"min-h-screen max-w-lg mx-auto px-4 py-6 flex flex-col",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-extrabold text-white",children:u("tutorial.title")}),l.jsx("p",{className:"text-white/40 text-sm mt-0.5",children:u("tutorial.subtitle")})]}),l.jsx("button",{onClick:t,className:"text-white/40 hover:text-white/70 bg-white/[0.06] hover:bg-white/[0.1] rounded-lg px-3 py-1.5 text-sm transition-all",children:u("tutorial.close")})]}),l.jsxs("div",{className:"mb-6",children:[l.jsxs("div",{className:"flex justify-between text-xs text-white/40 mb-1.5",children:[l.jsx("span",{children:u("tutorial.overallProgress")}),l.jsxs("span",{children:[f,"/",y," (",w,"%)"]})]}),l.jsx("div",{className:"h-2 bg-white/[0.08] rounded-full overflow-hidden",children:l.jsx(M.div,{className:"h-full bg-gradient-to-r from-emerald-500 to-green-400 rounded-full",initial:{width:0},animate:{width:`${w}%`},transition:{duration:.6,ease:"easeOut"}})})]}),l.jsx("div",{className:"flex gap-1.5 mb-5 overflow-x-auto pb-1 -mx-1 px-1",children:d.map(S=>{const C=g(S.key),P=a===S.key;return l.jsx("button",{onClick:()=>c(S.key),className:`flex-shrink-0 rounded-lg px-3 py-2 text-left transition-all duration-150 ${P?"bg-white/[0.12] border border-white/[0.15]":"bg-white/[0.04] border border-transparent hover:bg-white/[0.07]"}`,children:l.jsxs("div",{className:"flex items-center gap-1.5",children:[l.jsx("span",{className:"text-base",children:S.icon}),l.jsx("span",{className:`text-xs font-semibold ${P?"text-white":"text-white/50"}`,children:S.name}),l.jsxs("span",{className:`text-[10px] ml-1 ${C.done===C.total&&C.total>0?"text-emerald-400":"text-white/30"}`,children:[C.done,"/",C.total]})]})},S.key)})}),l.jsx("div",{className:"flex-1 space-y-2",children:l.jsx(ke,{mode:"wait",children:l.jsxs(M.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},transition:{duration:.2},className:"space-y-2",children:[m.map((S,C)=>{var j,E;const P=b(S.id),T=k(S.id);return l.jsxs(M.button,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:C*.04},disabled:!P,onClick:()=>P&&s(S),className:`w-full text-left rounded-xl p-4 transition-all duration-150 flex items-center gap-3 ${P?"bg-white/[0.06] hover:bg-white/[0.1] border border-white/[0.06] hover:border-white/[0.12] active:scale-[0.99]":"bg-white/[0.02] border border-white/[0.03] opacity-40 cursor-not-allowed"} ${T?"border-emerald-500/30":""} ${C===p?"ring-2 ring-yellow-400 ring-offset-2 ring-offset-slate-900":""}`,children:[l.jsx("div",{className:`w-9 h-9 rounded-lg flex items-center justify-center text-sm flex-shrink-0 ${T?"bg-emerald-500/20 text-emerald-400":P?"bg-white/[0.08] text-white/60":"bg-white/[0.04] text-white/20"}`,children:T?"":P?C+1:""}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("div",{className:"text-sm font-semibold text-white truncate",children:S.title}),l.jsx("div",{className:"text-xs text-white/35 mt-0.5 truncate",children:S.description}),l.jsxs("div",{className:"flex items-center gap-3 mt-1.5 text-[10px] text-white/25",children:[l.jsxs("span",{children:[" ",S.estimatedTime]}),l.jsxs("span",{children:[" ",((j=S.rewards)==null?void 0:j.fishCoins)||0]}),l.jsxs("span",{children:[" ",((E=S.rewards)==null?void 0:E.xp)||0," XP"]})]})]}),l.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[l.jsx("span",{className:`w-2 h-2 rounded-full ${S.difficulty==="beginner"?"bg-green-400":S.difficulty==="intermediate"?"bg-yellow-400":S.difficulty==="advanced"?"bg-red-400":"bg-purple-400"}`}),P&&l.jsx("svg",{className:"w-4 h-4 text-white/20",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]},S.id)}),m.length===0&&l.jsx("div",{className:"text-center py-12 text-white/20 text-sm",children:u("tutorial.noLessons")})]},a)})}),i.badges.length>0&&l.jsxs("div",{className:"mt-6 pt-4 border-t border-white/[0.06]",children:[l.jsx("div",{className:"text-xs text-white/30 mb-2",children:u("tutorial.badgesEarned")}),l.jsx("div",{className:"flex flex-wrap gap-2",children:i.badges.map(S=>l.jsxs("span",{className:"bg-amber-500/10 text-amber-300/70 text-[10px] px-2 py-1 rounded-md font-medium",children:[" ",S.replace(/_/g," ")]},S))})]})]})})}function gC({reward:e,onClose:t}){var r,s,i;const{t:n}=Me();return ae.useEffect(()=>{const o=setTimeout(()=>{t()},5e3);return()=>clearTimeout(o)},[t]),e?l.jsx(M.div,{initial:{opacity:0,y:-50,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,scale:.9},className:"fixed top-24 right-6 z-[60] max-w-md",children:l.jsx("div",{className:"bg-gradient-to-br from-green-600 to-emerald-600 rounded-xl p-6 shadow-2xl border-2 border-white/20",children:l.jsxs("div",{className:"flex items-start gap-4",children:[l.jsx("div",{className:"text-4xl",children:""}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:n("reward.lessonComplete")}),e.lessonTitle&&l.jsx("p",{className:"text-white/90 text-sm mb-3",children:e.lessonTitle}),l.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[((r=e.rewards)==null?void 0:r.fishCoins)>0&&l.jsxs("div",{className:"bg-white/10 rounded-lg p-2 text-center",children:[l.jsx("div",{className:"text-xl",children:""}),l.jsxs("div",{className:"text-lg font-bold text-white",children:["+",e.rewards.fishCoins]}),l.jsx("div",{className:"text-xs text-white/70",children:n("reward.fish")})]}),((s=e.rewards)==null?void 0:s.xp)>0&&l.jsxs("div",{className:"bg-white/10 rounded-lg p-2 text-center",children:[l.jsx("div",{className:"text-xl",children:""}),l.jsxs("div",{className:"text-lg font-bold text-white",children:["+",e.rewards.xp]}),l.jsx("div",{className:"text-xs text-white/70",children:n("reward.xp")})]}),((i=e.rewards)==null?void 0:i.badge)&&l.jsxs("div",{className:"bg-white/10 rounded-lg p-2 text-center",children:[l.jsx("div",{className:"text-xl",children:""}),l.jsx("div",{className:"text-xs font-bold text-white mt-1",children:n("reward.badge")}),l.jsx("div",{className:"text-xs text-white/70",children:e.rewards.badge.split("_")[0]})]})]})]}),l.jsx("button",{onClick:t,className:"text-white/60 hover:text-white transition-colors",children:""})]})})}):null}function vC(){const[e,t]=v.useState(null),n=v.useRef(null),r=v.useRef(null),s=v.useRef(0),i=v.useRef(!1),o=v.useRef(!1);v.useEffect(()=>{if(!i.current){i.current=!0;try{const w=q.resolve("gameService");n.current=w,w.initializeGame(),t(w.getGameState());const S=()=>{o.current=!0};return Object.values(V).forEach(C=>{G.on(C,S)}),()=>{Object.values(V).forEach(C=>{G.off(C,S)}),r.current&&cancelAnimationFrame(r.current)}}catch(w){throw Gt.logError("useGameService","init",w.message,{stack:w.stack}),w}}},[]),v.useEffect(()=>{if(!n.current)return;const w=S=>{s.current||(s.current=S);const C=S-s.current;s.current=S,n.current&&(n.current.isPlaying&&!n.current.isPaused&&!n.current.gameOver&&n.current.updateGame(C),o.current&&(o.current=!1,t(n.current.getGameState()))),r.current=requestAnimationFrame(w)};return r.current=requestAnimationFrame(w),()=>{r.current&&cancelAnimationFrame(r.current)}},[]);const a=v.useCallback(w=>(...S)=>{if(n.current&&typeof n.current[w]=="function")try{return n.current[w](...S)}catch(C){if(Gt.logError("useGameService",w,C.message,{stack:C.stack,args:S.map(P=>String(P).slice(0,100))}),w==="getDropPreview")return null;throw C}},[]),c=v.useCallback(a("movePiece"),[a]),u=v.useCallback(a("rotatePiece"),[a]),h=v.useCallback(a("rotatePieceLeft"),[a]),d=v.useCallback(a("hardDrop"),[a]),m=v.useCallback(a("holdPiece"),[a]),g=v.useCallback(a("getDropPreview"),[a]),x=v.useCallback(a("pause"),[a]),b=v.useCallback(a("resume"),[a]),k=v.useCallback(a("restart"),[a]),p=v.useCallback(a("saveGame"),[a]),f=v.useCallback(a("loadGame"),[a]);return{gameState:e,actions:{movePiece:c,rotatePiece:u,rotatePieceLeft:h,hardDrop:d,holdPiece:m,getDropPreview:g,pause:x,resume:b,restart:k,saveGame:p,loadGame:f}}}function yC(){const[e,t]=v.useState({volume:80,gameSpeed:"normal",soundEnabled:!0,particlesEnabled:!0,das:167,arr:33}),[n,r]=v.useState(!0),[s,i]=v.useState(null);v.useEffect(()=>{try{const h=q.resolve("settingsService").getSettings();t(h||{volume:80,gameSpeed:"normal",soundEnabled:!0,particlesEnabled:!0,das:167,arr:33}),r(!1)}catch(u){i(u.message),r(!1),t({volume:80,gameSpeed:"normal",soundEnabled:!0,particlesEnabled:!0,das:167,arr:33})}},[]);const o=v.useCallback(async u=>{try{i(null);const d=q.resolve("settingsService").saveSettings(u);return t(d),d}catch(h){throw i(h.message),h}},[]),a=v.useCallback(async(u,h)=>{try{i(null);const m=q.resolve("settingsService").updateSetting(u,h);return t(m),m}catch(d){throw i(d.message),d}},[]),c=v.useCallback(async()=>{try{i(null);const h=q.resolve("settingsService").resetSettings();return t(h),h}catch(u){throw i(u.message),u}},[]);return{settings:e,loading:n,error:s,updateSettings:o,updateSetting:a,resetSettings:c}}function xC(){const e=v.useCallback((k,p,f="sine",y=.1)=>{const w=Br();if(w)try{const S=w.createOscillator(),C=w.createGain();S.connect(C),C.connect(w.destination),S.frequency.setValueAtTime(k,w.currentTime),S.type=f,C.gain.setValueAtTime(y,w.currentTime),C.gain.exponentialRampToValueAtTime(.001,w.currentTime+p),S.start(w.currentTime),S.stop(w.currentTime+p)}catch{}},[]),t=v.useCallback((k,p=.05)=>{const f=Br();if(f)try{const y=f.sampleRate*k,w=f.createBuffer(1,y,f.sampleRate),S=w.getChannelData(0);for(let P=0;P<y;P++)S[P]=(Math.random()*2-1)*p;const C=f.createBufferSource();C.buffer=w,C.connect(f.destination),C.start()}catch{}},[]),n=v.useCallback(k=>{switch(k){case"I":[800,700,600,500].forEach((p,f)=>{setTimeout(()=>e(p,.1,"square",.08),f*50)});break;case"O":e(600,.1,"sine",.1),setTimeout(()=>e(600,.1,"sine",.1),80);break;case"T":e(523,.08,"triangle",.08),setTimeout(()=>e(659,.08,"triangle",.08),40),setTimeout(()=>e(523,.08,"triangle",.08),80);break;case"S":[440,494,523,587].forEach((p,f)=>{setTimeout(()=>e(p,.06,"sawtooth",.06),f*30)});break;case"Z":[587,523,494,440].forEach((p,f)=>{setTimeout(()=>e(p,.06,"sawtooth",.06),f*30)});break;case"J":[330,415,523].forEach((p,f)=>{setTimeout(()=>e(p,.15,"triangle",.07),f*20)});break;case"L":[392,494,659].forEach((p,f)=>{setTimeout(()=>e(p,.15,"sine",.08),f*30)});break;default:e(440,.1,"sine",.05)}},[e]),r=v.useCallback(k=>{switch(k){case 1:[440,494,523].forEach((p,f)=>{setTimeout(()=>e(p,.1,"triangle",.1),f*80)});break;case 2:[440,523,659,784].forEach((p,f)=>{setTimeout(()=>e(p,.12,"triangle",.1),f*60)});break;case 3:[523,659,784,1047,1319].forEach((p,f)=>{setTimeout(()=>e(p,.15,"triangle",.12),f*50)});break;case 4:t(.02),setTimeout(()=>{[262,330,392,523,659,784,1047].forEach((p,f)=>{setTimeout(()=>e(p,.2,"sawtooth",.15),f*40)})},50),setTimeout(()=>{[1047,1319,1568,2093].forEach((p,f)=>{setTimeout(()=>e(p,.3,"triangle",.2),f*30)})},350);break}},[e,t]),s=v.useCallback(()=>{[{freq:523,delay:0},{freq:659,delay:100},{freq:784,delay:200},{freq:1047,delay:300},{freq:784,delay:400},{freq:1047,delay:500},{freq:1319,delay:600},{freq:1568,delay:700}].forEach(p=>{setTimeout(()=>e(p.freq,.15,"triangle",.12),p.delay)}),setTimeout(()=>{[1047,1319,1568,2093].forEach((p,f)=>{setTimeout(()=>e(p,.4,"triangle",.15),f*50)})},800)},[e]),i=v.useCallback(()=>{e(200,.05,"square",.03),e(120,.06,"sine",.04)},[e]),o=v.useCallback(()=>{t(.04,.08),e(80,.08,"square",.12),e(60,.1,"sine",.1)},[e,t]),a=v.useCallback(()=>{t(.03,.04),[349,440,523,659,784].forEach((k,p)=>{setTimeout(()=>e(k,.2,"sawtooth",.1),p*40)}),setTimeout(()=>{e(1047,.4,"triangle",.15)},250)},[e,t]),c=v.useCallback(()=>{[660,880,1100,1320,1760].forEach((k,p)=>{setTimeout(()=>e(k,.12,"triangle",.08),p*50)})},[e]),u=v.useCallback(k=>{const p=400+k*80;e(p,.1,"triangle",.08),setTimeout(()=>e(p*1.25,.08,"triangle",.06),50)},[e]),h=v.useCallback(()=>{[523,494,440,392,349,330,294,262].forEach((p,f)=>{setTimeout(()=>e(p,.3,"sine",.1),f*150)})},[e]),d=v.useCallback(()=>{e(440,.2,"triangle",.08)},[e]),m=v.useCallback(()=>{e(523,.15,"triangle",.08),setTimeout(()=>e(659,.1,"triangle",.06),100)},[e]),g=v.useCallback(()=>{e(880,.1,"sine",.06),setTimeout(()=>e(1100,.08,"sine",.05),60)},[e]),x=v.useCallback(()=>{e(1200,.05,"square",.04)},[e]),b=v.useCallback(()=>{e(800,.03,"square",.02)},[e]);return{playPieceSound:n,playLineClear:r,playLevelUp:s,playPieceLand:i,playHardDrop:o,playTSpin:a,playBackToBack:c,playCombo:u,playGameOver:h,playPause:d,playResume:m,playHold:g,playRotate:x,playMove:b}}function wC(){const e=xC(),t=v.useRef(e);t.current=e,v.useEffect(()=>{const n=()=>t.current,r=x=>{var b;n().playPieceLand(),(b=x==null?void 0:x.piece)!=null&&b.type&&n().playPieceSound(x.piece.type)},s=x=>{(x==null?void 0:x.linesCleared)>0&&n().playLineClear(x.linesCleared)},i=()=>n().playHardDrop(),o=()=>n().playTSpin(),a=()=>n().playBackToBack(),c=x=>{(x==null?void 0:x.combo)>=2&&n().playCombo(x.combo)},u=()=>n().playHold(),h=()=>n().playRotate(),d=()=>n().playMove(),m=()=>n().playGameOver(),g=()=>n().playLevelUp();return G.on(V.PIECE_PLACED,r),G.on(V.LINE_CLEARED,s),G.on(V.HARD_DROP,i),G.on(V.T_SPIN,o),G.on(V.BACK_TO_BACK,a),G.on(V.SCORE_UPDATED,c),G.on(V.PIECE_HELD,u),G.on(V.PIECE_ROTATED,h),G.on(V.PIECE_MOVED,d),G.on(V.GAME_OVER,m),G.on(V.LEVEL_UP,g),()=>{G.off(V.PIECE_PLACED,r),G.off(V.LINE_CLEARED,s),G.off(V.HARD_DROP,i),G.off(V.T_SPIN,o),G.off(V.BACK_TO_BACK,a),G.off(V.SCORE_UPDATED,c),G.off(V.PIECE_HELD,u),G.off(V.PIECE_ROTATED,h),G.off(V.PIECE_MOVED,d),G.off(V.GAME_OVER,m),G.off(V.LEVEL_UP,g)}},[])}function bC(){const[e,t]=v.useState(!1),[n,r]=v.useState(null),s=v.useRef(null),i=v.useRef([]),o=v.useRef(null),a=v.useCallback(()=>{s.current&&(s.current.pause(),s.current.currentTime=0),i.current.forEach(m=>{try{m.stop()}catch{}}),i.current=[],o.current&&(clearTimeout(o.current),o.current=null),t(!1),r(null)},[]),c=v.useCallback(async()=>{try{a(),h()}catch{}},[a]),u=v.useCallback(async()=>{try{a(),d()}catch{}},[a]),h=v.useCallback(()=>{a();try{const m=Br();if(!m)return;const g=[{freq:523.25,duration:.4},{freq:587.33,duration:.4},{freq:659.25,duration:.4},{freq:698.46,duration:.4},{freq:783.99,duration:.6},{freq:659.25,duration:.4},{freq:523.25,duration:.8},{freq:587.33,duration:.4},{freq:659.25,duration:.4},{freq:698.46,duration:.4},{freq:783.99,duration:.6},{freq:880,duration:.4},{freq:783.99,duration:.8},{freq:659.25,duration:.4},{freq:698.46,duration:.4},{freq:783.99,duration:.4},{freq:880,duration:.6},{freq:987.77,duration:.4},{freq:1046.5,duration:.8}];let x=m.currentTime;g.forEach((b,k)=>{const p=m.createOscillator(),f=m.createGain();if(p.connect(f),f.connect(m.destination),p.frequency.setValueAtTime(b.freq,x),p.type="sine",f.gain.setValueAtTime(0,x),f.gain.linearRampToValueAtTime(.1,x+.05),f.gain.exponentialRampToValueAtTime(.01,x+b.duration),p.start(x),p.stop(x+b.duration),i.current.push(p),k<g.length-1){const y=m.createOscillator(),w=m.createGain();y.connect(w),w.connect(m.destination),y.frequency.setValueAtTime(b.freq*1.25,x),y.type="triangle",w.gain.setValueAtTime(0,x),w.gain.linearRampToValueAtTime(.05,x+.05),w.gain.exponentialRampToValueAtTime(.01,x+b.duration),y.start(x),y.stop(x+b.duration),i.current.push(y)}x+=b.duration}),o.current=setTimeout(()=>{s.current||h()},x*1e3+1e3),t(!0),r("cheerful-fallback")}catch{}},[a]),d=v.useCallback(()=>{a();try{const m=Br();if(!m)return;const g=[{freq:261.63,duration:.2},{freq:329.63,duration:.2},{freq:392,duration:.2},{freq:523.25,duration:.3},{freq:392,duration:.1},{freq:523.25,duration:.3},{freq:293.66,duration:.2},{freq:369.99,duration:.2},{freq:440,duration:.2},{freq:587.33,duration:.3},{freq:440,duration:.1},{freq:587.33,duration:.3},{freq:329.63,duration:.2},{freq:415.3,duration:.2},{freq:493.88,duration:.2},{freq:659.25,duration:.4},{freq:493.88,duration:.2},{freq:659.25,duration:.4}];let x=m.currentTime;g.forEach((b,k)=>{const p=m.createOscillator(),f=m.createGain();if(p.connect(f),f.connect(m.destination),p.frequency.setValueAtTime(b.freq,x),p.type="square",f.gain.setValueAtTime(0,x),f.gain.linearRampToValueAtTime(.15,x+.02),f.gain.exponentialRampToValueAtTime(.01,x+b.duration),p.start(x),p.stop(x+b.duration),i.current.push(p),k%2===0){const y=m.createOscillator(),w=m.createGain();y.connect(w),w.connect(m.destination),y.frequency.setValueAtTime(b.freq*.5,x),y.type="sawtooth",w.gain.setValueAtTime(0,x),w.gain.linearRampToValueAtTime(.08,x+.02),w.gain.exponentialRampToValueAtTime(.01,x+b.duration),y.start(x),y.stop(x+b.duration),i.current.push(y)}x+=b.duration}),o.current=setTimeout(()=>{s.current||d()},x*1e3+500),t(!0),r("energetic-fallback")}catch{}},[a]);return{isPlaying:e,currentTrack:n,startBackgroundMusic:c,startGameMusic:u,stopMusic:a,playCheerfulMelody:h,playEnergeticMelody:d}}function SC(){const[e,t]=v.useState(null),[n,r]=v.useState(!0);v.useEffect(()=>{try{const o=q.resolve("playerStatsService");t(o.getStats()),r(!1);const a=()=>{try{const c=q.resolve("statisticsService"),u=q.resolve("gameService");if(!u.gameOver)return;const h=u.getGameState(),d=c.getStats();if(d.piecesPlaced===0&&d.linesCleared===0)return;const m={score:h.score.points,level:h.score.level,linesCleared:d.linesCleared,piecesPlaced:d.piecesPlaced,tSpins:d.tSpins,backToBack:d.backToBack,maxCombo:d.maxCombo,playTime:d.playTime};o.updateAfterGame(m),t(o.getStats()),c.reset(),window.dispatchEvent(new Event("playerStatsUpdated"))}catch{}};return G.on(V.GAME_OVER,a),()=>{G.off(V.GAME_OVER,a)}}catch{r(!1)}},[]);const s=v.useCallback((o,a)=>{try{const c=q.resolve("playerStatsService"),u=c.updateRecord(o,a);return u&&(t(c.getStats()),window.dispatchEvent(new Event("playerStatsUpdated"))),u}catch{return!1}},[]),i=v.useCallback((o,a=1)=>{try{const c=q.resolve("playerStatsService");c.incrementStat(o,a),t(c.getStats()),window.dispatchEvent(new Event("playerStatsUpdated"))}catch{}},[]);return{playerStats:e,loading:n,updateRecord:s,incrementStat:i}}function CC(){const[e,t]=v.useState(null),[n,r]=v.useState(!0);v.useEffect(()=>{try{const i=q.resolve("statisticsService");t(i.getStats()),r(!1);const o=()=>{t(i.getStats())},a=()=>{i.incrementPiecesPlaced(),o()},c=({linesCleared:m})=>{i.addLinesCleared(m),o()},u=()=>{i.incrementTSpins(),o()},h=({combo:m})=>{i.updateMaxCombo(m),o()},d=()=>{i.incrementBackToBack(),o()};return G.on(V.PIECE_PLACED,a),G.on(V.LINE_CLEARED,c),G.on(V.T_SPIN,u),G.on(V.SCORE_UPDATED,h),G.on(V.BACK_TO_BACK,d),()=>{G.off(V.PIECE_PLACED,a),G.off(V.LINE_CLEARED,c),G.off(V.T_SPIN,u),G.off(V.SCORE_UPDATED,h),G.off(V.BACK_TO_BACK,d)}}catch{r(!1)}},[]),v.useEffect(()=>{if(n)return;const i=setInterval(()=>{try{const o=q.resolve("statisticsService"),a=q.resolve("gameService");a.isPlaying&&!a.isPaused&&!a.gameOver&&o.incrementPlayTime(),t(o.getStats())}catch{}},1e3);return()=>clearInterval(i)},[n]);const s=v.useCallback(()=>{try{const i=q.resolve("statisticsService");i.reset(),t(i.getStats())}catch{}},[]);return{statistics:e,loading:n,resetStatistics:s}}const kC=v.lazy(()=>Vc(()=>import("./SettingsMenu-f1f7c3b2.js"),[]));function PC(){return l.jsx("div",{className:"flex items-center justify-center p-8",children:l.jsx(M.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"text-4xl",children:""})})}function TC({gameState:e,actions:t,onBackToMenu:n,onRestart:r,isGamepadActive:s,controllerCount:i,getGamepadInfo:o}){var b,k,p,f,y,w;const{t:a}=Me(),c=ae.useMemo(()=>{if(!(e!=null&&e.currentPiece)||e!=null&&e.gameOver||e!=null&&e.isPaused)return null;try{return t.getDropPreview()}catch{return null}},[(k=(b=e==null?void 0:e.currentPiece)==null?void 0:b.position)==null?void 0:k.x,(f=(p=e==null?void 0:e.currentPiece)==null?void 0:p.position)==null?void 0:f.y,(y=e==null?void 0:e.currentPiece)==null?void 0:y.type,(w=e==null?void 0:e.currentPiece)==null?void 0:w.shape,e==null?void 0:e.gameOver,e==null?void 0:e.isPaused]),[u,h]=ae.useState({hardDrop:!1,hold:!1,pause:!1}),d=ae.useRef({});ae.useEffect(()=>()=>{Object.values(d.current).forEach(clearTimeout)},[]);const m=ae.useCallback(()=>{u.hardDrop||e!=null&&e.gameOver||(t.hardDrop(),h(S=>({...S,hardDrop:!0})),clearTimeout(d.current.hardDrop),d.current.hardDrop=setTimeout(()=>{h(S=>({...S,hardDrop:!1}))},300))},[t,u.hardDrop,e==null?void 0:e.gameOver]),g=ae.useCallback(()=>{u.hold||e!=null&&e.gameOver||!(e!=null&&e.canHold)||(t.holdPiece(),h(S=>({...S,hold:!0})),clearTimeout(d.current.hold),d.current.hold=setTimeout(()=>{h(S=>({...S,hold:!1}))},500))},[t,u.hold,e==null?void 0:e.gameOver,e==null?void 0:e.canHold]),x=ae.useCallback(()=>{u.pause||e!=null&&e.gameOver||(e!=null&&e.isPaused?t.resume():t.pause(),h(S=>({...S,pause:!0})),clearTimeout(d.current.pause),d.current.pause=setTimeout(()=>{h(S=>({...S,pause:!1}))},300))},[t,u.pause,e==null?void 0:e.gameOver,e==null?void 0:e.isPaused]);return l.jsxs("div",{className:"h-screen cat-bg flex flex-col overflow-hidden",children:[l.jsxs("div",{className:"flex items-center justify-between px-3 py-1.5 bg-black/30 backdrop-blur-sm border-b border-white/10 shrink-0",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(M.button,{onClick:n,whileHover:{scale:1.05},whileTap:{scale:.95},className:"bg-white/15 hover:bg-white/25 text-white p-1.5 rounded-lg transition-colors",title:a("game.backToMenu"),children:l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"})})}),l.jsx("span",{className:"text-white font-bold text-sm",children:" Cat Tetris"})]}),l.jsxs("div",{className:"flex items-center gap-3 text-xs text-white/70",children:[l.jsxs("span",{className:"text-yellow-400 font-bold",children:[e.score.points.toLocaleString()," pts"]}),l.jsxs("span",{children:["Nv.",e.score.level]}),l.jsxs("span",{children:[e.score.lines," ",a("common.lines")]})]}),l.jsx("div",{className:"flex items-center gap-1.5",children:l.jsx(M.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:e.isPaused?t.resume:t.pause,disabled:e.gameOver,className:"bg-white/10 hover:bg-white/20 text-white px-2.5 py-1 rounded-lg text-xs transition-colors disabled:opacity-50",children:e.isPaused?"":""})})]}),l.jsxs("div",{className:"flex-1 flex items-center justify-center overflow-hidden p-2",children:[l.jsxs("div",{className:"flex flex-col lg:flex-row gap-2 items-center justify-center",children:[l.jsxs("div",{className:"hidden lg:flex flex-col lg:flex-row gap-2 items-center justify-center",children:[l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx(Yn,{heldPiece:e.heldPiece,canHold:e.canHold}),l.jsx(Xn,{score:e.score.points,level:e.score.level,lines:e.score.lines,combo:e.score.combo})]}),l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx(Pn,{board:e.board,currentPiece:e.currentPiece,dropPreview:c,gameOver:e.gameOver}),l.jsx(qb,{onMove:t.movePiece,onRotate:t.rotatePiece,onHardDrop:t.hardDrop,onPause:e.isPaused?t.resume:t.pause,onHold:t.holdPiece,isPaused:e.isPaused,gameOver:e.gameOver,canHold:e.canHold})]}),l.jsx("div",{className:"flex flex-col gap-2",children:l.jsx(Jn,{pieces:e.nextPieces})})]}),l.jsxs("div",{className:"flex lg:hidden flex-col w-full h-full","data-testid":"mobile-layout",children:[l.jsxs("div",{className:"flex justify-between items-center mb-2 px-2 bg-black/30 rounded-lg mx-2 py-1",children:[l.jsxs("div",{className:"text-white text-sm",children:[l.jsx("span",{className:"text-yellow-400 font-bold",children:e.score.points.toLocaleString()}),l.jsxs("span",{className:"text-white/60 ml-2",children:["Nv.",e.score.level]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[e.heldPiece&&l.jsx("div",{className:"text-xs text-white/60",children:""}),l.jsx("div",{className:"text-xs text-white/60",children:a("game.nextLabel")}),l.jsx("div",{className:"bg-gray-800/50 p-1 rounded",children:e.nextPieces[0]?l.jsx("div",{className:"grid gap-0.5",style:{gridTemplateColumns:`repeat(${Math.max(...e.nextPieces[0].shape.map(S=>S.length))}, 8px)`,gridTemplateRows:`repeat(${e.nextPieces[0].shape.length}, 8px)`},children:e.nextPieces[0].shape.map((S,C)=>S.map((P,T)=>l.jsx("div",{className:"w-2 h-2 rounded-sm",style:{backgroundColor:P?Mr(e.nextPieces[0].color):"transparent",border:P?"1px solid rgba(255,255,255,0.3)":"none"},children:P&&e.nextPieces[0].emoji?l.jsx("span",{className:"text-[6px] leading-none block text-center",children:e.nextPieces[0].emoji}):null},`next-${T}-${C}`)))}):l.jsx("div",{className:"w-8 h-6 flex items-center justify-center",children:l.jsx("span",{className:"text-xs text-white/40",children:"?"})})})]})]}),l.jsxs("div",{className:"flex items-center justify-center flex-1 relative px-1",children:[l.jsxs("div",{className:"flex flex-col gap-1 mr-2",children:[l.jsx(M.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onTouchStart:S=>{S.preventDefault(),t.rotatePiece()},onClick:()=>t.rotatePiece(),disabled:e.gameOver,className:"bg-blue-500 text-white p-4 rounded-full shadow-lg hover:bg-blue-600 disabled:opacity-50 touch-manipulation text-lg",children:""}),l.jsx(M.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onTouchStart:S=>{S.preventDefault(),t.movePiece("left")},onClick:()=>t.movePiece("left"),disabled:e.gameOver,className:"bg-gray-600 text-white p-4 rounded-lg shadow-lg hover:bg-gray-700 disabled:opacity-50 touch-manipulation text-lg",children:""})]}),l.jsx("div",{className:"flex-shrink-0 mx-1",children:l.jsx(Pn,{board:e.board,currentPiece:e.currentPiece,dropPreview:c,gameOver:e.gameOver})}),l.jsxs("div",{className:"flex flex-col gap-1 ml-2",children:[l.jsx(M.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onTouchStart:S=>{S.preventDefault(),m()},onClick:m,disabled:e.gameOver||u.hardDrop,className:`text-white p-4 rounded-full shadow-lg disabled:opacity-50 touch-manipulation text-lg ${u.hardDrop?"bg-red-400":"bg-red-500 hover:bg-red-600"}`,children:""}),l.jsx(M.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onTouchStart:S=>{S.preventDefault(),t.movePiece("right")},onClick:()=>t.movePiece("right"),disabled:e.gameOver,className:"bg-gray-600 text-white p-4 rounded-lg shadow-lg hover:bg-gray-700 disabled:opacity-50 touch-manipulation text-lg",children:""})]})]}),l.jsxs("div",{className:"flex justify-center gap-2 py-2 px-2",children:[l.jsx(M.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onTouchStart:S=>{S.preventDefault(),t.movePiece("down")},onClick:()=>t.movePiece("down"),disabled:e.gameOver,className:"bg-gray-700 text-white px-4 py-2 rounded-lg shadow-lg hover:bg-gray-600 disabled:opacity-50 touch-manipulation",children:" Acelerar"}),e.canHold&&l.jsx(M.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onTouchStart:S=>{S.preventDefault(),g()},onClick:g,disabled:e.gameOver||!e.canHold||u.hold,className:`text-white px-4 py-2 rounded-lg shadow-lg disabled:opacity-50 touch-manipulation ${u.hold?"bg-green-400":e.canHold?"bg-green-600 hover:bg-green-500":"bg-gray-500"}`,children:" Guardar"}),l.jsx(M.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onTouchStart:S=>{S.preventDefault(),x()},onClick:x,disabled:e.gameOver||u.pause,className:`text-white px-4 py-2 rounded-lg shadow-lg disabled:opacity-50 touch-manipulation ${u.pause?"bg-yellow-400":"bg-yellow-500 hover:bg-yellow-600"}`,children:e.isPaused?"":""})]})]})]}),l.jsx(ke,{children:e.gameOver&&l.jsx(Kb,{score:e.score,onRestart:r,onBackToMenu:n})}),l.jsx(A0,{isConnected:s,controllerCount:i,gamepadInfo:o()})]})]})}function jC(){const[e,t]=v.useState("menu"),[n,r]=v.useState(!1),[s,i]=v.useState(!1),[o,a]=v.useState(!1),[c,u]=v.useState(!1),[h,d]=v.useState(!1),[m,g]=v.useState(!1),[x,b]=v.useState(!1),[k,p]=v.useState(!0),[f,y]=v.useState(!1),[w,S]=v.useState(null),[C,P]=v.useState(null),[T,j]=v.useState(!1),[E,L]=v.useState(!1),{gameState:A,actions:N}=vC();ae.useEffect(()=>{Gt.setGameStateProvider(()=>{try{return q.resolve("gameService").getGameState()}catch{return null}})},[]);const{settings:_,updateSettings:se}=yC(),{startBackgroundMusic:O,startGameMusic:Q,stopMusic:R}=bC(),z=ae.useMemo(()=>N?{...N,togglePause:()=>{var B,I;A!=null&&A.isPaused?(B=N.resume)==null||B.call(N):(I=N.pause)==null||I.call(N)},isGameOver:()=>(A==null?void 0:A.gameOver)??!1,backToMenu:()=>{L(!1),P(null),j(!1),t("menu"),_!=null&&_.soundEnabled&&(O==null||O()),A&&!A.gameOver&&N.pause()}}:null,[N,A==null?void 0:A.isPaused,A==null?void 0:A.gameOver,_==null?void 0:_.soundEnabled,O]),{isGamepadActive:F,controllerCount:U,processGamepadInput:K,getGamepadInfo:$}=uu(z);j0(),CC(),N0(),SC(),R0(),I0(),wC();const X=e==="game",{setDAS:Z,setARR:J}=O0(N,A,X);ae.useEffect(()=>{(_==null?void 0:_.das)!=null&&Z(_.das),(_==null?void 0:_.arr)!=null&&J(_.arr)},[_==null?void 0:_.das,_==null?void 0:_.arr,Z,J]),ae.useEffect(()=>{const B=I=>{try{q.resolve("gameService").setGameMode(I.detail.mode)}catch{}};return window.addEventListener("gameModeChanged",B),()=>window.removeEventListener("gameModeChanged",B)},[]),ae.useEffect(()=>{A&&!A.gameOver&&A.score.points>0&&A.isPlaying?i(!0):i(!1)},[A]),ae.useEffect(()=>(O&&R&&(_!=null&&_.soundEnabled)?e==="menu"?O():e==="game"&&Q():R(),()=>{R()}),[e,_==null?void 0:_.soundEnabled,O,Q,R]);const he=n||h||o||c||m||x||f;ae.useEffect(()=>{if(F&&e==="game"&&!he&&!(A!=null&&A.gameOver)){const B=setInterval(()=>{K()},16);return()=>clearInterval(B)}},[F,e,K,he,A==null?void 0:A.gameOver]);const We=B=>{se(B),B.das!=null&&Z(B.das),B.arr!=null&&J(B.arr),B.soundEnabled?e==="menu"?O==null||O():e==="game"&&(Q==null||Q()):R==null||R()},oe=()=>{t("game"),_!=null&&_.soundEnabled&&(Q==null||Q()),A!=null&&A.gameOver?N.restart():A!=null&&A.isPaused?N.resume():A!=null&&A.isPlaying||N.restart()},Ee=()=>{t("game"),_!=null&&_.soundEnabled&&(Q==null||Q()),A!=null&&A.isPaused&&N.resume()},xe=()=>{t("game"),_!=null&&_.soundEnabled&&(Q==null||Q()),N.restart()},pt=()=>{N.restart(),t("game")},Dt=()=>{t("menu"),_!=null&&_.soundEnabled&&(O==null||O()),A&&!A.gameOver&&N.pause()};return E?l.jsx(XS,{onExit:()=>L(!1)}):T?l.jsx(zS,{onClose:()=>j(!1)}):C?l.jsx(FS,{mode:C.mode,aiDifficulty:C.aiDifficulty,ai1Difficulty:C.ai1Difficulty,ai2Difficulty:C.ai2Difficulty,onExit:()=>{P(null),t("menu")}}):e==="menu"?l.jsxs(l.Fragment,{children:[l.jsx(DS,{onStartGame:s?Ee:oe,onNewGame:xe,onShowSettings:()=>r(!0),onShowGameModes:()=>g(!0),onShowShop:()=>d(!0),onShowMissions:()=>a(!0),onShowAchievements:()=>u(!0),onShowMultiplayer:()=>b(!0),onShowTutorial:()=>p(!0),onShowTutorialHub:()=>y(!0),onShowAIShowcase:()=>j(!0),onShowCreatorMode:()=>L(!0),hasActiveGame:s,gameState:A,hasOverlayOpen:he}),l.jsx(ke,{children:x&&l.jsx(oC,{onClose:()=>b(!1),onStartMatch:B=>{b(!1),P(B)}})}),l.jsx(ke,{children:m&&l.jsx(rC,{onClose:()=>g(!1),onStartGame:xe})}),l.jsx(ke,{children:h&&l.jsx(nC,{onClose:()=>d(!1)})}),l.jsx(ke,{children:o&&l.jsx(IS,{onClose:()=>a(!1)})}),l.jsx(ke,{children:c&&l.jsx(OS,{onClose:()=>u(!1)})}),l.jsx(ke,{children:f&&l.jsx(pC,{tutorialService:q.resolve("tutorialService"),onClose:()=>y(!1),onLessonComplete:B=>{if(!(!B||!B.rewards)){try{const I=q.resolve("currencyService");B.rewards.fishCoins&&I.addFish(B.rewards.fishCoins,`Tutorial: ${B.lessonTitle||"Lesson"}`)}catch{}try{B.rewards.xp&&q.resolve("playerStatsService").incrementStat("totalPlayTime",B.rewards.xp)}catch{}try{if(B.rewards.achievement){const I=q.resolve("achievementsService"),te=q.resolve("playerStatsService");I.checkAchievements(te.getStats())}}catch{}S(B)}}})}),l.jsx(ke,{children:l.jsx(v.Suspense,{fallback:l.jsx(PC,{}),children:l.jsx(kC,{isOpen:n,settings:_||{},onSettingsChange:We,onClose:()=>r(!1)})})}),l.jsx(GS,{}),l.jsx(ke,{children:w&&l.jsx(gC,{reward:w,onClose:()=>S(null)})})]}):A?l.jsxs(l.Fragment,{children:[l.jsx(TC,{gameState:A,actions:N,onBackToMenu:Dt,onRestart:pt,isGamepadActive:F,controllerCount:U,getGamepadInfo:$}),l.jsx(ke,{children:k&&l.jsx(aC,{onComplete:()=>p(!1)})})]}):l.jsx("div",{className:"h-screen cat-bg flex items-center justify-center overflow-hidden",children:l.jsx("div",{className:"text-white text-xl",children:"Carregando..."})})}function EC(){return l.jsxs(Zb,{children:[l.jsx(jC,{}),l.jsx(RS,{})]})}function NC(e={}){const{immediate:t=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:s,onRegisteredSW:i,onRegisterError:o}=e;let a,c;const u=async(d=!0)=>{await c};async function h(){if("serviceWorker"in navigator){if(a=await Vc(()=>import("./workbox-window.prod.es5-5ffdab76.js"),[]).then(({Workbox:d})=>new d("/cat-tetris/sw.js",{scope:"/cat-tetris/",type:"classic"})).catch(d=>{o==null||o(d)}),!a)return;a.addEventListener("activated",d=>{(d.isUpdate||d.isExternal)&&window.location.reload()}),a.addEventListener("installed",d=>{d.isUpdate||r==null||r()}),a.register({immediate:t}).then(d=>{i?i("/cat-tetris/sw.js",d):s==null||s(d)}).catch(d=>{o==null||o(d)})}}return c=h(),u}NC({onRegisteredSW(e,t){t&&(setInterval(()=>{t.update()},60*60*1e3),"periodicSync"in t&&t.periodicSync.register("content-sync",{minInterval:24*60*60*1e3}).catch(()=>{}))},onOfflineReady(){console.log("Cat Tetris pronto para uso offline!")}});Ra.createRoot(document.getElementById("root")).render(l.jsx(Ub,{children:l.jsx(EC,{})}));export{ke as A,LC as B,RC as G,DC as M,OC as a,Be as b,_C as c,l as j,zl as l,M as m,v as r,IC as s,Me as u};
