var q0=Object.defineProperty;var W0=(e,t,n)=>t in e?q0(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var ii=(e,t,n)=>(W0(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function K0(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Wh={exports:{}},Po={},Kh={exports:{}},ee={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ks=Symbol.for("react.element"),Q0=Symbol.for("react.portal"),X0=Symbol.for("react.fragment"),J0=Symbol.for("react.strict_mode"),Y0=Symbol.for("react.profiler"),Z0=Symbol.for("react.provider"),eg=Symbol.for("react.context"),tg=Symbol.for("react.forward_ref"),ng=Symbol.for("react.suspense"),rg=Symbol.for("react.memo"),sg=Symbol.for("react.lazy"),Su=Symbol.iterator;function ig(e){return e===null||typeof e!="object"?null:(e=Su&&e[Su]||e["@@iterator"],typeof e=="function"?e:null)}var Qh={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Xh=Object.assign,Jh={};function qr(e,t,n){this.props=e,this.context=t,this.refs=Jh,this.updater=n||Qh}qr.prototype.isReactComponent={};qr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};qr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Yh(){}Yh.prototype=qr.prototype;function Yl(e,t,n){this.props=e,this.context=t,this.refs=Jh,this.updater=n||Qh}var Zl=Yl.prototype=new Yh;Zl.constructor=Yl;Xh(Zl,qr.prototype);Zl.isPureReactComponent=!0;var Cu=Array.isArray,Zh=Object.prototype.hasOwnProperty,ec={current:null},em={key:!0,ref:!0,__self:!0,__source:!0};function tm(e,t,n){var r,s={},i=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)Zh.call(t,r)&&!em.hasOwnProperty(r)&&(s[r]=t[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var c=Array(a),u=0;u<a;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Ks,type:e,key:i,ref:o,props:s,_owner:ec.current}}function og(e,t){return{$$typeof:Ks,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function tc(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ks}function ag(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var ku=/\/+/g;function Yo(e,t){return typeof e=="object"&&e!==null&&e.key!=null?ag(""+e.key):t.toString(36)}function Ni(e,t,n,r,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Ks:case Q0:o=!0}}if(o)return o=e,s=s(o),e=r===""?"."+Yo(o,0):r,Cu(s)?(n="",e!=null&&(n=e.replace(ku,"$&/")+"/"),Ni(s,t,n,"",function(u){return u})):s!=null&&(tc(s)&&(s=og(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(ku,"$&/")+"/")+e)),t.push(s)),1;if(o=0,r=r===""?".":r+":",Cu(e))for(var a=0;a<e.length;a++){i=e[a];var c=r+Yo(i,a);o+=Ni(i,t,n,c,s)}else if(c=ig(e),typeof c=="function")for(e=c.call(e),a=0;!(i=e.next()).done;)i=i.value,c=r+Yo(i,a++),o+=Ni(i,t,n,c,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function oi(e,t,n){if(e==null)return e;var r=[],s=0;return Ni(e,r,"","",function(i){return t.call(n,i,s++)}),r}function lg(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Xe={current:null},Ai={transition:null},cg={ReactCurrentDispatcher:Xe,ReactCurrentBatchConfig:Ai,ReactCurrentOwner:ec};function nm(){throw Error("act(...) is not supported in production builds of React.")}ee.Children={map:oi,forEach:function(e,t,n){oi(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return oi(e,function(){t++}),t},toArray:function(e){return oi(e,function(t){return t})||[]},only:function(e){if(!tc(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ee.Component=qr;ee.Fragment=X0;ee.Profiler=Y0;ee.PureComponent=Yl;ee.StrictMode=J0;ee.Suspense=ng;ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cg;ee.act=nm;ee.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Xh({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=ec.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(c in t)Zh.call(t,c)&&!em.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&a!==void 0?a[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var u=0;u<c;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Ks,type:e.type,key:s,ref:i,props:r,_owner:o}};ee.createContext=function(e){return e={$$typeof:eg,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Z0,_context:e},e.Consumer=e};ee.createElement=tm;ee.createFactory=function(e){var t=tm.bind(null,e);return t.type=e,t};ee.createRef=function(){return{current:null}};ee.forwardRef=function(e){return{$$typeof:tg,render:e}};ee.isValidElement=tc;ee.lazy=function(e){return{$$typeof:sg,_payload:{_status:-1,_result:e},_init:lg}};ee.memo=function(e,t){return{$$typeof:rg,type:e,compare:t===void 0?null:t}};ee.startTransition=function(e){var t=Ai.transition;Ai.transition={};try{e()}finally{Ai.transition=t}};ee.unstable_act=nm;ee.useCallback=function(e,t){return Xe.current.useCallback(e,t)};ee.useContext=function(e){return Xe.current.useContext(e)};ee.useDebugValue=function(){};ee.useDeferredValue=function(e){return Xe.current.useDeferredValue(e)};ee.useEffect=function(e,t){return Xe.current.useEffect(e,t)};ee.useId=function(){return Xe.current.useId()};ee.useImperativeHandle=function(e,t,n){return Xe.current.useImperativeHandle(e,t,n)};ee.useInsertionEffect=function(e,t){return Xe.current.useInsertionEffect(e,t)};ee.useLayoutEffect=function(e,t){return Xe.current.useLayoutEffect(e,t)};ee.useMemo=function(e,t){return Xe.current.useMemo(e,t)};ee.useReducer=function(e,t,n){return Xe.current.useReducer(e,t,n)};ee.useRef=function(e){return Xe.current.useRef(e)};ee.useState=function(e){return Xe.current.useState(e)};ee.useSyncExternalStore=function(e,t,n){return Xe.current.useSyncExternalStore(e,t,n)};ee.useTransition=function(){return Xe.current.useTransition()};ee.version="18.3.1";Kh.exports=ee;var v=Kh.exports;const ce=K0(v);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ug=v,dg=Symbol.for("react.element"),hg=Symbol.for("react.fragment"),mg=Object.prototype.hasOwnProperty,fg=ug.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,pg={key:!0,ref:!0,__self:!0,__source:!0};function rm(e,t,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)mg.call(t,r)&&!pg.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:dg,type:e,key:i,ref:o,props:s,_owner:fg.current}}Po.Fragment=hg;Po.jsx=rm;Po.jsxs=rm;Wh.exports=Po;var l=Wh.exports,Ba={},sm={exports:{}},ut={},im={exports:{}},om={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(R,B){var G=R.length;R.push(B);e:for(;0<G;){var H=G-1>>>1,$=R[H];if(0<s($,B))R[H]=B,R[G]=$,G=H;else break e}}function n(R){return R.length===0?null:R[0]}function r(R){if(R.length===0)return null;var B=R[0],G=R.pop();if(G!==B){R[0]=G;e:for(var H=0,$=R.length,z=$>>>1;H<z;){var K=2*(H+1)-1,J=R[K],Q=K+1,pe=R[Q];if(0>s(J,G))Q<$&&0>s(pe,J)?(R[H]=pe,R[Q]=G,H=Q):(R[H]=J,R[K]=G,H=K);else if(Q<$&&0>s(pe,G))R[H]=pe,R[Q]=G,H=Q;else break e}}return B}function s(R,B){var G=R.sortIndex-B.sortIndex;return G!==0?G:R.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var c=[],u=[],h=1,d=null,m=3,g=!1,x=!1,b=!1,k=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,f=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(R){for(var B=n(u);B!==null;){if(B.callback===null)r(u);else if(B.startTime<=R)r(u),B.sortIndex=B.expirationTime,t(c,B);else break;B=n(u)}}function w(R){if(b=!1,y(R),!x)if(n(c)!==null)x=!0,I(S);else{var B=n(u);B!==null&&W(w,B.startTime-R)}}function S(R,B){x=!1,b&&(b=!1,p(T),T=-1),g=!0;var G=m;try{for(y(B),d=n(c);d!==null&&(!(d.expirationTime>B)||R&&!L());){var H=d.callback;if(typeof H=="function"){d.callback=null,m=d.priorityLevel;var $=H(d.expirationTime<=B);B=e.unstable_now(),typeof $=="function"?d.callback=$:d===n(c)&&r(c),y(B)}else r(c);d=n(c)}if(d!==null)var z=!0;else{var K=n(u);K!==null&&W(w,K.startTime-B),z=!1}return z}finally{d=null,m=G,g=!1}}var C=!1,P=null,T=-1,j=5,E=-1;function L(){return!(e.unstable_now()-E<j)}function A(){if(P!==null){var R=e.unstable_now();E=R;var B=!0;try{B=P(!0,R)}finally{B?N():(C=!1,P=null)}}else C=!1}var N;if(typeof f=="function")N=function(){f(A)};else if(typeof MessageChannel<"u"){var _=new MessageChannel,se=_.port2;_.port1.onmessage=A,N=function(){se.postMessage(null)}}else N=function(){k(A,0)};function I(R){P=R,C||(C=!0,N())}function W(R,B){T=k(function(){R(e.unstable_now())},B)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(R){R.callback=null},e.unstable_continueExecution=function(){x||g||(x=!0,I(S))},e.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<R?Math.floor(1e3/R):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(R){switch(m){case 1:case 2:case 3:var B=3;break;default:B=m}var G=m;m=B;try{return R()}finally{m=G}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(R,B){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var G=m;m=R;try{return B()}finally{m=G}},e.unstable_scheduleCallback=function(R,B,G){var H=e.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?H+G:H):G=H,R){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=G+$,R={id:h++,callback:B,priorityLevel:R,startTime:G,expirationTime:$,sortIndex:-1},G>H?(R.sortIndex=G,t(u,R),n(c)===null&&R===n(u)&&(b?(p(T),T=-1):b=!0,W(w,G-H))):(R.sortIndex=$,t(c,R),x||g||(x=!0,I(S))),R},e.unstable_shouldYield=L,e.unstable_wrapCallback=function(R){var B=m;return function(){var G=m;m=B;try{return R.apply(this,arguments)}finally{m=G}}}})(om);im.exports=om;var gg=im.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vg=v,lt=gg;function D(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var am=new Set,js={};function ir(e,t){Rr(e,t),Rr(e+"Capture",t)}function Rr(e,t){for(js[e]=t,e=0;e<t.length;e++)am.add(t[e])}var Qt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ha=Object.prototype.hasOwnProperty,yg=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Pu={},Tu={};function xg(e){return Ha.call(Tu,e)?!0:Ha.call(Pu,e)?!1:yg.test(e)?Tu[e]=!0:(Pu[e]=!0,!1)}function wg(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function bg(e,t,n,r){if(t===null||typeof t>"u"||wg(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Je(e,t,n,r,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var Ge={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ge[e]=new Je(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ge[t]=new Je(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ge[e]=new Je(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ge[e]=new Je(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ge[e]=new Je(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ge[e]=new Je(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ge[e]=new Je(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ge[e]=new Je(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ge[e]=new Je(e,5,!1,e.toLowerCase(),null,!1,!1)});var nc=/[\-:]([a-z])/g;function rc(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(nc,rc);Ge[t]=new Je(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(nc,rc);Ge[t]=new Je(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(nc,rc);Ge[t]=new Je(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ge[e]=new Je(e,1,!1,e.toLowerCase(),null,!1,!1)});Ge.xlinkHref=new Je("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ge[e]=new Je(e,1,!1,e.toLowerCase(),null,!0,!0)});function sc(e,t,n,r){var s=Ge.hasOwnProperty(t)?Ge[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(bg(t,n,s,r)&&(n=null),r||s===null?xg(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var en=vg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ai=Symbol.for("react.element"),dr=Symbol.for("react.portal"),hr=Symbol.for("react.fragment"),ic=Symbol.for("react.strict_mode"),za=Symbol.for("react.profiler"),lm=Symbol.for("react.provider"),cm=Symbol.for("react.context"),oc=Symbol.for("react.forward_ref"),Ua=Symbol.for("react.suspense"),$a=Symbol.for("react.suspense_list"),ac=Symbol.for("react.memo"),on=Symbol.for("react.lazy"),um=Symbol.for("react.offscreen"),ju=Symbol.iterator;function Jr(e){return e===null||typeof e!="object"?null:(e=ju&&e[ju]||e["@@iterator"],typeof e=="function"?e:null)}var be=Object.assign,Zo;function ls(e){if(Zo===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Zo=t&&t[1]||""}return`
`+Zo+e}var ea=!1;function ta(e,t){if(!e||ea)return"";ea=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var c=`
`+s[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=a);break}}}finally{ea=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?ls(e):""}function Sg(e){switch(e.tag){case 5:return ls(e.type);case 16:return ls("Lazy");case 13:return ls("Suspense");case 19:return ls("SuspenseList");case 0:case 2:case 15:return e=ta(e.type,!1),e;case 11:return e=ta(e.type.render,!1),e;case 1:return e=ta(e.type,!0),e;default:return""}}function qa(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case hr:return"Fragment";case dr:return"Portal";case za:return"Profiler";case ic:return"StrictMode";case Ua:return"Suspense";case $a:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case cm:return(e.displayName||"Context")+".Consumer";case lm:return(e._context.displayName||"Context")+".Provider";case oc:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ac:return t=e.displayName||null,t!==null?t:qa(e.type)||"Memo";case on:t=e._payload,e=e._init;try{return qa(e(t))}catch{}}return null}function Cg(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return qa(t);case 8:return t===ic?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function kn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function dm(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function kg(e){var t=dm(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function li(e){e._valueTracker||(e._valueTracker=kg(e))}function hm(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=dm(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Ui(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Wa(e,t){var n=t.checked;return be({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Eu(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=kn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function mm(e,t){t=t.checked,t!=null&&sc(e,"checked",t,!1)}function Ka(e,t){mm(e,t);var n=kn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Qa(e,t.type,n):t.hasOwnProperty("defaultValue")&&Qa(e,t.type,kn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Nu(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Qa(e,t,n){(t!=="number"||Ui(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var cs=Array.isArray;function Er(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+kn(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Xa(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(D(91));return be({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Au(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(D(92));if(cs(n)){if(1<n.length)throw Error(D(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:kn(n)}}function fm(e,t){var n=kn(t.value),r=kn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Mu(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function pm(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ja(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?pm(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ci,gm=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ci=ci||document.createElement("div"),ci.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ci.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Es(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var ms={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Pg=["Webkit","ms","Moz","O"];Object.keys(ms).forEach(function(e){Pg.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ms[t]=ms[e]})});function vm(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||ms.hasOwnProperty(e)&&ms[e]?(""+t).trim():t+"px"}function ym(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=vm(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var Tg=be({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ya(e,t){if(t){if(Tg[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(D(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(D(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(D(61))}if(t.style!=null&&typeof t.style!="object")throw Error(D(62))}}function Za(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var el=null;function lc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var tl=null,Nr=null,Ar=null;function Lu(e){if(e=Js(e)){if(typeof tl!="function")throw Error(D(280));var t=e.stateNode;t&&(t=Ao(t),tl(e.stateNode,e.type,t))}}function xm(e){Nr?Ar?Ar.push(e):Ar=[e]:Nr=e}function wm(){if(Nr){var e=Nr,t=Ar;if(Ar=Nr=null,Lu(e),t)for(e=0;e<t.length;e++)Lu(t[e])}}function bm(e,t){return e(t)}function Sm(){}var na=!1;function Cm(e,t,n){if(na)return e(t,n);na=!0;try{return bm(e,t,n)}finally{na=!1,(Nr!==null||Ar!==null)&&(Sm(),wm())}}function Ns(e,t){var n=e.stateNode;if(n===null)return null;var r=Ao(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(D(231,t,typeof n));return n}var nl=!1;if(Qt)try{var Yr={};Object.defineProperty(Yr,"passive",{get:function(){nl=!0}}),window.addEventListener("test",Yr,Yr),window.removeEventListener("test",Yr,Yr)}catch{nl=!1}function jg(e,t,n,r,s,i,o,a,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(h){this.onError(h)}}var fs=!1,$i=null,qi=!1,rl=null,Eg={onError:function(e){fs=!0,$i=e}};function Ng(e,t,n,r,s,i,o,a,c){fs=!1,$i=null,jg.apply(Eg,arguments)}function Ag(e,t,n,r,s,i,o,a,c){if(Ng.apply(this,arguments),fs){if(fs){var u=$i;fs=!1,$i=null}else throw Error(D(198));qi||(qi=!0,rl=u)}}function or(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function km(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function _u(e){if(or(e)!==e)throw Error(D(188))}function Mg(e){var t=e.alternate;if(!t){if(t=or(e),t===null)throw Error(D(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return _u(s),e;if(i===r)return _u(s),t;i=i.sibling}throw Error(D(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(D(189))}}if(n.alternate!==r)throw Error(D(190))}if(n.tag!==3)throw Error(D(188));return n.stateNode.current===n?e:t}function Pm(e){return e=Mg(e),e!==null?Tm(e):null}function Tm(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Tm(e);if(t!==null)return t;e=e.sibling}return null}var jm=lt.unstable_scheduleCallback,Du=lt.unstable_cancelCallback,Lg=lt.unstable_shouldYield,_g=lt.unstable_requestPaint,Te=lt.unstable_now,Dg=lt.unstable_getCurrentPriorityLevel,cc=lt.unstable_ImmediatePriority,Em=lt.unstable_UserBlockingPriority,Wi=lt.unstable_NormalPriority,Rg=lt.unstable_LowPriority,Nm=lt.unstable_IdlePriority,To=null,Dt=null;function Ig(e){if(Dt&&typeof Dt.onCommitFiberRoot=="function")try{Dt.onCommitFiberRoot(To,e,void 0,(e.current.flags&128)===128)}catch{}}var Tt=Math.clz32?Math.clz32:Fg,Og=Math.log,Gg=Math.LN2;function Fg(e){return e>>>=0,e===0?32:31-(Og(e)/Gg|0)|0}var ui=64,di=4194304;function us(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ki(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=us(a):(i&=o,i!==0&&(r=us(i)))}else o=n&~s,o!==0?r=us(o):i!==0&&(r=us(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Tt(t),s=1<<n,r|=e[n],t&=~s;return r}function Vg(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Bg(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-Tt(i),a=1<<o,c=s[o];c===-1?(!(a&n)||a&r)&&(s[o]=Vg(a,t)):c<=t&&(e.expiredLanes|=a),i&=~a}}function sl(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Am(){var e=ui;return ui<<=1,!(ui&4194240)&&(ui=64),e}function ra(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Qs(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Tt(t),e[t]=n}function Hg(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-Tt(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}function uc(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Tt(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var ae=0;function Mm(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Lm,dc,_m,Dm,Rm,il=!1,hi=[],fn=null,pn=null,gn=null,As=new Map,Ms=new Map,cn=[],zg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ru(e,t){switch(e){case"focusin":case"focusout":fn=null;break;case"dragenter":case"dragleave":pn=null;break;case"mouseover":case"mouseout":gn=null;break;case"pointerover":case"pointerout":As.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ms.delete(t.pointerId)}}function Zr(e,t,n,r,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},t!==null&&(t=Js(t),t!==null&&dc(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function Ug(e,t,n,r,s){switch(t){case"focusin":return fn=Zr(fn,e,t,n,r,s),!0;case"dragenter":return pn=Zr(pn,e,t,n,r,s),!0;case"mouseover":return gn=Zr(gn,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return As.set(i,Zr(As.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Ms.set(i,Zr(Ms.get(i)||null,e,t,n,r,s)),!0}return!1}function Im(e){var t=Hn(e.target);if(t!==null){var n=or(t);if(n!==null){if(t=n.tag,t===13){if(t=km(n),t!==null){e.blockedOn=t,Rm(e.priority,function(){_m(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Mi(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=ol(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);el=r,n.target.dispatchEvent(r),el=null}else return t=Js(n),t!==null&&dc(t),e.blockedOn=n,!1;t.shift()}return!0}function Iu(e,t,n){Mi(e)&&n.delete(t)}function $g(){il=!1,fn!==null&&Mi(fn)&&(fn=null),pn!==null&&Mi(pn)&&(pn=null),gn!==null&&Mi(gn)&&(gn=null),As.forEach(Iu),Ms.forEach(Iu)}function es(e,t){e.blockedOn===t&&(e.blockedOn=null,il||(il=!0,lt.unstable_scheduleCallback(lt.unstable_NormalPriority,$g)))}function Ls(e){function t(s){return es(s,e)}if(0<hi.length){es(hi[0],e);for(var n=1;n<hi.length;n++){var r=hi[n];r.blockedOn===e&&(r.blockedOn=null)}}for(fn!==null&&es(fn,e),pn!==null&&es(pn,e),gn!==null&&es(gn,e),As.forEach(t),Ms.forEach(t),n=0;n<cn.length;n++)r=cn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<cn.length&&(n=cn[0],n.blockedOn===null);)Im(n),n.blockedOn===null&&cn.shift()}var Mr=en.ReactCurrentBatchConfig,Qi=!0;function qg(e,t,n,r){var s=ae,i=Mr.transition;Mr.transition=null;try{ae=1,hc(e,t,n,r)}finally{ae=s,Mr.transition=i}}function Wg(e,t,n,r){var s=ae,i=Mr.transition;Mr.transition=null;try{ae=4,hc(e,t,n,r)}finally{ae=s,Mr.transition=i}}function hc(e,t,n,r){if(Qi){var s=ol(e,t,n,r);if(s===null)ma(e,t,r,Xi,n),Ru(e,r);else if(Ug(s,e,t,n,r))r.stopPropagation();else if(Ru(e,r),t&4&&-1<zg.indexOf(e)){for(;s!==null;){var i=Js(s);if(i!==null&&Lm(i),i=ol(e,t,n,r),i===null&&ma(e,t,r,Xi,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else ma(e,t,r,null,n)}}var Xi=null;function ol(e,t,n,r){if(Xi=null,e=lc(r),e=Hn(e),e!==null)if(t=or(e),t===null)e=null;else if(n=t.tag,n===13){if(e=km(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Xi=e,null}function Om(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Dg()){case cc:return 1;case Em:return 4;case Wi:case Rg:return 16;case Nm:return 536870912;default:return 16}default:return 16}}var dn=null,mc=null,Li=null;function Gm(){if(Li)return Li;var e,t=mc,n=t.length,r,s="value"in dn?dn.value:dn.textContent,i=s.length;for(e=0;e<n&&t[e]===s[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===s[i-r];r++);return Li=s.slice(e,1<r?1-r:void 0)}function _i(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function mi(){return!0}function Ou(){return!1}function dt(e){function t(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?mi:Ou,this.isPropagationStopped=Ou,this}return be(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=mi)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=mi)},persist:function(){},isPersistent:mi}),t}var Wr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fc=dt(Wr),Xs=be({},Wr,{view:0,detail:0}),Kg=dt(Xs),sa,ia,ts,jo=be({},Xs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ts&&(ts&&e.type==="mousemove"?(sa=e.screenX-ts.screenX,ia=e.screenY-ts.screenY):ia=sa=0,ts=e),sa)},movementY:function(e){return"movementY"in e?e.movementY:ia}}),Gu=dt(jo),Qg=be({},jo,{dataTransfer:0}),Xg=dt(Qg),Jg=be({},Xs,{relatedTarget:0}),oa=dt(Jg),Yg=be({},Wr,{animationName:0,elapsedTime:0,pseudoElement:0}),Zg=dt(Yg),ev=be({},Wr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),tv=dt(ev),nv=be({},Wr,{data:0}),Fu=dt(nv),rv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},sv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},iv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ov(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=iv[e])?!!t[e]:!1}function pc(){return ov}var av=be({},Xs,{key:function(e){if(e.key){var t=rv[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=_i(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?sv[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pc,charCode:function(e){return e.type==="keypress"?_i(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?_i(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),lv=dt(av),cv=be({},jo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vu=dt(cv),uv=be({},Xs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pc}),dv=dt(uv),hv=be({},Wr,{propertyName:0,elapsedTime:0,pseudoElement:0}),mv=dt(hv),fv=be({},jo,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),pv=dt(fv),gv=[9,13,27,32],gc=Qt&&"CompositionEvent"in window,ps=null;Qt&&"documentMode"in document&&(ps=document.documentMode);var vv=Qt&&"TextEvent"in window&&!ps,Fm=Qt&&(!gc||ps&&8<ps&&11>=ps),Bu=String.fromCharCode(32),Hu=!1;function Vm(e,t){switch(e){case"keyup":return gv.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bm(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var mr=!1;function yv(e,t){switch(e){case"compositionend":return Bm(t);case"keypress":return t.which!==32?null:(Hu=!0,Bu);case"textInput":return e=t.data,e===Bu&&Hu?null:e;default:return null}}function xv(e,t){if(mr)return e==="compositionend"||!gc&&Vm(e,t)?(e=Gm(),Li=mc=dn=null,mr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fm&&t.locale!=="ko"?null:t.data;default:return null}}var wv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!wv[e.type]:t==="textarea"}function Hm(e,t,n,r){xm(r),t=Ji(t,"onChange"),0<t.length&&(n=new fc("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var gs=null,_s=null;function bv(e){Zm(e,0)}function Eo(e){var t=gr(e);if(hm(t))return e}function Sv(e,t){if(e==="change")return t}var zm=!1;if(Qt){var aa;if(Qt){var la="oninput"in document;if(!la){var Uu=document.createElement("div");Uu.setAttribute("oninput","return;"),la=typeof Uu.oninput=="function"}aa=la}else aa=!1;zm=aa&&(!document.documentMode||9<document.documentMode)}function $u(){gs&&(gs.detachEvent("onpropertychange",Um),_s=gs=null)}function Um(e){if(e.propertyName==="value"&&Eo(_s)){var t=[];Hm(t,_s,e,lc(e)),Cm(bv,t)}}function Cv(e,t,n){e==="focusin"?($u(),gs=t,_s=n,gs.attachEvent("onpropertychange",Um)):e==="focusout"&&$u()}function kv(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Eo(_s)}function Pv(e,t){if(e==="click")return Eo(t)}function Tv(e,t){if(e==="input"||e==="change")return Eo(t)}function jv(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Et=typeof Object.is=="function"?Object.is:jv;function Ds(e,t){if(Et(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Ha.call(t,s)||!Et(e[s],t[s]))return!1}return!0}function qu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Wu(e,t){var n=qu(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=qu(n)}}function $m(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?$m(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function qm(){for(var e=window,t=Ui();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Ui(e.document)}return t}function vc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Ev(e){var t=qm(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&$m(n.ownerDocument.documentElement,n)){if(r!==null&&vc(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=Wu(n,i);var o=Wu(n,r);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Nv=Qt&&"documentMode"in document&&11>=document.documentMode,fr=null,al=null,vs=null,ll=!1;function Ku(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ll||fr==null||fr!==Ui(r)||(r=fr,"selectionStart"in r&&vc(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),vs&&Ds(vs,r)||(vs=r,r=Ji(al,"onSelect"),0<r.length&&(t=new fc("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=fr)))}function fi(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var pr={animationend:fi("Animation","AnimationEnd"),animationiteration:fi("Animation","AnimationIteration"),animationstart:fi("Animation","AnimationStart"),transitionend:fi("Transition","TransitionEnd")},ca={},Wm={};Qt&&(Wm=document.createElement("div").style,"AnimationEvent"in window||(delete pr.animationend.animation,delete pr.animationiteration.animation,delete pr.animationstart.animation),"TransitionEvent"in window||delete pr.transitionend.transition);function No(e){if(ca[e])return ca[e];if(!pr[e])return e;var t=pr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Wm)return ca[e]=t[n];return e}var Km=No("animationend"),Qm=No("animationiteration"),Xm=No("animationstart"),Jm=No("transitionend"),Ym=new Map,Qu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function An(e,t){Ym.set(e,t),ir(t,[e])}for(var ua=0;ua<Qu.length;ua++){var da=Qu[ua],Av=da.toLowerCase(),Mv=da[0].toUpperCase()+da.slice(1);An(Av,"on"+Mv)}An(Km,"onAnimationEnd");An(Qm,"onAnimationIteration");An(Xm,"onAnimationStart");An("dblclick","onDoubleClick");An("focusin","onFocus");An("focusout","onBlur");An(Jm,"onTransitionEnd");Rr("onMouseEnter",["mouseout","mouseover"]);Rr("onMouseLeave",["mouseout","mouseover"]);Rr("onPointerEnter",["pointerout","pointerover"]);Rr("onPointerLeave",["pointerout","pointerover"]);ir("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ir("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ir("onBeforeInput",["compositionend","keypress","textInput","paste"]);ir("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ir("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ir("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ds="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lv=new Set("cancel close invalid load scroll toggle".split(" ").concat(ds));function Xu(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Ag(r,t,void 0,e),e.currentTarget=null}function Zm(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,u=a.currentTarget;if(a=a.listener,c!==i&&s.isPropagationStopped())break e;Xu(s,a,u),i=c}else for(o=0;o<r.length;o++){if(a=r[o],c=a.instance,u=a.currentTarget,a=a.listener,c!==i&&s.isPropagationStopped())break e;Xu(s,a,u),i=c}}}if(qi)throw e=rl,qi=!1,rl=null,e}function me(e,t){var n=t[ml];n===void 0&&(n=t[ml]=new Set);var r=e+"__bubble";n.has(r)||(ef(t,e,2,!1),n.add(r))}function ha(e,t,n){var r=0;t&&(r|=4),ef(n,e,r,t)}var pi="_reactListening"+Math.random().toString(36).slice(2);function Rs(e){if(!e[pi]){e[pi]=!0,am.forEach(function(n){n!=="selectionchange"&&(Lv.has(n)||ha(n,!1,e),ha(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[pi]||(t[pi]=!0,ha("selectionchange",!1,t))}}function ef(e,t,n,r){switch(Om(t)){case 1:var s=qg;break;case 4:s=Wg;break;default:s=hc}n=s.bind(null,t,n,e),s=void 0,!nl||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function ma(e,t,n,r,s){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Hn(a),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}a=a.parentNode}}r=r.return}Cm(function(){var u=i,h=lc(n),d=[];e:{var m=Ym.get(e);if(m!==void 0){var g=fc,x=e;switch(e){case"keypress":if(_i(n)===0)break e;case"keydown":case"keyup":g=lv;break;case"focusin":x="focus",g=oa;break;case"focusout":x="blur",g=oa;break;case"beforeblur":case"afterblur":g=oa;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Gu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=Xg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=dv;break;case Km:case Qm:case Xm:g=Zg;break;case Jm:g=mv;break;case"scroll":g=Kg;break;case"wheel":g=pv;break;case"copy":case"cut":case"paste":g=tv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Vu}var b=(t&4)!==0,k=!b&&e==="scroll",p=b?m!==null?m+"Capture":null:m;b=[];for(var f=u,y;f!==null;){y=f;var w=y.stateNode;if(y.tag===5&&w!==null&&(y=w,p!==null&&(w=Ns(f,p),w!=null&&b.push(Is(f,w,y)))),k)break;f=f.return}0<b.length&&(m=new g(m,x,null,n,h),d.push({event:m,listeners:b}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",g=e==="mouseout"||e==="pointerout",m&&n!==el&&(x=n.relatedTarget||n.fromElement)&&(Hn(x)||x[Xt]))break e;if((g||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,g?(x=n.relatedTarget||n.toElement,g=u,x=x?Hn(x):null,x!==null&&(k=or(x),x!==k||x.tag!==5&&x.tag!==6)&&(x=null)):(g=null,x=u),g!==x)){if(b=Gu,w="onMouseLeave",p="onMouseEnter",f="mouse",(e==="pointerout"||e==="pointerover")&&(b=Vu,w="onPointerLeave",p="onPointerEnter",f="pointer"),k=g==null?m:gr(g),y=x==null?m:gr(x),m=new b(w,f+"leave",g,n,h),m.target=k,m.relatedTarget=y,w=null,Hn(h)===u&&(b=new b(p,f+"enter",x,n,h),b.target=y,b.relatedTarget=k,w=b),k=w,g&&x)t:{for(b=g,p=x,f=0,y=b;y;y=cr(y))f++;for(y=0,w=p;w;w=cr(w))y++;for(;0<f-y;)b=cr(b),f--;for(;0<y-f;)p=cr(p),y--;for(;f--;){if(b===p||p!==null&&b===p.alternate)break t;b=cr(b),p=cr(p)}b=null}else b=null;g!==null&&Ju(d,m,g,b,!1),x!==null&&k!==null&&Ju(d,k,x,b,!0)}}e:{if(m=u?gr(u):window,g=m.nodeName&&m.nodeName.toLowerCase(),g==="select"||g==="input"&&m.type==="file")var S=Sv;else if(zu(m))if(zm)S=Tv;else{S=kv;var C=Cv}else(g=m.nodeName)&&g.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(S=Pv);if(S&&(S=S(e,u))){Hm(d,S,n,h);break e}C&&C(e,m,u),e==="focusout"&&(C=m._wrapperState)&&C.controlled&&m.type==="number"&&Qa(m,"number",m.value)}switch(C=u?gr(u):window,e){case"focusin":(zu(C)||C.contentEditable==="true")&&(fr=C,al=u,vs=null);break;case"focusout":vs=al=fr=null;break;case"mousedown":ll=!0;break;case"contextmenu":case"mouseup":case"dragend":ll=!1,Ku(d,n,h);break;case"selectionchange":if(Nv)break;case"keydown":case"keyup":Ku(d,n,h)}var P;if(gc)e:{switch(e){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else mr?Vm(e,n)&&(T="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(Fm&&n.locale!=="ko"&&(mr||T!=="onCompositionStart"?T==="onCompositionEnd"&&mr&&(P=Gm()):(dn=h,mc="value"in dn?dn.value:dn.textContent,mr=!0)),C=Ji(u,T),0<C.length&&(T=new Fu(T,e,null,n,h),d.push({event:T,listeners:C}),P?T.data=P:(P=Bm(n),P!==null&&(T.data=P)))),(P=vv?yv(e,n):xv(e,n))&&(u=Ji(u,"onBeforeInput"),0<u.length&&(h=new Fu("onBeforeInput","beforeinput",null,n,h),d.push({event:h,listeners:u}),h.data=P))}Zm(d,t)})}function Is(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ji(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Ns(e,n),i!=null&&r.unshift(Is(e,i,s)),i=Ns(e,t),i!=null&&r.push(Is(e,i,s))),e=e.return}return r}function cr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Ju(e,t,n,r,s){for(var i=t._reactName,o=[];n!==null&&n!==r;){var a=n,c=a.alternate,u=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&u!==null&&(a=u,s?(c=Ns(n,i),c!=null&&o.unshift(Is(n,c,a))):s||(c=Ns(n,i),c!=null&&o.push(Is(n,c,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var _v=/\r\n?/g,Dv=/\u0000|\uFFFD/g;function Yu(e){return(typeof e=="string"?e:""+e).replace(_v,`
`).replace(Dv,"")}function gi(e,t,n){if(t=Yu(t),Yu(e)!==t&&n)throw Error(D(425))}function Yi(){}var cl=null,ul=null;function dl(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var hl=typeof setTimeout=="function"?setTimeout:void 0,Rv=typeof clearTimeout=="function"?clearTimeout:void 0,Zu=typeof Promise=="function"?Promise:void 0,Iv=typeof queueMicrotask=="function"?queueMicrotask:typeof Zu<"u"?function(e){return Zu.resolve(null).then(e).catch(Ov)}:hl;function Ov(e){setTimeout(function(){throw e})}function fa(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),Ls(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Ls(t)}function vn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function ed(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Kr=Math.random().toString(36).slice(2),Lt="__reactFiber$"+Kr,Os="__reactProps$"+Kr,Xt="__reactContainer$"+Kr,ml="__reactEvents$"+Kr,Gv="__reactListeners$"+Kr,Fv="__reactHandles$"+Kr;function Hn(e){var t=e[Lt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Xt]||n[Lt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=ed(e);e!==null;){if(n=e[Lt])return n;e=ed(e)}return t}e=n,n=e.parentNode}return null}function Js(e){return e=e[Lt]||e[Xt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function gr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(D(33))}function Ao(e){return e[Os]||null}var fl=[],vr=-1;function Mn(e){return{current:e}}function fe(e){0>vr||(e.current=fl[vr],fl[vr]=null,vr--)}function ue(e,t){vr++,fl[vr]=e.current,e.current=t}var Pn={},Ue=Mn(Pn),tt=Mn(!1),Kn=Pn;function Ir(e,t){var n=e.type.contextTypes;if(!n)return Pn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function nt(e){return e=e.childContextTypes,e!=null}function Zi(){fe(tt),fe(Ue)}function td(e,t,n){if(Ue.current!==Pn)throw Error(D(168));ue(Ue,t),ue(tt,n)}function tf(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(D(108,Cg(e)||"Unknown",s));return be({},n,r)}function eo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Pn,Kn=Ue.current,ue(Ue,e),ue(tt,tt.current),!0}function nd(e,t,n){var r=e.stateNode;if(!r)throw Error(D(169));n?(e=tf(e,t,Kn),r.__reactInternalMemoizedMergedChildContext=e,fe(tt),fe(Ue),ue(Ue,e)):fe(tt),ue(tt,n)}var Ft=null,Mo=!1,pa=!1;function nf(e){Ft===null?Ft=[e]:Ft.push(e)}function Vv(e){Mo=!0,nf(e)}function Ln(){if(!pa&&Ft!==null){pa=!0;var e=0,t=ae;try{var n=Ft;for(ae=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Ft=null,Mo=!1}catch(s){throw Ft!==null&&(Ft=Ft.slice(e+1)),jm(cc,Ln),s}finally{ae=t,pa=!1}}return null}var yr=[],xr=0,to=null,no=0,ft=[],pt=0,Qn=null,Ht=1,zt="";function On(e,t){yr[xr++]=no,yr[xr++]=to,to=e,no=t}function rf(e,t,n){ft[pt++]=Ht,ft[pt++]=zt,ft[pt++]=Qn,Qn=e;var r=Ht;e=zt;var s=32-Tt(r)-1;r&=~(1<<s),n+=1;var i=32-Tt(t)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Ht=1<<32-Tt(t)+s|n<<s|r,zt=i+e}else Ht=1<<i|n<<s|r,zt=e}function yc(e){e.return!==null&&(On(e,1),rf(e,1,0))}function xc(e){for(;e===to;)to=yr[--xr],yr[xr]=null,no=yr[--xr],yr[xr]=null;for(;e===Qn;)Qn=ft[--pt],ft[pt]=null,zt=ft[--pt],ft[pt]=null,Ht=ft[--pt],ft[pt]=null}var at=null,ot=null,ve=!1,Pt=null;function sf(e,t){var n=gt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function rd(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,at=e,ot=vn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,at=e,ot=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Qn!==null?{id:Ht,overflow:zt}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=gt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,at=e,ot=null,!0):!1;default:return!1}}function pl(e){return(e.mode&1)!==0&&(e.flags&128)===0}function gl(e){if(ve){var t=ot;if(t){var n=t;if(!rd(e,t)){if(pl(e))throw Error(D(418));t=vn(n.nextSibling);var r=at;t&&rd(e,t)?sf(r,n):(e.flags=e.flags&-4097|2,ve=!1,at=e)}}else{if(pl(e))throw Error(D(418));e.flags=e.flags&-4097|2,ve=!1,at=e}}}function sd(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;at=e}function vi(e){if(e!==at)return!1;if(!ve)return sd(e),ve=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!dl(e.type,e.memoizedProps)),t&&(t=ot)){if(pl(e))throw of(),Error(D(418));for(;t;)sf(e,t),t=vn(t.nextSibling)}if(sd(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(D(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){ot=vn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}ot=null}}else ot=at?vn(e.stateNode.nextSibling):null;return!0}function of(){for(var e=ot;e;)e=vn(e.nextSibling)}function Or(){ot=at=null,ve=!1}function wc(e){Pt===null?Pt=[e]:Pt.push(e)}var Bv=en.ReactCurrentBatchConfig;function ns(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(D(309));var r=n.stateNode}if(!r)throw Error(D(147,e));var s=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(D(284));if(!n._owner)throw Error(D(290,e))}return e}function yi(e,t){throw e=Object.prototype.toString.call(t),Error(D(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function id(e){var t=e._init;return t(e._payload)}function af(e){function t(p,f){if(e){var y=p.deletions;y===null?(p.deletions=[f],p.flags|=16):y.push(f)}}function n(p,f){if(!e)return null;for(;f!==null;)t(p,f),f=f.sibling;return null}function r(p,f){for(p=new Map;f!==null;)f.key!==null?p.set(f.key,f):p.set(f.index,f),f=f.sibling;return p}function s(p,f){return p=bn(p,f),p.index=0,p.sibling=null,p}function i(p,f,y){return p.index=y,e?(y=p.alternate,y!==null?(y=y.index,y<f?(p.flags|=2,f):y):(p.flags|=2,f)):(p.flags|=1048576,f)}function o(p){return e&&p.alternate===null&&(p.flags|=2),p}function a(p,f,y,w){return f===null||f.tag!==6?(f=Sa(y,p.mode,w),f.return=p,f):(f=s(f,y),f.return=p,f)}function c(p,f,y,w){var S=y.type;return S===hr?h(p,f,y.props.children,w,y.key):f!==null&&(f.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===on&&id(S)===f.type)?(w=s(f,y.props),w.ref=ns(p,f,y),w.return=p,w):(w=Vi(y.type,y.key,y.props,null,p.mode,w),w.ref=ns(p,f,y),w.return=p,w)}function u(p,f,y,w){return f===null||f.tag!==4||f.stateNode.containerInfo!==y.containerInfo||f.stateNode.implementation!==y.implementation?(f=Ca(y,p.mode,w),f.return=p,f):(f=s(f,y.children||[]),f.return=p,f)}function h(p,f,y,w,S){return f===null||f.tag!==7?(f=Wn(y,p.mode,w,S),f.return=p,f):(f=s(f,y),f.return=p,f)}function d(p,f,y){if(typeof f=="string"&&f!==""||typeof f=="number")return f=Sa(""+f,p.mode,y),f.return=p,f;if(typeof f=="object"&&f!==null){switch(f.$$typeof){case ai:return y=Vi(f.type,f.key,f.props,null,p.mode,y),y.ref=ns(p,null,f),y.return=p,y;case dr:return f=Ca(f,p.mode,y),f.return=p,f;case on:var w=f._init;return d(p,w(f._payload),y)}if(cs(f)||Jr(f))return f=Wn(f,p.mode,y,null),f.return=p,f;yi(p,f)}return null}function m(p,f,y,w){var S=f!==null?f.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return S!==null?null:a(p,f,""+y,w);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case ai:return y.key===S?c(p,f,y,w):null;case dr:return y.key===S?u(p,f,y,w):null;case on:return S=y._init,m(p,f,S(y._payload),w)}if(cs(y)||Jr(y))return S!==null?null:h(p,f,y,w,null);yi(p,y)}return null}function g(p,f,y,w,S){if(typeof w=="string"&&w!==""||typeof w=="number")return p=p.get(y)||null,a(f,p,""+w,S);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case ai:return p=p.get(w.key===null?y:w.key)||null,c(f,p,w,S);case dr:return p=p.get(w.key===null?y:w.key)||null,u(f,p,w,S);case on:var C=w._init;return g(p,f,y,C(w._payload),S)}if(cs(w)||Jr(w))return p=p.get(y)||null,h(f,p,w,S,null);yi(f,w)}return null}function x(p,f,y,w){for(var S=null,C=null,P=f,T=f=0,j=null;P!==null&&T<y.length;T++){P.index>T?(j=P,P=null):j=P.sibling;var E=m(p,P,y[T],w);if(E===null){P===null&&(P=j);break}e&&P&&E.alternate===null&&t(p,P),f=i(E,f,T),C===null?S=E:C.sibling=E,C=E,P=j}if(T===y.length)return n(p,P),ve&&On(p,T),S;if(P===null){for(;T<y.length;T++)P=d(p,y[T],w),P!==null&&(f=i(P,f,T),C===null?S=P:C.sibling=P,C=P);return ve&&On(p,T),S}for(P=r(p,P);T<y.length;T++)j=g(P,p,T,y[T],w),j!==null&&(e&&j.alternate!==null&&P.delete(j.key===null?T:j.key),f=i(j,f,T),C===null?S=j:C.sibling=j,C=j);return e&&P.forEach(function(L){return t(p,L)}),ve&&On(p,T),S}function b(p,f,y,w){var S=Jr(y);if(typeof S!="function")throw Error(D(150));if(y=S.call(y),y==null)throw Error(D(151));for(var C=S=null,P=f,T=f=0,j=null,E=y.next();P!==null&&!E.done;T++,E=y.next()){P.index>T?(j=P,P=null):j=P.sibling;var L=m(p,P,E.value,w);if(L===null){P===null&&(P=j);break}e&&P&&L.alternate===null&&t(p,P),f=i(L,f,T),C===null?S=L:C.sibling=L,C=L,P=j}if(E.done)return n(p,P),ve&&On(p,T),S;if(P===null){for(;!E.done;T++,E=y.next())E=d(p,E.value,w),E!==null&&(f=i(E,f,T),C===null?S=E:C.sibling=E,C=E);return ve&&On(p,T),S}for(P=r(p,P);!E.done;T++,E=y.next())E=g(P,p,T,E.value,w),E!==null&&(e&&E.alternate!==null&&P.delete(E.key===null?T:E.key),f=i(E,f,T),C===null?S=E:C.sibling=E,C=E);return e&&P.forEach(function(A){return t(p,A)}),ve&&On(p,T),S}function k(p,f,y,w){if(typeof y=="object"&&y!==null&&y.type===hr&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case ai:e:{for(var S=y.key,C=f;C!==null;){if(C.key===S){if(S=y.type,S===hr){if(C.tag===7){n(p,C.sibling),f=s(C,y.props.children),f.return=p,p=f;break e}}else if(C.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===on&&id(S)===C.type){n(p,C.sibling),f=s(C,y.props),f.ref=ns(p,C,y),f.return=p,p=f;break e}n(p,C);break}else t(p,C);C=C.sibling}y.type===hr?(f=Wn(y.props.children,p.mode,w,y.key),f.return=p,p=f):(w=Vi(y.type,y.key,y.props,null,p.mode,w),w.ref=ns(p,f,y),w.return=p,p=w)}return o(p);case dr:e:{for(C=y.key;f!==null;){if(f.key===C)if(f.tag===4&&f.stateNode.containerInfo===y.containerInfo&&f.stateNode.implementation===y.implementation){n(p,f.sibling),f=s(f,y.children||[]),f.return=p,p=f;break e}else{n(p,f);break}else t(p,f);f=f.sibling}f=Ca(y,p.mode,w),f.return=p,p=f}return o(p);case on:return C=y._init,k(p,f,C(y._payload),w)}if(cs(y))return x(p,f,y,w);if(Jr(y))return b(p,f,y,w);yi(p,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,f!==null&&f.tag===6?(n(p,f.sibling),f=s(f,y),f.return=p,p=f):(n(p,f),f=Sa(y,p.mode,w),f.return=p,p=f),o(p)):n(p,f)}return k}var Gr=af(!0),lf=af(!1),ro=Mn(null),so=null,wr=null,bc=null;function Sc(){bc=wr=so=null}function Cc(e){var t=ro.current;fe(ro),e._currentValue=t}function vl(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Lr(e,t){so=e,bc=wr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(et=!0),e.firstContext=null)}function yt(e){var t=e._currentValue;if(bc!==e)if(e={context:e,memoizedValue:t,next:null},wr===null){if(so===null)throw Error(D(308));wr=e,so.dependencies={lanes:0,firstContext:e}}else wr=wr.next=e;return t}var zn=null;function kc(e){zn===null?zn=[e]:zn.push(e)}function cf(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,kc(t)):(n.next=s.next,s.next=n),t.interleaved=n,Jt(e,r)}function Jt(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var an=!1;function Pc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function uf(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function qt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function yn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,ne&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Jt(e,n)}return s=r.interleaved,s===null?(t.next=t,kc(r)):(t.next=s.next,s.next=t),r.interleaved=t,Jt(e,n)}function Di(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,uc(e,n)}}function od(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=t:i=i.next=t}else s=i=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function io(e,t,n,r){var s=e.updateQueue;an=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var c=a,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var h=e.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=u:a.next=u,h.lastBaseUpdate=c))}if(i!==null){var d=s.baseState;o=0,h=u=c=null,a=i;do{var m=a.lane,g=a.eventTime;if((r&m)===m){h!==null&&(h=h.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var x=e,b=a;switch(m=t,g=n,b.tag){case 1:if(x=b.payload,typeof x=="function"){d=x.call(g,d,m);break e}d=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=b.payload,m=typeof x=="function"?x.call(g,d,m):x,m==null)break e;d=be({},d,m);break e;case 2:an=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,m=s.effects,m===null?s.effects=[a]:m.push(a))}else g={eventTime:g,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(u=h=g,c=d):h=h.next=g,o|=m;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;m=a,a=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(1);if(h===null&&(c=d),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=h,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);Jn|=o,e.lanes=o,e.memoizedState=d}}function ad(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(D(191,s));s.call(r)}}}var Ys={},Rt=Mn(Ys),Gs=Mn(Ys),Fs=Mn(Ys);function Un(e){if(e===Ys)throw Error(D(174));return e}function Tc(e,t){switch(ue(Fs,t),ue(Gs,e),ue(Rt,Ys),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ja(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ja(t,e)}fe(Rt),ue(Rt,t)}function Fr(){fe(Rt),fe(Gs),fe(Fs)}function df(e){Un(Fs.current);var t=Un(Rt.current),n=Ja(t,e.type);t!==n&&(ue(Gs,e),ue(Rt,n))}function jc(e){Gs.current===e&&(fe(Rt),fe(Gs))}var ye=Mn(0);function oo(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ga=[];function Ec(){for(var e=0;e<ga.length;e++)ga[e]._workInProgressVersionPrimary=null;ga.length=0}var Ri=en.ReactCurrentDispatcher,va=en.ReactCurrentBatchConfig,Xn=0,we=null,Ae=null,_e=null,ao=!1,ys=!1,Vs=0,Hv=0;function Fe(){throw Error(D(321))}function Nc(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Et(e[n],t[n]))return!1;return!0}function Ac(e,t,n,r,s,i){if(Xn=i,we=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ri.current=e===null||e.memoizedState===null?qv:Wv,e=n(r,s),ys){i=0;do{if(ys=!1,Vs=0,25<=i)throw Error(D(301));i+=1,_e=Ae=null,t.updateQueue=null,Ri.current=Kv,e=n(r,s)}while(ys)}if(Ri.current=lo,t=Ae!==null&&Ae.next!==null,Xn=0,_e=Ae=we=null,ao=!1,t)throw Error(D(300));return e}function Mc(){var e=Vs!==0;return Vs=0,e}function Mt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _e===null?we.memoizedState=_e=e:_e=_e.next=e,_e}function xt(){if(Ae===null){var e=we.alternate;e=e!==null?e.memoizedState:null}else e=Ae.next;var t=_e===null?we.memoizedState:_e.next;if(t!==null)_e=t,Ae=e;else{if(e===null)throw Error(D(310));Ae=e,e={memoizedState:Ae.memoizedState,baseState:Ae.baseState,baseQueue:Ae.baseQueue,queue:Ae.queue,next:null},_e===null?we.memoizedState=_e=e:_e=_e.next=e}return _e}function Bs(e,t){return typeof t=="function"?t(e):t}function ya(e){var t=xt(),n=t.queue;if(n===null)throw Error(D(311));n.lastRenderedReducer=e;var r=Ae,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,c=null,u=i;do{var h=u.lane;if((Xn&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(a=c=d,o=r):c=c.next=d,we.lanes|=h,Jn|=h}u=u.next}while(u!==null&&u!==i);c===null?o=r:c.next=a,Et(r,t.memoizedState)||(et=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do i=s.lane,we.lanes|=i,Jn|=i,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function xa(e){var t=xt(),n=t.queue;if(n===null)throw Error(D(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);Et(i,t.memoizedState)||(et=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function hf(){}function mf(e,t){var n=we,r=xt(),s=t(),i=!Et(r.memoizedState,s);if(i&&(r.memoizedState=s,et=!0),r=r.queue,Lc(gf.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||_e!==null&&_e.memoizedState.tag&1){if(n.flags|=2048,Hs(9,pf.bind(null,n,r,s,t),void 0,null),De===null)throw Error(D(349));Xn&30||ff(n,t,s)}return s}function ff(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=we.updateQueue,t===null?(t={lastEffect:null,stores:null},we.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function pf(e,t,n,r){t.value=n,t.getSnapshot=r,vf(t)&&yf(e)}function gf(e,t,n){return n(function(){vf(t)&&yf(e)})}function vf(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Et(e,n)}catch{return!0}}function yf(e){var t=Jt(e,1);t!==null&&jt(t,e,1,-1)}function ld(e){var t=Mt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Bs,lastRenderedState:e},t.queue=e,e=e.dispatch=$v.bind(null,we,e),[t.memoizedState,e]}function Hs(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=we.updateQueue,t===null?(t={lastEffect:null,stores:null},we.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function xf(){return xt().memoizedState}function Ii(e,t,n,r){var s=Mt();we.flags|=e,s.memoizedState=Hs(1|t,n,void 0,r===void 0?null:r)}function Lo(e,t,n,r){var s=xt();r=r===void 0?null:r;var i=void 0;if(Ae!==null){var o=Ae.memoizedState;if(i=o.destroy,r!==null&&Nc(r,o.deps)){s.memoizedState=Hs(t,n,i,r);return}}we.flags|=e,s.memoizedState=Hs(1|t,n,i,r)}function cd(e,t){return Ii(8390656,8,e,t)}function Lc(e,t){return Lo(2048,8,e,t)}function wf(e,t){return Lo(4,2,e,t)}function bf(e,t){return Lo(4,4,e,t)}function Sf(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Cf(e,t,n){return n=n!=null?n.concat([e]):null,Lo(4,4,Sf.bind(null,t,e),n)}function _c(){}function kf(e,t){var n=xt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Nc(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Pf(e,t){var n=xt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Nc(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Tf(e,t,n){return Xn&21?(Et(n,t)||(n=Am(),we.lanes|=n,Jn|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,et=!0),e.memoizedState=n)}function zv(e,t){var n=ae;ae=n!==0&&4>n?n:4,e(!0);var r=va.transition;va.transition={};try{e(!1),t()}finally{ae=n,va.transition=r}}function jf(){return xt().memoizedState}function Uv(e,t,n){var r=wn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ef(e))Nf(t,n);else if(n=cf(e,t,n,r),n!==null){var s=Qe();jt(n,e,r,s),Af(n,t,r)}}function $v(e,t,n){var r=wn(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ef(e))Nf(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Et(a,o)){var c=t.interleaved;c===null?(s.next=s,kc(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}n=cf(e,t,s,r),n!==null&&(s=Qe(),jt(n,e,r,s),Af(n,t,r))}}function Ef(e){var t=e.alternate;return e===we||t!==null&&t===we}function Nf(e,t){ys=ao=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Af(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,uc(e,n)}}var lo={readContext:yt,useCallback:Fe,useContext:Fe,useEffect:Fe,useImperativeHandle:Fe,useInsertionEffect:Fe,useLayoutEffect:Fe,useMemo:Fe,useReducer:Fe,useRef:Fe,useState:Fe,useDebugValue:Fe,useDeferredValue:Fe,useTransition:Fe,useMutableSource:Fe,useSyncExternalStore:Fe,useId:Fe,unstable_isNewReconciler:!1},qv={readContext:yt,useCallback:function(e,t){return Mt().memoizedState=[e,t===void 0?null:t],e},useContext:yt,useEffect:cd,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Ii(4194308,4,Sf.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ii(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ii(4,2,e,t)},useMemo:function(e,t){var n=Mt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Mt();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Uv.bind(null,we,e),[r.memoizedState,e]},useRef:function(e){var t=Mt();return e={current:e},t.memoizedState=e},useState:ld,useDebugValue:_c,useDeferredValue:function(e){return Mt().memoizedState=e},useTransition:function(){var e=ld(!1),t=e[0];return e=zv.bind(null,e[1]),Mt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=we,s=Mt();if(ve){if(n===void 0)throw Error(D(407));n=n()}else{if(n=t(),De===null)throw Error(D(349));Xn&30||ff(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,cd(gf.bind(null,r,i,e),[e]),r.flags|=2048,Hs(9,pf.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=Mt(),t=De.identifierPrefix;if(ve){var n=zt,r=Ht;n=(r&~(1<<32-Tt(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Vs++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Hv++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Wv={readContext:yt,useCallback:kf,useContext:yt,useEffect:Lc,useImperativeHandle:Cf,useInsertionEffect:wf,useLayoutEffect:bf,useMemo:Pf,useReducer:ya,useRef:xf,useState:function(){return ya(Bs)},useDebugValue:_c,useDeferredValue:function(e){var t=xt();return Tf(t,Ae.memoizedState,e)},useTransition:function(){var e=ya(Bs)[0],t=xt().memoizedState;return[e,t]},useMutableSource:hf,useSyncExternalStore:mf,useId:jf,unstable_isNewReconciler:!1},Kv={readContext:yt,useCallback:kf,useContext:yt,useEffect:Lc,useImperativeHandle:Cf,useInsertionEffect:wf,useLayoutEffect:bf,useMemo:Pf,useReducer:xa,useRef:xf,useState:function(){return xa(Bs)},useDebugValue:_c,useDeferredValue:function(e){var t=xt();return Ae===null?t.memoizedState=e:Tf(t,Ae.memoizedState,e)},useTransition:function(){var e=xa(Bs)[0],t=xt().memoizedState;return[e,t]},useMutableSource:hf,useSyncExternalStore:mf,useId:jf,unstable_isNewReconciler:!1};function Ct(e,t){if(e&&e.defaultProps){t=be({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function yl(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:be({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var _o={isMounted:function(e){return(e=e._reactInternals)?or(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Qe(),s=wn(e),i=qt(r,s);i.payload=t,n!=null&&(i.callback=n),t=yn(e,i,s),t!==null&&(jt(t,e,s,r),Di(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Qe(),s=wn(e),i=qt(r,s);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=yn(e,i,s),t!==null&&(jt(t,e,s,r),Di(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Qe(),r=wn(e),s=qt(n,r);s.tag=2,t!=null&&(s.callback=t),t=yn(e,s,r),t!==null&&(jt(t,e,r,n),Di(t,e,r))}};function ud(e,t,n,r,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,o):t.prototype&&t.prototype.isPureReactComponent?!Ds(n,r)||!Ds(s,i):!0}function Mf(e,t,n){var r=!1,s=Pn,i=t.contextType;return typeof i=="object"&&i!==null?i=yt(i):(s=nt(t)?Kn:Ue.current,r=t.contextTypes,i=(r=r!=null)?Ir(e,s):Pn),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=_o,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function dd(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&_o.enqueueReplaceState(t,t.state,null)}function xl(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Pc(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=yt(i):(i=nt(t)?Kn:Ue.current,s.context=Ir(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(yl(e,t,i,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&_o.enqueueReplaceState(s,s.state,null),io(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Vr(e,t){try{var n="",r=t;do n+=Sg(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function wa(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function wl(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Qv=typeof WeakMap=="function"?WeakMap:Map;function Lf(e,t,n){n=qt(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){uo||(uo=!0,Al=r),wl(e,t)},n}function _f(e,t,n){n=qt(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){wl(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){wl(e,t),typeof r!="function"&&(xn===null?xn=new Set([this]):xn.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function hd(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Qv;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=cy.bind(null,e,t,n),t.then(e,e))}function md(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function fd(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=qt(-1,1),t.tag=2,yn(n,t,1))),n.lanes|=1),e)}var Xv=en.ReactCurrentOwner,et=!1;function Ke(e,t,n,r){t.child=e===null?lf(t,null,n,r):Gr(t,e.child,n,r)}function pd(e,t,n,r,s){n=n.render;var i=t.ref;return Lr(t,s),r=Ac(e,t,n,r,i,s),n=Mc(),e!==null&&!et?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Yt(e,t,s)):(ve&&n&&yc(t),t.flags|=1,Ke(e,t,r,s),t.child)}function gd(e,t,n,r,s){if(e===null){var i=n.type;return typeof i=="function"&&!Bc(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,Df(e,t,i,r,s)):(e=Vi(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Ds,n(o,r)&&e.ref===t.ref)return Yt(e,t,s)}return t.flags|=1,e=bn(i,r),e.ref=t.ref,e.return=t,t.child=e}function Df(e,t,n,r,s){if(e!==null){var i=e.memoizedProps;if(Ds(i,r)&&e.ref===t.ref)if(et=!1,t.pendingProps=r=i,(e.lanes&s)!==0)e.flags&131072&&(et=!0);else return t.lanes=e.lanes,Yt(e,t,s)}return bl(e,t,n,r,s)}function Rf(e,t,n){var r=t.pendingProps,s=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ue(Sr,it),it|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ue(Sr,it),it|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,ue(Sr,it),it|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,ue(Sr,it),it|=r;return Ke(e,t,s,n),t.child}function If(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function bl(e,t,n,r,s){var i=nt(n)?Kn:Ue.current;return i=Ir(t,i),Lr(t,s),n=Ac(e,t,n,r,i,s),r=Mc(),e!==null&&!et?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Yt(e,t,s)):(ve&&r&&yc(t),t.flags|=1,Ke(e,t,n,s),t.child)}function vd(e,t,n,r,s){if(nt(n)){var i=!0;eo(t)}else i=!1;if(Lr(t,s),t.stateNode===null)Oi(e,t),Mf(t,n,r),xl(t,n,r,s),r=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=yt(u):(u=nt(n)?Kn:Ue.current,u=Ir(t,u));var h=n.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||c!==u)&&dd(t,o,r,u),an=!1;var m=t.memoizedState;o.state=m,io(t,r,o,s),c=t.memoizedState,a!==r||m!==c||tt.current||an?(typeof h=="function"&&(yl(t,n,h,r),c=t.memoizedState),(a=an||ud(t,n,a,r,m,c,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),o.props=r,o.state=c,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,uf(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:Ct(t.type,a),o.props=u,d=t.pendingProps,m=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=yt(c):(c=nt(n)?Kn:Ue.current,c=Ir(t,c));var g=n.getDerivedStateFromProps;(h=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||m!==c)&&dd(t,o,r,c),an=!1,m=t.memoizedState,o.state=m,io(t,r,o,s);var x=t.memoizedState;a!==d||m!==x||tt.current||an?(typeof g=="function"&&(yl(t,n,g,r),x=t.memoizedState),(u=an||ud(t,n,u,r,m,x,c)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,x,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,x,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=x),o.props=r,o.state=x,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),r=!1)}return Sl(e,t,n,r,i,s)}function Sl(e,t,n,r,s,i){If(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return s&&nd(t,n,!1),Yt(e,t,i);r=t.stateNode,Xv.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=Gr(t,e.child,null,i),t.child=Gr(t,null,a,i)):Ke(e,t,a,i),t.memoizedState=r.state,s&&nd(t,n,!0),t.child}function Of(e){var t=e.stateNode;t.pendingContext?td(e,t.pendingContext,t.pendingContext!==t.context):t.context&&td(e,t.context,!1),Tc(e,t.containerInfo)}function yd(e,t,n,r,s){return Or(),wc(s),t.flags|=256,Ke(e,t,n,r),t.child}var Cl={dehydrated:null,treeContext:null,retryLane:0};function kl(e){return{baseLanes:e,cachePool:null,transitions:null}}function Gf(e,t,n){var r=t.pendingProps,s=ye.current,i=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(s&2)!==0),a?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),ue(ye,s&1),e===null)return gl(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,i?(r=t.mode,i=t.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Io(o,r,0,null),e=Wn(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=kl(n),t.memoizedState=Cl,e):Dc(t,o));if(s=e.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return Jv(e,t,o,r,a,s,n);if(i){i=r.fallback,o=t.mode,s=e.child,a=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=bn(s,c),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=bn(a,i):(i=Wn(i,o,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,o=e.child.memoizedState,o=o===null?kl(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~n,t.memoizedState=Cl,r}return i=e.child,e=i.sibling,r=bn(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Dc(e,t){return t=Io({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function xi(e,t,n,r){return r!==null&&wc(r),Gr(t,e.child,null,n),e=Dc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Jv(e,t,n,r,s,i,o){if(n)return t.flags&256?(t.flags&=-257,r=wa(Error(D(422))),xi(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,s=t.mode,r=Io({mode:"visible",children:r.children},s,0,null),i=Wn(i,s,o,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&Gr(t,e.child,null,o),t.child.memoizedState=kl(o),t.memoizedState=Cl,i);if(!(t.mode&1))return xi(e,t,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(D(419)),r=wa(i,r,void 0),xi(e,t,o,r)}if(a=(o&e.childLanes)!==0,et||a){if(r=De,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Jt(e,s),jt(r,e,s,-1))}return Vc(),r=wa(Error(D(421))),xi(e,t,o,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=uy.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,ot=vn(s.nextSibling),at=t,ve=!0,Pt=null,e!==null&&(ft[pt++]=Ht,ft[pt++]=zt,ft[pt++]=Qn,Ht=e.id,zt=e.overflow,Qn=t),t=Dc(t,r.children),t.flags|=4096,t)}function xd(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),vl(e.return,t,n)}function ba(e,t,n,r,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Ff(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(Ke(e,t,r.children,n),r=ye.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&xd(e,n,t);else if(e.tag===19)xd(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ue(ye,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&oo(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),ba(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&oo(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}ba(t,!0,n,null,i);break;case"together":ba(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Oi(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Yt(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Jn|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(D(153));if(t.child!==null){for(e=t.child,n=bn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=bn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Yv(e,t,n){switch(t.tag){case 3:Of(t),Or();break;case 5:df(t);break;case 1:nt(t.type)&&eo(t);break;case 4:Tc(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;ue(ro,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(ue(ye,ye.current&1),t.flags|=128,null):n&t.child.childLanes?Gf(e,t,n):(ue(ye,ye.current&1),e=Yt(e,t,n),e!==null?e.sibling:null);ue(ye,ye.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Ff(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ue(ye,ye.current),r)break;return null;case 22:case 23:return t.lanes=0,Rf(e,t,n)}return Yt(e,t,n)}var Vf,Pl,Bf,Hf;Vf=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Pl=function(){};Bf=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Un(Rt.current);var i=null;switch(n){case"input":s=Wa(e,s),r=Wa(e,r),i=[];break;case"select":s=be({},s,{value:void 0}),r=be({},r,{value:void 0}),i=[];break;case"textarea":s=Xa(e,s),r=Xa(e,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Yi)}Ya(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(js.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(a=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==a&&(c!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(js.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&me("scroll",e),i||a===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};Hf=function(e,t,n,r){n!==r&&(t.flags|=4)};function rs(e,t){if(!ve)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ve(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Zv(e,t,n){var r=t.pendingProps;switch(xc(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ve(t),null;case 1:return nt(t.type)&&Zi(),Ve(t),null;case 3:return r=t.stateNode,Fr(),fe(tt),fe(Ue),Ec(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(vi(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Pt!==null&&(_l(Pt),Pt=null))),Pl(e,t),Ve(t),null;case 5:jc(t);var s=Un(Fs.current);if(n=t.type,e!==null&&t.stateNode!=null)Bf(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(D(166));return Ve(t),null}if(e=Un(Rt.current),vi(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[Lt]=t,r[Os]=i,e=(t.mode&1)!==0,n){case"dialog":me("cancel",r),me("close",r);break;case"iframe":case"object":case"embed":me("load",r);break;case"video":case"audio":for(s=0;s<ds.length;s++)me(ds[s],r);break;case"source":me("error",r);break;case"img":case"image":case"link":me("error",r),me("load",r);break;case"details":me("toggle",r);break;case"input":Eu(r,i),me("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},me("invalid",r);break;case"textarea":Au(r,i),me("invalid",r)}Ya(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&gi(r.textContent,a,e),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&gi(r.textContent,a,e),s=["children",""+a]):js.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&me("scroll",r)}switch(n){case"input":li(r),Nu(r,i,!0);break;case"textarea":li(r),Mu(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Yi)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=pm(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[Lt]=t,e[Os]=r,Vf(e,t,!1,!1),t.stateNode=e;e:{switch(o=Za(n,r),n){case"dialog":me("cancel",e),me("close",e),s=r;break;case"iframe":case"object":case"embed":me("load",e),s=r;break;case"video":case"audio":for(s=0;s<ds.length;s++)me(ds[s],e);s=r;break;case"source":me("error",e),s=r;break;case"img":case"image":case"link":me("error",e),me("load",e),s=r;break;case"details":me("toggle",e),s=r;break;case"input":Eu(e,r),s=Wa(e,r),me("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=be({},r,{value:void 0}),me("invalid",e);break;case"textarea":Au(e,r),s=Xa(e,r),me("invalid",e);break;default:s=r}Ya(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var c=a[i];i==="style"?ym(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&gm(e,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Es(e,c):typeof c=="number"&&Es(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(js.hasOwnProperty(i)?c!=null&&i==="onScroll"&&me("scroll",e):c!=null&&sc(e,i,c,o))}switch(n){case"input":li(e),Nu(e,r,!1);break;case"textarea":li(e),Mu(e);break;case"option":r.value!=null&&e.setAttribute("value",""+kn(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?Er(e,!!r.multiple,i,!1):r.defaultValue!=null&&Er(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Yi)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ve(t),null;case 6:if(e&&t.stateNode!=null)Hf(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(D(166));if(n=Un(Fs.current),Un(Rt.current),vi(t)){if(r=t.stateNode,n=t.memoizedProps,r[Lt]=t,(i=r.nodeValue!==n)&&(e=at,e!==null))switch(e.tag){case 3:gi(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&gi(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Lt]=t,t.stateNode=r}return Ve(t),null;case 13:if(fe(ye),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ve&&ot!==null&&t.mode&1&&!(t.flags&128))of(),Or(),t.flags|=98560,i=!1;else if(i=vi(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(D(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(D(317));i[Lt]=t}else Or(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ve(t),i=!1}else Pt!==null&&(_l(Pt),Pt=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||ye.current&1?Me===0&&(Me=3):Vc())),t.updateQueue!==null&&(t.flags|=4),Ve(t),null);case 4:return Fr(),Pl(e,t),e===null&&Rs(t.stateNode.containerInfo),Ve(t),null;case 10:return Cc(t.type._context),Ve(t),null;case 17:return nt(t.type)&&Zi(),Ve(t),null;case 19:if(fe(ye),i=t.memoizedState,i===null)return Ve(t),null;if(r=(t.flags&128)!==0,o=i.rendering,o===null)if(r)rs(i,!1);else{if(Me!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=oo(e),o!==null){for(t.flags|=128,rs(i,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ue(ye,ye.current&1|2),t.child}e=e.sibling}i.tail!==null&&Te()>Br&&(t.flags|=128,r=!0,rs(i,!1),t.lanes=4194304)}else{if(!r)if(e=oo(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),rs(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!ve)return Ve(t),null}else 2*Te()-i.renderingStartTime>Br&&n!==1073741824&&(t.flags|=128,r=!0,rs(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(n=i.last,n!==null?n.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Te(),t.sibling=null,n=ye.current,ue(ye,r?n&1|2:n&1),t):(Ve(t),null);case 22:case 23:return Fc(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?it&1073741824&&(Ve(t),t.subtreeFlags&6&&(t.flags|=8192)):Ve(t),null;case 24:return null;case 25:return null}throw Error(D(156,t.tag))}function ey(e,t){switch(xc(t),t.tag){case 1:return nt(t.type)&&Zi(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Fr(),fe(tt),fe(Ue),Ec(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return jc(t),null;case 13:if(fe(ye),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(D(340));Or()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return fe(ye),null;case 4:return Fr(),null;case 10:return Cc(t.type._context),null;case 22:case 23:return Fc(),null;case 24:return null;default:return null}}var wi=!1,He=!1,ty=typeof WeakSet=="function"?WeakSet:Set,V=null;function br(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ce(e,t,r)}else n.current=null}function Tl(e,t,n){try{n()}catch(r){Ce(e,t,r)}}var wd=!1;function ny(e,t){if(cl=Qi,e=qm(),vc(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,u=0,h=0,d=e,m=null;t:for(;;){for(var g;d!==n||s!==0&&d.nodeType!==3||(a=o+s),d!==i||r!==0&&d.nodeType!==3||(c=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(g=d.firstChild)!==null;)m=d,d=g;for(;;){if(d===e)break t;if(m===n&&++u===s&&(a=o),m===i&&++h===r&&(c=o),(g=d.nextSibling)!==null)break;d=m,m=d.parentNode}d=g}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ul={focusedElem:e,selectionRange:n},Qi=!1,V=t;V!==null;)if(t=V,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,V=e;else for(;V!==null;){t=V;try{var x=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var b=x.memoizedProps,k=x.memoizedState,p=t.stateNode,f=p.getSnapshotBeforeUpdate(t.elementType===t.type?b:Ct(t.type,b),k);p.__reactInternalSnapshotBeforeUpdate=f}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(D(163))}}catch(w){Ce(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,V=e;break}V=t.return}return x=wd,wd=!1,x}function xs(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&Tl(t,n,i)}s=s.next}while(s!==r)}}function Do(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function jl(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function zf(e){var t=e.alternate;t!==null&&(e.alternate=null,zf(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Lt],delete t[Os],delete t[ml],delete t[Gv],delete t[Fv])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Uf(e){return e.tag===5||e.tag===3||e.tag===4}function bd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Uf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function El(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Yi));else if(r!==4&&(e=e.child,e!==null))for(El(e,t,n),e=e.sibling;e!==null;)El(e,t,n),e=e.sibling}function Nl(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Nl(e,t,n),e=e.sibling;e!==null;)Nl(e,t,n),e=e.sibling}var Ie=null,kt=!1;function nn(e,t,n){for(n=n.child;n!==null;)$f(e,t,n),n=n.sibling}function $f(e,t,n){if(Dt&&typeof Dt.onCommitFiberUnmount=="function")try{Dt.onCommitFiberUnmount(To,n)}catch{}switch(n.tag){case 5:He||br(n,t);case 6:var r=Ie,s=kt;Ie=null,nn(e,t,n),Ie=r,kt=s,Ie!==null&&(kt?(e=Ie,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Ie.removeChild(n.stateNode));break;case 18:Ie!==null&&(kt?(e=Ie,n=n.stateNode,e.nodeType===8?fa(e.parentNode,n):e.nodeType===1&&fa(e,n),Ls(e)):fa(Ie,n.stateNode));break;case 4:r=Ie,s=kt,Ie=n.stateNode.containerInfo,kt=!0,nn(e,t,n),Ie=r,kt=s;break;case 0:case 11:case 14:case 15:if(!He&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Tl(n,t,o),s=s.next}while(s!==r)}nn(e,t,n);break;case 1:if(!He&&(br(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ce(n,t,a)}nn(e,t,n);break;case 21:nn(e,t,n);break;case 22:n.mode&1?(He=(r=He)||n.memoizedState!==null,nn(e,t,n),He=r):nn(e,t,n);break;default:nn(e,t,n)}}function Sd(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new ty),t.forEach(function(r){var s=dy.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function bt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ie=a.stateNode,kt=!1;break e;case 3:Ie=a.stateNode.containerInfo,kt=!0;break e;case 4:Ie=a.stateNode.containerInfo,kt=!0;break e}a=a.return}if(Ie===null)throw Error(D(160));$f(i,o,s),Ie=null,kt=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){Ce(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)qf(t,e),t=t.sibling}function qf(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(bt(t,e),Nt(e),r&4){try{xs(3,e,e.return),Do(3,e)}catch(b){Ce(e,e.return,b)}try{xs(5,e,e.return)}catch(b){Ce(e,e.return,b)}}break;case 1:bt(t,e),Nt(e),r&512&&n!==null&&br(n,n.return);break;case 5:if(bt(t,e),Nt(e),r&512&&n!==null&&br(n,n.return),e.flags&32){var s=e.stateNode;try{Es(s,"")}catch(b){Ce(e,e.return,b)}}if(r&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=n!==null?n.memoizedProps:i,a=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&mm(s,i),Za(a,o);var u=Za(a,i);for(o=0;o<c.length;o+=2){var h=c[o],d=c[o+1];h==="style"?ym(s,d):h==="dangerouslySetInnerHTML"?gm(s,d):h==="children"?Es(s,d):sc(s,h,d,u)}switch(a){case"input":Ka(s,i);break;case"textarea":fm(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?Er(s,!!i.multiple,g,!1):m!==!!i.multiple&&(i.defaultValue!=null?Er(s,!!i.multiple,i.defaultValue,!0):Er(s,!!i.multiple,i.multiple?[]:"",!1))}s[Os]=i}catch(b){Ce(e,e.return,b)}}break;case 6:if(bt(t,e),Nt(e),r&4){if(e.stateNode===null)throw Error(D(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(b){Ce(e,e.return,b)}}break;case 3:if(bt(t,e),Nt(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ls(t.containerInfo)}catch(b){Ce(e,e.return,b)}break;case 4:bt(t,e),Nt(e);break;case 13:bt(t,e),Nt(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Oc=Te())),r&4&&Sd(e);break;case 22:if(h=n!==null&&n.memoizedState!==null,e.mode&1?(He=(u=He)||h,bt(t,e),He=u):bt(t,e),Nt(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!h&&e.mode&1)for(V=e,h=e.child;h!==null;){for(d=V=h;V!==null;){switch(m=V,g=m.child,m.tag){case 0:case 11:case 14:case 15:xs(4,m,m.return);break;case 1:br(m,m.return);var x=m.stateNode;if(typeof x.componentWillUnmount=="function"){r=m,n=m.return;try{t=r,x.props=t.memoizedProps,x.state=t.memoizedState,x.componentWillUnmount()}catch(b){Ce(r,n,b)}}break;case 5:br(m,m.return);break;case 22:if(m.memoizedState!==null){kd(d);continue}}g!==null?(g.return=m,V=g):kd(d)}h=h.sibling}e:for(h=null,d=e;;){if(d.tag===5){if(h===null){h=d;try{s=d.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=vm("display",o))}catch(b){Ce(e,e.return,b)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(b){Ce(e,e.return,b)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:bt(t,e),Nt(e),r&4&&Sd(e);break;case 21:break;default:bt(t,e),Nt(e)}}function Nt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Uf(n)){var r=n;break e}n=n.return}throw Error(D(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Es(s,""),r.flags&=-33);var i=bd(e);Nl(e,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=bd(e);El(e,a,o);break;default:throw Error(D(161))}}catch(c){Ce(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function ry(e,t,n){V=e,Wf(e)}function Wf(e,t,n){for(var r=(e.mode&1)!==0;V!==null;){var s=V,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||wi;if(!o){var a=s.alternate,c=a!==null&&a.memoizedState!==null||He;a=wi;var u=He;if(wi=o,(He=c)&&!u)for(V=s;V!==null;)o=V,c=o.child,o.tag===22&&o.memoizedState!==null?Pd(s):c!==null?(c.return=o,V=c):Pd(s);for(;i!==null;)V=i,Wf(i),i=i.sibling;V=s,wi=a,He=u}Cd(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,V=i):Cd(e)}}function Cd(e){for(;V!==null;){var t=V;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:He||Do(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!He)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:Ct(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&ad(t,i,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}ad(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&Ls(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(D(163))}He||t.flags&512&&jl(t)}catch(m){Ce(t,t.return,m)}}if(t===e){V=null;break}if(n=t.sibling,n!==null){n.return=t.return,V=n;break}V=t.return}}function kd(e){for(;V!==null;){var t=V;if(t===e){V=null;break}var n=t.sibling;if(n!==null){n.return=t.return,V=n;break}V=t.return}}function Pd(e){for(;V!==null;){var t=V;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Do(4,t)}catch(c){Ce(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(c){Ce(t,s,c)}}var i=t.return;try{jl(t)}catch(c){Ce(t,i,c)}break;case 5:var o=t.return;try{jl(t)}catch(c){Ce(t,o,c)}}}catch(c){Ce(t,t.return,c)}if(t===e){V=null;break}var a=t.sibling;if(a!==null){a.return=t.return,V=a;break}V=t.return}}var sy=Math.ceil,co=en.ReactCurrentDispatcher,Rc=en.ReactCurrentOwner,vt=en.ReactCurrentBatchConfig,ne=0,De=null,Ne=null,Oe=0,it=0,Sr=Mn(0),Me=0,zs=null,Jn=0,Ro=0,Ic=0,ws=null,Ze=null,Oc=0,Br=1/0,Gt=null,uo=!1,Al=null,xn=null,bi=!1,hn=null,ho=0,bs=0,Ml=null,Gi=-1,Fi=0;function Qe(){return ne&6?Te():Gi!==-1?Gi:Gi=Te()}function wn(e){return e.mode&1?ne&2&&Oe!==0?Oe&-Oe:Bv.transition!==null?(Fi===0&&(Fi=Am()),Fi):(e=ae,e!==0||(e=window.event,e=e===void 0?16:Om(e.type)),e):1}function jt(e,t,n,r){if(50<bs)throw bs=0,Ml=null,Error(D(185));Qs(e,n,r),(!(ne&2)||e!==De)&&(e===De&&(!(ne&2)&&(Ro|=n),Me===4&&un(e,Oe)),rt(e,r),n===1&&ne===0&&!(t.mode&1)&&(Br=Te()+500,Mo&&Ln()))}function rt(e,t){var n=e.callbackNode;Bg(e,t);var r=Ki(e,e===De?Oe:0);if(r===0)n!==null&&Du(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Du(n),t===1)e.tag===0?Vv(Td.bind(null,e)):nf(Td.bind(null,e)),Iv(function(){!(ne&6)&&Ln()}),n=null;else{switch(Mm(r)){case 1:n=cc;break;case 4:n=Em;break;case 16:n=Wi;break;case 536870912:n=Nm;break;default:n=Wi}n=tp(n,Kf.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Kf(e,t){if(Gi=-1,Fi=0,ne&6)throw Error(D(327));var n=e.callbackNode;if(_r()&&e.callbackNode!==n)return null;var r=Ki(e,e===De?Oe:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=mo(e,r);else{t=r;var s=ne;ne|=2;var i=Xf();(De!==e||Oe!==t)&&(Gt=null,Br=Te()+500,qn(e,t));do try{ay();break}catch(a){Qf(e,a)}while(1);Sc(),co.current=i,ne=s,Ne!==null?t=0:(De=null,Oe=0,t=Me)}if(t!==0){if(t===2&&(s=sl(e),s!==0&&(r=s,t=Ll(e,s))),t===1)throw n=zs,qn(e,0),un(e,r),rt(e,Te()),n;if(t===6)un(e,r);else{if(s=e.current.alternate,!(r&30)&&!iy(s)&&(t=mo(e,r),t===2&&(i=sl(e),i!==0&&(r=i,t=Ll(e,i))),t===1))throw n=zs,qn(e,0),un(e,r),rt(e,Te()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(D(345));case 2:Gn(e,Ze,Gt);break;case 3:if(un(e,r),(r&130023424)===r&&(t=Oc+500-Te(),10<t)){if(Ki(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){Qe(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=hl(Gn.bind(null,e,Ze,Gt),t);break}Gn(e,Ze,Gt);break;case 4:if(un(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var o=31-Tt(r);i=1<<o,o=t[o],o>s&&(s=o),r&=~i}if(r=s,r=Te()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*sy(r/1960))-r,10<r){e.timeoutHandle=hl(Gn.bind(null,e,Ze,Gt),r);break}Gn(e,Ze,Gt);break;case 5:Gn(e,Ze,Gt);break;default:throw Error(D(329))}}}return rt(e,Te()),e.callbackNode===n?Kf.bind(null,e):null}function Ll(e,t){var n=ws;return e.current.memoizedState.isDehydrated&&(qn(e,t).flags|=256),e=mo(e,t),e!==2&&(t=Ze,Ze=n,t!==null&&_l(t)),e}function _l(e){Ze===null?Ze=e:Ze.push.apply(Ze,e)}function iy(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Et(i(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function un(e,t){for(t&=~Ic,t&=~Ro,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Tt(t),r=1<<n;e[n]=-1,t&=~r}}function Td(e){if(ne&6)throw Error(D(327));_r();var t=Ki(e,0);if(!(t&1))return rt(e,Te()),null;var n=mo(e,t);if(e.tag!==0&&n===2){var r=sl(e);r!==0&&(t=r,n=Ll(e,r))}if(n===1)throw n=zs,qn(e,0),un(e,t),rt(e,Te()),n;if(n===6)throw Error(D(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Gn(e,Ze,Gt),rt(e,Te()),null}function Gc(e,t){var n=ne;ne|=1;try{return e(t)}finally{ne=n,ne===0&&(Br=Te()+500,Mo&&Ln())}}function Yn(e){hn!==null&&hn.tag===0&&!(ne&6)&&_r();var t=ne;ne|=1;var n=vt.transition,r=ae;try{if(vt.transition=null,ae=1,e)return e()}finally{ae=r,vt.transition=n,ne=t,!(ne&6)&&Ln()}}function Fc(){it=Sr.current,fe(Sr)}function qn(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Rv(n)),Ne!==null)for(n=Ne.return;n!==null;){var r=n;switch(xc(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Zi();break;case 3:Fr(),fe(tt),fe(Ue),Ec();break;case 5:jc(r);break;case 4:Fr();break;case 13:fe(ye);break;case 19:fe(ye);break;case 10:Cc(r.type._context);break;case 22:case 23:Fc()}n=n.return}if(De=e,Ne=e=bn(e.current,null),Oe=it=t,Me=0,zs=null,Ic=Ro=Jn=0,Ze=ws=null,zn!==null){for(t=0;t<zn.length;t++)if(n=zn[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}zn=null}return e}function Qf(e,t){do{var n=Ne;try{if(Sc(),Ri.current=lo,ao){for(var r=we.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}ao=!1}if(Xn=0,_e=Ae=we=null,ys=!1,Vs=0,Rc.current=null,n===null||n.return===null){Me=1,zs=t,Ne=null;break}e:{var i=e,o=n.return,a=n,c=t;if(t=Oe,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var g=md(o);if(g!==null){g.flags&=-257,fd(g,o,a,i,t),g.mode&1&&hd(i,u,t),t=g,c=u;var x=t.updateQueue;if(x===null){var b=new Set;b.add(c),t.updateQueue=b}else x.add(c);break e}else{if(!(t&1)){hd(i,u,t),Vc();break e}c=Error(D(426))}}else if(ve&&a.mode&1){var k=md(o);if(k!==null){!(k.flags&65536)&&(k.flags|=256),fd(k,o,a,i,t),wc(Vr(c,a));break e}}i=c=Vr(c,a),Me!==4&&(Me=2),ws===null?ws=[i]:ws.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var p=Lf(i,c,t);od(i,p);break e;case 1:a=c;var f=i.type,y=i.stateNode;if(!(i.flags&128)&&(typeof f.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(xn===null||!xn.has(y)))){i.flags|=65536,t&=-t,i.lanes|=t;var w=_f(i,a,t);od(i,w);break e}}i=i.return}while(i!==null)}Yf(n)}catch(S){t=S,Ne===n&&n!==null&&(Ne=n=n.return);continue}break}while(1)}function Xf(){var e=co.current;return co.current=lo,e===null?lo:e}function Vc(){(Me===0||Me===3||Me===2)&&(Me=4),De===null||!(Jn&268435455)&&!(Ro&268435455)||un(De,Oe)}function mo(e,t){var n=ne;ne|=2;var r=Xf();(De!==e||Oe!==t)&&(Gt=null,qn(e,t));do try{oy();break}catch(s){Qf(e,s)}while(1);if(Sc(),ne=n,co.current=r,Ne!==null)throw Error(D(261));return De=null,Oe=0,Me}function oy(){for(;Ne!==null;)Jf(Ne)}function ay(){for(;Ne!==null&&!Lg();)Jf(Ne)}function Jf(e){var t=ep(e.alternate,e,it);e.memoizedProps=e.pendingProps,t===null?Yf(e):Ne=t,Rc.current=null}function Yf(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=ey(n,t),n!==null){n.flags&=32767,Ne=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Me=6,Ne=null;return}}else if(n=Zv(n,t,it),n!==null){Ne=n;return}if(t=t.sibling,t!==null){Ne=t;return}Ne=t=e}while(t!==null);Me===0&&(Me=5)}function Gn(e,t,n){var r=ae,s=vt.transition;try{vt.transition=null,ae=1,ly(e,t,n,r)}finally{vt.transition=s,ae=r}return null}function ly(e,t,n,r){do _r();while(hn!==null);if(ne&6)throw Error(D(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(D(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(Hg(e,i),e===De&&(Ne=De=null,Oe=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||bi||(bi=!0,tp(Wi,function(){return _r(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=vt.transition,vt.transition=null;var o=ae;ae=1;var a=ne;ne|=4,Rc.current=null,ny(e,n),qf(n,e),Ev(ul),Qi=!!cl,ul=cl=null,e.current=n,ry(n),_g(),ne=a,ae=o,vt.transition=i}else e.current=n;if(bi&&(bi=!1,hn=e,ho=s),i=e.pendingLanes,i===0&&(xn=null),Ig(n.stateNode),rt(e,Te()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(uo)throw uo=!1,e=Al,Al=null,e;return ho&1&&e.tag!==0&&_r(),i=e.pendingLanes,i&1?e===Ml?bs++:(bs=0,Ml=e):bs=0,Ln(),null}function _r(){if(hn!==null){var e=Mm(ho),t=vt.transition,n=ae;try{if(vt.transition=null,ae=16>e?16:e,hn===null)var r=!1;else{if(e=hn,hn=null,ho=0,ne&6)throw Error(D(331));var s=ne;for(ne|=4,V=e.current;V!==null;){var i=V,o=i.child;if(V.flags&16){var a=i.deletions;if(a!==null){for(var c=0;c<a.length;c++){var u=a[c];for(V=u;V!==null;){var h=V;switch(h.tag){case 0:case 11:case 15:xs(8,h,i)}var d=h.child;if(d!==null)d.return=h,V=d;else for(;V!==null;){h=V;var m=h.sibling,g=h.return;if(zf(h),h===u){V=null;break}if(m!==null){m.return=g,V=m;break}V=g}}}var x=i.alternate;if(x!==null){var b=x.child;if(b!==null){x.child=null;do{var k=b.sibling;b.sibling=null,b=k}while(b!==null)}}V=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,V=o;else e:for(;V!==null;){if(i=V,i.flags&2048)switch(i.tag){case 0:case 11:case 15:xs(9,i,i.return)}var p=i.sibling;if(p!==null){p.return=i.return,V=p;break e}V=i.return}}var f=e.current;for(V=f;V!==null;){o=V;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,V=y;else e:for(o=f;V!==null;){if(a=V,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Do(9,a)}}catch(S){Ce(a,a.return,S)}if(a===o){V=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,V=w;break e}V=a.return}}if(ne=s,Ln(),Dt&&typeof Dt.onPostCommitFiberRoot=="function")try{Dt.onPostCommitFiberRoot(To,e)}catch{}r=!0}return r}finally{ae=n,vt.transition=t}}return!1}function jd(e,t,n){t=Vr(n,t),t=Lf(e,t,1),e=yn(e,t,1),t=Qe(),e!==null&&(Qs(e,1,t),rt(e,t))}function Ce(e,t,n){if(e.tag===3)jd(e,e,n);else for(;t!==null;){if(t.tag===3){jd(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(xn===null||!xn.has(r))){e=Vr(n,e),e=_f(t,e,1),t=yn(t,e,1),e=Qe(),t!==null&&(Qs(t,1,e),rt(t,e));break}}t=t.return}}function cy(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Qe(),e.pingedLanes|=e.suspendedLanes&n,De===e&&(Oe&n)===n&&(Me===4||Me===3&&(Oe&130023424)===Oe&&500>Te()-Oc?qn(e,0):Ic|=n),rt(e,t)}function Zf(e,t){t===0&&(e.mode&1?(t=di,di<<=1,!(di&130023424)&&(di=4194304)):t=1);var n=Qe();e=Jt(e,t),e!==null&&(Qs(e,t,n),rt(e,n))}function uy(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Zf(e,n)}function dy(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(D(314))}r!==null&&r.delete(t),Zf(e,n)}var ep;ep=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||tt.current)et=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return et=!1,Yv(e,t,n);et=!!(e.flags&131072)}else et=!1,ve&&t.flags&1048576&&rf(t,no,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Oi(e,t),e=t.pendingProps;var s=Ir(t,Ue.current);Lr(t,n),s=Ac(null,t,r,e,s,n);var i=Mc();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,nt(r)?(i=!0,eo(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Pc(t),s.updater=_o,t.stateNode=s,s._reactInternals=t,xl(t,r,e,n),t=Sl(null,t,r,!0,i,n)):(t.tag=0,ve&&i&&yc(t),Ke(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Oi(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=my(r),e=Ct(r,e),s){case 0:t=bl(null,t,r,e,n);break e;case 1:t=vd(null,t,r,e,n);break e;case 11:t=pd(null,t,r,e,n);break e;case 14:t=gd(null,t,r,Ct(r.type,e),n);break e}throw Error(D(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Ct(r,s),bl(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Ct(r,s),vd(e,t,r,s,n);case 3:e:{if(Of(t),e===null)throw Error(D(387));r=t.pendingProps,i=t.memoizedState,s=i.element,uf(e,t),io(t,r,null,n);var o=t.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=Vr(Error(D(423)),t),t=yd(e,t,r,n,s);break e}else if(r!==s){s=Vr(Error(D(424)),t),t=yd(e,t,r,n,s);break e}else for(ot=vn(t.stateNode.containerInfo.firstChild),at=t,ve=!0,Pt=null,n=lf(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Or(),r===s){t=Yt(e,t,n);break e}Ke(e,t,r,n)}t=t.child}return t;case 5:return df(t),e===null&&gl(t),r=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,dl(r,s)?o=null:i!==null&&dl(r,i)&&(t.flags|=32),If(e,t),Ke(e,t,o,n),t.child;case 6:return e===null&&gl(t),null;case 13:return Gf(e,t,n);case 4:return Tc(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Gr(t,null,r,n):Ke(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Ct(r,s),pd(e,t,r,s,n);case 7:return Ke(e,t,t.pendingProps,n),t.child;case 8:return Ke(e,t,t.pendingProps.children,n),t.child;case 12:return Ke(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,ue(ro,r._currentValue),r._currentValue=o,i!==null)if(Et(i.value,o)){if(i.children===s.children&&!tt.current){t=Yt(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=qt(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),vl(i.return,n,t),a.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(D(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),vl(o,n,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Ke(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Lr(t,n),s=yt(s),r=r(s),t.flags|=1,Ke(e,t,r,n),t.child;case 14:return r=t.type,s=Ct(r,t.pendingProps),s=Ct(r.type,s),gd(e,t,r,s,n);case 15:return Df(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Ct(r,s),Oi(e,t),t.tag=1,nt(r)?(e=!0,eo(t)):e=!1,Lr(t,n),Mf(t,r,s),xl(t,r,s,n),Sl(null,t,r,!0,e,n);case 19:return Ff(e,t,n);case 22:return Rf(e,t,n)}throw Error(D(156,t.tag))};function tp(e,t){return jm(e,t)}function hy(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gt(e,t,n,r){return new hy(e,t,n,r)}function Bc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function my(e){if(typeof e=="function")return Bc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===oc)return 11;if(e===ac)return 14}return 2}function bn(e,t){var n=e.alternate;return n===null?(n=gt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Vi(e,t,n,r,s,i){var o=2;if(r=e,typeof e=="function")Bc(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case hr:return Wn(n.children,s,i,t);case ic:o=8,s|=8;break;case za:return e=gt(12,n,t,s|2),e.elementType=za,e.lanes=i,e;case Ua:return e=gt(13,n,t,s),e.elementType=Ua,e.lanes=i,e;case $a:return e=gt(19,n,t,s),e.elementType=$a,e.lanes=i,e;case um:return Io(n,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case lm:o=10;break e;case cm:o=9;break e;case oc:o=11;break e;case ac:o=14;break e;case on:o=16,r=null;break e}throw Error(D(130,e==null?e:typeof e,""))}return t=gt(o,n,t,s),t.elementType=e,t.type=r,t.lanes=i,t}function Wn(e,t,n,r){return e=gt(7,e,r,t),e.lanes=n,e}function Io(e,t,n,r){return e=gt(22,e,r,t),e.elementType=um,e.lanes=n,e.stateNode={isHidden:!1},e}function Sa(e,t,n){return e=gt(6,e,null,t),e.lanes=n,e}function Ca(e,t,n){return t=gt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function fy(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ra(0),this.expirationTimes=ra(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ra(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Hc(e,t,n,r,s,i,o,a,c){return e=new fy(e,t,n,a,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=gt(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Pc(i),e}function py(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:dr,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function np(e){if(!e)return Pn;e=e._reactInternals;e:{if(or(e)!==e||e.tag!==1)throw Error(D(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(nt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(D(171))}if(e.tag===1){var n=e.type;if(nt(n))return tf(e,n,t)}return t}function rp(e,t,n,r,s,i,o,a,c){return e=Hc(n,r,!0,e,s,i,o,a,c),e.context=np(null),n=e.current,r=Qe(),s=wn(n),i=qt(r,s),i.callback=t??null,yn(n,i,s),e.current.lanes=s,Qs(e,s,r),rt(e,r),e}function Oo(e,t,n,r){var s=t.current,i=Qe(),o=wn(s);return n=np(n),t.context===null?t.context=n:t.pendingContext=n,t=qt(i,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=yn(s,t,o),e!==null&&(jt(e,s,o,i),Di(e,s,o)),o}function fo(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Ed(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function zc(e,t){Ed(e,t),(e=e.alternate)&&Ed(e,t)}function gy(){return null}var sp=typeof reportError=="function"?reportError:function(e){console.error(e)};function Uc(e){this._internalRoot=e}Go.prototype.render=Uc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(D(409));Oo(e,t,null,null)};Go.prototype.unmount=Uc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Yn(function(){Oo(null,e,null,null)}),t[Xt]=null}};function Go(e){this._internalRoot=e}Go.prototype.unstable_scheduleHydration=function(e){if(e){var t=Dm();e={blockedOn:null,target:e,priority:t};for(var n=0;n<cn.length&&t!==0&&t<cn[n].priority;n++);cn.splice(n,0,e),n===0&&Im(e)}};function $c(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Fo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Nd(){}function vy(e,t,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=fo(o);i.call(u)}}var o=rp(t,r,e,0,null,!1,!1,"",Nd);return e._reactRootContainer=o,e[Xt]=o.current,Rs(e.nodeType===8?e.parentNode:e),Yn(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var u=fo(c);a.call(u)}}var c=Hc(e,0,!1,null,null,!1,!1,"",Nd);return e._reactRootContainer=c,e[Xt]=c.current,Rs(e.nodeType===8?e.parentNode:e),Yn(function(){Oo(t,c,n,r)}),c}function Vo(e,t,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var c=fo(o);a.call(c)}}Oo(t,o,e,s)}else o=vy(n,t,e,s,r);return fo(o)}Lm=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=us(t.pendingLanes);n!==0&&(uc(t,n|1),rt(t,Te()),!(ne&6)&&(Br=Te()+500,Ln()))}break;case 13:Yn(function(){var r=Jt(e,1);if(r!==null){var s=Qe();jt(r,e,1,s)}}),zc(e,1)}};dc=function(e){if(e.tag===13){var t=Jt(e,134217728);if(t!==null){var n=Qe();jt(t,e,134217728,n)}zc(e,134217728)}};_m=function(e){if(e.tag===13){var t=wn(e),n=Jt(e,t);if(n!==null){var r=Qe();jt(n,e,t,r)}zc(e,t)}};Dm=function(){return ae};Rm=function(e,t){var n=ae;try{return ae=e,t()}finally{ae=n}};tl=function(e,t,n){switch(t){case"input":if(Ka(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=Ao(r);if(!s)throw Error(D(90));hm(r),Ka(r,s)}}}break;case"textarea":fm(e,n);break;case"select":t=n.value,t!=null&&Er(e,!!n.multiple,t,!1)}};bm=Gc;Sm=Yn;var yy={usingClientEntryPoint:!1,Events:[Js,gr,Ao,xm,wm,Gc]},ss={findFiberByHostInstance:Hn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},xy={bundleType:ss.bundleType,version:ss.version,rendererPackageName:ss.rendererPackageName,rendererConfig:ss.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:en.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Pm(e),e===null?null:e.stateNode},findFiberByHostInstance:ss.findFiberByHostInstance||gy,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Si=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Si.isDisabled&&Si.supportsFiber)try{To=Si.inject(xy),Dt=Si}catch{}}ut.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yy;ut.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$c(t))throw Error(D(200));return py(e,t,null,n)};ut.createRoot=function(e,t){if(!$c(e))throw Error(D(299));var n=!1,r="",s=sp;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Hc(e,1,!1,null,null,n,!1,r,s),e[Xt]=t.current,Rs(e.nodeType===8?e.parentNode:e),new Uc(t)};ut.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(D(188)):(e=Object.keys(e).join(","),Error(D(268,e)));return e=Pm(t),e=e===null?null:e.stateNode,e};ut.flushSync=function(e){return Yn(e)};ut.hydrate=function(e,t,n){if(!Fo(t))throw Error(D(200));return Vo(null,e,t,!0,n)};ut.hydrateRoot=function(e,t,n){if(!$c(e))throw Error(D(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=sp;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=rp(t,null,e,1,n??null,s,!1,i,o),e[Xt]=t.current,Rs(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Go(t)};ut.render=function(e,t,n){if(!Fo(t))throw Error(D(200));return Vo(null,e,t,!1,n)};ut.unmountComponentAtNode=function(e){if(!Fo(e))throw Error(D(40));return e._reactRootContainer?(Yn(function(){Vo(null,null,e,!1,function(){e._reactRootContainer=null,e[Xt]=null})}),!0):!1};ut.unstable_batchedUpdates=Gc;ut.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Fo(n))throw Error(D(200));if(e==null||e._reactInternals===void 0)throw Error(D(38));return Vo(e,t,n,!1,r)};ut.version="18.3.1-next-f1338f8080-20240426";function ip(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ip)}catch(e){console.error(e)}}ip(),sm.exports=ut;var wy=sm.exports,Ad=wy;Ba.createRoot=Ad.createRoot,Ba.hydrateRoot=Ad.hydrateRoot;const by="modulepreload",Sy=function(e){return"/cat-tetris/"+e},Md={},qc=function(t,n,r){if(!n||n.length===0)return t();const s=document.getElementsByTagName("link");return Promise.all(n.map(i=>{if(i=Sy(i),i in Md)return;Md[i]=!0;const o=i.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!r)for(let h=s.length-1;h>=0;h--){const d=s[h];if(d.href===i&&(!o||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${a}`))return;const u=document.createElement("link");if(u.rel=o?"stylesheet":by,o||(u.as="script",u.crossOrigin=""),u.href=i,document.head.appendChild(u),o)return new Promise((h,d)=>{u.addEventListener("load",h),u.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>t()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})},op=v.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),Bo=v.createContext({}),Ho=v.createContext(null),zo=typeof document<"u",Wc=zo?v.useLayoutEffect:v.useEffect,ap=v.createContext({strict:!1}),Kc=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),Cy="framerAppearId",lp="data-"+Kc(Cy);function ky(e,t,n,r){const{visualElement:s}=v.useContext(Bo),i=v.useContext(ap),o=v.useContext(Ho),a=v.useContext(op).reducedMotion,c=v.useRef();r=r||i.renderer,!c.current&&r&&(c.current=r(e,{visualState:t,parent:s,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:a}));const u=c.current;v.useInsertionEffect(()=>{u&&u.update(n,o)});const h=v.useRef(!!(n[lp]&&!window.HandoffComplete));return Wc(()=>{u&&(u.render(),h.current&&u.animationState&&u.animationState.animateChanges())}),v.useEffect(()=>{u&&(u.updateFeatures(),!h.current&&u.animationState&&u.animationState.animateChanges(),h.current&&(h.current=!1,window.HandoffComplete=!0))}),u}function Cr(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function Py(e,t,n){return v.useCallback(r=>{r&&e.mount&&e.mount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):Cr(n)&&(n.current=r))},[t])}function Us(e){return typeof e=="string"||Array.isArray(e)}function Uo(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const Qc=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Xc=["initial",...Qc];function $o(e){return Uo(e.animate)||Xc.some(t=>Us(e[t]))}function cp(e){return!!($o(e)||e.variants)}function Ty(e,t){if($o(e)){const{initial:n,animate:r}=e;return{initial:n===!1||Us(n)?n:void 0,animate:Us(r)?r:void 0}}return e.inherit!==!1?t:{}}function jy(e){const{initial:t,animate:n}=Ty(e,v.useContext(Bo));return v.useMemo(()=>({initial:t,animate:n}),[Ld(t),Ld(n)])}function Ld(e){return Array.isArray(e)?e.join(" "):e}const _d={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},$s={};for(const e in _d)$s[e]={isEnabled:t=>_d[e].some(n=>!!t[n])};function Ey(e){for(const t in e)$s[t]={...$s[t],...e[t]}}const Jc=v.createContext({}),up=v.createContext({}),Ny=Symbol.for("motionComponentSymbol");function Ay({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:r,Component:s}){e&&Ey(e);function i(a,c){let u;const h={...v.useContext(op),...a,layoutId:My(a)},{isStatic:d}=h,m=jy(a),g=r(a,d);if(!d&&zo){m.visualElement=ky(s,g,h,t);const x=v.useContext(up),b=v.useContext(ap).strict;m.visualElement&&(u=m.visualElement.loadFeatures(h,b,e,x))}return v.createElement(Bo.Provider,{value:m},u&&m.visualElement?v.createElement(u,{visualElement:m.visualElement,...h}):null,n(s,a,Py(g,m.visualElement,c),g,d,m.visualElement))}const o=v.forwardRef(i);return o[Ny]=s,o}function My({layoutId:e}){const t=v.useContext(Jc).id;return t&&e!==void 0?t+"-"+e:e}function Ly(e){function t(r,s={}){return Ay(e(r,s))}if(typeof Proxy>"u")return t;const n=new Map;return new Proxy(t,{get:(r,s)=>(n.has(s)||n.set(s,t(s)),n.get(s))})}const _y=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Yc(e){return typeof e!="string"||e.includes("-")?!1:!!(_y.indexOf(e)>-1||/[A-Z]/.test(e))}const po={};function Dy(e){Object.assign(po,e)}const Zs=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ar=new Set(Zs);function dp(e,{layout:t,layoutId:n}){return ar.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!po[e]||e==="opacity")}const st=e=>!!(e&&e.getVelocity),Ry={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Iy=Zs.length;function Oy(e,{enableHardwareAcceleration:t=!0,allowTransformNone:n=!0},r,s){let i="";for(let o=0;o<Iy;o++){const a=Zs[o];if(e[a]!==void 0){const c=Ry[a]||a;i+=`${c}(${e[a]}) `}}return t&&!e.z&&(i+="translateZ(0)"),i=i.trim(),s?i=s(e,r?"":i):n&&r&&(i="none"),i}const hp=e=>t=>typeof t=="string"&&t.startsWith(e),mp=hp("--"),Dl=hp("var(--"),Gy=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,Fy=(e,t)=>t&&typeof e=="number"?t.transform(e):e,Tn=(e,t,n)=>Math.min(Math.max(n,e),t),lr={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Ss={...lr,transform:e=>Tn(0,1,e)},Ci={...lr,default:1},Cs=e=>Math.round(e*1e5)/1e5,qo=/(-)?([\d]*\.?[\d])+/g,fp=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,Vy=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function ei(e){return typeof e=="string"}const ti=e=>({test:t=>ei(t)&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),rn=ti("deg"),It=ti("%"),X=ti("px"),By=ti("vh"),Hy=ti("vw"),Dd={...It,parse:e=>It.parse(e)/100,transform:e=>It.transform(e*100)},Rd={...lr,transform:Math.round},pp={borderWidth:X,borderTopWidth:X,borderRightWidth:X,borderBottomWidth:X,borderLeftWidth:X,borderRadius:X,radius:X,borderTopLeftRadius:X,borderTopRightRadius:X,borderBottomRightRadius:X,borderBottomLeftRadius:X,width:X,maxWidth:X,height:X,maxHeight:X,size:X,top:X,right:X,bottom:X,left:X,padding:X,paddingTop:X,paddingRight:X,paddingBottom:X,paddingLeft:X,margin:X,marginTop:X,marginRight:X,marginBottom:X,marginLeft:X,rotate:rn,rotateX:rn,rotateY:rn,rotateZ:rn,scale:Ci,scaleX:Ci,scaleY:Ci,scaleZ:Ci,skew:rn,skewX:rn,skewY:rn,distance:X,translateX:X,translateY:X,translateZ:X,x:X,y:X,z:X,perspective:X,transformPerspective:X,opacity:Ss,originX:Dd,originY:Dd,originZ:X,zIndex:Rd,fillOpacity:Ss,strokeOpacity:Ss,numOctaves:Rd};function Zc(e,t,n,r){const{style:s,vars:i,transform:o,transformOrigin:a}=e;let c=!1,u=!1,h=!0;for(const d in t){const m=t[d];if(mp(d)){i[d]=m;continue}const g=pp[d],x=Fy(m,g);if(ar.has(d)){if(c=!0,o[d]=x,!h)continue;m!==(g.default||0)&&(h=!1)}else d.startsWith("origin")?(u=!0,a[d]=x):s[d]=x}if(t.transform||(c||r?s.transform=Oy(e.transform,n,h,r):s.transform&&(s.transform="none")),u){const{originX:d="50%",originY:m="50%",originZ:g=0}=a;s.transformOrigin=`${d} ${m} ${g}`}}const eu=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function gp(e,t,n){for(const r in t)!st(t[r])&&!dp(r,n)&&(e[r]=t[r])}function zy({transformTemplate:e},t,n){return v.useMemo(()=>{const r=eu();return Zc(r,t,{enableHardwareAcceleration:!n},e),Object.assign({},r.vars,r.style)},[t])}function Uy(e,t,n){const r=e.style||{},s={};return gp(s,r,e),Object.assign(s,zy(e,t,n)),e.transformValues?e.transformValues(s):s}function $y(e,t,n){const r={},s=Uy(e,t,n);return e.drag&&e.dragListener!==!1&&(r.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=s,r}const qy=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function go(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||qy.has(e)}let vp=e=>!go(e);function Wy(e){e&&(vp=t=>t.startsWith("on")?!go(t):e(t))}try{Wy(require("@emotion/is-prop-valid").default)}catch{}function Ky(e,t,n){const r={};for(const s in e)s==="values"&&typeof e.values=="object"||(vp(s)||n===!0&&go(s)||!t&&!go(s)||e.draggable&&s.startsWith("onDrag"))&&(r[s]=e[s]);return r}function Id(e,t,n){return typeof e=="string"?e:X.transform(t+n*e)}function Qy(e,t,n){const r=Id(t,e.x,e.width),s=Id(n,e.y,e.height);return`${r} ${s}`}const Xy={offset:"stroke-dashoffset",array:"stroke-dasharray"},Jy={offset:"strokeDashoffset",array:"strokeDasharray"};function Yy(e,t,n=1,r=0,s=!0){e.pathLength=1;const i=s?Xy:Jy;e[i.offset]=X.transform(-r);const o=X.transform(t),a=X.transform(n);e[i.array]=`${o} ${a}`}function tu(e,{attrX:t,attrY:n,attrScale:r,originX:s,originY:i,pathLength:o,pathSpacing:a=1,pathOffset:c=0,...u},h,d,m){if(Zc(e,u,h,m),d){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:g,style:x,dimensions:b}=e;g.transform&&(b&&(x.transform=g.transform),delete g.transform),b&&(s!==void 0||i!==void 0||x.transform)&&(x.transformOrigin=Qy(b,s!==void 0?s:.5,i!==void 0?i:.5)),t!==void 0&&(g.x=t),n!==void 0&&(g.y=n),r!==void 0&&(g.scale=r),o!==void 0&&Yy(g,o,a,c,!1)}const yp=()=>({...eu(),attrs:{}}),nu=e=>typeof e=="string"&&e.toLowerCase()==="svg";function Zy(e,t,n,r){const s=v.useMemo(()=>{const i=yp();return tu(i,t,{enableHardwareAcceleration:!1},nu(r),e.transformTemplate),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};gp(i,e.style,e),s.style={...i,...s.style}}return s}function ex(e=!1){return(n,r,s,{latestValues:i},o)=>{const c=(Yc(n)?Zy:$y)(r,i,o,n),h={...Ky(r,typeof n=="string",e),...c,ref:s},{children:d}=r,m=v.useMemo(()=>st(d)?d.get():d,[d]);return v.createElement(n,{...h,children:m})}}function xp(e,{style:t,vars:n},r,s){Object.assign(e.style,t,s&&s.getProjectionStyles(r));for(const i in n)e.style.setProperty(i,n[i])}const wp=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function bp(e,t,n,r){xp(e,t,void 0,r);for(const s in t.attrs)e.setAttribute(wp.has(s)?s:Kc(s),t.attrs[s])}function ru(e,t){const{style:n}=e,r={};for(const s in n)(st(n[s])||t.style&&st(t.style[s])||dp(s,e))&&(r[s]=n[s]);return r}function Sp(e,t){const n=ru(e,t);for(const r in e)if(st(e[r])||st(t[r])){const s=Zs.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[s]=e[r]}return n}function su(e,t,n,r={},s={}){return typeof t=="function"&&(t=t(n!==void 0?n:e.custom,r,s)),typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"&&(t=t(n!==void 0?n:e.custom,r,s)),t}function Cp(e){const t=v.useRef(null);return t.current===null&&(t.current=e()),t.current}const vo=e=>Array.isArray(e),tx=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),nx=e=>vo(e)?e[e.length-1]||0:e;function Bi(e){const t=st(e)?e.get():e;return tx(t)?t.toValue():t}function rx({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:n},r,s,i){const o={latestValues:sx(r,s,i,e),renderState:t()};return n&&(o.mount=a=>n(r,a,o)),o}const kp=e=>(t,n)=>{const r=v.useContext(Bo),s=v.useContext(Ho),i=()=>rx(e,t,r,s);return n?i():Cp(i)};function sx(e,t,n,r){const s={},i=r(e,{});for(const m in i)s[m]=Bi(i[m]);let{initial:o,animate:a}=e;const c=$o(e),u=cp(e);t&&u&&!c&&e.inherit!==!1&&(o===void 0&&(o=t.initial),a===void 0&&(a=t.animate));let h=n?n.initial===!1:!1;h=h||o===!1;const d=h?a:o;return d&&typeof d!="boolean"&&!Uo(d)&&(Array.isArray(d)?d:[d]).forEach(g=>{const x=su(e,g);if(!x)return;const{transitionEnd:b,transition:k,...p}=x;for(const f in p){let y=p[f];if(Array.isArray(y)){const w=h?y.length-1:0;y=y[w]}y!==null&&(s[f]=y)}for(const f in b)s[f]=b[f]}),s}const ke=e=>e;class Od{constructor(){this.order=[],this.scheduled=new Set}add(t){if(!this.scheduled.has(t))return this.scheduled.add(t),this.order.push(t),!0}remove(t){const n=this.order.indexOf(t);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(t))}clear(){this.order.length=0,this.scheduled.clear()}}function ix(e){let t=new Od,n=new Od,r=0,s=!1,i=!1;const o=new WeakSet,a={schedule:(c,u=!1,h=!1)=>{const d=h&&s,m=d?t:n;return u&&o.add(c),m.add(c)&&d&&s&&(r=t.order.length),c},cancel:c=>{n.remove(c),o.delete(c)},process:c=>{if(s){i=!0;return}if(s=!0,[t,n]=[n,t],n.clear(),r=t.order.length,r)for(let u=0;u<r;u++){const h=t.order[u];h(c),o.has(h)&&(a.schedule(h),e())}s=!1,i&&(i=!1,a.process(c))}};return a}const ki=["prepare","read","update","preRender","render","postRender"],ox=40;function ax(e,t){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=ki.reduce((d,m)=>(d[m]=ix(()=>n=!0),d),{}),o=d=>i[d].process(s),a=()=>{const d=performance.now();n=!1,s.delta=r?1e3/60:Math.max(Math.min(d-s.timestamp,ox),1),s.timestamp=d,s.isProcessing=!0,ki.forEach(o),s.isProcessing=!1,n&&t&&(r=!1,e(a))},c=()=>{n=!0,r=!0,s.isProcessing||e(a)};return{schedule:ki.reduce((d,m)=>{const g=i[m];return d[m]=(x,b=!1,k=!1)=>(n||c(),g.schedule(x,b,k)),d},{}),cancel:d=>ki.forEach(m=>i[m].cancel(d)),state:s,steps:i}}const{schedule:de,cancel:Zt,state:Be,steps:ka}=ax(typeof requestAnimationFrame<"u"?requestAnimationFrame:ke,!0),lx={useVisualState:kp({scrapeMotionValuesFromProps:Sp,createRenderState:yp,onMount:(e,t,{renderState:n,latestValues:r})=>{de.read(()=>{try{n.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),de.render(()=>{tu(n,r,{enableHardwareAcceleration:!1},nu(t.tagName),e.transformTemplate),bp(t,n)})}})},cx={useVisualState:kp({scrapeMotionValuesFromProps:ru,createRenderState:eu})};function ux(e,{forwardMotionProps:t=!1},n,r){return{...Yc(e)?lx:cx,preloadedFeatures:n,useRender:ex(t),createVisualElement:r,Component:e}}function Ut(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}const Pp=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function Wo(e,t="page"){return{point:{x:e[t+"X"],y:e[t+"Y"]}}}const dx=e=>t=>Pp(t)&&e(t,Wo(t));function Wt(e,t,n,r){return Ut(e,t,dx(n),r)}const hx=(e,t)=>n=>t(e(n)),Sn=(...e)=>e.reduce(hx);function Tp(e){let t=null;return()=>{const n=()=>{t=null};return t===null?(t=e,n):!1}}const Gd=Tp("dragHorizontal"),Fd=Tp("dragVertical");function jp(e){let t=!1;if(e==="y")t=Fd();else if(e==="x")t=Gd();else{const n=Gd(),r=Fd();n&&r?t=()=>{n(),r()}:(n&&n(),r&&r())}return t}function Ep(){const e=jp(!0);return e?(e(),!1):!0}class _n{constructor(t){this.isMounted=!1,this.node=t}update(){}}function Vd(e,t){const n="pointer"+(t?"enter":"leave"),r="onHover"+(t?"Start":"End"),s=(i,o)=>{if(i.pointerType==="touch"||Ep())return;const a=e.getProps();e.animationState&&a.whileHover&&e.animationState.setActive("whileHover",t),a[r]&&de.update(()=>a[r](i,o))};return Wt(e.current,n,s,{passive:!e.getProps()[r]})}class mx extends _n{mount(){this.unmount=Sn(Vd(this.node,!0),Vd(this.node,!1))}unmount(){}}class fx extends _n{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Sn(Ut(this.node.current,"focus",()=>this.onFocus()),Ut(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const Np=(e,t)=>t?e===t?!0:Np(e,t.parentElement):!1;function Pa(e,t){if(!t)return;const n=new PointerEvent("pointer"+e);t(n,Wo(n))}class px extends _n{constructor(){super(...arguments),this.removeStartListeners=ke,this.removeEndListeners=ke,this.removeAccessibleListeners=ke,this.startPointerPress=(t,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),i=Wt(window,"pointerup",(a,c)=>{if(!this.checkPressEnd())return;const{onTap:u,onTapCancel:h,globalTapTarget:d}=this.node.getProps();de.update(()=>{!d&&!Np(this.node.current,a.target)?h&&h(a,c):u&&u(a,c)})},{passive:!(r.onTap||r.onPointerUp)}),o=Wt(window,"pointercancel",(a,c)=>this.cancelPress(a,c),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=Sn(i,o),this.startPress(t,n)},this.startAccessiblePress=()=>{const t=i=>{if(i.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||Pa("up",(c,u)=>{const{onTap:h}=this.node.getProps();h&&de.update(()=>h(c,u))})};this.removeEndListeners(),this.removeEndListeners=Ut(this.node.current,"keyup",o),Pa("down",(a,c)=>{this.startPress(a,c)})},n=Ut(this.node.current,"keydown",t),r=()=>{this.isPressing&&Pa("cancel",(i,o)=>this.cancelPress(i,o))},s=Ut(this.node.current,"blur",r);this.removeAccessibleListeners=Sn(n,s)}}startPress(t,n){this.isPressing=!0;const{onTapStart:r,whileTap:s}=this.node.getProps();s&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&de.update(()=>r(t,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!Ep()}cancelPress(t,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&de.update(()=>r(t,n))}mount(){const t=this.node.getProps(),n=Wt(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),r=Ut(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Sn(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const Rl=new WeakMap,Ta=new WeakMap,gx=e=>{const t=Rl.get(e.target);t&&t(e)},vx=e=>{e.forEach(gx)};function yx({root:e,...t}){const n=e||document;Ta.has(n)||Ta.set(n,{});const r=Ta.get(n),s=JSON.stringify(t);return r[s]||(r[s]=new IntersectionObserver(vx,{root:e,...t})),r[s]}function xx(e,t,n){const r=yx(t);return Rl.set(e,n),r.observe(e),()=>{Rl.delete(e),r.unobserve(e)}}const wx={some:0,all:1};class bx extends _n{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:i}=t,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:wx[s]},a=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,i&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:h,onViewportLeave:d}=this.node.getProps(),m=u?h:d;m&&m(c)};return xx(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(Sx(t,n))&&this.startObserver()}unmount(){}}function Sx({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const Cx={inView:{Feature:bx},tap:{Feature:px},focus:{Feature:fx},hover:{Feature:mx}};function Ap(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function kx(e){const t={};return e.values.forEach((n,r)=>t[r]=n.get()),t}function Px(e){const t={};return e.values.forEach((n,r)=>t[r]=n.getVelocity()),t}function Ko(e,t,n){const r=e.getProps();return su(r,t,n!==void 0?n:r.custom,kx(e),Px(e))}let Tx=ke,iu=ke;const Cn=e=>e*1e3,Kt=e=>e/1e3,jx={current:!1},Mp=e=>Array.isArray(e)&&typeof e[0]=="number";function Lp(e){return!!(!e||typeof e=="string"&&_p[e]||Mp(e)||Array.isArray(e)&&e.every(Lp))}const hs=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,_p={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:hs([0,.65,.55,1]),circOut:hs([.55,0,1,.45]),backIn:hs([.31,.01,.66,-.59]),backOut:hs([.33,1.53,.69,.99])};function Dp(e){if(e)return Mp(e)?hs(e):Array.isArray(e)?e.map(Dp):_p[e]}function Ex(e,t,n,{delay:r=0,duration:s,repeat:i=0,repeatType:o="loop",ease:a,times:c}={}){const u={[t]:n};c&&(u.offset=c);const h=Dp(a);return Array.isArray(h)&&(u.easing=h),e.animate(u,{delay:r,duration:s,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"})}function Nx(e,{repeat:t,repeatType:n="loop"}){const r=t&&n!=="loop"&&t%2===1?0:e.length-1;return e[r]}const Rp=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,Ax=1e-7,Mx=12;function Lx(e,t,n,r,s){let i,o,a=0;do o=t+(n-t)/2,i=Rp(o,r,s)-e,i>0?n=o:t=o;while(Math.abs(i)>Ax&&++a<Mx);return o}function ni(e,t,n,r){if(e===t&&n===r)return ke;const s=i=>Lx(i,0,1,e,n);return i=>i===0||i===1?i:Rp(s(i),t,r)}const _x=ni(.42,0,1,1),Dx=ni(0,0,.58,1),Ip=ni(.42,0,.58,1),Rx=e=>Array.isArray(e)&&typeof e[0]!="number",Op=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,Gp=e=>t=>1-e(1-t),ou=e=>1-Math.sin(Math.acos(e)),Fp=Gp(ou),Ix=Op(ou),Vp=ni(.33,1.53,.69,.99),au=Gp(Vp),Ox=Op(au),Gx=e=>(e*=2)<1?.5*au(e):.5*(2-Math.pow(2,-10*(e-1))),Fx={linear:ke,easeIn:_x,easeInOut:Ip,easeOut:Dx,circIn:ou,circInOut:Ix,circOut:Fp,backIn:au,backInOut:Ox,backOut:Vp,anticipate:Gx},Bd=e=>{if(Array.isArray(e)){iu(e.length===4);const[t,n,r,s]=e;return ni(t,n,r,s)}else if(typeof e=="string")return Fx[e];return e},lu=(e,t)=>n=>!!(ei(n)&&Vy.test(n)&&n.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(n,t)),Bp=(e,t,n)=>r=>{if(!ei(r))return r;const[s,i,o,a]=r.match(qo);return{[e]:parseFloat(s),[t]:parseFloat(i),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},Vx=e=>Tn(0,255,e),ja={...lr,transform:e=>Math.round(Vx(e))},$n={test:lu("rgb","red"),parse:Bp("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+ja.transform(e)+", "+ja.transform(t)+", "+ja.transform(n)+", "+Cs(Ss.transform(r))+")"};function Bx(e){let t="",n="",r="",s="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),s=e.substring(4,5),t+=t,n+=n,r+=r,s+=s),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const Il={test:lu("#"),parse:Bx,transform:$n.transform},kr={test:lu("hsl","hue"),parse:Bp("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+It.transform(Cs(t))+", "+It.transform(Cs(n))+", "+Cs(Ss.transform(r))+")"},We={test:e=>$n.test(e)||Il.test(e)||kr.test(e),parse:e=>$n.test(e)?$n.parse(e):kr.test(e)?kr.parse(e):Il.parse(e),transform:e=>ei(e)?e:e.hasOwnProperty("red")?$n.transform(e):kr.transform(e)},xe=(e,t,n)=>-n*e+n*t+e;function Ea(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function Hx({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let s=0,i=0,o=0;if(!t)s=i=o=n;else{const a=n<.5?n*(1+t):n+t-n*t,c=2*n-a;s=Ea(c,a,e+1/3),i=Ea(c,a,e),o=Ea(c,a,e-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:r}}const Na=(e,t,n)=>{const r=e*e;return Math.sqrt(Math.max(0,n*(t*t-r)+r))},zx=[Il,$n,kr],Ux=e=>zx.find(t=>t.test(e));function Hd(e){const t=Ux(e);let n=t.parse(e);return t===kr&&(n=Hx(n)),n}const Hp=(e,t)=>{const n=Hd(e),r=Hd(t),s={...n};return i=>(s.red=Na(n.red,r.red,i),s.green=Na(n.green,r.green,i),s.blue=Na(n.blue,r.blue,i),s.alpha=xe(n.alpha,r.alpha,i),$n.transform(s))};function $x(e){var t,n;return isNaN(e)&&ei(e)&&(((t=e.match(qo))===null||t===void 0?void 0:t.length)||0)+(((n=e.match(fp))===null||n===void 0?void 0:n.length)||0)>0}const zp={regex:Gy,countKey:"Vars",token:"${v}",parse:ke},Up={regex:fp,countKey:"Colors",token:"${c}",parse:We.parse},$p={regex:qo,countKey:"Numbers",token:"${n}",parse:lr.parse};function Aa(e,{regex:t,countKey:n,token:r,parse:s}){const i=e.tokenised.match(t);i&&(e["num"+n]=i.length,e.tokenised=e.tokenised.replace(t,r),e.values.push(...i.map(s)))}function yo(e){const t=e.toString(),n={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&Aa(n,zp),Aa(n,Up),Aa(n,$p),n}function qp(e){return yo(e).values}function Wp(e){const{values:t,numColors:n,numVars:r,tokenised:s}=yo(e),i=t.length;return o=>{let a=s;for(let c=0;c<i;c++)c<r?a=a.replace(zp.token,o[c]):c<r+n?a=a.replace(Up.token,We.transform(o[c])):a=a.replace($p.token,Cs(o[c]));return a}}const qx=e=>typeof e=="number"?0:e;function Wx(e){const t=qp(e);return Wp(e)(t.map(qx))}const jn={test:$x,parse:qp,createTransformer:Wp,getAnimatableNone:Wx},Kp=(e,t)=>n=>`${n>0?t:e}`;function Qp(e,t){return typeof e=="number"?n=>xe(e,t,n):We.test(e)?Hp(e,t):e.startsWith("var(")?Kp(e,t):Jp(e,t)}const Xp=(e,t)=>{const n=[...e],r=n.length,s=e.map((i,o)=>Qp(i,t[o]));return i=>{for(let o=0;o<r;o++)n[o]=s[o](i);return n}},Kx=(e,t)=>{const n={...e,...t},r={};for(const s in n)e[s]!==void 0&&t[s]!==void 0&&(r[s]=Qp(e[s],t[s]));return s=>{for(const i in r)n[i]=r[i](s);return n}},Jp=(e,t)=>{const n=jn.createTransformer(t),r=yo(e),s=yo(t);return r.numVars===s.numVars&&r.numColors===s.numColors&&r.numNumbers>=s.numNumbers?Sn(Xp(r.values,s.values),n):Kp(e,t)},qs=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r},zd=(e,t)=>n=>xe(e,t,n);function Qx(e){return typeof e=="number"?zd:typeof e=="string"?We.test(e)?Hp:Jp:Array.isArray(e)?Xp:typeof e=="object"?Kx:zd}function Xx(e,t,n){const r=[],s=n||Qx(e[0]),i=e.length-1;for(let o=0;o<i;o++){let a=s(e[o],e[o+1]);if(t){const c=Array.isArray(t)?t[o]||ke:t;a=Sn(c,a)}r.push(a)}return r}function Yp(e,t,{clamp:n=!0,ease:r,mixer:s}={}){const i=e.length;if(iu(i===t.length),i===1)return()=>t[0];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=Xx(t,r,s),a=o.length,c=u=>{let h=0;if(a>1)for(;h<e.length-2&&!(u<e[h+1]);h++);const d=qs(e[h],e[h+1],u);return o[h](d)};return n?u=>c(Tn(e[0],e[i-1],u)):c}function Jx(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const s=qs(0,t,r);e.push(xe(n,1,s))}}function Yx(e){const t=[0];return Jx(t,e.length-1),t}function Zx(e,t){return e.map(n=>n*t)}function ew(e,t){return e.map(()=>t||Ip).splice(0,e.length-1)}function xo({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const s=Rx(r)?r.map(Bd):Bd(r),i={done:!1,value:t[0]},o=Zx(n&&n.length===t.length?n:Yx(t),e),a=Yp(o,t,{ease:Array.isArray(s)?s:ew(t,s)});return{calculatedDuration:e,next:c=>(i.value=a(c),i.done=c>=e,i)}}function Zp(e,t){return t?e*(1e3/t):0}const tw=5;function e0(e,t,n){const r=Math.max(t-tw,0);return Zp(n-e(r),t-r)}const Ma=.001,nw=.01,Ud=10,rw=.05,sw=1;function iw({duration:e=800,bounce:t=.25,velocity:n=0,mass:r=1}){let s,i;Tx(e<=Cn(Ud));let o=1-t;o=Tn(rw,sw,o),e=Tn(nw,Ud,Kt(e)),o<1?(s=u=>{const h=u*o,d=h*e,m=h-n,g=Ol(u,o),x=Math.exp(-d);return Ma-m/g*x},i=u=>{const d=u*o*e,m=d*n+n,g=Math.pow(o,2)*Math.pow(u,2)*e,x=Math.exp(-d),b=Ol(Math.pow(u,2),o);return(-s(u)+Ma>0?-1:1)*((m-g)*x)/b}):(s=u=>{const h=Math.exp(-u*e),d=(u-n)*e+1;return-Ma+h*d},i=u=>{const h=Math.exp(-u*e),d=(n-u)*(e*e);return h*d});const a=5/e,c=aw(s,i,a);if(e=Cn(e),isNaN(c))return{stiffness:100,damping:10,duration:e};{const u=Math.pow(c,2)*r;return{stiffness:u,damping:o*2*Math.sqrt(r*u),duration:e}}}const ow=12;function aw(e,t,n){let r=n;for(let s=1;s<ow;s++)r=r-e(r)/t(r);return r}function Ol(e,t){return e*Math.sqrt(1-t*t)}const lw=["duration","bounce"],cw=["stiffness","damping","mass"];function $d(e,t){return t.some(n=>e[n]!==void 0)}function uw(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!$d(e,cw)&&$d(e,lw)){const n=iw(e);t={...t,...n,mass:1},t.isResolvedFromDuration=!0}return t}function t0({keyframes:e,restDelta:t,restSpeed:n,...r}){const s=e[0],i=e[e.length-1],o={done:!1,value:s},{stiffness:a,damping:c,mass:u,duration:h,velocity:d,isResolvedFromDuration:m}=uw({...r,velocity:-Kt(r.velocity||0)}),g=d||0,x=c/(2*Math.sqrt(a*u)),b=i-s,k=Kt(Math.sqrt(a/u)),p=Math.abs(b)<5;n||(n=p?.01:2),t||(t=p?.005:.5);let f;if(x<1){const y=Ol(k,x);f=w=>{const S=Math.exp(-x*k*w);return i-S*((g+x*k*b)/y*Math.sin(y*w)+b*Math.cos(y*w))}}else if(x===1)f=y=>i-Math.exp(-k*y)*(b+(g+k*b)*y);else{const y=k*Math.sqrt(x*x-1);f=w=>{const S=Math.exp(-x*k*w),C=Math.min(y*w,300);return i-S*((g+x*k*b)*Math.sinh(C)+y*b*Math.cosh(C))/y}}return{calculatedDuration:m&&h||null,next:y=>{const w=f(y);if(m)o.done=y>=h;else{let S=g;y!==0&&(x<1?S=e0(f,y,w):S=0);const C=Math.abs(S)<=n,P=Math.abs(i-w)<=t;o.done=C&&P}return o.value=o.done?i:w,o}}}function qd({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:a,max:c,restDelta:u=.5,restSpeed:h}){const d=e[0],m={done:!1,value:d},g=T=>a!==void 0&&T<a||c!==void 0&&T>c,x=T=>a===void 0?c:c===void 0||Math.abs(a-T)<Math.abs(c-T)?a:c;let b=n*t;const k=d+b,p=o===void 0?k:o(k);p!==k&&(b=p-d);const f=T=>-b*Math.exp(-T/r),y=T=>p+f(T),w=T=>{const j=f(T),E=y(T);m.done=Math.abs(j)<=u,m.value=m.done?p:E};let S,C;const P=T=>{g(m.value)&&(S=T,C=t0({keyframes:[m.value,x(m.value)],velocity:e0(y,T,m.value),damping:s,stiffness:i,restDelta:u,restSpeed:h}))};return P(0),{calculatedDuration:null,next:T=>{let j=!1;return!C&&S===void 0&&(j=!0,w(T),P(T)),S!==void 0&&T>S?C.next(T-S):(!j&&w(T),m)}}}const dw=e=>{const t=({timestamp:n})=>e(n);return{start:()=>de.update(t,!0),stop:()=>Zt(t),now:()=>Be.isProcessing?Be.timestamp:performance.now()}},Wd=2e4;function Kd(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<Wd;)t+=n,r=e.next(t);return t>=Wd?1/0:t}const hw={decay:qd,inertia:qd,tween:xo,keyframes:xo,spring:t0};function wo({autoplay:e=!0,delay:t=0,driver:n=dw,keyframes:r,type:s="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:a="loop",onPlay:c,onStop:u,onComplete:h,onUpdate:d,...m}){let g=1,x=!1,b,k;const p=()=>{k=new Promise(H=>{b=H})};p();let f;const y=hw[s]||xo;let w;y!==xo&&typeof r[0]!="number"&&(w=Yp([0,100],r,{clamp:!1}),r=[0,100]);const S=y({...m,keyframes:r});let C;a==="mirror"&&(C=y({...m,keyframes:[...r].reverse(),velocity:-(m.velocity||0)}));let P="idle",T=null,j=null,E=null;S.calculatedDuration===null&&i&&(S.calculatedDuration=Kd(S));const{calculatedDuration:L}=S;let A=1/0,N=1/0;L!==null&&(A=L+o,N=A*(i+1)-o);let _=0;const se=H=>{if(j===null)return;g>0&&(j=Math.min(j,H)),g<0&&(j=Math.min(H-N/g,j)),T!==null?_=T:_=Math.round(H-j)*g;const $=_-t*(g>=0?1:-1),z=g>=0?$<0:$>N;_=Math.max($,0),P==="finished"&&T===null&&(_=N);let K=_,J=S;if(i){const le=Math.min(_,N)/A;let Le=Math.floor(le),Se=le%1;!Se&&le>=1&&(Se=1),Se===1&&Le--,Le=Math.min(Le,i+1),!!(Le%2)&&(a==="reverse"?(Se=1-Se,o&&(Se-=o/A)):a==="mirror"&&(J=C)),K=Tn(0,1,Se)*A}const Q=z?{done:!1,value:r[0]}:J.next(K);w&&(Q.value=w(Q.value));let{done:pe}=Q;!z&&L!==null&&(pe=g>=0?_>=N:_<=0);const Ye=T===null&&(P==="finished"||P==="running"&&pe);return d&&d(Q.value),Ye&&R(),Q},I=()=>{f&&f.stop(),f=void 0},W=()=>{P="idle",I(),b(),p(),j=E=null},R=()=>{P="finished",h&&h(),I(),b()},B=()=>{if(x)return;f||(f=n(se));const H=f.now();c&&c(),T!==null?j=H-T:(!j||P==="finished")&&(j=H),P==="finished"&&p(),E=j,T=null,P="running",f.start()};e&&B();const G={then(H,$){return k.then(H,$)},get time(){return Kt(_)},set time(H){H=Cn(H),_=H,T!==null||!f||g===0?T=H:j=f.now()-H/g},get duration(){const H=S.calculatedDuration===null?Kd(S):S.calculatedDuration;return Kt(H)},get speed(){return g},set speed(H){H===g||!f||(g=H,G.time=Kt(_))},get state(){return P},play:B,pause:()=>{P="paused",T=_},stop:()=>{x=!0,P!=="idle"&&(P="idle",u&&u(),W())},cancel:()=>{E!==null&&se(E),W()},complete:()=>{P="finished"},sample:H=>(j=0,se(H))};return G}function mw(e){let t;return()=>(t===void 0&&(t=e()),t)}const fw=mw(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),pw=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Pi=10,gw=2e4,vw=(e,t)=>t.type==="spring"||e==="backgroundColor"||!Lp(t.ease);function yw(e,t,{onUpdate:n,onComplete:r,...s}){if(!(fw()&&pw.has(t)&&!s.repeatDelay&&s.repeatType!=="mirror"&&s.damping!==0&&s.type!=="inertia"))return!1;let o=!1,a,c,u=!1;const h=()=>{c=new Promise(y=>{a=y})};h();let{keyframes:d,duration:m=300,ease:g,times:x}=s;if(vw(t,s)){const y=wo({...s,repeat:0,delay:0});let w={done:!1,value:d[0]};const S=[];let C=0;for(;!w.done&&C<gw;)w=y.sample(C),S.push(w.value),C+=Pi;x=void 0,d=S,m=C-Pi,g="linear"}const b=Ex(e.owner.current,t,d,{...s,duration:m,ease:g,times:x}),k=()=>{u=!1,b.cancel()},p=()=>{u=!0,de.update(k),a(),h()};return b.onfinish=()=>{u||(e.set(Nx(d,s)),r&&r(),p())},{then(y,w){return c.then(y,w)},attachTimeline(y){return b.timeline=y,b.onfinish=null,ke},get time(){return Kt(b.currentTime||0)},set time(y){b.currentTime=Cn(y)},get speed(){return b.playbackRate},set speed(y){b.playbackRate=y},get duration(){return Kt(m)},play:()=>{o||(b.play(),Zt(k))},pause:()=>b.pause(),stop:()=>{if(o=!0,b.playState==="idle")return;const{currentTime:y}=b;if(y){const w=wo({...s,autoplay:!1});e.setWithVelocity(w.sample(y-Pi).value,w.sample(y).value,Pi)}p()},complete:()=>{u||b.finish()},cancel:p}}function xw({keyframes:e,delay:t,onUpdate:n,onComplete:r}){const s=()=>(n&&n(e[e.length-1]),r&&r(),{time:0,speed:1,duration:0,play:ke,pause:ke,stop:ke,then:i=>(i(),Promise.resolve()),cancel:ke,complete:ke});return t?wo({keyframes:[0,1],duration:0,delay:t,onComplete:s}):s()}const ww={type:"spring",stiffness:500,damping:25,restSpeed:10},bw=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),Sw={type:"keyframes",duration:.8},Cw={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},kw=(e,{keyframes:t})=>t.length>2?Sw:ar.has(e)?e.startsWith("scale")?bw(t[1]):ww:Cw,Gl=(e,t)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(jn.test(t)||t==="0")&&!t.startsWith("url(")),Pw=new Set(["brightness","contrast","saturate","opacity"]);function Tw(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(qo)||[];if(!r)return e;const s=n.replace(r,"");let i=Pw.has(t)?1:0;return r!==n&&(i*=100),t+"("+i+s+")"}const jw=/([a-z-]*)\(.*?\)/g,Fl={...jn,getAnimatableNone:e=>{const t=e.match(jw);return t?t.map(Tw).join(" "):e}},Ew={...pp,color:We,backgroundColor:We,outlineColor:We,fill:We,stroke:We,borderColor:We,borderTopColor:We,borderRightColor:We,borderBottomColor:We,borderLeftColor:We,filter:Fl,WebkitFilter:Fl},cu=e=>Ew[e];function n0(e,t){let n=cu(e);return n!==Fl&&(n=jn),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const r0=e=>/^0[^.\s]+$/.test(e);function Nw(e){if(typeof e=="number")return e===0;if(e!==null)return e==="none"||e==="0"||r0(e)}function Aw(e,t,n,r){const s=Gl(t,n);let i;Array.isArray(n)?i=[...n]:i=[null,n];const o=r.from!==void 0?r.from:e.get();let a;const c=[];for(let u=0;u<i.length;u++)i[u]===null&&(i[u]=u===0?o:i[u-1]),Nw(i[u])&&c.push(u),typeof i[u]=="string"&&i[u]!=="none"&&i[u]!=="0"&&(a=i[u]);if(s&&c.length&&a)for(let u=0;u<c.length;u++){const h=c[u];i[h]=n0(t,a)}return i}function Mw({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:a,from:c,elapsed:u,...h}){return!!Object.keys(h).length}function uu(e,t){return e[t]||e.default||e}const Lw={skipAnimations:!1},du=(e,t,n,r={})=>s=>{const i=uu(r,e)||{},o=i.delay||r.delay||0;let{elapsed:a=0}=r;a=a-Cn(o);const c=Aw(t,e,n,i),u=c[0],h=c[c.length-1],d=Gl(e,u),m=Gl(e,h);let g={keyframes:c,velocity:t.getVelocity(),ease:"easeOut",...i,delay:-a,onUpdate:x=>{t.set(x),i.onUpdate&&i.onUpdate(x)},onComplete:()=>{s(),i.onComplete&&i.onComplete()}};if(Mw(i)||(g={...g,...kw(e,g)}),g.duration&&(g.duration=Cn(g.duration)),g.repeatDelay&&(g.repeatDelay=Cn(g.repeatDelay)),!d||!m||jx.current||i.type===!1||Lw.skipAnimations)return xw(g);if(!r.isHandoff&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const x=yw(t,e,g);if(x)return x}return wo(g)};function bo(e){return!!(st(e)&&e.add)}const s0=e=>/^\-?\d*\.?\d+$/.test(e);function hu(e,t){e.indexOf(t)===-1&&e.push(t)}function mu(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class fu{constructor(){this.subscriptions=[]}add(t){return hu(this.subscriptions,t),()=>mu(this.subscriptions,t)}notify(t,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,n,r);else for(let i=0;i<s;i++){const o=this.subscriptions[i];o&&o(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const _w=e=>!isNaN(parseFloat(e));class Dw{constructor(t,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,s=!0)=>{this.prev=this.current,this.current=r;const{delta:i,timestamp:o}=Be;this.lastUpdated!==o&&(this.timeDelta=i,this.lastUpdated=o,de.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>de.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=_w(this.current),this.owner=n.owner}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new fu);const r=this.events[t].add(n);return t==="change"?()=>{r(),de.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,r){this.set(n),this.prev=t,this.timeDelta=r}jump(t){this.updateAndNotify(t),this.prev=t,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?Zp(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Hr(e,t){return new Dw(e,t)}const i0=e=>t=>t.test(e),Rw={test:e=>e==="auto",parse:e=>e},o0=[lr,X,It,rn,Hy,By,Rw],is=e=>o0.find(i0(e)),Iw=[...o0,We,jn],Ow=e=>Iw.find(i0(e));function Gw(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,Hr(n))}function Fw(e,t){const n=Ko(e,t);let{transitionEnd:r={},transition:s={},...i}=n?e.makeTargetAnimatable(n,!1):{};i={...i,...r};for(const o in i){const a=nx(i[o]);Gw(e,o,a)}}function Vw(e,t,n){var r,s;const i=Object.keys(t).filter(a=>!e.hasValue(a)),o=i.length;if(o)for(let a=0;a<o;a++){const c=i[a],u=t[c];let h=null;Array.isArray(u)&&(h=u[0]),h===null&&(h=(s=(r=n[c])!==null&&r!==void 0?r:e.readValue(c))!==null&&s!==void 0?s:t[c]),h!=null&&(typeof h=="string"&&(s0(h)||r0(h))?h=parseFloat(h):!Ow(h)&&jn.test(u)&&(h=n0(c,u)),e.addValue(c,Hr(h,{owner:e})),n[c]===void 0&&(n[c]=h),h!==null&&e.setBaseTarget(c,h))}}function Bw(e,t){return t?(t[e]||t.default||t).from:void 0}function Hw(e,t,n){const r={};for(const s in e){const i=Bw(s,t);if(i!==void 0)r[s]=i;else{const o=n.getValue(s);o&&(r[s]=o.get())}}return r}function zw({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function Uw(e,t){const n=e.get();if(Array.isArray(t)){for(let r=0;r<t.length;r++)if(t[r]!==n)return!0}else return n!==t}function a0(e,t,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:i=e.getDefaultTransition(),transitionEnd:o,...a}=e.makeTargetAnimatable(t);const c=e.getValue("willChange");r&&(i=r);const u=[],h=s&&e.animationState&&e.animationState.getState()[s];for(const d in a){const m=e.getValue(d),g=a[d];if(!m||g===void 0||h&&zw(h,d))continue;const x={delay:n,elapsed:0,...uu(i||{},d)};if(window.HandoffAppearAnimations){const p=e.getProps()[lp];if(p){const f=window.HandoffAppearAnimations(p,d,m,de);f!==null&&(x.elapsed=f,x.isHandoff=!0)}}let b=!x.isHandoff&&!Uw(m,g);if(x.type==="spring"&&(m.getVelocity()||x.velocity)&&(b=!1),m.animation&&(b=!1),b)continue;m.start(du(d,m,g,e.shouldReduceMotion&&ar.has(d)?{type:!1}:x));const k=m.animation;bo(c)&&(c.add(d),k.then(()=>c.remove(d))),u.push(k)}return o&&Promise.all(u).then(()=>{o&&Fw(e,o)}),u}function Vl(e,t,n={}){const r=Ko(e,t,n.custom);let{transition:s=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const i=r?()=>Promise.all(a0(e,r,n)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:h,staggerDirection:d}=s;return $w(e,t,u+c,h,d,n)}:()=>Promise.resolve(),{when:a}=s;if(a){const[c,u]=a==="beforeChildren"?[i,o]:[o,i];return c().then(()=>u())}else return Promise.all([i(),o(n.delay)])}function $w(e,t,n=0,r=0,s=1,i){const o=[],a=(e.variantChildren.size-1)*r,c=s===1?(u=0)=>u*r:(u=0)=>a-u*r;return Array.from(e.variantChildren).sort(qw).forEach((u,h)=>{u.notify("AnimationStart",t),o.push(Vl(u,t,{...i,delay:n+c(h)}).then(()=>u.notify("AnimationComplete",t)))}),Promise.all(o)}function qw(e,t){return e.sortNodePosition(t)}function Ww(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const s=t.map(i=>Vl(e,i,n));r=Promise.all(s)}else if(typeof t=="string")r=Vl(e,t,n);else{const s=typeof t=="function"?Ko(e,t,n.custom):t;r=Promise.all(a0(e,s,n))}return r.then(()=>e.notify("AnimationComplete",t))}const Kw=[...Qc].reverse(),Qw=Qc.length;function Xw(e){return t=>Promise.all(t.map(({animation:n,options:r})=>Ww(e,n,r)))}function Jw(e){let t=Xw(e);const n=Zw();let r=!0;const s=(c,u)=>{const h=Ko(e,u);if(h){const{transition:d,transitionEnd:m,...g}=h;c={...c,...g,...m}}return c};function i(c){t=c(e)}function o(c,u){const h=e.getProps(),d=e.getVariantContext(!0)||{},m=[],g=new Set;let x={},b=1/0;for(let p=0;p<Qw;p++){const f=Kw[p],y=n[f],w=h[f]!==void 0?h[f]:d[f],S=Us(w),C=f===u?y.isActive:null;C===!1&&(b=p);let P=w===d[f]&&w!==h[f]&&S;if(P&&r&&e.manuallyAnimateOnMount&&(P=!1),y.protectedKeys={...x},!y.isActive&&C===null||!w&&!y.prevProp||Uo(w)||typeof w=="boolean")continue;let j=Yw(y.prevProp,w)||f===u&&y.isActive&&!P&&S||p>b&&S,E=!1;const L=Array.isArray(w)?w:[w];let A=L.reduce(s,{});C===!1&&(A={});const{prevResolvedValues:N={}}=y,_={...N,...A},se=I=>{j=!0,g.has(I)&&(E=!0,g.delete(I)),y.needsAnimating[I]=!0};for(const I in _){const W=A[I],R=N[I];if(x.hasOwnProperty(I))continue;let B=!1;vo(W)&&vo(R)?B=!Ap(W,R):B=W!==R,B?W!==void 0?se(I):g.add(I):W!==void 0&&g.has(I)?se(I):y.protectedKeys[I]=!0}y.prevProp=w,y.prevResolvedValues=A,y.isActive&&(x={...x,...A}),r&&e.blockInitialAnimation&&(j=!1),j&&(!P||E)&&m.push(...L.map(I=>({animation:I,options:{type:f,...c}})))}if(g.size){const p={};g.forEach(f=>{const y=e.getBaseTarget(f);y!==void 0&&(p[f]=y)}),m.push({animation:p})}let k=!!m.length;return r&&(h.initial===!1||h.initial===h.animate)&&!e.manuallyAnimateOnMount&&(k=!1),r=!1,k?t(m):Promise.resolve()}function a(c,u,h){var d;if(n[c].isActive===u)return Promise.resolve();(d=e.variantChildren)===null||d===void 0||d.forEach(g=>{var x;return(x=g.animationState)===null||x===void 0?void 0:x.setActive(c,u)}),n[c].isActive=u;const m=o(h,c);for(const g in n)n[g].protectedKeys={};return m}return{animateChanges:o,setActive:a,setAnimateFunction:i,getState:()=>n}}function Yw(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!Ap(t,e):!1}function Rn(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Zw(){return{animate:Rn(!0),whileInView:Rn(),whileHover:Rn(),whileTap:Rn(),whileDrag:Rn(),whileFocus:Rn(),exit:Rn()}}class e1 extends _n{constructor(t){super(t),t.animationState||(t.animationState=Jw(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();this.unmount(),Uo(t)&&(this.unmount=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let t1=0;class n1 extends _n{constructor(){super(...arguments),this.id=t1++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n,custom:r}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===s)return;const i=this.node.animationState.setActive("exit",!t,{custom:r??this.node.getProps().custom});n&&!t&&i.then(()=>n(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const r1={animation:{Feature:e1},exit:{Feature:n1}},Qd=(e,t)=>Math.abs(e-t);function s1(e,t){const n=Qd(e.x,t.x),r=Qd(e.y,t.y);return Math.sqrt(n**2+r**2)}class l0{constructor(t,n,{transformPagePoint:r,contextWindow:s,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=_a(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,g=s1(d.offset,{x:0,y:0})>=3;if(!m&&!g)return;const{point:x}=d,{timestamp:b}=Be;this.history.push({...x,timestamp:b});const{onStart:k,onMove:p}=this.handlers;m||(k&&k(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),p&&p(this.lastMoveEvent,d)},this.handlePointerMove=(d,m)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=La(m,this.transformPagePoint),de.update(this.updatePoint,!0)},this.handlePointerUp=(d,m)=>{this.end();const{onEnd:g,onSessionEnd:x,resumeAnimation:b}=this.handlers;if(this.dragSnapToOrigin&&b&&b(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const k=_a(d.type==="pointercancel"?this.lastMoveEventInfo:La(m,this.transformPagePoint),this.history);this.startEvent&&g&&g(d,k),x&&x(d,k)},!Pp(t))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.contextWindow=s||window;const o=Wo(t),a=La(o,this.transformPagePoint),{point:c}=a,{timestamp:u}=Be;this.history=[{...c,timestamp:u}];const{onSessionStart:h}=n;h&&h(t,_a(a,this.history)),this.removeListeners=Sn(Wt(this.contextWindow,"pointermove",this.handlePointerMove),Wt(this.contextWindow,"pointerup",this.handlePointerUp),Wt(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Zt(this.updatePoint)}}function La(e,t){return t?{point:t(e.point)}:e}function Xd(e,t){return{x:e.x-t.x,y:e.y-t.y}}function _a({point:e},t){return{point:e,delta:Xd(e,c0(t)),offset:Xd(e,i1(t)),velocity:o1(t,.1)}}function i1(e){return e[0]}function c0(e){return e[e.length-1]}function o1(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const s=c0(e);for(;n>=0&&(r=e[n],!(s.timestamp-r.timestamp>Cn(t)));)n--;if(!r)return{x:0,y:0};const i=Kt(s.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const o={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function ct(e){return e.max-e.min}function Bl(e,t=0,n=.01){return Math.abs(e-t)<=n}function Jd(e,t,n,r=.5){e.origin=r,e.originPoint=xe(t.min,t.max,e.origin),e.scale=ct(n)/ct(t),(Bl(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=xe(n.min,n.max,e.origin)-e.originPoint,(Bl(e.translate)||isNaN(e.translate))&&(e.translate=0)}function ks(e,t,n,r){Jd(e.x,t.x,n.x,r?r.originX:void 0),Jd(e.y,t.y,n.y,r?r.originY:void 0)}function Yd(e,t,n){e.min=n.min+t.min,e.max=e.min+ct(t)}function a1(e,t,n){Yd(e.x,t.x,n.x),Yd(e.y,t.y,n.y)}function Zd(e,t,n){e.min=t.min-n.min,e.max=e.min+ct(t)}function Ps(e,t,n){Zd(e.x,t.x,n.x),Zd(e.y,t.y,n.y)}function l1(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?xe(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?xe(n,e,r.max):Math.min(e,n)),e}function eh(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function c1(e,{top:t,left:n,bottom:r,right:s}){return{x:eh(e.x,n,s),y:eh(e.y,t,r)}}function th(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function u1(e,t){return{x:th(e.x,t.x),y:th(e.y,t.y)}}function d1(e,t){let n=.5;const r=ct(e),s=ct(t);return s>r?n=qs(t.min,t.max-r,e.min):r>s&&(n=qs(e.min,e.max-s,t.min)),Tn(0,1,n)}function h1(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const Hl=.35;function m1(e=Hl){return e===!1?e=0:e===!0&&(e=Hl),{x:nh(e,"left","right"),y:nh(e,"top","bottom")}}function nh(e,t,n){return{min:rh(e,t),max:rh(e,n)}}function rh(e,t){return typeof e=="number"?e:e[t]||0}const sh=()=>({translate:0,scale:1,origin:0,originPoint:0}),Pr=()=>({x:sh(),y:sh()}),ih=()=>({min:0,max:0}),je=()=>({x:ih(),y:ih()});function mt(e){return[e("x"),e("y")]}function u0({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function f1({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function p1(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Da(e){return e===void 0||e===1}function zl({scale:e,scaleX:t,scaleY:n}){return!Da(e)||!Da(t)||!Da(n)}function Fn(e){return zl(e)||d0(e)||e.z||e.rotate||e.rotateX||e.rotateY}function d0(e){return oh(e.x)||oh(e.y)}function oh(e){return e&&e!=="0%"}function So(e,t,n){const r=e-n,s=t*r;return n+s}function ah(e,t,n,r,s){return s!==void 0&&(e=So(e,s,r)),So(e,n,r)+t}function Ul(e,t=0,n=1,r,s){e.min=ah(e.min,t,n,r,s),e.max=ah(e.max,t,n,r,s)}function h0(e,{x:t,y:n}){Ul(e.x,t.translate,t.scale,t.originPoint),Ul(e.y,n.translate,n.scale,n.originPoint)}function g1(e,t,n,r=!1){const s=n.length;if(!s)return;t.x=t.y=1;let i,o;for(let a=0;a<s;a++){i=n[a],o=i.projectionDelta;const c=i.instance;c&&c.style&&c.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&Tr(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,h0(e,o)),r&&Fn(i.latestValues)&&Tr(e,i.latestValues))}t.x=lh(t.x),t.y=lh(t.y)}function lh(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function ln(e,t){e.min=e.min+t,e.max=e.max+t}function ch(e,t,[n,r,s]){const i=t[s]!==void 0?t[s]:.5,o=xe(e.min,e.max,i);Ul(e,t[n],t[r],o,t.scale)}const v1=["x","scaleX","originX"],y1=["y","scaleY","originY"];function Tr(e,t){ch(e.x,t,v1),ch(e.y,t,y1)}function m0(e,t){return u0(p1(e.getBoundingClientRect(),t))}function x1(e,t,n){const r=m0(e,n),{scroll:s}=t;return s&&(ln(r.x,s.offset.x),ln(r.y,s.offset.y)),r}const f0=({current:e})=>e?e.ownerDocument.defaultView:null,w1=new WeakMap;class b1{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=je(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=h=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Wo(h,"page").point)},i=(h,d)=>{const{drag:m,dragPropagation:g,onDragStart:x}=this.getProps();if(m&&!g&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=jp(m),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),mt(k=>{let p=this.getAxisMotionValue(k).get()||0;if(It.test(p)){const{projection:f}=this.visualElement;if(f&&f.layout){const y=f.layout.layoutBox[k];y&&(p=ct(y)*(parseFloat(p)/100))}}this.originPoint[k]=p}),x&&de.update(()=>x(h,d),!1,!0);const{animationState:b}=this.visualElement;b&&b.setActive("whileDrag",!0)},o=(h,d)=>{const{dragPropagation:m,dragDirectionLock:g,onDirectionLock:x,onDrag:b}=this.getProps();if(!m&&!this.openGlobalLock)return;const{offset:k}=d;if(g&&this.currentDirection===null){this.currentDirection=S1(k),this.currentDirection!==null&&x&&x(this.currentDirection);return}this.updateAxis("x",d.point,k),this.updateAxis("y",d.point,k),this.visualElement.render(),b&&b(h,d)},a=(h,d)=>this.stop(h,d),c=()=>mt(h=>{var d;return this.getAnimationState(h)==="paused"&&((d=this.getAxisMotionValue(h).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new l0(t,{onSessionStart:s,onStart:i,onMove:o,onSessionEnd:a,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:f0(this.visualElement)})}stop(t,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:s}=n;this.startAnimation(s);const{onDragEnd:i}=this.getProps();i&&de.update(()=>i(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:s}=this.getProps();if(!r||!Ti(t,s,this.currentDirection))return;const i=this.getAxisMotionValue(t);let o=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(o=l1(o,this.constraints[t],this.elastic[t])),i.set(o)}resolveConstraints(){var t;const{dragConstraints:n,dragElastic:r}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,i=this.constraints;n&&Cr(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&s?this.constraints=c1(s.layoutBox,n):this.constraints=!1,this.elastic=m1(r),i!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&mt(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=h1(s.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!Cr(t))return!1;const r=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=x1(r,s.root,this.visualElement.getTransformPagePoint());let o=u1(s.layout.layoutBox,i);if(n){const a=n(f1(o));this.hasMutatedConstraints=!!a,a&&(o=u0(a))}return o}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),c=this.constraints||{},u=mt(h=>{if(!Ti(h,n,this.currentDirection))return;let d=c&&c[h]||{};o&&(d={min:0,max:0});const m=s?200:1e6,g=s?40:1e7,x={type:"inertia",velocity:r?t[h]:0,bounceStiffness:m,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...i,...d};return this.startAxisValueAnimation(h,x)});return Promise.all(u).then(a)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return r.start(du(t,r,0,n))}stopAnimation(){mt(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){mt(t=>{var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(t){const n="_drag"+t.toUpperCase(),r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){mt(n=>{const{drag:r}=this.getProps();if(!Ti(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(n);if(s&&s.layout){const{min:o,max:a}=s.layout.layoutBox[n];i.set(t[n]-xe(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Cr(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};mt(o=>{const a=this.getAxisMotionValue(o);if(a){const c=a.get();s[o]=d1({min:c,max:c},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),mt(o=>{if(!Ti(o,t,null))return;const a=this.getAxisMotionValue(o),{min:c,max:u}=this.constraints[o];a.set(xe(c,u,s[o]))})}addListeners(){if(!this.visualElement.current)return;w1.set(this.visualElement,this);const t=this.visualElement.current,n=Wt(t,"pointerdown",c=>{const{drag:u,dragListener:h=!0}=this.getProps();u&&h&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();Cr(c)&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),r();const o=Ut(window,"resize",()=>this.scalePositionWithinConstraints()),a=s.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(mt(h=>{const d=this.getAxisMotionValue(h);d&&(this.originPoint[h]+=c[h].translate,d.set(d.get()+c[h].translate))}),this.visualElement.render())});return()=>{o(),n(),i(),a&&a()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:o=Hl,dragMomentum:a=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:i,dragElastic:o,dragMomentum:a}}}function Ti(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function S1(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class C1 extends _n{constructor(t){super(t),this.removeGroupControls=ke,this.removeListeners=ke,this.controls=new b1(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ke}unmount(){this.removeGroupControls(),this.removeListeners()}}const uh=e=>(t,n)=>{e&&de.update(()=>e(t,n))};class k1 extends _n{constructor(){super(...arguments),this.removePointerDownListener=ke}onPointerDown(t){this.session=new l0(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:f0(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:uh(t),onStart:uh(n),onMove:r,onEnd:(i,o)=>{delete this.session,s&&de.update(()=>s(i,o))}}}mount(){this.removePointerDownListener=Wt(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function P1(){const e=v.useContext(Ho);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:n,register:r}=e,s=v.useId();return v.useEffect(()=>r(s),[]),!t&&n?[!1,()=>n&&n(s)]:[!0]}const Hi={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function dh(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const os={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(X.test(e))e=parseFloat(e);else return e;const n=dh(e,t.target.x),r=dh(e,t.target.y);return`${n}% ${r}%`}},T1={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,s=jn.parse(e);if(s.length>5)return r;const i=jn.createTransformer(e),o=typeof s[0]!="number"?1:0,a=n.x.scale*t.x,c=n.y.scale*t.y;s[0+o]/=a,s[1+o]/=c;const u=xe(a,c,.5);return typeof s[2+o]=="number"&&(s[2+o]/=u),typeof s[3+o]=="number"&&(s[3+o]/=u),i(s)}};class j1 extends ce.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:i}=t;Dy(E1),i&&(n.group&&n.group.add(i),r&&r.register&&s&&r.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Hi.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:s,isPresent:i}=this.props,o=r.projection;return o&&(o.isPresent=i,s||t.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?o.promote():o.relegate()||de.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),queueMicrotask(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=t;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function p0(e){const[t,n]=P1(),r=v.useContext(Jc);return ce.createElement(j1,{...e,layoutGroup:r,switchLayoutGroup:v.useContext(up),isPresent:t,safeToRemove:n})}const E1={borderRadius:{...os,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:os,borderTopRightRadius:os,borderBottomLeftRadius:os,borderBottomRightRadius:os,boxShadow:T1},g0=["TopLeft","TopRight","BottomLeft","BottomRight"],N1=g0.length,hh=e=>typeof e=="string"?parseFloat(e):e,mh=e=>typeof e=="number"||X.test(e);function A1(e,t,n,r,s,i){s?(e.opacity=xe(0,n.opacity!==void 0?n.opacity:1,M1(r)),e.opacityExit=xe(t.opacity!==void 0?t.opacity:1,0,L1(r))):i&&(e.opacity=xe(t.opacity!==void 0?t.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<N1;o++){const a=`border${g0[o]}Radius`;let c=fh(t,a),u=fh(n,a);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||mh(c)===mh(u)?(e[a]=Math.max(xe(hh(c),hh(u),r),0),(It.test(u)||It.test(c))&&(e[a]+="%")):e[a]=u}(t.rotate||n.rotate)&&(e.rotate=xe(t.rotate||0,n.rotate||0,r))}function fh(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const M1=v0(0,.5,Fp),L1=v0(.5,.95,ke);function v0(e,t,n){return r=>r<e?0:r>t?1:n(qs(e,t,r))}function ph(e,t){e.min=t.min,e.max=t.max}function ht(e,t){ph(e.x,t.x),ph(e.y,t.y)}function gh(e,t,n,r,s){return e-=t,e=So(e,1/n,r),s!==void 0&&(e=So(e,1/s,r)),e}function _1(e,t=0,n=1,r=.5,s,i=e,o=e){if(It.test(t)&&(t=parseFloat(t),t=xe(o.min,o.max,t/100)-o.min),typeof t!="number")return;let a=xe(i.min,i.max,r);e===i&&(a-=t),e.min=gh(e.min,t,n,a,s),e.max=gh(e.max,t,n,a,s)}function vh(e,t,[n,r,s],i,o){_1(e,t[n],t[r],t[s],t.scale,i,o)}const D1=["x","scaleX","originX"],R1=["y","scaleY","originY"];function yh(e,t,n,r){vh(e.x,t,D1,n?n.x:void 0,r?r.x:void 0),vh(e.y,t,R1,n?n.y:void 0,r?r.y:void 0)}function xh(e){return e.translate===0&&e.scale===1}function y0(e){return xh(e.x)&&xh(e.y)}function I1(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}function x0(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function wh(e){return ct(e.x)/ct(e.y)}class O1{constructor(){this.members=[]}add(t){hu(this.members,t),t.scheduleRender()}remove(t){if(mu(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(s=>t===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function bh(e,t,n){let r="";const s=e.x.translate/t.x,i=e.y.translate/t.y;if((s||i)&&(r=`translate3d(${s}px, ${i}px, 0) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{rotate:c,rotateX:u,rotateY:h}=n;c&&(r+=`rotate(${c}deg) `),u&&(r+=`rotateX(${u}deg) `),h&&(r+=`rotateY(${h}deg) `)}const o=e.x.scale*t.x,a=e.y.scale*t.y;return(o!==1||a!==1)&&(r+=`scale(${o}, ${a})`),r||"none"}const G1=(e,t)=>e.depth-t.depth;class F1{constructor(){this.children=[],this.isDirty=!1}add(t){hu(this.children,t),this.isDirty=!0}remove(t){mu(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(G1),this.isDirty=!1,this.children.forEach(t)}}function V1(e,t){const n=performance.now(),r=({timestamp:s})=>{const i=s-n;i>=t&&(Zt(r),e(i-t))};return de.read(r,!0),()=>Zt(r)}function B1(e){window.MotionDebug&&window.MotionDebug.record(e)}function H1(e){return e instanceof SVGElement&&e.tagName!=="svg"}function z1(e,t,n){const r=st(e)?e:Hr(e);return r.start(du("",r,t,n)),r.animation}const Sh=["","X","Y","Z"],U1={visibility:"hidden"},Ch=1e3;let $1=0;const Vn={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function w0({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(o={},a=t==null?void 0:t()){this.id=$1++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Vn.totalNodes=Vn.resolvedTargetDeltas=Vn.recalculatedProjection=0,this.nodes.forEach(K1),this.nodes.forEach(Z1),this.nodes.forEach(eb),this.nodes.forEach(Q1),B1(Vn)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new F1)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new fu),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const c=this.eventHandlers.get(o);c&&c.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=H1(o),this.instance=o;const{layoutId:c,layout:u,visualElement:h}=this.options;if(h&&!h.current&&h.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(u||c)&&(this.isLayoutDirty=!0),e){let d;const m=()=>this.root.updateBlockedByResize=!1;e(o,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=V1(m,250),Hi.hasAnimatedSinceResize&&(Hi.hasAnimatedSinceResize=!1,this.nodes.forEach(Ph))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&h&&(c||u)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:m,hasRelativeTargetChanged:g,layout:x})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const b=this.options.transition||h.getDefaultTransition()||ib,{onLayoutAnimationStart:k,onLayoutAnimationComplete:p}=h.getProps(),f=!this.targetLayout||!x0(this.targetLayout,x)||g,y=!m&&g;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||y||m&&(f||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,y);const w={...uu(b,"layout"),onPlay:k,onComplete:p};(h.shouldReduceMotion||this.options.layoutRoot)&&(w.delay=0,w.type=!1),this.startAnimation(w)}else m||Ph(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=x})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Zt(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(tb),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const d=this.path[h];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:a,layout:c}=this.options;if(a===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(kh);return}this.isUpdating||this.nodes.forEach(J1),this.isUpdating=!1,this.nodes.forEach(Y1),this.nodes.forEach(q1),this.nodes.forEach(W1),this.clearAllSnapshots();const a=performance.now();Be.delta=Tn(0,1e3/60,a-Be.timestamp),Be.timestamp=a,Be.isProcessing=!0,ka.update.process(Be),ka.preRender.process(Be),ka.render.process(Be),Be.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(X1),this.sharedNodes.forEach(nb)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,de.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){de.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=je(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:r(this.instance),offset:n(this.instance)})}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform,a=this.projectionDelta&&!y0(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,h=u!==this.prevTransformTemplateValue;o&&(a||Fn(this.latestValues)||h)&&(s(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let c=this.removeElementScroll(a);return o&&(c=this.removeTransform(c)),ob(c),{animationId:this.root.animationId,measuredBox:a,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return je();const a=o.measureViewportBox(),{scroll:c}=this.root;return c&&(ln(a.x,c.offset.x),ln(a.y,c.offset.y)),a}removeElementScroll(o){const a=je();ht(a,o);for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:h,options:d}=u;if(u!==this.root&&h&&d.layoutScroll){if(h.isRoot){ht(a,o);const{scroll:m}=this.root;m&&(ln(a.x,-m.offset.x),ln(a.y,-m.offset.y))}ln(a.x,h.offset.x),ln(a.y,h.offset.y)}}return a}applyTransform(o,a=!1){const c=je();ht(c,o);for(let u=0;u<this.path.length;u++){const h=this.path[u];!a&&h.options.layoutScroll&&h.scroll&&h!==h.root&&Tr(c,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),Fn(h.latestValues)&&Tr(c,h.latestValues)}return Fn(this.latestValues)&&Tr(c,this.latestValues),c}removeTransform(o){const a=je();ht(a,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!Fn(u.latestValues))continue;zl(u.latestValues)&&u.updateSnapshot();const h=je(),d=u.measurePageBox();ht(h,d),yh(a,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,h)}return Fn(this.latestValues)&&yh(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Be.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==c;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:d,layoutId:m}=this.options;if(!(!this.layout||!(d||m))){if(this.resolvedRelativeTargetAt=Be.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=je(),this.relativeTargetOrigin=je(),Ps(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),ht(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=je(),this.targetWithTransforms=je()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),a1(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ht(this.target,this.layout.layoutBox),h0(this.target,this.targetDelta)):ht(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=je(),this.relativeTargetOrigin=je(),Ps(this.relativeTargetOrigin,this.target,g.target),ht(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Vn.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||zl(this.parent.latestValues)||d0(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),c=!!this.resumingFrom||this!==a;let u=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(u=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===Be.timestamp&&(u=!1),u)return;const{layout:h,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||d))return;ht(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,g=this.treeScale.y;g1(this.layoutCorrected,this.treeScale,this.path,c),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox);const{target:x}=a;if(!x){this.projectionTransform&&(this.projectionDelta=Pr(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Pr(),this.projectionDeltaWithTransform=Pr());const b=this.projectionTransform;ks(this.projectionDelta,this.layoutCorrected,x,this.latestValues),this.projectionTransform=bh(this.projectionDelta,this.treeScale),(this.projectionTransform!==b||this.treeScale.x!==m||this.treeScale.y!==g)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",x)),Vn.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,a=!1){const c=this.snapshot,u=c?c.latestValues:{},h={...this.latestValues},d=Pr();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const m=je(),g=c?c.source:void 0,x=this.layout?this.layout.source:void 0,b=g!==x,k=this.getStack(),p=!k||k.members.length<=1,f=!!(b&&!p&&this.options.crossfade===!0&&!this.path.some(sb));this.animationProgress=0;let y;this.mixTargetDelta=w=>{const S=w/1e3;Th(d.x,o.x,S),Th(d.y,o.y,S),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Ps(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),rb(this.relativeTarget,this.relativeTargetOrigin,m,S),y&&I1(this.relativeTarget,y)&&(this.isProjectionDirty=!1),y||(y=je()),ht(y,this.relativeTarget)),b&&(this.animationValues=h,A1(h,u,this.latestValues,S,f,p)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=S},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Zt(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=de.update(()=>{Hi.hasAnimatedSinceResize=!0,this.currentAnimation=z1(0,Ch,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Ch),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:c,layout:u,latestValues:h}=o;if(!(!a||!c||!u)){if(this!==o&&this.layout&&u&&b0(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||je();const d=ct(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+d;const m=ct(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+m}ht(a,c),Tr(a,h),ks(this.projectionDeltaWithTransform,this.layoutCorrected,a,h)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new O1),this.sharedNodes.get(o).add(a);const u=a.options.initialPromotionConfig;a.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:c}=o;if((c.rotate||c.rotateX||c.rotateY||c.rotateZ)&&(a=!0),!a)return;const u={};for(let h=0;h<Sh.length;h++){const d="rotate"+Sh[h];c[d]&&(u[d]=c[d],o.setStaticValue(d,0))}o.render();for(const h in u)o.setStaticValue(h,u[h]);o.scheduleRender()}getProjectionStyles(o){var a,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return U1;const u={visibility:""},h=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=Bi(o==null?void 0:o.pointerEvents)||"",u.transform=h?h(this.latestValues,""):"none",u;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const b={};return this.options.layoutId&&(b.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,b.pointerEvents=Bi(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Fn(this.latestValues)&&(b.transform=h?h({},""):"none",this.hasProjected=!1),b}const m=d.animationValues||d.latestValues;this.applyTransformsToTarget(),u.transform=bh(this.projectionDeltaWithTransform,this.treeScale,m),h&&(u.transform=h(m,u.transform));const{x:g,y:x}=this.projectionDelta;u.transformOrigin=`${g.origin*100}% ${x.origin*100}% 0`,d.animationValues?u.opacity=d===this?(c=(a=m.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:u.opacity=d===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const b in po){if(m[b]===void 0)continue;const{correct:k,applyTo:p}=po[b],f=u.transform==="none"?m[b]:k(m[b],d);if(p){const y=p.length;for(let w=0;w<y;w++)u[p[w]]=f}else u[b]=f}return this.options.layoutId&&(u.pointerEvents=d===this?Bi(o==null?void 0:o.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(kh),this.root.sharedNodes.clear()}}}function q1(e){e.updateLayout()}function W1(e){var t;const n=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=e.layout,{animationType:i}=e.options,o=n.source!==e.layout.source;i==="size"?mt(d=>{const m=o?n.measuredBox[d]:n.layoutBox[d],g=ct(m);m.min=r[d].min,m.max=m.min+g}):b0(i,n.layoutBox,r)&&mt(d=>{const m=o?n.measuredBox[d]:n.layoutBox[d],g=ct(r[d]);m.max=m.min+g,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[d].max=e.relativeTarget[d].min+g)});const a=Pr();ks(a,r,n.layoutBox);const c=Pr();o?ks(c,e.applyTransform(s,!0),n.measuredBox):ks(c,r,n.layoutBox);const u=!y0(a);let h=!1;if(!e.resumeFrom){const d=e.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:m,layout:g}=d;if(m&&g){const x=je();Ps(x,n.layoutBox,m.layoutBox);const b=je();Ps(b,r,g.layoutBox),x0(x,b)||(h=!0),d.options.layoutRoot&&(e.relativeTarget=b,e.relativeTargetOrigin=x,e.relativeParent=d)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:c,layoutDelta:a,hasLayoutChanged:u,hasRelativeTargetChanged:h})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function K1(e){Vn.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function Q1(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function X1(e){e.clearSnapshot()}function kh(e){e.clearMeasurements()}function J1(e){e.isLayoutDirty=!1}function Y1(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function Ph(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function Z1(e){e.resolveTargetDelta()}function eb(e){e.calcProjection()}function tb(e){e.resetRotation()}function nb(e){e.removeLeadSnapshot()}function Th(e,t,n){e.translate=xe(t.translate,0,n),e.scale=xe(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function jh(e,t,n,r){e.min=xe(t.min,n.min,r),e.max=xe(t.max,n.max,r)}function rb(e,t,n,r){jh(e.x,t.x,n.x,r),jh(e.y,t.y,n.y,r)}function sb(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const ib={duration:.45,ease:[.4,0,.1,1]},Eh=e=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(e),Nh=Eh("applewebkit/")&&!Eh("chrome/")?Math.round:ke;function Ah(e){e.min=Nh(e.min),e.max=Nh(e.max)}function ob(e){Ah(e.x),Ah(e.y)}function b0(e,t,n){return e==="position"||e==="preserve-aspect"&&!Bl(wh(t),wh(n),.2)}const ab=w0({attachResizeListener:(e,t)=>Ut(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Ra={current:void 0},S0=w0({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Ra.current){const e=new ab({});e.mount(window),e.setOptions({layoutScroll:!0}),Ra.current=e}return Ra.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),lb={pan:{Feature:k1},drag:{Feature:C1,ProjectionNode:S0,MeasureLayout:p0}},cb=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function ub(e){const t=cb.exec(e);if(!t)return[,];const[,n,r]=t;return[n,r]}function $l(e,t,n=1){const[r,s]=ub(e);if(!r)return;const i=window.getComputedStyle(t).getPropertyValue(r);if(i){const o=i.trim();return s0(o)?parseFloat(o):o}else return Dl(s)?$l(s,t,n+1):s}function db(e,{...t},n){const r=e.current;if(!(r instanceof Element))return{target:t,transitionEnd:n};n&&(n={...n}),e.values.forEach(s=>{const i=s.get();if(!Dl(i))return;const o=$l(i,r);o&&s.set(o)});for(const s in t){const i=t[s];if(!Dl(i))continue;const o=$l(i,r);o&&(t[s]=o,n||(n={}),n[s]===void 0&&(n[s]=i))}return{target:t,transitionEnd:n}}const hb=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),C0=e=>hb.has(e),mb=e=>Object.keys(e).some(C0),Mh=e=>e===lr||e===X,Lh=(e,t)=>parseFloat(e.split(", ")[t]),_h=(e,t)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const s=r.match(/^matrix3d\((.+)\)$/);if(s)return Lh(s[1],t);{const i=r.match(/^matrix\((.+)\)$/);return i?Lh(i[1],e):0}},fb=new Set(["x","y","z"]),pb=Zs.filter(e=>!fb.has(e));function gb(e){const t=[];return pb.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t.length&&e.render(),t}const zr={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:_h(4,13),y:_h(5,14)};zr.translateX=zr.x;zr.translateY=zr.y;const vb=(e,t,n)=>{const r=t.measureViewportBox(),s=t.current,i=getComputedStyle(s),{display:o}=i,a={};o==="none"&&t.setStaticValue("display",e.display||"block"),n.forEach(u=>{a[u]=zr[u](r,i)}),t.render();const c=t.measureViewportBox();return n.forEach(u=>{const h=t.getValue(u);h&&h.jump(a[u]),e[u]=zr[u](c,i)}),e},yb=(e,t,n={},r={})=>{t={...t},r={...r};const s=Object.keys(t).filter(C0);let i=[],o=!1;const a=[];if(s.forEach(c=>{const u=e.getValue(c);if(!e.hasValue(c))return;let h=n[c],d=is(h);const m=t[c];let g;if(vo(m)){const x=m.length,b=m[0]===null?1:0;h=m[b],d=is(h);for(let k=b;k<x&&m[k]!==null;k++)g?iu(is(m[k])===g):g=is(m[k])}else g=is(m);if(d!==g)if(Mh(d)&&Mh(g)){const x=u.get();typeof x=="string"&&u.set(parseFloat(x)),typeof m=="string"?t[c]=parseFloat(m):Array.isArray(m)&&g===X&&(t[c]=m.map(parseFloat))}else d!=null&&d.transform&&(g!=null&&g.transform)&&(h===0||m===0)?h===0?u.set(g.transform(h)):t[c]=d.transform(m):(o||(i=gb(e),o=!0),a.push(c),r[c]=r[c]!==void 0?r[c]:t[c],u.jump(m))}),a.length){const c=a.indexOf("height")>=0?window.pageYOffset:null,u=vb(t,e,a);return i.length&&i.forEach(([h,d])=>{e.getValue(h).set(d)}),e.render(),zo&&c!==null&&window.scrollTo({top:c}),{target:u,transitionEnd:r}}else return{target:t,transitionEnd:r}};function xb(e,t,n,r){return mb(t)?yb(e,t,n,r):{target:t,transitionEnd:r}}const wb=(e,t,n,r)=>{const s=db(e,t,r);return t=s.target,r=s.transitionEnd,xb(e,t,n,r)},ql={current:null},k0={current:!1};function bb(){if(k0.current=!0,!!zo)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>ql.current=e.matches;e.addListener(t),t()}else ql.current=!1}function Sb(e,t,n){const{willChange:r}=t;for(const s in t){const i=t[s],o=n[s];if(st(i))e.addValue(s,i),bo(r)&&r.add(s);else if(st(o))e.addValue(s,Hr(i,{owner:e})),bo(r)&&r.remove(s);else if(o!==i)if(e.hasValue(s)){const a=e.getValue(s);!a.hasAnimated&&a.set(i)}else{const a=e.getStaticValue(s);e.addValue(s,Hr(a!==void 0?a:i,{owner:e}))}}for(const s in n)t[s]===void 0&&e.removeValue(s);return t}const Dh=new WeakMap,P0=Object.keys($s),Cb=P0.length,Rh=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],kb=Xc.length;class Pb{constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:s,visualState:i},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>de.render(this.render,!1,!0);const{latestValues:a,renderState:c}=i;this.latestValues=a,this.baseTarget={...a},this.initialValues=n.initial?{...a}:{},this.renderState=c,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=o,this.isControllingVariants=$o(n),this.isVariantNode=cp(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:u,...h}=this.scrapeMotionValuesFromProps(n,{});for(const d in h){const m=h[d];a[d]!==void 0&&st(m)&&(m.set(a[d],!1),bo(u)&&u.add(d))}}scrapeMotionValuesFromProps(t,n){return{}}mount(t){this.current=t,Dh.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),k0.current||bb(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:ql.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Dh.delete(this.current),this.projection&&this.projection.unmount(),Zt(this.notifyUpdate),Zt(this.render),this.valueSubscriptions.forEach(t=>t()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features)this.features[t].unmount();this.current=null}bindToMotionValue(t,n){const r=ar.has(t),s=n.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&de.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),i=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,()=>{s(),i()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}loadFeatures({children:t,...n},r,s,i){let o,a;for(let c=0;c<Cb;c++){const u=P0[c],{isEnabled:h,Feature:d,ProjectionNode:m,MeasureLayout:g}=$s[u];m&&(o=m),h(n)&&(!this.features[u]&&d&&(this.features[u]=new d(this)),g&&(a=g))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:c,layout:u,drag:h,dragConstraints:d,layoutScroll:m,layoutRoot:g}=n;this.projection.setOptions({layoutId:c,layout:u,alwaysMeasureLayout:!!h||d&&Cr(d),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof u=="string"?u:"both",initialPromotionConfig:i,layoutScroll:m,layoutRoot:g})}return a}updateFeatures(){for(const t in this.features){const n=this.features[t];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):je()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}makeTargetAnimatable(t,n=!0){return this.makeTargetAnimatableFromInstance(t,this.props,n)}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<Rh.length;r++){const s=Rh[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i=t["on"+s];i&&(this.propEventSubscriptions[s]=this.on(s,i))}this.prevMotionValues=Sb(this,this.scrapeMotionValuesFromProps(t,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(t=!1){if(t)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const n={};for(let r=0;r<kb;r++){const s=Xc[r],i=this.props[s];(Us(i)||i===!1)&&(n[s]=i)}return n}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){n!==this.values.get(t)&&(this.removeValue(t),this.bindToMotionValue(t,n)),this.values.set(t,n),this.latestValues[t]=n.get()}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=Hr(n,{owner:this}),this.addValue(t,r)),r}readValue(t){var n;return this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(n=this.getBaseTargetFromProps(this.props,t))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,t,this.options)}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var n;const{initial:r}=this.props,s=typeof r=="string"||typeof r=="object"?(n=su(this.props,r))===null||n===void 0?void 0:n[t]:void 0;if(r&&s!==void 0)return s;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!st(i)?i:this.initialValues[t]!==void 0&&s===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new fu),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class T0 extends Pb{sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}makeTargetAnimatableFromInstance({transition:t,transitionEnd:n,...r},{transformValues:s},i){let o=Hw(r,t||{},this);if(s&&(n&&(n=s(n)),r&&(r=s(r)),o&&(o=s(o))),i){Vw(this,r,o);const a=wb(this,r,o,n);n=a.transitionEnd,r=a.target}return{transition:t,transitionEnd:n,...r}}}function Tb(e){return window.getComputedStyle(e)}class jb extends T0{constructor(){super(...arguments),this.type="html"}readValueFromInstance(t,n){if(ar.has(n)){const r=cu(n);return r&&r.default||0}else{const r=Tb(t),s=(mp(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(t,{transformPagePoint:n}){return m0(t,n)}build(t,n,r,s){Zc(t,n,r,s.transformTemplate)}scrapeMotionValuesFromProps(t,n){return ru(t,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;st(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(t,n,r,s){xp(t,n,r,s)}}class Eb extends T0{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(ar.has(n)){const r=cu(n);return r&&r.default||0}return n=wp.has(n)?n:Kc(n),t.getAttribute(n)}measureInstanceViewportBox(){return je()}scrapeMotionValuesFromProps(t,n){return Sp(t,n)}build(t,n,r,s){tu(t,n,r,this.isSVGTag,s.transformTemplate)}renderInstance(t,n,r,s){bp(t,n,r,s)}mount(t){this.isSVGTag=nu(t.tagName),super.mount(t)}}const Nb=(e,t)=>Yc(e)?new Eb(t,{enableHardwareAcceleration:!1}):new jb(t,{enableHardwareAcceleration:!0}),Ab={layout:{ProjectionNode:S0,MeasureLayout:p0}},Mb={...r1,...Cx,...lb,...Ab},M=Ly((e,t)=>ux(e,t,Mb,Nb));function j0(){const e=v.useRef(!1);return Wc(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function Lb(){const e=j0(),[t,n]=v.useState(0),r=v.useCallback(()=>{e.current&&n(t+1)},[t]);return[v.useCallback(()=>de.postRender(r),[r]),t]}class _b extends v.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function Db({children:e,isPresent:t}){const n=v.useId(),r=v.useRef(null),s=v.useRef({width:0,height:0,top:0,left:0});return v.useInsertionEffect(()=>{const{width:i,height:o,top:a,left:c}=s.current;if(t||!r.current||!i||!o)return;r.current.dataset.motionPopId=n;const u=document.createElement("style");return document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${i}px !important;
            height: ${o}px !important;
            top: ${a}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[t]),v.createElement(_b,{isPresent:t,childRef:r,sizeRef:s},v.cloneElement(e,{ref:r}))}const Ia=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:i,mode:o})=>{const a=Cp(Rb),c=v.useId(),u=v.useMemo(()=>({id:c,initial:t,isPresent:n,custom:s,onExitComplete:h=>{a.set(h,!0);for(const d of a.values())if(!d)return;r&&r()},register:h=>(a.set(h,!1),()=>a.delete(h))}),i?void 0:[n]);return v.useMemo(()=>{a.forEach((h,d)=>a.set(d,!1))},[n]),v.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),o==="popLayout"&&(e=v.createElement(Db,{isPresent:n},e)),v.createElement(Ho.Provider,{value:u},e)};function Rb(){return new Map}function Ib(e){return v.useEffect(()=>()=>e(),[])}const Bn=e=>e.key||"";function Ob(e,t){e.forEach(n=>{const r=Bn(n);t.set(r,n)})}function Gb(e){const t=[];return v.Children.forEach(e,n=>{v.isValidElement(n)&&t.push(n)}),t}const Ee=({children:e,custom:t,initial:n=!0,onExitComplete:r,exitBeforeEnter:s,presenceAffectsLayout:i=!0,mode:o="sync"})=>{const a=v.useContext(Jc).forceRender||Lb()[0],c=j0(),u=Gb(e);let h=u;const d=v.useRef(new Map).current,m=v.useRef(h),g=v.useRef(new Map).current,x=v.useRef(!0);if(Wc(()=>{x.current=!1,Ob(u,g),m.current=h}),Ib(()=>{x.current=!0,g.clear(),d.clear()}),x.current)return v.createElement(v.Fragment,null,h.map(f=>v.createElement(Ia,{key:Bn(f),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:i,mode:o},f)));h=[...h];const b=m.current.map(Bn),k=u.map(Bn),p=b.length;for(let f=0;f<p;f++){const y=b[f];k.indexOf(y)===-1&&!d.has(y)&&d.set(y,void 0)}return o==="wait"&&d.size&&(h=[]),d.forEach((f,y)=>{if(k.indexOf(y)!==-1)return;const w=g.get(y);if(!w)return;const S=b.indexOf(y);let C=f;if(!C){const P=()=>{d.delete(y);const T=Array.from(g.keys()).filter(j=>!k.includes(j));if(T.forEach(j=>g.delete(j)),m.current=u.filter(j=>{const E=Bn(j);return E===y||T.includes(E)}),!d.size){if(c.current===!1)return;a(),r&&r()}};C=v.createElement(Ia,{key:Bn(w),isPresent:!1,onExitComplete:P,custom:t,presenceAffectsLayout:i,mode:o},w),d.set(y,C)}h.splice(S,0,C)}),h=h.map(f=>{const y=f.key;return d.has(y)?f:v.createElement(Ia,{key:Bn(f),isPresent:!0,presenceAffectsLayout:i,mode:o},f)}),v.createElement(v.Fragment,null,d.size?h:h.map(f=>v.cloneElement(f)))},In={I:"I",O:"O",T:"T",S:"S",Z:"Z",J:"J",L:"L"},E0={[In.I]:{shape:[[0,0,0,0],[1,1,1,1],[0,0,0,0],[0,0,0,0]],color:"#00f5ff",emoji:"",name:"I-Piece"},[In.O]:{shape:[[1,1],[1,1]],color:"#ffff00",emoji:"",name:"O-Piece"},[In.T]:{shape:[[0,1,0],[1,1,1],[0,0,0]],color:"#a000f0",emoji:"",name:"T-Piece"},[In.S]:{shape:[[0,1,1],[1,1,0],[0,0,0]],color:"#00f000",emoji:"",name:"S-Piece"},[In.Z]:{shape:[[1,1,0],[0,1,1],[0,0,0]],color:"#f00000",emoji:"",name:"Z-Piece"},[In.J]:{shape:[[1,0,0],[1,1,1],[0,0,0]],color:"#0000f0",emoji:"",name:"J-Piece"},[In.L]:{shape:[[0,0,1],[1,1,1],[0,0,0]],color:"#ff7f00",emoji:"",name:"L-Piece"}};let $t={...E0};function Ih(e){if(!e||!e.pieces){$t={...E0};return}Object.keys($t).forEach(t=>{e.pieces[t]&&($t[t]={...$t[t],color:e.pieces[t].color,emoji:e.pieces[t].emoji})})}if(typeof window<"u"){window.addEventListener("themeEquipped",e=>{Ih(e.detail.theme)});try{const e=localStorage.getItem("cat-tetris-shopInventory");if(e){const n=JSON.parse(e).equippedTheme;qc(()=>Promise.resolve().then(()=>LS),void 0).then(({PIECE_THEMES:r})=>{r[n]&&Ih(r[n])})}}catch{}}function Dr(e){return{"#00f5ff":"#00f5ff","#ffff00":"#ffff00","#a000f0":"#a000f0","#00f000":"#00f000","#f00000":"#f00000","#0000f0":"#0000f0","#ff7f00":"#ff7f00"}[e]||e}class Fb{constructor(){this.events={}}on(t,n){this.events[t]||(this.events[t]=[]),this.events[t].push(n)}off(t,n){this.events[t]&&(this.events[t]=this.events[t].filter(r=>r!==n))}emit(t,n){this.events[t]&&this.events[t].forEach(r=>{try{r(n)}catch(s){typeof window<"u"&&window.__ERROR_LOGGER__&&window.__ERROR_LOGGER__.logError("EventEmitter",`emit:${t}`,s.message,{event:t,stack:s.stack})}})}clear(){this.events={}}}const O=new Fb,F={GAME_INITIALIZED:"game_initialized",PIECE_MOVED:"piece_moved",PIECE_ROTATED:"piece_rotated",PIECE_PLACED:"piece_placed",PIECE_HELD:"piece_held",HARD_DROP:"hard_drop",LINE_CLEARED:"line_cleared",T_SPIN:"t_spin",BACK_TO_BACK:"back_to_back",SCORE_UPDATED:"score_updated",LEVEL_UP:"level_up",GAME_OVER:"game_over",GAME_PAUSED:"game_paused",GAME_RESUMED:"game_resumed"},zi=2;function Vb({text:e,color:t,id:n}){return l.jsx(M.div,{initial:{opacity:1,y:0,scale:.5},animate:{opacity:0,y:-60,scale:1.3},exit:{opacity:0},transition:{duration:1.2,ease:"easeOut"},className:"absolute left-1/2 top-1/3 -translate-x-1/2 pointer-events-none font-black text-lg drop-shadow-lg whitespace-nowrap",style:{color:t,zIndex:50,textShadow:`0 0 12px ${t}`},children:e},n)}function Bb({lines:e}){const t=v.useMemo(()=>{const n=[];return e.forEach(r=>{for(let s=0;s<14;s++)n.push({id:`${r}-${s}`,startX:Math.random()*220,startY:(r+zi)*21+10,endX:(Math.random()-.5)*300,endY:-(Math.random()*120+40),size:Math.random()*5+2,color:["#FFD700","#FF6B6B","#4ECDC4","#A78BFA","#F472B6","#34D399"][Math.floor(Math.random()*6)],delay:Math.random()*.15})}),n},[e]);return l.jsx("div",{className:"absolute inset-0 pointer-events-none overflow-visible",style:{zIndex:35},children:t.map(n=>l.jsx(M.div,{initial:{x:n.startX,y:n.startY,scale:1,opacity:1},animate:{x:n.startX+n.endX,y:n.startY+n.endY,scale:0,opacity:0},transition:{duration:.8,delay:n.delay,ease:"easeOut"},className:"absolute rounded-full",style:{width:n.size,height:n.size,backgroundColor:n.color,boxShadow:`0 0 ${n.size+4}px ${n.color}`}},n.id))})}const Hb=({board:e,currentPiece:t,dropPreview:n,gameOver:r})=>{var p;const[s,i]=v.useState([]),[o,a]=v.useState([]),[c,u]=v.useState(0),h=v.useRef(0),d=v.useRef(null),m=v.useRef([]);v.useEffect(()=>()=>{m.current.forEach(clearTimeout),m.current=[]},[]);const g=v.useCallback((f,y)=>{const w=setTimeout(()=>{m.current=m.current.filter(S=>S!==w),f()},y);return m.current.push(w),w},[]),x=((p=e==null?void 0:e[0])==null?void 0:p.length)||10,b=v.useMemo(()=>[...Array(zi).fill(null).map(()=>Array(x).fill(null)),...e],[e,x]);v.useEffect(()=>{const f=()=>{u(.12),g(()=>u(0),150)};return O.on("hard_drop",f),()=>O.off("hard_drop",f)},[g]),v.useEffect(()=>{const f=[];for(let y=0;y<e.length;y++)e[y]&&e[y].every(w=>w!==null)&&f.push(y);f.length>0&&(i(f),u(f.length>=4?.3:.18),g(()=>u(0),250),g(()=>i([]),800))},[e]),v.useEffect(()=>{const f=y=>{const w=(y==null?void 0:y.linesCleared)||0;if(w<=0)return;let S,C;w===1?(S="Single",C="#4ECDC4"):w===2?(S="Double!",C="#A78BFA"):w===3?(S="Triple!!",C="#F472B6"):(S=" TETRIS!! ",C="#FFD700");const P=++h.current;a(T=>[...T,{id:P,text:S,color:C}]),g(()=>a(T=>T.filter(j=>j.id!==P)),1400)};return O.on("line_cleared",f),()=>O.off("line_cleared",f)},[g]),v.useEffect(()=>{const f=y=>{const w=(y==null?void 0:y.combo)||0;if(w>=2){const S=++h.current;a(C=>[...C,{id:S,text:`${w}x Combo! `,color:"#FF6B6B"}]),g(()=>a(C=>C.filter(P=>P.id!==S)),1400)}};return O.on("score_updated",f),()=>O.off("score_updated",f)},[g]),v.useEffect(()=>{const f=()=>{const y=++h.current;a(w=>[...w,{id:y,text:" Back-to-Back!",color:"#FBBF24"}]),g(()=>a(w=>w.filter(S=>S.id!==y)),1400)};return O.on("back_to_back",f),()=>O.off("back_to_back",f)},[g]),v.useEffect(()=>{const f=()=>{const y=++h.current;a(w=>[...w,{id:y,text:"T-SPIN!",color:"#C084FC"}]),g(()=>a(w=>w.filter(S=>S.id!==y)),1400)};return O.on("t_spin",f),()=>O.off("t_spin",f)},[g]);const k=v.useCallback((f,y,w,S)=>{let C=null,P=null;const T=s.includes(w);if(t){const{position:{x:j,y:E},shape:L}=t;for(let A=0;A<L.length;A++){for(let N=0;N<L[A].length;N++)L[A][N]&&j+N===y&&E+A===w&&(C=t);if(C)break}}if(n&&n!==t){const{position:{x:j,y:E},shape:L}=n;for(let A=0;A<L.length;A++){for(let N=0;N<L[A].length;N++)L[A][N]&&j+N===y&&E+A===w&&(P=n);if(P)break}}if(C){const j=Dr(C.color);return l.jsx("div",{className:"tetris-cell rounded-sm flex items-center justify-center border border-white/40",style:{backgroundColor:j,boxShadow:`0 0 6px ${j}80, inset 0 1px 0 rgba(255,255,255,0.3)`},children:l.jsx("span",{className:"text-xs drop-shadow",children:C.emoji})},`${y}-${w}`)}if(P){const j=Dr(P.color);return l.jsx("div",{className:"tetris-cell rounded-sm flex items-center justify-center border-2 border-dashed",style:{borderColor:j+"50",backgroundColor:j+"12"},children:l.jsx("span",{className:"text-xs opacity-30",children:P.emoji})},`${y}-${w}`)}if(f){const j=Dr(f.color);return l.jsx("div",{className:`cat-block tetris-cell rounded-sm flex items-center justify-center ${T?"line-clearing":""}`,style:{backgroundColor:T?"#fff":j,borderColor:"rgba(255, 255, 255, 0.35)",boxShadow:T?`0 0 20px #fff, 0 0 40px ${j}`:"inset 0 1px 0 rgba(255,255,255,0.25), 0 1px 3px rgba(0,0,0,0.3)",transform:T?"scale(1.1)":void 0,transition:"all 0.15s ease-out",zIndex:T?10:1},children:l.jsx("span",{className:`text-xs ${T?"opacity-0":""}`,children:f.emoji})},`${y}-${w}`)}return l.jsx("div",{className:`tetris-cell rounded-sm ${S?"bg-gray-900/30 border border-gray-500/10":"border border-white/[0.06] bg-white/[0.02]"}`},`${y}-${w}`)},[t,n,s]);return l.jsx("div",{className:"flex flex-col items-center",children:l.jsx("div",{className:"relative bg-gray-900/60 p-3 rounded-xl border-2 border-white/15 shadow-2xl overflow-hidden flex-shrink-0",ref:d,style:{width:"fit-content"},children:l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"tetris-grid",children:b.map((f,y)=>{const w=y-zi,S=y<zi;return f.map((C,P)=>k(C,P,w,S))})}),s.length>0&&l.jsx(l.Fragment,{children:l.jsx(Bb,{lines:s})}),l.jsx(Ee,{children:c>0&&l.jsx(M.div,{initial:{opacity:c},animate:{opacity:0},exit:{opacity:0},transition:{duration:.3},className:"absolute inset-0 rounded-lg pointer-events-none",style:{background:"white",zIndex:20}},"flash")}),l.jsx(Ee,{children:o.map(f=>l.jsx(Vb,{id:f.id,text:f.text,color:f.color},f.id))}),r&&l.jsx(M.div,{initial:{opacity:0},animate:{opacity:1},className:"absolute inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center rounded-lg",style:{zIndex:50},children:l.jsxs(M.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",damping:12},className:"text-center",children:[l.jsx("div",{className:"text-5xl mb-2",children:""}),l.jsx("div",{className:"text-white font-black text-xl drop-shadow-lg",children:"Game Over!"})]})})]})})})},En=ce.memo(Hb);class zb{constructor(){this.HIGH_SCORE_KEY="tetris_high_score"}getHighScore(){try{const t=localStorage.getItem(this.HIGH_SCORE_KEY);return t?parseInt(t,10):0}catch{return 0}}saveHighScore(t){try{const n=this.getHighScore();return t>n?(localStorage.setItem(this.HIGH_SCORE_KEY,t.toString()),!0):!1}catch{return!1}}clearHighScore(){try{localStorage.removeItem(this.HIGH_SCORE_KEY)}catch{}}}const Oh=new zb,N0=v.createContext(),A0="cattetris_language",Wl=[{code:"en",label:" English",flag:""},{code:"pt",label:" Portugus",flag:""},{code:"es",label:" Espaol",flag:""},{code:"ja",label:" ",flag:""},{code:"fr",label:" Franais",flag:""}],Ub={"menu.title":" Cat Tetris","menu.subtitle":"Stack blocks with your feline friends","menu.continue":" Continue","menu.continueInfo":"Level {level}  {points} pts","menu.newGame":"New Game","menu.play":" Play","menu.vsAI":"VS AI","menu.vsAISub":"Challenge the bot","menu.tutorial":"Tutorial","menu.tutorialSub":"Learn to play","menu.creator":"Creator","menu.creatorSub":"Train T-Spins","menu.aiExpert":"AI Expert","menu.aiExpertSub":"Watch the AI play","menu.shop":"Shop","menu.missions":"Missions","menu.achievements":"Achievements","menu.settings":"Settings","menu.install":" Install","menu.language":" Language","game.held":"Hold","game.heldEmpty":"Empty","game.next":"Next","game.nextLabel":"Next:","game.backToMenu":"Back to Menu","game.level":"Lv.{level}","game.lines":"{n} lines","game.accelerate":" Speed Up","game.hold":" Hold","game.loading":"Loading...","game.scoreTitle":" Score","game.points":"Points:","game.record":"Record:","game.levelLabel":"Level:","game.linesLabel":"Lines:","game.comboLabel":"Combo:","gameOver.title":"Game Over!","gameOver.points":"{score} points","gameOver.msgLow":"Don't give up! Every try makes you better! ","gameOver.msgMed":"Nice work! Keep practicing! ","gameOver.msgHigh":"Excellent! You're getting really good! ","gameOver.msgTop":"Amazing! You're a Cat Tetris master! ","gameOver.playAgain":" Play Again","gameOver.backToMenu":" Back to Menu","gameOver.tip1":" Tip: Use the shadow to plan ahead!","gameOver.tip2":" Try combos for more points!","settings.title":" Settings","settings.audio":"Audio","settings.volume":"Master Volume","settings.soundEnabled":"Sound Enabled","settings.handling":"Handling (DAS/ARR)","settings.dasLabel":"DAS (Delayed Auto-Shift)","settings.dasHelp":"Delay before piece auto-moves when holding a key. Pro: 83-100ms","settings.arrLabel":"ARR (Auto-Repeat Rate)","settings.arrHelp":"Repeat speed when holding. 0 = teleport. Pro: 0-2ms","settings.controls":"Controls","settings.ctrlMove":"Move","settings.ctrlRotateR":"Rotate ","settings.ctrlRotateL":"Rotate ","settings.ctrlSoftDrop":"Soft drop","settings.ctrlHardDrop":"Hard drop","settings.ctrlHold":"Hold","settings.ctrlPause":"Pause","settings.visual":"Visual","settings.particles":"Particle Effects","settings.save":"Save","settings.cancel":"Cancel","shop.title":" Theme Shop","shop.subtitle":"Customize your Tetris pieces","shop.loading":"Loading shop...","shop.errorLoading":" Error loading themes","shop.yourFish":"Your Fish","shop.themesUnlocked":"Themes Unlocked","shop.collection":"Collection","shop.totalSpent":"Total Spent","shop.equipped":" Equipped","shop.premium":" Premium","shop.free":"Free","shop.equip":"Equip","shop.inUse":"In Use","shop.close":"Close","shop.purchaseSuccess":" {name} purchased!","shop.equipSuccess":" {name} equipped!","achievements.title":" Achievements","achievements.subtitle":"Unlock achievements to earn  Fish","achievements.loading":"Loading achievements...","achievements.unlocked":"Unlocked","achievements.complete":"Complete","achievements.earned":"Earned","achievements.total":"Total","achievements.filterAll":"All","achievements.progress":"Progress","achievements.unlockedAt":"Unlocked on {date}","achievements.noneInCategory":"No achievements in this category","achievements.unlockBanner":" ACHIEVEMENT UNLOCKED!","achievements.legendary":" Legendary Achievement! ","missions.title":" Daily Missions","missions.subtitle":"Complete missions to earn  Fish","missions.loading":"Loading missions...","missions.dailyProgress":"Daily Progress:","missions.completedOf":"{completed}/{total} complete","missions.rewardsAvailable":"Rewards Available:","missions.claimed":"(Claimed)","missions.easy":" Easy","missions.medium":" Medium","missions.hard":" Hard","missions.progress":"Progress","missions.claimReward":" Claim Reward","missions.resetNote":"Missions reset daily at 00:00","missions.allCompleted":" All missions complete! ","missions.claimSuccess":" Reward claimed: +{reward} ","multiplayer.title":" Multiplayer","multiplayer.subtitle":"Challenge friends or face the AI","multiplayer.errorLoading":" Error loading multiplayer","multiplayer.matchesVsAI":"Matches vs AI","multiplayer.wins":"Wins","multiplayer.winRate":"Win Rate","multiplayer.player":"player","multiplayer.players":"players","multiplayer.comingSoon":" COMING SOON","multiplayer.back":" Back","multiplayer.yourName":"Your Name:","multiplayer.aiDifficulty":"AI Difficulty:","multiplayer.ai1Left":" AI 1 (Left):","multiplayer.ai2Right":" AI 2 (Right):","multiplayer.startMatch":" Start Match","multiplayer.player1":"Player 1","multiplayer.player2":"Player 2","gameModes.title":" Game Modes","gameModes.subtitle":"Choose your challenge","gameModes.loading":"Loading modes...","gameModes.errorLoading":" Error loading modes","gameModes.selected":" Selected","gameModes.goalLines":" Goal: {n} lines","gameModes.timeLimit":" Time: {time}","gameModes.gameOverYes":" Game Over","gameModes.gameOverNo":" No Game Over","gameModes.speedUp":" Speed increases","gameModes.speedFixed":" Fixed speed","gameModes.startLevel":" Start: Level {n}","gameModes.relaxed":" Relaxed mode","gameModes.yourRecords":"Your records:","gameModes.bestScore":"Best Score","gameModes.bestTime":"Best Time","gameModes.mostLines":"Most Lines","gameModes.gamesPlayed":"{n} games played","gameModes.noRecords":" No records yet","gameModes.play":" Play","tutorial.title":" Tutorial","tutorial.subtitle":"Learn from zero to PRO","tutorial.close":" Back","tutorial.overallProgress":"Overall progress","tutorial.fundamentals":"Fundamentals","tutorial.fundamentalsDesc":"Tetris basics","tutorial.intermediate":"Intermediate","tutorial.intermediateDesc":"T-spins and combos","tutorial.advanced":"Advanced","tutorial.advancedDesc":"Setups and strategies","tutorial.pro":"Professional","tutorial.proDesc":"PRO techniques","tutorial.noLessons":"No lessons in this module","tutorial.badgesEarned":"Badges earned","controls.hint":"  move |  rotate |  soft | Space = hard drop | C = hold","controls.continue":" Continue","controls.pause":" Pause","controls.touchFriendly":" Touch-friendly controls","controls.useShadow":" Use the shadow to plan!","gamepad.connected":"{n} Controller Connected","gamepad.connectedPlural":"{n} Controllers Connected","gamepad.ready":"Ready to play!","gamepad.showControls":"Show controls","gamepad.controlsTitle":" Controls:","gamepad.move":"Move","gamepad.accelerate":"Speed Up","gamepad.hardDrop":"Hard Drop","gamepad.rotateRight":"Rotate ","gamepad.rotateLeft":"Rotate ","gamepad.hold":"Hold","gamepad.pause":"Pause","gamepad.analogNote":" Left Analog Stick also works!","gamepad.triggerNote":" L2/R2 also rotate","gamepad.backNote":" Back/Select = Back to menu","gamepad.controllerLabel":"Controller {n}:","gamepad.buttons":"{n} buttons","gamepad.axes":"{n} axes","gamepad.vibration":" Vibration","reward.lessonComplete":"Lesson Complete!","reward.fish":"Fish","reward.xp":"XP","reward.badge":"Badge","pwa.notAvailableTitle":"PWA not available","pwa.notAvailableText":"This device does not support PWA installation or the app is already installed.","pwa.understood":" Got it","pwa.installTitle":"Install Cat Tetris","pwa.installText":"Install Cat Tetris on your home screen to play offline anytime! Works like a native app.","pwa.quickAccess":" Quick Access","pwa.quickAccessDesc":"Home screen icon","pwa.offline":" Offline","pwa.offlineDesc":"Play without internet","pwa.performance":" Performance","pwa.performanceDesc":"Instant loading","pwa.experience":" Experience","pwa.experienceDesc":"Like a native app","pwa.notNow":"Not now","pwa.install":" Install","share.prompt":"Share your score:","share.text":` Cat Tetris!
 {score} points
 Level {level}
 {lines} lines

Can you beat me? `,"share.title":"My Cat Tetris score","share.share":" Share","share.copied":" Copied!","share.copy":" Copy","share.twitter":" Twitter","share.whatsapp":" WhatsApp","share.close":"Close","statistics.title":" Statistics","statistics.playTime":"Play Time:","statistics.piecesPlaced":"Pieces Placed:","statistics.linesCleared":"Lines Cleared:","statistics.tSpins":"T-Spins:","statistics.backToBack":"Back-to-Back:","statistics.maxCombo":"Max Combo:","statistics.tetrisCount":"Tetris (4 lines):","statistics.lps":"LPS (Lines/sec):","error.title":" Oops! Something went wrong","error.message":"The game encountered an unexpected problem.","error.restart":" Restart Game ","error.details":"Error details","common.close":"Close","common.back":" Back","common.points":"points","common.level":"Level","common.lines":"lines"},$b={"menu.title":" Cat Tetris","menu.subtitle":"Empilhe blocos com seus amigos felinos","menu.continue":" Continuar","menu.continueInfo":"Nvel {level}  {points} pts","menu.newGame":"Novo Jogo","menu.play":" Jogar","menu.vsAI":"VS IA","menu.vsAISub":"Desafie o bot","menu.tutorial":"Tutorial","menu.tutorialSub":"Aprenda a jogar","menu.creator":"Criador","menu.creatorSub":"Treine T-Spins","menu.aiExpert":"IA Expert","menu.aiExpertSub":"Assista a IA jogar","menu.shop":"Loja","menu.missions":"Misses","menu.achievements":"Conquistas","menu.settings":"Config","menu.install":" Instalar","menu.language":" Idioma","game.held":"Guardada","game.heldEmpty":"Vazio","game.next":"Prximas","game.nextLabel":"Prxima:","game.backToMenu":"Voltar ao Menu","game.level":"Nv.{level}","game.lines":"{n} linhas","game.accelerate":" Acelerar","game.hold":" Guardar","game.loading":"Carregando...","game.scoreTitle":" Pontuao","game.points":"Pontos:","game.record":"Recorde:","game.levelLabel":"Nvel:","game.linesLabel":"Linhas:","game.comboLabel":"Combo:","gameOver.title":"Game Over!","gameOver.points":"{score} pontos","gameOver.msgLow":"No desista! Cada tentativa te torna melhor! ","gameOver.msgMed":"Bom trabalho! Continue praticando! ","gameOver.msgHigh":"Excelente! Voc est ficando muito bom! ","gameOver.msgTop":"Incrvel! Voc  um mestre do Cat Tetris! ","gameOver.playAgain":" Jogar Novamente","gameOver.backToMenu":" Voltar ao Menu","gameOver.tip1":" Dica: Use a sombra para planejar melhor!","gameOver.tip2":" Tente fazer combos para mais pontos!","settings.title":" Configuraes","settings.audio":"udio","settings.volume":"Volume Geral","settings.soundEnabled":"Som Habilitado","settings.handling":"Handling (DAS/ARR)","settings.dasLabel":"DAS (Delayed Auto-Shift)","settings.dasHelp":"Delay antes da pea mover automaticamente ao segurar a tecla. Pro: 83-100ms","settings.arrLabel":"ARR (Auto-Repeat Rate)","settings.arrHelp":"Velocidade de repetio ao segurar. 0 = teleporta. Pro: 0-2ms","settings.controls":"Controles","settings.ctrlMove":"Mover","settings.ctrlRotateR":"Girar ","settings.ctrlRotateL":"Girar ","settings.ctrlSoftDrop":"Soft drop","settings.ctrlHardDrop":"Hard drop","settings.ctrlHold":"Hold","settings.ctrlPause":"Pausar","settings.visual":"Visual","settings.particles":"Efeitos de Partculas","settings.save":"Salvar","settings.cancel":"Cancelar","shop.title":" Loja de Temas","shop.subtitle":"Personalize suas peas de Tetris","shop.loading":"Carregando loja...","shop.errorLoading":" Erro ao carregar temas","shop.yourFish":"Seus Peixes","shop.themesUnlocked":"Temas Desbloqueados","shop.collection":"Coleo","shop.totalSpent":"Gasto Total","shop.equipped":" Equipado","shop.premium":" Premium","shop.free":"Gratuito","shop.equip":"Equipar","shop.inUse":"Em Uso","shop.close":"Fechar","shop.purchaseSuccess":" {name} comprado com sucesso!","shop.equipSuccess":" {name} equipado!","achievements.title":" Conquistas","achievements.subtitle":"Desbloqueie conquistas para ganhar  Peixes","achievements.loading":"Carregando conquistas...","achievements.unlocked":"Desbloqueadas","achievements.complete":"Completo","achievements.earned":"Ganhos","achievements.total":"Total","achievements.filterAll":"Todas","achievements.progress":"Progresso","achievements.unlockedAt":"Desbloqueado em {date}","achievements.noneInCategory":"Nenhuma conquista nesta categoria","achievements.unlockBanner":" CONQUISTA DESBLOQUEADA!","achievements.legendary":" Conquista Lendria! ","missions.title":" Misses Dirias","missions.subtitle":"Complete misses para ganhar  Peixes","missions.loading":"Carregando misses...","missions.dailyProgress":"Progresso Dirio:","missions.completedOf":"{completed}/{total} completas","missions.rewardsAvailable":"Recompensas Disponveis:","missions.claimed":"(Coletado)","missions.easy":" Fcil","missions.medium":" Mdio","missions.hard":" Difcil","missions.progress":"Progresso","missions.claimReward":" Coletar Recompensa","missions.resetNote":"As misses resetam todos os dias s 00:00","missions.allCompleted":" Todas as misses completas! ","missions.claimSuccess":" Recompensa coletada: +{reward} ","multiplayer.title":" Multiplayer","multiplayer.subtitle":"Desafie amigos ou enfrente a IA","multiplayer.errorLoading":" Erro ao carregar multiplayer","multiplayer.matchesVsAI":"Partidas vs IA","multiplayer.wins":"Vitrias","multiplayer.winRate":"Taxa de Vitria","multiplayer.player":"jogador","multiplayer.players":"jogadores","multiplayer.comingSoon":" EM BREVE","multiplayer.back":" Voltar","multiplayer.yourName":"Seu Nome:","multiplayer.aiDifficulty":"Dificuldade da IA:","multiplayer.ai1Left":" IA 1 (Esquerda):","multiplayer.ai2Right":" IA 2 (Direita):","multiplayer.startMatch":" Iniciar Partida","multiplayer.player1":"Jogador 1","multiplayer.player2":"Jogador 2","gameModes.title":" Modos de Jogo","gameModes.subtitle":"Escolha seu desafio","gameModes.loading":"Carregando modos...","gameModes.errorLoading":" Erro ao carregar modos","gameModes.selected":" Selecionado","gameModes.goalLines":" Meta: {n} linhas","gameModes.timeLimit":" Tempo: {time}","gameModes.gameOverYes":" Game Over","gameModes.gameOverNo":" Sem Game Over","gameModes.speedUp":" Velocidade aumenta","gameModes.speedFixed":" Velocidade fixa","gameModes.startLevel":" Incio: Nvel {n}","gameModes.relaxed":" Modo relaxado","gameModes.yourRecords":"Seus recordes:","gameModes.bestScore":"Melhor Pontuao","gameModes.bestTime":"Melhor Tempo","gameModes.mostLines":"Mais Linhas","gameModes.gamesPlayed":"{n} partidas jogadas","gameModes.noRecords":" Nenhum recorde ainda","gameModes.play":" Jogar","tutorial.title":" Tutorial","tutorial.subtitle":"Aprenda do zero ao PRO","tutorial.close":" Voltar","tutorial.overallProgress":"Progresso geral","tutorial.fundamentals":"Fundamentos","tutorial.fundamentalsDesc":"O bsico do Tetris","tutorial.intermediate":"Intermedirio","tutorial.intermediateDesc":"T-spins e combos","tutorial.advanced":"Avanado","tutorial.advancedDesc":"Setups e estratgias","tutorial.pro":"Profissional","tutorial.proDesc":"Tcnicas PRO","tutorial.noLessons":"Nenhuma lio neste mdulo","tutorial.badgesEarned":"Badges conquistadas","controls.hint":"  mover |  girar |  soft | Espao = hard drop | C = hold","controls.continue":" Continuar","controls.pause":" Pausar","controls.touchFriendly":" Controles touch-friendly","controls.useShadow":" Use a sombra para planejar!","gamepad.connected":"{n} Controle Conectado","gamepad.connectedPlural":"{n} Controles Conectados","gamepad.ready":"Pronto para jogar!","gamepad.showControls":"Mostrar controles","gamepad.controlsTitle":" Controles:","gamepad.move":"Mover","gamepad.accelerate":"Acelerar","gamepad.hardDrop":"Hard Drop","gamepad.rotateRight":"Girar ","gamepad.rotateLeft":"Girar ","gamepad.hold":"Guardar","gamepad.pause":"Pausar","gamepad.analogNote":" Analog Stick Esquerdo tambm funciona!","gamepad.triggerNote":" L2/R2 tambm giram a pea","gamepad.backNote":" Back/Select = Voltar ao menu","gamepad.controllerLabel":"Controle {n}:","gamepad.buttons":"{n} botes","gamepad.axes":"{n} eixos","gamepad.vibration":" Vibrao","reward.lessonComplete":"Lio Completa!","reward.fish":"Peixes","reward.xp":"XP","reward.badge":"Badge","pwa.notAvailableTitle":"PWA no disponvel","pwa.notAvailableText":"Este dispositivo no suporta instalao de PWA ou o app j est instalado.","pwa.understood":" Entendi","pwa.installTitle":"Instalar Cat Tetris","pwa.installText":"Instale o Cat Tetris na sua tela inicial para jogar offline a qualquer momento! Funciona como um app nativo.","pwa.quickAccess":" Acesso Rpido","pwa.quickAccessDesc":"cone na tela inicial","pwa.offline":" Offline","pwa.offlineDesc":"Jogue sem internet","pwa.performance":" Performance","pwa.performanceDesc":"Carregamento instantneo","pwa.experience":" Experincia","pwa.experienceDesc":"Como app nativo","pwa.notNow":"Agora no","pwa.install":" Instalar","share.prompt":"Compartilhe sua pontuao:","share.text":` Cat Tetris!
 {score} pontos
 Nvel {level}
 {lines} linhas

Consegue me superar? `,"share.title":"Minha pontuao no Cat Tetris","share.share":" Compartilhar","share.copied":" Copiado!","share.copy":" Copiar","share.twitter":" Twitter","share.whatsapp":" WhatsApp","share.close":"Fechar","statistics.title":" Estatsticas","statistics.playTime":"Tempo Jogado:","statistics.piecesPlaced":"Peas Colocadas:","statistics.linesCleared":"Linhas Limpas:","statistics.tSpins":"T-Spins:","statistics.backToBack":"Back-to-Back:","statistics.maxCombo":"Combo Mximo:","statistics.tetrisCount":"Tetris (4 linhas):","statistics.lps":"LPS (Linhas/seg):","error.title":" Ops! Algo deu errado","error.message":"O jogo encontrou um problema inesperado.","error.restart":" Reiniciar Jogo ","error.details":"Detalhes do erro","common.close":"Fechar","common.back":" Voltar","common.points":"pontos","common.level":"Nvel","common.lines":"linhas"},qb={"menu.title":" Cat Tetris","menu.subtitle":"Apila bloques con tus amigos felinos","menu.continue":" Continuar","menu.continueInfo":"Nivel {level}  {points} pts","menu.newGame":"Nuevo Juego","menu.play":" Jugar","menu.vsAI":"VS IA","menu.vsAISub":"Desafa al bot","menu.tutorial":"Tutorial","menu.tutorialSub":"Aprende a jugar","menu.creator":"Creador","menu.creatorSub":"Entrena T-Spins","menu.aiExpert":"IA Expert","menu.aiExpertSub":"Mira la IA jugar","menu.shop":"Tienda","menu.missions":"Misiones","menu.achievements":"Logros","menu.settings":"Ajustes","menu.install":" Instalar","menu.language":" Idioma","game.held":"Reserva","game.heldEmpty":"Vaco","game.next":"Siguientes","game.nextLabel":"Siguiente:","game.backToMenu":"Volver al Men","game.level":"Nv.{level}","game.lines":"{n} lneas","game.accelerate":" Acelerar","game.hold":" Reservar","game.loading":"Cargando...","game.scoreTitle":" Puntuacin","game.points":"Puntos:","game.record":"Rcord:","game.levelLabel":"Nivel:","game.linesLabel":"Lneas:","game.comboLabel":"Combo:","gameOver.title":"Game Over!","gameOver.points":"{score} puntos","gameOver.msgLow":"No te rindas! Cada intento te hace mejor! ","gameOver.msgMed":"Buen trabajo! Sigue practicando! ","gameOver.msgHigh":"Excelente! Ests mejorando mucho! ","gameOver.msgTop":"Increble! Eres un maestro de Cat Tetris! ","gameOver.playAgain":" Jugar de Nuevo","gameOver.backToMenu":" Volver al Men","gameOver.tip1":" Consejo: Usa la sombra para planificar!","gameOver.tip2":" Intenta combos para ms puntos!","settings.title":" Ajustes","settings.audio":"Audio","settings.volume":"Volumen General","settings.soundEnabled":"Sonido Habilitado","settings.handling":"Handling (DAS/ARR)","settings.dasLabel":"DAS (Delayed Auto-Shift)","settings.dasHelp":"Retardo antes de que la pieza se mueva al mantener la tecla. Pro: 83-100ms","settings.arrLabel":"ARR (Auto-Repeat Rate)","settings.arrHelp":"Velocidad de repeticin al mantener. 0 = teletransporte. Pro: 0-2ms","settings.controls":"Controles","settings.ctrlMove":"Mover","settings.ctrlRotateR":"Girar ","settings.ctrlRotateL":"Girar ","settings.ctrlSoftDrop":"Soft drop","settings.ctrlHardDrop":"Hard drop","settings.ctrlHold":"Hold","settings.ctrlPause":"Pausa","settings.visual":"Visual","settings.particles":"Efectos de Partculas","settings.save":"Guardar","settings.cancel":"Cancelar","shop.title":" Tienda de Temas","shop.subtitle":"Personaliza tus piezas de Tetris","shop.loading":"Cargando tienda...","shop.errorLoading":" Error al cargar temas","shop.yourFish":"Tus Peces","shop.themesUnlocked":"Temas Desbloqueados","shop.collection":"Coleccin","shop.totalSpent":"Gasto Total","shop.equipped":" Equipado","shop.premium":" Premium","shop.free":"Gratuito","shop.equip":"Equipar","shop.inUse":"En Uso","shop.close":"Cerrar","shop.purchaseSuccess":" {name} comprado!","shop.equipSuccess":" {name} equipado!","achievements.title":" Logros","achievements.subtitle":"Desbloquea logros para ganar  Peces","achievements.loading":"Cargando logros...","achievements.unlocked":"Desbloqueados","achievements.complete":"Completo","achievements.earned":"Ganados","achievements.total":"Total","achievements.filterAll":"Todos","achievements.progress":"Progreso","achievements.unlockedAt":"Desbloqueado el {date}","achievements.noneInCategory":"No hay logros en esta categora","achievements.unlockBanner":" LOGRO DESBLOQUEADO!","achievements.legendary":" Logro Legendario! ","missions.title":" Misiones Diarias","missions.subtitle":"Completa misiones para ganar  Peces","missions.loading":"Cargando misiones...","missions.dailyProgress":"Progreso Diario:","missions.completedOf":"{completed}/{total} completas","missions.rewardsAvailable":"Recompensas Disponibles:","missions.claimed":"(Reclamado)","missions.easy":" Fcil","missions.medium":" Medio","missions.hard":" Difcil","missions.progress":"Progreso","missions.claimReward":" Reclamar Recompensa","missions.resetNote":"Las misiones se reinician cada da a las 00:00","missions.allCompleted":" Todas las misiones completas! ","missions.claimSuccess":" Recompensa reclamada: +{reward} ","multiplayer.title":" Multijugador","multiplayer.subtitle":"Desafa amigos o enfrenta la IA","multiplayer.errorLoading":" Error al cargar multijugador","multiplayer.matchesVsAI":"Partidas vs IA","multiplayer.wins":"Victorias","multiplayer.winRate":"Tasa de Victoria","multiplayer.player":"jugador","multiplayer.players":"jugadores","multiplayer.comingSoon":" PRXIMAMENTE","multiplayer.back":" Volver","multiplayer.yourName":"Tu Nombre:","multiplayer.aiDifficulty":"Dificultad de IA:","multiplayer.ai1Left":" IA 1 (Izquierda):","multiplayer.ai2Right":" IA 2 (Derecha):","multiplayer.startMatch":" Iniciar Partida","multiplayer.player1":"Jugador 1","multiplayer.player2":"Jugador 2","gameModes.title":" Modos de Juego","gameModes.subtitle":"Elige tu desafo","gameModes.loading":"Cargando modos...","gameModes.errorLoading":" Error al cargar modos","gameModes.selected":" Seleccionado","gameModes.goalLines":" Meta: {n} lneas","gameModes.timeLimit":" Tiempo: {time}","gameModes.gameOverYes":" Game Over","gameModes.gameOverNo":" Sin Game Over","gameModes.speedUp":" Velocidad aumenta","gameModes.speedFixed":" Velocidad fija","gameModes.startLevel":" Inicio: Nivel {n}","gameModes.relaxed":" Modo relajado","gameModes.yourRecords":"Tus rcords:","gameModes.bestScore":"Mejor Puntuacin","gameModes.bestTime":"Mejor Tiempo","gameModes.mostLines":"Ms Lneas","gameModes.gamesPlayed":"{n} partidas jugadas","gameModes.noRecords":" Sin rcords an","gameModes.play":" Jugar","tutorial.title":" Tutorial","tutorial.subtitle":"Aprende de cero a PRO","tutorial.close":" Volver","tutorial.overallProgress":"Progreso general","tutorial.fundamentals":"Fundamentos","tutorial.fundamentalsDesc":"Lo bsico del Tetris","tutorial.intermediate":"Intermedio","tutorial.intermediateDesc":"T-spins y combos","tutorial.advanced":"Avanzado","tutorial.advancedDesc":"Setups y estrategias","tutorial.pro":"Profesional","tutorial.proDesc":"Tcnicas PRO","tutorial.noLessons":"No hay lecciones en este mdulo","tutorial.badgesEarned":"Badges obtenidas","controls.hint":"  mover |  girar |  soft | Espacio = hard drop | C = hold","controls.continue":" Continuar","controls.pause":" Pausa","controls.touchFriendly":" Controles tctiles","controls.useShadow":" Usa la sombra para planificar!","gamepad.connected":"{n} Mando Conectado","gamepad.connectedPlural":"{n} Mandos Conectados","gamepad.ready":"Listo para jugar!","gamepad.showControls":"Mostrar controles","gamepad.controlsTitle":" Controles:","gamepad.move":"Mover","gamepad.accelerate":"Acelerar","gamepad.hardDrop":"Hard Drop","gamepad.rotateRight":"Girar ","gamepad.rotateLeft":"Girar ","gamepad.hold":"Reservar","gamepad.pause":"Pausa","gamepad.analogNote":" El stick izquierdo tambin funciona!","gamepad.triggerNote":" L2/R2 tambin giran","gamepad.backNote":" Back/Select = Volver al men","gamepad.controllerLabel":"Mando {n}:","gamepad.buttons":"{n} botones","gamepad.axes":"{n} ejes","gamepad.vibration":" Vibracin","reward.lessonComplete":"Leccin Completa!","reward.fish":"Peces","reward.xp":"XP","reward.badge":"Badge","pwa.notAvailableTitle":"PWA no disponible","pwa.notAvailableText":"Este dispositivo no soporta la instalacin de PWA o la app ya est instalada.","pwa.understood":" Entendido","pwa.installTitle":"Instalar Cat Tetris","pwa.installText":"Instala Cat Tetris en tu pantalla de inicio para jugar offline! Funciona como una app nativa.","pwa.quickAccess":" Acceso Rpido","pwa.quickAccessDesc":"cono en pantalla","pwa.offline":" Offline","pwa.offlineDesc":"Juega sin internet","pwa.performance":" Rendimiento","pwa.performanceDesc":"Carga instantnea","pwa.experience":" Experiencia","pwa.experienceDesc":"Como app nativa","pwa.notNow":"Ahora no","pwa.install":" Instalar","share.prompt":"Comparte tu puntuacin:","share.text":` Cat Tetris!
 {score} puntos
 Nivel {level}
 {lines} lneas

Puedes superarme? `,"share.title":"Mi puntuacin en Cat Tetris","share.share":" Compartir","share.copied":" Copiado!","share.copy":" Copiar","share.twitter":" Twitter","share.whatsapp":" WhatsApp","share.close":"Cerrar","statistics.title":" Estadsticas","statistics.playTime":"Tiempo Jugado:","statistics.piecesPlaced":"Piezas Colocadas:","statistics.linesCleared":"Lneas Limpiadas:","statistics.tSpins":"T-Spins:","statistics.backToBack":"Back-to-Back:","statistics.maxCombo":"Combo Mximo:","statistics.tetrisCount":"Tetris (4 lneas):","statistics.lps":"LPS (Lneas/seg):","error.title":" Ups! Algo sali mal","error.message":"El juego encontr un problema inesperado.","error.restart":" Reiniciar Juego ","error.details":"Detalles del error","common.close":"Cerrar","common.back":" Volver","common.points":"puntos","common.level":"Nivel","common.lines":"lneas"},Wb={"menu.title":" Cat Tetris","menu.subtitle":"","menu.continue":" ","menu.continueInfo":" {level}  {points} pts","menu.newGame":"","menu.play":" ","menu.vsAI":"VS AI","menu.vsAISub":"AI","menu.tutorial":"","menu.tutorialSub":"","menu.creator":"","menu.creatorSub":"T-Spin","menu.aiExpert":"AI","menu.aiExpertSub":"AI","menu.shop":"","menu.missions":"","menu.achievements":"","menu.settings":"","menu.install":" ","menu.language":" ","game.held":"","game.heldEmpty":"","game.next":"","game.nextLabel":":","game.backToMenu":"","game.level":"Lv.{level}","game.lines":"{n} ","game.accelerate":" ","game.hold":" ","game.loading":"...","game.scoreTitle":" ","game.points":":","game.record":":","game.levelLabel":":","game.linesLabel":":","game.comboLabel":":","gameOver.title":"!","gameOver.points":"{score} ","gameOver.msgLow":" ","gameOver.msgMed":" ","gameOver.msgHigh":" ","gameOver.msgTop":"Cat Tetris ","gameOver.playAgain":" ","gameOver.backToMenu":" ","gameOver.tip1":" : ","gameOver.tip2":" ","settings.title":" ","settings.audio":"","settings.volume":"","settings.soundEnabled":"","settings.handling":" (DAS/ARR)","settings.dasLabel":"DAS ()","settings.dasHelp":": 83-100ms","settings.arrLabel":"ARR ()","settings.arrHelp":"0 = : 0-2ms","settings.controls":"","settings.ctrlMove":"","settings.ctrlRotateR":"","settings.ctrlRotateL":"","settings.ctrlSoftDrop":"","settings.ctrlHardDrop":"","settings.ctrlHold":"","settings.ctrlPause":"","settings.visual":"","settings.particles":"","settings.save":"","settings.cancel":"","shop.title":" ","shop.subtitle":"","shop.loading":"...","shop.errorLoading":" ","shop.yourFish":"","shop.themesUnlocked":"","shop.collection":"","shop.totalSpent":"","shop.equipped":" ","shop.premium":" ","shop.free":"","shop.equip":"","shop.inUse":"","shop.close":"","shop.purchaseSuccess":" {name} ","shop.equipSuccess":" {name} ","achievements.title":" ","achievements.subtitle":"  ","achievements.loading":"...","achievements.unlocked":"","achievements.complete":"","achievements.earned":"","achievements.total":"","achievements.filterAll":"","achievements.progress":"","achievements.unlockedAt":"{date} ","achievements.noneInCategory":"","achievements.unlockBanner":" ","achievements.legendary":"  ","missions.title":" ","missions.subtitle":"  ","missions.loading":"...","missions.dailyProgress":":","missions.completedOf":"{completed}/{total} ","missions.rewardsAvailable":":","missions.claimed":"()","missions.easy":" ","missions.medium":" ","missions.hard":" ","missions.progress":"","missions.claimReward":" ","missions.resetNote":"00:00","missions.allCompleted":"  ","missions.claimSuccess":" : +{reward} ","multiplayer.title":" ","multiplayer.subtitle":"AI","multiplayer.errorLoading":" ","multiplayer.matchesVsAI":"AI","multiplayer.wins":"","multiplayer.winRate":"","multiplayer.player":"","multiplayer.players":"","multiplayer.comingSoon":" ","multiplayer.back":" ","multiplayer.yourName":":","multiplayer.aiDifficulty":"AI:","multiplayer.ai1Left":" AI 1 ():","multiplayer.ai2Right":" AI 2 ():","multiplayer.startMatch":" ","multiplayer.player1":" 1","multiplayer.player2":" 2","gameModes.title":" ","gameModes.subtitle":"","gameModes.loading":"...","gameModes.errorLoading":" ","gameModes.selected":" ","gameModes.goalLines":" : {n} ","gameModes.timeLimit":" : {time}","gameModes.gameOverYes":" ","gameModes.gameOverNo":" ","gameModes.speedUp":" ","gameModes.speedFixed":" ","gameModes.startLevel":" :  {n}","gameModes.relaxed":" ","gameModes.yourRecords":":","gameModes.bestScore":"","gameModes.bestTime":"","gameModes.mostLines":"","gameModes.gamesPlayed":"{n} ","gameModes.noRecords":" ","gameModes.play":" ","tutorial.title":" ","tutorial.subtitle":"PRO","tutorial.close":" ","tutorial.overallProgress":"","tutorial.fundamentals":"","tutorial.fundamentalsDesc":"","tutorial.intermediate":"","tutorial.intermediateDesc":"T-spin","tutorial.advanced":"","tutorial.advancedDesc":"","tutorial.pro":"","tutorial.proDesc":"PRO ","tutorial.noLessons":"","tutorial.badgesEarned":"","controls.hint":"   |   |   |  =  | C = ","controls.continue":" ","controls.pause":" ","controls.touchFriendly":" ","controls.useShadow":" ","gamepad.connected":"{n} ","gamepad.connectedPlural":"{n} ","gamepad.ready":"","gamepad.showControls":"","gamepad.controlsTitle":" :","gamepad.move":"","gamepad.accelerate":"","gamepad.hardDrop":"","gamepad.rotateRight":"","gamepad.rotateLeft":"","gamepad.hold":"","gamepad.pause":"","gamepad.analogNote":" ","gamepad.triggerNote":" L2/R2","gamepad.backNote":" Back/Select = ","gamepad.controllerLabel":" {n}:","gamepad.buttons":"{n} ","gamepad.axes":"{n} ","gamepad.vibration":" ","reward.lessonComplete":"","reward.fish":"","reward.xp":"XP","reward.badge":"","pwa.notAvailableTitle":"PWA","pwa.notAvailableText":"PWA","pwa.understood":" ","pwa.installTitle":"Cat Tetris","pwa.installText":"","pwa.quickAccess":" ","pwa.quickAccessDesc":"","pwa.offline":" ","pwa.offlineDesc":"","pwa.performance":" ","pwa.performanceDesc":"","pwa.experience":" ","pwa.experienceDesc":"","pwa.notNow":"","pwa.install":" ","share.prompt":":","share.text":` Cat Tetris!
 {score} 
  {level}
 {lines} 

 `,"share.title":"Cat Tetris","share.share":" ","share.copied":" ","share.copy":" ","share.twitter":" Twitter","share.whatsapp":" WhatsApp","share.close":"","statistics.title":" ","statistics.playTime":":","statistics.piecesPlaced":":","statistics.linesCleared":":","statistics.tSpins":"T-Spins:","statistics.backToBack":"Back-to-Back:","statistics.maxCombo":":","statistics.tetrisCount":"(4):","statistics.lps":"LPS (/):","error.title":" ","error.message":"","error.restart":"  ","error.details":"","common.close":"","common.back":" ","common.points":"","common.level":"","common.lines":""},Kb={"menu.title":" Cat Tetris","menu.subtitle":"Empilez les blocs avec vos amis flins","menu.continue":" Continuer","menu.continueInfo":"Niveau {level}  {points} pts","menu.newGame":"Nouvelle Partie","menu.play":" Jouer","menu.vsAI":"VS IA","menu.vsAISub":"Dfiez le bot","menu.tutorial":"Tutoriel","menu.tutorialSub":"Apprenez  jouer","menu.creator":"Crateur","menu.creatorSub":"Entranez T-Spins","menu.aiExpert":"IA Expert","menu.aiExpertSub":"Regardez l'IA jouer","menu.shop":"Boutique","menu.missions":"Missions","menu.achievements":"Succs","menu.settings":"Options","menu.install":" Installer","menu.language":" Langue","game.held":"Rserve","game.heldEmpty":"Vide","game.next":"Suivantes","game.nextLabel":"Suivante:","game.backToMenu":"Retour au Menu","game.level":"Nv.{level}","game.lines":"{n} lignes","game.accelerate":" Acclrer","game.hold":" Rserve","game.loading":"Chargement...","game.scoreTitle":" Score","game.points":"Points:","game.record":"Record:","game.levelLabel":"Niveau:","game.linesLabel":"Lignes:","game.comboLabel":"Combo:","gameOver.title":"Game Over!","gameOver.points":"{score} points","gameOver.msgLow":"N'abandonnez pas ! Chaque essai vous rend meilleur ! ","gameOver.msgMed":"Bien jou ! Continuez  pratiquer ! ","gameOver.msgHigh":"Excellent ! Vous progressez vraiment ! ","gameOver.msgTop":"Incroyable ! Vous tes un matre du Cat Tetris ! ","gameOver.playAgain":" Rejouer","gameOver.backToMenu":" Retour au Menu","gameOver.tip1":" Astuce: Utilisez l'ombre pour planifier !","gameOver.tip2":" Tentez des combos pour plus de points !","settings.title":" Options","settings.audio":"Audio","settings.volume":"Volume Gnral","settings.soundEnabled":"Son Activ","settings.handling":"Maniement (DAS/ARR)","settings.dasLabel":"DAS (Dlai Auto-Shift)","settings.dasHelp":"Dlai avant le dplacement auto en maintenant. Pro: 83-100ms","settings.arrLabel":"ARR (Vitesse Auto-Repeat)","settings.arrHelp":"Vitesse de rptition en maintenant. 0 = tlportation. Pro: 0-2ms","settings.controls":"Contrles","settings.ctrlMove":"Dplacer","settings.ctrlRotateR":"Tourner ","settings.ctrlRotateL":"Tourner ","settings.ctrlSoftDrop":"Soft drop","settings.ctrlHardDrop":"Hard drop","settings.ctrlHold":"Rserve","settings.ctrlPause":"Pause","settings.visual":"Visuel","settings.particles":"Effets de Particules","settings.save":"Sauvegarder","settings.cancel":"Annuler","shop.title":" Boutique de Thmes","shop.subtitle":"Personnalisez vos pices de Tetris","shop.loading":"Chargement boutique...","shop.errorLoading":" Erreur de chargement","shop.yourFish":"Vos Poissons","shop.themesUnlocked":"Thmes Dbloqus","shop.collection":"Collection","shop.totalSpent":"Total Dpens","shop.equipped":" quip","shop.premium":" Premium","shop.free":"Gratuit","shop.equip":"quiper","shop.inUse":"Utilis","shop.close":"Fermer","shop.purchaseSuccess":" {name} achet !","shop.equipSuccess":" {name} quip !","achievements.title":" Succs","achievements.subtitle":"Dbloquez des succs pour gagner des ","achievements.loading":"Chargement succs...","achievements.unlocked":"Dbloqus","achievements.complete":"Complet","achievements.earned":"Gagns","achievements.total":"Total","achievements.filterAll":"Tous","achievements.progress":"Progrs","achievements.unlockedAt":"Dbloqu le {date}","achievements.noneInCategory":"Aucun succs dans cette catgorie","achievements.unlockBanner":" SUCCS DBLOQU !","achievements.legendary":" Succs Lgendaire ! ","missions.title":" Missions Quotidiennes","missions.subtitle":"Compltez des missions pour gagner des ","missions.loading":"Chargement missions...","missions.dailyProgress":"Progrs Quotidien:","missions.completedOf":"{completed}/{total} compltes","missions.rewardsAvailable":"Rcompenses Disponibles:","missions.claimed":"(Rclam)","missions.easy":" Facile","missions.medium":" Moyen","missions.hard":" Difficile","missions.progress":"Progrs","missions.claimReward":" Rclamer","missions.resetNote":"Les missions se rinitialisent chaque jour  00:00","missions.allCompleted":" Toutes les missions termines ! ","missions.claimSuccess":" Rcompense rclame: +{reward} ","multiplayer.title":" Multijoueur","multiplayer.subtitle":"Dfiez vos amis ou affrontez l'IA","multiplayer.errorLoading":" Erreur de chargement","multiplayer.matchesVsAI":"Matchs vs IA","multiplayer.wins":"Victoires","multiplayer.winRate":"Taux de Victoire","multiplayer.player":"joueur","multiplayer.players":"joueurs","multiplayer.comingSoon":" BIENTT","multiplayer.back":" Retour","multiplayer.yourName":"Votre Nom:","multiplayer.aiDifficulty":"Difficult de l'IA:","multiplayer.ai1Left":" IA 1 (Gauche):","multiplayer.ai2Right":" IA 2 (Droite):","multiplayer.startMatch":" Lancer le Match","multiplayer.player1":"Joueur 1","multiplayer.player2":"Joueur 2","gameModes.title":" Modes de Jeu","gameModes.subtitle":"Choisissez votre dfi","gameModes.loading":"Chargement modes...","gameModes.errorLoading":" Erreur","gameModes.selected":" Slectionn","gameModes.goalLines":" Objectif: {n} lignes","gameModes.timeLimit":" Temps: {time}","gameModes.gameOverYes":" Game Over","gameModes.gameOverNo":" Sans Game Over","gameModes.speedUp":" La vitesse augmente","gameModes.speedFixed":" Vitesse fixe","gameModes.startLevel":" Dbut: Niveau {n}","gameModes.relaxed":" Mode dtente","gameModes.yourRecords":"Vos records:","gameModes.bestScore":"Meilleur Score","gameModes.bestTime":"Meilleur Temps","gameModes.mostLines":"Plus de Lignes","gameModes.gamesPlayed":"{n} parties joues","gameModes.noRecords":" Pas encore de record","gameModes.play":" Jouer","tutorial.title":" Tutoriel","tutorial.subtitle":"Apprenez de zro  PRO","tutorial.close":" Retour","tutorial.overallProgress":"Progrs global","tutorial.fundamentals":"Fondamentaux","tutorial.fundamentalsDesc":"Les bases du Tetris","tutorial.intermediate":"Intermdiaire","tutorial.intermediateDesc":"T-spins et combos","tutorial.advanced":"Avanc","tutorial.advancedDesc":"Setups et stratgies","tutorial.pro":"Professionnel","tutorial.proDesc":"Techniques PRO","tutorial.noLessons":"Aucune leon dans ce module","tutorial.badgesEarned":"Badges obtenus","controls.hint":"  dplacer |  tourner |  soft | Espace = hard drop | C = rserve","controls.continue":" Continuer","controls.pause":" Pause","controls.touchFriendly":" Contrles tactiles","controls.useShadow":" Utilisez l'ombre pour planifier !","gamepad.connected":"{n} Manette Connecte","gamepad.connectedPlural":"{n} Manettes Connectes","gamepad.ready":"Prt  jouer !","gamepad.showControls":"Afficher contrles","gamepad.controlsTitle":" Contrles:","gamepad.move":"Dplacer","gamepad.accelerate":"Acclrer","gamepad.hardDrop":"Hard Drop","gamepad.rotateRight":"Tourner ","gamepad.rotateLeft":"Tourner ","gamepad.hold":"Rserve","gamepad.pause":"Pause","gamepad.analogNote":" Le stick gauche fonctionne aussi !","gamepad.triggerNote":" L2/R2 tournent aussi","gamepad.backNote":" Back/Select = Retour au menu","gamepad.controllerLabel":"Manette {n}:","gamepad.buttons":"{n} boutons","gamepad.axes":"{n} axes","gamepad.vibration":" Vibration","reward.lessonComplete":"Leon Termine !","reward.fish":"Poissons","reward.xp":"XP","reward.badge":"Badge","pwa.notAvailableTitle":"PWA non disponible","pwa.notAvailableText":"Cet appareil ne supporte pas l'installation PWA ou l'app est dj installe.","pwa.understood":" Compris","pwa.installTitle":"Installer Cat Tetris","pwa.installText":"Installez Cat Tetris sur votre cran d'accueil pour jouer hors-ligne ! Fonctionne comme une app native.","pwa.quickAccess":" Accs Rapide","pwa.quickAccessDesc":"Icne sur l'cran","pwa.offline":" Hors-ligne","pwa.offlineDesc":"Jouez sans internet","pwa.performance":" Performance","pwa.performanceDesc":"Chargement instantan","pwa.experience":" Exprience","pwa.experienceDesc":"Comme une app native","pwa.notNow":"Pas maintenant","pwa.install":" Installer","share.prompt":"Partagez votre score:","share.text":` Cat Tetris!
 {score} points
 Niveau {level}
 {lines} lignes

Pouvez-vous me battre ? `,"share.title":"Mon score Cat Tetris","share.share":" Partager","share.copied":" Copi !","share.copy":" Copier","share.twitter":" Twitter","share.whatsapp":" WhatsApp","share.close":"Fermer","statistics.title":" Statistiques","statistics.playTime":"Temps de Jeu:","statistics.piecesPlaced":"Pices Places:","statistics.linesCleared":"Lignes Effaces:","statistics.tSpins":"T-Spins:","statistics.backToBack":"Back-to-Back:","statistics.maxCombo":"Combo Max:","statistics.tetrisCount":"Tetris (4 lignes):","statistics.lps":"LPS (Lignes/sec):","error.title":" Oups ! Quelque chose a mal tourn","error.message":"Le jeu a rencontr un problme inattendu.","error.restart":" Redmarrer le Jeu ","error.details":"Dtails de l'erreur","common.close":"Fermer","common.back":" Retour","common.points":"points","common.level":"Niveau","common.lines":"lignes"},Oa={en:Ub,pt:$b,es:qb,ja:Wb,fr:Kb};function Qb(){try{return localStorage.getItem(A0)||"en"}catch{return"en"}}function Xb({children:e}){const[t,n]=v.useState(Qb),r=v.useCallback(i=>{n(i);try{localStorage.setItem(A0,i)}catch{}},[]),s=v.useCallback((i,o={})=>{let c=(Oa[t]||Oa.en)[i]??Oa.en[i]??i;return Object.entries(o).forEach(([u,h])=>{c=c.replace(new RegExp(`\\{${u}\\}`,"g"),h)}),c},[t]);return l.jsx(N0.Provider,{value:{language:t,setLanguage:r,t:s,languages:Wl},children:e})}function Re(){const e=v.useContext(N0);if(!e)throw new Error("useI18n must be used within I18nProvider");return e}const Jb=({score:e,level:t,lines:n,combo:r})=>{const{t:s}=Re(),[i,o]=v.useState(0);return v.useEffect(()=>{o(Oh.getHighScore())},[]),v.useEffect(()=>{Oh.saveHighScore(e)&&o(e)},[e]),l.jsxs("div",{className:"bg-gray-900/50 p-2 rounded-xl border-2 border-white/20 shadow-2xl w-28",children:[l.jsx("h2",{className:"text-xs font-bold text-white mb-1 text-center",children:s("game.scoreTitle")}),l.jsxs("div",{className:"space-y-0.5 text-xs",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-white/70",children:s("game.points")}),l.jsx("span",{className:"text-yellow-400 font-bold",children:e.toLocaleString()})]}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-white/70",children:s("game.record")}),l.jsx("span",{className:"text-green-400 font-bold",children:i.toLocaleString()})]}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-white/70",children:s("game.levelLabel")}),l.jsx("span",{className:"text-blue-400 font-bold",children:t})]}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-white/70",children:s("game.linesLabel")}),l.jsx("span",{className:"text-purple-400 font-bold",children:n})]}),r>0&&l.jsxs("div",{className:"flex justify-between items-center bg-orange-500/20 px-1.5 py-0.5 rounded border border-orange-400/30 mt-0.5",children:[l.jsx("span",{className:"text-white/90",children:s("game.comboLabel")}),l.jsxs("span",{className:"text-orange-400 font-bold",children:[r,"x"]})]})]})]})},Zn=ce.memo(Jb),Yb=({onMove:e,onRotate:t,onHardDrop:n,onPause:r,onHold:s,isPaused:i,gameOver:o,canHold:a})=>{const{t:c}=Re(),u=h=>{if(!o)switch(h){case"left":e("left");break;case"right":e("right");break;case"down":e("down");break;case"rotate":t();break;case"hardDrop":n();break;case"hold":s();break;case"pause":r();break}};return l.jsxs("div",{className:"flex flex-col items-center gap-1",children:[l.jsx("div",{className:"hidden lg:block",children:l.jsx("div",{className:"text-center text-white/50 text-[11px]",children:l.jsx("p",{children:c("controls.hint")})})}),l.jsxs("div",{className:"lg:hidden",children:[l.jsxs("div",{className:"grid grid-cols-3 gap-3 max-w-xs",children:[l.jsx("div",{}),l.jsx(M.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>u("rotate"),disabled:o,className:"bg-blue-500 text-white p-4 rounded-full shadow-lg hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed",children:""}),l.jsx("div",{}),l.jsx(M.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>u("left"),disabled:o,className:"bg-gray-600 text-white p-4 rounded-full shadow-lg hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:""}),l.jsx(M.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>u("down"),disabled:o,className:"bg-gray-600 text-white p-4 rounded-full shadow-lg hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:""}),l.jsx(M.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>u("right"),disabled:o,className:"bg-gray-600 text-white p-4 rounded-full shadow-lg hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:""}),l.jsx(M.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>u("hardDrop"),disabled:o,className:"bg-red-500 text-white p-4 rounded-full shadow-lg hover:bg-red-600 disabled:opacity-50 disabled:cursor-not-allowed",children:""}),l.jsx(M.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>u("hold"),disabled:o||!a,className:`p-4 rounded-full shadow-lg disabled:opacity-50 disabled:cursor-not-allowed ${a?"bg-green-500 text-white hover:bg-green-600":"bg-gray-500 text-white"}`,children:""})]}),l.jsx("div",{className:"mt-4 flex justify-center",children:l.jsx(M.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>u("pause"),disabled:o,className:"bg-yellow-500 text-white px-6 py-3 rounded-lg shadow-lg hover:bg-yellow-600 disabled:opacity-50 disabled:cursor-not-allowed",children:c(i?"controls.continue":"controls.pause")})}),l.jsxs("div",{className:"mt-4 text-center text-white/60 text-xs",children:[l.jsx("p",{children:c("controls.touchFriendly")}),l.jsx("p",{children:c("controls.useShadow")})]})]})]})};function Zb({scoreData:e,onClose:t}){const{t:n}=Re(),[r,s]=v.useState(!1),i=n("share.text",{score:e.score,level:e.level,lines:e.lines}),o=async()=>{try{await navigator.clipboard.writeText(i),s(!0),setTimeout(()=>s(!1),2e3)}catch{}},a=async()=>{if(navigator.share)try{await navigator.share({title:n("share.title"),text:i})}catch(h){h.name}},c=()=>{const h=`https://twitter.com/intent/tweet?text=${encodeURIComponent(i)}`;window.open(h,"_blank","width=600,height=400")},u=()=>{const h=`https://wa.me/?text=${encodeURIComponent(i)}`;window.open(h,"_blank")};return l.jsxs(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-black/40 rounded-lg p-4 mt-4",children:[l.jsx("div",{className:"text-white/80 text-sm mb-3 text-center",children:n("share.prompt")}),l.jsxs("div",{className:"flex flex-wrap gap-2 justify-center",children:[navigator.share&&l.jsx(M.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:a,className:"bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-lg font-bold flex items-center gap-2 transition-colors",children:n("share.share")}),l.jsx(M.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:o,className:`${r?"bg-green-600":"bg-gray-600 hover:bg-gray-500"} text-white px-4 py-2 rounded-lg font-bold flex items-center gap-2 transition-colors`,children:n(r?"share.copied":"share.copy")}),l.jsx(M.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:c,className:"bg-[#1DA1F2] hover:bg-[#1a8cd8] text-white px-4 py-2 rounded-lg font-bold flex items-center gap-2 transition-colors",children:n("share.twitter")}),l.jsx(M.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:u,className:"bg-[#25D366] hover:bg-[#20bd5a] text-white px-4 py-2 rounded-lg font-bold flex items-center gap-2 transition-colors",children:n("share.whatsapp")})]}),t&&l.jsx("div",{className:"text-center mt-3",children:l.jsx("button",{onClick:t,className:"text-white/60 hover:text-white text-sm transition-colors",children:n("share.close")})})]})}const pu="catTetris_gamepadConfig",GC={0:"A",1:"B",2:"X",3:"Y",4:"LB",5:"RB",6:"LT",7:"RT",8:"Back",9:"Start",10:"L3",11:"R3",12:"D-Pad ",13:"D-Pad ",14:"D-Pad ",15:"D-Pad "},Kl={menuConfirm:0,menuBack:1,menuAltConfirm:9,rotateCW:0,rotateCCW:1,hardDrop:12,hold:4,pause:9,backToMenu:8},FC={menuConfirm:"Confirmar (Menu)",menuBack:"Voltar (Menu)",menuAltConfirm:"Confirmar Alt (Menu)",rotateCW:"Rotao Horria",rotateCCW:"Rotao Anti-horria",hardDrop:"Hard Drop",hold:"Segurar Pea",pause:"Pausar",backToMenu:"Voltar ao Menu"},VC=["menuConfirm","menuBack","menuAltConfirm"],BC=["rotateCW","rotateCCW","hardDrop","hold","pause","backToMenu"];function Ql(){try{const e=localStorage.getItem(pu);if(e){const t=JSON.parse(e);return{...Kl,...t}}}catch{}return{...Kl}}function HC(e){try{localStorage.setItem(pu,JSON.stringify(e))}catch{}}function zC(){try{localStorage.removeItem(pu)}catch{}return{...Kl}}function $e({itemCount:e=0,onConfirm:t,onBack:n,active:r=!0,vertical:s=!0,columns:i=1,wrap:o=!0,navMap:a=null}={}){const[c,u]=v.useState(0),h=v.useRef(0),d=v.useRef({}),m=v.useRef({}),g=250,x=400,b=v.useRef({}),k=.5;v.useEffect(()=>{h.current=c},[c]);const p=v.useRef(t),f=v.useRef(n),y=v.useRef(a);v.useEffect(()=>{p.current=t},[t]),v.useEffect(()=>{f.current=n},[n]),v.useEffect(()=>{y.current=a},[a]),v.useEffect(()=>{u(C=>C>=e?Math.max(0,e-1):C)},[e]),v.useEffect(()=>{var C,P,T;if(r){u(0);try{const j=navigator.getGamepads(),E=Array.from(j).find(L=>L&&L.connected);if(E){const L=Ql();m.current={confirm:((C=E.buttons[L.menuConfirm])==null?void 0:C.pressed)||!1,back:((P=E.buttons[L.menuBack])==null?void 0:P.pressed)||!1,altConfirm:((T=E.buttons[L.menuAltConfirm])==null?void 0:T.pressed)||!1}}}catch{}}},[r]);const w=v.useCallback(C=>{if(!C||C.length<2)return null;const P=C[0],T=C[1];return Math.abs(P)<k&&Math.abs(T)<k?null:Math.abs(P)>Math.abs(T)?P>0?"right":"left":T>0?"down":"up"},[]),S=v.useCallback(()=>{var J,Q,pe,Ye,le,Le,Se,wt,Ot,te;if(!r||e===0)return;const C=navigator.getGamepads(),P=Array.from(C).find(Y=>Y&&Y.connected);if(!P)return;const T=Date.now(),j=w(P.axes),E=(Y,Pe)=>{const oe=`nav_${Y}`,qe=b.current[oe+"_pressed"]||!1,Dn=b.current[oe+"_start"]||0,Z=d.current[oe]||0;if(Pe&&!qe){b.current[oe+"_pressed"]=!0,b.current[oe+"_start"]=T,d.current[oe]=T,L(Y);return}if(Pe&&qe){T-Dn>=x&&T-Z>=g&&(d.current[oe]=T,L(Y));return}!Pe&&qe&&(b.current[oe+"_pressed"]=!1)},L=Y=>{u(Pe=>{let oe=Pe;if(y.current){const qe=y.current[Pe];return qe&&qe[Y]!==void 0?qe[Y]:Pe}if(i===1)Y==="up"||Y==="left"?(oe=Pe-1,oe<0&&(oe=o?e-1:0)):(Y==="down"||Y==="right")&&(oe=Pe+1,oe>=e&&(oe=o?0:e-1));else{const qe=Math.floor(Pe/i),Dn=Pe%i,Z=Math.ceil(e/i);Y==="up"?oe=(qe-1<0?o?Z-1:0:qe-1)*i+Dn:Y==="down"?oe=(qe+1>=Z?o?0:Z-1:qe+1)*i+Dn:Y==="left"?(oe=Pe-1,oe<0&&(oe=o?e-1:0)):Y==="right"&&(oe=Pe+1,oe>=e&&(oe=o?0:e-1)),oe>=e&&(oe=e-1)}return oe});try{P.vibrationActuator&&P.vibrationActuator.playEffect("dual-rumble",{duration:30,strongMagnitude:.05,weakMagnitude:.03})}catch{}},A=((J=P.buttons[12])==null?void 0:J.pressed)||j==="up",N=((Q=P.buttons[13])==null?void 0:Q.pressed)||j==="down",_=((pe=P.buttons[14])==null?void 0:pe.pressed)||j==="left",se=((Ye=P.buttons[15])==null?void 0:Ye.pressed)||j==="right";s?(E("up",A),E("down",N),E("left",_),E("right",se)):(E("left",_),E("right",se));const I=Ql(),W=I.menuConfirm,R=I.menuBack,B=I.menuAltConfirm,G=(le=P.buttons[W])==null?void 0:le.pressed,H=m.current.confirm;if(G&&!H){(Le=p.current)==null||Le.call(p,h.current);try{P.vibrationActuator&&P.vibrationActuator.playEffect("dual-rumble",{duration:50,strongMagnitude:.15,weakMagnitude:.1})}catch{}}const $=(Se=P.buttons[R])==null?void 0:Se.pressed,z=m.current.back;$&&!z&&((wt=f.current)==null||wt.call(f));let K=!1;if(B!==W){K=(Ot=P.buttons[B])==null?void 0:Ot.pressed;const Y=m.current.altConfirm;K&&!Y&&((te=p.current)==null||te.call(p,h.current))}m.current={confirm:G,back:$,altConfirm:K}},[r,e,i,o,s,w]);return v.useEffect(()=>{if(!r)return;const C=setInterval(S,16);return()=>clearInterval(C)},[r,S]),{selectedIndex:c,setSelectedIndex:u}}const eS=({score:e,onRestart:t,onBackToMenu:n})=>{const{t:r}=Re(),s=typeof e=="number"?e:e.points,i=typeof e=="object"?e.level:1,o=typeof e=="object"?e.lines:0,a=[t,n],c=v.useCallback(m=>{var g;(g=a[m])==null||g.call(a)},[t,n]),{selectedIndex:u}=$e({itemCount:2,onConfirm:c,active:!0,wrap:!0}),h=m=>m<1e3?r("gameOver.msgLow"):m<5e3?r("gameOver.msgMed"):m<1e4?r("gameOver.msgHigh"):r("gameOver.msgTop"),d=m=>m<1e3?"":m<5e3?"":m<1e4?"":"";return l.jsx(M.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",children:l.jsx(M.div,{initial:{scale:.8,y:20},animate:{scale:1,y:0},transition:{type:"spring",damping:15},className:"bg-gray-900/90 p-8 rounded-2xl border-2 border-white/20 shadow-2xl max-w-md w-full mx-4 max-h-[90vh] overflow-y-auto",children:l.jsxs("div",{className:"text-center",children:[l.jsx(M.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring"},className:"text-6xl mb-4",children:d(s)}),l.jsx(M.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"text-3xl font-cat font-bold text-white mb-2",children:r("gameOver.title")}),l.jsx(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-gradient-to-r from-yellow-400 to-orange-400 text-gray-900 font-bold text-xl p-3 rounded-lg mb-4",children:r("gameOver.points",{score:s.toLocaleString()})}),l.jsx(M.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"text-white/80 mb-6 text-lg",children:h(s)}),l.jsx(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.55},children:l.jsx(Zb,{scoreData:{score:s,level:i,lines:o}})}),l.jsxs(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"space-y-3 mt-4",children:[l.jsx(M.button,{onClick:m=>{m.stopPropagation(),t()},whileHover:{scale:1.05},whileTap:{scale:.95},className:`w-full bg-gradient-to-r from-green-500 to-emerald-600 text-white font-bold py-3 px-6 rounded-lg hover:from-green-400 hover:to-emerald-500 transition-all duration-300 shadow-lg ${u===0?"ring-2 ring-yellow-400 ring-offset-2 ring-offset-gray-900 scale-105":""}`,children:r("gameOver.playAgain")}),l.jsx(M.button,{onClick:m=>{m.stopPropagation(),n()},whileHover:{scale:1.05},whileTap:{scale:.95},className:`w-full bg-gradient-to-r from-blue-500 to-cyan-600 text-white font-bold py-3 px-6 rounded-lg hover:from-blue-400 hover:to-cyan-500 transition-all duration-300 shadow-lg ${u===1?"ring-2 ring-yellow-400 ring-offset-2 ring-offset-gray-900 scale-105":""}`,children:r("gameOver.backToMenu")})]}),l.jsxs(M.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},className:"mt-6 text-center text-white/60 text-sm",children:[l.jsx("p",{children:r("gameOver.tip1")}),l.jsx("p",{children:r("gameOver.tip2")})]})]})})})},tS=({pieces:e})=>{const{t}=Re(),n=(r,s)=>{if(!r)return null;const i=Math.max(...r.shape.map(a=>a.length)),o=r.shape.length;return l.jsx("div",{className:"bg-gray-800/50 p-1.5 rounded-lg border border-white/20",children:l.jsx("div",{className:"flex justify-center",children:l.jsx("div",{className:"grid gap-1",style:{gridTemplateColumns:`repeat(${i}, 1fr)`,gridTemplateRows:`repeat(${o}, 1fr)`},children:r.shape.map((a,c)=>a.map((u,h)=>l.jsx("div",{className:`w-5 h-5 rounded-sm flex items-center justify-center ${u?"border border-white/40 shadow-sm":""}`,style:{backgroundColor:u?Dr(r.color):"transparent"},children:u&&u!==0?l.jsx("span",{className:"text-xs leading-none",children:r.emoji}):null},`${h}-${c}`)))})})},s)};return l.jsxs("div",{className:"bg-gray-900/50 p-2 rounded-xl border-2 border-white/20 shadow-2xl w-24",children:[l.jsxs("h2",{className:"text-xs font-bold text-white mb-1 text-center flex items-center justify-center gap-1",children:[l.jsx("span",{children:""}),l.jsx("span",{className:"hidden lg:inline",children:t("game.next")})]}),l.jsx("div",{className:"space-y-1.5",children:e.map((r,s)=>n(r,s))})]})},er=ce.memo(tS),nS=({heldPiece:e,canHold:t})=>{const{t:n}=Re(),r=()=>{if(!e)return l.jsx("div",{className:"bg-gray-800/50 p-2 lg:p-4 rounded-lg border-2 border-dashed border-white/20 flex items-center justify-center",children:l.jsx("span",{className:"text-white/40 text-xs lg:text-sm",children:n("game.heldEmpty")})});const s=Math.max(...e.shape.map(o=>o.length)),i=e.shape.length;return l.jsx("div",{className:"bg-gray-800/50 p-1.5 rounded-lg border border-white/20",children:l.jsx("div",{className:"flex justify-center",children:l.jsx("div",{className:"grid gap-1",style:{gridTemplateColumns:`repeat(${s}, 1fr)`,gridTemplateRows:`repeat(${i}, 1fr)`},children:e.shape.map((o,a)=>o.map((c,u)=>l.jsx("div",{className:`w-5 h-5 rounded-sm flex items-center justify-center ${c?"border border-white/40 shadow-sm":""}`,style:{backgroundColor:c?Dr(e.color):"transparent"},children:c&&c!==0?l.jsx("span",{className:"text-xs leading-none",children:e.emoji}):null},`${u}-${a}`)))})})})};return l.jsxs("div",{className:"bg-gray-900/50 p-2 rounded-xl border-2 border-white/20 shadow-2xl w-24",children:[l.jsxs("h2",{className:"text-xs font-bold text-white mb-1 text-center flex items-center justify-center gap-1",children:[l.jsx("span",{children:""}),l.jsx("span",{className:"hidden lg:inline",children:n("game.held")})]}),l.jsx("div",{children:r()})]})},tr=ce.memo(nS),Gh=500,Ga="cat_tetris_error_log";class rS{constructor(){this.logs=this._loadLogs(),this.sessionId=`session_${Date.now()}_${Math.random().toString(36).substr(2,6)}`,this._gameStateProvider=null,this._setupGlobalHandlers()}_loadLogs(){try{const t=localStorage.getItem(Ga);return t?JSON.parse(t):[]}catch{return[]}}_saveLogs(){try{this.logs.length>Gh&&(this.logs=this.logs.slice(-Gh)),localStorage.setItem(Ga,JSON.stringify(this.logs))}catch{this.logs=this.logs.slice(-50);try{localStorage.setItem(Ga,JSON.stringify(this.logs))}catch{}}}_setupGlobalHandlers(){typeof window>"u"||(window.addEventListener("error",t=>{var n;this.logError("window","uncaughtError",t.message,{filename:t.filename,lineno:t.lineno,colno:t.colno,stack:(n=t.error)==null?void 0:n.stack})}),window.addEventListener("unhandledrejection",t=>{var n;this.logError("window","unhandledRejection",String(t.reason),{stack:(n=t.reason)==null?void 0:n.stack,type:typeof t.reason})}))}setGameStateProvider(t){this._gameStateProvider=t}_getGameStateSnapshot(){var t,n,r,s,i,o;if(!this._gameStateProvider)return null;try{const a=this._gameStateProvider();return a?{isPlaying:a.isPlaying,isPaused:a.isPaused,gameOver:a.gameOver,score:(t=a.score)==null?void 0:t.points,level:(n=a.score)==null?void 0:n.level,lines:(r=a.score)==null?void 0:r.lines,currentPiece:(s=a.currentPiece)==null?void 0:s.type,gameMode:((i=a.gameMode)==null?void 0:i.id)||((o=a.gameMode)==null?void 0:o.name)||null}:null}catch(a){return{snapshotError:a.message}}}logError(t,n,r,s=null){const i={id:`${Date.now()}_${Math.random().toString(36).substr(2,4)}`,timestamp:new Date().toISOString(),sessionId:this.sessionId,level:"error",source:t,action:n,message:r,details:s,gameState:this._getGameStateSnapshot()};return this.logs.push(i),this._saveLogs(),i}logWarn(t,n,r,s=null){const i={id:`${Date.now()}_${Math.random().toString(36).substr(2,4)}`,timestamp:new Date().toISOString(),sessionId:this.sessionId,level:"warn",source:t,action:n,message:r,details:s,gameState:this._getGameStateSnapshot()};return this.logs.push(i),this._saveLogs(),i}getErrors(){return this.logs.filter(t=>t.level==="error")}clearLogs(){this.logs=[],this._saveLogs()}}const Bt=new rS;function sS({error:e}){const{t}=Re();return l.jsx("div",{className:"min-h-screen cat-bg flex items-center justify-center p-4",children:l.jsxs("div",{className:"game-container rounded-2xl p-6 shadow-2xl text-center",children:[l.jsx("h1",{className:"text-3xl font-cat font-bold text-white mb-4",children:t("error.title")}),l.jsx("p",{className:"text-white/80 mb-4",children:t("error.message")}),l.jsx("button",{onClick:()=>window.location.reload(),className:"bg-gradient-to-r from-cat-green to-cat-blue text-white font-bold py-3 px-6 rounded-xl hover:from-cat-blue hover:to-cat-green transition-all duration-200 border-2 border-white/30",children:t("error.restart")}),!1]})})}class iS extends ce.Component{constructor(t){super(t),this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,n){Bt.logError("ErrorBoundary","componentDidCatch",t.message,{stack:t.stack,componentStack:n==null?void 0:n.componentStack})}render(){return this.state.hasError?l.jsx(sS,{error:this.state.error}):this.props.children}}let Vt=null,Fh=!1;function oS(){Vt&&Vt.state==="suspended"&&Vt.resume().catch(()=>{})}function aS(){Fh||(Fh=!0,["click","touchstart","keydown"].forEach(e=>{document.addEventListener(e,oS,{once:!1,passive:!0})}))}function Ur(){if(Vt)return Vt.state==="suspended"&&Vt.resume().catch(()=>{}),Vt;try{return Vt=new(window.AudioContext||window.webkitAudioContext),aS(),Vt}catch{return null}}function lS(){const e=v.useCallback((a,c,u="sine")=>{const h=Ur();if(h)try{const d=h.createOscillator(),m=h.createGain();d.connect(m),m.connect(h.destination),d.frequency.setValueAtTime(a,h.currentTime),d.type=u,m.gain.setValueAtTime(.1,h.currentTime),m.gain.exponentialRampToValueAtTime(.001,h.currentTime+c),d.start(h.currentTime),d.stop(h.currentTime+c)}catch{}},[]),t=v.useCallback(()=>{e(523,.1)},[e]),n=v.useCallback(()=>{e(659,.2),setTimeout(()=>e(784,.15),50)},[e]),r=v.useCallback(()=>{e(440,.15),setTimeout(()=>e(330,.1),80)},[e]),s=v.useCallback(()=>{e(392,.1),setTimeout(()=>e(494,.1),100),setTimeout(()=>e(588,.15),200)},[e]),i=v.useCallback(()=>{const a=Ur();if(a)try{((h,d,m=.3)=>{h.forEach(g=>{const x=a.createOscillator(),b=a.createGain();x.connect(b),b.connect(a.destination),x.frequency.setValueAtTime(g,a.currentTime),x.type="triangle",b.gain.setValueAtTime(.05,a.currentTime+d),b.gain.exponentialRampToValueAtTime(.001,a.currentTime+d+m),x.start(a.currentTime+d),x.stop(a.currentTime+d+m)})})([523,659,784,1047],0,.5)}catch{}},[]),o=v.useCallback(()=>{e(698,.15),setTimeout(()=>e(880,.15),100),setTimeout(()=>e(1047,.2),200)},[e]);return{playMenuHover:t,playMenuSelect:n,playMenuBack:r,playMenuOpen:s,playGameStart:i,playPWAInstall:o}}class cS{constructor(){this.services=new Map,this.singletons=new Map}register(t,n,r={}){this.services.set(t,{factory:n,singleton:r.singleton||!1,dependencies:r.dependencies||[]})}resolve(t){const n=this.services.get(t);if(!n)throw new Error(`Service '${t}' not found in container`);if(n.singleton&&this.singletons.has(t))return this.singletons.get(t);const r=n.dependencies.map(i=>this.resolve(i)),s=n.factory(...r);return n.singleton&&this.singletons.set(t,s),s}registerSingleton(t,n,r=[]){this.register(t,n,{singleton:!0,dependencies:r})}registerTransient(t,n,r=[]){this.register(t,n,{singleton:!1,dependencies:r})}has(t){return this.services.has(t)}clear(){this.services.clear(),this.singletons.clear()}}class uS{initializeGame(){throw new Error("Must be implemented")}movePiece(t){throw new Error("Must be implemented")}rotatePiece(){throw new Error("Must be implemented")}rotatePieceLeft(){throw new Error("Must be implemented")}placePiece(){throw new Error("Must be implemented")}holdPiece(){throw new Error("Must be implemented")}hardDrop(){throw new Error("Must be implemented")}updateGame(t){throw new Error("Must be implemented")}pause(){throw new Error("Must be implemented")}resume(){throw new Error("Must be implemented")}restart(){throw new Error("Must be implemented")}getDropPreview(){throw new Error("Must be implemented")}}class Co{constructor(t=10,n=20){this.width=t,this.height=n,this.bufferHeight=4,this.grid=this.createEmptyGrid(),this._buffer=this.createEmptyBuffer()}createEmptyGrid(){return Array(this.height).fill(null).map(()=>Array(this.width).fill(null))}createEmptyBuffer(){return Array(this.bufferHeight).fill(null).map(()=>Array(this.width).fill(null))}clone(){const t=new Co(this.width,this.height);return t.grid=this.grid.map(n=>[...n]),t._buffer=this._buffer.map(n=>[...n]),t}isWithinBounds(t,n){return t>=0&&t<this.width&&n>=-this.bufferHeight&&n<this.height}getCell(t,n){if(!(t<0||t>=this.width)&&!(n<-this.bufferHeight||n>=this.height))return n<0?this._buffer[this.bufferHeight+n][t]:this.grid[n][t]}setCell(t,n,r){return t<0||t>=this.width||n<-this.bufferHeight||n>=this.height?!1:n<0?(this._buffer[this.bufferHeight+n][t]=r,!0):(this.grid[n][t]=r,!0)}clearCell(t,n){return this.setCell(t,n,null)}placePiece(t){t.getCells().forEach(r=>{this.setCell(r.x,r.y,{type:r.type,color:r.color,emoji:r.emoji})})}canPlacePiece(t){return t.getCells().every(r=>r.x<0||r.x>=this.width||r.y>=this.height||r.y<-this.bufferHeight?!1:this.getCell(r.x,r.y)===null)}clearLines(){const t=[...this._buffer,...this.grid],n=[];let r=0;for(let s=t.length-1;s>=0;s--)t[s].every(o=>o!==null)?r++:n.unshift(t[s]);for(;n.length<t.length;)n.unshift(Array(this.width).fill(null));return this._buffer=n.slice(0,this.bufferHeight),this.grid=n.slice(this.bufferHeight),r}getFilledRows(){const t=[];for(let n=0;n<this.height;n++)this.grid[n].every(r=>r!==null)&&t.push(n);return t}isGameOver(){return this._buffer.some(t=>t.some(n=>n!==null))}getBoardState(){return this.grid.map(t=>[...t])}setBoardState(t){this.grid=t.map(n=>[...n]),this._buffer=this.createEmptyBuffer()}clear(){this.grid=this.createEmptyGrid(),this._buffer=this.createEmptyBuffer()}addGarbageLines(t,n=-1){if(t<=0)return!1;const r=n>=0?n:Math.floor(Math.random()*this.width),s=[];for(let h=0;h<t;h++){const d=Array(this.width).fill(null).map((m,g)=>g===r?null:{type:"garbage",color:"#808080",emoji:""});s.push(d)}const i=[...this._buffer,...this.grid,...s],o=this.bufferHeight+this.height,c=(i.length>o?i.slice(0,i.length-o):[]).some(h=>h.some(d=>d!==null)),u=i.slice(-o);return this._buffer=u.slice(0,this.bufferHeight),this.grid=u.slice(this.bufferHeight),c}}class ko{constructor(){this.points=0,this.level=1,this.lines=0,this.combo=0,this.tSpins=0,this.backToBack=0,this.tetrisCount=0,this._fixedLevel=null}addPoints(t){this.points+=t}addLines(t){this.lines+=t,this.updateLevel()}incrementCombo(){this.combo++}resetCombo(){this.combo=0}addTSpin(){this.tSpins++}addBackToBack(){this.backToBack++}addTetris(){this.tetrisCount++}updateLevel(){this._fixedLevel||(this.level=Math.min(15,Math.floor(this.lines/10)+1))}getLevel(){return this.level}getDropTime(){const t=this._fixedLevel||this.level;return[1e3,793,618,473,355,262,190,135,94,64,43,28,18,11,7][Math.min(t,15)-1]||7}reset(){this.points=0,this.level=1,this.lines=0,this.combo=0,this.tSpins=0,this.backToBack=0,this.tetrisCount=0,this._fixedLevel=null}clone(){const t=new ko;return t.points=this.points,t.level=this.level,t.lines=this.lines,t.combo=this.combo,t.tSpins=this.tSpins,t.backToBack=this.backToBack,t.tetrisCount=this.tetrisCount,t._fixedLevel=this._fixedLevel,t}toJSON(){return{points:this.points,level:this.level,lines:this.lines,combo:this.combo,tSpins:this.tSpins,backToBack:this.backToBack,tetrisCount:this.tetrisCount,_fixedLevel:this._fixedLevel}}}class _t{constructor(t,n,r,s,i,o=!1,a=0){this.type=t,this.shape=n,this.color=r,this.emoji=s,this.position=i,this.isTSpin=o,this.rotationState=a}move(t,n){return new _t(this.type,this.shape,this.color,this.emoji,{x:this.position.x+t,y:this.position.y+n},this.isTSpin,this.rotationState)}rotate(){const t=this.shape[0].map((n,r)=>this.shape.map(s=>s[r]).reverse());return new _t(this.type,t,this.color,this.emoji,this.position,this.isTSpin,(this.rotationState+1)%4)}setTSpin(t){return new _t(this.type,this.shape,this.color,this.emoji,this.position,t,this.rotationState)}clone(){return new _t(this.type,this.shape.map(t=>[...t]),this.color,this.emoji,{...this.position},this.isTSpin,this.rotationState)}reset(t,n,r,s,i,o=!1){return this.type=t,this.shape=n,this.color=r,this.emoji=s,this.position=i,this.isTSpin=o,this.rotationState=0,this}getWidth(){var t;return((t=this.shape[0])==null?void 0:t.length)||0}getHeight(){return this.shape.length||0}getCells(){const t=[];return this.shape.forEach((n,r)=>{n.forEach((s,i)=>{s&&t.push({x:this.position.x+i,y:this.position.y+r,type:this.type,color:this.color,emoji:this.emoji})})}),t}}class dS{calculateScore(t,n,r,s,i){throw new Error("Must be implemented")}calculateSoftDropPoints(){throw new Error("Must be implemented")}calculateTSpinBonus(t){throw new Error("Must be implemented")}calculateBackToBackBonus(t){throw new Error("Must be implemented")}calculateComboBonus(t){throw new Error("Must be implemented")}}class Nn extends dS{calculateScore(t,n,r,s,i){let o=this.getBasePoints(t);return s&&(o=this.calculateTSpinBonus(t)),i&&(o=this.calculateBackToBackBonus(o)),o*=n,o+=this.calculateComboBonus(r),o}calculateSoftDropPoints(){return 1}calculateTSpinBonus(t){return[0,800,1200,1600,2e3][t]||0}calculateBackToBackBonus(t){return Math.floor(t*1.5)}calculateComboBonus(t){return t*50}getBasePoints(t){return[0,100,300,500,800][t]||0}}const ze={BOARD_WIDTH:10,BOARD_HEIGHT:20,BUFFER_ROWS:4,INITIAL_DROP_TIME:1e3,LOCK_DELAY:500,SOFT_DROP_MULTIPLIER:20,NEXT_PIECES_COUNT:3,BAG_SIZE:7,KICK_OFFSETS:[{x:-1,y:0},{x:1,y:0},{x:0,y:-1},{x:-1,y:-1},{x:1,y:-1}],SRS_KICKS_CW:{"0>1":[{x:-1,y:0},{x:-1,y:-1},{x:0,y:2},{x:-1,y:2}],"1>2":[{x:1,y:0},{x:1,y:1},{x:0,y:-2},{x:1,y:-2}],"2>3":[{x:1,y:0},{x:1,y:-1},{x:0,y:2},{x:1,y:2}],"3>0":[{x:-1,y:0},{x:-1,y:1},{x:0,y:-2},{x:-1,y:-2}]},SRS_KICKS_CCW:{"1>0":[{x:1,y:0},{x:1,y:1},{x:0,y:-2},{x:1,y:-2}],"2>1":[{x:-1,y:0},{x:-1,y:-1},{x:0,y:2},{x:-1,y:2}],"3>2":[{x:-1,y:0},{x:-1,y:1},{x:0,y:-2},{x:-1,y:-2}],"0>3":[{x:1,y:0},{x:1,y:-1},{x:0,y:2},{x:1,y:2}]},DROP_TIMES:[1e3,850,700,600,500,400,350,300,250,200,150,100,80,60,50],LEVEL_LINES_REQUIREMENT:10,MAX_LEVEL:15};class nr extends uS{constructor(t,n,r,s=new Nn){super(),this.pieceFactory=t,this.movementStrategyFactory=n,this.gameRepository=r,this.scoringService=s,this.board=new Co(ze.BOARD_WIDTH,ze.BOARD_HEIGHT),this.score=new ko,this.currentPiece=null,this.nextPieces=[],this.heldPiece=null,this.canHold=!0,this.isPlaying=!1,this.isPaused=!1,this.gameOver=!1,this.lastDropTime=0,this.backToBack=!1,this._lockDelayActive=!1,this._lockDelayElapsed=0,this._lockDelayResets=0,this._lockDelayMax=ze.LOCK_DELAY,this._lockDelayMaxResets=15,this.gameMode=null,this.modeTimeElapsed=0,this.modeStartTime=0,this.pendingGarbage=0,this._lastAttack=0,this._dirty=!0,this._cachedState=null}_markDirty(){this._dirty=!0,this._cachedState=null}get isDirty(){return this._dirty}clearDirty(){this._dirty=!1}initializeGame(){this.pieceFactory.resetBag(),this.board=new Co(ze.BOARD_WIDTH,ze.BOARD_HEIGHT),this.score=new ko,this.currentPiece=this.pieceFactory.createRandomPiece(),this.nextPieces=this.pieceFactory.createNextPieces(ze.NEXT_PIECES_COUNT),this.heldPiece=null,this.canHold=!0,this.isPlaying=!1,this.isPaused=!1,this.gameOver=!1,this.lastDropTime=0,this.backToBack=!1,this._lockDelayActive=!1,this._lockDelayElapsed=0,this._lockDelayResets=0,this.modeTimeElapsed=0,this.modeStartTime=Date.now(),this.pendingGarbage=0,this._lastAttack=0,this.applyGameMode(),O.emit(F.GAME_INITIALIZED),this._markDirty()}setGameMode(t){this.gameMode=t}applyGameMode(){if(!this.gameMode||!this.gameMode.rules)return;const t=this.gameMode.rules;t.startLevel&&(this.score.level=t.startLevel),t.fixedLevel?this.score._fixedLevel=t.fixedLevel:this.score._fixedLevel=null,this._modeRules=t}movePiece(t){var n,r;if(!(!this.currentPiece||this.gameOver||this.isPaused))try{const s=this.movementStrategyFactory.createStrategy(t),i=s.execute(this.currentPiece,this.board.grid);if(i!==this.currentPiece){if(this.currentPiece=i,this._markDirty(),t==="down"){if(this._lockDelayActive=!1,this._lockDelayElapsed=0,this.lastDropTime=0,s.getSoftDropPoints){const o=this.scoringService.calculateSoftDropPoints();this.score.addPoints(o)}}else(t==="left"||t==="right")&&(this._resetLockDelay(),this._checkUngrounded());O.emit(F.PIECE_MOVED,{direction:t,piece:i})}else t==="down"&&(this._markDirty(),this._lockDelayActive||(this._lockDelayActive=!0,this._lockDelayElapsed=0,this._lockDelayResets=0))}catch(s){Bt.logError("GameService","movePiece",s.message,{direction:t,pieceType:(n=this.currentPiece)==null?void 0:n.type,piecePos:(r=this.currentPiece)==null?void 0:r.position,stack:s.stack})}}rotatePiece(){var t,n;if(!(!this.currentPiece||this.gameOver||this.isPaused))try{const s=this.movementStrategyFactory.createStrategy("rotate").execute(this.currentPiece,this.board.grid);s!==this.currentPiece&&(this.currentPiece=s,this._markDirty(),this._resetLockDelay(),this._checkUngrounded(),O.emit(F.PIECE_ROTATED,{piece:s}))}catch(r){Bt.logError("GameService","rotatePiece",r.message,{pieceType:(t=this.currentPiece)==null?void 0:t.type,piecePos:(n=this.currentPiece)==null?void 0:n.position,stack:r.stack})}}rotatePieceLeft(){var t,n;if(!(!this.currentPiece||this.gameOver||this.isPaused))try{const s=this.movementStrategyFactory.createStrategy("rotateLeft").execute(this.currentPiece,this.board.grid);s!==this.currentPiece&&(this.currentPiece=s,this._markDirty(),this._resetLockDelay(),this._checkUngrounded(),O.emit(F.PIECE_ROTATED,{piece:s}))}catch(r){Bt.logError("GameService","rotatePieceLeft",r.message,{pieceType:(t=this.currentPiece)==null?void 0:t.type,piecePos:(n=this.currentPiece)==null?void 0:n.position,stack:r.stack})}}placePiece(){var n,r;if(!this.currentPiece)return;this._markDirty(),this._lockDelayActive=!1,this._lockDelayElapsed=0,this._lockDelayResets=0,this._lastAttack=0,this.board.placePiece(this.currentPiece);const t=this.board.clearLines();if(t>0){this.score.addLines(t),this.score.incrementCombo();const s=this.currentPiece.isTSpin,i=this.backToBack,o=this.scoringService.calculateScore(t,this.score.getLevel(),this.score.combo,s,this.backToBack);if(this.score.addPoints(o),s||t===4?(this.backToBack&&O.emit(F.BACK_TO_BACK),this.backToBack=!0,s&&(this.score.addTSpin(),O.emit(F.T_SPIN,{linesCleared:t}))):this.backToBack=!1,O.emit(F.LINE_CLEARED,{linesCleared:t}),O.emit(F.SCORE_UPDATED,{score:this.score.points,level:this.score.level,combo:this.score.combo,points:o,isTSpin:s}),this._lastAttack=this._calculateAttack(t,s,this.score.combo,i),this._lastAttack>0&&this.pendingGarbage>0){const a=Math.min(this._lastAttack,this.pendingGarbage);this._lastAttack-=a,this.pendingGarbage-=a}}else this.score.resetCombo();if(O.emit(F.PIECE_PLACED,{piece:this.currentPiece,linesCleared:t}),this.pendingGarbage>0){const s=this.board.addGarbageLines(this.pendingGarbage);if(this.pendingGarbage=0,s&&this.board.isGameOver()){this.gameOver=!0,O.emit(F.GAME_OVER);return}}if(this.getNextPiece(),this.canHold=!0,(n=this._modeRules)!=null&&n.lineGoal&&this.score.lines>=this._modeRules.lineGoal){this.gameOver=!0,O.emit(F.GAME_OVER);return}if(((r=this._modeRules)==null?void 0:r.gameOver)===!1){if(this.board.isGameOver()){this.board._buffer=this.board.createEmptyBuffer();for(let s=0;s<4;s++)for(let i=0;i<this.board.width;i++)this.board.clearCell(i,s)}}else this.board.isGameOver()&&(this.gameOver=!0,O.emit(F.GAME_OVER))}_calculateAttack(t,n,r,s){if(t===0)return 0;let i=0;if(n?i=[0,2,4,6][t]||0:i=[0,0,1,2,4][t]||0,s&&(n||t===4)&&(i+=1),r>=1){const a=[0,0,1,1,2,2,3,3,4,4];i+=a[Math.min(r,a.length-1)]||4}return this.board.grid.every(a=>a.every(c=>c===null))&&(i=10),i}receiveGarbage(t){t>0&&(this.pendingGarbage+=t,this._markDirty())}consumeAttack(){const t=this._lastAttack;return this._lastAttack=0,t}holdPiece(){var t,n;if(!(!this.canHold||!this.currentPiece)){this._lockDelayActive=!1,this._lockDelayElapsed=0,this._lockDelayResets=0;try{const r=this.heldPiece,s=this.currentPiece.type,i=$t[s];if(this.heldPiece=new _t(s,i.shape,i.color,i.emoji,{x:3,y:0},!1,0),r){const o=r.type==="I"?{x:3,y:-2}:{x:3,y:0},a=$t[r.type];this.currentPiece=new _t(r.type,a.shape,a.color,a.emoji,o,!1,0)}else this.getNextPiece();this.canHold=!1,this._markDirty(),O.emit(F.PIECE_HELD,{heldPiece:this.heldPiece})}catch(r){Bt.logError("GameService","holdPiece",r.message,{currentPieceType:(t=this.currentPiece)==null?void 0:t.type,heldPieceType:(n=this.heldPiece)==null?void 0:n.type,stack:r.stack})}}}hardDrop(){var t,n;if(!(!this.currentPiece||this.gameOver||this.isPaused))try{this._lockDelayActive=!1,this._lockDelayElapsed=0;const s=this.movementStrategyFactory.createStrategy("hardDrop").execute(this.currentPiece,this.board.grid);this.currentPiece=s.piece,this.score.addPoints(s.dropDistance),this._markDirty();const i=this.currentPiece;O.emit(F.HARD_DROP,{dropDistance:s.dropDistance}),O.emit(F.PIECE_MOVED,{direction:"hardDrop",piece:i}),this.placePiece()}catch(r){Bt.logError("GameService","hardDrop",r.message,{pieceType:(t=this.currentPiece)==null?void 0:t.type,piecePos:(n=this.currentPiece)==null?void 0:n.position,stack:r.stack})}}updateGame(t){var n;if(!(!this.isPlaying||this.gameOver||this.isPaused)){if((n=this._modeRules)!=null&&n.timeLimit&&(this.modeTimeElapsed=(Date.now()-this.modeStartTime)/1e3,this.modeTimeElapsed>=this._modeRules.timeLimit)){this.gameOver=!0,this._markDirty(),O.emit(F.GAME_OVER);return}if(this._lockDelayActive){if(this._lockDelayElapsed+=t,this._lockDelayElapsed>=this._lockDelayMax){this._lockDelayActive=!1,this._lockDelayElapsed=0,this.placePiece(),this.lastDropTime=0;return}return}this.lastDropTime+=t,this.lastDropTime>=this.score.getDropTime()&&(this.movePiece("down"),this.lastDropTime=0)}}_resetLockDelay(){this._lockDelayActive&&this._lockDelayResets<this._lockDelayMaxResets&&(this._lockDelayElapsed=0,this._lockDelayResets++)}_checkUngrounded(){if(!this._lockDelayActive||!this.currentPiece)return;this.board.canPlacePiece(this.currentPiece.move(0,1))&&(this._lockDelayActive=!1,this._lockDelayElapsed=0,this._lockDelayResets=0)}pause(){this.isPaused=!0,this._markDirty(),O.emit(F.GAME_PAUSED)}resume(){this.isPaused=!1,this.isPlaying=!0,this._markDirty(),O.emit(F.GAME_RESUMED)}restart(){this.initializeGame(),this.isPlaying=!0,this.isPaused=!1,this._markDirty()}getDropPreview(){if(!this.currentPiece)return null;let t=this.currentPiece,n=0;const r=20;for(;n<r&&this.board.canPlacePiece(t.move(0,1));)t=t.move(0,1),n++;return t}getNextPiece(){const t=this.nextPieces.shift();this.nextPieces.push(this.pieceFactory.createRandomPiece()),this.currentPiece=t,this.currentPiece&&!this.board.canPlacePiece(this.currentPiece)&&(this.gameOver=!0,this._markDirty(),O.emit(F.GAME_OVER))}getGameState(){var t;return this._cachedState&&!this._dirty?this._cachedState:(this._cachedState={board:this.board.grid.map(n=>[...n]),currentPiece:this.currentPiece,nextPieces:[...this.nextPieces],heldPiece:this.heldPiece,canHold:this.canHold,score:this.score.toJSON(),isPlaying:this.isPlaying,isPaused:this.isPaused,gameOver:this.gameOver,backToBack:this.backToBack,gameMode:this.gameMode,modeTimeElapsed:(t=this._modeRules)!=null&&t.timeLimit?Math.max(0,this._modeRules.timeLimit-(Date.now()-this.modeStartTime)/1e3):null},this._cachedState)}setGameState(t){this.board.setBoardState(t.board),this.currentPiece=t.currentPiece,this.nextPieces=t.nextPieces,this.heldPiece=t.heldPiece,this.canHold=t.canHold,this.isPlaying=t.isPlaying,this.isPaused=t.isPaused,this.gameOver=t.gameOver,this.backToBack=t.backToBack;const n=this.score._fixedLevel;Object.assign(this.score,t.score),n!=null&&t.score._fixedLevel==null&&(this.score._fixedLevel=n)}}class hS{saveHighScore(t){throw new Error("Must be implemented")}getHighScore(){throw new Error("Must be implemented")}saveSettings(t){throw new Error("Must be implemented")}getSettings(){throw new Error("Must be implemented")}saveGameState(t){throw new Error("Must be implemented")}getGameState(){throw new Error("Must be implemented")}clearGameState(){throw new Error("Must be implemented")}}class mS extends hS{constructor(){super(),this.highScoreKey="cat-tetris-high-score",this.settingsKey="cat-tetris-settings",this.gameStateKey="cat-tetris-game-state"}saveHighScore(t){localStorage.setItem(this.highScoreKey,t.toString())}getHighScore(){return parseInt(localStorage.getItem(this.highScoreKey)||"0")}saveSettings(t){localStorage.setItem(this.settingsKey,JSON.stringify(t))}getSettings(){const t=localStorage.getItem(this.settingsKey);return t?JSON.parse(t):{volume:80,gameSpeed:"normal",soundEnabled:!0,particlesEnabled:!0}}saveGameState(t){localStorage.setItem(this.gameStateKey,JSON.stringify(t))}getGameState(){const t=localStorage.getItem(this.gameStateKey);return t?JSON.parse(t):null}clearGameState(){localStorage.removeItem(this.gameStateKey)}load(t){const n=localStorage.getItem(`cat-tetris-${t}`);return n?JSON.parse(n):null}save(t,n){localStorage.setItem(`cat-tetris-${t}`,JSON.stringify(n))}remove(t){localStorage.removeItem(`cat-tetris-${t}`)}}class fS{createPiece(t,n){throw new Error("Must be implemented")}createRandomPiece(){throw new Error("Must be implemented")}createNextPieces(t){throw new Error("Must be implemented")}}class pS{execute(t,n){throw new Error("Must be implemented")}}class Qr extends pS{execute(t,n){throw new Error("execute method must be implemented")}movePiece(t,n,r,s){if(!t||!n||!Array.isArray(n))return t;const i={x:t.position.x+r,y:t.position.y+s};return this.isValidMove(t,n,i)?t.move(r,s):t}isValidMove(t,n,r){return!t||!t.shape||!n||!Array.isArray(n)?!1:t.shape.every((s,i)=>Array.isArray(s)?s.every((o,a)=>{if(!o)return!0;const c=r.x+a,u=r.y+i;return c<0||c>=ze.BOARD_WIDTH||u>=ze.BOARD_HEIGHT?!1:u<0?!0:n[u]&&Array.isArray(n[u])&&!n[u][c]}):!0)}}class gS extends Qr{execute(t,n){return this.movePiece(t,n,-1,0)}}class vS extends Qr{execute(t,n){return this.movePiece(t,n,1,0)}}class yS extends Qr{execute(t,n){if(!t||!n)return t;const r={x:t.position.x,y:t.position.y+1};return this.isValidMove(t,n,r)?t.move(0,1):t}getSoftDropPoints(){return 1}}class xS extends Qr{execute(t,n){var u;if(!t||!t.shape||!n)return t;const r=this.rotatePiece(t);let s=!1;if(this.isValidMove(r,n,r.position))return s=this.detectTSpin(r,n),r.setTSpin(s);const i=t.rotationState??0,o=(i+1)%4,a=`${i}>${o}`,c=((u=ze.SRS_KICKS_CW)==null?void 0:u[a])||ze.KICK_OFFSETS;for(const h of c){const d={x:r.position.x+h.x,y:r.position.y+h.y};if(this.isValidMove(r,n,d)){const m=r.move(h.x,h.y);return s=this.detectTSpin(m,n),m.setTSpin(s)}}return t}detectTSpin(t,n){return t.type!=="T"?!1:this.getCornerPositions(t).filter(o=>o.x<0||o.x>=ze.BOARD_WIDTH||o.y<0||o.y>=ze.BOARD_HEIGHT||n[o.y]&&n[o.y][o.x]).length>=3}getCornerPositions(t){const n=[],r=t.position.x,s=t.position.y;return n.push({x:r,y:s}),n.push({x:r+2,y:s}),n.push({x:r,y:s+2}),n.push({x:r+2,y:s+2}),n}rotatePiece(t){return!t||!t.shape||!Array.isArray(t.shape)||t.shape.length===0?t:t.rotate()}}class wS extends Qr{execute(t,n){var u;if(!t||!t.shape||!n)return t;const r=this.rotatePieceLeft(t);let s=!1;if(this.isValidMove(r,n,r.position))return s=this.detectTSpin(r,n),r.setTSpin(s);const i=t.rotationState??0,o=(i+3)%4,a=`${i}>${o}`,c=((u=ze.SRS_KICKS_CCW)==null?void 0:u[a])||ze.KICK_OFFSETS;for(const h of c){const d={x:r.position.x+h.x,y:r.position.y+h.y};if(this.isValidMove(r,n,d)){const m=r.move(h.x,h.y);return s=this.detectTSpin(m,n),m.setTSpin(s)}}return t}detectTSpin(t,n){return t.type!=="T"?!1:this.getCornerPositions(t).filter(o=>o.x<0||o.x>=ze.BOARD_WIDTH||o.y<0||o.y>=ze.BOARD_HEIGHT||n[o.y]&&n[o.y][o.x]).length>=3}getCornerPositions(t){const n=[],r=t.position.x,s=t.position.y;return n.push({x:r,y:s}),n.push({x:r+2,y:s}),n.push({x:r,y:s+2}),n.push({x:r+2,y:s+2}),n}rotatePieceLeft(t){if(!t||!t.shape||!Array.isArray(t.shape)||t.shape.length===0)return t;const n=t.shape[0].map((r,s)=>t.shape.map(i=>i[i.length-1-s]));return new _t(t.type,n,t.color,t.emoji,t.position,t.isTSpin,(t.rotationState+3)%4)}}class bS extends Qr{execute(t,n){if(!t||!n)return{piece:t,dropDistance:0};let r=t,s=0;for(;;){const i={x:r.position.x,y:r.position.y+1};if(this.isValidMove(r,n,i))r=r.move(0,1),s++;else break}return{piece:r,dropDistance:s}}}class Vh{constructor(){this.reset()}reset(){return this.piece={type:null,shape:[],color:"#000000",emoji:"",position:{x:3,y:0},isTSpin:!1},this}setType(t){return this.piece.type=t,this}setShape(t){return this.piece.shape=t,this}setColor(t){return this.piece.color=t,this}setEmoji(t){return this.piece.emoji=t,this}setPosition(t,n){return this.piece.position={x:t,y:n},this}setTSpin(t){return this.piece.isTSpin=t,this}build(){const t=new _t(this.piece.type,this.piece.shape,this.piece.color,this.piece.emoji,this.piece.position,this.piece.isTSpin);return this.reset(),t}}class rr extends fS{constructor(){super(),this.pieceConfigs=$t,this._bag=[],this._bagIndex=0}_refillBag(){this._bag=Object.keys(this.pieceConfigs);for(let t=this._bag.length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1));[this._bag[t],this._bag[n]]=[this._bag[n],this._bag[t]]}this._bagIndex=0}resetBag(){this._bag=[],this._bagIndex=0}_getNextType(){return this._bagIndex>=this._bag.length&&this._refillBag(),this._bag[this._bagIndex++]}createPiece(t,n={x:3,y:0}){const r=this.pieceConfigs[t];if(!r)throw new Error(`Tipo de pea invlido: ${t}`);return new Vh().setType(t).setShape(r.shape).setColor(r.color).setEmoji(r.emoji).setPosition(n.x,n.y).build()}createRandomPiece(){const t=this._getNextType(),n=this.pieceConfigs[t];let r={x:3,y:0};return t==="I"&&(r={x:3,y:-2}),new Vh().setType(t).setShape(n.shape).setColor(n.color).setEmoji(n.emoji).setPosition(r.x,r.y).build()}createNextPieces(t=3){const n=[];for(let r=0;r<t;r++)n.push(this.createRandomPiece());return n}registerPieceType(t,n){this.pieceConfigs[t]=n}getPieceTypes(){return Object.keys(this.pieceConfigs)}}class sr{constructor(){this.strategies=new Map,this.registerDefaultStrategies()}registerDefaultStrategies(){this.strategies.set("left",()=>new gS),this.strategies.set("right",()=>new vS),this.strategies.set("down",()=>new yS),this.strategies.set("rotate",()=>new xS),this.strategies.set("rotateLeft",()=>new wS),this.strategies.set("hardDrop",()=>new bS)}createStrategy(t){const n=this.strategies.get(t);if(!n)throw new Error(`Strategy type '${t}' not found`);return n()}registerStrategy(t,n){if(typeof n!="function")throw new Error("Strategy factory must be a function");this.strategies.set(t,n)}unregisterStrategy(t){this.strategies.delete(t)}getAvailableStrategies(){return Array.from(this.strategies.keys())}hasStrategy(t){return this.strategies.has(t)}}class SS{getSettings(){throw new Error("Method getSettings must be implemented")}saveSettings(t){throw new Error("Method saveSettings must be implemented")}updateSetting(t,n){throw new Error("Method updateSetting must be implemented")}resetSettings(){throw new Error("Method resetSettings must be implemented")}}class CS extends SS{constructor(){super(),this.storageKey="cat-tetris-settings",this.defaultSettings={volume:80,gameSpeed:"normal",soundEnabled:!0,particlesEnabled:!0}}getSettings(){try{const t=localStorage.getItem(this.storageKey);return t?{...this.defaultSettings,...JSON.parse(t)}:this.defaultSettings}catch{return this.defaultSettings}}saveSettings(t){try{const n={...this.defaultSettings,...t};return localStorage.setItem(this.storageKey,JSON.stringify(n)),n}catch{throw new Error("Failed to save settings")}}resetSettings(){try{return localStorage.removeItem(this.storageKey),this.defaultSettings}catch{throw new Error("Failed to reset settings")}}updateSetting(t,n){const s={...this.getSettings(),[t]:n};return this.saveSettings(s)}}class kS{getStats(){throw new Error("Method getStats must be implemented")}incrementPlayTime(){throw new Error("Method incrementPlayTime must be implemented")}incrementPiecesPlaced(){throw new Error("Method incrementPiecesPlaced must be implemented")}addLinesCleared(t){throw new Error("Method addLinesCleared must be implemented")}incrementTSpins(){throw new Error("Method incrementTSpins must be implemented")}updateMaxCombo(t){throw new Error("Method updateMaxCombo must be implemented")}reset(){throw new Error("Method reset must be implemented")}}class PS extends kS{constructor(){super(),this.stats={playTime:0,piecesPlaced:0,linesCleared:0,tSpins:0,backToBack:0,maxCombo:0,tetrisCount:0,linesPerSecond:0},this.sessionStartTime=Date.now()}getStats(){return{...this.stats}}incrementPlayTime(){this.stats.playTime+=1,this.calculateLinesPerSecond()}incrementPiecesPlaced(){this.stats.piecesPlaced+=1}addLinesCleared(t){this.stats.linesCleared+=t,t===4&&(this.stats.tetrisCount+=1),this.calculateLinesPerSecond()}incrementTSpins(){this.stats.tSpins+=1}incrementBackToBack(){this.stats.backToBack+=1}updateMaxCombo(t){t>this.stats.maxCombo&&(this.stats.maxCombo=t)}calculateLinesPerSecond(){this.stats.playTime>0?this.stats.linesPerSecond=this.stats.linesCleared/this.stats.playTime:this.stats.linesPerSecond=0}reset(){this.stats={playTime:0,piecesPlaced:0,linesCleared:0,tSpins:0,backToBack:0,maxCombo:0,tetrisCount:0,linesPerSecond:0},this.sessionStartTime=Date.now()}getSessionDuration(){return Date.now()-this.sessionStartTime}}class TS{registerHandler(t,n){throw new Error("Method registerHandler must be implemented")}unregisterHandler(t,n){throw new Error("Method unregisterHandler must be implemented")}startListening(){throw new Error("Method startListening must be implemented")}stopListening(){throw new Error("Method stopListening must be implemented")}setKeyMapping(t,n){throw new Error("Method setKeyMapping must be implemented")}getKeyMappings(){throw new Error("Method getKeyMappings must be implemented")}}class jS extends TS{constructor(){super();ii(this,"_handleKeyDown",n=>{if(this.preventDefaultKeys.includes(n.key)&&n.preventDefault(),n.repeat)return;const r=this.keyMappings[n.key];r&&(this._fireAction(r),this._dasActions.has(r)&&this._pressedKeys.set(n.key,{action:r,dasTimer:0,arrTimer:0,dasTriggered:!1}))});ii(this,"_handleKeyUp",n=>{this._pressedKeys.delete(n.key)});ii(this,"_handleBlur",()=>{this._pressedKeys.clear()});this.keyMappings={ArrowLeft:"moveLeft",ArrowRight:"moveRight",ArrowDown:"moveDown",ArrowUp:"rotate",x:"rotate",X:"rotate",z:"rotateLeft",Z:"rotateLeft"," ":"hardDrop",c:"hold",C:"hold",Shift:"hold",p:"pause",P:"pause",Escape:"pause"},this.preventDefaultKeys=["ArrowLeft","ArrowRight","ArrowDown","ArrowUp"," "],this.handlers=new Map,this.isListening=!1,this.das=167,this.arr=33,this.sdf=5,this._dasActions=new Set(["moveLeft","moveRight","moveDown"]),this._pressedKeys=new Map,this._rafId=null,this._lastTime=0}setDAS(n){this.das=Math.max(0,n)}setARR(n){this.arr=Math.max(0,n)}getDAS(){return this.das}getARR(){return this.arr}registerHandler(n,r){this.handlers.has(n)||this.handlers.set(n,[]),this.handlers.get(n).push(r)}unregisterHandler(n,r){if(this.handlers.has(n)){const s=this.handlers.get(n),i=s.indexOf(r);i>-1&&s.splice(i,1)}}_fireAction(n){this.handlers.has(n)&&this.handlers.get(n).forEach(r=>{try{r()}catch{}})}startListening(){this.isListening||(window.addEventListener("keydown",this._handleKeyDown),window.addEventListener("keyup",this._handleKeyUp),window.addEventListener("blur",this._handleBlur),this.isListening=!0,this._startLoop())}stopListening(){this.isListening&&(window.removeEventListener("keydown",this._handleKeyDown),window.removeEventListener("keyup",this._handleKeyUp),window.removeEventListener("blur",this._handleBlur),this.isListening=!1,this._stopLoop(),this._pressedKeys.clear())}_startLoop(){this._lastTime=performance.now();const n=r=>{const s=r-this._lastTime;this._lastTime=r,this._updateDAS(s),this._rafId=requestAnimationFrame(n)};this._rafId=requestAnimationFrame(n)}_stopLoop(){this._rafId&&(cancelAnimationFrame(this._rafId),this._rafId=null)}_updateDAS(n){for(const[r,s]of this._pressedKeys)if(s.dasTriggered)if(s.arrTimer+=n,this.arr===0){for(let i=0;i<20;i++)this._fireAction(s.action);s.arrTimer=0}else for(;s.arrTimer>=this.arr;)s.arrTimer-=this.arr,this._fireAction(s.action);else if(s.dasTimer+=n,s.dasTimer>=this.das)if(s.dasTriggered=!0,s.arrTimer=0,this.arr===0)for(let i=0;i<20;i++)this._fireAction(s.action);else this._fireAction(s.action)}setKeyMapping(n,r){this.keyMappings[n]=r}removeKeyMapping(n){delete this.keyMappings[n]}getKeyMappings(){return{...this.keyMappings}}clear(){this.handlers.clear(),this.stopListening()}}class ES{constructor(t){this.gameRepository=t,this.currency=this.loadCurrency()}loadCurrency(){return this.gameRepository.load("playerCurrency")||{fish:0,totalEarned:0,totalSpent:0}}save(){this.gameRepository.save("playerCurrency",this.currency)}getFish(){return this.currency.fish}getCurrency(){return{...this.currency}}addFish(t,n="unknown"){return t<=0?!1:(this.currency.fish+=t,this.currency.totalEarned+=t,this.save(),!0)}spendFish(t,n="unknown"){return t<=0||this.currency.fish<t?!1:(this.currency.fish-=t,this.currency.totalSpent+=t,this.save(),!0)}canAfford(t){return this.currency.fish>=t}reset(){this.currency={fish:0,totalEarned:0,totalSpent:0},this.save()}getStats(){return{currentFish:this.currency.fish,totalEarned:this.currency.totalEarned,totalSpent:this.currency.totalSpent,netWorth:this.currency.totalEarned-this.currency.totalSpent}}}const ge={CLEAR_LINES:"clear_lines",T_SPINS:"t_spins",COMBOS:"combos",SURVIVE_TIME:"survive_time",REACH_LEVEL:"reach_level",SCORE_POINTS:"score_points",PLACE_PIECES:"place_pieces",BACK_TO_BACK:"back_to_back",TETRIS_CLEAR:"tetris_clear"},Fa=[{type:ge.CLEAR_LINES,target:20,reward:100,difficulty:"easy",title:"Limpeza Bsica",description:"Limpe 20 linhas"},{type:ge.PLACE_PIECES,target:30,reward:100,difficulty:"easy",title:"Gato Trabalhador",description:"Coloque 30 peas"},{type:ge.SURVIVE_TIME,target:180,reward:120,difficulty:"easy",title:"Sobrevivente",description:"Sobreviva por 3 minutos"},{type:ge.SCORE_POINTS,target:5e3,reward:150,difficulty:"easy",title:"Fazendo Pontos",description:"Alcance 5.000 pontos"},{type:ge.CLEAR_LINES,target:40,reward:200,difficulty:"medium",title:"Limpeza Profunda",description:"Limpe 40 linhas em uma partida"},{type:ge.T_SPINS,target:3,reward:250,difficulty:"medium",title:"Mestre do T-Spin",description:"Faa 3 T-Spins"},{type:ge.COMBOS,target:7,reward:200,difficulty:"medium",title:"Combo Felino",description:"Alcance um combo de 7x"},{type:ge.REACH_LEVEL,target:8,reward:180,difficulty:"medium",title:"Subindo de Nvel",description:"Alcance o nvel 8"},{type:ge.TETRIS_CLEAR,target:2,reward:220,difficulty:"medium",title:"Tetris Duplo",description:"Faa 2 Tetris (4 linhas)"},{type:ge.T_SPINS,target:5,reward:350,difficulty:"hard",title:"Ninja T-Spin",description:"Faa 5 T-Spins em uma partida"},{type:ge.COMBOS,target:10,reward:300,difficulty:"hard",title:"Combo Insano",description:"Alcance um combo de 10x"},{type:ge.SURVIVE_TIME,target:600,reward:400,difficulty:"hard",title:"Resistncia Felina",description:"Sobreviva por 10 minutos"},{type:ge.REACH_LEVEL,target:12,reward:350,difficulty:"hard",title:"Mestre dos Gatos",description:"Alcance o nvel 12"},{type:ge.SCORE_POINTS,target:5e4,reward:400,difficulty:"hard",title:"Pontuao Lendria",description:"Alcance 50.000 pontos"},{type:ge.BACK_TO_BACK,target:3,reward:380,difficulty:"hard",title:"Back-to-Back Master",description:"Faa 3 back-to-backs"}];class NS{constructor(t,n){this.gameRepository=t,this.currencyService=n,this.missions=this.loadMissions(),this.checkAndResetDaily()}loadMissions(){return this.gameRepository.load("dailyMissions")||this.generateNewMissions()}save(){this.gameRepository.save("dailyMissions",this.missions)}checkAndResetDaily(){const n=new Date().toDateString();this.missions.lastResetDate!==n&&(this.missions=this.generateNewMissions(),this.save())}generateNewMissions(){const t=Fa.filter(o=>o.difficulty==="easy"),n=Fa.filter(o=>o.difficulty==="medium"),r=Fa.filter(o=>o.difficulty==="hard"),s=[this.selectRandomMission(t),this.selectRandomMission(n),this.selectRandomMission(r)],i=new Date;return{lastResetDate:i.toDateString(),missions:s.map((o,a)=>({id:`mission_${i.getTime()}_${a}`,...o,progress:0,completed:!1,claimed:!1}))}}selectRandomMission(t){return t[Math.floor(Math.random()*t.length)]}getMissions(){return this.checkAndResetDaily(),this.missions.missions}updateProgress(t,n){let r=!1;return this.missions.missions.forEach(s=>{s.type===t&&!s.completed&&(s.progress=Math.max(s.progress,n),s.progress>=s.target&&(s.completed=!0,r=!0))}),r&&this.save(),r}incrementProgress(t,n=1){let r=!1;return this.missions.missions.forEach(s=>{s.type===t&&!s.completed&&(s.progress+=n,s.progress>=s.target&&(s.completed=!0,r=!0))}),r&&this.save(),r}claimReward(t){const n=this.missions.missions.find(r=>r.id===t);return n?n.completed?n.claimed?{success:!1,error:"Already claimed"}:(n.claimed=!0,this.currencyService.addFish(n.reward,`Mission: ${n.title}`),this.save(),{success:!0,reward:n.reward,title:n.title}):{success:!1,error:"Mission not completed"}:{success:!1,error:"Mission not found"}}getStats(){const t=this.missions.missions.length,n=this.missions.missions.filter(o=>o.completed).length,r=this.missions.missions.filter(o=>o.claimed).length,s=this.missions.missions.reduce((o,a)=>o+a.reward,0),i=this.missions.missions.filter(o=>o.claimed).reduce((o,a)=>o+a.reward,0);return{total:t,completed:n,claimed:r,totalRewards:s,claimedRewards:i,allCompleted:n===t,allClaimed:r===t}}reset(){this.missions=this.generateNewMissions(),this.save()}}const Va=[{id:"first_line",title:" Primeira Linha",description:"Limpe sua primeira linha",requirement:{type:"lines_total",value:1},reward:50,tier:"bronze"},{id:"first_game",title:" Primeira Partida",description:"Complete sua primeira partida",requirement:{type:"games_played",value:1},reward:50,tier:"bronze"},{id:"scorer",title:" Pontuador",description:"Alcance 10.000 pontos em uma partida",requirement:{type:"score_single",value:1e4},reward:100,tier:"bronze"},{id:"combo_starter",title:" Combo Starter",description:"Alcance um combo de 5x",requirement:{type:"max_combo",value:5},reward:150,tier:"silver"},{id:"tspin_novice",title:" Aprendiz T-Spin",description:"Faa seu primeiro T-Spin",requirement:{type:"tspins_total",value:1},reward:150,tier:"silver"},{id:"survivor",title:" Sobrevivente",description:"Sobreviva por 5 minutos",requirement:{type:"survive_time",value:300},reward:150,tier:"silver"},{id:"level_5",title:" Nvel 5",description:"Alcance o nvel 5",requirement:{type:"max_level",value:5},reward:100,tier:"silver"},{id:"line_clearer",title:" Limpador",description:"Limpe 100 linhas no total",requirement:{type:"lines_total",value:100},reward:200,tier:"silver"},{id:"combo_master",title:" Combo Master",description:"Alcance um combo de 10x",requirement:{type:"max_combo",value:10},reward:300,tier:"gold"},{id:"tspin_master",title:" Mestre T-Spin",description:"Faa 50 T-Spins no total",requirement:{type:"tspins_total",value:50},reward:400,tier:"gold"},{id:"speed_demon",title:" Speed Demon",description:"Alcance o nvel 15",requirement:{type:"max_level",value:15},reward:350,tier:"gold"},{id:"high_scorer",title:" Alto Pontuador",description:"Alcance 100.000 pontos em uma partida",requirement:{type:"score_single",value:1e5},reward:400,tier:"gold"},{id:"dedicated",title:" Dedicado",description:"Jogue 50 partidas",requirement:{type:"games_played",value:50},reward:300,tier:"gold"},{id:"marathon",title:" Maratonista",description:"Limpe 500 linhas no total",requirement:{type:"lines_total",value:500},reward:350,tier:"gold"},{id:"cat_king",title:" Rei dos Gatos",description:"Alcance 1.000.000 de pontos em uma partida",requirement:{type:"score_single",value:1e6},reward:1e3,tier:"platinum"},{id:"immortal",title:" Imortal",description:"Alcance o nvel 20",requirement:{type:"max_level",value:20},reward:800,tier:"platinum"},{id:"combo_legend",title:" Lenda do Combo",description:"Alcance um combo de 15x",requirement:{type:"max_combo",value:15},reward:700,tier:"platinum"},{id:"tspin_legend",title:" Lenda T-Spin",description:"Faa 200 T-Spins no total",requirement:{type:"tspins_total",value:200},reward:800,tier:"platinum"},{id:"veteran",title:" Veterano",description:"Jogue 200 partidas",requirement:{type:"games_played",value:200},reward:600,tier:"platinum"},{id:"ultimate_cleaner",title:" Limpador Supremo",description:"Limpe 2.000 linhas no total",requirement:{type:"lines_total",value:2e3},reward:700,tier:"platinum"}];class AS{constructor(t,n,r){this.gameRepository=t,this.currencyService=n,this.statisticsService=r,this.achievements=this.loadAchievements()}loadAchievements(){const t=this.gameRepository.load("achievements");if(!t)return Va.map(r=>({...r,unlocked:!1,unlockedAt:null,progress:0}));const n=new Map(t.map(r=>[r.id,r]));return Va.map(r=>{const s=n.get(r.id);return s?{...r,unlocked:s.unlocked||!1,unlockedAt:s.unlockedAt||null,progress:s.progress||0}:{...r,unlocked:!1,unlockedAt:null,progress:0}})}save(){this.gameRepository.save("achievements",this.achievements)}getAchievements(){return[...this.achievements]}getUnlocked(){return this.achievements.filter(t=>t.unlocked)}getLocked(){return this.achievements.filter(t=>!t.unlocked)}getByTier(t){return this.achievements.filter(n=>n.tier===t)}checkAchievements(t){const n=[];return this.achievements.forEach(r=>{if(r.unlocked)return;const{type:s,value:i}=r.requirement;let o=0;switch(s){case"lines_total":o=t.linesCleared||0;break;case"games_played":o=t.gamesPlayed||0;break;case"score_single":o=t.highScore||0;break;case"max_combo":o=t.maxCombo||0;break;case"tspins_total":o=t.tSpins||0;break;case"survive_time":o=t.longestGame||0;break;case"max_level":o=t.maxLevel||0;break}r.progress=Math.min(o,i),o>=i&&(r.unlocked=!0,r.unlockedAt=new Date().toISOString(),this.currencyService.addFish(r.reward,`Achievement: ${r.title}`),n.push(r))}),n.length>0&&this.save(),n}getStats(){const t=this.achievements.length,n=this.achievements.filter(o=>o.unlocked).length,r=this.achievements.reduce((o,a)=>o+a.reward,0),s=this.achievements.filter(o=>o.unlocked).reduce((o,a)=>o+a.reward,0),i={bronze:this.getByTier("bronze").filter(o=>o.unlocked).length,silver:this.getByTier("silver").filter(o=>o.unlocked).length,gold:this.getByTier("gold").filter(o=>o.unlocked).length,platinum:this.getByTier("platinum").filter(o=>o.unlocked).length};return{total:t,unlocked:n,percentage:Math.floor(n/t*100),totalRewards:r,earnedRewards:s,byTier:i}}reset(){this.achievements=Va.map(t=>({...t,unlocked:!1,unlockedAt:null,progress:0})),this.save()}}class MS{constructor(t){this.gameRepository=t,this.stats=this.loadStats()}loadStats(){return this.gameRepository.load("playerStats")||{gamesPlayed:0,linesCleared:0,piecesPlaced:0,tSpins:0,backToBack:0,totalPlayTime:0,highScore:0,maxLevel:0,maxCombo:0,longestGame:0,mostLinesInGame:0,lastUpdated:new Date().toISOString(),lastPlayedDate:null,currentStreak:0,longestStreak:0}}save(){this.stats.lastUpdated=new Date().toISOString(),this.gameRepository.save("playerStats",this.stats)}getStats(){return{...this.stats}}updateAfterGame(t){this.stats.gamesPlayed+=1,this.stats.linesCleared+=t.linesCleared||0,this.stats.piecesPlaced+=t.piecesPlaced||0,this.stats.tSpins+=t.tSpins||0,this.stats.backToBack+=t.backToBack||0,this.stats.totalPlayTime+=t.playTime||0,t.score>this.stats.highScore&&(this.stats.highScore=t.score),t.level>this.stats.maxLevel&&(this.stats.maxLevel=t.level),t.maxCombo>this.stats.maxCombo&&(this.stats.maxCombo=t.maxCombo),t.playTime>this.stats.longestGame&&(this.stats.longestGame=t.playTime),t.linesCleared>this.stats.mostLinesInGame&&(this.stats.mostLinesInGame=t.linesCleared),this.updateStreak(),this.save()}updateStreak(){const t=new Date().toDateString(),n=this.stats.lastPlayedDate;if(n!==t){if(!n)this.stats.currentStreak=1,this.stats.longestStreak=1;else{const r=new Date(n),s=new Date(t);Math.floor((s-r)/(1e3*60*60*24))===1?(this.stats.currentStreak+=1,this.stats.currentStreak>this.stats.longestStreak&&(this.stats.longestStreak=this.stats.currentStreak)):this.stats.currentStreak=1}this.stats.lastPlayedDate=t}}incrementStat(t,n=1){this.stats.hasOwnProperty(t)&&(this.stats[t]+=n,this.save())}updateRecord(t,n){return this.stats.hasOwnProperty(t)&&n>this.stats[t]?(this.stats[t]=n,this.save(),!0):!1}reset(){this.stats={gamesPlayed:0,linesCleared:0,piecesPlaced:0,tSpins:0,backToBack:0,totalPlayTime:0,highScore:0,maxLevel:0,maxCombo:0,longestGame:0,mostLinesInGame:0,lastUpdated:new Date().toISOString(),lastPlayedDate:null,currentStreak:0,longestStreak:0},this.save()}}const sn={classic:{id:"classic",name:" Tetris Clssico",description:"Cores oficiais do Tetris",price:0,default:!0,pieces:{I:{emoji:"",color:"#00F0F0"},O:{emoji:"",color:"#F0F000"},T:{emoji:"",color:"#A000F0"},S:{emoji:"",color:"#00F000"},Z:{emoji:"",color:"#F00000"},J:{emoji:"",color:"#0000F0"},L:{emoji:"",color:"#F0A000"}}},cats:{id:"cats",name:" Gatos Clssicos",description:"Os gatinhos originais do Cat Tetris",price:0,default:!0,pieces:{I:{emoji:"",color:"#00f0f0"},O:{emoji:"",color:"#f0f000"},T:{emoji:"",color:"#a000f0"},S:{emoji:"",color:"#00f000"},Z:{emoji:"",color:"#f00000"},J:{emoji:"",color:"#f0a000"},L:{emoji:"",color:"#ffc0cb"}}},dogs:{id:"dogs",name:" Cachorros Felizes",description:"Amigos caninos adorveis",price:500,pieces:{I:{emoji:"",color:"#8B4513"},O:{emoji:"",color:"#D2691E"},T:{emoji:"",color:"#CD853F"},S:{emoji:"",color:"#DEB887"},Z:{emoji:"",color:"#F4A460"},J:{emoji:"",color:"#FFDEAD"},L:{emoji:"",color:"#FFE4B5"}}},pandas:{id:"pandas",name:" Pandas Fofos",description:"Ursinhos preto e branco",price:600,pieces:{I:{emoji:"",color:"#000000"},O:{emoji:"",color:"#808080"},T:{emoji:"",color:"#A0A0A0"},S:{emoji:"",color:"#FFFFFF"},Z:{emoji:"",color:"#D3D3D3"},J:{emoji:"",color:"#90EE90"},L:{emoji:"",color:"#98FB98"}}},foxes:{id:"foxes",name:" Raposas Astutas",description:"Raposinhas espertas e geis",price:700,pieces:{I:{emoji:"",color:"#FF4500"},O:{emoji:"",color:"#FF6347"},T:{emoji:"",color:"#FF7F50"},S:{emoji:"",color:"#CD5C5C"},Z:{emoji:"",color:"#D2691E"},J:{emoji:"",color:"#8B4513"},L:{emoji:"",color:"#DAA520"}}},unicorns:{id:"unicorns",name:" Unicrnios Mgicos",description:"Criaturas msticas e coloridas",price:900,pieces:{I:{emoji:"",color:"#FF00FF"},O:{emoji:"",color:"#FFD700"},T:{emoji:"",color:"#87CEEB"},S:{emoji:"",color:"#FF69B4"},Z:{emoji:"",color:"#9370DB"},J:{emoji:"",color:"#DA70D6"},L:{emoji:"",color:"#FFC0CB"}}},robots:{id:"robots",name:" Robs Futuristas",description:"Tecnologia do futuro",price:800,pieces:{I:{emoji:"",color:"#708090"},O:{emoji:"",color:"#778899"},T:{emoji:"",color:"#4682B4"},S:{emoji:"",color:"#5F9EA0"},Z:{emoji:"",color:"#00CED1"},J:{emoji:"",color:"#1E90FF"},L:{emoji:"",color:"#4169E1"}}},foods:{id:"foods",name:" Comidas Deliciosas",description:"Para quem joga com fome",price:750,pieces:{I:{emoji:"",color:"#FF6347"},O:{emoji:"",color:"#FFD700"},T:{emoji:"",color:"#FFA500"},S:{emoji:"",color:"#FF4500"},Z:{emoji:"",color:"#FFB6C1"},J:{emoji:"",color:"#DDA0DD"},L:{emoji:"",color:"#D2691E"}}},crystals:{id:"crystals",name:" Cristais Brilhantes",description:"Gemas preciosas reluzentes",price:1e3,premium:!0,pieces:{I:{emoji:"",color:"#00FFFF"},O:{emoji:"",color:"#FFD700"},T:{emoji:"",color:"#9370DB"},S:{emoji:"",color:"#00FF00"},Z:{emoji:"",color:"#FF0000"},J:{emoji:"",color:"#FFA500"},L:{emoji:"",color:"#FF1493"}}},ocean:{id:"ocean",name:" Mundo Marinho",description:"Criaturas do oceano",price:850,pieces:{I:{emoji:"",color:"#1E90FF"},O:{emoji:"",color:"#00CED1"},T:{emoji:"",color:"#4682B4"},S:{emoji:"",color:"#87CEEB"},Z:{emoji:"",color:"#5F9EA0"},J:{emoji:"",color:"#6495ED"},L:{emoji:"",color:"#FF6347"}}},space:{id:"space",name:" Espao Sideral",description:"Explorao espacial",price:950,pieces:{I:{emoji:"",color:"#4169E1"},O:{emoji:"",color:"#00FFFF"},T:{emoji:"",color:"#32CD32"},S:{emoji:"",color:"#FFD700"},Z:{emoji:"",color:"#FFFF00"},J:{emoji:"",color:"#FF8C00"},L:{emoji:"",color:"#FF4500"}}}};class M0{constructor(t,n){this.gameRepository=t,this.currencyService=n,this.inventory=this.loadInventory()}loadInventory(){const t=this.gameRepository.load("shopInventory");if(t){const n=Object.values(sn).filter(s=>s.price===0).map(s=>s.id);let r=!1;for(const s of n)t.ownedThemes.includes(s)||(t.ownedThemes.push(s),r=!0);return r&&this.gameRepository.save("shopInventory",t),t}return{ownedThemes:["cats","classic"],equippedTheme:"cats",purchaseHistory:[]}}save(){this.gameRepository.save("shopInventory",this.inventory)}getAllThemes(){return Object.values(sn).map(t=>({...t,owned:this.inventory.ownedThemes.includes(t.id),equipped:this.inventory.equippedTheme===t.id}))}getOwnedThemes(){return this.inventory.ownedThemes.map(t=>sn[t])}getEquippedTheme(){return sn[this.inventory.equippedTheme]}ownsTheme(t){return this.inventory.ownedThemes.includes(t)}purchaseTheme(t){const n=sn[t];return n?this.ownsTheme(t)?{success:!1,error:"Already owned"}:this.currencyService.canAfford(n.price)?this.currencyService.spendFish(n.price,`Theme: ${n.name}`)?(this.inventory.ownedThemes.push(t),this.inventory.purchaseHistory.push({themeId:t,purchasedAt:new Date().toISOString(),price:n.price}),this.save(),{success:!0,theme:n}):{success:!1,error:"Purchase failed"}:{success:!1,error:"Insufficient funds"}:{success:!1,error:"Theme not found"}}equipTheme(t){if(!this.ownsTheme(t))return{success:!1,error:"Theme not owned"};this.inventory.equippedTheme=t,this.save();const n=sn[t];return window.dispatchEvent(new CustomEvent("themeEquipped",{detail:{themeId:t,theme:n}})),{success:!0,theme:n}}getStats(){return{totalThemes:Object.keys(sn).length,ownedThemes:this.inventory.ownedThemes.length,totalSpent:this.inventory.purchaseHistory.reduce((t,n)=>t+n.price,0),equippedTheme:this.inventory.equippedTheme}}reset(){this.inventory={ownedThemes:["cats"],equippedTheme:"cats",purchaseHistory:[]},this.save()}}const LS=Object.freeze(Object.defineProperty({__proto__:null,PIECE_THEMES:sn,ShopService:M0},Symbol.toStringTag,{value:"Module"})),St={CLASSIC:{id:"classic",name:" Clssico",description:"O Tetris tradicional",icon:"",rules:{gameOver:!0,timeLimit:!1,lineGoal:!1,speedIncrease:!0}},SPRINT:{id:"sprint",name:" Sprint 40",description:"Limpe 40 linhas o mais rpido possvel",icon:"",rules:{gameOver:!1,timeLimit:!1,lineGoal:40,speedIncrease:!1,fixedLevel:1}},ULTRA:{id:"ultra",name:" Ultra 3min",description:"Mximo de pontos em 3 minutos",icon:"",rules:{gameOver:!1,timeLimit:180,lineGoal:!1,speedIncrease:!0}},ZEN:{id:"zen",name:" Zen",description:"Jogue sem presso, sem game over",icon:"",rules:{gameOver:!1,timeLimit:!1,lineGoal:!1,speedIncrease:!1,fixedLevel:1,relaxed:!0}},SURVIVAL:{id:"survival",name:" Sobrevivncia",description:"Comece no nvel 10, quanto tempo aguenta?",icon:"",rules:{gameOver:!0,timeLimit:!1,lineGoal:!1,speedIncrease:!0,startLevel:10}}};class _S{constructor(t){this.gameRepository=t,this.currentMode=St.CLASSIC,this.modeStats=this.loadModeStats()}loadModeStats(){return this.gameRepository.load("gameModesStats")||this.initializeStats()}initializeStats(){const t={};return Object.keys(St).forEach(n=>{const r=St[n];t[r.id]={gamesPlayed:0,bestScore:0,bestTime:r.rules.timeLimit?r.rules.timeLimit:0,bestLines:0,totalGames:0}}),t}save(){this.gameRepository.save("gameModesStats",this.modeStats)}getAllModes(){return Object.values(St)}getCurrentMode(){return this.currentMode}setMode(t){const n=Object.values(St).find(r=>r.id===t);return n?(this.currentMode=n,!0):!1}getModeStats(t){return this.modeStats[t]||null}getAllStats(){return{...this.modeStats}}updateStats(t,n){if(!this.modeStats[t])return;const r=this.modeStats[t];r.gamesPlayed+=1,r.totalGames+=1,n.score>r.bestScore&&(r.bestScore=n.score),n.time&&(r.bestTime===0||n.time<r.bestTime)&&(r.bestTime=n.time),n.lines>r.bestLines&&(r.bestLines=n.lines),this.save()}checkGoal(t,n){return t.rules?t.rules.lineGoal?n.score.lines>=t.rules.lineGoal:(t.rules.timeLimit,!1):!1}getRecommendedOrder(){return[St.CLASSIC,St.ZEN,St.SPRINT,St.ULTRA,St.SURVIVAL]}reset(){this.modeStats=this.initializeStats(),this.currentMode=St.CLASSIC,this.save()}}const Bh=[{id:"bot1",name:"MeowMaster",score:25e4,level:18,lines:120,country:"BR"},{id:"bot2",name:"NyanCat",score:18e4,level:15,lines:95,country:"US"},{id:"bot3",name:"FelixPro",score:15e4,level:14,lines:85,country:"JP"},{id:"bot4",name:"WhiskerKing",score:12e4,level:12,lines:75,country:"KR"},{id:"bot5",name:"PawsGaming",score:1e5,level:11,lines:68,country:"FR"},{id:"bot6",name:"CatNinja",score:85e3,level:10,lines:60,country:"DE"},{id:"bot7",name:"TigerClaw",score:7e4,level:9,lines:55,country:"BR"},{id:"bot8",name:"LionHeart",score:65e3,level:8,lines:50,country:"UK"},{id:"bot9",name:"CheetahSpeed",score:55e3,level:8,lines:45,country:"ES"},{id:"bot10",name:"PantherShadow",score:5e4,level:7,lines:42,country:"IT"},{id:"bot11",name:"JaguarForce",score:45e3,level:7,lines:40,country:"MX"},{id:"bot12",name:"LynxSwift",score:4e4,level:6,lines:38,country:"CA"},{id:"bot13",name:"OcelotPro",score:35e3,level:6,lines:35,country:"AR"},{id:"bot14",name:"BobcatGamer",score:3e4,level:5,lines:32,country:"AU"},{id:"bot15",name:"CougarRush",score:28e3,level:5,lines:30,country:"NZ"}];class DS{constructor(t,n){this.gameRepository=t,this.playerStatsService=n,this.playerName=this.loadPlayerName(),this.playerId=this.loadPlayerId()}loadPlayerName(){const t=this.gameRepository.load("playerProfile");return(t==null?void 0:t.name)||"Jogador"}loadPlayerId(){let t=this.gameRepository.load("playerProfile");return(!t||!t.id)&&(t={...t,id:`player_${Date.now()}_${Math.random().toString(36).substr(2,9)}`},this.gameRepository.save("playerProfile",t)),t.id}setPlayerName(t){const n=this.gameRepository.load("playerProfile")||{};n.name=t,n.id=this.playerId,this.gameRepository.save("playerProfile",n),this.playerName=t}getPlayerName(){return this.playerName}getGlobalLeaderboard(t=100){const n=this.playerStatsService.getStats(),r={id:this.playerId,name:this.playerName,score:n.highScore,level:n.maxLevel,lines:n.linesCleared,country:"BR",isPlayer:!0},s=[...Bh,r];return s.sort((i,o)=>o.score-i.score),s.slice(0,t)}getWeeklyLeaderboard(t=50){return this.getGlobalLeaderboard(t)}getCountryLeaderboard(t="BR",n=50){return this.getGlobalLeaderboard(200).filter(s=>s.country===t).slice(0,n)}getPlayerRank(){const t=this.getGlobalLeaderboard(1e3),n=t.findIndex(r=>r.id===this.playerId);return n===-1?{rank:t.length+1,total:t.length,percentile:0}:{rank:n+1,total:t.length,percentile:Math.floor((t.length-n)/t.length*100)}}getAroundPlayer(t=5){const n=this.getGlobalLeaderboard(1e3),r=n.findIndex(o=>o.id===this.playerId);if(r===-1)return[];const s=Math.max(0,r-t),i=Math.min(n.length,r+t+1);return n.slice(s,i)}submitScore(t){return Promise.resolve({success:!0})}getModeLeaderboard(t,n=50){return this.getGlobalLeaderboard(n)}getFriendsLeaderboard(){return Bh.slice(0,5)}getLeaderboardStats(){const t=this.getPlayerRank(),n=this.playerStatsService.getStats();return{playerName:this.playerName,rank:t.rank,total:t.total,percentile:t.percentile,score:n.highScore,level:n.maxLevel,lines:n.linesCleared}}}class RS{constructor(t){this.playerStatsService=t}generateShareText(t){const{score:n,level:r,lines:s,mode:i}=t;return` Cat Tetris${i?` no modo ${i}`:""}!
 Pontuao: ${n.toLocaleString()}
 Nvel: ${r}
 Linhas: ${s}

Consegue me superar? `}generateShareURL(t){const n=window.location.origin+window.location.pathname,r=new URLSearchParams({score:t.score,level:t.level,lines:t.lines});return`${n}?${r.toString()}`}async copyToClipboard(t){try{return await navigator.clipboard.writeText(t),{success:!0}}catch(n){return{success:!1,error:n.message}}}async shareNative(t){if(!navigator.share)return{success:!1,error:"Web Share API not supported"};try{const n=this.generateShareText(t),r=this.generateShareURL(t);return await navigator.share({title:"Minha pontuao no Cat Tetris",text:n,url:r}),{success:!0}}catch(n){return n.name==="AbortError"?{success:!1,error:"Share cancelled"}:{success:!1,error:n.message}}}shareToTwitter(t){const n=this.generateShareText(t),r=this.generateShareURL(t),s=`https://twitter.com/intent/tweet?text=${encodeURIComponent(n)}&url=${encodeURIComponent(r)}`;return window.open(s,"_blank","width=600,height=400"),{success:!0}}shareToFacebook(t){const n=this.generateShareURL(t),r=`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(n)}`;return window.open(r,"_blank","width=600,height=400"),{success:!0}}shareToWhatsApp(t){const n=this.generateShareText(t),r=this.generateShareURL(t),s=`${n}

${r}`,i=`https://wa.me/?text=${encodeURIComponent(s)}`;return window.open(i,"_blank"),{success:!0}}async takeScreenshot(t){return{success:!1,error:"Not implemented"}}getAvailableMethods(){return{native:!!navigator.share,clipboard:!!navigator.clipboard,twitter:!0,facebook:!0,whatsapp:!0}}}class Ts{constructor(){this.difficulty="medium",this.thinkingTime=100,this.lastDecision=Date.now(),this._actionQueue=[],this._isExpert=!1,this._visualMode=!1,this._visualActionDelay=40}setDifficulty(t){switch(this.difficulty=t,this._isExpert=t.startsWith("expert"),t){case"easy":this.thinkingTime=250;break;case"medium":this.thinkingTime=120;break;case"hard":this.thinkingTime=60;break;case"expert":this.thinkingTime=80;break;default:this.thinkingTime=120}}setVisualMode(t){this._visualMode=t}decideNextMove(t){const n=Date.now(),r=this._visualMode?this._visualActionDelay:this.thinkingTime;if(this._actionQueue.length>0)return n-this.lastDecision<r?null:(this.lastDecision=n,this._actionQueue.shift());if(!this._isExpert&&n-this.lastDecision<r||this._visualMode&&n-this.lastDecision<r)return null;this.lastDecision=n;const{currentPiece:s,board:i,heldPiece:o,canHold:a,nextPieces:c}=t;if(!s)return null;try{const u=(c==null?void 0:c[0])||null;let h=this._findBestMoveWithLookahead(s,i,u),d=!1;if(a){const m=o||u;if(m&&m.type!==s.type){const g=o?u:(c==null?void 0:c[1])||null,x=this._findBestMoveWithLookahead(m,i,g);x&&(!h||x.score>h.score)&&(h=x,d=!0)}}if(!h)this._actionQueue=[{action:"drop"}];else{const m=[];d&&m.push({action:"hold"});const g=d?o||(c==null?void 0:c[0]):s;m.push(...this._buildActionSequence(g,h.rotations,h.targetX,d)),this._actionQueue=m}}catch{this._actionQueue=[{action:"drop"}]}return this._actionQueue.length>0?this._actionQueue.shift():{action:"down"}}_findBestMoveWithLookahead(t,n,r){var u;let s=-1/0,i=null;const o=n.length,a=((u=n[0])==null?void 0:u.length)||10,c=this._isExpert&&r;for(let h=0;h<4;h++){const d=this._rotateShape(t.shape,h),m=d[0].length;for(let g=-2;g<=a-m+2;g++){const x=this._findLandingRow(d,n,g,o,a);if(x===null||x<0)continue;const b=this._placeOnBoard(d,n,g,x);if(!b)continue;const{board:k}=this._simulateClear(b);let p=this._evaluate(b,t);if(c){let f=-1/0;for(let y=0;y<4;y++){const w=this._rotateShape(r.shape,y),S=w[0].length;for(let C=-2;C<=a-S+2;C++){const P=this._findLandingRow(w,k,C,o,a);if(P===null||P<0)continue;const T=this._placeOnBoard(w,k,C,P);if(!T)continue;const j=this._evaluate(T,r);j>f&&(f=j)}}f>-1/0&&(p=p*(1-.3)+f*.3)}this.difficulty==="easy"?p+=(Math.random()-.5)*1200:this.difficulty==="medium"&&Math.random()<.2?p+=(Math.random()-.5)*500:this.difficulty==="expert"&&Math.random()<.12&&(p+=(Math.random()-.5)*600),p>s&&(s=p,i={rotations:h,targetX:g,score:s})}}return i}_evaluate(t,n){switch(this.difficulty){case"expert":return this._evalSurvival(t,n);default:return this._evalDefault(t,n)}}_simulateClear(t){const n=t[0].length,r=[];let s=0;for(const i of t)i.every(o=>o!=null)?s++:r.push([...i]);for(;r.length<t.length;)r.unshift(new Array(n).fill(null));return{board:r,cleared:s}}_evalDefault(t,n){const{board:r,cleared:s}=this._simulateClear(t);let i=0;return i+=s*800,i-=this._getHeight(r)*45,i-=this._countHoles(r)*400,i-=this._getBumpiness(r)*35,i-=this._getRowTransitions(r)*15,i-=this._getColTransitions(r)*10,this.difficulty==="hard"&&(i+=s>=2?s*400:0,i-=this._countHoles(r)*200,i-=this._getCoveredHoles(r)*100,i-=this._getHeight(r)*30,this._countHoles(r)===0&&(i+=300),this._getHeight(r)<=6&&(i+=200)),i}_evalSurvival(t){const{board:n,cleared:r}=this._simulateClear(t),s=this._getHeight(n),i=this._countHoles(n),o=this._getBumpiness(n),a=this._getCoveredHoles(n),c=this._getColumnHeights(n),u=Math.max(...c),h=Math.min(...c),d=this._getRowTransitions(n),m=this._getColTransitions(n),g=this._getWellDepths(n);let x=0;x+=r*5e3,r>=2&&(x+=r*r*1500),r===3&&(x+=8e3),r===4&&(x+=25e3),s>10&&(x+=r*8e3,r>=2&&(x+=r*5e3)),s>14&&(x+=r*2e4),x-=s*s*25,x-=s*300,x-=u*u*15,x-=i*4e3,x-=i*i*500,x-=a*1200,x-=o*250;const b=c.reduce((y,w)=>y+w,0)/c.length,k=c.reduce((y,w)=>y+(w-b)**2,0)/c.length;x-=k*80;const p=u-h;p>4&&(x-=(p-4)*800),p>6&&(x-=(p-6)*1500),x-=d*60,x-=m*50,x-=g*200,s===0?x+=15e3:s<=2?x+=6e3:s<=4?x+=3e3:s<=6&&(x+=1500),i===0&&(x+=5e3),i===0&&s<=4&&(x+=3e3),o<=1?x+=2e3:o<=3&&(x+=800),s>10&&(x-=(s-10)*2e3),s>12&&(x-=(s-12)*(s-12)*800),s>14&&(x-=(s-14)*(s-14)*1500),s>16&&(x-=6e4),s>18&&(x-=2e5);const f=this._countNearCompleteLines(n);return s>8&&(x+=f*1500),x}_evalCombo(t,n){const{board:r,cleared:s}=this._simulateClear(t),i=r[0].length,o=this._getHeight(r),a=this._countHoles(r),c=this._getBumpiness(r),u=this._getCoveredHoles(r);let h=0;s===1?h+=6e3:s===2?h+=3500:s===3?h+=2500:s===4&&(h+=2e3);let d=0,m=0,g=0;const x={};for(let k=r.length-1;k>=0;k--){let p=0,f=-1;for(let y=0;y<i;y++)r[k][y]!=null?p++:f=y;p===i-1?(d++,m++,g=Math.max(g,m),f>=0&&(x[f]=(x[f]||0)+1)):p>=i-2?(d+=.5,m++,g=Math.max(g,m)):m=0}h+=d*2500,h+=g*g*600;let b=0;for(const k in x)x[k]>b&&(b=x[k]);return b>=2&&(h+=b*b*500),h-=a*2500,h-=u*700,h-=o*100,h-=c*120,h-=this._getRowTransitions(r)*35,h-=this._getColTransitions(r)*25,a===0&&(h+=1500),o<=6&&(h+=600),o>12&&(h-=(o-12)*800),o>15&&(h-=(o-15)*2e3),o>18&&(h-=25e3),h}_evalTetris(t,n){const{board:r,cleared:s}=this._simulateClear(t),i=r[0].length,o=r.length,a=this._getColumnHeights(r);this._getHeight(r);const c=this._countHoles(r),u=this._getCoveredHoles(r);let h=0;const d=i-1;s===4?h+=2e5:s>0&&(h-=s*15e3);let m=0;for(let w=0;w<o;w++)r[w][d]!=null&&m++;h-=m*6e3;const g=[];for(let w=0;w<i;w++)w!==d&&g.push(a[w]);const x=g.reduce((w,S)=>w+S,0)/g.length,b=x-a[d];h+=Math.max(0,b)*600,b>=4?h+=25e3:b>=3?h+=12e3:b>=2?h+=5e3:b>=1&&(h+=1e3);let k=0;for(let w=0;w<g.length-1;w++)k+=Math.abs(g[w]-g[w+1]);h-=k*500;const p=g.reduce((w,S)=>w+(S-x)**2,0)/g.length;h-=p*150,k===0?h+=6e3:k<=1?h+=2500:k<=2&&(h+=800);const f=this._countNearFullLinesExcluding(r,d);h+=f*5e3,f>=4?h+=2e4:f>=3?h+=8e3:f>=2&&(h+=3e3);for(let w=0;w<i;w++){if(w===d)continue;const S=a[w],C=w>0?a[w-1]:o,P=w<i-1?a[w+1]:o,T=Math.min(C,P)-S;T>1&&(h-=T*2e3)}n.type==="I"&&(s===4?h+=5e4:b<4&&(h-=2e4)),h-=c*5e3,h-=u*2e3,h-=this._getRowTransitions(r)*40,h-=this._getColTransitions(r)*30;const y=Math.max(...g);return y>14&&(h-=(y-14)*3e3),y>16&&(h-=(y-16)*6e3),y>18&&(h-=4e4),c===0&&(h+=4e3),x<=6&&(h+=1500),h}_countLines(t){let n=0;for(const r of t)r.every(s=>s!=null)&&n++;return n}_getHeight(t){for(let n=0;n<t.length;n++)if(t[n].some(r=>r!=null))return t.length-n;return 0}_countHoles(t){let n=0;const r=t[0].length;for(let s=0;s<r;s++){let i=!1;for(let o=0;o<t.length;o++)t[o][s]!=null?i=!0:i&&n++}return n}_getBumpiness(t){const n=this._getColumnHeights(t);let r=0;for(let s=0;s<n.length-1;s++)r+=Math.abs(n[s]-n[s+1]);return r}_getBumpinessExcluding(t,n){const r=this._getColumnHeights(t);let s=0;for(let i=0;i<r.length-1;i++)i===n||i+1===n||(s+=Math.abs(r[i]-r[i+1]));return s}_getColumnHeights(t){const n=t[0].length,r=[];for(let s=0;s<n;s++){let i=!1;for(let o=0;o<t.length;o++)if(t[o][s]!=null){r.push(t.length-o),i=!0;break}i||r.push(0)}return r}_getFlatness(t){const n=this._getColumnHeights(t),r=n.reduce((i,o)=>i+o,0)/n.length,s=n.reduce((i,o)=>i+(o-r)**2,0)/n.length;return Math.max(0,100-s)}_getWellDepths(t){const n=this._getColumnHeights(t);let r=0;for(let s=0;s<n.length;s++){const i=s>0?n[s-1]:20,o=s<n.length-1?n[s+1]:20,a=Math.min(i,o)-n[s];a>0&&(r+=a)}return r}_getRowTransitions(t){let n=0;const r=t[0].length;for(let s=0;s<t.length;s++){for(let i=0;i<r-1;i++){const o=t[s][i]!=null,a=t[s][i+1]!=null;o!==a&&n++}t[s][0]==null&&n++,t[s][r-1]==null&&n++}return n}_getColTransitions(t){let n=0;const r=t[0].length;for(let s=0;s<r;s++){for(let i=0;i<t.length-1;i++){const o=t[i][s]!=null,a=t[i+1][s]!=null;o!==a&&n++}t[t.length-1][s]==null&&n++}return n}_getCoveredHoles(t){let n=0;const r=t[0].length;for(let s=0;s<r;s++){let i=0;for(let o=0;o<t.length;o++)t[o][s]!=null?i++:i>0&&(n+=i)}return n}_countNearCompleteLines(t){let n=0;for(const r of t){const s=r.filter(i=>i!=null).length;s>=r.length-1&&s<r.length&&n++}return n}_countNearFullLinesExcluding(t,n){let r=0;for(const s of t){let i=0,o=-1;for(let a=0;a<s.length;a++)s[a]==null&&(i++,o=a);i===1&&o===n&&r++}return r}_buildActionSequence(t,n,r,s){var h;const i=[],o=n%4;for(let d=0;d<o;d++)i.push({action:"rotate"});const a=s?3:((h=t.position)==null?void 0:h.x)??3,c=r-a,u=c>0?"right":"left";for(let d=0;d<Math.abs(c);d++)i.push({action:u});return i.push({action:"drop"}),i}_rotateShape(t,n){let r=t;for(let s=0;s<n%4;s++)r=r[0].map((i,o)=>r.map(a=>a[o]).reverse());return r}_findLandingRow(t,n,r,s,i){for(let o=-t.length;o<s;o++)if(this._collides(t,n,r,o+1,s,i))return o;return s-t.length}_collides(t,n,r,s,i,o){for(let a=0;a<t.length;a++)for(let c=0;c<t[0].length;c++){if(!t[a][c])continue;const u=r+c,h=s+a;if(u<0||u>=o||h>=i||h>=0&&n[h][u]!=null)return!0}return!1}_placeOnBoard(t,n,r,s){const i=n.length,o=n[0].length,a=n.map(c=>[...c]);for(let c=0;c<t.length;c++)for(let u=0;u<t[0].length;u++){if(!t[c][u])continue;const h=r+u,d=s+c;if(h<0||h>=o||d<0||d>=i||a[d][h]!=null)return null;a[d][h]=1}return a}getDifficulties(){return[{id:"easy",name:"Fcil",emoji:"",description:"IA iniciante"},{id:"medium",name:"Mdio",emoji:"",description:"IA intermediria"},{id:"hard",name:"Difcil",emoji:"",description:"IA avanada"},{id:"expert",name:"Expert",emoji:"",description:"Mantm o board o mais baixo possvel"}]}}class IS{constructor(t){this.gameRepository=t,this.currentMode=null,this.players=[],this.matchState=null}startLocalMatch(t="Jogador 1",n="Jogador 2"){return this.currentMode="1v1-local",this.players=[{id:"p1",name:t,score:0,level:1,lines:0,gameState:null,alive:!0},{id:"p2",name:n,score:0,level:1,lines:0,gameState:null,alive:!0}],this.matchState={startTime:Date.now(),status:"playing",winner:null},{mode:this.currentMode,players:this.players,matchId:`local_${Date.now()}`}}startAIMatch(t="Jogador",n="medium"){return this.currentMode="vs-ai",this.players=[{id:"p1",name:t,score:0,level:1,lines:0,gameState:null,alive:!0,isHuman:!0},{id:"ai",name:this.getAIName(n),score:0,level:1,lines:0,gameState:null,alive:!0,isAI:!0,difficulty:n}],this.matchState={startTime:Date.now(),status:"playing",winner:null,aiDifficulty:n},{mode:"vsAI",aiDifficulty:n,players:this.players,matchId:`ai_${Date.now()}`}}updatePlayerState(t,n){var s,i;const r=this.players.find(o=>o.id===t);r&&(r.gameState=n,r.score=((s=n.score)==null?void 0:s.points)||0,r.level=((i=n.score)==null?void 0:i.level)||1,r.lines=n.linesCleared||0,r.alive=!n.gameOver,this.checkWinCondition())}checkWinCondition(){const t=this.players.filter(n=>n.alive);return t.length===1?(this.matchState.status="finished",this.matchState.winner=t[0],this.matchState.endTime=Date.now(),this.matchState.duration=this.matchState.endTime-this.matchState.startTime,this.saveMatchResult(),{hasWinner:!0,winner:this.matchState.winner}):{hasWinner:!1}}saveMatchResult(){const t=this.gameRepository.load("multiplayerStats")||{localMatches:0,aiMatches:0,wins:0,losses:0,draws:0,totalTime:0};this.currentMode==="1v1-local"?t.localMatches++:this.currentMode==="vs-ai"&&(t.aiMatches++,this.matchState.winner.isHuman?t.wins++:this.matchState.winner.isAI&&t.losses++),t.totalTime+=this.matchState.duration,this.gameRepository.save("multiplayerStats",t)}getStats(){const t=this.gameRepository.load("multiplayerStats")||{localMatches:0,aiMatches:0,wins:0,losses:0,draws:0,totalTime:0};return{...t,winRate:t.aiMatches>0?(t.wins/t.aiMatches*100).toFixed(1):0,avgMatchTime:t.localMatches+t.aiMatches>0?Math.floor(t.totalTime/(t.localMatches+t.aiMatches)/1e3):0}}getMatchState(){return{...this.matchState,players:this.players,mode:this.currentMode}}endMatch(){const t={mode:this.currentMode,players:this.players,winner:this.matchState.winner,duration:Date.now()-this.matchState.startTime};return this.currentMode=null,this.players=[],this.matchState=null,t}startAIvsAIMatch(t="expert",n="expert"){return this.currentMode="ai-vs-ai",this.players=[{id:"ai1",name:this.getAIName(t),score:0,level:1,lines:0,gameState:null,alive:!0,isAI:!0,difficulty:t},{id:"ai2",name:this.getAIName(n),score:0,level:1,lines:0,gameState:null,alive:!0,isAI:!0,difficulty:n}],this.matchState={startTime:Date.now(),status:"playing",winner:null,ai1Difficulty:t,ai2Difficulty:n},{mode:"aiVsAI",ai1Difficulty:t,ai2Difficulty:n,players:this.players,matchId:`aivai_${Date.now()}`}}getAIName(t){return{easy:" MeowBot Iniciante",medium:" CatAI Intermedirio",hard:" FelineBot Avanado",expert:" NyanMaster Survival"}[t]||"IA"}getAvailableModes(){return[{id:"vs-ai",name:"vs IA",emoji:"",description:"Enfrente o bot",players:1,type:"ai",difficulties:["easy","medium","hard","expert"]},{id:"ai-vs-ai",name:"IA vs IA",emoji:"",description:"Assista duas IAs se enfrentando (debug)",players:0,type:"debug"}]}}const At={FUNDAMENTALS:"fundamentals",INTERMEDIATE:"intermediate",ADVANCED:"advanced",PRO:"pro"};class OS{constructor(t){this.gameRepository=t,this.lessons=this._buildLessons(),this.progress=this._loadProgress()}_buildLessons(){return[{id:1,module:At.FUNDAMENTALS,title:"Movimentao",description:"Mover, rotacionar e dropar peas",difficulty:"beginner",estimatedTime:"2 min",intro:["   Setas movem a pea para os lados","  Seta para cima rotaciona a pea","  Seta para baixo = soft drop (desce rpido)","  Espao = hard drop (cai instantaneamente)","A sombra mostra onde a pea vai pousar"],practice:{objective:"Limpe 3 linhas usando os controles",validate:t=>{const n=t.linesCleared||0;return{complete:n>=3,progress:Math.min(1,n/3),feedback:n>=3?" timo! Voc dominou os controles!":`${n}/3 linhas`}}},rewards:{fishCoins:100,xp:50,badge:"first_move",unlocks:[2]}},{id:2,module:At.FUNDAMENTALS,title:"Hold Piece",description:"Segure uma pea para usar depois",difficulty:"beginner",estimatedTime:"2 min",intro:["Aperte C ou Shift para guardar a pea atual","A pea guardada aparece no canto esquerdo","Voc pode trocar 1 vez por turno","Dica: guarde peas valiosas como I e T","Isso ajuda quando a pea atual no encaixa bem"],practice:{objective:"Use o hold e limpe 3 linhas",validate:t=>{const n=t.hasUsedHold,r=t.linesCleared||0;return n?{complete:r>=3,progress:Math.min(1,r/3),feedback:r>=3?" Hold dominado!":` Hold usado! ${r}/3 linhas`}:{complete:!1,progress:0,feedback:"Aperte C para segurar a pea!"}}},rewards:{fishCoins:100,xp:50,badge:"hold_learner",unlocks:[3]}},{id:3,module:At.FUNDAMENTALS,title:"Planejamento",description:"Use o painel Next para planejar jogadas",difficulty:"beginner",estimatedTime:"3 min",intro:["O painel NEXT mostra as prximas peas","Olhe as prximas 2-3 peas antes de agir","Se vem uma pea I, deixe espao vertical","Pensar  frente = menos buracos = mais linhas","Tente limpar muitas linhas sem criar buracos!"],practice:{objective:"Limpe 8 linhas (planeje bem!)",validate:t=>{const n=t.linesCleared||0;return{complete:n>=8,progress:Math.min(1,n/8),feedback:n>=8?" Excelente planejamento!":`${n}/8 linhas`}}},rewards:{fishCoins:150,xp:75,badge:"planner",unlocks:[4]}},{id:4,module:At.INTERMEDIATE,title:"Combos",description:"Limpe linhas consecutivas para bnus",difficulty:"intermediate",estimatedTime:"4 min",intro:["Combo = limpar linhas em peas consecutivas","Cada combo seguido d +50 pontos de bnus","Combo 5x = +250 pontos extras!","Dica: empilhe baixo e limpe 1 linha por vez","Foque em manter o ritmo, sem pausas"],practice:{objective:"Consiga um combo de 3 ou mais",validate:t=>{const n=t.currentCombo||0,r=t.maxCombo||n,s=Math.max(n,r);return{complete:s>=3,progress:Math.min(1,s/3),feedback:s>=3?" Combo master!":`Melhor combo: ${s}x (precisa 3)`}}},rewards:{fishCoins:200,xp:100,badge:"combo_starter",unlocks:[5]}},{id:5,module:At.INTERMEDIATE,title:"Tetris (4 linhas)",description:"Limpe 4 linhas de uma vez para 800pts",difficulty:"intermediate",estimatedTime:"5 min",intro:["Tetris = limpar 4 linhas ao mesmo tempo","Vale 800 pontos  o clear mais valioso!","Deixe uma coluna vazia (geralmente a da direita)","Preencha as outras 9 colunas em 4 linhas","Use a pea I (barra) para completar o Tetris"],practice:{objective:"Alcance 2.000 pontos",validate:t=>{const n=t.score||0;return{complete:n>=2e3,progress:Math.min(1,n/2e3),feedback:n>=2e3?" Pontuao alta!":`${n.toLocaleString()}/2.000 pts`}}},rewards:{fishCoins:250,xp:125,badge:"tetris_scorer",unlocks:[6]}},{id:6,module:At.ADVANCED,title:"T-Spin",description:"Rotacione o T no ltimo momento para bnus",difficulty:"advanced",estimatedTime:"6 min",intro:["T-Spin = rotacionar a pea T em espao apertado","Vale pontos extras e ativa back-to-back!",'Crie um buraco em forma de "T" na pilha',"Deslize a pea T para dentro e rotacione"," difcil, mas d muitos pontos!"],practice:{objective:"Faa pelo menos 1 T-Spin e 4.000 pontos",validate:t=>{const n=t.tSpins||0,r=t.score||0;return n===0?{complete:!1,progress:Math.min(.5,r/8e3),feedback:"Tente rotacionar o T em espao apertado!"}:{complete:r>=4e3,progress:Math.min(1,r/4e3),feedback:r>=4e3?` T-Spin pro! (${n} T-Spins)`:` T-Spin! ${r.toLocaleString()}/4.000 pts`}}},rewards:{fishCoins:400,xp:250,badge:"tspin_learner",unlocks:[7]}},{id:7,module:At.ADVANCED,title:"Back-to-Back",description:"Tetris ou T-Spin seguidos do 50% bnus",difficulty:"advanced",estimatedTime:"6 min",intro:["Back-to-Back = dois clears difceis seguidos","Conta como: Tetris (4 linhas) ou T-Spin","Cada B2B seguido d +50% de pontos!","Limpar 1-3 linhas normais quebra a cadeia","Combine T-Spins e Tetris para pontuao mxima"],practice:{objective:"Alcance 6.000 pontos com back-to-back",validate:t=>{const n=t.score||0,r=t.backToBackActive;return{complete:n>=6e3,progress:Math.min(1,n/6e3),feedback:n>=6e3?" Back-to-back dominado!":r?` B2B ativo! ${n.toLocaleString()}/6.000 pts`:`${n.toLocaleString()}/6.000 pts`}}},rewards:{fishCoins:500,xp:300,badge:"b2b_learner",unlocks:[8]}},{id:8,module:At.PRO,title:"Desafio Final",description:"Prove que domina o Tetris!",difficulty:"pro",estimatedTime:"10 min",intro:["Use TUDO que aprendeu at aqui","Movimentao, hold, combos, T-Spins, B2B...","O objetivo  alcanar uma pontuao alta","No tenha pressa  planeje cada jogada","Boa sorte, mestre! "],practice:{objective:"Alcance 15.000 pontos",validate:t=>{const n=t.score||0;return{complete:n>=15e3,progress:Math.min(1,n/15e3),feedback:n>=15e3?" MESTRE DO TETRIS!":`${n.toLocaleString()}/15.000 pts`}}},rewards:{fishCoins:1e3,xp:500,badge:"tetris_master",unlocks:[]}}]}_loadProgress(){var n,r;return((r=(n=this.gameRepository)==null?void 0:n.load)==null?void 0:r.call(n,"tutorialProgress"))||{completedLessons:[],unlockedLessons:[1],badges:[],totalXP:0,currentModule:At.FUNDAMENTALS}}_saveProgress(){var t,n;(n=(t=this.gameRepository)==null?void 0:t.save)==null||n.call(t,"tutorialProgress",this.progress)}getProgress(){return this.progress}getLessonById(t){return this.lessons.find(n=>n.id===t)}getAvailableLessons(){return this.lessons.filter(t=>this.progress.unlockedLessons.includes(t.id))}completeLesson(t,n){var s;const r=this.getLessonById(t);return r?(this.progress.completedLessons.includes(t)||this.progress.completedLessons.push(t),(r.rewards.unlocks||[]).forEach(i=>{this.progress.unlockedLessons.includes(i)||this.progress.unlockedLessons.push(i)}),r.rewards.badge&&!this.progress.badges.includes(r.rewards.badge)&&this.progress.badges.push(r.rewards.badge),this.progress.totalXP+=r.rewards.xp||0,this._saveProgress(),{completed:!0,lessonId:t,lessonTitle:r.title,rewards:r.rewards,nextLesson:((s=r.rewards.unlocks)==null?void 0:s[0])||null,performance:n}):null}resetProgress(){this.progress={completedLessons:[],unlockedLessons:[1],badges:[],totalXP:0,currentModule:At.FUNDAMENTALS},this._saveProgress()}}function GS(e=new cS){return e.registerSingleton("gameRepository",()=>new mS),e.registerSingleton("settingsService",()=>new CS),e.registerSingleton("statisticsService",()=>new PS),e.registerSingleton("scoringService",()=>new Nn),e.registerSingleton("pieceFactory",()=>new rr),e.registerSingleton("movementStrategyFactory",()=>new sr),e.registerSingleton("keyboardInputService",()=>new jS),e.registerSingleton("playerStatsService",t=>new MS(t),["gameRepository"]),e.registerSingleton("currencyService",t=>new ES(t),["gameRepository"]),e.registerSingleton("missionsService",(t,n)=>new NS(t,n),["gameRepository","currencyService"]),e.registerSingleton("achievementsService",(t,n,r)=>new AS(t,n,r),["gameRepository","currencyService","playerStatsService"]),e.registerSingleton("shopService",(t,n)=>new M0(t,n),["gameRepository","currencyService"]),e.registerSingleton("gameModesService",t=>new _S(t),["gameRepository"]),e.registerSingleton("leaderboardService",(t,n)=>new DS(t,n),["gameRepository","playerStatsService"]),e.registerSingleton("shareService",t=>new RS(t),["playerStatsService"]),e.registerSingleton("aiOpponentService",()=>new Ts),e.registerSingleton("multiplayerService",t=>new IS(t),["gameRepository"]),e.registerSingleton("tutorialService",t=>new OS(t),["gameRepository"]),e.registerSingleton("gameService",(t,n,r,s)=>new nr(t,n,r,s),["pieceFactory","movementStrategyFactory","gameRepository","scoringService"]),e}const U=GS();function L0(){const[e,t]=v.useState(null),[n,r]=v.useState(!0);v.useEffect(()=>{try{const a=U.resolve("currencyService");t(a.getCurrency()),r(!1);const c=()=>{t(a.getCurrency())};return window.addEventListener("currencyUpdated",c),()=>{window.removeEventListener("currencyUpdated",c)}}catch{r(!1)}},[]);const s=v.useCallback((a,c)=>{try{const u=U.resolve("currencyService"),h=u.addFish(a,c);return h&&(t(u.getCurrency()),window.dispatchEvent(new Event("currencyUpdated"))),h}catch{return!1}},[]),i=v.useCallback((a,c)=>{try{const u=U.resolve("currencyService"),h=u.spendFish(a,c);return h&&(t(u.getCurrency()),window.dispatchEvent(new Event("currencyUpdated"))),h}catch{return!1}},[]),o=v.useCallback(a=>{try{return U.resolve("currencyService").canAfford(a)}catch{return!1}},[]);return{currency:e,loading:n,addFish:s,spendFish:i,canAfford:o}}function FS({className:e=""}){const{currency:t,loading:n}=L0();return n||!t?l.jsxs("div",{className:`flex items-center gap-2 ${e}`,children:[l.jsx("div",{className:"text-2xl",children:""}),l.jsx("div",{className:"text-white/60",children:"..."})]}):l.jsxs(M.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:`flex items-center gap-2 bg-black/30 px-4 py-2 rounded-lg backdrop-blur-sm ${e}`,children:[l.jsx("span",{className:"text-2xl",children:""}),l.jsx(M.span,{initial:{scale:1.2,color:"#fbbf24"},animate:{scale:1,color:"#ffffff"},transition:{duration:.3},className:"text-xl font-bold",children:t.fish.toLocaleString()},t.fish)]})}function VS({onStartGame:e,onNewGame:t,onShowSettings:n,onShowShop:r,onShowMissions:s,onShowAchievements:i,onShowMultiplayer:o,onShowTutorial:a,onShowTutorialHub:c,onShowAIShowcase:u,onShowCreatorMode:h,hasActiveGame:d,gameState:m,hasOverlayOpen:g}){var N,_,se;const[x,b]=v.useState(!0),[k,p]=v.useState(!1),f=lS(),{t:y,language:w,setLanguage:S}=Re(),C=v.useCallback(I=>{var W;x&&((W=f.playMenuSelect)==null||W.call(f)),I==null||I()},[x,f]),P=v.useMemo(()=>{const I=[];return d?(I.push({id:"continue",action:e}),I.push({id:"newGame",action:t})):I.push({id:"play",action:e}),I.push({id:"vsAI",action:o}),I.push({id:"tutorial",action:c}),I.push({id:"creator",action:h}),I.push({id:"aiExpert",action:u}),I.push({id:"shop",action:r}),I.push({id:"missions",action:s}),I.push({id:"achievements",action:i}),I.push({id:"settings",action:n}),I},[d,e,t,o,c,h,u,r,s,i,n]),T=v.useMemo(()=>d?{0:{up:7,down:2,left:1,right:1},1:{up:8,down:3,left:0,right:0},2:{up:0,down:4,left:3,right:3},3:{up:1,down:5,left:2,right:2},4:{up:2,down:7,left:5,right:5},5:{up:3,down:8,left:4,right:4},6:{up:4,down:0,left:9,right:7},7:{up:4,down:0,left:6,right:8},8:{up:5,down:1,left:7,right:9},9:{up:5,down:1,left:8,right:6}}:{0:{up:6,down:1,left:0,right:0},1:{up:0,down:3,left:2,right:2},2:{up:0,down:4,left:1,right:1},3:{up:1,down:6,left:4,right:4},4:{up:2,down:7,left:3,right:3},5:{up:3,down:0,left:8,right:6},6:{up:3,down:0,left:5,right:7},7:{up:4,down:0,left:6,right:8},8:{up:4,down:0,left:7,right:5}},[d]),j=v.useCallback(I=>{P[I]&&C(P[I].action)},[P,C]),{selectedIndex:E}=$e({itemCount:P.length,onConfirm:j,active:!g&&!k,wrap:!0,navMap:T}),L=v.useCallback(I=>{var W;return((W=P[E])==null?void 0:W.id)===I},[P,E]);v.useEffect(()=>{const I=W=>{W.key==="Enter"&&(W.preventDefault(),C(e))};return window.addEventListener("keydown",I),()=>window.removeEventListener("keydown",I)},[C,e]);const A=(I=0)=>({initial:{opacity:0,y:16},animate:{opacity:1,y:0},transition:{duration:.35,delay:I,ease:"easeOut"}});return l.jsxs("div",{className:"h-screen bg-gradient-to-b from-slate-900 via-purple-950 to-slate-900 flex flex-col items-center justify-center p-4 relative overflow-hidden",children:[l.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[l.jsx("div",{className:"absolute top-1/4 -left-32 w-64 h-64 bg-purple-600/10 rounded-full blur-3xl"}),l.jsx("div",{className:"absolute bottom-1/4 -right-32 w-64 h-64 bg-blue-600/10 rounded-full blur-3xl"})]}),l.jsx("div",{className:"fixed top-3 right-3 z-50",children:l.jsx(FS,{})}),l.jsxs("div",{className:"w-full max-w-sm relative z-10 flex flex-col items-center",children:[l.jsxs(M.div,{...A(0),className:"text-center mb-4",children:[l.jsx("h1",{className:"text-4xl font-extrabold text-white tracking-tight drop-shadow-lg select-none",children:y("menu.title")}),l.jsx("p",{className:"text-white/50 text-xs mt-1",children:y("menu.subtitle")})]}),l.jsx(M.div,{...A(.1),className:"w-full space-y-2 mb-4",children:d?l.jsxs(l.Fragment,{children:[l.jsxs("button",{onClick:()=>C(e),className:`w-full py-4 rounded-xl bg-emerald-500 hover:bg-emerald-400 active:scale-[0.98] text-white font-bold text-lg shadow-lg shadow-emerald-500/20 transition-all duration-150 ${L("continue")?"ring-2 ring-yellow-400 ring-offset-2 ring-offset-slate-900 scale-[1.02]":""}`,children:[y("menu.continue"),l.jsx("span",{className:"block text-emerald-100/70 text-xs font-normal mt-0.5",children:y("menu.continueInfo",{level:((N=m==null?void 0:m.score)==null?void 0:N.level)||1,points:(((_=m==null?void 0:m.score)==null?void 0:_.points)||0).toLocaleString()})})]}),l.jsx("button",{onClick:()=>C(t),className:`w-full py-3 rounded-xl bg-white/10 hover:bg-white/15 active:scale-[0.98] text-white font-semibold text-base border border-white/10 transition-all duration-150 ${L("newGame")?"ring-2 ring-yellow-400 ring-offset-2 ring-offset-slate-900 scale-[1.02]":""}`,children:y("menu.newGame")})]}):l.jsx("button",{onClick:()=>C(e),className:`w-full py-5 rounded-xl bg-gradient-to-r from-emerald-500 to-green-500 hover:from-emerald-400 hover:to-green-400 active:scale-[0.98] text-white font-bold text-xl shadow-lg shadow-emerald-500/25 transition-all duration-150 ${L("play")?"ring-2 ring-yellow-400 ring-offset-2 ring-offset-slate-900 scale-[1.02]":""}`,children:y("menu.play")})}),l.jsxs(M.div,{...A(.18),className:"w-full grid grid-cols-2 gap-2 mb-4",children:[l.jsx(ji,{icon:"",label:y("menu.vsAI"),sub:y("menu.vsAISub"),onClick:()=>C(o),selected:L("vsAI")}),l.jsx(ji,{icon:"",label:y("menu.tutorial"),sub:y("menu.tutorialSub"),onClick:()=>C(c),selected:L("tutorial")}),l.jsx(ji,{icon:"",label:y("menu.creator"),sub:y("menu.creatorSub"),onClick:()=>C(h),selected:L("creator")}),l.jsx(ji,{icon:"",label:y("menu.aiExpert"),sub:y("menu.aiExpertSub"),onClick:()=>C(u),selected:L("aiExpert")})]}),l.jsxs(M.div,{...A(.25),className:"w-full grid grid-cols-4 gap-1 mb-4",children:[l.jsx(Ei,{icon:"",label:y("menu.shop"),onClick:()=>C(r),selected:L("shop")}),l.jsx(Ei,{icon:"",label:y("menu.missions"),onClick:()=>C(s),selected:L("missions")}),l.jsx(Ei,{icon:"",label:y("menu.achievements"),onClick:()=>C(i),selected:L("achievements")}),l.jsx(Ei,{icon:"",label:y("menu.settings"),onClick:()=>C(n),selected:L("settings")})]}),l.jsxs(M.div,{...A(.3),className:"flex items-center gap-3 text-xs text-white/25",children:[l.jsx("button",{onClick:()=>b(!x),className:"hover:text-white/50 transition-colors",children:x?"":""}),l.jsxs("button",{onClick:()=>p(I=>!I),className:"hover:text-white/50 transition-colors flex items-center gap-1",children:[((se=Wl.find(I=>I.code===w))==null?void 0:se.flag)||""," ",w.toUpperCase()]}),l.jsx("span",{className:"select-none",children:"v1.0"})]}),k&&l.jsx(M.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},className:"absolute bottom-16 bg-slate-800/95 backdrop-blur-sm rounded-xl border border-white/10 p-2 z-50 shadow-xl",children:Wl.map(I=>l.jsx("button",{onClick:()=>{S(I.code),p(!1)},className:`w-full text-left px-3 py-2 rounded-lg text-sm transition-colors ${w===I.code?"bg-purple-600/40 text-white font-semibold":"text-white/70 hover:bg-white/10 hover:text-white"}`,children:I.label},I.code))})]})]})}function ji({icon:e,label:t,sub:n,onClick:r,selected:s}){return l.jsxs("button",{onClick:r,className:`flex flex-col items-center text-center p-3 rounded-xl bg-white/[0.06] hover:bg-white/[0.1] border border-white/[0.06] hover:border-white/[0.12] active:scale-[0.97] transition-all duration-150 ${s?"ring-2 ring-yellow-400 bg-white/[0.12] border-yellow-400/30 scale-[1.03]":""}`,children:[l.jsx("span",{className:"text-2xl mb-1",children:e}),l.jsx("span",{className:"text-white font-semibold text-sm leading-tight",children:t}),l.jsx("span",{className:"text-white/40 text-[10px] mt-0.5 leading-tight",children:n})]})}function Ei({icon:e,label:t,onClick:n,selected:r}){return l.jsxs("button",{onClick:n,className:`flex flex-col items-center gap-1 px-2 py-2 rounded-lg hover:bg-white/[0.07] active:scale-95 transition-all duration-150 ${r?"ring-2 ring-yellow-400 bg-white/[0.1] scale-105":""}`,children:[l.jsx("span",{className:"text-lg",children:e}),l.jsx("span",{className:"text-white/40 text-[10px] leading-none",children:t})]})}function _0(){const[e,t]=v.useState([]),[n,r]=v.useState(!0);v.useEffect(()=>{try{const o=U.resolve("missionsService");t(o.getMissions()),r(!1);const a=()=>{t(o.getMissions())},c=({linesCleared:g})=>{o.incrementProgress(ge.CLEAR_LINES,g),g===4&&o.incrementProgress(ge.TETRIS_CLEAR,1),a()},u=()=>{o.incrementProgress(ge.T_SPINS,1),a()},h=()=>{o.incrementProgress(ge.PLACE_PIECES,1),a()},d=({score:g,level:x,combo:b})=>{g&&o.updateProgress(ge.SCORE_POINTS,g),x&&o.updateProgress(ge.REACH_LEVEL,x),b&&o.updateProgress(ge.COMBOS,b),a()},m=()=>{o.incrementProgress(ge.BACK_TO_BACK,1),a()};return O.on(F.LINE_CLEARED,c),O.on(F.T_SPIN,u),O.on(F.PIECE_PLACED,h),O.on(F.SCORE_UPDATED,d),O.on(F.BACK_TO_BACK,m),()=>{O.off(F.LINE_CLEARED,c),O.off(F.T_SPIN,u),O.off(F.PIECE_PLACED,h),O.off(F.SCORE_UPDATED,d),O.off(F.BACK_TO_BACK,m)}}catch{r(!1)}},[]),v.useEffect(()=>{if(n)return;const o=setInterval(()=>{try{const a=U.resolve("missionsService"),u=U.resolve("statisticsService").getStats();u.playTime>0&&(a.updateProgress(ge.SURVIVE_TIME,u.playTime),t(a.getMissions()))}catch{}},1e3);return()=>clearInterval(o)},[n]);const s=v.useCallback(o=>{try{const a=U.resolve("missionsService"),c=a.claimReward(o);return c.success&&(t(a.getMissions()),window.dispatchEvent(new Event("currencyUpdated"))),c}catch(a){return{success:!1,error:a.message}}},[]),i=v.useCallback(()=>{try{return U.resolve("missionsService").getStats()}catch{return null}},[]);return{missions:e,loading:n,claimReward:s,getMissionsStats:i}}function D0({trigger:e,duration:t=3e3,message:n}){const[r,s]=v.useState(!1),[i,o]=v.useState([]);return v.useEffect(()=>{if(e){s(!0);const a=[];for(let c=0;c<50;c++)a.push({id:c,x:Math.random()*100,y:-10,rotation:Math.random()*360,color:["#FFD700","#FF6B6B","#4ECDC4","#45B7D1","#FFA07A","#98D8C8"][Math.floor(Math.random()*6)],size:Math.random()*10+5,delay:Math.random()*.5});o(a),setTimeout(()=>{s(!1),o([])},t)}},[e,t]),r?l.jsxs("div",{className:"fixed inset-0 pointer-events-none z-[9999] overflow-hidden",children:[i.map(a=>l.jsx(M.div,{initial:{x:`${a.x}vw`,y:a.y,rotate:a.rotation,opacity:1},animate:{y:"110vh",rotate:a.rotation+720,opacity:0},transition:{duration:2+Math.random(),delay:a.delay,ease:"easeIn"},style:{position:"absolute",width:a.size,height:a.size,backgroundColor:a.color,borderRadius:Math.random()>.5?"50%":"0"}},a.id)),n&&l.jsx(M.div,{initial:{scale:0,y:"50vh"},animate:{scale:1,y:"40vh"},exit:{scale:0,opacity:0},transition:{type:"spring",stiffness:200,damping:20},className:"absolute inset-x-0 flex justify-center",children:l.jsx("div",{className:"bg-gradient-to-r from-yellow-400 to-orange-500 text-white font-bold text-4xl px-8 py-4 rounded-2xl shadow-2xl border-4 border-white",children:n})}),l.jsx(M.div,{initial:{opacity:0},animate:{opacity:[0,1,0]},transition:{duration:1,repeat:3},className:"absolute inset-0 bg-gradient-to-b from-yellow-400/20 via-transparent to-transparent"})]}):null}function BS(){const[e,t]=v.useState([]);v.useEffect(()=>{const s=i=>{const{message:o,type:a="info",duration:c=3e3}=i.detail,u={id:`toast_${Date.now()}_${Math.random()}`,message:o,type:a,duration:c};t(h=>[...h,u]),setTimeout(()=>{t(h=>h.filter(d=>d.id!==u.id))},c)};return window.addEventListener("showToast",s),()=>window.removeEventListener("showToast",s)},[]);const n=s=>{switch(s){case"success":return"from-green-600 to-emerald-600 border-green-400";case"error":return"from-red-600 to-rose-600 border-red-400";case"warning":return"from-yellow-600 to-amber-600 border-yellow-400";case"info":default:return"from-blue-600 to-cyan-600 border-blue-400"}},r=s=>{switch(s){case"success":return"";case"error":return"";case"warning":return"";case"info":default:return""}};return l.jsx("div",{className:"fixed top-4 right-4 z-[9999] flex flex-col gap-2 pointer-events-none",children:l.jsx(Ee,{children:e.map(s=>l.jsx(M.div,{initial:{opacity:0,x:100,scale:.8},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:100,scale:.8},className:`bg-gradient-to-r ${n(s.type)} border-2 rounded-lg px-4 py-3 shadow-2xl min-w-[250px] max-w-[400px] pointer-events-auto`,children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("span",{className:"text-white text-xl font-bold",children:r(s.type)}),l.jsx("span",{className:"text-white font-medium flex-1",children:s.message})]})},s.id))})})}function jr(e,t="info",n=3e3){window.dispatchEvent(new CustomEvent("showToast",{detail:{message:e,type:t,duration:n}}))}function HS({onClose:e}){const{t}=Re(),{missions:n,loading:r,claimReward:s,getMissionsStats:i}=_0(),[o,a]=ce.useState(!1),{selectedIndex:c}=$e({itemCount:(n==null?void 0:n.length)||0,onConfirm:g=>{const x=n[g];x&&x.completed&&!x.claimed&&h(x.id)},onBack:e,active:!0,wrap:!0}),u=i(),h=g=>{const x=s(g);x.success?(jr(t("missions.claimSuccess",{reward:x.reward}),"success"),i().allClaimed&&(a(!0),setTimeout(()=>a(!1),3e3))):jr(` ${x.error}`,"error")},d=g=>{switch(g){case"easy":return"text-green-400";case"medium":return"text-yellow-400";case"hard":return"text-red-400";default:return"text-white"}},m=g=>{switch(g){case"easy":return t("missions.easy");case"medium":return t("missions.medium");case"hard":return t("missions.hard");default:return g}};return r?l.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",children:l.jsx("div",{className:"text-white text-xl",children:t("missions.loading")})}):l.jsxs(M.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:e,children:[l.jsxs(M.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},className:"bg-gradient-to-br from-purple-900/95 to-blue-900/95 rounded-2xl p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto border-2 border-white/20 shadow-2xl",onClick:g=>g.stopPropagation(),children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-3xl font-bold text-white flex items-center gap-2",children:t("missions.title")}),l.jsx("p",{className:"text-white/60 text-sm mt-1",children:t("missions.subtitle")})]}),l.jsx("button",{onClick:e,className:"text-white/60 hover:text-white text-2xl transition-colors",children:""})]}),u&&l.jsxs("div",{className:"bg-black/30 rounded-lg p-4 mb-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-white/80",children:t("missions.dailyProgress")}),l.jsx("span",{className:"text-white font-bold",children:t("missions.completedOf",{completed:u.completed,total:u.total})})]}),l.jsxs("div",{className:"flex justify-between items-center mt-2",children:[l.jsx("span",{className:"text-white/80",children:t("missions.rewardsAvailable")}),l.jsxs("span",{className:"text-yellow-400 font-bold flex items-center gap-1",children:[" ",u.claimedRewards,"/",u.totalRewards]})]})]}),l.jsx("div",{className:"space-y-4",children:n.map((g,x)=>{const b=Math.min(g.progress,g.target),k=b/g.target*100;return l.jsxs(M.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:x*.1},className:`bg-black/40 rounded-lg p-4 border-2 ${g.completed?"border-green-500/50":"border-white/10"} ${x===c?"ring-2 ring-yellow-400 ring-offset-2 ring-offset-purple-900":""}`,children:[l.jsxs("div",{className:"flex justify-between items-start mb-2",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx("h3",{className:"text-white font-bold text-lg",children:g.title}),g.completed&&!g.claimed&&l.jsx("span",{className:"text-green-400 text-xl animate-pulse",children:""}),g.claimed&&l.jsx("span",{className:"text-white/40 text-sm",children:t("missions.claimed")})]}),l.jsx("p",{className:"text-white/60 text-sm",children:g.description}),l.jsx("span",{className:`text-xs ${d(g.difficulty)}`,children:m(g.difficulty)})]}),l.jsx("div",{className:"text-right",children:l.jsxs("div",{className:"text-yellow-400 font-bold flex items-center gap-1",children:[l.jsx("span",{className:"text-2xl",children:""}),l.jsx("span",{children:g.reward})]})})]}),l.jsxs("div",{className:"mt-3",children:[l.jsxs("div",{className:"flex justify-between text-sm text-white/60 mb-1",children:[l.jsx("span",{children:t("missions.progress")}),l.jsxs("span",{children:[b,"/",g.target]})]}),l.jsx("div",{className:"w-full bg-gray-700 rounded-full h-3 overflow-hidden",children:l.jsx(M.div,{initial:{width:0},animate:{width:`${k}%`},transition:{duration:.5},className:`h-full ${g.completed?"bg-green-500":"bg-blue-500"}`})})]}),g.completed&&!g.claimed&&l.jsx(M.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>h(g.id),className:"w-full mt-3 bg-green-600 hover:bg-green-500 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:t("missions.claimReward")})]},g.id)})}),l.jsx("div",{className:"mt-6 text-center text-white/40 text-sm",children:t("missions.resetNote")})]}),l.jsx(D0,{trigger:o,message:t("missions.allCompleted"),duration:3e3})]})}function R0(){const[e,t]=v.useState([]),[n,r]=v.useState([]),[s,i]=v.useState(!0);v.useEffect(()=>{try{const h=U.resolve("achievementsService");t(h.getAchievements()),i(!1);const d=()=>{try{const b=U.resolve("playerStatsService").getStats(),k=h.checkAchievements(b);k.length>0&&(t(h.getAchievements()),r(k),window.dispatchEvent(new CustomEvent("achievementsUnlocked",{detail:k})),setTimeout(()=>{r([])},5e3))}catch{}},m=setInterval(d,2e3),g=()=>d();return window.addEventListener("playerStatsUpdated",g),()=>{clearInterval(m),window.removeEventListener("playerStatsUpdated",g)}}catch{i(!1)}},[]);const o=v.useCallback(h=>{try{return U.resolve("achievementsService").getByTier(h)}catch{return[]}},[]),a=v.useCallback(()=>{try{return U.resolve("achievementsService").getUnlocked()}catch{return[]}},[]),c=v.useCallback(()=>{try{return U.resolve("achievementsService").getLocked()}catch{return[]}},[]),u=v.useCallback(()=>{try{return U.resolve("achievementsService").getStats()}catch{return null}},[]);return{achievements:e,newUnlocks:n,loading:s,getAchievementsByTier:o,getUnlocked:a,getLocked:c,getStats:u}}function zS({onClose:e}){const{achievements:t,loading:n,getStats:r,getAchievementsByTier:s}=R0(),{t:i}=Re(),[o,a]=v.useState("all"),c={bronze:"from-amber-700 to-amber-900",silver:"from-gray-400 to-gray-600",gold:"from-yellow-400 to-yellow-600",platinum:"from-cyan-400 to-blue-600"},u={bronze:"",silver:"",gold:"",platinum:""},h=["all",...Object.keys(u)],{selectedIndex:d}=$e({itemCount:h.length,onConfirm:x=>a(h[x]),onBack:e,active:!n,wrap:!0}),m=r(),g=o==="all"?t:s(o);return n?l.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",children:l.jsx("div",{className:"text-white text-xl",children:i("achievements.loading")})}):l.jsx(M.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:e,children:l.jsxs(M.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},className:"bg-gradient-to-br from-indigo-900/95 to-purple-900/95 rounded-2xl p-6 max-w-4xl w-full max-h-[90vh] overflow-y-auto border-2 border-white/20 shadow-2xl",onClick:x=>x.stopPropagation(),children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-3xl font-bold text-white flex items-center gap-2",children:i("achievements.title")}),l.jsx("p",{className:"text-white/60 text-sm mt-1",children:i("achievements.subtitle")})]}),l.jsx("button",{onClick:e,className:"text-white/60 hover:text-white text-2xl transition-colors",children:""})]}),m&&l.jsxs("div",{className:"bg-black/30 rounded-lg p-4 mb-6",children:[l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-2xl font-bold text-white",children:[m.unlocked,"/",m.total]}),l.jsx("div",{className:"text-white/60 text-sm",children:i("achievements.unlocked")})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-2xl font-bold text-green-400",children:[m.percentage,"%"]}),l.jsx("div",{className:"text-white/60 text-sm",children:i("achievements.complete")})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-2xl font-bold text-yellow-400 flex items-center justify-center gap-1",children:[" ",m.earnedRewards.toLocaleString()]}),l.jsx("div",{className:"text-white/60 text-sm",children:i("achievements.earned")})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-2xl font-bold text-white/40 flex items-center justify-center gap-1",children:[" ",m.totalRewards.toLocaleString()]}),l.jsx("div",{className:"text-white/60 text-sm",children:i("achievements.total")})]})]}),l.jsxs("div",{className:"flex justify-around mt-4 pt-4 border-t border-white/10",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-lg",children:""}),l.jsx("div",{className:"text-white/80 text-sm",children:m.byTier.bronze})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-lg",children:""}),l.jsx("div",{className:"text-white/80 text-sm",children:m.byTier.silver})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-lg",children:""}),l.jsx("div",{className:"text-white/80 text-sm",children:m.byTier.gold})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-lg",children:""}),l.jsx("div",{className:"text-white/80 text-sm",children:m.byTier.platinum})]})]})]}),l.jsxs("div",{className:"flex gap-2 mb-4 overflow-x-auto",children:[l.jsx("button",{onClick:()=>a("all"),className:`px-4 py-2 rounded-lg font-bold transition-colors whitespace-nowrap ${o==="all"?"bg-white text-black":"bg-white/20 text-white hover:bg-white/30"} ${d===0?"ring-2 ring-yellow-400 ring-offset-2 ring-offset-indigo-900":""}`,children:i("achievements.filterAll")}),Object.keys(u).map(x=>l.jsxs("button",{onClick:()=>a(x),className:`px-4 py-2 rounded-lg font-bold transition-colors whitespace-nowrap ${o===x?`bg-gradient-to-r ${c[x]} text-white`:"bg-white/20 text-white hover:bg-white/30"} ${d===h.indexOf(x)?"ring-2 ring-yellow-400 ring-offset-2 ring-offset-indigo-900":""}`,children:[u[x]," ",x.charAt(0).toUpperCase()+x.slice(1)]},x))]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:g.map((x,b)=>{const k=x.progress||0,p=x.requirement.value,f=Math.min(k/p*100,100);return l.jsxs(M.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:b*.05},className:`bg-black/40 rounded-lg p-4 border-2 relative overflow-hidden ${x.unlocked?`border-transparent bg-gradient-to-br ${c[x.tier]}`:"border-white/10"}`,children:[x.unlocked&&l.jsx("div",{className:"absolute top-2 right-2 text-3xl",children:""}),l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:"text-4xl",children:u[x.tier]}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:`font-bold text-lg mb-1 ${x.unlocked?"text-white":"text-white/60"}`,children:x.title}),l.jsx("p",{className:`text-sm mb-2 ${x.unlocked?"text-white/90":"text-white/40"}`,children:x.description}),l.jsxs("div",{className:`flex items-center gap-1 text-sm font-bold ${x.unlocked?"text-yellow-300":"text-white/40"}`,children:[" ",x.reward]}),!x.unlocked&&l.jsxs("div",{className:"mt-2",children:[l.jsxs("div",{className:"flex justify-between text-xs text-white/40 mb-1",children:[l.jsx("span",{children:i("achievements.progress")}),l.jsxs("span",{children:[k,"/",p]})]}),l.jsx("div",{className:"w-full bg-gray-700/50 rounded-full h-2",children:l.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${f}%`}})})]}),x.unlocked&&x.unlockedAt&&l.jsx("div",{className:"text-xs text-white/60 mt-2",children:i("achievements.unlockedAt",{date:new Date(x.unlockedAt).toLocaleDateString()})})]})]})]},x.id)})}),g.length===0&&l.jsx("div",{className:"text-center text-white/40 py-8",children:i("achievements.noneInCategory")})]})})}function US(){const{t:e}=Re(),[t,n]=v.useState([]),[r,s]=v.useState(!1);v.useEffect(()=>{const a=c=>{const u=c.detail;u.some(d=>d.tier==="platinum")&&(s(!0),setTimeout(()=>s(!1),3e3)),u.forEach((d,m)=>{setTimeout(()=>{const g={id:`${d.id}_${Date.now()}`,achievement:d};n(x=>[...x,g]),setTimeout(()=>{n(x=>x.filter(b=>b.id!==g.id))},5e3)},m*500)})};return window.addEventListener("achievementsUnlocked",a),()=>{window.removeEventListener("achievementsUnlocked",a)}},[]);const i={bronze:"",silver:"",gold:"",platinum:""},o={bronze:"from-amber-700 to-amber-900",silver:"from-gray-400 to-gray-600",gold:"from-yellow-400 to-yellow-600",platinum:"from-cyan-400 to-blue-600"};return l.jsxs("div",{className:"fixed top-4 right-4 z-[9999] pointer-events-none",children:[l.jsx(Ee,{children:t.map(a=>{const{achievement:c}=a;return l.jsx(M.div,{initial:{opacity:0,x:100,scale:.8},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:100,scale:.8},transition:{type:"spring",stiffness:200,damping:20},className:`bg-gradient-to-r ${o[c.tier]} rounded-lg p-4 shadow-2xl mb-3 border-2 border-white/30 pointer-events-auto max-w-sm`,children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"text-5xl",children:i[c.tier]}),l.jsxs("div",{className:"flex-1",children:[l.jsx("div",{className:"text-white/90 text-sm font-bold mb-1",children:e("achievements.unlockBanner")}),l.jsx("h3",{className:"text-white font-bold text-lg",children:c.title}),l.jsx("p",{className:"text-white/80 text-sm",children:c.description}),l.jsxs("div",{className:"flex items-center gap-1 mt-2 text-yellow-200 font-bold",children:[l.jsx("span",{className:"text-xl",children:""}),l.jsxs("span",{children:["+",c.reward]})]})]})]})},a.id)})}),l.jsx(D0,{trigger:r,message:e("achievements.legendary"),duration:3e3})]})}const I0=({isConnected:e,controllerCount:t,gamepadInfo:n,className:r=""})=>{const{t:s}=Re(),[i,o]=v.useState(!1);return e?l.jsx("div",{className:`fixed top-4 right-4 z-50 ${r}`,children:l.jsxs(M.div,{initial:{opacity:0,scale:.8,x:20},animate:{opacity:1,scale:1,x:0},exit:{opacity:0,scale:.8,x:20},transition:{duration:.3},className:"bg-gray-900/90 backdrop-blur-sm text-white p-3 rounded-lg border border-green-500/30 shadow-lg",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(M.div,{animate:{rotate:[0,-10,10,-10,0],scale:[1,1.1,1]},transition:{duration:2,repeat:1/0,repeatDelay:3},children:""}),l.jsxs("div",{className:"text-sm",children:[l.jsx("div",{className:"text-green-400 font-semibold",children:t===1?s("gamepad.connected",{n:t}):s("gamepad.connectedPlural",{n:t})}),l.jsx("div",{className:"text-gray-300 text-xs",children:s("gamepad.ready")})]}),l.jsx(M.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>o(!i),className:"ml-2 text-gray-400 hover:text-white transition-colors",title:s("gamepad.showControls"),children:l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"})})})]}),l.jsx(Ee,{children:i&&l.jsx(M.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},className:"mt-3 pt-3 border-t border-gray-700",children:l.jsxs("div",{className:"text-xs text-gray-300 space-y-1",children:[l.jsx("div",{className:"font-semibold text-white mb-2",children:s("gamepad.controlsTitle")}),l.jsxs("div",{className:"grid grid-cols-2 gap-1 text-xs",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-yellow-400",children:"D-Pad  "}),l.jsx("div",{className:"text-gray-400",children:s("gamepad.move")})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-yellow-400",children:"D-Pad "}),l.jsx("div",{className:"text-gray-400",children:s("gamepad.accelerate")})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-yellow-400",children:"D-Pad "}),l.jsx("div",{className:"text-gray-400",children:s("gamepad.hardDrop")})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-yellow-400",children:"A/X/Y"}),l.jsx("div",{className:"text-gray-400",children:s("gamepad.rotateRight")})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-yellow-400",children:"B"}),l.jsx("div",{className:"text-gray-400",children:s("gamepad.rotateLeft")})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-yellow-400",children:"L/R"}),l.jsx("div",{className:"text-gray-400",children:s("gamepad.hold")})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-yellow-400",children:"Start"}),l.jsx("div",{className:"text-gray-400",children:s("gamepad.pause")})]})]}),l.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-700",children:[l.jsx("div",{className:"text-green-400 text-xs",children:s("gamepad.analogNote")}),l.jsx("div",{className:"text-blue-400 text-xs",children:s("gamepad.triggerNote")}),l.jsx("div",{className:"text-purple-400 text-xs",children:s("gamepad.backNote")})]}),n&&(Array.isArray(n)?n:[n]).length>0&&l.jsx("div",{className:"mt-2 pt-2 border-t border-gray-700",children:l.jsx("div",{className:"text-xs text-gray-400",children:(Array.isArray(n)?n:[n]).map((a,c)=>l.jsxs("div",{className:"mb-1",children:[l.jsx("div",{className:"font-semibold text-white",children:s("gamepad.controllerLabel",{n:a.index+1})}),l.jsx("div",{className:"text-gray-300 truncate",children:a.id.length>30?a.id.substring(0,30)+"...":a.id}),l.jsxs("div",{className:"flex gap-2 text-xs",children:[l.jsx("span",{className:"text-blue-400",children:s("gamepad.buttons",{n:a.buttons})}),l.jsx("span",{className:"text-green-400",children:s("gamepad.axes",{n:a.axes})}),a.vibration&&l.jsx("span",{className:"text-purple-400",children:s("gamepad.vibration")})]})]},c))})})]})})})]})}):null},as={DPAD_UP:12,DPAD_DOWN:13,DPAD_LEFT:14,DPAD_RIGHT:15,FACE_BUTTON_BOTTOM:0,FACE_BUTTON_RIGHT:1,FACE_BUTTON_LEFT:2,FACE_BUTTON_TOP:3,BUMPER_LEFT:4,BUMPER_RIGHT:5,TRIGGER_LEFT:6,TRIGGER_RIGHT:7,BUTTON_BACK:8,BUTTON_START:9,STICK_LEFT:10,STICK_RIGHT:11},gu=(e=null)=>{const[t,n]=v.useState([]),[r,s]=v.useState(!1),i=v.useRef({}),o=v.useRef(33),a=v.useRef({}),c=v.useRef({}),u=v.useRef(167),h=.5,d=.5;v.useEffect(()=>{const k=y=>{n(w=>w.some(S=>S.index===y.gamepad.index)?w:[...w,y.gamepad]),s(!0);try{y.gamepad.vibrationActuator&&y.gamepad.vibrationActuator.playEffect("dual-rumble",{duration:200,strongMagnitude:.5,weakMagnitude:.5})}catch{}},p=y=>{n(S=>S.filter(C=>C.index!==y.gamepad.index));const w=navigator.getGamepads().filter(S=>S&&S.connected);s(w.length>0)};return window.addEventListener("gamepadconnected",k),window.addEventListener("gamepaddisconnected",p),(()=>{const y=navigator.getGamepads(),w=Array.from(y).filter(S=>S&&S.connected);w.length>0&&(n(w),s(!0))})(),()=>{window.removeEventListener("gamepadconnected",k),window.removeEventListener("gamepaddisconnected",p)}},[]);const m=v.useCallback((k,p,f)=>{const y=f??d;return Math.abs(k)<y&&Math.abs(p)<y?null:Math.abs(k)>Math.abs(p)?k>0?"right":"left":p>0?"down":"up"},[]),g=v.useCallback(()=>{var I,W,R,B;if(!r||!e)return;const k=navigator.getGamepads(),p=Array.from(k).find(G=>G&&G.connected);if(!p)return;const f=Date.now(),{movePiece:y,rotatePiece:w,rotatePieceLeft:S,hardDrop:C,holdPiece:P,pause:T,resume:j,togglePause:E}=e,L=Ql();if([{button:L.pause,action:()=>{E?E():T&&T()}},{button:L.backToMenu,action:()=>{e.backToMenu&&e.backToMenu()}}].forEach(({button:G,action:H})=>{var K;const $=(K=p.buttons[G])==null?void 0:K.pressed,z=a.current[G];a.current[G]=$,$&&!z&&(H(),x(p,G))}),!y)return;const N=((I=e.isGameOver)==null?void 0:I.call(e))??!1,_=(G,H)=>{const $=`movement_${G}`,z=i.current[$]||0,K=c.current[$]||!1;if(H&&!K){c.current[$]=!0,c.current[$+"_start"]=f,i.current[$]=f,se(G);return}if(H&&K){const Q=f-(c.current[$+"_start"]||z)<u.current?u.current:o.current;f-z>=Q&&(i.current[$]=f,se(G));return}!H&&K&&(c.current[$]=!1,c.current[$+"_start"]=0)},se=G=>{e.movePiece&&e.movePiece(G)};if(!N){const G=m(p.axes[0],p.axes[1]),H=((W=p.buttons[as.DPAD_LEFT])==null?void 0:W.pressed)||G==="left",$=((R=p.buttons[as.DPAD_RIGHT])==null?void 0:R.pressed)||G==="right",z=((B=p.buttons[as.DPAD_DOWN])==null?void 0:B.pressed)||G==="down";_("left",H),_("right",$),_("down",z);const K={},J=new Map,Q=(le,Le,Se=!1)=>{le!=null&&!J.has(le)&&J.set(le,{action:Le,isTrigger:Se||le===6||le===7})};Q(L.rotateCW,()=>w==null?void 0:w()),Q(L.rotateCCW,()=>S==null?void 0:S()),Q(L.hardDrop,()=>C==null?void 0:C()),Q(L.hold,()=>P==null?void 0:P()),J.has(2)||Q(2,()=>w==null?void 0:w()),J.has(3)||Q(3,()=>w==null?void 0:w()),J.has(4)||Q(4,()=>P==null?void 0:P()),J.has(5)||Q(5,()=>P==null?void 0:P()),J.has(6)||Q(6,()=>S==null?void 0:S(),!0),J.has(7)||Q(7,()=>w==null?void 0:w(),!0),Array.from(J.entries()).map(([le,{action:Le,isTrigger:Se}])=>({button:le,action:Le,isTrigger:Se})).forEach(({button:le,action:Le,isTrigger:Se})=>{var te,Y;const wt=Se?(((te=p.buttons[le])==null?void 0:te.value)??0)>h:(Y=p.buttons[le])==null?void 0:Y.pressed,Ot=a.current[le];K[le]=wt,wt&&!Ot&&(Le(),x(p,le))});const Ye="stick_up_hardDrop";G==="up"&&!a.current[Ye]&&(C==null||C(),x(p,as.DPAD_UP)),K[Ye]=G==="up",a.current={...a.current,...K}}},[r,m,e]),x=v.useCallback((k,p)=>{try{if(k.vibrationActuator){const f=p===as.DPAD_UP;k.vibrationActuator.playEffect("dual-rumble",{duration:f?80:50,strongMagnitude:f?.3:.1,weakMagnitude:f?.15:.05})}}catch{}},[]),b=v.useCallback(()=>{const k=navigator.getGamepads(),p=Array.from(k).filter(f=>f&&f.connected);return p.length===0?[]:p.map(f=>({id:f.id,index:f.index,connected:f.connected,buttons:f.buttons.length,axes:f.axes.length,vibration:!!f.vibrationActuator}))},[]);return{isGamepadActive:r,connectedGamepads:t,processGamepadInput:g,getGamepadInfo:b,controllerCount:t.length}};function $S({mode:e,aiDifficulty:t,ai1Difficulty:n,ai2Difficulty:r,onExit:s}){var A,N,_,se,I,W,R,B,G,H,$,z,K,J,Q,pe,Ye,le,Le,Se,wt,Ot,te,Y,Pe,oe,qe,Dn;const[i,o]=v.useState(null),[a,c]=v.useState(null),[u,h]=v.useState(null),[d,m]=v.useState(0),[g,x]=v.useState(0),b=v.useRef({p1:null,p2:null,ai:null,ai1:null,ai2:null}),k=v.useRef(0),p=v.useRef(null),f=v.useRef(null);v.useEffect(()=>{const Z=new nr(new rr,new sr,null,new Nn),q=new nr(new rr,new sr,null,new Nn);let he=null,ie=null,re=null;if(e==="vsAI")try{he=new Ts,he.setDifficulty(t||"medium"),t==="expert"&&(q.score._fixedLevel=1)}catch{}else e==="aiVsAI"&&(ie=new Ts,ie.setDifficulty(n||"expert"),ie.setVisualMode(!0),re=new Ts,re.setDifficulty(r||"expert"),re.setVisualMode(!0),(n||"expert")==="expert"&&(Z.score._fixedLevel=1),(r||"expert")==="expert"&&(q.score._fixedLevel=1));return Z.initializeGame(),Z.isPlaying=!0,q.initializeGame(),q.isPlaying=!0,e==="vsAI"&&t==="expert"?(q._lockDelayMax=2e3,q._lockDelayMaxResets=50):e==="aiVsAI"&&((n||"expert")==="expert"&&(Z._lockDelayMax=2e3,Z._lockDelayMaxResets=50),(r||"expert")==="expert"&&(q._lockDelayMax=2e3,q._lockDelayMaxResets=50)),b.current={p1:Z,p2:q,ai:he,ai1:ie,ai2:re},o(Z.getGameState()),c(q.getGameState()),()=>{p.current&&cancelAnimationFrame(p.current)}},[e,t,n,r]),v.useEffect(()=>{const Z=q=>{var xu,wu;k.current||(k.current=q);const he=q-k.current;k.current=q;const{p1:ie,p2:re,ai:Xr,ai1:ri,ai2:si}=b.current;if(!ie||!re){p.current=requestAnimationFrame(Z);return}if(ie.gameOver||re.gameOver){f.current||(ie.gameOver&&!re.gameOver?f.current="player2":!ie.gameOver&&re.gameOver?f.current="player1":f.current=(((xu=ie.score)==null?void 0:xu.points)||0)>=(((wu=re.score)==null?void 0:wu.points)||0)?"player1":"player2",h(f.current)),ie.gameOver||(ie.gameOver=!0,ie._markDirty()),re.gameOver||(re.gameOver=!0,re._markDirty()),ie.isDirty&&(o(ie.getGameState()),ie.clearDirty()),re.isDirty&&(c(re.getGameState()),re.clearDirty());return}ie.isPaused||ie.updateGame(he),re.isPaused||re.updateGame(he);const vu=ie.consumeAttack();vu>0&&!re.gameOver&&re.receiveGarbage(vu);const yu=re.consumeAttack();yu>0&&!ie.gameOver&&ie.receiveGarbage(yu);const Qo=(Xo,tn)=>{if(!(!Xo||tn.gameOver))try{const $0=e==="aiVsAI"?3:Xo._isExpert?2:1;for(let bu=0;bu<$0;bu++){const Jo=Xo.decideNextMove(tn.getGameState());if(!Jo)break;switch(Jo.action){case"left":tn.movePiece("left");break;case"right":tn.movePiece("right");break;case"rotate":tn.rotatePiece();break;case"down":tn.movePiece("down");break;case"drop":tn.hardDrop();break;case"hold":tn.holdPiece();break}if(Jo.action==="drop")break}}catch{}};e==="aiVsAI"?(Qo(ri,ie),Qo(si,re)):e==="vsAI"&&Qo(Xr,re),ie.isDirty&&(o(ie.getGameState()),m(ie.pendingGarbage),ie.clearDirty()),re.isDirty&&(c(re.getGameState()),x(re.pendingGarbage),re.clearDirty()),p.current=requestAnimationFrame(Z)};return p.current=requestAnimationFrame(Z),()=>{p.current&&cancelAnimationFrame(p.current)}},[e]),v.useEffect(()=>{if(u||e==="aiVsAI")return;const Z=q=>{const he=b.current.p1;if(!(!he||he.gameOver))switch(q.key){case"ArrowLeft":q.preventDefault(),he.movePiece("left");break;case"ArrowRight":q.preventDefault(),he.movePiece("right");break;case"ArrowDown":q.preventDefault(),he.movePiece("down");break;case"ArrowUp":q.preventDefault(),he.rotatePiece();break;case"z":case"Z":he.rotatePiece("left");break;case"c":case"C":case"Shift":he.holdPiece();break;case" ":q.preventDefault(),he.hardDrop();break}};return window.addEventListener("keydown",Z),()=>window.removeEventListener("keydown",Z)},[u,e]);const y=ce.useMemo(()=>{const Z={backToMenu:s,togglePause:()=>{},isGameOver:()=>{const q=b.current.p1;return(q==null?void 0:q.gameOver)??!0}};return u||e==="aiVsAI"?Z:{...Z,movePiece:q=>{const he=b.current.p1;he&&!he.gameOver&&he.movePiece(q)},rotatePiece:()=>{const q=b.current.p1;q&&!q.gameOver&&q.rotatePiece()},rotatePieceLeft:()=>{const q=b.current.p1;q&&!q.gameOver&&q.rotatePiece("left")},hardDrop:()=>{const q=b.current.p1;q&&!q.gameOver&&q.hardDrop()},holdPiece:()=>{const q=b.current.p1;q&&!q.gameOver&&q.holdPiece()}}},[u,e,s]),{isGamepadActive:w,controllerCount:S,processGamepadInput:C,getGamepadInfo:P}=gu(y);v.useEffect(()=>{if(!w)return;const Z=setInterval(()=>C(),16);return()=>clearInterval(Z)},[w,C]);const T=v.useCallback(()=>{var Xr,ri,si;const{p1:Z,p2:q,ai:he,ai1:ie,ai2:re}=b.current;Z&&(Z.initializeGame(),Z.isPlaying=!0),q&&(q.initializeGame(),q.isPlaying=!0),he&&((Xr=he.reset)==null||Xr.call(he)),ie&&((ri=ie.reset)==null||ri.call(ie)),re&&((si=re.reset)==null||si.call(re)),f.current=null,k.current=0,h(null),m(0),x(0),Z&&o(Z.getGameState()),q&&c(q.getGameState())},[]),{selectedIndex:j}=$e({itemCount:2,onConfirm:Z=>{Z===0?T():s()},onBack:s,active:!!u,wrap:!0}),E=ce.useMemo(()=>{var Z;if(!(i!=null&&i.currentPiece)||i!=null&&i.gameOver)return null;try{return(Z=b.current.p1)==null?void 0:Z.getDropPreview()}catch{return null}},[(N=(A=i==null?void 0:i.currentPiece)==null?void 0:A.position)==null?void 0:N.x,(se=(_=i==null?void 0:i.currentPiece)==null?void 0:_.position)==null?void 0:se.y,(I=i==null?void 0:i.currentPiece)==null?void 0:I.type,(W=i==null?void 0:i.currentPiece)==null?void 0:W.rotationState]),L=ce.useMemo(()=>{var Z;if(!(a!=null&&a.currentPiece)||a!=null&&a.gameOver)return null;try{return(Z=b.current.p2)==null?void 0:Z.getDropPreview()}catch{return null}},[(B=(R=a==null?void 0:a.currentPiece)==null?void 0:R.position)==null?void 0:B.x,(H=(G=a==null?void 0:a.currentPiece)==null?void 0:G.position)==null?void 0:H.y,($=a==null?void 0:a.currentPiece)==null?void 0:$.type,(z=a==null?void 0:a.currentPiece)==null?void 0:z.rotationState]);return!i||!a?l.jsx("div",{className:"h-screen flex items-center justify-center bg-gradient-to-br from-purple-900 to-blue-900",children:l.jsx("div",{className:"text-white text-2xl",children:"Carregando multiplayer..."})}):l.jsxs("div",{className:"h-screen flex flex-col items-center bg-gradient-to-br from-purple-900 to-blue-900 p-2 overflow-hidden",children:[w&&l.jsx(I0,{isConnected:w,controllerCount:S,gamepadInfo:P()}),l.jsxs("div",{className:"flex justify-between items-center w-full max-w-5xl mb-2",children:[l.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-white",children:e==="aiVsAI"?" IA vs IA (Debug)":e==="vsAI"?" vs IA":" 1v1 Local"}),l.jsx("button",{onClick:s,className:"bg-red-600 hover:bg-red-700 text-white px-3 py-1.5 rounded-lg transition-colors text-sm font-bold",children:" Voltar"})]}),l.jsxs("div",{className:"multiplayer-boards flex gap-1 sm:gap-4 items-start justify-center",children:[l.jsxs("div",{className:"flex flex-col items-center min-w-0",children:[l.jsx("div",{className:"bg-blue-600 text-white px-2 sm:px-4 py-0.5 sm:py-1 rounded-t-lg font-bold text-xs sm:text-base truncate max-w-full",children:e==="aiVsAI"?` IA1 (${(n==null?void 0:n.toUpperCase())||"EXPERT"})`:e==="vsAI"?" VOC":" P1"}),l.jsxs("div",{className:"bg-black/40 p-1 sm:p-2 rounded-b-lg",children:[l.jsxs("div",{className:"flex gap-1 sm:gap-2",children:[l.jsxs("div",{className:"hidden sm:flex flex-col gap-2",children:[l.jsx(tr,{heldPiece:i.heldPiece,canHold:i.canHold}),e!=="aiVsAI"&&l.jsxs("div",{className:"text-white/60 text-[10px] leading-tight",children:[" mover",l.jsx("br",{})," rotacionar",l.jsx("br",{}),"C segurar",l.jsx("br",{}),"Espao dropar"]})]}),l.jsx(En,{board:i.board,currentPiece:i.currentPiece,dropPreview:E,gameOver:i.gameOver}),d>0&&l.jsx(Hh,{count:d}),l.jsxs("div",{className:"hidden sm:flex flex-col gap-2",children:[l.jsx(er,{pieces:i.nextPieces||[]}),l.jsx(Zn,{score:((K=i.score)==null?void 0:K.points)||0,level:((J=i.score)==null?void 0:J.level)||1,lines:((Q=i.score)==null?void 0:Q.lines)||0,combo:((pe=i.score)==null?void 0:pe.combo)||0})]})]}),l.jsxs("div",{className:"sm:hidden flex justify-between text-[9px] text-white/70 mt-1 px-0.5 font-mono",children:[l.jsx("span",{children:(((Ye=i.score)==null?void 0:Ye.points)||0).toLocaleString()}),l.jsxs("span",{children:["Lv",((le=i.score)==null?void 0:le.level)||1]}),l.jsxs("span",{children:["L",((Le=i.score)==null?void 0:Le.lines)||0]})]})]})]}),l.jsx("div",{className:"flex items-center justify-center self-center",children:l.jsx("div",{className:"bg-yellow-500 text-black font-bold text-sm sm:text-3xl px-2 sm:px-4 py-1 sm:py-2 rounded-full shadow-2xl animate-pulse",children:"VS"})}),l.jsxs("div",{className:"flex flex-col items-center min-w-0",children:[l.jsx("div",{className:"bg-red-600 text-white px-2 sm:px-4 py-0.5 sm:py-1 rounded-t-lg font-bold text-xs sm:text-base truncate max-w-full",children:e==="aiVsAI"?` IA2 (${(r==null?void 0:r.toUpperCase())||"EXPERT"})`:e==="vsAI"?` IA (${(t==null?void 0:t.toUpperCase())||"MEDIUM"})`:" P2"}),l.jsxs("div",{className:"bg-black/40 p-1 sm:p-2 rounded-b-lg",children:[l.jsxs("div",{className:"flex gap-1 sm:gap-2",children:[l.jsxs("div",{className:"hidden sm:flex flex-col gap-2",children:[l.jsx(tr,{heldPiece:a.heldPiece,canHold:a.canHold}),e==="1v1"&&l.jsxs("div",{className:"text-white/60 text-[10px] leading-tight",children:["Setas mover",l.jsx("br",{})," rotacionar",l.jsx("br",{}),"Ctrl segurar",l.jsx("br",{}),"Enter dropar"]})]}),l.jsx(En,{board:a.board,currentPiece:a.currentPiece,dropPreview:L,gameOver:a.gameOver}),g>0&&l.jsx(Hh,{count:g}),l.jsxs("div",{className:"hidden sm:flex flex-col gap-2",children:[l.jsx(er,{pieces:a.nextPieces||[]}),l.jsx(Zn,{score:((Se=a.score)==null?void 0:Se.points)||0,level:((wt=a.score)==null?void 0:wt.level)||1,lines:((Ot=a.score)==null?void 0:Ot.lines)||0,combo:((te=a.score)==null?void 0:te.combo)||0})]})]}),l.jsxs("div",{className:"sm:hidden flex justify-between text-[9px] text-white/70 mt-1 px-0.5 font-mono",children:[l.jsx("span",{children:(((Y=a.score)==null?void 0:Y.points)||0).toLocaleString()}),l.jsxs("span",{children:["Lv",((Pe=a.score)==null?void 0:Pe.level)||1]}),l.jsxs("span",{children:["L",((oe=a.score)==null?void 0:oe.lines)||0]})]})]})]})]}),l.jsx(Ee,{children:u&&l.jsx(M.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/90 flex items-center justify-center z-50",children:l.jsxs(M.div,{initial:{scale:.8,y:50},animate:{scale:1,y:0},className:"bg-gradient-to-br from-yellow-500 to-orange-600 rounded-2xl p-12 text-center",children:[l.jsx("div",{className:"text-8xl mb-4",children:u==="player1"||e==="aiVsAI"?"":""}),l.jsx("h2",{className:"text-5xl font-bold text-white mb-4",children:e==="aiVsAI"?u==="player1"?"IA 1 VENCEU!":"IA 2 VENCEU!":u==="player1"?"VITRIA!":"DERROTA!"}),l.jsx("p",{className:"text-2xl text-white/80 mb-8",children:e==="aiVsAI"?`${u==="player1"?n==null?void 0:n.toUpperCase():r==null?void 0:r.toUpperCase()}  superior!`:u==="player1"?e==="vsAI"?"Voc venceu a IA!":"Player 1 venceu!":e==="vsAI"?"IA venceu!":"Player 2 venceu!"}),l.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-8 text-white",children:[l.jsxs("div",{className:"bg-black/30 rounded-lg p-4",children:[l.jsx("div",{className:"text-sm opacity-60",children:e==="aiVsAI"?`IA1 (${n})`:"Player 1"}),l.jsx("div",{className:"text-3xl font-bold",children:(((qe=i.score)==null?void 0:qe.points)||0).toLocaleString()})]}),l.jsxs("div",{className:"bg-black/30 rounded-lg p-4",children:[l.jsx("div",{className:"text-sm opacity-60",children:e==="aiVsAI"?`IA2 (${r})`:e==="vsAI"?"IA":"Player 2"}),l.jsx("div",{className:"text-3xl font-bold",children:(((Dn=a.score)==null?void 0:Dn.points)||0).toLocaleString()})]})]}),l.jsxs("div",{className:"flex gap-4",children:[l.jsx("button",{onClick:T,className:`bg-green-600 hover:bg-green-700 text-white px-8 py-3 rounded-lg font-bold text-xl transition-colors ${j===0?"ring-2 ring-yellow-400 ring-offset-2 ring-offset-orange-600":""}`,children:" Jogar Novamente"}),l.jsx("button",{onClick:s,className:`bg-gray-700 hover:bg-gray-800 text-white px-8 py-3 rounded-lg font-bold text-xl transition-colors ${j===1?"ring-2 ring-yellow-400 ring-offset-2 ring-offset-orange-600":""}`,children:" Menu"})]})]})})})]})}function Hh({count:e}){const n=Math.min(e,20);return l.jsx("div",{className:"flex flex-col-reverse justify-end w-3 rounded overflow-hidden",style:{height:"calc(var(--cell) * 22 + 22px)"},children:Array.from({length:n},(r,s)=>l.jsx("div",{className:"w-full",style:{height:`${100/20}%`,backgroundColor:e>8?"#ef4444":e>4?"#f59e0b":"#ef4444",opacity:.7+s/n*.3}},s))})}class qS{constructor(){this._actionQueue=[],this._lastPieceType=null,this._holdCooldown=0,this._comboCount=0,this.thinkingTime=0,this.lastDecision=0}setDifficulty(){}decideNextMove(t){var d;const n=Date.now();if(n-this.lastDecision<this.thinkingTime)return null;this.lastDecision=n;const{currentPiece:r,board:s,heldPiece:i,canHold:o}=t;if(!r||!s)return null;const a=r.type;if(a!==this._lastPieceType&&(this._lastPieceType=a,this._actionQueue=[],this._holdCooldown>0&&this._holdCooldown--),this._actionQueue.length>0)return this._actionQueue.shift();const c=s.length,u=((d=s[0])==null?void 0:d.length)||10,h=this._findBestMove(r,s,c,u);if(o&&this._holdCooldown<=0&&i){const m=this._findBestMove(i,s,c,u);if(m&&(!h||m.score>h.score+500))return this._holdCooldown=1,{action:"hold"}}return!h&&o&&this._holdCooldown<=0?(this._holdCooldown=1,{action:"hold"}):(h?this._actionQueue=this._buildActionSequence(r,h.rotations,h.targetX):this._actionQueue=[{action:"drop"}],this._actionQueue.shift()||{action:"drop"})}_findBestMove(t,n,r,s){let i=-1/0,o=null;for(let a=0;a<4;a++){const c=this._rotateShape(t.shape,a),u=c[0].length;for(let h=-1;h<=s-u+1;h++){const d=this._findLandingRow(c,n,h,r,s);if(d==null||d<0)continue;const m=this._placeOnBoard(c,n,h,d);if(!m)continue;const g=this._evaluate(m,n,d);g>i&&(i=g,o={rotations:a,targetX:h,score:g})}}return o}_evaluate(t,n,r){const s=t.length,i=t[0].length;let o=0;const a=this._countCompleteLines(t);a===1&&(o+=1e4),a===2&&(o+=25e3),a===3&&(o+=5e4),a>=4&&(o+=1e5);const c=this._removeCompleteLines(t);let u=0,h=0;for(let f=0;f<i;f++){let y=!1,w=0;for(let S=0;S<s;S++)c[S][f]!=null?(y=!0,w++):y&&(u++,h+=w)}o-=u*1e4,o-=h*1e3;const d=[];for(let f=0;f<i;f++){let y=0;for(let w=0;w<s;w++)if(c[w][f]!=null){y=s-w;break}d.push(y)}const m=Math.max(...d),g=d.reduce((f,y)=>f+y,0);o-=g*50,o-=m*100,m>12&&(o-=(m-12)*(m-12)*500),m>16&&(o-=1e5);let x=0;for(let f=0;f<i-1;f++)f===i-2?x+=Math.abs(d[f]-d[f+1])*.3:x+=Math.abs(d[f]-d[f+1]);o-=x*200;let b=0;for(let f=0;f<s;f++)if(c[f].filter(w=>w!=null).length!==0){for(let w=0;w<i-1;w++){const S=c[f][w]!=null,C=c[f][w+1]!=null;S!==C&&b++}c[f][0]==null&&b++,c[f][i-1]==null&&b++}o-=b*100;let k=0;for(let f=0;f<i;f++){for(let y=0;y<s-1;y++){const w=c[y][f]!=null,S=c[y+1][f]!=null;w!==S&&k++}c[s-1][f]==null&&k++}o-=k*80;const p=i-1;if(d[p]<d[p-1]){const f=d[p-1]-d[p];f>=1&&f<=4&&m<=12&&(o+=f*300)}for(let f=0;f<s;f++){const y=c[f].filter(w=>w!=null).length;y===9&&(o+=500),y===8&&(o+=200)}return o-=r>0?0:(s-r)*30,m>14&&(o+=a*5e4),o}_buildActionSequence(t,n,r){var u;const s=[],i=n%4;for(let h=0;h<i;h++)s.push({action:"rotate"});const o=((u=t.position)==null?void 0:u.x)??3,a=r-o,c=a>0?"right":"left";for(let h=0;h<Math.abs(a);h++)s.push({action:c});return s.push({action:"drop"}),s}_rotateShape(t,n){let r=t;for(let s=0;s<n%4;s++)r=r[0].map((i,o)=>r.map(a=>a[o]).reverse());return r}_findLandingRow(t,n,r,s,i){const o=t.length;for(let a=-o;a<s;a++)if(this._collides(t,n,r,a+1,s,i))return a;return s-o}_collides(t,n,r,s,i,o){for(let a=0;a<t.length;a++)for(let c=0;c<t[0].length;c++){if(!t[a][c])continue;const u=r+c,h=s+a;if(u<0||u>=o||h>=i||h>=0&&n[h][u]!=null)return!0}return!1}_placeOnBoard(t,n,r,s){const i=n.length,o=n[0].length,a=n.map(c=>[...c]);for(let c=0;c<t.length;c++)for(let u=0;u<t[0].length;u++){if(!t[c][u])continue;const h=r+u,d=s+c;if(h<0||h>=o||d<0||d>=i||a[d][h]!=null)return null;a[d][h]=1}return a}_removeCompleteLines(t){const n=t[0].length,r=t.filter(s=>!s.every(i=>i!=null));for(;r.length<t.length;)r.unshift(new Array(n).fill(null));return r}_countCompleteLines(t){return t.filter(n=>n.every(r=>r!=null)).length}_countHoles(t){let n=0;const r=t[0].length;for(let s=0;s<r;s++){let i=!1;for(let o=0;o<t.length;o++)t[o][s]!=null?i=!0:i&&n++}return n}_getMaxHeight(t){var s;const n=t.length,r=((s=t[0])==null?void 0:s.length)||10;for(let i=0;i<n;i++)for(let o=0;o<r;o++)if(t[i][o]!=null)return n-i;return 0}}const WS=50;function KS(e){const[t,n]=v.useState(null),[r,s]=v.useState({lines:0,combos:0,tetrises:0,maxCombo:0}),[i,o]=v.useState(!1),[a,c]=v.useState(!1),u=v.useRef(null),h=v.useRef(null),d=v.useRef(null),m=v.useRef(0),g=v.useRef(0),x=v.useRef({lines:0,combos:0,tetrises:0,maxCombo:0,currentCombo:0}),b=v.useCallback(()=>{const p=new nr(new rr,new sr,null,new Nn);p.initializeGame(),p.isPlaying=!0;const f=new qS;u.current=p,h.current=f,g.current=0,m.current=0,x.current.currentCombo=0,n(p.getGameState()),c(!0)},[]);v.useEffect(()=>{if(!e){d.current&&cancelAnimationFrame(d.current),u.current=null,h.current=null,c(!1),n(null),s({lines:0,combos:0,tetrises:0,maxCombo:0}),x.current={lines:0,combos:0,tetrises:0,maxCombo:0,currentCombo:0};return}b();const p=({linesCleared:y})=>{const w=x.current;w.lines+=y,w.currentCombo++,w.currentCombo>1&&(w.combos++,w.currentCombo>w.maxCombo&&(w.maxCombo=w.currentCombo),o(!0),setTimeout(()=>o(!1),600)),y>=4&&w.tetrises++,s({lines:w.lines,combos:w.combos,tetrises:w.tetrises,maxCombo:w.maxCombo})},f=({linesCleared:y})=>{y===0&&(x.current.currentCombo=0)};return O.on(F.LINE_CLEARED,p),O.on(F.PIECE_PLACED,f),()=>{d.current&&cancelAnimationFrame(d.current),O.off(F.LINE_CLEARED,p),O.off(F.PIECE_PLACED,f),u.current=null,h.current=null}},[e,b]),v.useEffect(()=>{if(!a||!u.current||!e)return;const p=f=>{m.current||(m.current=f);let y=f-m.current;m.current=f,y>200&&(y=16);const w=u.current,S=h.current;if(!(!w||!S)){if(w.gameOver){b(),d.current=requestAnimationFrame(p);return}if(w.isPlaying&&!w.isPaused&&w.updateGame(y),g.current+=y,g.current>=WS){g.current=0;try{const C=w.getGameState(),P=S.decideNextMove(C);if(P)switch(P.action){case"left":w.movePiece("left");break;case"right":w.movePiece("right");break;case"rotate":w.rotatePiece();break;case"rotateLeft":w.rotatePieceLeft();break;case"down":w.movePiece("down");break;case"drop":w.hardDrop();break;case"hold":w.holdPiece();break}n(w.getGameState())}catch{}}d.current=requestAnimationFrame(p)}};return d.current=requestAnimationFrame(p),()=>{d.current&&cancelAnimationFrame(d.current)}},[a,e,b]);const k=v.useCallback(()=>{var p;try{return((p=u.current)==null?void 0:p.getDropPreview())||null}catch{return null}},[]);return{gameState:t,stats:r,comboFlash:i,isRunning:a,getDropPreview:k}}function QS({onClose:e}){const{gameState:t,stats:n,comboFlash:r,getDropPreview:s}=KS(!0),i=v.useCallback(()=>e(),[e]),{selectedIndex:o}=$e({itemCount:1,onConfirm:i,onBack:i,active:!0}),a=v.useMemo(()=>s(),[t,s]);if(!t)return l.jsx("div",{className:"h-screen bg-gradient-to-b from-slate-950 via-violet-950 to-slate-950 flex items-center justify-center overflow-hidden",children:l.jsx("p",{className:"text-white/50 animate-pulse",children:"Preparando IA Expert..."})});const c=t.score;return l.jsxs("div",{className:"h-screen bg-gradient-to-b from-slate-950 via-violet-950 to-slate-950 flex flex-col overflow-hidden select-none",children:[l.jsx("div",{className:"absolute inset-0 pointer-events-none overflow-hidden",children:l.jsx("div",{className:"absolute top-1/3 left-1/2 -translate-x-1/2 w-[500px] h-[500px] bg-cyan-600/10 rounded-full blur-[120px]"})}),l.jsxs("div",{className:"flex items-center justify-between px-3 py-1.5 bg-black/30 backdrop-blur-sm border-b border-white/10 shrink-0 relative z-10",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(M.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:e,className:`bg-white/15 hover:bg-white/25 text-white p-1.5 rounded-lg transition-colors ${o===0?"ring-2 ring-yellow-400":""}`,children:l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"})})}),l.jsx("span",{className:"text-sm font-bold text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-400",children:" Cat Tetris AI"})]}),l.jsxs("div",{className:`flex items-center gap-3 text-xs px-3 py-1 rounded-full transition-colors duration-300 ${r?"bg-cyan-500/30 text-cyan-300":"text-white/60"}`,children:[l.jsxs("span",{className:"font-bold",children:[n.lines," linhas"]}),l.jsxs("span",{children:["T:",n.tetrises]}),l.jsxs("span",{children:["C:",n.combos]}),l.jsxs("span",{children:["Max:",n.maxCombo]})]}),l.jsxs("div",{className:"text-xs text-white/50",children:[l.jsx("span",{className:"text-yellow-400 font-bold",children:((c==null?void 0:c.points)||0).toLocaleString()}),l.jsxs("span",{className:"ml-2",children:["Nv.",(c==null?void 0:c.level)||1]})]})]}),l.jsx(Ee,{children:r&&l.jsx(M.div,{initial:{opacity:0,scale:.7,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:1.2,y:-20},transition:{duration:.4,ease:"easeOut"},className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-50 pointer-events-none",children:l.jsx("div",{className:"text-5xl font-black text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 via-blue-400 to-yellow-300 drop-shadow-[0_0_30px_rgba(34,211,238,0.7)]",children:"COMBO!"})})}),l.jsx("div",{className:"flex-1 flex items-center justify-center overflow-hidden p-2 relative z-10",children:l.jsxs("div",{className:"flex gap-2 justify-center items-start",children:[l.jsx(tr,{heldPiece:t.heldPiece,canHold:t.canHold}),l.jsx(En,{board:t.board,currentPiece:t.currentPiece,dropPreview:a,gameOver:t.gameOver}),l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx(er,{pieces:t.nextPieces||[]}),l.jsx(Zn,{score:(c==null?void 0:c.points)||0,level:(c==null?void 0:c.level)||1,lines:(c==null?void 0:c.lines)||0,combo:(c==null?void 0:c.combo)||0})]})]})})]})}const $r=10,Ws=20,zh=["I","O","T","S","Z","J","L"],mn={I:"#00f5ff",O:"#ffff00",T:"#a000f0",S:"#00f000",Z:"#f00000",J:"#0000f0",L:"#ff7f00",G:"#888888"},O0=[{id:"tss",name:"T-Spin Single",emoji:"",desc:"O T-Spin mais simples  limpa 1 linha",board:ur(18,["GGG..GGGGG","GGG...GGGG"]),queue:["T"],isDefault:!0},{id:"tsd-right",name:"T-Spin Double (Direita)",emoji:"",desc:"O clssico TSD  limpa 2 linhas",board:ur(17,["GGG..GGGGG","GGG...GGGG","GGGG.GGGGG"]),queue:["T"],isDefault:!0},{id:"tsd-left",name:"T-Spin Double (Esquerda)",emoji:"",desc:"TSD espelhado  limpa 2 linhas",board:ur(17,["GGGGG..GGG","GGGG...GGG","GGGGG.GGGG"]),queue:["T"],isDefault:!0},{id:"tsd-chain",name:"TSD em Cadeia",emoji:"",desc:"Dois T-Spin Doubles seguidos  Back-to-Back!",board:ur(12,["G....GGGGG","G...GGGGGG","GGG..GGGGG","GGG...GGGG","GGGG.GGGGG","GGG..GGGGG","GGG...GGGG","GGGG.GGGGG"]),queue:["T","T"],isDefault:!0},{id:"dt-cannon",name:"DT Cannon",emoji:"",desc:"TSD + TST combinados!",board:ur(13,["G...GGGGGG","G....GGGGG","GGGG.GGGGG","GGG..GGGGG","GGG...GGGG","GGGG.GGGGG","GGGG.GGGGG"]),queue:["T","T"],isDefault:!0},{id:"stsd",name:"Super T-Spin Double",emoji:"",desc:"STSD  usa wall kick avanado pra entrar na cavidade!",board:ur(13,["GGG..GGGGG","GGG..GGGGG","GGG..GGGGG","GGG...GGGG","GGGGG.GGGG","GGGG..GGGG","GGGG..GGGG"]),queue:["T","T"],isDefault:!0}];function ur(e,t){const n=[];for(let r=0;r<Ws;r++)r>=e&&r<e+t.length?n.push(t[r-e]):n.push("..........");return n}function XS(e){return e.map(t=>Array.from(t).map(n=>n==="."||n===" "?null:{type:"G",color:mn[n]||"#888",emoji:""}))}function Xl(){return Array(Ws).fill(null).map(()=>Array($r).fill(null))}function G0(e){return e.map(t=>t.map(n=>n?{...n}:null))}const Jl="cattetris_all_setups";function F0(e){return e.map(t=>t.map(n=>n?n.type||"G":".").join(""))}function JS(e){return e.map(t=>Array.from(t).map(n=>n==="."?null:{type:n,color:mn[n]||"#888",emoji:""}))}function V0(e){return{id:e.id,name:e.name,emoji:e.emoji||"",desc:e.desc||"",board:Array.isArray(e.board)&&typeof e.board[0]=="string"?e.board:F0(e.board||[]),queue:e.queue||[],steps:e.steps||[],isDefault:e.isDefault||!1}}function YS(){try{const t=localStorage.getItem(Jl);if(t){const n=JSON.parse(t);if(Array.isArray(n)&&n.length>0)return n}}catch{}const e=O0.map(V0);return localStorage.setItem(Jl,JSON.stringify(e)),e}function ZS(e){localStorage.setItem(Jl,JSON.stringify(e))}function Uh(e){const t=JSON.stringify(e,null,2),n=new Blob([t],{type:"application/json"}),r=URL.createObjectURL(n),s=document.createElement("a");s.href=r,s.download="cat-tetris-setups.json",s.click(),URL.revokeObjectURL(r)}function eC(e){return new Promise((t,n)=>{const r=new FileReader;r.onload=s=>{try{const i=JSON.parse(s.target.result);if(!Array.isArray(i))throw new Error("not array");const o=i.filter(a=>a.name&&a.board&&Array.isArray(a.board)&&Array.isArray(a.queue));t(o.map(a=>({...a,id:a.id||"imp_"+Date.now()+"_"+Math.random().toString(36).slice(2,6)})))}catch(i){n(i)}},r.onerror=n,r.readAsText(e)})}function tC(e,t){const n=new nr(new rr,new sr,null,new Nn);n.initializeGame(),n.isPlaying=!0;for(let r=0;r<Ws;r++)for(let s=0;s<$r;s++)e[r][s]&&n.board.setCell(s,r,e[r][s]);if(t.length>0){const r=s=>{const i=$t[s],o=s==="I"?{x:3,y:-2}:{x:3,y:0};return new _t(s,i.shape,i.color,i.emoji,o,!1,0)};for(n.currentPiece=r(t[0]),n.nextPieces=t.slice(1).map(r);n.nextPieces.length<3;)n.nextPieces.push(n.pieceFactory.createRandomPiece())}return n._markDirty(),n}function nC({onExit:e}){const[t,n]=v.useState("menu"),[r,s]=v.useState(null),[i,o]=v.useState(()=>YS()),[a,c]=v.useState(null),[u,h]=v.useState(null),[d,m]=v.useState(Xl),[g,x]=v.useState([]),[b,k]=v.useState(""),[p,f]=v.useState(""),[y,w]=v.useState(""),[S,C]=v.useState("G"),P=v.useRef(null),T=v.useCallback(z=>{o(z),ZS(z)},[]),j=v.useCallback(z=>{s(z),n("play")},[]),E=v.useCallback(()=>{s({id:"custom_preview",name:b||"Setup Personalizado",emoji:p,board:null,queue:[...g],_rawBoard:G0(d)}),n("play")},[d,g,b,p]),L=v.useCallback(()=>{c(null),m(Xl()),x([]),k(""),f(""),w(""),n("editor")},[]),A=v.useCallback(z=>{c(z),m(JS(z.board)),x([...z.queue]),k(z.name),f(z.emoji||""),w(z.desc||""),n("editor")},[]),N=v.useCallback(()=>{const z=b.trim()||"Meu Setup",K=F0(d);if(a){const J=i.map(Q=>Q.id===a.id?{...Q,name:z,emoji:p,desc:y,board:K,queue:[...g]}:Q);T(J)}else{const J={id:"custom_"+Date.now(),name:z,emoji:p,desc:y,board:K,queue:[...g],steps:[],isDefault:!1};T([...i,J])}n("menu")},[d,g,b,p,y,a,i,T]),_=v.useCallback(z=>{T(i.filter(K=>K.id!==z))},[i,T]),se=v.useCallback(()=>{const z=O0.map(V0),K=i.filter(J=>!J.isDefault);T([...z,...K])},[i,T]),I=v.useCallback(async z=>{var J;const K=(J=z.target.files)==null?void 0:J[0];if(K){try{const Q=await eC(K);if(Q.length===0){h("Nenhum setup vlido no arquivo.");return}T([...i,...Q]),h(`${Q.length} setup(s) importado(s)!`),setTimeout(()=>h(null),3e3)}catch{h("Erro ao ler o arquivo JSON."),setTimeout(()=>h(null),3e3)}z.target.value=""}},[i,T]),W=v.useCallback(()=>{i.length!==0&&Uh(i)},[i]),R=v.useCallback((z,K)=>{const J=i.findIndex(Ye=>Ye.id===z);if(J<0)return;const Q=J+K;if(Q<0||Q>=i.length)return;const pe=[...i];[pe[J],pe[Q]]=[pe[Q],pe[J]],T(pe)},[i,T]),B=5,G=B+i.length,H=v.useCallback(z=>{var K;switch(z){case 0:e();break;case 1:L();break;case 2:(K=P.current)==null||K.click();break;case 3:W();break;case 4:se();break;default:{const J=z-B;J>=0&&J<i.length&&j(i[J])}}},[e,L,W,se,i,j]),{selectedIndex:$}=$e({itemCount:G,onConfirm:H,onBack:e,active:t==="menu"});return t==="play"&&r?l.jsx(iC,{template:r,onBack:()=>n("menu"),onExit:e}):t==="editor"?l.jsx(oC,{board:d,setBoard:m,queue:g,setQueue:x,name:b,setName:k,emoji:p,setEmoji:f,desc:y,setDesc:w,selectedColor:S,setSelectedColor:C,onPlay:E,onSave:N,isEditing:!!a,onBack:()=>n("menu"),onExit:e}):l.jsxs("div",{className:"h-screen bg-gradient-to-b from-slate-900 via-indigo-950 to-slate-900 flex flex-col items-center p-4 overflow-auto",children:[l.jsxs("div",{className:"flex justify-between items-center w-full max-w-lg mb-4",children:[l.jsx("h1",{className:"text-2xl font-bold text-white",children:" Modo Criador"}),l.jsx("button",{onClick:e,className:`bg-red-600 hover:bg-red-700 text-white px-3 py-1.5 rounded-lg text-sm font-bold ${$===0?"ring-2 ring-yellow-400":""}`,children:" Voltar"})]}),l.jsx("p",{className:"text-white/50 text-sm mb-4 text-center max-w-md",children:"Crie, edite e organize seus setups de treino! |   Voltar"}),l.jsxs("div",{className:"flex gap-2 w-full max-w-lg mb-4 flex-wrap justify-center",children:[l.jsxs(M.button,{whileHover:{scale:1.03},whileTap:{scale:.97},onClick:L,className:`flex-1 min-w-[140px] p-3 rounded-xl bg-gradient-to-r from-violet-600/30 to-fuchsia-600/30 hover:from-violet-600/40 hover:to-fuchsia-600/40 border border-violet-500/30 hover:border-violet-500/50 transition-all flex items-center gap-3 ${$===1?"ring-2 ring-yellow-400":""}`,children:[l.jsx("span",{className:"text-2xl",children:""}),l.jsxs("div",{className:"text-left",children:[l.jsx("div",{className:"text-white font-bold text-sm",children:"Criar Novo"}),l.jsx("div",{className:"text-white/40 text-[10px]",children:"Monte do zero"})]})]}),l.jsx("button",{onClick:()=>{var z;return(z=P.current)==null?void 0:z.click()},className:`bg-green-600/40 hover:bg-green-600/60 text-white px-4 py-3 rounded-xl text-xs font-bold transition-colors border border-green-500/20 ${$===2?"ring-2 ring-yellow-400":""}`,children:" Importar"}),l.jsx("button",{onClick:W,className:`bg-blue-600/40 hover:bg-blue-600/60 text-white px-4 py-3 rounded-xl text-xs font-bold transition-colors border border-blue-500/20 ${$===3?"ring-2 ring-yellow-400":""}`,disabled:i.length===0,children:" Exportar"}),l.jsx("button",{onClick:se,className:`bg-orange-600/40 hover:bg-orange-600/60 text-white px-4 py-3 rounded-xl text-xs font-bold transition-colors border border-orange-500/20 ${$===4?"ring-2 ring-yellow-400":""}`,children:" Resetar Padro"})]}),l.jsx("input",{ref:P,type:"file",accept:".json",onChange:I,className:"hidden"}),u&&l.jsx("div",{className:"w-full max-w-lg mb-3 px-4 py-2 rounded-lg bg-blue-500/20 border border-blue-500/30 text-blue-200 text-xs text-center font-medium",children:u}),l.jsxs("div",{className:"text-white/40 text-xs font-semibold uppercase tracking-wide mb-2",children:["Todos os Setups (",i.length,")"]}),l.jsxs("div",{className:"grid grid-cols-1 gap-2 w-full max-w-lg pb-8",children:[i.map((z,K)=>l.jsx(rC,{setup:z,onPlay:()=>j(z),onEdit:()=>A(z),onDelete:()=>_(z.id),onExport:()=>Uh([z]),onMoveUp:K>0?()=>R(z.id,-1):null,onMoveDown:K<i.length-1?()=>R(z.id,1):null,isHighlighted:$===B+K},z.id)),i.length===0&&l.jsx("div",{className:"text-center py-8 text-white/30 text-sm",children:'Nenhum setup. Clique em "Criar Novo" ou "Resetar Padro".'})]})]})}function rC({setup:e,onPlay:t,onEdit:n,onDelete:r,onExport:s,onMoveUp:i,onMoveDown:o,isHighlighted:a}){const[c,u]=v.useState(!1),h=e.isDefault;return l.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl border transition-all ${h?"bg-white/[0.04] border-white/[0.06] hover:bg-white/[0.07]":"bg-violet-500/[0.06] border-violet-500/[0.12] hover:bg-violet-500/[0.1]"} ${a?"ring-2 ring-yellow-400":""}`,children:[l.jsx("div",{className:"flex flex-col items-center min-w-[44px]",children:l.jsx(sC,{boardRows:e.board})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-center gap-1.5",children:[l.jsx("span",{className:"text-lg",children:e.emoji||""}),l.jsx("span",{className:"text-white font-bold text-sm truncate",children:e.name}),h&&l.jsx("span",{className:"text-[9px] px-1.5 py-0.5 rounded bg-blue-500/20 text-blue-300 border border-blue-500/20 shrink-0",children:"padro"})]}),e.desc&&l.jsx("p",{className:"text-white/40 text-[11px] mt-0.5 leading-tight truncate",children:e.desc}),l.jsxs("div",{className:"flex items-center gap-1.5 mt-1",children:[l.jsx("span",{className:"text-white/30 text-[10px]",children:"Peas:"}),(e.queue||[]).map((d,m)=>l.jsx("span",{className:"inline-block w-3.5 h-3.5 rounded",style:{backgroundColor:mn[d]},title:d},m)),(!e.queue||e.queue.length===0)&&l.jsx("span",{className:"text-white/20 text-[10px]",children:"aleatria"})]})]}),l.jsxs("div",{className:"flex flex-col gap-1 shrink-0",children:[l.jsxs("div",{className:"flex gap-1",children:[l.jsx("button",{onClick:t,className:"bg-emerald-600 hover:bg-emerald-500 text-white px-2.5 py-1 rounded text-[10px] font-bold transition-colors",title:"Jogar",children:""}),l.jsx("button",{onClick:n,className:"bg-blue-600 hover:bg-blue-500 text-white px-2.5 py-1 rounded text-[10px] font-bold transition-colors",title:"Editar",children:""}),l.jsx("button",{onClick:s,className:"bg-slate-600 hover:bg-slate-500 text-white px-2.5 py-1 rounded text-[10px] font-bold transition-colors",title:"Exportar",children:""})]}),l.jsxs("div",{className:"flex gap-1",children:[i&&l.jsx("button",{onClick:i,className:"bg-white/10 hover:bg-white/20 text-white px-2 py-1 rounded text-[10px] font-bold flex-1",title:"Mover pra cima",children:""}),o&&l.jsx("button",{onClick:o,className:"bg-white/10 hover:bg-white/20 text-white px-2 py-1 rounded text-[10px] font-bold flex-1",title:"Mover pra baixo",children:""})]}),c?l.jsxs("div",{className:"flex gap-1",children:[l.jsx("button",{onClick:()=>{r(),u(!1)},className:"bg-red-600 hover:bg-red-500 text-white px-2 py-1 rounded text-[9px] font-bold flex-1",children:"Sim"}),l.jsx("button",{onClick:()=>u(!1),className:"bg-slate-600 hover:bg-slate-500 text-white px-2 py-1 rounded text-[9px] font-bold flex-1",children:"No"})]}):l.jsx("button",{onClick:()=>u(!0),className:"bg-red-700/40 hover:bg-red-700/70 text-red-300 px-2.5 py-1 rounded text-[10px] font-bold transition-colors w-full",children:" Excluir"})]})]})}function sC({boardRows:e}){const n=e.findIndex(s=>s!==".........."),r=e.slice(Math.max(n>=0?n:Ws-4,Ws-6));return l.jsx("div",{className:"bg-black/40 rounded border border-white/10 p-0.5",children:r.map((s,i)=>l.jsx("div",{className:"flex",children:Array.from(s).map((o,a)=>l.jsx("div",{style:{width:3,height:3,backgroundColor:o!=="."?"#888":"transparent"}},a))},i))})}function iC({template:e,onBack:t,onExit:n}){var k,p,f,y,w,S,C,P,T,j;const[r,s]=v.useState(null),[i,o]=v.useState(0),a=v.useRef(null),c=v.useRef(null),u=v.useRef(0),h=v.useMemo(()=>e._rawBoard?G0(e._rawBoard):XS(e.board),[e]),d=v.useCallback(()=>{c.current&&cancelAnimationFrame(c.current);const E=tC(h,e.queue);a.current=E,s(E.getGameState()),u.current=0,o(L=>L+1)},[h,e.queue]);v.useEffect(()=>{d()},[d]),v.useEffect(()=>{const E=L=>{u.current||(u.current=L);const A=L-u.current;u.current=L;const N=a.current;N&&(!N.gameOver&&!N.isPaused&&N.updateGame(A),N.isDirty&&(s(N.getGameState()),N.clearDirty()),c.current=requestAnimationFrame(E))};return c.current=requestAnimationFrame(E),()=>{c.current&&cancelAnimationFrame(c.current)}},[i]),v.useEffect(()=>{const E=L=>{const A=a.current;if(!(!A||A.gameOver))switch(L.key){case"ArrowLeft":L.preventDefault(),A.movePiece("left");break;case"ArrowRight":L.preventDefault(),A.movePiece("right");break;case"ArrowDown":L.preventDefault(),A.movePiece("down");break;case"ArrowUp":L.preventDefault(),A.rotatePiece();break;case"z":case"Z":A.rotatePieceLeft();break;case"c":case"C":case"Shift":A.holdPiece();break;case" ":L.preventDefault(),A.hardDrop();break;case"r":case"R":d();break}};return window.addEventListener("keydown",E),()=>window.removeEventListener("keydown",E)},[d]);const m=v.useMemo(()=>({movePiece:E=>{const L=a.current;L&&!L.gameOver&&L.movePiece(E)},rotatePiece:()=>{const E=a.current;E&&!E.gameOver&&E.rotatePiece()},rotatePieceLeft:()=>{const E=a.current;E&&!E.gameOver&&E.rotatePieceLeft()},hardDrop:()=>{const E=a.current;E&&!E.gameOver&&E.hardDrop()},holdPiece:()=>{const E=a.current;E&&!E.gameOver&&E.holdPiece()},isGameOver:()=>{var E;return((E=a.current)==null?void 0:E.gameOver)??!1},backToMenu:n,togglePause:()=>{}}),[n]),{isGamepadActive:g,processGamepadInput:x}=gu(m);v.useEffect(()=>{if(!g)return;const E=setInterval(()=>x(),16);return()=>clearInterval(E)},[g,x]);const b=v.useMemo(()=>{var E;if(!(r!=null&&r.currentPiece)||r!=null&&r.gameOver)return null;try{return(E=a.current)==null?void 0:E.getDropPreview()}catch{return null}},[(p=(k=r==null?void 0:r.currentPiece)==null?void 0:k.position)==null?void 0:p.x,(y=(f=r==null?void 0:r.currentPiece)==null?void 0:f.position)==null?void 0:y.y,(w=r==null?void 0:r.currentPiece)==null?void 0:w.type,(S=r==null?void 0:r.currentPiece)==null?void 0:S.rotationState]);return l.jsxs("div",{className:"h-screen bg-gradient-to-b from-slate-900 via-indigo-950 to-slate-900 flex flex-col items-center p-2 overflow-hidden",children:[l.jsxs("div",{className:"flex justify-between items-center w-full max-w-xl mb-2",children:[l.jsxs("h1",{className:"text-lg font-bold text-white truncate",children:[e.emoji," ",e.name]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:d,className:"bg-yellow-600 hover:bg-yellow-700 text-white px-3 py-1 rounded-lg text-xs font-bold",children:" Replay"}),l.jsx("button",{onClick:t,className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded-lg text-xs font-bold",children:" Voltar"}),l.jsx("button",{onClick:n,className:"bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded-lg text-xs font-bold",children:"Sair"})]})]}),r&&l.jsxs("div",{className:"flex gap-3 items-start justify-center",children:[l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx(tr,{heldPiece:r.heldPiece,canHold:r.canHold}),l.jsxs("div",{className:"text-white/50 text-[10px] leading-tight",children:[" mover",l.jsx("br",{})," girar",l.jsx("br",{}),"C hold",l.jsx("br",{}),"Espao drop",l.jsx("br",{}),"R replay"]})]}),l.jsx(En,{board:r.board,currentPiece:r.currentPiece,dropPreview:b,gameOver:r.gameOver}),l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx(er,{pieces:r.nextPieces||[]}),l.jsx(Zn,{score:((C=r.score)==null?void 0:C.points)||0,level:((P=r.score)==null?void 0:P.level)||1,lines:((T=r.score)==null?void 0:T.lines)||0,combo:((j=r.score)==null?void 0:j.combo)||0})]})]}),(r==null?void 0:r.gameOver)&&l.jsxs("div",{className:"mt-4 flex gap-3",children:[l.jsx("button",{onClick:d,className:"bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg font-bold text-lg",children:" Tentar Novamente"}),l.jsx("button",{onClick:t,className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-bold text-lg",children:" Voltar"})]})]})}function oC({board:e,setBoard:t,queue:n,setQueue:r,name:s,setName:i,emoji:o,setEmoji:a,desc:c,setDesc:u,selectedColor:h,setSelectedColor:d,onPlay:m,onSave:g,isEditing:x,onBack:b,onExit:k}){const p=v.useCallback((C,P)=>{t(T=>{const j=T.map(E=>[...E]);return j[P][C]=j[P][C]?null:{type:h,color:mn[h],emoji:""},j})},[h,t]),f=v.useCallback((C,P)=>{t(T=>{const j=T.map(E=>[...E]);for(let E=0;E<$r;E++)j[C][E]=E===P?null:{type:"G",color:mn.G,emoji:""};return j})},[t]),y=v.useCallback(C=>{t(P=>{const T=P.map(j=>[...j]);for(let j=0;j<$r;j++)T[C][j]=null;return T})},[t]),w=v.useCallback(C=>{switch(C){case 0:b();break;case 1:k();break;case 2:g();break;case 3:m();break}},[b,k,g,m]),{selectedIndex:S}=$e({itemCount:4,onConfirm:w,onBack:b,active:!0});return l.jsxs("div",{className:"h-screen bg-gradient-to-b from-slate-900 via-indigo-950 to-slate-900 flex flex-col items-center p-3 overflow-auto",children:[l.jsxs("div",{className:"flex justify-between items-center w-full max-w-2xl mb-3",children:[l.jsx("h1",{className:"text-xl font-bold text-white",children:x?" Editar Setup":" Criar Meu Setup"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:b,className:`bg-slate-600 hover:bg-slate-700 text-white px-3 py-1 rounded-lg text-sm font-bold ${S===0?"ring-2 ring-yellow-400":""}`,children:" Voltar"}),l.jsx("button",{onClick:k,className:`bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded-lg text-sm font-bold ${S===1?"ring-2 ring-yellow-400":""}`,children:"Sair"})]})]}),l.jsxs("div",{className:"flex gap-4 items-start justify-center flex-wrap max-w-2xl",children:[l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx("div",{className:"text-white/60 text-xs font-semibold mb-1",children:"TABULEIRO (clique para editar)"}),l.jsx(aC,{board:e,onToggle:p,onFillRow:f,onClearRow:y}),l.jsxs("div",{className:"flex gap-1 items-center mt-1",children:[l.jsx("span",{className:"text-white/50 text-xs mr-1",children:"Cor:"}),zh.map(C=>l.jsx("button",{onClick:()=>d(C),className:`w-6 h-6 rounded border-2 transition-all ${h===C?"border-white scale-110":"border-white/20"}`,style:{backgroundColor:mn[C]},title:C},C)),l.jsx("button",{onClick:()=>d("G"),className:`w-6 h-6 rounded border-2 transition-all ${h==="G"?"border-white scale-110":"border-white/20"}`,style:{backgroundColor:mn.G},title:"Cinza"})]}),l.jsx("button",{onClick:()=>t(Xl()),className:"bg-red-700/60 hover:bg-red-700 text-white px-3 py-1 rounded text-xs font-semibold mt-1 w-fit",children:"Limpar Tudo"})]}),l.jsxs("div",{className:"flex flex-col gap-3 min-w-[160px]",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-white/60 text-xs font-semibold mb-2",children:"FILA DE PEAS"}),l.jsx("div",{className:"flex flex-wrap gap-1 mb-2",children:zh.map(C=>l.jsx("button",{onClick:()=>r(P=>[...P,C]),className:"flex items-center justify-center w-9 h-9 rounded-lg bg-white/10 hover:bg-white/20 border border-white/10 transition-all",title:`Adicionar ${C}`,children:l.jsx($h,{type:C})},C))}),l.jsxs("div",{className:"flex flex-col gap-1 min-h-[60px] bg-black/30 rounded-lg p-2",children:[n.length===0?l.jsxs("span",{className:"text-white/30 text-xs text-center py-2",children:["Clique nas peas acima",l.jsx("br",{}),"(vazio = fila aleatria)"]}):l.jsx("div",{className:"flex flex-wrap gap-1",children:n.map((C,P)=>l.jsxs("button",{onClick:()=>r(T=>T.filter((j,E)=>E!==P)),className:"flex items-center justify-center w-8 h-8 rounded bg-white/10 hover:bg-red-500/30 border border-white/10 transition-all group relative",title:"Remover",children:[l.jsx($h,{type:C,size:10}),l.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-[8px] rounded-full w-3 h-3 flex items-center justify-center opacity-0 group-hover:opacity-100",children:""})]},P))}),n.length>0&&l.jsx("button",{onClick:()=>r([]),className:"text-red-400 text-[10px] mt-1 hover:text-red-300",children:"Limpar fila"})]})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-white/60 text-xs font-semibold mb-2",children:"DETALHES"}),l.jsxs("div",{className:"flex gap-2 mb-2",children:[l.jsx("input",{type:"text",value:o,onChange:C=>a(C.target.value),placeholder:"",maxLength:4,className:"w-14 px-2 py-2 rounded-lg bg-black/30 border border-white/10 text-white text-center text-lg focus:border-violet-500/50 focus:outline-none",title:"Emoji"}),l.jsx("input",{type:"text",value:s,onChange:C=>i(C.target.value),placeholder:"Nome do setup",maxLength:40,className:"flex-1 px-3 py-2 rounded-lg bg-black/30 border border-white/10 text-white text-sm placeholder-white/20 focus:border-violet-500/50 focus:outline-none"})]}),l.jsx("input",{type:"text",value:c,onChange:C=>u(C.target.value),placeholder:"Descrio (opcional)",maxLength:80,className:"w-full px-3 py-2 rounded-lg bg-black/30 border border-white/10 text-white text-xs placeholder-white/20 focus:border-violet-500/50 focus:outline-none mb-3"})]}),l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx("button",{onClick:g,className:`w-full py-3 rounded-xl bg-gradient-to-r from-violet-500 to-purple-500 hover:from-violet-400 hover:to-purple-400 text-white font-bold text-base shadow-lg shadow-violet-500/25 transition-all active:scale-95 ${S===2?"ring-2 ring-yellow-400":""}`,children:x?" Salvar Alteraes":" Salvar Setup"}),l.jsx("button",{onClick:m,className:`w-full py-2.5 rounded-xl bg-gradient-to-r from-emerald-500 to-green-500 hover:from-emerald-400 hover:to-green-400 text-white font-bold text-sm shadow-lg shadow-emerald-500/25 transition-all active:scale-95 ${S===3?"ring-2 ring-yellow-400":""}`,children:" Testar (sem salvar)"})]})]})]})]})}function aC({board:e,onToggle:t,onFillRow:n,onClearRow:r}){const[s,i]=v.useState(!1),[o,a]=v.useState(null),c=22,u=(m,g)=>{i(!0),a(e[g][m]?"erase":"place"),t(m,g)},h=(m,g)=>{s&&(o==="place"&&!e[g][m]&&t(m,g),o==="erase"&&e[g][m]&&t(m,g))},d=()=>{i(!1),a(null)};return v.useEffect(()=>(window.addEventListener("pointerup",d),()=>window.removeEventListener("pointerup",d)),[]),l.jsx("div",{className:"relative bg-black/50 rounded-lg border border-white/10 select-none",style:{width:c*$r+2,padding:1},onContextMenu:m=>m.preventDefault(),children:e.map((m,g)=>l.jsxs("div",{className:"flex",style:{height:c},children:[m.map((x,b)=>l.jsx("div",{onPointerDown:()=>u(b,g),onPointerEnter:()=>h(b,g),className:"cursor-pointer border border-white/[0.04] hover:border-white/20 transition-colors",style:{width:c,height:c,backgroundColor:x?x.color:"transparent",opacity:x?.85:1}},b)),l.jsx("button",{onClick:()=>m.some(x=>x)?r(g):n(g,Math.floor(Math.random()*$r)),className:"ml-0.5 text-white/20 hover:text-white/60 text-[9px] w-4 flex items-center justify-center",title:m.some(x=>x)?"Limpar linha":"Preencher linha",children:m.some(x=>x)?"":"+"})]},g))})}function $h({type:e,size:t=12}){var u;const n=(u=$t[e])==null?void 0:u.shape;if(!n)return null;const r=mn[e],s=n.filter(h=>h.some(d=>d));let i=1/0,o=-1;for(const h of s)for(let d=0;d<h.length;d++)h[d]&&(i=Math.min(i,d),o=Math.max(o,d));if(o<0)return null;const a=s.map(h=>h.slice(i,o+1)),c=o-i+1;return l.jsx("div",{className:"flex flex-col items-center",children:a.map((h,d)=>l.jsx("div",{className:"flex",children:Array.from({length:c},(m,g)=>l.jsx("div",{style:{width:t,height:t,backgroundColor:h[g]?r:"transparent",borderRadius:1}},g))},d))})}function B0(){const[e,t]=v.useState([]),[n,r]=v.useState(null),[s,i]=v.useState(!0);v.useEffect(()=>{try{const u=U.resolve("shopService");t(u.getAllThemes()),r(u.getEquippedTheme()),i(!1);const h=m=>{r(m.detail.theme),t(u.getAllThemes())},d=()=>{t(u.getAllThemes())};return window.addEventListener("themeEquipped",h),window.addEventListener("currencyUpdated",d),()=>{window.removeEventListener("themeEquipped",h),window.removeEventListener("currencyUpdated",d)}}catch{i(!1)}},[]);const o=v.useCallback(u=>{try{const h=U.resolve("shopService"),d=h.purchaseTheme(u);return d.success&&(t(h.getAllThemes()),window.dispatchEvent(new Event("currencyUpdated"))),d}catch(h){return{success:!1,error:h.message}}},[]),a=v.useCallback(u=>{try{const h=U.resolve("shopService"),d=h.equipTheme(u);return d.success&&(r(d.theme),t(h.getAllThemes())),d}catch(h){return{success:!1,error:h.message}}},[]),c=v.useCallback(()=>{try{return U.resolve("shopService").getStats()}catch{return null}},[]);return{themes:e,equippedTheme:n,loading:s,purchaseTheme:o,equipTheme:a,getStats:c}}function lC({onClose:e}){var b,k;const{themes:t,equippedTheme:n,loading:r,purchaseTheme:s,equipTheme:i,getStats:o}=B0(),{currency:a}=L0(),[c,u]=v.useState(null),{t:h}=Re(),d=o(),m=p=>{const f=s(p);f.success?jr(h("shop.purchaseSuccess",{name:f.theme.name}),"success"):jr(` ${f.error}`,"error")},g=p=>{const f=i(p);f.success?jr(h("shop.equipSuccess",{name:f.theme.name}),"success"):jr(` ${f.error}`,"error")},{selectedIndex:x}=$e({itemCount:(t==null?void 0:t.length)||0,onConfirm:p=>{const f=t[p];f&&(f.owned?f.equipped||g(f.id):m(f.id))},onBack:e,active:!c&&!r,wrap:!0});return $e({itemCount:1,onConfirm:()=>u(null),onBack:()=>u(null),active:!!c}),r?l.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",children:l.jsx("div",{className:"text-white text-lg",children:h("shop.loading")})}):!t||t.length===0?l.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-red-900/90 text-white p-6 rounded-lg",children:[l.jsx("p",{className:"text-xl",children:h("shop.errorLoading")}),l.jsx("button",{onClick:e,className:"mt-4 bg-white text-black px-4 py-2 rounded",children:h("shop.close")})]})}):l.jsx(M.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:e,children:l.jsxs(M.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},className:"bg-gradient-to-br from-pink-900/95 to-purple-900/95 rounded-2xl p-6 max-w-6xl w-full max-h-[90vh] overflow-y-auto border-2 border-white/20 shadow-2xl",onClick:p=>p.stopPropagation(),children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-3xl font-bold text-white flex items-center gap-2",children:h("shop.title")}),l.jsx("p",{className:"text-white/60 text-sm mt-1",children:h("shop.subtitle")})]}),l.jsx("button",{onClick:e,className:"text-white/60 hover:text-white text-2xl transition-colors",children:""})]}),l.jsx("div",{className:"bg-black/30 rounded-lg p-4 mb-6",children:l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-2xl font-bold text-yellow-400 flex items-center justify-center gap-1",children:[" ",((b=a==null?void 0:a.fish)==null?void 0:b.toLocaleString())||0]}),l.jsx("div",{className:"text-white/60 text-sm",children:h("shop.yourFish")})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-2xl font-bold text-white",children:[d==null?void 0:d.ownedThemes,"/",d==null?void 0:d.totalThemes]}),l.jsx("div",{className:"text-white/60 text-sm",children:h("shop.themesUnlocked")})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-2xl font-bold text-green-400",children:[d!=null&&d.totalThemes?Math.floor(d.ownedThemes/d.totalThemes*100):0,"%"]}),l.jsx("div",{className:"text-white/60 text-sm",children:h("shop.collection")})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-2xl font-bold text-purple-400 flex items-center justify-center gap-1",children:[" ",((k=d==null?void 0:d.totalSpent)==null?void 0:k.toLocaleString())||0]}),l.jsx("div",{className:"text-white/60 text-sm",children:h("shop.totalSpent")})]})]})}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map((p,f)=>{const y=!p.owned&&(a==null?void 0:a.fish)>=p.price;return l.jsxs(M.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:f*.05},className:`bg-black/40 rounded-lg p-4 border-2 relative ${p.equipped?"border-green-500 shadow-lg shadow-green-500/30":p.owned?"border-white/20":"border-white/10"} ${f===x?"ring-2 ring-yellow-400 ring-offset-2 ring-offset-purple-900 scale-[1.02]":""}`,children:[p.equipped&&l.jsx("div",{className:"absolute top-2 right-2 bg-green-600 text-white text-xs px-2 py-1 rounded-full font-bold",children:h("shop.equipped")}),p.premium&&l.jsx("div",{className:"absolute top-2 left-2 bg-gradient-to-r from-yellow-400 to-orange-500 text-white text-xs px-2 py-1 rounded-full font-bold",children:h("shop.premium")}),l.jsxs("div",{className:"mb-4",children:[l.jsx("h3",{className:"text-white font-bold text-lg mb-1",children:p.name}),l.jsx("p",{className:"text-white/60 text-sm",children:p.description})]}),l.jsx("div",{className:"bg-black/30 rounded-lg p-3 mb-4",children:l.jsx("div",{className:"flex justify-center gap-2 flex-wrap",children:Object.entries(p.pieces).map(([w,S])=>l.jsx("div",{className:"w-12 h-12 rounded flex items-center justify-center text-2xl border border-white/10",style:{backgroundColor:S.color},children:S.emoji},w))})}),l.jsxs("div",{className:"flex gap-2",children:[p.owned?p.equipped?l.jsx("button",{disabled:!0,className:"flex-1 bg-green-600 text-white py-2 px-4 rounded-lg font-bold cursor-default",children:h("shop.inUse")}):l.jsx("button",{onClick:()=>g(p.id),className:"flex-1 bg-blue-600 hover:bg-blue-500 text-white py-2 px-4 rounded-lg font-bold transition-colors",children:h("shop.equip")}):l.jsx("button",{onClick:()=>m(p.id),disabled:!y,className:`flex-1 py-2 px-4 rounded-lg font-bold transition-colors ${y?"bg-yellow-600 hover:bg-yellow-500 text-white":"bg-gray-600 text-white/40 cursor-not-allowed"}`,children:p.default?h("shop.free"):l.jsxs(l.Fragment,{children:[" ",p.price.toLocaleString()]})}),l.jsx("button",{onClick:()=>u(p),className:"bg-purple-600 hover:bg-purple-500 text-white py-2 px-4 rounded-lg font-bold transition-colors",children:""})]})]},p.id)})}),l.jsx(Ee,{children:c&&l.jsx(M.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/90 flex items-center justify-center z-[60]",onClick:()=>u(null),children:l.jsxs(M.div,{initial:{scale:.8},animate:{scale:1},exit:{scale:.8},className:"bg-gray-900 rounded-xl p-6 max-w-md",onClick:p=>p.stopPropagation(),children:[l.jsx("h3",{className:"text-white font-bold text-2xl mb-4",children:c.name}),l.jsx("div",{className:"grid grid-cols-4 gap-3 mb-4",children:Object.entries(c.pieces).map(([p,f])=>l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"w-16 h-16 rounded-lg flex items-center justify-center text-3xl mb-2 border-2 border-white/20",style:{backgroundColor:f.color},children:f.emoji}),l.jsx("div",{className:"text-white/60 text-xs",children:p})]},p))}),l.jsx("button",{onClick:()=>u(null),className:"w-full bg-purple-600 hover:bg-purple-500 text-white py-2 rounded-lg font-bold",children:h("shop.close")})]})})})]})})}function H0(){const[e,t]=v.useState([]),[n,r]=v.useState(null),[s,i]=v.useState(null),[o,a]=v.useState(!0);v.useEffect(()=>{try{const d=U.resolve("gameModesService");t(d.getAllModes()),r(d.getCurrentMode()),i(d.getAllStats()),a(!1)}catch{a(!1)}},[]);const c=v.useCallback(d=>{try{const m=U.resolve("gameModesService"),g=m.setMode(d);return g&&(r(m.getCurrentMode()),window.dispatchEvent(new CustomEvent("gameModeChanged",{detail:{mode:m.getCurrentMode()}}))),g}catch{return!1}},[]),u=v.useCallback(d=>{try{return U.resolve("gameModesService").getModeStats(d)}catch{return null}},[]),h=v.useCallback((d,m)=>{try{const g=U.resolve("gameModesService");g.updateStats(d,m),i(g.getAllStats())}catch{}},[]);return{modes:e,currentMode:n,modeStats:s,loading:o,selectMode:c,getModeStats:u,updateStats:h}}function cC({onClose:e,onStartGame:t}){const{modes:n,currentMode:r,modeStats:s,loading:i,selectMode:o}=H0(),{t:a}=Re(),{selectedIndex:c}=$e({itemCount:(n==null?void 0:n.length)||0,columns:2,onConfirm:d=>{const m=n[d];m&&u(m.id)},onBack:e,active:!0,wrap:!0}),u=d=>{o(d),setTimeout(()=>{t(),e()},300)},h=d=>{const m=Math.floor(d/60),g=d%60;return`${m}:${g.toString().padStart(2,"0")}`};return i?l.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",children:l.jsx("div",{className:"text-white text-xl",children:a("gameModes.loading")})}):!n||n.length===0?l.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-red-900/90 text-white p-6 rounded-lg",children:[l.jsx("p",{className:"text-xl",children:a("gameModes.errorLoading")}),l.jsx("button",{onClick:e,className:"mt-4 bg-white text-black px-4 py-2 rounded",children:"Fechar"})]})}):l.jsx(M.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:e,children:l.jsxs(M.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},className:"bg-gradient-to-br from-blue-900/95 to-indigo-900/95 rounded-2xl p-6 max-w-4xl w-full max-h-[90vh] overflow-y-auto border-2 border-white/20 shadow-2xl",onClick:d=>d.stopPropagation(),children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-3xl font-bold text-white flex items-center gap-2",children:a("gameModes.title")}),l.jsx("p",{className:"text-white/60 text-sm mt-1",children:a("gameModes.subtitle")})]}),l.jsx("button",{onClick:e,className:"text-white/60 hover:text-white text-2xl transition-colors",children:""})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:n.map((d,m)=>{const g=s[d.id],x=(r==null?void 0:r.id)===d.id;return l.jsxs(M.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:m*.1},className:`bg-black/40 rounded-lg p-5 border-2 cursor-pointer transition-all hover:scale-105 ${x?"border-green-500 shadow-lg shadow-green-500/30":"border-white/10 hover:border-white/30"} ${m===c?"ring-2 ring-yellow-400 ring-offset-2 ring-offset-blue-900":""}`,onClick:()=>u(d.id),children:[x&&l.jsx("div",{className:"absolute top-3 right-3 bg-green-600 text-white text-xs px-2 py-1 rounded-full font-bold",children:a("gameModes.selected")}),l.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[l.jsx("div",{className:"text-5xl",children:d.icon}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"text-white font-bold text-xl",children:d.name}),l.jsx("p",{className:"text-white/60 text-sm",children:d.description})]})]}),l.jsx("div",{className:"bg-black/30 rounded-lg p-3 mb-3",children:l.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[d.rules.lineGoal&&l.jsx("div",{className:"text-white/80",children:a("gameModes.goalLines",{n:d.rules.lineGoal})}),d.rules.timeLimit&&l.jsx("div",{className:"text-white/80",children:a("gameModes.timeLimit",{time:h(d.rules.timeLimit)})}),d.rules.gameOver!==void 0&&l.jsx("div",{className:"text-white/80",children:d.rules.gameOver?a("gameModes.gameOverYes"):a("gameModes.gameOverNo")}),d.rules.speedIncrease!==void 0&&l.jsx("div",{className:"text-white/80",children:d.rules.speedIncrease?a("gameModes.speedUp"):a("gameModes.speedFixed")}),d.rules.startLevel&&l.jsx("div",{className:"text-white/80",children:a("gameModes.startLevel",{n:d.rules.startLevel})}),d.rules.relaxed&&l.jsx("div",{className:"text-white/80",children:a("gameModes.relaxed")})]})}),g&&g.gamesPlayed>0&&l.jsxs("div",{className:"bg-black/30 rounded-lg p-3",children:[l.jsx("div",{className:"text-white/60 text-xs mb-2",children:a("gameModes.yourRecords")}),l.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-yellow-400 font-bold",children:g.bestScore.toLocaleString()}),l.jsx("div",{className:"text-white/40 text-xs",children:a("gameModes.bestScore")})]}),d.rules.lineGoal&&g.bestTime>0&&l.jsxs("div",{children:[l.jsx("div",{className:"text-green-400 font-bold",children:h(g.bestTime)}),l.jsx("div",{className:"text-white/40 text-xs",children:a("gameModes.bestTime")})]}),!d.rules.lineGoal&&l.jsxs("div",{children:[l.jsx("div",{className:"text-blue-400 font-bold",children:g.bestLines}),l.jsx("div",{className:"text-white/40 text-xs",children:a("gameModes.mostLines")})]})]}),l.jsx("div",{className:"text-white/40 text-xs mt-2",children:a("gameModes.gamesPlayed",{n:g.gamesPlayed})})]}),(!g||g.gamesPlayed===0)&&l.jsx("div",{className:"bg-black/30 rounded-lg p-3 text-center",children:l.jsx("div",{className:"text-white/40 text-sm",children:a("gameModes.noRecords")})}),l.jsx(M.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"w-full mt-3 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-500 hover:to-emerald-500 text-white font-bold py-3 rounded-lg transition-colors",children:a("gameModes.play")})]},d.id)})})]})})}function uC(){const[e,t]=v.useState(null),[n,r]=v.useState([]),[s,i]=v.useState(null),[o,a]=v.useState(null);v.useEffect(()=>{try{const b=U.resolve("multiplayerService");a(b.getStats())}catch{}},[]);const c=v.useCallback((b,k)=>{try{const p=U.resolve("multiplayerService"),f=p.startLocalMatch(b,k);return t(f.mode),r(f.players),i(p.getMatchState()),f}catch{return null}},[]),u=v.useCallback((b,k)=>{try{const p=U.resolve("multiplayerService"),f=p.startAIMatch(b,k);return t(f.mode),r(f.players),i(p.getMatchState()),f}catch{return null}},[]),h=v.useCallback((b,k)=>{try{const p=U.resolve("multiplayerService"),f=p.startAIvsAIMatch(b,k);return t(f.mode),r(f.players),i(p.getMatchState()),f}catch{return null}},[]),d=v.useCallback((b,k)=>{try{const p=U.resolve("multiplayerService");p.updatePlayerState(b,k);const f=p.getMatchState();return i(f),r(f.players),f}catch{return null}},[]),m=v.useCallback(()=>{try{const b=U.resolve("multiplayerService"),k=b.endMatch();return t(null),r([]),i(null),a(b.getStats()),k}catch{return null}},[]),g=v.useCallback(()=>{try{return U.resolve("multiplayerService").getAvailableModes()}catch{return[]}},[]),x=v.useCallback(()=>{try{const b=U.resolve("multiplayerService");a(b.getStats())}catch{}},[]);return{currentMode:e,players:n,matchState:s,stats:o,startLocalMatch:c,startAIMatch:u,startAIvsAIMatch:h,updatePlayerState:d,endMatch:m,getAvailableModes:g,refreshStats:x}}function dC(){const[e,t]=v.useState("medium"),[n,r]=v.useState(null);v.useEffect(()=>{try{const a=U.resolve("aiOpponentService");a.setDifficulty(e),r(a)}catch{}},[e]);const s=v.useCallback(a=>{if(!n)return null;try{return n.decideNextMove(a)}catch{return null}},[n]),i=v.useCallback(a=>{t(a),n&&n.setDifficulty(a)},[n]),o=v.useCallback(()=>n?n.getDifficulties():[],[n]);return{difficulty:e,changeDifficulty:i,getNextMove:s,getDifficulties:o}}function hC({onClose:e,onStartMatch:t}){const{getAvailableModes:n,stats:r,startLocalMatch:s,startAIMatch:i,startAIvsAIMatch:o}=uC(),{getDifficulties:a}=dC(),{t:c}=Re(),[u,h]=v.useState(null),[d,m]=v.useState(c("multiplayer.player1"));v.useState(c("multiplayer.player2"));const[g,x]=v.useState("medium"),[b,k]=v.useState("expert"),[p,f]=v.useState("expert"),y=n(),w=a(),S=((y==null?void 0:y.length)||0)+1,{selectedIndex:C}=$e({itemCount:S,columns:2,onConfirm:N=>{if(N<y.length){const _=y[N];_&&!_.disabled&&E(_)}else e()},onBack:e,active:!u,wrap:!0}),P=(w==null?void 0:w.length)||0,T=(u==null?void 0:u.id)==="ai-vs-ai"?P*2+2:P+2,{selectedIndex:j}=$e({itemCount:T,columns:2,onConfirm:N=>{(u==null?void 0:u.id)==="vs-ai"?N<P?x(w[N].id):N===P?L():h(null):(u==null?void 0:u.id)==="ai-vs-ai"&&(N<P?k(w[N].id):N<P*2?f(w[N-P].id):N===P*2?L():h(null))},onBack:()=>h(null),active:!!u,wrap:!0});if(!y||y.length===0)return l.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-red-900/90 text-white p-6 rounded-lg",children:[l.jsx("p",{className:"text-xl",children:c("multiplayer.errorLoading")}),l.jsx("button",{onClick:e,className:"mt-4 bg-white text-black px-4 py-2 rounded",children:"Fechar"})]})});const E=N=>{N.disabled||h(N)},L=()=>{let N=null;u.id==="vs-ai"?N=i(d,g):u.id==="ai-vs-ai"&&(N=o(b,p)),N&&t&&t(N)},A="ring-2 ring-yellow-400 ring-offset-2 ring-offset-purple-900";return l.jsx(M.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:e,children:l.jsxs(M.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},className:"bg-gradient-to-br from-purple-900/95 to-indigo-900/95 rounded-2xl p-4 sm:p-5 max-w-2xl w-full border-2 border-white/20 shadow-2xl",onClick:N=>N.stopPropagation(),children:[l.jsxs("div",{className:"flex justify-between items-center mb-3",children:[l.jsx("h2",{className:"text-2xl font-bold text-white",children:c("multiplayer.title")}),l.jsx("button",{onClick:e,className:"text-white/60 hover:text-white text-xl transition-colors",children:""})]}),u?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex items-center gap-3 mb-3 bg-black/30 rounded-lg p-3",children:[l.jsx("span",{className:"text-3xl",children:u.emoji}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-bold text-white",children:u.name}),l.jsx("p",{className:"text-white/60 text-xs",children:u.description})]})]}),u.id==="vs-ai"&&l.jsxs(l.Fragment,{children:[l.jsx("label",{className:"block text-white/80 text-sm mb-1",children:c("multiplayer.aiDifficulty")}),l.jsx("div",{className:"grid grid-cols-2 gap-2 mb-3",children:w.map((N,_)=>l.jsx("button",{onClick:()=>x(N.id),className:`p-2.5 rounded-lg border-2 transition-all text-left ${g===N.id?"bg-blue-600 border-blue-400":"bg-black/30 border-white/20 hover:border-white/40"} ${j===_?A:""}`,children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-xl",children:N.emoji}),l.jsxs("div",{children:[l.jsx("div",{className:"text-white font-bold text-sm",children:N.name}),l.jsx("div",{className:"text-white/60 text-[10px]",children:N.description})]})]})},N.id))})]}),u.id==="ai-vs-ai"&&l.jsxs(l.Fragment,{children:[l.jsx("label",{className:"block text-white/80 text-sm mb-1",children:c("multiplayer.ai1Left")}),l.jsx("div",{className:"grid grid-cols-2 gap-2 mb-2",children:w.map((N,_)=>l.jsx("button",{onClick:()=>k(N.id),className:`p-2 rounded-lg border-2 transition-all text-left ${b===N.id?"bg-blue-600 border-blue-400":"bg-black/30 border-white/20 hover:border-white/40"} ${j===_?A:""}`,children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-lg",children:N.emoji}),l.jsx("div",{className:"text-white font-bold text-xs",children:N.name})]})},N.id))}),l.jsx("label",{className:"block text-white/80 text-sm mb-1",children:c("multiplayer.ai2Right")}),l.jsx("div",{className:"grid grid-cols-2 gap-2 mb-2",children:w.map((N,_)=>l.jsx("button",{onClick:()=>f(N.id),className:`p-2 rounded-lg border-2 transition-all text-left ${p===N.id?"bg-red-600 border-red-400":"bg-black/30 border-white/20 hover:border-white/40"} ${j===_+P?A:""}`,children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-lg",children:N.emoji}),l.jsx("div",{className:"text-white font-bold text-xs",children:N.name})]})},N.id))})]}),l.jsxs("div",{className:"flex gap-2 mt-2",children:[l.jsxs(M.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:L,className:`flex-1 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-400 hover:to-emerald-500 text-white font-bold py-3 rounded-lg shadow-lg transition-all ${j===T-2?A:""}`,children:[" ",c("multiplayer.startMatch")]}),l.jsxs("button",{onClick:()=>h(null),className:`px-4 py-3 rounded-lg text-white/70 hover:text-white bg-white/10 hover:bg-white/20 transition-all font-bold ${j===T-1?A:""}`,children:[" ",c("multiplayer.back")]})]}),l.jsx("p",{className:"text-white/30 text-xs text-center mt-2",children:" B = voltar"})]}):l.jsxs(l.Fragment,{children:[r&&l.jsxs("div",{className:"flex gap-4 justify-center bg-black/30 rounded-lg px-3 py-2 mb-3 text-sm",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("span",{className:"font-bold text-white",children:r.aiMatches}),l.jsx("span",{className:"text-white/50 ml-1",children:c("multiplayer.matchesVsAI")})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("span",{className:"font-bold text-green-400",children:r.wins}),l.jsx("span",{className:"text-white/50 ml-1",children:c("multiplayer.wins")})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("span",{className:"font-bold text-yellow-400",children:[r.winRate,"%"]}),l.jsx("span",{className:"text-white/50 ml-1",children:c("multiplayer.winRate")})]})]}),l.jsx("div",{className:"grid grid-cols-2 gap-3 mb-3",children:y.map((N,_)=>l.jsxs(M.button,{whileHover:N.disabled?{}:{scale:1.02},whileTap:N.disabled?{}:{scale:.98},onClick:()=>E(N),disabled:N.disabled,className:`p-4 rounded-xl border-2 text-left transition-all ${N.disabled?"bg-gray-800/50 border-gray-700 opacity-50 cursor-not-allowed":"bg-gradient-to-br from-blue-600/30 to-purple-600/30 border-blue-500/50 hover:border-blue-400 cursor-pointer"} ${_===C?A:""}`,children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx("span",{className:"text-2xl",children:N.emoji}),l.jsx("h3",{className:"text-base font-bold text-white",children:N.name})]}),l.jsx("p",{className:"text-white/70 text-xs",children:N.description}),N.disabled&&l.jsx("div",{className:"mt-1 text-yellow-400 text-xs font-bold",children:c("multiplayer.comingSoon")})]},N.id))}),l.jsxs("button",{onClick:e,className:`w-full py-2 rounded-lg text-white/70 hover:text-white bg-white/10 hover:bg-white/20 transition-all text-sm font-bold ${C===y.length?A:""}`,children:[" ",c("multiplayer.back")]}),l.jsx("p",{className:"text-white/30 text-xs text-center mt-2",children:" B = voltar"})]})]})})}function mC({onComplete:e}){const[t,n]=v.useState(0),[r,s]=v.useState(!1);v.useEffect(()=>{localStorage.getItem("catTetris_tutorialCompleted")||s(!0)},[]);const i=[{title:" Bem-vindo ao Cat Tetris!",description:"Um Tetris com gatinhos e sistema de progresso viciante!",tips:[" Use as setas para mover as peas"," Seta para cima para rotacionar"," Seta para baixo para drop rpido","C para segurar pea (Hold)"]},{title:" Sistema de Moedas",description:"Ganhe Peixes () completando misses e conquistas!",tips:[" 3 misses dirias (resetam  meia-noite)"," 22 conquistas desbloqueveis"," Use  para comprar temas na loja"," Quanto mais voc joga, mais voc ganha!"]},{title:" Misses Dirias",description:"Complete desafios dirios para ganhar recompensas!",tips:[" Misso Fcil: 100"," Misso Mdia: 200"," Misso Difcil: 400"," Complete todas para celebrao especial!"]},{title:" Loja e Personalizao",description:"Customize suas peas com temas exclusivos!",tips:[" 10 temas diferentes disponveis"," Cristais e Espao so os mais caros"," Cada tema muda os emojis das peas"," Desbloqueie todos com suas moedas!"]},{title:" Ranking Global",description:"Compete com jogadores do mundo todo!",tips:[" Veja sua posio no ranking global"," 4 tipos de ranking: Global, Semanal, Pas, Ao Redor"," Compartilhe seus recordes"," Chegue ao Top 3 para medalha!"]},{title:" Pronto para Jogar!",description:"Agora voc sabe tudo. Divirta-se!",tips:[" Dica: Use a sombra da pea para planejar"," Faa combos para mais pontos"," T-Spins valem MUITO mais"," Modo Zen  perfeito para relaxar"]}],o=()=>{t<i.length-1?n(t+1):c()},a=()=>{c()},c=()=>{localStorage.setItem("catTetris_tutorialCompleted","true"),s(!1),e&&e()};if(!r)return null;const u=i[t],h=t===i.length-1,d=h?1:2,m=v.useCallback(x=>{h?o():x===0?a():o()},[h,t]),{selectedIndex:g}=$e({itemCount:d,onConfirm:m,onBack:a,active:r});return l.jsx(M.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/90 backdrop-blur-sm flex items-center justify-center z-[100] p-4",children:l.jsxs(M.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-gradient-to-br from-purple-900/95 to-indigo-900/95 rounded-2xl p-8 max-w-lg w-full border-2 border-white/20 shadow-2xl max-h-[90vh] overflow-y-auto",children:[l.jsx("div",{className:"flex gap-2 mb-6",children:i.map((x,b)=>l.jsx("div",{className:`h-2 flex-1 rounded-full transition-colors ${b<=t?"bg-green-500":"bg-white/20"}`},b))}),l.jsx(M.h2,{initial:{y:-20},animate:{y:0},className:"text-3xl font-bold text-white mb-3",children:u.title}),l.jsx(M.p,{initial:{y:-10},animate:{y:0},className:"text-white/80 text-lg mb-6",children:u.description}),l.jsx(M.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},className:"bg-black/30 rounded-lg p-4 mb-6 space-y-2",children:u.tips.map((x,b)=>l.jsxs(M.div,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.3+b*.1},className:"text-white/90 flex items-start gap-2",children:[l.jsx("span",{className:"text-green-400 mt-0.5",children:""}),l.jsx("span",{children:x})]},b))}),l.jsxs("div",{className:"flex gap-3",children:[!h&&l.jsx("button",{onClick:a,className:`flex-1 bg-white/10 hover:bg-white/20 text-white font-bold py-3 px-6 rounded-lg transition-colors ${g===0?"ring-2 ring-yellow-400":""}`,children:"Pular Tutorial"}),l.jsx("button",{onClick:o,className:`flex-1 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-400 hover:to-emerald-500 text-white font-bold py-3 px-6 rounded-lg transition-all shadow-lg ${(h?g===0:g===1)?"ring-2 ring-yellow-400":""}`,children:h?" Comear a Jogar!":"Prximo "})]}),l.jsxs("div",{className:"text-center mt-4 text-white/40 text-sm",children:["Passo ",t+1," de ",i.length," |   Pular"]})]},t)})}function fC(e){const[t,n]=v.useState(null),[r,s]=v.useState(!1),i=v.useRef(null),o=v.useRef(0);v.useEffect(()=>{if(!e){n(null),s(!1),i.current=null,o.current=0;return}const d=new nr(new rr,new sr,null,new Nn);return d.initializeGame(),d.isPlaying=!0,o.current=0,i.current=d,n(d.getGameState()),s(!0),()=>{i.current=null,s(!1)}},[e]);const a=v.useRef(0),c=v.useRef(null);v.useEffect(()=>{if(!i.current||!r)return;a.current=0;const d=m=>{var b;a.current||(a.current=m);const g=m-a.current;a.current=m;const x=i.current;if(x){x.isPlaying&&!x.isPaused&&!x.gameOver&&x.updateGame(g);const k=x.getGameState(),p=((b=k.score)==null?void 0:b.combo)||0;p>o.current&&(o.current=p),n(k)}c.current=requestAnimationFrame(d)};return c.current=requestAnimationFrame(d),()=>{c.current&&cancelAnimationFrame(c.current)}},[r]);const u={movePiece:v.useCallback(d=>{var m;(m=i.current)==null||m.movePiece(d)},[]),rotatePiece:v.useCallback(()=>{var d;(d=i.current)==null||d.rotatePiece()},[]),rotatePieceLeft:v.useCallback(()=>{var d,m;(m=(d=i.current)==null?void 0:d.rotatePieceLeft)==null||m.call(d)},[]),hardDrop:v.useCallback(()=>{var d;(d=i.current)==null||d.hardDrop()},[]),holdPiece:v.useCallback(()=>{var d;(d=i.current)==null||d.holdPiece()},[]),pause:v.useCallback(()=>{var d;(d=i.current)==null||d.pause()},[]),resume:v.useCallback(()=>{var d;(d=i.current)==null||d.resume()},[]),restart:v.useCallback(()=>{i.current&&(i.current.restart(),o.current=0)},[]),getDropPreview:v.useCallback(()=>{var d;try{return((d=i.current)==null?void 0:d.getDropPreview())||null}catch{return null}},[])},h=v.useCallback(()=>{var d,m,g,x,b;return t?{score:((d=t.score)==null?void 0:d.points)||0,level:((m=t.score)==null?void 0:m.level)||1,linesCleared:((g=t.score)==null?void 0:g.lines)||0,currentPiece:t.currentPiece,hasCurrentPiece:!!t.currentPiece,heldPiece:t.heldPiece,hasUsedHold:!!t.heldPiece,currentCombo:((x=t.score)==null?void 0:x.combo)||0,maxCombo:o.current,backToBackActive:t.backToBack||!1,board:t.board,gameOver:t.gameOver,isPlaying:t.isPlaying,isPaused:t.isPaused,tSpins:((b=t.score)==null?void 0:b.tSpins)||0}:null},[t]);return{gameState:t,actions:u,isInitialized:r,getValidationState:h}}const qh={1:{difficulty:"easy",forceHold:!1,comboBoost:!1,label:"Movendo peas..."},2:{difficulty:"easy",forceHold:!0,comboBoost:!1,label:"Usando Hold (C)..."},3:{difficulty:"medium",forceHold:!1,comboBoost:!1,label:"Planejando jogadas..."},4:{difficulty:"medium",forceHold:!1,comboBoost:!0,label:"Buscando combos..."},5:{difficulty:"hard",forceHold:!1,comboBoost:!1,label:"Montando Tetris..."},6:{difficulty:"expert",forceHold:!0,comboBoost:!1,label:"Tentando T-Spins..."},7:{difficulty:"expert",forceHold:!0,comboBoost:!1,label:"Buscando Back-to-Back..."},8:{difficulty:"hard",forceHold:!0,comboBoost:!1,label:"Jogando no mximo..."}};function pC(e,t){const[n,r]=v.useState(null),[s,i]=v.useState(!1),[o,a]=v.useState(!1),[c,u]=v.useState(""),h=v.useRef(null),d=v.useRef(null),m=v.useRef(0),g=v.useRef(null),x=v.useRef(0),b=v.useRef(0),k=v.useRef(0),p=v.useRef(null),f=250,y=25;v.useEffect(()=>{if(!e){r(null),i(!1),a(!1),u(""),h.current=null,d.current=null,b.current=0,k.current=0,g.current&&cancelAnimationFrame(g.current);return}const S=qh[t]||qh[1];p.current=S,u(S.label);const C=new nr(new rr,new sr,null,new Nn);C.initializeGame(),C.isPlaying=!0;const P=new Ts;if(P.setDifficulty(S.difficulty),P.thinkingTime=0,S.comboBoost){const T=P._evaluateBoard.bind(P);P._evaluateBoard=(j,E)=>{let L=T(j,E);for(let A=0;A<j.length;A++){const N=j[A].filter(_=>_!=null).length;N>=8&&(L+=200),N>=9&&(L+=500)}return L}}return h.current=C,d.current=P,b.current=0,k.current=0,x.current=0,m.current=0,r(C.getGameState()),i(!0),a(!1),()=>{g.current&&cancelAnimationFrame(g.current),h.current=null,d.current=null}},[e,t]),v.useEffect(()=>{if(!h.current||!s||!e)return;m.current=0,x.current=0;let S=null;const C=P=>{var A;m.current||(m.current=P);const T=P-m.current;m.current=P;const j=h.current,E=d.current,L=p.current;if(j&&E&&!j.gameOver){j.isPlaying&&!j.isPaused&&j.updateGame(T);const N=j.getGameState(),_=(A=N.currentPiece)==null?void 0:A.type;if(S&&_!==S&&(b.current++,k.current++,b.current>=y)){a(!0),r(N);return}if(S=_,x.current+=T,x.current>=f){if(x.current=0,L!=null&&L.forceHold&&k.current>=3&&N.currentPiece&&N.canHold!==!1){j.holdPiece(),k.current=0,r(j.getGameState()),g.current=requestAnimationFrame(C);return}const se=E.decideNextMove(N);if(se)switch(se.action){case"left":j.movePiece("left");break;case"right":j.movePiece("right");break;case"rotate":j.rotatePiece();break;case"down":j.movePiece("down");break;case"drop":j.hardDrop();break;case"hold":j.holdPiece();break}}r(N)}else if(j!=null&&j.gameOver){a(!0),r(j.getGameState());return}g.current=requestAnimationFrame(C)};return g.current=requestAnimationFrame(C),()=>{g.current&&cancelAnimationFrame(g.current)}},[s,e]);const w=v.useCallback(()=>{var S;try{return((S=h.current)==null?void 0:S.getDropPreview())||null}catch{return null}},[]);return{gameState:n,isInitialized:s,demoComplete:o,statusLabel:c,getDropPreview:w}}function z0(e,t,n=!0){const r=v.useRef(t);r.current=t;const s=v.useRef(e);s.current=e,v.useEffect(()=>{if(!(!e||!n))try{const d=U.resolve("keyboardInputService"),m=()=>{var S;return!((S=r.current)!=null&&S.gameOver)},g=()=>{m()&&s.current.movePiece("left")},x=()=>{m()&&s.current.movePiece("right")},b=()=>{m()&&s.current.movePiece("down")},k=()=>{m()&&s.current.rotatePiece()},p=()=>{var S,C;m()&&((C=(S=s.current).rotatePieceLeft)==null||C.call(S))},f=()=>{m()&&s.current.hardDrop()},y=()=>{m()&&s.current.holdPiece()},w=()=>{var S,C;(S=r.current)!=null&&S.gameOver||((C=r.current)!=null&&C.isPaused?s.current.resume():s.current.pause())};return d.registerHandler("moveLeft",g),d.registerHandler("moveRight",x),d.registerHandler("moveDown",b),d.registerHandler("rotate",k),d.registerHandler("rotateLeft",p),d.registerHandler("hardDrop",f),d.registerHandler("hold",y),d.registerHandler("pause",w),d.startListening(),()=>{d.unregisterHandler("moveLeft",g),d.unregisterHandler("moveRight",x),d.unregisterHandler("moveDown",b),d.unregisterHandler("rotate",k),d.unregisterHandler("rotateLeft",p),d.unregisterHandler("hardDrop",f),d.unregisterHandler("hold",y),d.unregisterHandler("pause",w),d.stopListening()}}catch{return()=>{}}},[n]);const i=v.useCallback((d,m)=>{try{U.resolve("keyboardInputService").setKeyMapping(d,m)}catch{}},[]),o=v.useCallback(()=>{try{return U.resolve("keyboardInputService").getKeyMappings()}catch{return{}}},[]),a=v.useCallback(d=>{try{U.resolve("keyboardInputService").setDAS(d)}catch{}},[]),c=v.useCallback(d=>{try{U.resolve("keyboardInputService").setARR(d)}catch{}},[]),u=v.useCallback(()=>{try{return U.resolve("keyboardInputService").getDAS()}catch{return 133}},[]),h=v.useCallback(()=>{try{return U.resolve("keyboardInputService").getARR()}catch{return 10}},[]);return{customizeKeyMapping:i,getKeyMappings:o,setDAS:a,setARR:c,getDAS:u,getARR:h}}function gC({show:e,onComplete:t}){const[n,r]=v.useState([]);return v.useEffect(()=>{if(!e)return;const s=Array.from({length:50},(o,a)=>({id:a,x:Math.random()*window.innerWidth,y:-20,rotation:Math.random()*360,color:["#FF6B6B","#4ECDC4","#45B7D1","#FFA07A","#98D8C8","#F7DC6F","#BB8FCE","#85C1E2"][Math.floor(Math.random()*8)],size:Math.random()*10+5,delay:Math.random()*.5,duration:Math.random()*2+2,xOffset:(Math.random()-.5)*300}));r(s);const i=setTimeout(()=>{r([]),t&&t()},4e3);return()=>clearTimeout(i)},[e,t]),!e||n.length===0?null:l.jsx("div",{className:"fixed inset-0 pointer-events-none z-50 overflow-hidden",children:n.map(s=>l.jsx(M.div,{initial:{x:s.x,y:s.y,rotate:0,opacity:1},animate:{x:s.x+s.xOffset,y:window.innerHeight+100,rotate:s.rotation+720,opacity:0},transition:{duration:s.duration,delay:s.delay,ease:"easeIn"},style:{position:"absolute",width:s.size,height:s.size,backgroundColor:s.color,borderRadius:"50%"}},s.id))})}function vC({lesson:e,onStartDemo:t,onStartPractice:n,gamepadSelectedIndex:r}){return l.jsxs(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"max-w-lg mx-auto",children:[l.jsxs("div",{className:"bg-white/[0.06] border border-white/[0.08] rounded-xl p-6 mb-5 text-center",children:[l.jsx("div",{className:"text-4xl mb-3",children:""}),l.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:"Objetivo"}),l.jsx("p",{className:"text-white/70 text-base leading-relaxed",children:e.practice.objective})]}),e.intro&&e.intro.length>0&&l.jsxs("div",{className:"bg-white/[0.04] border border-white/[0.06] rounded-xl p-5 mb-5",children:[l.jsx("h4",{className:"text-sm font-semibold text-white/50 uppercase tracking-wide mb-3",children:"Como funciona"}),l.jsx("div",{className:"space-y-2.5",children:e.intro.map((s,i)=>l.jsxs(M.p,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:i*.08},className:"text-white/70 text-sm leading-relaxed flex items-start gap-2",children:[l.jsxs("span",{className:"text-white/25 font-mono text-xs mt-0.5 flex-shrink-0",children:[i+1,"."]}),l.jsx("span",{children:s})]},i))})]}),e.rewards&&l.jsxs("div",{className:"flex justify-center gap-4 mb-5 text-xs text-white/30",children:[l.jsxs("span",{children:[" ",e.rewards.fishCoins]}),l.jsxs("span",{children:[" ",e.rewards.xp," XP"]})]}),l.jsxs("div",{className:"flex flex-col items-center gap-3",children:[l.jsxs(M.button,{whileHover:{scale:1.03},whileTap:{scale:.97},onClick:t,className:`bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-500 hover:to-indigo-500
                   text-white px-8 py-3 rounded-xl font-bold text-sm shadow-lg shadow-blue-900/30 transition-all
                   flex items-center gap-2 ${r===1?"ring-2 ring-yellow-400":""}`,children:[l.jsx("span",{children:""}),l.jsx("span",{children:"Ver IA Jogar Primeiro"})]}),l.jsx("button",{onClick:n,className:`text-white/30 hover:text-white/50 text-xs transition-all ${r===2?"ring-2 ring-yellow-400 rounded-lg px-2 py-1":""}`,children:"Ir direto para prtica "})]})]},"intro")}function yC({lesson:e,gameState:t,isInitialized:n,demoComplete:r,dropPreview:s,statusLabel:i,onSkip:o,gamepadSelectedIndex:a}){var u,h,d,m,g;if(!t||!n)return l.jsx("div",{className:"text-center text-white/40 text-sm py-12",children:"Preparando demonstrao..."});const c=v.useMemo(()=>{var k;if(!e.intro||e.intro.length===0)return null;const x=((k=t.score)==null?void 0:k.lines)||0,b=Math.min(Math.floor(x/2),e.intro.length-1);return e.intro[b]},[e.intro,(u=t.score)==null?void 0:u.lines]);return l.jsxs(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"text-center",children:[l.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-xl p-3 mb-3 max-w-md mx-auto",children:[l.jsxs("div",{className:"flex items-center justify-center gap-2",children:[l.jsx("span",{className:"text-lg",children:""}),l.jsx("p",{className:"text-sm font-semibold text-blue-300",children:"IA jogando  observe como ela faz!"})]}),i&&l.jsx("p",{className:"text-xs text-blue-400/70 mt-1",children:i})]}),c&&l.jsx(M.div,{initial:{opacity:0,y:-5},animate:{opacity:1,y:0},className:"bg-white/[0.04] border border-white/[0.06] rounded-lg p-2.5 mb-3 max-w-md mx-auto",children:l.jsxs("p",{className:"text-xs text-white/60",children:[" ",c]})},c),l.jsxs("div",{className:"flex gap-3 justify-center items-start",children:[l.jsx(tr,{heldPiece:t.heldPiece,canHold:t.canHold}),l.jsx(En,{board:t.board,currentPiece:t.currentPiece,dropPreview:s,gameOver:t.gameOver}),l.jsxs("div",{className:"flex flex-col gap-3",children:[l.jsx(er,{pieces:t.nextPieces||[]}),l.jsx(Zn,{score:((h=t.score)==null?void 0:h.points)||0,level:((d=t.score)==null?void 0:d.level)||1,lines:((m=t.score)==null?void 0:m.lines)||0,combo:((g=t.score)==null?void 0:g.combo)||0})]})]}),l.jsx("div",{className:"mt-4",children:r?l.jsx(M.button,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},whileHover:{scale:1.03},whileTap:{scale:.97},onClick:o,className:`bg-gradient-to-r from-emerald-600 to-green-600 hover:from-emerald-500 hover:to-green-500
                     text-white px-6 py-2.5 rounded-xl font-bold text-sm shadow-lg shadow-emerald-900/30 transition-all ${a===1?"ring-2 ring-yellow-400":""}`,children:"  Agora  sua vez!"}):l.jsx("button",{onClick:o,className:`text-white/30 hover:text-white/50 text-xs transition-all ${a===1?"ring-2 ring-yellow-400 rounded-lg px-2 py-1":""}`,children:"Pular demonstrao "})})]},"demo")}function xC({lesson:e,gameState:t,isInitialized:n,practiceState:r,onRestart:s,dropPreview:i,gamepadSelectedIndex:o}){var a,c,u,h;return!t||!n?l.jsx("div",{className:"text-center text-white/40 text-sm py-12",children:"Carregando..."}):l.jsxs(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"text-center",children:[l.jsxs("div",{className:"bg-white/[0.06] border border-white/[0.06] rounded-xl p-3 mb-3 max-w-md mx-auto",children:[l.jsxs("p",{className:"text-sm font-semibold text-white mb-2",children:[" ",e.practice.objective]}),r.progress>0&&l.jsxs("div",{children:[l.jsx("div",{className:"h-1.5 bg-white/[0.08] rounded-full overflow-hidden",children:l.jsx(M.div,{className:`h-full rounded-full ${r.complete?"bg-emerald-400":"bg-gradient-to-r from-blue-500 to-indigo-500"}`,initial:{width:0},animate:{width:`${Math.min(100,r.progress*100)}%`},transition:{duration:.3}})}),l.jsxs("div",{className:"text-white/30 text-[10px] mt-1",children:[Math.round(r.progress*100),"%"]})]})]}),l.jsxs("div",{className:"flex gap-3 justify-center items-start",children:[l.jsx(tr,{heldPiece:t.heldPiece,canHold:t.canHold}),l.jsx(En,{board:t.board,currentPiece:t.currentPiece,dropPreview:i,gameOver:t.gameOver}),l.jsxs("div",{className:"flex flex-col gap-3",children:[l.jsx(er,{pieces:t.nextPieces||[]}),l.jsx(Zn,{score:((a=t.score)==null?void 0:a.points)||0,level:((c=t.score)==null?void 0:c.level)||1,lines:((u=t.score)==null?void 0:u.lines)||0,combo:((h=t.score)==null?void 0:h.combo)||0})]})]}),l.jsx("div",{className:"mt-3 text-white/20 text-[10px]",children:" Mover   Rotao   Soft Drop  Espao: Hard Drop  C: Hold"}),r.feedback&&!r.complete&&l.jsx(M.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"mt-3 bg-white/[0.06] border border-white/[0.08] rounded-lg p-3 max-w-md mx-auto",children:l.jsx("p",{className:"text-sm text-white/70",children:r.feedback})},r.feedback),t.gameOver&&!r.complete&&l.jsxs(M.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"mt-4",children:[l.jsx("p",{className:"text-white/40 text-sm mb-2",children:"Game Over  tente de novo!"}),l.jsx("button",{onClick:s,className:`bg-white/[0.08] hover:bg-white/[0.12] text-white text-sm px-4 py-2 rounded-lg transition-all ${o===1?"ring-2 ring-yellow-400":""}`,children:" Recomear"})]}),r.complete&&l.jsxs(M.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",bounce:.4},className:"mt-4 bg-emerald-500/10 border border-emerald-500/20 rounded-xl p-6 max-w-sm mx-auto",children:[l.jsx("div",{className:"text-4xl mb-2",children:""}),l.jsx("h3",{className:"text-lg font-bold text-white mb-1",children:"Parabns!"}),l.jsx("p",{className:"text-emerald-300/70 text-sm",children:r.feedback})]})]},"practice")}function wC({lesson:e,onComplete:t,onExit:n}){const[r,s]=v.useState("introduction"),[i,o]=v.useState({progress:0,feedback:"",complete:!1}),[a,c]=v.useState(!1),{gameState:u,isInitialized:h,demoComplete:d,statusLabel:m,getDropPreview:g}=pC(r==="demo",e==null?void 0:e.id),x=v.useMemo(()=>r!=="demo"||!h?null:(g==null?void 0:g())||null,[r,h,g,u]),{gameState:b,actions:k,isInitialized:p,getValidationState:f}=fC(r==="practice"?e:null);z0(k,b,r==="practice"&&p);const y=v.useMemo(()=>{var A;return r!=="practice"||!p?null:((A=k.getDropPreview)==null?void 0:A.call(k))||null},[r,p,k,b]);v.useEffect(()=>{var _;if(r!=="practice"||!p||!b)return;const A=f();if(!A||!((_=e.practice)!=null&&_.validate))return;const N=e.practice.validate(A);o(se=>({...se,progress:N.progress||0,feedback:N.feedback||"",complete:N.complete||!1})),N.complete&&!i.complete&&(c(!0),setTimeout(()=>{t(e.id,{score:A.score})},2e3))},[r,p,b,e,f,i.complete,t]);const w=v.useCallback(()=>{s("demo")},[]),S=v.useCallback(()=>{s("practice"),o({progress:0,feedback:"",complete:!1})},[]),C=v.useCallback(()=>{var A;(A=k.restart)==null||A.call(k),o({progress:0,feedback:"",complete:!1})},[k]),P=r==="practice"&&p&&b&&!b.gameOver,T=r==="introduction"?3:r==="demo"||b!=null&&b.gameOver&&!i.complete?2:1,j=v.useCallback(A=>{if(A===0){n();return}r==="introduction"?A===1?w():A===2&&S():r==="demo"?A===1&&S():r==="practice"&&(b!=null&&b.gameOver)&&A===1&&C()},[r,b==null?void 0:b.gameOver,n,w,S,C]),{selectedIndex:E}=$e({itemCount:T,onConfirm:j,onBack:n,active:!P}),L=r==="introduction"?"":r==="demo"?"":"";return l.jsxs("div",{className:"fixed inset-0 bg-gradient-to-b from-slate-900 via-indigo-950 to-slate-900 z-50 flex flex-col",children:[l.jsx("div",{className:"bg-black/30 border-b border-white/[0.06] px-4 py-2 flex-shrink-0",children:l.jsxs("div",{className:"flex items-center justify-between max-w-4xl mx-auto",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("span",{className:"text-2xl",children:e.module==="fundamentals"?"":e.module==="intermediate"?"":e.module==="advanced"?"":""}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-bold text-white",children:e.title}),l.jsx("p",{className:"text-white/40 text-xs",children:e.description})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-xs text-white/30 bg-white/[0.06] px-2 py-1 rounded",children:L}),l.jsx("button",{onClick:n,className:`text-white/40 hover:text-white/70 bg-white/[0.06] hover:bg-white/[0.1] rounded-lg px-3 py-1.5 text-sm transition-all ${E===0?"ring-2 ring-yellow-400":""}`,children:""})]})]})}),l.jsx("div",{className:"flex-1 overflow-auto p-3",children:l.jsx("div",{className:"max-w-4xl w-full mx-auto",children:l.jsxs(Ee,{mode:"wait",children:[r==="introduction"&&l.jsx(vC,{lesson:e,onStartDemo:w,onStartPractice:S,gamepadSelectedIndex:E}),r==="demo"&&l.jsx(yC,{lesson:e,gameState:u,isInitialized:h,demoComplete:d,dropPreview:x,statusLabel:m,onSkip:S,gamepadSelectedIndex:E}),r==="practice"&&l.jsx(xC,{lesson:e,gameState:b,isInitialized:p,practiceState:i,onRestart:C,dropPreview:y,gamepadSelectedIndex:E})]})})}),l.jsx(gC,{show:a,onComplete:()=>c(!1)})]})}function bC({tutorialService:e,onClose:t,onLessonComplete:n}){const[r,s]=v.useState(null),[i,o]=v.useState(e.getProgress()),[a,c]=v.useState("fundamentals"),{t:u}=Re(),h=e.lessons,d=[{key:"fundamentals",icon:"",name:u("tutorial.fundamentals"),desc:u("tutorial.fundamentalsDesc")},{key:"intermediate",icon:"",name:u("tutorial.intermediate"),desc:u("tutorial.intermediateDesc")},{key:"advanced",icon:"",name:u("tutorial.advanced"),desc:u("tutorial.advancedDesc")},{key:"pro",icon:"",name:u("tutorial.pro"),desc:u("tutorial.proDesc")}],m=h.filter(S=>S.module===a),g=S=>{const C=h.filter(T=>T.module===S).map(T=>T.id);return{done:C.filter(T=>i.completedLessons.includes(T)).length,total:C.length}},x=(S,C)=>{const P=e.completeLesson(S,C);o(e.getProgress()),s(null),n&&n(P)},b=S=>i.unlockedLessons.includes(S),k=S=>i.completedLessons.includes(S),{selectedIndex:p}=$e({itemCount:m.length,onConfirm:S=>{const C=m[S];C&&b(C.id)&&s(C)},onBack:t,active:!r,wrap:!0});if(r)return l.jsx(wC,{lesson:r,onComplete:x,onExit:()=>s(null)});const f=i.completedLessons.length,y=h.length,w=y>0?Math.round(f/y*100):0;return l.jsx(M.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-gradient-to-b from-slate-900 via-indigo-950 to-slate-900 z-40 overflow-y-auto",children:l.jsxs("div",{className:"min-h-screen max-w-lg mx-auto px-4 py-6 flex flex-col",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-extrabold text-white",children:u("tutorial.title")}),l.jsx("p",{className:"text-white/40 text-sm mt-0.5",children:u("tutorial.subtitle")})]}),l.jsx("button",{onClick:t,className:"text-white/40 hover:text-white/70 bg-white/[0.06] hover:bg-white/[0.1] rounded-lg px-3 py-1.5 text-sm transition-all",children:u("tutorial.close")})]}),l.jsxs("div",{className:"mb-6",children:[l.jsxs("div",{className:"flex justify-between text-xs text-white/40 mb-1.5",children:[l.jsx("span",{children:u("tutorial.overallProgress")}),l.jsxs("span",{children:[f,"/",y," (",w,"%)"]})]}),l.jsx("div",{className:"h-2 bg-white/[0.08] rounded-full overflow-hidden",children:l.jsx(M.div,{className:"h-full bg-gradient-to-r from-emerald-500 to-green-400 rounded-full",initial:{width:0},animate:{width:`${w}%`},transition:{duration:.6,ease:"easeOut"}})})]}),l.jsx("div",{className:"flex gap-1.5 mb-5 overflow-x-auto pb-1 -mx-1 px-1",children:d.map(S=>{const C=g(S.key),P=a===S.key;return l.jsx("button",{onClick:()=>c(S.key),className:`flex-shrink-0 rounded-lg px-3 py-2 text-left transition-all duration-150 ${P?"bg-white/[0.12] border border-white/[0.15]":"bg-white/[0.04] border border-transparent hover:bg-white/[0.07]"}`,children:l.jsxs("div",{className:"flex items-center gap-1.5",children:[l.jsx("span",{className:"text-base",children:S.icon}),l.jsx("span",{className:`text-xs font-semibold ${P?"text-white":"text-white/50"}`,children:S.name}),l.jsxs("span",{className:`text-[10px] ml-1 ${C.done===C.total&&C.total>0?"text-emerald-400":"text-white/30"}`,children:[C.done,"/",C.total]})]})},S.key)})}),l.jsx("div",{className:"flex-1 space-y-2",children:l.jsx(Ee,{mode:"wait",children:l.jsxs(M.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},transition:{duration:.2},className:"space-y-2",children:[m.map((S,C)=>{var j,E;const P=b(S.id),T=k(S.id);return l.jsxs(M.button,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:C*.04},disabled:!P,onClick:()=>P&&s(S),className:`w-full text-left rounded-xl p-4 transition-all duration-150 flex items-center gap-3 ${P?"bg-white/[0.06] hover:bg-white/[0.1] border border-white/[0.06] hover:border-white/[0.12] active:scale-[0.99]":"bg-white/[0.02] border border-white/[0.03] opacity-40 cursor-not-allowed"} ${T?"border-emerald-500/30":""} ${C===p?"ring-2 ring-yellow-400 ring-offset-2 ring-offset-slate-900":""}`,children:[l.jsx("div",{className:`w-9 h-9 rounded-lg flex items-center justify-center text-sm flex-shrink-0 ${T?"bg-emerald-500/20 text-emerald-400":P?"bg-white/[0.08] text-white/60":"bg-white/[0.04] text-white/20"}`,children:T?"":P?C+1:""}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("div",{className:"text-sm font-semibold text-white truncate",children:S.title}),l.jsx("div",{className:"text-xs text-white/35 mt-0.5 truncate",children:S.description}),l.jsxs("div",{className:"flex items-center gap-3 mt-1.5 text-[10px] text-white/25",children:[l.jsxs("span",{children:[" ",S.estimatedTime]}),l.jsxs("span",{children:[" ",((j=S.rewards)==null?void 0:j.fishCoins)||0]}),l.jsxs("span",{children:[" ",((E=S.rewards)==null?void 0:E.xp)||0," XP"]})]})]}),l.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[l.jsx("span",{className:`w-2 h-2 rounded-full ${S.difficulty==="beginner"?"bg-green-400":S.difficulty==="intermediate"?"bg-yellow-400":S.difficulty==="advanced"?"bg-red-400":"bg-purple-400"}`}),P&&l.jsx("svg",{className:"w-4 h-4 text-white/20",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]},S.id)}),m.length===0&&l.jsx("div",{className:"text-center py-12 text-white/20 text-sm",children:u("tutorial.noLessons")})]},a)})}),i.badges.length>0&&l.jsxs("div",{className:"mt-6 pt-4 border-t border-white/[0.06]",children:[l.jsx("div",{className:"text-xs text-white/30 mb-2",children:u("tutorial.badgesEarned")}),l.jsx("div",{className:"flex flex-wrap gap-2",children:i.badges.map(S=>l.jsxs("span",{className:"bg-amber-500/10 text-amber-300/70 text-[10px] px-2 py-1 rounded-md font-medium",children:[" ",S.replace(/_/g," ")]},S))})]})]})})}function SC({reward:e,onClose:t}){var r,s,i;const{t:n}=Re();return ce.useEffect(()=>{const o=setTimeout(()=>{t()},5e3);return()=>clearTimeout(o)},[t]),e?l.jsx(M.div,{initial:{opacity:0,y:-50,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,scale:.9},className:"fixed top-24 right-6 z-[60] max-w-md",children:l.jsx("div",{className:"bg-gradient-to-br from-green-600 to-emerald-600 rounded-xl p-6 shadow-2xl border-2 border-white/20",children:l.jsxs("div",{className:"flex items-start gap-4",children:[l.jsx("div",{className:"text-4xl",children:""}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:n("reward.lessonComplete")}),e.lessonTitle&&l.jsx("p",{className:"text-white/90 text-sm mb-3",children:e.lessonTitle}),l.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[((r=e.rewards)==null?void 0:r.fishCoins)>0&&l.jsxs("div",{className:"bg-white/10 rounded-lg p-2 text-center",children:[l.jsx("div",{className:"text-xl",children:""}),l.jsxs("div",{className:"text-lg font-bold text-white",children:["+",e.rewards.fishCoins]}),l.jsx("div",{className:"text-xs text-white/70",children:n("reward.fish")})]}),((s=e.rewards)==null?void 0:s.xp)>0&&l.jsxs("div",{className:"bg-white/10 rounded-lg p-2 text-center",children:[l.jsx("div",{className:"text-xl",children:""}),l.jsxs("div",{className:"text-lg font-bold text-white",children:["+",e.rewards.xp]}),l.jsx("div",{className:"text-xs text-white/70",children:n("reward.xp")})]}),((i=e.rewards)==null?void 0:i.badge)&&l.jsxs("div",{className:"bg-white/10 rounded-lg p-2 text-center",children:[l.jsx("div",{className:"text-xl",children:""}),l.jsx("div",{className:"text-xs font-bold text-white mt-1",children:n("reward.badge")}),l.jsx("div",{className:"text-xs text-white/70",children:e.rewards.badge.split("_")[0]})]})]})]}),l.jsx("button",{onClick:t,className:"text-white/60 hover:text-white transition-colors",children:""})]})})}):null}function CC(){const[e,t]=v.useState(null),n=v.useRef(null),r=v.useRef(null),s=v.useRef(0),i=v.useRef(!1),o=v.useRef(!1);v.useEffect(()=>{if(!i.current){i.current=!0;try{const w=U.resolve("gameService");n.current=w,w.initializeGame(),t(w.getGameState());const S=()=>{o.current=!0};return Object.values(F).forEach(C=>{O.on(C,S)}),()=>{Object.values(F).forEach(C=>{O.off(C,S)}),r.current&&cancelAnimationFrame(r.current)}}catch(w){throw Bt.logError("useGameService","init",w.message,{stack:w.stack}),w}}},[]),v.useEffect(()=>{if(!n.current)return;const w=S=>{s.current||(s.current=S);const C=S-s.current;s.current=S,n.current&&(n.current.isPlaying&&!n.current.isPaused&&!n.current.gameOver&&n.current.updateGame(C),o.current&&(o.current=!1,t(n.current.getGameState()))),r.current=requestAnimationFrame(w)};return r.current=requestAnimationFrame(w),()=>{r.current&&cancelAnimationFrame(r.current)}},[]);const a=v.useCallback(w=>(...S)=>{if(n.current&&typeof n.current[w]=="function")try{return n.current[w](...S)}catch(C){if(Bt.logError("useGameService",w,C.message,{stack:C.stack,args:S.map(P=>String(P).slice(0,100))}),w==="getDropPreview")return null;throw C}},[]),c=v.useCallback(a("movePiece"),[a]),u=v.useCallback(a("rotatePiece"),[a]),h=v.useCallback(a("rotatePieceLeft"),[a]),d=v.useCallback(a("hardDrop"),[a]),m=v.useCallback(a("holdPiece"),[a]),g=v.useCallback(a("getDropPreview"),[a]),x=v.useCallback(a("pause"),[a]),b=v.useCallback(a("resume"),[a]),k=v.useCallback(a("restart"),[a]),p=v.useCallback(a("saveGame"),[a]),f=v.useCallback(a("loadGame"),[a]);return{gameState:e,actions:{movePiece:c,rotatePiece:u,rotatePieceLeft:h,hardDrop:d,holdPiece:m,getDropPreview:g,pause:x,resume:b,restart:k,saveGame:p,loadGame:f}}}function kC(){const[e,t]=v.useState({volume:80,gameSpeed:"normal",soundEnabled:!0,particlesEnabled:!0,das:167,arr:33}),[n,r]=v.useState(!0),[s,i]=v.useState(null);v.useEffect(()=>{try{const h=U.resolve("settingsService").getSettings();t(h||{volume:80,gameSpeed:"normal",soundEnabled:!0,particlesEnabled:!0,das:167,arr:33}),r(!1)}catch(u){i(u.message),r(!1),t({volume:80,gameSpeed:"normal",soundEnabled:!0,particlesEnabled:!0,das:167,arr:33})}},[]);const o=v.useCallback(async u=>{try{i(null);const d=U.resolve("settingsService").saveSettings(u);return t(d),d}catch(h){throw i(h.message),h}},[]),a=v.useCallback(async(u,h)=>{try{i(null);const m=U.resolve("settingsService").updateSetting(u,h);return t(m),m}catch(d){throw i(d.message),d}},[]),c=v.useCallback(async()=>{try{i(null);const h=U.resolve("settingsService").resetSettings();return t(h),h}catch(u){throw i(u.message),u}},[]);return{settings:e,loading:n,error:s,updateSettings:o,updateSetting:a,resetSettings:c}}function PC(){const e=v.useCallback((k,p,f="sine",y=.1)=>{const w=Ur();if(w)try{const S=w.createOscillator(),C=w.createGain();S.connect(C),C.connect(w.destination),S.frequency.setValueAtTime(k,w.currentTime),S.type=f,C.gain.setValueAtTime(y,w.currentTime),C.gain.exponentialRampToValueAtTime(.001,w.currentTime+p),S.start(w.currentTime),S.stop(w.currentTime+p)}catch{}},[]),t=v.useCallback((k,p=.05)=>{const f=Ur();if(f)try{const y=f.sampleRate*k,w=f.createBuffer(1,y,f.sampleRate),S=w.getChannelData(0);for(let P=0;P<y;P++)S[P]=(Math.random()*2-1)*p;const C=f.createBufferSource();C.buffer=w,C.connect(f.destination),C.start()}catch{}},[]),n=v.useCallback(k=>{switch(k){case"I":[800,700,600,500].forEach((p,f)=>{setTimeout(()=>e(p,.1,"square",.08),f*50)});break;case"O":e(600,.1,"sine",.1),setTimeout(()=>e(600,.1,"sine",.1),80);break;case"T":e(523,.08,"triangle",.08),setTimeout(()=>e(659,.08,"triangle",.08),40),setTimeout(()=>e(523,.08,"triangle",.08),80);break;case"S":[440,494,523,587].forEach((p,f)=>{setTimeout(()=>e(p,.06,"sawtooth",.06),f*30)});break;case"Z":[587,523,494,440].forEach((p,f)=>{setTimeout(()=>e(p,.06,"sawtooth",.06),f*30)});break;case"J":[330,415,523].forEach((p,f)=>{setTimeout(()=>e(p,.15,"triangle",.07),f*20)});break;case"L":[392,494,659].forEach((p,f)=>{setTimeout(()=>e(p,.15,"sine",.08),f*30)});break;default:e(440,.1,"sine",.05)}},[e]),r=v.useCallback(k=>{switch(k){case 1:[440,494,523].forEach((p,f)=>{setTimeout(()=>e(p,.1,"triangle",.1),f*80)});break;case 2:[440,523,659,784].forEach((p,f)=>{setTimeout(()=>e(p,.12,"triangle",.1),f*60)});break;case 3:[523,659,784,1047,1319].forEach((p,f)=>{setTimeout(()=>e(p,.15,"triangle",.12),f*50)});break;case 4:t(.02),setTimeout(()=>{[262,330,392,523,659,784,1047].forEach((p,f)=>{setTimeout(()=>e(p,.2,"sawtooth",.15),f*40)})},50),setTimeout(()=>{[1047,1319,1568,2093].forEach((p,f)=>{setTimeout(()=>e(p,.3,"triangle",.2),f*30)})},350);break}},[e,t]),s=v.useCallback(()=>{[{freq:523,delay:0},{freq:659,delay:100},{freq:784,delay:200},{freq:1047,delay:300},{freq:784,delay:400},{freq:1047,delay:500},{freq:1319,delay:600},{freq:1568,delay:700}].forEach(p=>{setTimeout(()=>e(p.freq,.15,"triangle",.12),p.delay)}),setTimeout(()=>{[1047,1319,1568,2093].forEach((p,f)=>{setTimeout(()=>e(p,.4,"triangle",.15),f*50)})},800)},[e]),i=v.useCallback(()=>{e(200,.05,"square",.03),e(120,.06,"sine",.04)},[e]),o=v.useCallback(()=>{t(.04,.08),e(80,.08,"square",.12),e(60,.1,"sine",.1)},[e,t]),a=v.useCallback(()=>{t(.03,.04),[349,440,523,659,784].forEach((k,p)=>{setTimeout(()=>e(k,.2,"sawtooth",.1),p*40)}),setTimeout(()=>{e(1047,.4,"triangle",.15)},250)},[e,t]),c=v.useCallback(()=>{[660,880,1100,1320,1760].forEach((k,p)=>{setTimeout(()=>e(k,.12,"triangle",.08),p*50)})},[e]),u=v.useCallback(k=>{const p=400+k*80;e(p,.1,"triangle",.08),setTimeout(()=>e(p*1.25,.08,"triangle",.06),50)},[e]),h=v.useCallback(()=>{[523,494,440,392,349,330,294,262].forEach((p,f)=>{setTimeout(()=>e(p,.3,"sine",.1),f*150)})},[e]),d=v.useCallback(()=>{e(440,.2,"triangle",.08)},[e]),m=v.useCallback(()=>{e(523,.15,"triangle",.08),setTimeout(()=>e(659,.1,"triangle",.06),100)},[e]),g=v.useCallback(()=>{e(880,.1,"sine",.06),setTimeout(()=>e(1100,.08,"sine",.05),60)},[e]),x=v.useCallback(()=>{e(1200,.05,"square",.04)},[e]),b=v.useCallback(()=>{e(800,.03,"square",.02)},[e]);return{playPieceSound:n,playLineClear:r,playLevelUp:s,playPieceLand:i,playHardDrop:o,playTSpin:a,playBackToBack:c,playCombo:u,playGameOver:h,playPause:d,playResume:m,playHold:g,playRotate:x,playMove:b}}function TC(){const e=PC(),t=v.useRef(e);t.current=e,v.useEffect(()=>{const n=()=>t.current,r=x=>{var b;n().playPieceLand(),(b=x==null?void 0:x.piece)!=null&&b.type&&n().playPieceSound(x.piece.type)},s=x=>{(x==null?void 0:x.linesCleared)>0&&n().playLineClear(x.linesCleared)},i=()=>n().playHardDrop(),o=()=>n().playTSpin(),a=()=>n().playBackToBack(),c=x=>{(x==null?void 0:x.combo)>=2&&n().playCombo(x.combo)},u=()=>n().playHold(),h=()=>n().playRotate(),d=()=>n().playMove(),m=()=>n().playGameOver(),g=()=>n().playLevelUp();return O.on(F.PIECE_PLACED,r),O.on(F.LINE_CLEARED,s),O.on(F.HARD_DROP,i),O.on(F.T_SPIN,o),O.on(F.BACK_TO_BACK,a),O.on(F.SCORE_UPDATED,c),O.on(F.PIECE_HELD,u),O.on(F.PIECE_ROTATED,h),O.on(F.PIECE_MOVED,d),O.on(F.GAME_OVER,m),O.on(F.LEVEL_UP,g),()=>{O.off(F.PIECE_PLACED,r),O.off(F.LINE_CLEARED,s),O.off(F.HARD_DROP,i),O.off(F.T_SPIN,o),O.off(F.BACK_TO_BACK,a),O.off(F.SCORE_UPDATED,c),O.off(F.PIECE_HELD,u),O.off(F.PIECE_ROTATED,h),O.off(F.PIECE_MOVED,d),O.off(F.GAME_OVER,m),O.off(F.LEVEL_UP,g)}},[])}function jC(){const[e,t]=v.useState(!1),[n,r]=v.useState(null),s=v.useRef(null),i=v.useRef([]),o=v.useRef(null),a=v.useCallback(()=>{s.current&&(s.current.pause(),s.current.currentTime=0),i.current.forEach(m=>{try{m.stop()}catch{}}),i.current=[],o.current&&(clearTimeout(o.current),o.current=null),t(!1),r(null)},[]),c=v.useCallback(async()=>{try{a(),h()}catch{}},[a]),u=v.useCallback(async()=>{try{a(),d()}catch{}},[a]),h=v.useCallback(()=>{a();try{const m=Ur();if(!m)return;const g=[{freq:523.25,duration:.4},{freq:587.33,duration:.4},{freq:659.25,duration:.4},{freq:698.46,duration:.4},{freq:783.99,duration:.6},{freq:659.25,duration:.4},{freq:523.25,duration:.8},{freq:587.33,duration:.4},{freq:659.25,duration:.4},{freq:698.46,duration:.4},{freq:783.99,duration:.6},{freq:880,duration:.4},{freq:783.99,duration:.8},{freq:659.25,duration:.4},{freq:698.46,duration:.4},{freq:783.99,duration:.4},{freq:880,duration:.6},{freq:987.77,duration:.4},{freq:1046.5,duration:.8}];let x=m.currentTime;g.forEach((b,k)=>{const p=m.createOscillator(),f=m.createGain();if(p.connect(f),f.connect(m.destination),p.frequency.setValueAtTime(b.freq,x),p.type="sine",f.gain.setValueAtTime(0,x),f.gain.linearRampToValueAtTime(.1,x+.05),f.gain.exponentialRampToValueAtTime(.01,x+b.duration),p.start(x),p.stop(x+b.duration),i.current.push(p),k<g.length-1){const y=m.createOscillator(),w=m.createGain();y.connect(w),w.connect(m.destination),y.frequency.setValueAtTime(b.freq*1.25,x),y.type="triangle",w.gain.setValueAtTime(0,x),w.gain.linearRampToValueAtTime(.05,x+.05),w.gain.exponentialRampToValueAtTime(.01,x+b.duration),y.start(x),y.stop(x+b.duration),i.current.push(y)}x+=b.duration}),o.current=setTimeout(()=>{s.current||h()},x*1e3+1e3),t(!0),r("cheerful-fallback")}catch{}},[a]),d=v.useCallback(()=>{a();try{const m=Ur();if(!m)return;const g=[{freq:261.63,duration:.2},{freq:329.63,duration:.2},{freq:392,duration:.2},{freq:523.25,duration:.3},{freq:392,duration:.1},{freq:523.25,duration:.3},{freq:293.66,duration:.2},{freq:369.99,duration:.2},{freq:440,duration:.2},{freq:587.33,duration:.3},{freq:440,duration:.1},{freq:587.33,duration:.3},{freq:329.63,duration:.2},{freq:415.3,duration:.2},{freq:493.88,duration:.2},{freq:659.25,duration:.4},{freq:493.88,duration:.2},{freq:659.25,duration:.4}];let x=m.currentTime;g.forEach((b,k)=>{const p=m.createOscillator(),f=m.createGain();if(p.connect(f),f.connect(m.destination),p.frequency.setValueAtTime(b.freq,x),p.type="square",f.gain.setValueAtTime(0,x),f.gain.linearRampToValueAtTime(.15,x+.02),f.gain.exponentialRampToValueAtTime(.01,x+b.duration),p.start(x),p.stop(x+b.duration),i.current.push(p),k%2===0){const y=m.createOscillator(),w=m.createGain();y.connect(w),w.connect(m.destination),y.frequency.setValueAtTime(b.freq*.5,x),y.type="sawtooth",w.gain.setValueAtTime(0,x),w.gain.linearRampToValueAtTime(.08,x+.02),w.gain.exponentialRampToValueAtTime(.01,x+b.duration),y.start(x),y.stop(x+b.duration),i.current.push(y)}x+=b.duration}),o.current=setTimeout(()=>{s.current||d()},x*1e3+500),t(!0),r("energetic-fallback")}catch{}},[a]);return{isPlaying:e,currentTrack:n,startBackgroundMusic:c,startGameMusic:u,stopMusic:a,playCheerfulMelody:h,playEnergeticMelody:d}}function EC(){const[e,t]=v.useState(null),[n,r]=v.useState(!0);v.useEffect(()=>{try{const o=U.resolve("playerStatsService");t(o.getStats()),r(!1);const a=()=>{try{const c=U.resolve("statisticsService"),u=U.resolve("gameService");if(!u.gameOver)return;const h=u.getGameState(),d=c.getStats();if(d.piecesPlaced===0&&d.linesCleared===0)return;const m={score:h.score.points,level:h.score.level,linesCleared:d.linesCleared,piecesPlaced:d.piecesPlaced,tSpins:d.tSpins,backToBack:d.backToBack,maxCombo:d.maxCombo,playTime:d.playTime};o.updateAfterGame(m),t(o.getStats()),c.reset(),window.dispatchEvent(new Event("playerStatsUpdated"))}catch{}};return O.on(F.GAME_OVER,a),()=>{O.off(F.GAME_OVER,a)}}catch{r(!1)}},[]);const s=v.useCallback((o,a)=>{try{const c=U.resolve("playerStatsService"),u=c.updateRecord(o,a);return u&&(t(c.getStats()),window.dispatchEvent(new Event("playerStatsUpdated"))),u}catch{return!1}},[]),i=v.useCallback((o,a=1)=>{try{const c=U.resolve("playerStatsService");c.incrementStat(o,a),t(c.getStats()),window.dispatchEvent(new Event("playerStatsUpdated"))}catch{}},[]);return{playerStats:e,loading:n,updateRecord:s,incrementStat:i}}function NC(){const[e,t]=v.useState(null),[n,r]=v.useState(!0);v.useEffect(()=>{try{const i=U.resolve("statisticsService");t(i.getStats()),r(!1);const o=()=>{t(i.getStats())},a=()=>{i.incrementPiecesPlaced(),o()},c=({linesCleared:m})=>{i.addLinesCleared(m),o()},u=()=>{i.incrementTSpins(),o()},h=({combo:m})=>{i.updateMaxCombo(m),o()},d=()=>{i.incrementBackToBack(),o()};return O.on(F.PIECE_PLACED,a),O.on(F.LINE_CLEARED,c),O.on(F.T_SPIN,u),O.on(F.SCORE_UPDATED,h),O.on(F.BACK_TO_BACK,d),()=>{O.off(F.PIECE_PLACED,a),O.off(F.LINE_CLEARED,c),O.off(F.T_SPIN,u),O.off(F.SCORE_UPDATED,h),O.off(F.BACK_TO_BACK,d)}}catch{r(!1)}},[]),v.useEffect(()=>{if(n)return;const i=setInterval(()=>{try{const o=U.resolve("statisticsService"),a=U.resolve("gameService");a.isPlaying&&!a.isPaused&&!a.gameOver&&o.incrementPlayTime(),t(o.getStats())}catch{}},1e3);return()=>clearInterval(i)},[n]);const s=v.useCallback(()=>{try{const i=U.resolve("statisticsService");i.reset(),t(i.getStats())}catch{}},[]);return{statistics:e,loading:n,resetStatistics:s}}const AC=v.lazy(()=>qc(()=>import("./SettingsMenu-09f20ae1.js"),[]));function MC(){return l.jsx("div",{className:"flex items-center justify-center p-8",children:l.jsx(M.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"text-4xl",children:""})})}function LC({gameState:e,actions:t,onBackToMenu:n,onRestart:r,isGamepadActive:s,controllerCount:i,getGamepadInfo:o}){var b,k,p,f,y,w;const{t:a}=Re(),c=ce.useMemo(()=>{if(!(e!=null&&e.currentPiece)||e!=null&&e.gameOver||e!=null&&e.isPaused)return null;try{return t.getDropPreview()}catch{return null}},[(k=(b=e==null?void 0:e.currentPiece)==null?void 0:b.position)==null?void 0:k.x,(f=(p=e==null?void 0:e.currentPiece)==null?void 0:p.position)==null?void 0:f.y,(y=e==null?void 0:e.currentPiece)==null?void 0:y.type,(w=e==null?void 0:e.currentPiece)==null?void 0:w.shape,e==null?void 0:e.gameOver,e==null?void 0:e.isPaused]),[u,h]=ce.useState({hardDrop:!1,hold:!1,pause:!1}),d=ce.useRef({});ce.useEffect(()=>()=>{Object.values(d.current).forEach(clearTimeout)},[]);const m=ce.useCallback(()=>{u.hardDrop||e!=null&&e.gameOver||(t.hardDrop(),h(S=>({...S,hardDrop:!0})),clearTimeout(d.current.hardDrop),d.current.hardDrop=setTimeout(()=>{h(S=>({...S,hardDrop:!1}))},300))},[t,u.hardDrop,e==null?void 0:e.gameOver]),g=ce.useCallback(()=>{u.hold||e!=null&&e.gameOver||!(e!=null&&e.canHold)||(t.holdPiece(),h(S=>({...S,hold:!0})),clearTimeout(d.current.hold),d.current.hold=setTimeout(()=>{h(S=>({...S,hold:!1}))},500))},[t,u.hold,e==null?void 0:e.gameOver,e==null?void 0:e.canHold]),x=ce.useCallback(()=>{u.pause||e!=null&&e.gameOver||(e!=null&&e.isPaused?t.resume():t.pause(),h(S=>({...S,pause:!0})),clearTimeout(d.current.pause),d.current.pause=setTimeout(()=>{h(S=>({...S,pause:!1}))},300))},[t,u.pause,e==null?void 0:e.gameOver,e==null?void 0:e.isPaused]);return l.jsxs("div",{className:"h-screen cat-bg flex flex-col overflow-hidden",children:[l.jsxs("div",{className:"flex items-center justify-between px-3 py-1.5 bg-black/30 backdrop-blur-sm border-b border-white/10 shrink-0",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(M.button,{onClick:n,whileHover:{scale:1.05},whileTap:{scale:.95},className:"bg-white/15 hover:bg-white/25 text-white p-1.5 rounded-lg transition-colors",title:a("game.backToMenu"),children:l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"})})}),l.jsx("span",{className:"text-white font-bold text-sm",children:" Cat Tetris"})]}),l.jsxs("div",{className:"flex items-center gap-3 text-xs text-white/70",children:[l.jsxs("span",{className:"text-yellow-400 font-bold",children:[e.score.points.toLocaleString()," pts"]}),l.jsxs("span",{children:["Nv.",e.score.level]}),l.jsxs("span",{children:[e.score.lines," ",a("common.lines")]})]}),l.jsx("div",{className:"flex items-center gap-1.5",children:l.jsx(M.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:e.isPaused?t.resume:t.pause,disabled:e.gameOver,className:"bg-white/10 hover:bg-white/20 text-white px-2.5 py-1 rounded-lg text-xs transition-colors disabled:opacity-50",children:e.isPaused?"":""})})]}),l.jsxs("div",{className:"flex-1 flex items-center justify-center overflow-hidden p-2",children:[l.jsxs("div",{className:"flex flex-col lg:flex-row gap-2 items-center justify-center",children:[l.jsxs("div",{className:"hidden lg:flex flex-col lg:flex-row gap-2 items-center justify-center",children:[l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx(tr,{heldPiece:e.heldPiece,canHold:e.canHold}),l.jsx(Zn,{score:e.score.points,level:e.score.level,lines:e.score.lines,combo:e.score.combo})]}),l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx(En,{board:e.board,currentPiece:e.currentPiece,dropPreview:c,gameOver:e.gameOver}),l.jsx(Yb,{onMove:t.movePiece,onRotate:t.rotatePiece,onHardDrop:t.hardDrop,onPause:e.isPaused?t.resume:t.pause,onHold:t.holdPiece,isPaused:e.isPaused,gameOver:e.gameOver,canHold:e.canHold})]}),l.jsx("div",{className:"flex flex-col gap-2",children:l.jsx(er,{pieces:e.nextPieces})})]}),l.jsxs("div",{className:"flex lg:hidden flex-col w-full h-full","data-testid":"mobile-layout",children:[l.jsxs("div",{className:"flex justify-between items-center mb-2 px-2 bg-black/30 rounded-lg mx-2 py-1",children:[l.jsxs("div",{className:"text-white text-sm",children:[l.jsx("span",{className:"text-yellow-400 font-bold",children:e.score.points.toLocaleString()}),l.jsxs("span",{className:"text-white/60 ml-2",children:["Nv.",e.score.level]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[e.heldPiece&&l.jsx("div",{className:"text-xs text-white/60",children:""}),l.jsx("div",{className:"text-xs text-white/60",children:a("game.nextLabel")}),l.jsx("div",{className:"bg-gray-800/50 p-1 rounded",children:e.nextPieces[0]?l.jsx("div",{className:"grid gap-0.5",style:{gridTemplateColumns:`repeat(${Math.max(...e.nextPieces[0].shape.map(S=>S.length))}, 8px)`,gridTemplateRows:`repeat(${e.nextPieces[0].shape.length}, 8px)`},children:e.nextPieces[0].shape.map((S,C)=>S.map((P,T)=>l.jsx("div",{className:"w-2 h-2 rounded-sm",style:{backgroundColor:P?Dr(e.nextPieces[0].color):"transparent",border:P?"1px solid rgba(255,255,255,0.3)":"none"},children:P&&e.nextPieces[0].emoji?l.jsx("span",{className:"text-[6px] leading-none block text-center",children:e.nextPieces[0].emoji}):null},`next-${T}-${C}`)))}):l.jsx("div",{className:"w-8 h-6 flex items-center justify-center",children:l.jsx("span",{className:"text-xs text-white/40",children:"?"})})})]})]}),l.jsxs("div",{className:"flex items-center justify-center flex-1 relative px-1",children:[l.jsxs("div",{className:"flex flex-col gap-1 mr-2",children:[l.jsx(M.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onTouchStart:S=>{S.preventDefault(),t.rotatePiece()},onClick:()=>t.rotatePiece(),disabled:e.gameOver,className:"bg-blue-500 text-white p-4 rounded-full shadow-lg hover:bg-blue-600 disabled:opacity-50 touch-manipulation text-lg",children:""}),l.jsx(M.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onTouchStart:S=>{S.preventDefault(),t.movePiece("left")},onClick:()=>t.movePiece("left"),disabled:e.gameOver,className:"bg-gray-600 text-white p-4 rounded-lg shadow-lg hover:bg-gray-700 disabled:opacity-50 touch-manipulation text-lg",children:""})]}),l.jsx("div",{className:"flex-shrink-0 mx-1",children:l.jsx(En,{board:e.board,currentPiece:e.currentPiece,dropPreview:c,gameOver:e.gameOver})}),l.jsxs("div",{className:"flex flex-col gap-1 ml-2",children:[l.jsx(M.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onTouchStart:S=>{S.preventDefault(),m()},onClick:m,disabled:e.gameOver||u.hardDrop,className:`text-white p-4 rounded-full shadow-lg disabled:opacity-50 touch-manipulation text-lg ${u.hardDrop?"bg-red-400":"bg-red-500 hover:bg-red-600"}`,children:""}),l.jsx(M.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onTouchStart:S=>{S.preventDefault(),t.movePiece("right")},onClick:()=>t.movePiece("right"),disabled:e.gameOver,className:"bg-gray-600 text-white p-4 rounded-lg shadow-lg hover:bg-gray-700 disabled:opacity-50 touch-manipulation text-lg",children:""})]})]}),l.jsxs("div",{className:"flex justify-center gap-2 py-2 px-2",children:[l.jsx(M.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onTouchStart:S=>{S.preventDefault(),t.movePiece("down")},onClick:()=>t.movePiece("down"),disabled:e.gameOver,className:"bg-gray-700 text-white px-4 py-2 rounded-lg shadow-lg hover:bg-gray-600 disabled:opacity-50 touch-manipulation",children:" Acelerar"}),e.canHold&&l.jsx(M.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onTouchStart:S=>{S.preventDefault(),g()},onClick:g,disabled:e.gameOver||!e.canHold||u.hold,className:`text-white px-4 py-2 rounded-lg shadow-lg disabled:opacity-50 touch-manipulation ${u.hold?"bg-green-400":e.canHold?"bg-green-600 hover:bg-green-500":"bg-gray-500"}`,children:" Guardar"}),l.jsx(M.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onTouchStart:S=>{S.preventDefault(),x()},onClick:x,disabled:e.gameOver||u.pause,className:`text-white px-4 py-2 rounded-lg shadow-lg disabled:opacity-50 touch-manipulation ${u.pause?"bg-yellow-400":"bg-yellow-500 hover:bg-yellow-600"}`,children:e.isPaused?"":""})]})]})]}),l.jsx(Ee,{children:e.gameOver&&l.jsx(eS,{score:e.score,onRestart:r,onBackToMenu:n})}),l.jsx(I0,{isConnected:s,controllerCount:i,gamepadInfo:o()})]})]})}function _C(){const[e,t]=v.useState("menu"),[n,r]=v.useState(!1),[s,i]=v.useState(!1),[o,a]=v.useState(!1),[c,u]=v.useState(!1),[h,d]=v.useState(!1),[m,g]=v.useState(!1),[x,b]=v.useState(!1),[k,p]=v.useState(!0),[f,y]=v.useState(!1),[w,S]=v.useState(null),[C,P]=v.useState(null),[T,j]=v.useState(!1),[E,L]=v.useState(!1),{gameState:A,actions:N}=CC();ce.useEffect(()=>{Bt.setGameStateProvider(()=>{try{return U.resolve("gameService").getGameState()}catch{return null}})},[]);const{settings:_,updateSettings:se}=kC(),{startBackgroundMusic:I,startGameMusic:W,stopMusic:R}=jC(),B=ce.useMemo(()=>N?{...N,togglePause:()=>{var te,Y;A!=null&&A.isPaused?(te=N.resume)==null||te.call(N):(Y=N.pause)==null||Y.call(N)},isGameOver:()=>(A==null?void 0:A.gameOver)??!1,backToMenu:()=>{L(!1),P(null),j(!1),t("menu"),_!=null&&_.soundEnabled&&(I==null||I()),A&&!A.gameOver&&N.pause()}}:null,[N,A==null?void 0:A.isPaused,A==null?void 0:A.gameOver,_==null?void 0:_.soundEnabled,I]),{isGamepadActive:G,controllerCount:H,processGamepadInput:$,getGamepadInfo:z}=gu(B);_0(),NC(),R0(),EC(),B0(),H0(),TC();const K=e==="game",{setDAS:J,setARR:Q}=z0(N,A,K);ce.useEffect(()=>{(_==null?void 0:_.das)!=null&&J(_.das),(_==null?void 0:_.arr)!=null&&Q(_.arr)},[_==null?void 0:_.das,_==null?void 0:_.arr,J,Q]),ce.useEffect(()=>{const te=Y=>{try{U.resolve("gameService").setGameMode(Y.detail.mode)}catch{}};return window.addEventListener("gameModeChanged",te),()=>window.removeEventListener("gameModeChanged",te)},[]),ce.useEffect(()=>{A&&!A.gameOver&&A.score.points>0&&A.isPlaying?i(!0):i(!1)},[A]),ce.useEffect(()=>(I&&R&&(_!=null&&_.soundEnabled)?e==="menu"?I():e==="game"&&W():R(),()=>{R()}),[e,_==null?void 0:_.soundEnabled,I,W,R]);const pe=n||h||o||c||m||x||f;ce.useEffect(()=>{if(G&&e==="game"&&!pe&&!(A!=null&&A.gameOver)){const te=setInterval(()=>{$()},16);return()=>clearInterval(te)}},[G,e,$,pe,A==null?void 0:A.gameOver]);const Ye=te=>{se(te),te.das!=null&&J(te.das),te.arr!=null&&Q(te.arr),te.soundEnabled?e==="menu"?I==null||I():e==="game"&&(W==null||W()):R==null||R()},le=()=>{t("game"),_!=null&&_.soundEnabled&&(W==null||W()),A!=null&&A.gameOver?N.restart():A!=null&&A.isPaused?N.resume():A!=null&&A.isPlaying||N.restart()},Le=()=>{t("game"),_!=null&&_.soundEnabled&&(W==null||W()),A!=null&&A.isPaused&&N.resume()},Se=()=>{t("game"),_!=null&&_.soundEnabled&&(W==null||W()),N.restart()},wt=()=>{N.restart(),t("game")},Ot=()=>{t("menu"),_!=null&&_.soundEnabled&&(I==null||I()),A&&!A.gameOver&&N.pause()};return E?l.jsx(nC,{onExit:()=>L(!1)}):T?l.jsx(QS,{onClose:()=>j(!1)}):C?l.jsx($S,{mode:C.mode,aiDifficulty:C.aiDifficulty,ai1Difficulty:C.ai1Difficulty,ai2Difficulty:C.ai2Difficulty,onExit:()=>{P(null),t("menu")}}):e==="menu"?l.jsxs(l.Fragment,{children:[l.jsx(VS,{onStartGame:s?Le:le,onNewGame:Se,onShowSettings:()=>r(!0),onShowGameModes:()=>g(!0),onShowShop:()=>d(!0),onShowMissions:()=>a(!0),onShowAchievements:()=>u(!0),onShowMultiplayer:()=>b(!0),onShowTutorial:()=>p(!0),onShowTutorialHub:()=>y(!0),onShowAIShowcase:()=>j(!0),onShowCreatorMode:()=>L(!0),hasActiveGame:s,gameState:A,hasOverlayOpen:pe}),l.jsx(Ee,{children:x&&l.jsx(hC,{onClose:()=>b(!1),onStartMatch:te=>{b(!1),P(te)}})}),l.jsx(Ee,{children:m&&l.jsx(cC,{onClose:()=>g(!1),onStartGame:Se})}),l.jsx(Ee,{children:h&&l.jsx(lC,{onClose:()=>d(!1)})}),l.jsx(Ee,{children:o&&l.jsx(HS,{onClose:()=>a(!1)})}),l.jsx(Ee,{children:c&&l.jsx(zS,{onClose:()=>u(!1)})}),l.jsx(Ee,{children:f&&l.jsx(bC,{tutorialService:U.resolve("tutorialService"),onClose:()=>y(!1),onLessonComplete:te=>{if(!(!te||!te.rewards)){try{const Y=U.resolve("currencyService");te.rewards.fishCoins&&Y.addFish(te.rewards.fishCoins,`Tutorial: ${te.lessonTitle||"Lesson"}`)}catch{}try{te.rewards.xp&&U.resolve("playerStatsService").incrementStat("totalPlayTime",te.rewards.xp)}catch{}try{if(te.rewards.achievement){const Y=U.resolve("achievementsService"),Pe=U.resolve("playerStatsService");Y.checkAchievements(Pe.getStats())}}catch{}S(te)}}})}),l.jsx(Ee,{children:l.jsx(v.Suspense,{fallback:l.jsx(MC,{}),children:l.jsx(AC,{isOpen:n,settings:_||{},onSettingsChange:Ye,onClose:()=>r(!1)})})}),l.jsx(US,{}),l.jsx(Ee,{children:w&&l.jsx(SC,{reward:w,onClose:()=>S(null)})})]}):A?l.jsxs(l.Fragment,{children:[l.jsx(LC,{gameState:A,actions:N,onBackToMenu:Ot,onRestart:wt,isGamepadActive:G,controllerCount:H,getGamepadInfo:z}),l.jsx(Ee,{children:k&&l.jsx(mC,{onComplete:()=>p(!1)})})]}):l.jsx("div",{className:"h-screen cat-bg flex items-center justify-center overflow-hidden",children:l.jsx("div",{className:"text-white text-xl",children:"Carregando..."})})}function DC(){return l.jsxs(iS,{children:[l.jsx(_C,{}),l.jsx(BS,{})]})}function RC(e={}){const{immediate:t=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:s,onRegisteredSW:i,onRegisterError:o}=e;let a,c;const u=async(d=!0)=>{await c};async function h(){if("serviceWorker"in navigator){if(a=await qc(()=>import("./workbox-window.prod.es5-5ffdab76.js"),[]).then(({Workbox:d})=>new d("/cat-tetris/sw.js",{scope:"/cat-tetris/",type:"classic"})).catch(d=>{o==null||o(d)}),!a)return;a.addEventListener("activated",d=>{(d.isUpdate||d.isExternal)&&window.location.reload()}),a.addEventListener("installed",d=>{d.isUpdate||r==null||r()}),a.register({immediate:t}).then(d=>{i?i("/cat-tetris/sw.js",d):s==null||s(d)}).catch(d=>{o==null||o(d)})}}return c=h(),u}RC({onRegisteredSW(e,t){t&&(setInterval(()=>{t.update()},60*60*1e3),"periodicSync"in t&&t.periodicSync.register("content-sync",{minInterval:24*60*60*1e3}).catch(()=>{}))},onOfflineReady(){console.log("Cat Tetris pronto para uso offline!")}});Ba.createRoot(document.getElementById("root")).render(l.jsx(Xb,{children:l.jsx(DC,{})}));export{Ee as A,GC as B,BC as G,VC as M,zC as a,$e as b,FC as c,l as j,Ql as l,M as m,v as r,HC as s,Re as u};
