import{u as T,r,l as k,s as G,a as L,b as R,j as e,A as P,m as g,M as B,c as C,B as E,G as H}from"./index-78fef008.js";const D=({isOpen:o,onClose:N,settings:i,onSettingsChange:S})=>{const{t}=T(),[a,c]=r.useState({...i,das:i.das??133,arr:i.arr??10}),[x,u]=r.useState(()=>k()),[n,m]=r.useState(null),d=r.useRef(null);r.useEffect(()=>{o&&u(k())},[o]),r.useEffect(()=>{if(!n){d.current&&(clearInterval(d.current),d.current=null);return}const s=Date.now();d.current=setInterval(()=>{var v;if(Date.now()-s<200)return;const A=navigator.getGamepads(),j=Array.from(A).find(l=>l&&l.connected);if(j){for(let l=0;l<j.buttons.length;l++)if((v=j.buttons[l])!=null&&v.pressed){if(l>=12&&l<=15)continue;const y={...x,[n]:l};u(y),G(y),m(null);return}}},16);const p=setTimeout(()=>m(null),5e3);return()=>{clearInterval(d.current),d.current=null,clearTimeout(p)}},[n,x]);const I=r.useCallback(()=>{const s=L();u(s)},[]),b=()=>{S(a),N()},h=()=>{c({...i,das:i.das??133,arr:i.arr??10}),N()},w=[b,h],M=r.useCallback(s=>{var p;(p=w[s])==null||p.call(w)},[b,h]),{selectedIndex:f}=R({itemCount:2,onConfirm:M,onBack:h,active:o&&!n,wrap:!0});return e.jsx(P,{children:o&&e.jsx(g.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15},className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs(g.div,{initial:{scale:.9,y:10},animate:{scale:1,y:0},exit:{scale:.9,y:10},transition:{duration:.15,ease:"easeOut"},className:"bg-gray-900/90 p-6 rounded-2xl border-2 border-white/20 shadow-2xl max-w-md w-full mx-4 max-h-[85vh] overflow-y-auto",children:[e.jsx("h2",{className:"text-2xl font-cat font-bold text-white mb-5 text-center",children:t("settings.title")}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"text-xs font-bold text-white/40 uppercase tracking-wider",children:t("settings.audio")}),e.jsxs("div",{children:[e.jsx("label",{className:"text-white/80 text-sm",children:t("settings.volume")}),e.jsx("input",{type:"range",min:"0",max:"100",value:a.volume,onChange:s=>c({...a,volume:parseInt(s.target.value)}),className:"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer"}),e.jsxs("span",{className:"text-white text-sm",children:[a.volume,"%"]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"soundEnabled",checked:a.soundEnabled,onChange:s=>c({...a,soundEnabled:s.target.checked}),className:"mr-2"}),e.jsx("label",{htmlFor:"soundEnabled",className:"text-white/80 text-sm",children:t("settings.soundEnabled")})]}),e.jsxs("div",{className:"border-t border-white/10 pt-4 mt-4",children:[e.jsx("div",{className:"text-xs font-bold text-white/40 uppercase tracking-wider mb-3",children:t("settings.handling")}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("label",{className:"text-white/80 text-sm",children:t("settings.dasLabel")}),e.jsxs("span",{className:"text-cyan-400 text-sm font-mono",children:[a.das,"ms"]})]}),e.jsx("input",{type:"range",min:"0",max:"300",step:"1",value:a.das,onChange:s=>c({...a,das:parseInt(s.target.value)}),className:"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-cyan-500"}),e.jsx("p",{className:"text-white/30 text-xs mt-0.5",children:t("settings.dasHelp")})]}),e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("label",{className:"text-white/80 text-sm",children:t("settings.arrLabel")}),e.jsxs("span",{className:"text-cyan-400 text-sm font-mono",children:[a.arr,"ms"]})]}),e.jsx("input",{type:"range",min:"0",max:"100",step:"1",value:a.arr,onChange:s=>c({...a,arr:parseInt(s.target.value)}),className:"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-cyan-500"}),e.jsx("p",{className:"text-white/30 text-xs mt-0.5",children:t("settings.arrHelp")})]})]}),e.jsxs("div",{className:"border-t border-white/10 pt-4 mt-4",children:[e.jsx("div",{className:"text-xs font-bold text-white/40 uppercase tracking-wider mb-3",children:t("settings.controls")}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs text-white/60",children:[e.jsxs("div",{className:"bg-white/[0.04] rounded-lg p-2",children:[e.jsx("span",{className:"text-white/40",children:"â† â†’"})," ",t("settings.ctrlMove")]}),e.jsxs("div",{className:"bg-white/[0.04] rounded-lg p-2",children:[e.jsx("span",{className:"text-white/40",children:"â†‘ / X"})," ",t("settings.ctrlRotateR")]}),e.jsxs("div",{className:"bg-white/[0.04] rounded-lg p-2",children:[e.jsx("span",{className:"text-white/40",children:"Z"})," ",t("settings.ctrlRotateL")]}),e.jsxs("div",{className:"bg-white/[0.04] rounded-lg p-2",children:[e.jsx("span",{className:"text-white/40",children:"â†“"})," ",t("settings.ctrlSoftDrop")]}),e.jsxs("div",{className:"bg-white/[0.04] rounded-lg p-2",children:[e.jsx("span",{className:"text-white/40",children:"EspaÃ§o"})," ",t("settings.ctrlHardDrop")]}),e.jsxs("div",{className:"bg-white/[0.04] rounded-lg p-2",children:[e.jsx("span",{className:"text-white/40",children:"C / Shift"})," ",t("settings.ctrlHold")]}),e.jsxs("div",{className:"bg-white/[0.04] rounded-lg p-2",children:[e.jsx("span",{className:"text-white/40",children:"P / Esc"})," ",t("settings.ctrlPause")]})]})]}),e.jsxs("div",{className:"border-t border-white/10 pt-4 mt-4",children:[e.jsx("div",{className:"text-xs font-bold text-white/40 uppercase tracking-wider mb-3",children:"ðŸŽ® BotÃµes do Controle"}),e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"text-white/50 text-[10px] uppercase tracking-wider mb-1.5",children:"Menu"}),e.jsx("div",{className:"space-y-1",children:B.map(s=>e.jsxs("button",{onClick:()=>m(s),className:`w-full flex items-center justify-between bg-white/[0.04] rounded-lg px-3 py-1.5 text-xs transition-colors
                          ${n===s?"ring-2 ring-yellow-400 bg-yellow-400/10":"hover:bg-white/[0.08]"}`,children:[e.jsx("span",{className:"text-white/70",children:C[s]}),e.jsx("span",{className:`font-mono font-bold ${n===s?"text-yellow-400 animate-pulse":"text-cyan-400"}`,children:n===s?"Pressione...":E[x[s]]??"?"})]},s))})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"text-white/50 text-[10px] uppercase tracking-wider mb-1.5",children:"Jogo"}),e.jsx("div",{className:"space-y-1",children:H.map(s=>e.jsxs("button",{onClick:()=>m(s),className:`w-full flex items-center justify-between bg-white/[0.04] rounded-lg px-3 py-1.5 text-xs transition-colors
                          ${n===s?"ring-2 ring-yellow-400 bg-yellow-400/10":"hover:bg-white/[0.08]"}`,children:[e.jsx("span",{className:"text-white/70",children:C[s]}),e.jsx("span",{className:`font-mono font-bold ${n===s?"text-yellow-400 animate-pulse":"text-cyan-400"}`,children:n===s?"Pressione...":E[x[s]]??"?"})]},s))})]}),e.jsx("div",{className:"text-white/30 text-[10px] mb-2",children:"D-Pad nÃ£o pode ser remapeado (navegaÃ§Ã£o)"}),e.jsx("button",{onClick:I,className:"w-full bg-white/[0.06] hover:bg-white/[0.12] text-white/60 hover:text-white/90 text-xs py-1.5 rounded-lg transition-colors",children:"ðŸ”„ Restaurar PadrÃ£o"})]}),e.jsxs("div",{className:"border-t border-white/10 pt-4 mt-4",children:[e.jsx("div",{className:"text-xs font-bold text-white/40 uppercase tracking-wider mb-3",children:t("settings.visual")}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"particlesEnabled",checked:a.particlesEnabled,onChange:s=>c({...a,particlesEnabled:s.target.checked}),className:"mr-2"}),e.jsx("label",{htmlFor:"particlesEnabled",className:"text-white/80 text-sm",children:t("settings.particles")})]})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx(g.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:b,className:`flex-1 bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 ${f===0?"ring-2 ring-yellow-400 ring-offset-2 ring-offset-gray-900":""}`,children:t("settings.save")}),e.jsx(g.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:h,className:`flex-1 bg-gray-600 text-white py-2 px-4 rounded-lg hover:bg-gray-700 ${f===1?"ring-2 ring-yellow-400 ring-offset-2 ring-offset-gray-900":""}`,children:t("settings.cancel")})]})]})})})};export{D as default};
