var _0=Object.defineProperty;var A0=(e,t,n)=>t in e?_0(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Ys=(e,t,n)=>(A0(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function M0(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Mh={exports:{}},xo={},Dh={exports:{}},Q={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bs=Symbol.for("react.element"),D0=Symbol.for("react.portal"),L0=Symbol.for("react.fragment"),R0=Symbol.for("react.strict_mode"),I0=Symbol.for("react.profiler"),O0=Symbol.for("react.provider"),F0=Symbol.for("react.context"),G0=Symbol.for("react.forward_ref"),V0=Symbol.for("react.suspense"),B0=Symbol.for("react.memo"),z0=Symbol.for("react.lazy"),au=Symbol.iterator;function H0(e){return e===null||typeof e!="object"?null:(e=au&&e[au]||e["@@iterator"],typeof e=="function"?e:null)}var Lh={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Rh=Object.assign,Ih={};function Br(e,t,n){this.props=e,this.context=t,this.refs=Ih,this.updater=n||Lh}Br.prototype.isReactComponent={};Br.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Br.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Oh(){}Oh.prototype=Br.prototype;function Bl(e,t,n){this.props=e,this.context=t,this.refs=Ih,this.updater=n||Lh}var zl=Bl.prototype=new Oh;zl.constructor=Bl;Rh(zl,Br.prototype);zl.isPureReactComponent=!0;var lu=Array.isArray,Fh=Object.prototype.hasOwnProperty,Hl={current:null},Gh={key:!0,ref:!0,__self:!0,__source:!0};function Vh(e,t,n){var r,s={},i=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)Fh.call(t,r)&&!Gh.hasOwnProperty(r)&&(s[r]=t[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var c=Array(a),u=0;u<a;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Bs,type:e,key:i,ref:o,props:s,_owner:Hl.current}}function U0(e,t){return{$$typeof:Bs,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Ul(e){return typeof e=="object"&&e!==null&&e.$$typeof===Bs}function $0(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var cu=/\/+/g;function $o(e,t){return typeof e=="object"&&e!==null&&e.key!=null?$0(""+e.key):t.toString(36)}function bi(e,t,n,r,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Bs:case D0:o=!0}}if(o)return o=e,s=s(o),e=r===""?"."+$o(o,0):r,lu(s)?(n="",e!=null&&(n=e.replace(cu,"$&/")+"/"),bi(s,t,n,"",function(u){return u})):s!=null&&(Ul(s)&&(s=U0(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(cu,"$&/")+"/")+e)),t.push(s)),1;if(o=0,r=r===""?".":r+":",lu(e))for(var a=0;a<e.length;a++){i=e[a];var c=r+$o(i,a);o+=bi(i,t,n,c,s)}else if(c=H0(e),typeof c=="function")for(e=c.call(e),a=0;!(i=e.next()).done;)i=i.value,c=r+$o(i,a++),o+=bi(i,t,n,c,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Js(e,t,n){if(e==null)return e;var r=[],s=0;return bi(e,r,"","",function(i){return t.call(n,i,s++)}),r}function W0(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var We={current:null},Si={transition:null},q0={ReactCurrentDispatcher:We,ReactCurrentBatchConfig:Si,ReactCurrentOwner:Hl};function Bh(){throw Error("act(...) is not supported in production builds of React.")}Q.Children={map:Js,forEach:function(e,t,n){Js(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Js(e,function(){t++}),t},toArray:function(e){return Js(e,function(t){return t})||[]},only:function(e){if(!Ul(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Q.Component=Br;Q.Fragment=L0;Q.Profiler=I0;Q.PureComponent=Bl;Q.StrictMode=R0;Q.Suspense=V0;Q.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=q0;Q.act=Bh;Q.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Rh({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=Hl.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(c in t)Fh.call(t,c)&&!Gh.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&a!==void 0?a[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var u=0;u<c;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Bs,type:e.type,key:s,ref:i,props:r,_owner:o}};Q.createContext=function(e){return e={$$typeof:F0,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:O0,_context:e},e.Consumer=e};Q.createElement=Vh;Q.createFactory=function(e){var t=Vh.bind(null,e);return t.type=e,t};Q.createRef=function(){return{current:null}};Q.forwardRef=function(e){return{$$typeof:G0,render:e}};Q.isValidElement=Ul;Q.lazy=function(e){return{$$typeof:z0,_payload:{_status:-1,_result:e},_init:W0}};Q.memo=function(e,t){return{$$typeof:B0,type:e,compare:t===void 0?null:t}};Q.startTransition=function(e){var t=Si.transition;Si.transition={};try{e()}finally{Si.transition=t}};Q.unstable_act=Bh;Q.useCallback=function(e,t){return We.current.useCallback(e,t)};Q.useContext=function(e){return We.current.useContext(e)};Q.useDebugValue=function(){};Q.useDeferredValue=function(e){return We.current.useDeferredValue(e)};Q.useEffect=function(e,t){return We.current.useEffect(e,t)};Q.useId=function(){return We.current.useId()};Q.useImperativeHandle=function(e,t,n){return We.current.useImperativeHandle(e,t,n)};Q.useInsertionEffect=function(e,t){return We.current.useInsertionEffect(e,t)};Q.useLayoutEffect=function(e,t){return We.current.useLayoutEffect(e,t)};Q.useMemo=function(e,t){return We.current.useMemo(e,t)};Q.useReducer=function(e,t,n){return We.current.useReducer(e,t,n)};Q.useRef=function(e){return We.current.useRef(e)};Q.useState=function(e){return We.current.useState(e)};Q.useSyncExternalStore=function(e,t,n){return We.current.useSyncExternalStore(e,t,n)};Q.useTransition=function(){return We.current.useTransition()};Q.version="18.3.1";Dh.exports=Q;var x=Dh.exports;const ue=M0(x);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K0=x,Q0=Symbol.for("react.element"),X0=Symbol.for("react.fragment"),Y0=Object.prototype.hasOwnProperty,J0=K0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Z0={key:!0,ref:!0,__self:!0,__source:!0};function zh(e,t,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)Y0.call(t,r)&&!Z0.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:Q0,type:e,key:i,ref:o,props:s,_owner:J0.current}}xo.Fragment=X0;xo.jsx=zh;xo.jsxs=zh;Mh.exports=xo;var l=Mh.exports,Da={},Hh={exports:{}},ot={},Uh={exports:{}},$h={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(T,M){var A=T.length;T.push(M);e:for(;0<A;){var L=A-1>>>1,F=T[L];if(0<s(F,M))T[L]=M,T[A]=F,A=L;else break e}}function n(T){return T.length===0?null:T[0]}function r(T){if(T.length===0)return null;var M=T[0],A=T.pop();if(A!==M){T[0]=A;e:for(var L=0,F=T.length,re=F>>>1;L<re;){var $=2*(L+1)-1,ie=T[$],z=$+1,se=T[z];if(0>s(ie,A))z<F&&0>s(se,ie)?(T[L]=se,T[z]=A,L=z):(T[L]=ie,T[$]=A,L=$);else if(z<F&&0>s(se,A))T[L]=se,T[z]=A,L=z;else break e}}return M}function s(T,M){var A=T.sortIndex-M.sortIndex;return A!==0?A:T.id-M.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var c=[],u=[],h=1,d=null,m=3,v=!1,w=!1,b=!1,S=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,f=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(T){for(var M=n(u);M!==null;){if(M.callback===null)r(u);else if(M.startTime<=T)r(u),M.sortIndex=M.expirationTime,t(c,M);else break;M=n(u)}}function y(T){if(b=!1,g(T),!w)if(n(c)!==null)w=!0,I(k);else{var M=n(u);M!==null&&W(y,M.startTime-T)}}function k(T,M){w=!1,b&&(b=!1,p(P),P=-1),v=!0;var A=m;try{for(g(M),d=n(c);d!==null&&(!(d.expirationTime>M)||T&&!V());){var L=d.callback;if(typeof L=="function"){d.callback=null,m=d.priorityLevel;var F=L(d.expirationTime<=M);M=e.unstable_now(),typeof F=="function"?d.callback=F:d===n(c)&&r(c),g(M)}else r(c);d=n(c)}if(d!==null)var re=!0;else{var $=n(u);$!==null&&W(y,$.startTime-M),re=!1}return re}finally{d=null,m=A,v=!1}}var j=!1,C=null,P=-1,N=5,E=-1;function V(){return!(e.unstable_now()-E<N)}function K(){if(C!==null){var T=e.unstable_now();E=T;var M=!0;try{M=C(!0,T)}finally{M?q():(j=!1,C=null)}}else j=!1}var q;if(typeof f=="function")q=function(){f(K)};else if(typeof MessageChannel<"u"){var X=new MessageChannel,le=X.port2;X.port1.onmessage=K,q=function(){le.postMessage(null)}}else q=function(){S(K,0)};function I(T){C=T,j||(j=!0,q())}function W(T,M){P=S(function(){T(e.unstable_now())},M)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(T){T.callback=null},e.unstable_continueExecution=function(){w||v||(w=!0,I(k))},e.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<T?Math.floor(1e3/T):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(T){switch(m){case 1:case 2:case 3:var M=3;break;default:M=m}var A=m;m=M;try{return T()}finally{m=A}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(T,M){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var A=m;m=T;try{return M()}finally{m=A}},e.unstable_scheduleCallback=function(T,M,A){var L=e.unstable_now();switch(typeof A=="object"&&A!==null?(A=A.delay,A=typeof A=="number"&&0<A?L+A:L):A=L,T){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=A+F,T={id:h++,callback:M,priorityLevel:T,startTime:A,expirationTime:F,sortIndex:-1},A>L?(T.sortIndex=A,t(u,T),n(c)===null&&T===n(u)&&(b?(p(P),P=-1):b=!0,W(y,A-L))):(T.sortIndex=F,t(c,T),w||v||(w=!0,I(k))),T},e.unstable_shouldYield=V,e.unstable_wrapCallback=function(T){var M=m;return function(){var A=m;m=M;try{return T.apply(this,arguments)}finally{m=A}}}})($h);Uh.exports=$h;var eg=Uh.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tg=x,st=eg;function D(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Wh=new Set,ws={};function Zn(e,t){_r(e,t),_r(e+"Capture",t)}function _r(e,t){for(ws[e]=t,e=0;e<t.length;e++)Wh.add(t[e])}var Ht=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),La=Object.prototype.hasOwnProperty,ng=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,uu={},du={};function rg(e){return La.call(du,e)?!0:La.call(uu,e)?!1:ng.test(e)?du[e]=!0:(uu[e]=!0,!1)}function sg(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function ig(e,t,n,r){if(t===null||typeof t>"u"||sg(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function qe(e,t,n,r,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var Re={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Re[e]=new qe(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Re[t]=new qe(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Re[e]=new qe(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Re[e]=new qe(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Re[e]=new qe(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Re[e]=new qe(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Re[e]=new qe(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Re[e]=new qe(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Re[e]=new qe(e,5,!1,e.toLowerCase(),null,!1,!1)});var $l=/[\-:]([a-z])/g;function Wl(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace($l,Wl);Re[t]=new qe(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace($l,Wl);Re[t]=new qe(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace($l,Wl);Re[t]=new qe(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Re[e]=new qe(e,1,!1,e.toLowerCase(),null,!1,!1)});Re.xlinkHref=new qe("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Re[e]=new qe(e,1,!1,e.toLowerCase(),null,!0,!0)});function ql(e,t,n,r){var s=Re.hasOwnProperty(t)?Re[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(ig(t,n,s,r)&&(n=null),r||s===null?rg(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Kt=tg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Zs=Symbol.for("react.element"),or=Symbol.for("react.portal"),ar=Symbol.for("react.fragment"),Kl=Symbol.for("react.strict_mode"),Ra=Symbol.for("react.profiler"),qh=Symbol.for("react.provider"),Kh=Symbol.for("react.context"),Ql=Symbol.for("react.forward_ref"),Ia=Symbol.for("react.suspense"),Oa=Symbol.for("react.suspense_list"),Xl=Symbol.for("react.memo"),en=Symbol.for("react.lazy"),Qh=Symbol.for("react.offscreen"),hu=Symbol.iterator;function $r(e){return e===null||typeof e!="object"?null:(e=hu&&e[hu]||e["@@iterator"],typeof e=="function"?e:null)}var xe=Object.assign,Wo;function ts(e){if(Wo===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Wo=t&&t[1]||""}return`
`+Wo+e}var qo=!1;function Ko(e,t){if(!e||qo)return"";qo=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var c=`
`+s[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=a);break}}}finally{qo=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?ts(e):""}function og(e){switch(e.tag){case 5:return ts(e.type);case 16:return ts("Lazy");case 13:return ts("Suspense");case 19:return ts("SuspenseList");case 0:case 2:case 15:return e=Ko(e.type,!1),e;case 11:return e=Ko(e.type.render,!1),e;case 1:return e=Ko(e.type,!0),e;default:return""}}function Fa(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ar:return"Fragment";case or:return"Portal";case Ra:return"Profiler";case Kl:return"StrictMode";case Ia:return"Suspense";case Oa:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Kh:return(e.displayName||"Context")+".Consumer";case qh:return(e._context.displayName||"Context")+".Provider";case Ql:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Xl:return t=e.displayName||null,t!==null?t:Fa(e.type)||"Memo";case en:t=e._payload,e=e._init;try{return Fa(e(t))}catch{}}return null}function ag(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Fa(t);case 8:return t===Kl?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function yn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Xh(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function lg(e){var t=Xh(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ei(e){e._valueTracker||(e._valueTracker=lg(e))}function Yh(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Xh(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Ii(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ga(e,t){var n=t.checked;return xe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function fu(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=yn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Jh(e,t){t=t.checked,t!=null&&ql(e,"checked",t,!1)}function Va(e,t){Jh(e,t);var n=yn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Ba(e,t.type,n):t.hasOwnProperty("defaultValue")&&Ba(e,t.type,yn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function mu(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Ba(e,t,n){(t!=="number"||Ii(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var ns=Array.isArray;function kr(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+yn(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function za(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(D(91));return xe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function pu(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(D(92));if(ns(n)){if(1<n.length)throw Error(D(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:yn(n)}}function Zh(e,t){var n=yn(t.value),r=yn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function gu(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function ef(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ha(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?ef(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ti,tf=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ti=ti||document.createElement("div"),ti.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ti.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function bs(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var os={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},cg=["Webkit","ms","Moz","O"];Object.keys(os).forEach(function(e){cg.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),os[t]=os[e]})});function nf(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||os.hasOwnProperty(e)&&os[e]?(""+t).trim():t+"px"}function rf(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=nf(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var ug=xe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ua(e,t){if(t){if(ug[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(D(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(D(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(D(61))}if(t.style!=null&&typeof t.style!="object")throw Error(D(62))}}function $a(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wa=null;function Yl(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var qa=null,jr=null,Cr=null;function xu(e){if(e=Us(e)){if(typeof qa!="function")throw Error(D(280));var t=e.stateNode;t&&(t=So(t),qa(e.stateNode,e.type,t))}}function sf(e){jr?Cr?Cr.push(e):Cr=[e]:jr=e}function of(){if(jr){var e=jr,t=Cr;if(Cr=jr=null,xu(e),t)for(e=0;e<t.length;e++)xu(t[e])}}function af(e,t){return e(t)}function lf(){}var Qo=!1;function cf(e,t,n){if(Qo)return e(t,n);Qo=!0;try{return af(e,t,n)}finally{Qo=!1,(jr!==null||Cr!==null)&&(lf(),of())}}function Ss(e,t){var n=e.stateNode;if(n===null)return null;var r=So(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(D(231,t,typeof n));return n}var Ka=!1;if(Ht)try{var Wr={};Object.defineProperty(Wr,"passive",{get:function(){Ka=!0}}),window.addEventListener("test",Wr,Wr),window.removeEventListener("test",Wr,Wr)}catch{Ka=!1}function dg(e,t,n,r,s,i,o,a,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(h){this.onError(h)}}var as=!1,Oi=null,Fi=!1,Qa=null,hg={onError:function(e){as=!0,Oi=e}};function fg(e,t,n,r,s,i,o,a,c){as=!1,Oi=null,dg.apply(hg,arguments)}function mg(e,t,n,r,s,i,o,a,c){if(fg.apply(this,arguments),as){if(as){var u=Oi;as=!1,Oi=null}else throw Error(D(198));Fi||(Fi=!0,Qa=u)}}function er(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function uf(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function vu(e){if(er(e)!==e)throw Error(D(188))}function pg(e){var t=e.alternate;if(!t){if(t=er(e),t===null)throw Error(D(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return vu(s),e;if(i===r)return vu(s),t;i=i.sibling}throw Error(D(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(D(189))}}if(n.alternate!==r)throw Error(D(190))}if(n.tag!==3)throw Error(D(188));return n.stateNode.current===n?e:t}function df(e){return e=pg(e),e!==null?hf(e):null}function hf(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=hf(e);if(t!==null)return t;e=e.sibling}return null}var ff=st.unstable_scheduleCallback,yu=st.unstable_cancelCallback,gg=st.unstable_shouldYield,xg=st.unstable_requestPaint,be=st.unstable_now,vg=st.unstable_getCurrentPriorityLevel,Jl=st.unstable_ImmediatePriority,mf=st.unstable_UserBlockingPriority,Gi=st.unstable_NormalPriority,yg=st.unstable_LowPriority,pf=st.unstable_IdlePriority,vo=null,Nt=null;function wg(e){if(Nt&&typeof Nt.onCommitFiberRoot=="function")try{Nt.onCommitFiberRoot(vo,e,void 0,(e.current.flags&128)===128)}catch{}}var bt=Math.clz32?Math.clz32:kg,bg=Math.log,Sg=Math.LN2;function kg(e){return e>>>=0,e===0?32:31-(bg(e)/Sg|0)|0}var ni=64,ri=4194304;function rs(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Vi(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=rs(a):(i&=o,i!==0&&(r=rs(i)))}else o=n&~s,o!==0?r=rs(o):i!==0&&(r=rs(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-bt(t),s=1<<n,r|=e[n],t&=~s;return r}function jg(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Cg(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-bt(i),a=1<<o,c=s[o];c===-1?(!(a&n)||a&r)&&(s[o]=jg(a,t)):c<=t&&(e.expiredLanes|=a),i&=~a}}function Xa(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function gf(){var e=ni;return ni<<=1,!(ni&4194240)&&(ni=64),e}function Xo(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function zs(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-bt(t),e[t]=n}function Pg(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-bt(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}function Zl(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-bt(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var ne=0;function xf(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var vf,ec,yf,wf,bf,Ya=!1,si=[],cn=null,un=null,dn=null,ks=new Map,js=new Map,rn=[],Tg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function wu(e,t){switch(e){case"focusin":case"focusout":cn=null;break;case"dragenter":case"dragleave":un=null;break;case"mouseover":case"mouseout":dn=null;break;case"pointerover":case"pointerout":ks.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":js.delete(t.pointerId)}}function qr(e,t,n,r,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},t!==null&&(t=Us(t),t!==null&&ec(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function Eg(e,t,n,r,s){switch(t){case"focusin":return cn=qr(cn,e,t,n,r,s),!0;case"dragenter":return un=qr(un,e,t,n,r,s),!0;case"mouseover":return dn=qr(dn,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return ks.set(i,qr(ks.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,js.set(i,qr(js.get(i)||null,e,t,n,r,s)),!0}return!1}function Sf(e){var t=In(e.target);if(t!==null){var n=er(t);if(n!==null){if(t=n.tag,t===13){if(t=uf(n),t!==null){e.blockedOn=t,bf(e.priority,function(){yf(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ki(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Ja(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Wa=r,n.target.dispatchEvent(r),Wa=null}else return t=Us(n),t!==null&&ec(t),e.blockedOn=n,!1;t.shift()}return!0}function bu(e,t,n){ki(e)&&n.delete(t)}function Ng(){Ya=!1,cn!==null&&ki(cn)&&(cn=null),un!==null&&ki(un)&&(un=null),dn!==null&&ki(dn)&&(dn=null),ks.forEach(bu),js.forEach(bu)}function Kr(e,t){e.blockedOn===t&&(e.blockedOn=null,Ya||(Ya=!0,st.unstable_scheduleCallback(st.unstable_NormalPriority,Ng)))}function Cs(e){function t(s){return Kr(s,e)}if(0<si.length){Kr(si[0],e);for(var n=1;n<si.length;n++){var r=si[n];r.blockedOn===e&&(r.blockedOn=null)}}for(cn!==null&&Kr(cn,e),un!==null&&Kr(un,e),dn!==null&&Kr(dn,e),ks.forEach(t),js.forEach(t),n=0;n<rn.length;n++)r=rn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<rn.length&&(n=rn[0],n.blockedOn===null);)Sf(n),n.blockedOn===null&&rn.shift()}var Pr=Kt.ReactCurrentBatchConfig,Bi=!0;function _g(e,t,n,r){var s=ne,i=Pr.transition;Pr.transition=null;try{ne=1,tc(e,t,n,r)}finally{ne=s,Pr.transition=i}}function Ag(e,t,n,r){var s=ne,i=Pr.transition;Pr.transition=null;try{ne=4,tc(e,t,n,r)}finally{ne=s,Pr.transition=i}}function tc(e,t,n,r){if(Bi){var s=Ja(e,t,n,r);if(s===null)oa(e,t,r,zi,n),wu(e,r);else if(Eg(s,e,t,n,r))r.stopPropagation();else if(wu(e,r),t&4&&-1<Tg.indexOf(e)){for(;s!==null;){var i=Us(s);if(i!==null&&vf(i),i=Ja(e,t,n,r),i===null&&oa(e,t,r,zi,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else oa(e,t,r,null,n)}}var zi=null;function Ja(e,t,n,r){if(zi=null,e=Yl(r),e=In(e),e!==null)if(t=er(e),t===null)e=null;else if(n=t.tag,n===13){if(e=uf(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return zi=e,null}function kf(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(vg()){case Jl:return 1;case mf:return 4;case Gi:case yg:return 16;case pf:return 536870912;default:return 16}default:return 16}}var on=null,nc=null,ji=null;function jf(){if(ji)return ji;var e,t=nc,n=t.length,r,s="value"in on?on.value:on.textContent,i=s.length;for(e=0;e<n&&t[e]===s[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===s[i-r];r++);return ji=s.slice(e,1<r?1-r:void 0)}function Ci(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ii(){return!0}function Su(){return!1}function at(e){function t(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ii:Su,this.isPropagationStopped=Su,this}return xe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ii)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ii)},persist:function(){},isPersistent:ii}),t}var zr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rc=at(zr),Hs=xe({},zr,{view:0,detail:0}),Mg=at(Hs),Yo,Jo,Qr,yo=xe({},Hs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:sc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Qr&&(Qr&&e.type==="mousemove"?(Yo=e.screenX-Qr.screenX,Jo=e.screenY-Qr.screenY):Jo=Yo=0,Qr=e),Yo)},movementY:function(e){return"movementY"in e?e.movementY:Jo}}),ku=at(yo),Dg=xe({},yo,{dataTransfer:0}),Lg=at(Dg),Rg=xe({},Hs,{relatedTarget:0}),Zo=at(Rg),Ig=xe({},zr,{animationName:0,elapsedTime:0,pseudoElement:0}),Og=at(Ig),Fg=xe({},zr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Gg=at(Fg),Vg=xe({},zr,{data:0}),ju=at(Vg),Bg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Hg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ug(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Hg[e])?!!t[e]:!1}function sc(){return Ug}var $g=xe({},Hs,{key:function(e){if(e.key){var t=Bg[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ci(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?zg[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:sc,charCode:function(e){return e.type==="keypress"?Ci(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ci(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Wg=at($g),qg=xe({},yo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Cu=at(qg),Kg=xe({},Hs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:sc}),Qg=at(Kg),Xg=xe({},zr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Yg=at(Xg),Jg=xe({},yo,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Zg=at(Jg),ex=[9,13,27,32],ic=Ht&&"CompositionEvent"in window,ls=null;Ht&&"documentMode"in document&&(ls=document.documentMode);var tx=Ht&&"TextEvent"in window&&!ls,Cf=Ht&&(!ic||ls&&8<ls&&11>=ls),Pu=String.fromCharCode(32),Tu=!1;function Pf(e,t){switch(e){case"keyup":return ex.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Tf(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var lr=!1;function nx(e,t){switch(e){case"compositionend":return Tf(t);case"keypress":return t.which!==32?null:(Tu=!0,Pu);case"textInput":return e=t.data,e===Pu&&Tu?null:e;default:return null}}function rx(e,t){if(lr)return e==="compositionend"||!ic&&Pf(e,t)?(e=jf(),ji=nc=on=null,lr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Cf&&t.locale!=="ko"?null:t.data;default:return null}}var sx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Eu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!sx[e.type]:t==="textarea"}function Ef(e,t,n,r){sf(r),t=Hi(t,"onChange"),0<t.length&&(n=new rc("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var cs=null,Ps=null;function ix(e){Gf(e,0)}function wo(e){var t=dr(e);if(Yh(t))return e}function ox(e,t){if(e==="change")return t}var Nf=!1;if(Ht){var ea;if(Ht){var ta="oninput"in document;if(!ta){var Nu=document.createElement("div");Nu.setAttribute("oninput","return;"),ta=typeof Nu.oninput=="function"}ea=ta}else ea=!1;Nf=ea&&(!document.documentMode||9<document.documentMode)}function _u(){cs&&(cs.detachEvent("onpropertychange",_f),Ps=cs=null)}function _f(e){if(e.propertyName==="value"&&wo(Ps)){var t=[];Ef(t,Ps,e,Yl(e)),cf(ix,t)}}function ax(e,t,n){e==="focusin"?(_u(),cs=t,Ps=n,cs.attachEvent("onpropertychange",_f)):e==="focusout"&&_u()}function lx(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return wo(Ps)}function cx(e,t){if(e==="click")return wo(t)}function ux(e,t){if(e==="input"||e==="change")return wo(t)}function dx(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var kt=typeof Object.is=="function"?Object.is:dx;function Ts(e,t){if(kt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!La.call(t,s)||!kt(e[s],t[s]))return!1}return!0}function Au(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Mu(e,t){var n=Au(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Au(n)}}function Af(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Af(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Mf(){for(var e=window,t=Ii();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Ii(e.document)}return t}function oc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function hx(e){var t=Mf(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Af(n.ownerDocument.documentElement,n)){if(r!==null&&oc(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=Mu(n,i);var o=Mu(n,r);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var fx=Ht&&"documentMode"in document&&11>=document.documentMode,cr=null,Za=null,us=null,el=!1;function Du(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;el||cr==null||cr!==Ii(r)||(r=cr,"selectionStart"in r&&oc(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),us&&Ts(us,r)||(us=r,r=Hi(Za,"onSelect"),0<r.length&&(t=new rc("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=cr)))}function oi(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ur={animationend:oi("Animation","AnimationEnd"),animationiteration:oi("Animation","AnimationIteration"),animationstart:oi("Animation","AnimationStart"),transitionend:oi("Transition","TransitionEnd")},na={},Df={};Ht&&(Df=document.createElement("div").style,"AnimationEvent"in window||(delete ur.animationend.animation,delete ur.animationiteration.animation,delete ur.animationstart.animation),"TransitionEvent"in window||delete ur.transitionend.transition);function bo(e){if(na[e])return na[e];if(!ur[e])return e;var t=ur[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Df)return na[e]=t[n];return e}var Lf=bo("animationend"),Rf=bo("animationiteration"),If=bo("animationstart"),Of=bo("transitionend"),Ff=new Map,Lu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Cn(e,t){Ff.set(e,t),Zn(t,[e])}for(var ra=0;ra<Lu.length;ra++){var sa=Lu[ra],mx=sa.toLowerCase(),px=sa[0].toUpperCase()+sa.slice(1);Cn(mx,"on"+px)}Cn(Lf,"onAnimationEnd");Cn(Rf,"onAnimationIteration");Cn(If,"onAnimationStart");Cn("dblclick","onDoubleClick");Cn("focusin","onFocus");Cn("focusout","onBlur");Cn(Of,"onTransitionEnd");_r("onMouseEnter",["mouseout","mouseover"]);_r("onMouseLeave",["mouseout","mouseover"]);_r("onPointerEnter",["pointerout","pointerover"]);_r("onPointerLeave",["pointerout","pointerover"]);Zn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Zn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Zn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Zn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Zn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Zn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ss="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gx=new Set("cancel close invalid load scroll toggle".split(" ").concat(ss));function Ru(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,mg(r,t,void 0,e),e.currentTarget=null}function Gf(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,u=a.currentTarget;if(a=a.listener,c!==i&&s.isPropagationStopped())break e;Ru(s,a,u),i=c}else for(o=0;o<r.length;o++){if(a=r[o],c=a.instance,u=a.currentTarget,a=a.listener,c!==i&&s.isPropagationStopped())break e;Ru(s,a,u),i=c}}}if(Fi)throw e=Qa,Fi=!1,Qa=null,e}function ce(e,t){var n=t[il];n===void 0&&(n=t[il]=new Set);var r=e+"__bubble";n.has(r)||(Vf(t,e,2,!1),n.add(r))}function ia(e,t,n){var r=0;t&&(r|=4),Vf(n,e,r,t)}var ai="_reactListening"+Math.random().toString(36).slice(2);function Es(e){if(!e[ai]){e[ai]=!0,Wh.forEach(function(n){n!=="selectionchange"&&(gx.has(n)||ia(n,!1,e),ia(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ai]||(t[ai]=!0,ia("selectionchange",!1,t))}}function Vf(e,t,n,r){switch(kf(t)){case 1:var s=_g;break;case 4:s=Ag;break;default:s=tc}n=s.bind(null,t,n,e),s=void 0,!Ka||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function oa(e,t,n,r,s){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;a!==null;){if(o=In(a),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}a=a.parentNode}}r=r.return}cf(function(){var u=i,h=Yl(n),d=[];e:{var m=Ff.get(e);if(m!==void 0){var v=rc,w=e;switch(e){case"keypress":if(Ci(n)===0)break e;case"keydown":case"keyup":v=Wg;break;case"focusin":w="focus",v=Zo;break;case"focusout":w="blur",v=Zo;break;case"beforeblur":case"afterblur":v=Zo;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=ku;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=Lg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=Qg;break;case Lf:case Rf:case If:v=Og;break;case Of:v=Yg;break;case"scroll":v=Mg;break;case"wheel":v=Zg;break;case"copy":case"cut":case"paste":v=Gg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=Cu}var b=(t&4)!==0,S=!b&&e==="scroll",p=b?m!==null?m+"Capture":null:m;b=[];for(var f=u,g;f!==null;){g=f;var y=g.stateNode;if(g.tag===5&&y!==null&&(g=y,p!==null&&(y=Ss(f,p),y!=null&&b.push(Ns(f,y,g)))),S)break;f=f.return}0<b.length&&(m=new v(m,w,null,n,h),d.push({event:m,listeners:b}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",v=e==="mouseout"||e==="pointerout",m&&n!==Wa&&(w=n.relatedTarget||n.fromElement)&&(In(w)||w[Ut]))break e;if((v||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,v?(w=n.relatedTarget||n.toElement,v=u,w=w?In(w):null,w!==null&&(S=er(w),w!==S||w.tag!==5&&w.tag!==6)&&(w=null)):(v=null,w=u),v!==w)){if(b=ku,y="onMouseLeave",p="onMouseEnter",f="mouse",(e==="pointerout"||e==="pointerover")&&(b=Cu,y="onPointerLeave",p="onPointerEnter",f="pointer"),S=v==null?m:dr(v),g=w==null?m:dr(w),m=new b(y,f+"leave",v,n,h),m.target=S,m.relatedTarget=g,y=null,In(h)===u&&(b=new b(p,f+"enter",w,n,h),b.target=g,b.relatedTarget=S,y=b),S=y,v&&w)t:{for(b=v,p=w,f=0,g=b;g;g=sr(g))f++;for(g=0,y=p;y;y=sr(y))g++;for(;0<f-g;)b=sr(b),f--;for(;0<g-f;)p=sr(p),g--;for(;f--;){if(b===p||p!==null&&b===p.alternate)break t;b=sr(b),p=sr(p)}b=null}else b=null;v!==null&&Iu(d,m,v,b,!1),w!==null&&S!==null&&Iu(d,S,w,b,!0)}}e:{if(m=u?dr(u):window,v=m.nodeName&&m.nodeName.toLowerCase(),v==="select"||v==="input"&&m.type==="file")var k=ox;else if(Eu(m))if(Nf)k=ux;else{k=lx;var j=ax}else(v=m.nodeName)&&v.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(k=cx);if(k&&(k=k(e,u))){Ef(d,k,n,h);break e}j&&j(e,m,u),e==="focusout"&&(j=m._wrapperState)&&j.controlled&&m.type==="number"&&Ba(m,"number",m.value)}switch(j=u?dr(u):window,e){case"focusin":(Eu(j)||j.contentEditable==="true")&&(cr=j,Za=u,us=null);break;case"focusout":us=Za=cr=null;break;case"mousedown":el=!0;break;case"contextmenu":case"mouseup":case"dragend":el=!1,Du(d,n,h);break;case"selectionchange":if(fx)break;case"keydown":case"keyup":Du(d,n,h)}var C;if(ic)e:{switch(e){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else lr?Pf(e,n)&&(P="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(P="onCompositionStart");P&&(Cf&&n.locale!=="ko"&&(lr||P!=="onCompositionStart"?P==="onCompositionEnd"&&lr&&(C=jf()):(on=h,nc="value"in on?on.value:on.textContent,lr=!0)),j=Hi(u,P),0<j.length&&(P=new ju(P,e,null,n,h),d.push({event:P,listeners:j}),C?P.data=C:(C=Tf(n),C!==null&&(P.data=C)))),(C=tx?nx(e,n):rx(e,n))&&(u=Hi(u,"onBeforeInput"),0<u.length&&(h=new ju("onBeforeInput","beforeinput",null,n,h),d.push({event:h,listeners:u}),h.data=C))}Gf(d,t)})}function Ns(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hi(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Ss(e,n),i!=null&&r.unshift(Ns(e,i,s)),i=Ss(e,t),i!=null&&r.push(Ns(e,i,s))),e=e.return}return r}function sr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Iu(e,t,n,r,s){for(var i=t._reactName,o=[];n!==null&&n!==r;){var a=n,c=a.alternate,u=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&u!==null&&(a=u,s?(c=Ss(n,i),c!=null&&o.unshift(Ns(n,c,a))):s||(c=Ss(n,i),c!=null&&o.push(Ns(n,c,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var xx=/\r\n?/g,vx=/\u0000|\uFFFD/g;function Ou(e){return(typeof e=="string"?e:""+e).replace(xx,`
`).replace(vx,"")}function li(e,t,n){if(t=Ou(t),Ou(e)!==t&&n)throw Error(D(425))}function Ui(){}var tl=null,nl=null;function rl(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var sl=typeof setTimeout=="function"?setTimeout:void 0,yx=typeof clearTimeout=="function"?clearTimeout:void 0,Fu=typeof Promise=="function"?Promise:void 0,wx=typeof queueMicrotask=="function"?queueMicrotask:typeof Fu<"u"?function(e){return Fu.resolve(null).then(e).catch(bx)}:sl;function bx(e){setTimeout(function(){throw e})}function aa(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),Cs(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Cs(t)}function hn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Gu(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Hr=Math.random().toString(36).slice(2),Tt="__reactFiber$"+Hr,_s="__reactProps$"+Hr,Ut="__reactContainer$"+Hr,il="__reactEvents$"+Hr,Sx="__reactListeners$"+Hr,kx="__reactHandles$"+Hr;function In(e){var t=e[Tt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ut]||n[Tt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Gu(e);e!==null;){if(n=e[Tt])return n;e=Gu(e)}return t}e=n,n=e.parentNode}return null}function Us(e){return e=e[Tt]||e[Ut],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function dr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(D(33))}function So(e){return e[_s]||null}var ol=[],hr=-1;function Pn(e){return{current:e}}function de(e){0>hr||(e.current=ol[hr],ol[hr]=null,hr--)}function oe(e,t){hr++,ol[hr]=e.current,e.current=t}var wn={},Be=Pn(wn),Xe=Pn(!1),zn=wn;function Ar(e,t){var n=e.type.contextTypes;if(!n)return wn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Ye(e){return e=e.childContextTypes,e!=null}function $i(){de(Xe),de(Be)}function Vu(e,t,n){if(Be.current!==wn)throw Error(D(168));oe(Be,t),oe(Xe,n)}function Bf(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(D(108,ag(e)||"Unknown",s));return xe({},n,r)}function Wi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||wn,zn=Be.current,oe(Be,e),oe(Xe,Xe.current),!0}function Bu(e,t,n){var r=e.stateNode;if(!r)throw Error(D(169));n?(e=Bf(e,t,zn),r.__reactInternalMemoizedMergedChildContext=e,de(Xe),de(Be),oe(Be,e)):de(Xe),oe(Xe,n)}var Dt=null,ko=!1,la=!1;function zf(e){Dt===null?Dt=[e]:Dt.push(e)}function jx(e){ko=!0,zf(e)}function Tn(){if(!la&&Dt!==null){la=!0;var e=0,t=ne;try{var n=Dt;for(ne=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Dt=null,ko=!1}catch(s){throw Dt!==null&&(Dt=Dt.slice(e+1)),ff(Jl,Tn),s}finally{ne=t,la=!1}}return null}var fr=[],mr=0,qi=null,Ki=0,ut=[],dt=0,Hn=null,Rt=1,It="";function An(e,t){fr[mr++]=Ki,fr[mr++]=qi,qi=e,Ki=t}function Hf(e,t,n){ut[dt++]=Rt,ut[dt++]=It,ut[dt++]=Hn,Hn=e;var r=Rt;e=It;var s=32-bt(r)-1;r&=~(1<<s),n+=1;var i=32-bt(t)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Rt=1<<32-bt(t)+s|n<<s|r,It=i+e}else Rt=1<<i|n<<s|r,It=e}function ac(e){e.return!==null&&(An(e,1),Hf(e,1,0))}function lc(e){for(;e===qi;)qi=fr[--mr],fr[mr]=null,Ki=fr[--mr],fr[mr]=null;for(;e===Hn;)Hn=ut[--dt],ut[dt]=null,It=ut[--dt],ut[dt]=null,Rt=ut[--dt],ut[dt]=null}var rt=null,nt=null,fe=!1,wt=null;function Uf(e,t){var n=ht(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function zu(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,rt=e,nt=hn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,rt=e,nt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Hn!==null?{id:Rt,overflow:It}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=ht(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,rt=e,nt=null,!0):!1;default:return!1}}function al(e){return(e.mode&1)!==0&&(e.flags&128)===0}function ll(e){if(fe){var t=nt;if(t){var n=t;if(!zu(e,t)){if(al(e))throw Error(D(418));t=hn(n.nextSibling);var r=rt;t&&zu(e,t)?Uf(r,n):(e.flags=e.flags&-4097|2,fe=!1,rt=e)}}else{if(al(e))throw Error(D(418));e.flags=e.flags&-4097|2,fe=!1,rt=e}}}function Hu(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;rt=e}function ci(e){if(e!==rt)return!1;if(!fe)return Hu(e),fe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!rl(e.type,e.memoizedProps)),t&&(t=nt)){if(al(e))throw $f(),Error(D(418));for(;t;)Uf(e,t),t=hn(t.nextSibling)}if(Hu(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(D(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){nt=hn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}nt=null}}else nt=rt?hn(e.stateNode.nextSibling):null;return!0}function $f(){for(var e=nt;e;)e=hn(e.nextSibling)}function Mr(){nt=rt=null,fe=!1}function cc(e){wt===null?wt=[e]:wt.push(e)}var Cx=Kt.ReactCurrentBatchConfig;function Xr(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(D(309));var r=n.stateNode}if(!r)throw Error(D(147,e));var s=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(D(284));if(!n._owner)throw Error(D(290,e))}return e}function ui(e,t){throw e=Object.prototype.toString.call(t),Error(D(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Uu(e){var t=e._init;return t(e._payload)}function Wf(e){function t(p,f){if(e){var g=p.deletions;g===null?(p.deletions=[f],p.flags|=16):g.push(f)}}function n(p,f){if(!e)return null;for(;f!==null;)t(p,f),f=f.sibling;return null}function r(p,f){for(p=new Map;f!==null;)f.key!==null?p.set(f.key,f):p.set(f.index,f),f=f.sibling;return p}function s(p,f){return p=gn(p,f),p.index=0,p.sibling=null,p}function i(p,f,g){return p.index=g,e?(g=p.alternate,g!==null?(g=g.index,g<f?(p.flags|=2,f):g):(p.flags|=2,f)):(p.flags|=1048576,f)}function o(p){return e&&p.alternate===null&&(p.flags|=2),p}function a(p,f,g,y){return f===null||f.tag!==6?(f=pa(g,p.mode,y),f.return=p,f):(f=s(f,g),f.return=p,f)}function c(p,f,g,y){var k=g.type;return k===ar?h(p,f,g.props.children,y,g.key):f!==null&&(f.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===en&&Uu(k)===f.type)?(y=s(f,g.props),y.ref=Xr(p,f,g),y.return=p,y):(y=Mi(g.type,g.key,g.props,null,p.mode,y),y.ref=Xr(p,f,g),y.return=p,y)}function u(p,f,g,y){return f===null||f.tag!==4||f.stateNode.containerInfo!==g.containerInfo||f.stateNode.implementation!==g.implementation?(f=ga(g,p.mode,y),f.return=p,f):(f=s(f,g.children||[]),f.return=p,f)}function h(p,f,g,y,k){return f===null||f.tag!==7?(f=Bn(g,p.mode,y,k),f.return=p,f):(f=s(f,g),f.return=p,f)}function d(p,f,g){if(typeof f=="string"&&f!==""||typeof f=="number")return f=pa(""+f,p.mode,g),f.return=p,f;if(typeof f=="object"&&f!==null){switch(f.$$typeof){case Zs:return g=Mi(f.type,f.key,f.props,null,p.mode,g),g.ref=Xr(p,null,f),g.return=p,g;case or:return f=ga(f,p.mode,g),f.return=p,f;case en:var y=f._init;return d(p,y(f._payload),g)}if(ns(f)||$r(f))return f=Bn(f,p.mode,g,null),f.return=p,f;ui(p,f)}return null}function m(p,f,g,y){var k=f!==null?f.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return k!==null?null:a(p,f,""+g,y);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Zs:return g.key===k?c(p,f,g,y):null;case or:return g.key===k?u(p,f,g,y):null;case en:return k=g._init,m(p,f,k(g._payload),y)}if(ns(g)||$r(g))return k!==null?null:h(p,f,g,y,null);ui(p,g)}return null}function v(p,f,g,y,k){if(typeof y=="string"&&y!==""||typeof y=="number")return p=p.get(g)||null,a(f,p,""+y,k);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Zs:return p=p.get(y.key===null?g:y.key)||null,c(f,p,y,k);case or:return p=p.get(y.key===null?g:y.key)||null,u(f,p,y,k);case en:var j=y._init;return v(p,f,g,j(y._payload),k)}if(ns(y)||$r(y))return p=p.get(g)||null,h(f,p,y,k,null);ui(f,y)}return null}function w(p,f,g,y){for(var k=null,j=null,C=f,P=f=0,N=null;C!==null&&P<g.length;P++){C.index>P?(N=C,C=null):N=C.sibling;var E=m(p,C,g[P],y);if(E===null){C===null&&(C=N);break}e&&C&&E.alternate===null&&t(p,C),f=i(E,f,P),j===null?k=E:j.sibling=E,j=E,C=N}if(P===g.length)return n(p,C),fe&&An(p,P),k;if(C===null){for(;P<g.length;P++)C=d(p,g[P],y),C!==null&&(f=i(C,f,P),j===null?k=C:j.sibling=C,j=C);return fe&&An(p,P),k}for(C=r(p,C);P<g.length;P++)N=v(C,p,P,g[P],y),N!==null&&(e&&N.alternate!==null&&C.delete(N.key===null?P:N.key),f=i(N,f,P),j===null?k=N:j.sibling=N,j=N);return e&&C.forEach(function(V){return t(p,V)}),fe&&An(p,P),k}function b(p,f,g,y){var k=$r(g);if(typeof k!="function")throw Error(D(150));if(g=k.call(g),g==null)throw Error(D(151));for(var j=k=null,C=f,P=f=0,N=null,E=g.next();C!==null&&!E.done;P++,E=g.next()){C.index>P?(N=C,C=null):N=C.sibling;var V=m(p,C,E.value,y);if(V===null){C===null&&(C=N);break}e&&C&&V.alternate===null&&t(p,C),f=i(V,f,P),j===null?k=V:j.sibling=V,j=V,C=N}if(E.done)return n(p,C),fe&&An(p,P),k;if(C===null){for(;!E.done;P++,E=g.next())E=d(p,E.value,y),E!==null&&(f=i(E,f,P),j===null?k=E:j.sibling=E,j=E);return fe&&An(p,P),k}for(C=r(p,C);!E.done;P++,E=g.next())E=v(C,p,P,E.value,y),E!==null&&(e&&E.alternate!==null&&C.delete(E.key===null?P:E.key),f=i(E,f,P),j===null?k=E:j.sibling=E,j=E);return e&&C.forEach(function(K){return t(p,K)}),fe&&An(p,P),k}function S(p,f,g,y){if(typeof g=="object"&&g!==null&&g.type===ar&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case Zs:e:{for(var k=g.key,j=f;j!==null;){if(j.key===k){if(k=g.type,k===ar){if(j.tag===7){n(p,j.sibling),f=s(j,g.props.children),f.return=p,p=f;break e}}else if(j.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===en&&Uu(k)===j.type){n(p,j.sibling),f=s(j,g.props),f.ref=Xr(p,j,g),f.return=p,p=f;break e}n(p,j);break}else t(p,j);j=j.sibling}g.type===ar?(f=Bn(g.props.children,p.mode,y,g.key),f.return=p,p=f):(y=Mi(g.type,g.key,g.props,null,p.mode,y),y.ref=Xr(p,f,g),y.return=p,p=y)}return o(p);case or:e:{for(j=g.key;f!==null;){if(f.key===j)if(f.tag===4&&f.stateNode.containerInfo===g.containerInfo&&f.stateNode.implementation===g.implementation){n(p,f.sibling),f=s(f,g.children||[]),f.return=p,p=f;break e}else{n(p,f);break}else t(p,f);f=f.sibling}f=ga(g,p.mode,y),f.return=p,p=f}return o(p);case en:return j=g._init,S(p,f,j(g._payload),y)}if(ns(g))return w(p,f,g,y);if($r(g))return b(p,f,g,y);ui(p,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,f!==null&&f.tag===6?(n(p,f.sibling),f=s(f,g),f.return=p,p=f):(n(p,f),f=pa(g,p.mode,y),f.return=p,p=f),o(p)):n(p,f)}return S}var Dr=Wf(!0),qf=Wf(!1),Qi=Pn(null),Xi=null,pr=null,uc=null;function dc(){uc=pr=Xi=null}function hc(e){var t=Qi.current;de(Qi),e._currentValue=t}function cl(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Tr(e,t){Xi=e,uc=pr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Qe=!0),e.firstContext=null)}function mt(e){var t=e._currentValue;if(uc!==e)if(e={context:e,memoizedValue:t,next:null},pr===null){if(Xi===null)throw Error(D(308));pr=e,Xi.dependencies={lanes:0,firstContext:e}}else pr=pr.next=e;return t}var On=null;function fc(e){On===null?On=[e]:On.push(e)}function Kf(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,fc(t)):(n.next=s.next,s.next=n),t.interleaved=n,$t(e,r)}function $t(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var tn=!1;function mc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Qf(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Vt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function fn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Y&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,$t(e,n)}return s=r.interleaved,s===null?(t.next=t,fc(r)):(t.next=s.next,s.next=t),r.interleaved=t,$t(e,n)}function Pi(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Zl(e,n)}}function $u(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=t:i=i.next=t}else s=i=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Yi(e,t,n,r){var s=e.updateQueue;tn=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var c=a,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var h=e.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=u:a.next=u,h.lastBaseUpdate=c))}if(i!==null){var d=s.baseState;o=0,h=u=c=null,a=i;do{var m=a.lane,v=a.eventTime;if((r&m)===m){h!==null&&(h=h.next={eventTime:v,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var w=e,b=a;switch(m=t,v=n,b.tag){case 1:if(w=b.payload,typeof w=="function"){d=w.call(v,d,m);break e}d=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=b.payload,m=typeof w=="function"?w.call(v,d,m):w,m==null)break e;d=xe({},d,m);break e;case 2:tn=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,m=s.effects,m===null?s.effects=[a]:m.push(a))}else v={eventTime:v,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(u=h=v,c=d):h=h.next=v,o|=m;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;m=a,a=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(1);if(h===null&&(c=d),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=h,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);$n|=o,e.lanes=o,e.memoizedState=d}}function Wu(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(D(191,s));s.call(r)}}}var $s={},_t=Pn($s),As=Pn($s),Ms=Pn($s);function Fn(e){if(e===$s)throw Error(D(174));return e}function pc(e,t){switch(oe(Ms,t),oe(As,e),oe(_t,$s),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ha(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ha(t,e)}de(_t),oe(_t,t)}function Lr(){de(_t),de(As),de(Ms)}function Xf(e){Fn(Ms.current);var t=Fn(_t.current),n=Ha(t,e.type);t!==n&&(oe(As,e),oe(_t,n))}function gc(e){As.current===e&&(de(_t),de(As))}var me=Pn(0);function Ji(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ca=[];function xc(){for(var e=0;e<ca.length;e++)ca[e]._workInProgressVersionPrimary=null;ca.length=0}var Ti=Kt.ReactCurrentDispatcher,ua=Kt.ReactCurrentBatchConfig,Un=0,ge=null,je=null,Ne=null,Zi=!1,ds=!1,Ds=0,Px=0;function Ie(){throw Error(D(321))}function vc(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!kt(e[n],t[n]))return!1;return!0}function yc(e,t,n,r,s,i){if(Un=i,ge=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ti.current=e===null||e.memoizedState===null?_x:Ax,e=n(r,s),ds){i=0;do{if(ds=!1,Ds=0,25<=i)throw Error(D(301));i+=1,Ne=je=null,t.updateQueue=null,Ti.current=Mx,e=n(r,s)}while(ds)}if(Ti.current=eo,t=je!==null&&je.next!==null,Un=0,Ne=je=ge=null,Zi=!1,t)throw Error(D(300));return e}function wc(){var e=Ds!==0;return Ds=0,e}function Pt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ne===null?ge.memoizedState=Ne=e:Ne=Ne.next=e,Ne}function pt(){if(je===null){var e=ge.alternate;e=e!==null?e.memoizedState:null}else e=je.next;var t=Ne===null?ge.memoizedState:Ne.next;if(t!==null)Ne=t,je=e;else{if(e===null)throw Error(D(310));je=e,e={memoizedState:je.memoizedState,baseState:je.baseState,baseQueue:je.baseQueue,queue:je.queue,next:null},Ne===null?ge.memoizedState=Ne=e:Ne=Ne.next=e}return Ne}function Ls(e,t){return typeof t=="function"?t(e):t}function da(e){var t=pt(),n=t.queue;if(n===null)throw Error(D(311));n.lastRenderedReducer=e;var r=je,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,c=null,u=i;do{var h=u.lane;if((Un&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(a=c=d,o=r):c=c.next=d,ge.lanes|=h,$n|=h}u=u.next}while(u!==null&&u!==i);c===null?o=r:c.next=a,kt(r,t.memoizedState)||(Qe=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do i=s.lane,ge.lanes|=i,$n|=i,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ha(e){var t=pt(),n=t.queue;if(n===null)throw Error(D(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);kt(i,t.memoizedState)||(Qe=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function Yf(){}function Jf(e,t){var n=ge,r=pt(),s=t(),i=!kt(r.memoizedState,s);if(i&&(r.memoizedState=s,Qe=!0),r=r.queue,bc(tm.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||Ne!==null&&Ne.memoizedState.tag&1){if(n.flags|=2048,Rs(9,em.bind(null,n,r,s,t),void 0,null),_e===null)throw Error(D(349));Un&30||Zf(n,t,s)}return s}function Zf(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=ge.updateQueue,t===null?(t={lastEffect:null,stores:null},ge.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function em(e,t,n,r){t.value=n,t.getSnapshot=r,nm(t)&&rm(e)}function tm(e,t,n){return n(function(){nm(t)&&rm(e)})}function nm(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!kt(e,n)}catch{return!0}}function rm(e){var t=$t(e,1);t!==null&&St(t,e,1,-1)}function qu(e){var t=Pt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ls,lastRenderedState:e},t.queue=e,e=e.dispatch=Nx.bind(null,ge,e),[t.memoizedState,e]}function Rs(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=ge.updateQueue,t===null?(t={lastEffect:null,stores:null},ge.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function sm(){return pt().memoizedState}function Ei(e,t,n,r){var s=Pt();ge.flags|=e,s.memoizedState=Rs(1|t,n,void 0,r===void 0?null:r)}function jo(e,t,n,r){var s=pt();r=r===void 0?null:r;var i=void 0;if(je!==null){var o=je.memoizedState;if(i=o.destroy,r!==null&&vc(r,o.deps)){s.memoizedState=Rs(t,n,i,r);return}}ge.flags|=e,s.memoizedState=Rs(1|t,n,i,r)}function Ku(e,t){return Ei(8390656,8,e,t)}function bc(e,t){return jo(2048,8,e,t)}function im(e,t){return jo(4,2,e,t)}function om(e,t){return jo(4,4,e,t)}function am(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function lm(e,t,n){return n=n!=null?n.concat([e]):null,jo(4,4,am.bind(null,t,e),n)}function Sc(){}function cm(e,t){var n=pt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&vc(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function um(e,t){var n=pt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&vc(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function dm(e,t,n){return Un&21?(kt(n,t)||(n=gf(),ge.lanes|=n,$n|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Qe=!0),e.memoizedState=n)}function Tx(e,t){var n=ne;ne=n!==0&&4>n?n:4,e(!0);var r=ua.transition;ua.transition={};try{e(!1),t()}finally{ne=n,ua.transition=r}}function hm(){return pt().memoizedState}function Ex(e,t,n){var r=pn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},fm(e))mm(t,n);else if(n=Kf(e,t,n,r),n!==null){var s=$e();St(n,e,r,s),pm(n,t,r)}}function Nx(e,t,n){var r=pn(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(fm(e))mm(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,kt(a,o)){var c=t.interleaved;c===null?(s.next=s,fc(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}n=Kf(e,t,s,r),n!==null&&(s=$e(),St(n,e,r,s),pm(n,t,r))}}function fm(e){var t=e.alternate;return e===ge||t!==null&&t===ge}function mm(e,t){ds=Zi=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function pm(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Zl(e,n)}}var eo={readContext:mt,useCallback:Ie,useContext:Ie,useEffect:Ie,useImperativeHandle:Ie,useInsertionEffect:Ie,useLayoutEffect:Ie,useMemo:Ie,useReducer:Ie,useRef:Ie,useState:Ie,useDebugValue:Ie,useDeferredValue:Ie,useTransition:Ie,useMutableSource:Ie,useSyncExternalStore:Ie,useId:Ie,unstable_isNewReconciler:!1},_x={readContext:mt,useCallback:function(e,t){return Pt().memoizedState=[e,t===void 0?null:t],e},useContext:mt,useEffect:Ku,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Ei(4194308,4,am.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ei(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ei(4,2,e,t)},useMemo:function(e,t){var n=Pt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Pt();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ex.bind(null,ge,e),[r.memoizedState,e]},useRef:function(e){var t=Pt();return e={current:e},t.memoizedState=e},useState:qu,useDebugValue:Sc,useDeferredValue:function(e){return Pt().memoizedState=e},useTransition:function(){var e=qu(!1),t=e[0];return e=Tx.bind(null,e[1]),Pt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ge,s=Pt();if(fe){if(n===void 0)throw Error(D(407));n=n()}else{if(n=t(),_e===null)throw Error(D(349));Un&30||Zf(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,Ku(tm.bind(null,r,i,e),[e]),r.flags|=2048,Rs(9,em.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=Pt(),t=_e.identifierPrefix;if(fe){var n=It,r=Rt;n=(r&~(1<<32-bt(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Ds++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Px++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Ax={readContext:mt,useCallback:cm,useContext:mt,useEffect:bc,useImperativeHandle:lm,useInsertionEffect:im,useLayoutEffect:om,useMemo:um,useReducer:da,useRef:sm,useState:function(){return da(Ls)},useDebugValue:Sc,useDeferredValue:function(e){var t=pt();return dm(t,je.memoizedState,e)},useTransition:function(){var e=da(Ls)[0],t=pt().memoizedState;return[e,t]},useMutableSource:Yf,useSyncExternalStore:Jf,useId:hm,unstable_isNewReconciler:!1},Mx={readContext:mt,useCallback:cm,useContext:mt,useEffect:bc,useImperativeHandle:lm,useInsertionEffect:im,useLayoutEffect:om,useMemo:um,useReducer:ha,useRef:sm,useState:function(){return ha(Ls)},useDebugValue:Sc,useDeferredValue:function(e){var t=pt();return je===null?t.memoizedState=e:dm(t,je.memoizedState,e)},useTransition:function(){var e=ha(Ls)[0],t=pt().memoizedState;return[e,t]},useMutableSource:Yf,useSyncExternalStore:Jf,useId:hm,unstable_isNewReconciler:!1};function vt(e,t){if(e&&e.defaultProps){t=xe({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function ul(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:xe({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Co={isMounted:function(e){return(e=e._reactInternals)?er(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=$e(),s=pn(e),i=Vt(r,s);i.payload=t,n!=null&&(i.callback=n),t=fn(e,i,s),t!==null&&(St(t,e,s,r),Pi(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=$e(),s=pn(e),i=Vt(r,s);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=fn(e,i,s),t!==null&&(St(t,e,s,r),Pi(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=$e(),r=pn(e),s=Vt(n,r);s.tag=2,t!=null&&(s.callback=t),t=fn(e,s,r),t!==null&&(St(t,e,r,n),Pi(t,e,r))}};function Qu(e,t,n,r,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,o):t.prototype&&t.prototype.isPureReactComponent?!Ts(n,r)||!Ts(s,i):!0}function gm(e,t,n){var r=!1,s=wn,i=t.contextType;return typeof i=="object"&&i!==null?i=mt(i):(s=Ye(t)?zn:Be.current,r=t.contextTypes,i=(r=r!=null)?Ar(e,s):wn),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Co,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function Xu(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Co.enqueueReplaceState(t,t.state,null)}function dl(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},mc(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=mt(i):(i=Ye(t)?zn:Be.current,s.context=Ar(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(ul(e,t,i,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Co.enqueueReplaceState(s,s.state,null),Yi(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Rr(e,t){try{var n="",r=t;do n+=og(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function fa(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function hl(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Dx=typeof WeakMap=="function"?WeakMap:Map;function xm(e,t,n){n=Vt(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){no||(no=!0,Sl=r),hl(e,t)},n}function vm(e,t,n){n=Vt(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){hl(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){hl(e,t),typeof r!="function"&&(mn===null?mn=new Set([this]):mn.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function Yu(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Dx;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=qx.bind(null,e,t,n),t.then(e,e))}function Ju(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Zu(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Vt(-1,1),t.tag=2,fn(n,t,1))),n.lanes|=1),e)}var Lx=Kt.ReactCurrentOwner,Qe=!1;function Ue(e,t,n,r){t.child=e===null?qf(t,null,n,r):Dr(t,e.child,n,r)}function ed(e,t,n,r,s){n=n.render;var i=t.ref;return Tr(t,s),r=yc(e,t,n,r,i,s),n=wc(),e!==null&&!Qe?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Wt(e,t,s)):(fe&&n&&ac(t),t.flags|=1,Ue(e,t,r,s),t.child)}function td(e,t,n,r,s){if(e===null){var i=n.type;return typeof i=="function"&&!_c(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,ym(e,t,i,r,s)):(e=Mi(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Ts,n(o,r)&&e.ref===t.ref)return Wt(e,t,s)}return t.flags|=1,e=gn(i,r),e.ref=t.ref,e.return=t,t.child=e}function ym(e,t,n,r,s){if(e!==null){var i=e.memoizedProps;if(Ts(i,r)&&e.ref===t.ref)if(Qe=!1,t.pendingProps=r=i,(e.lanes&s)!==0)e.flags&131072&&(Qe=!0);else return t.lanes=e.lanes,Wt(e,t,s)}return fl(e,t,n,r,s)}function wm(e,t,n){var r=t.pendingProps,s=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},oe(xr,tt),tt|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,oe(xr,tt),tt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,oe(xr,tt),tt|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,oe(xr,tt),tt|=r;return Ue(e,t,s,n),t.child}function bm(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function fl(e,t,n,r,s){var i=Ye(n)?zn:Be.current;return i=Ar(t,i),Tr(t,s),n=yc(e,t,n,r,i,s),r=wc(),e!==null&&!Qe?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Wt(e,t,s)):(fe&&r&&ac(t),t.flags|=1,Ue(e,t,n,s),t.child)}function nd(e,t,n,r,s){if(Ye(n)){var i=!0;Wi(t)}else i=!1;if(Tr(t,s),t.stateNode===null)Ni(e,t),gm(t,n,r),dl(t,n,r,s),r=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=mt(u):(u=Ye(n)?zn:Be.current,u=Ar(t,u));var h=n.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||c!==u)&&Xu(t,o,r,u),tn=!1;var m=t.memoizedState;o.state=m,Yi(t,r,o,s),c=t.memoizedState,a!==r||m!==c||Xe.current||tn?(typeof h=="function"&&(ul(t,n,h,r),c=t.memoizedState),(a=tn||Qu(t,n,a,r,m,c,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),o.props=r,o.state=c,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Qf(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:vt(t.type,a),o.props=u,d=t.pendingProps,m=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=mt(c):(c=Ye(n)?zn:Be.current,c=Ar(t,c));var v=n.getDerivedStateFromProps;(h=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||m!==c)&&Xu(t,o,r,c),tn=!1,m=t.memoizedState,o.state=m,Yi(t,r,o,s);var w=t.memoizedState;a!==d||m!==w||Xe.current||tn?(typeof v=="function"&&(ul(t,n,v,r),w=t.memoizedState),(u=tn||Qu(t,n,u,r,m,w,c)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,w,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,w,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=w),o.props=r,o.state=w,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),r=!1)}return ml(e,t,n,r,i,s)}function ml(e,t,n,r,s,i){bm(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return s&&Bu(t,n,!1),Wt(e,t,i);r=t.stateNode,Lx.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=Dr(t,e.child,null,i),t.child=Dr(t,null,a,i)):Ue(e,t,a,i),t.memoizedState=r.state,s&&Bu(t,n,!0),t.child}function Sm(e){var t=e.stateNode;t.pendingContext?Vu(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Vu(e,t.context,!1),pc(e,t.containerInfo)}function rd(e,t,n,r,s){return Mr(),cc(s),t.flags|=256,Ue(e,t,n,r),t.child}var pl={dehydrated:null,treeContext:null,retryLane:0};function gl(e){return{baseLanes:e,cachePool:null,transitions:null}}function km(e,t,n){var r=t.pendingProps,s=me.current,i=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(s&2)!==0),a?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),oe(me,s&1),e===null)return ll(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,i?(r=t.mode,i=t.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Eo(o,r,0,null),e=Bn(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=gl(n),t.memoizedState=pl,e):kc(t,o));if(s=e.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return Rx(e,t,o,r,a,s,n);if(i){i=r.fallback,o=t.mode,s=e.child,a=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=gn(s,c),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=gn(a,i):(i=Bn(i,o,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,o=e.child.memoizedState,o=o===null?gl(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~n,t.memoizedState=pl,r}return i=e.child,e=i.sibling,r=gn(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function kc(e,t){return t=Eo({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function di(e,t,n,r){return r!==null&&cc(r),Dr(t,e.child,null,n),e=kc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Rx(e,t,n,r,s,i,o){if(n)return t.flags&256?(t.flags&=-257,r=fa(Error(D(422))),di(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,s=t.mode,r=Eo({mode:"visible",children:r.children},s,0,null),i=Bn(i,s,o,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&Dr(t,e.child,null,o),t.child.memoizedState=gl(o),t.memoizedState=pl,i);if(!(t.mode&1))return di(e,t,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(D(419)),r=fa(i,r,void 0),di(e,t,o,r)}if(a=(o&e.childLanes)!==0,Qe||a){if(r=_e,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,$t(e,s),St(r,e,s,-1))}return Nc(),r=fa(Error(D(421))),di(e,t,o,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=Kx.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,nt=hn(s.nextSibling),rt=t,fe=!0,wt=null,e!==null&&(ut[dt++]=Rt,ut[dt++]=It,ut[dt++]=Hn,Rt=e.id,It=e.overflow,Hn=t),t=kc(t,r.children),t.flags|=4096,t)}function sd(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),cl(e.return,t,n)}function ma(e,t,n,r,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function jm(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(Ue(e,t,r.children,n),r=me.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&sd(e,n,t);else if(e.tag===19)sd(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(oe(me,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&Ji(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),ma(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Ji(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}ma(t,!0,n,null,i);break;case"together":ma(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ni(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wt(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),$n|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(D(153));if(t.child!==null){for(e=t.child,n=gn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=gn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Ix(e,t,n){switch(t.tag){case 3:Sm(t),Mr();break;case 5:Xf(t);break;case 1:Ye(t.type)&&Wi(t);break;case 4:pc(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;oe(Qi,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(oe(me,me.current&1),t.flags|=128,null):n&t.child.childLanes?km(e,t,n):(oe(me,me.current&1),e=Wt(e,t,n),e!==null?e.sibling:null);oe(me,me.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return jm(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),oe(me,me.current),r)break;return null;case 22:case 23:return t.lanes=0,wm(e,t,n)}return Wt(e,t,n)}var Cm,xl,Pm,Tm;Cm=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};xl=function(){};Pm=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Fn(_t.current);var i=null;switch(n){case"input":s=Ga(e,s),r=Ga(e,r),i=[];break;case"select":s=xe({},s,{value:void 0}),r=xe({},r,{value:void 0}),i=[];break;case"textarea":s=za(e,s),r=za(e,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Ui)}Ua(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ws.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(a=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==a&&(c!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ws.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&ce("scroll",e),i||a===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};Tm=function(e,t,n,r){n!==r&&(t.flags|=4)};function Yr(e,t){if(!fe)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Oe(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ox(e,t,n){var r=t.pendingProps;switch(lc(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Oe(t),null;case 1:return Ye(t.type)&&$i(),Oe(t),null;case 3:return r=t.stateNode,Lr(),de(Xe),de(Be),xc(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(ci(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,wt!==null&&(Cl(wt),wt=null))),xl(e,t),Oe(t),null;case 5:gc(t);var s=Fn(Ms.current);if(n=t.type,e!==null&&t.stateNode!=null)Pm(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(D(166));return Oe(t),null}if(e=Fn(_t.current),ci(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[Tt]=t,r[_s]=i,e=(t.mode&1)!==0,n){case"dialog":ce("cancel",r),ce("close",r);break;case"iframe":case"object":case"embed":ce("load",r);break;case"video":case"audio":for(s=0;s<ss.length;s++)ce(ss[s],r);break;case"source":ce("error",r);break;case"img":case"image":case"link":ce("error",r),ce("load",r);break;case"details":ce("toggle",r);break;case"input":fu(r,i),ce("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ce("invalid",r);break;case"textarea":pu(r,i),ce("invalid",r)}Ua(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&li(r.textContent,a,e),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&li(r.textContent,a,e),s=["children",""+a]):ws.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ce("scroll",r)}switch(n){case"input":ei(r),mu(r,i,!0);break;case"textarea":ei(r),gu(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Ui)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=ef(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[Tt]=t,e[_s]=r,Cm(e,t,!1,!1),t.stateNode=e;e:{switch(o=$a(n,r),n){case"dialog":ce("cancel",e),ce("close",e),s=r;break;case"iframe":case"object":case"embed":ce("load",e),s=r;break;case"video":case"audio":for(s=0;s<ss.length;s++)ce(ss[s],e);s=r;break;case"source":ce("error",e),s=r;break;case"img":case"image":case"link":ce("error",e),ce("load",e),s=r;break;case"details":ce("toggle",e),s=r;break;case"input":fu(e,r),s=Ga(e,r),ce("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=xe({},r,{value:void 0}),ce("invalid",e);break;case"textarea":pu(e,r),s=za(e,r),ce("invalid",e);break;default:s=r}Ua(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var c=a[i];i==="style"?rf(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&tf(e,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&bs(e,c):typeof c=="number"&&bs(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ws.hasOwnProperty(i)?c!=null&&i==="onScroll"&&ce("scroll",e):c!=null&&ql(e,i,c,o))}switch(n){case"input":ei(e),mu(e,r,!1);break;case"textarea":ei(e),gu(e);break;case"option":r.value!=null&&e.setAttribute("value",""+yn(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?kr(e,!!r.multiple,i,!1):r.defaultValue!=null&&kr(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Ui)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Oe(t),null;case 6:if(e&&t.stateNode!=null)Tm(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(D(166));if(n=Fn(Ms.current),Fn(_t.current),ci(t)){if(r=t.stateNode,n=t.memoizedProps,r[Tt]=t,(i=r.nodeValue!==n)&&(e=rt,e!==null))switch(e.tag){case 3:li(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&li(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Tt]=t,t.stateNode=r}return Oe(t),null;case 13:if(de(me),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(fe&&nt!==null&&t.mode&1&&!(t.flags&128))$f(),Mr(),t.flags|=98560,i=!1;else if(i=ci(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(D(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(D(317));i[Tt]=t}else Mr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Oe(t),i=!1}else wt!==null&&(Cl(wt),wt=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||me.current&1?Ce===0&&(Ce=3):Nc())),t.updateQueue!==null&&(t.flags|=4),Oe(t),null);case 4:return Lr(),xl(e,t),e===null&&Es(t.stateNode.containerInfo),Oe(t),null;case 10:return hc(t.type._context),Oe(t),null;case 17:return Ye(t.type)&&$i(),Oe(t),null;case 19:if(de(me),i=t.memoizedState,i===null)return Oe(t),null;if(r=(t.flags&128)!==0,o=i.rendering,o===null)if(r)Yr(i,!1);else{if(Ce!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Ji(e),o!==null){for(t.flags|=128,Yr(i,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return oe(me,me.current&1|2),t.child}e=e.sibling}i.tail!==null&&be()>Ir&&(t.flags|=128,r=!0,Yr(i,!1),t.lanes=4194304)}else{if(!r)if(e=Ji(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Yr(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!fe)return Oe(t),null}else 2*be()-i.renderingStartTime>Ir&&n!==1073741824&&(t.flags|=128,r=!0,Yr(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(n=i.last,n!==null?n.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=be(),t.sibling=null,n=me.current,oe(me,r?n&1|2:n&1),t):(Oe(t),null);case 22:case 23:return Ec(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?tt&1073741824&&(Oe(t),t.subtreeFlags&6&&(t.flags|=8192)):Oe(t),null;case 24:return null;case 25:return null}throw Error(D(156,t.tag))}function Fx(e,t){switch(lc(t),t.tag){case 1:return Ye(t.type)&&$i(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Lr(),de(Xe),de(Be),xc(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return gc(t),null;case 13:if(de(me),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(D(340));Mr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return de(me),null;case 4:return Lr(),null;case 10:return hc(t.type._context),null;case 22:case 23:return Ec(),null;case 24:return null;default:return null}}var hi=!1,Ge=!1,Gx=typeof WeakSet=="function"?WeakSet:Set,G=null;function gr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ve(e,t,r)}else n.current=null}function vl(e,t,n){try{n()}catch(r){ve(e,t,r)}}var id=!1;function Vx(e,t){if(tl=Bi,e=Mf(),oc(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,u=0,h=0,d=e,m=null;t:for(;;){for(var v;d!==n||s!==0&&d.nodeType!==3||(a=o+s),d!==i||r!==0&&d.nodeType!==3||(c=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(v=d.firstChild)!==null;)m=d,d=v;for(;;){if(d===e)break t;if(m===n&&++u===s&&(a=o),m===i&&++h===r&&(c=o),(v=d.nextSibling)!==null)break;d=m,m=d.parentNode}d=v}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(nl={focusedElem:e,selectionRange:n},Bi=!1,G=t;G!==null;)if(t=G,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,G=e;else for(;G!==null;){t=G;try{var w=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var b=w.memoizedProps,S=w.memoizedState,p=t.stateNode,f=p.getSnapshotBeforeUpdate(t.elementType===t.type?b:vt(t.type,b),S);p.__reactInternalSnapshotBeforeUpdate=f}break;case 3:var g=t.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(D(163))}}catch(y){ve(t,t.return,y)}if(e=t.sibling,e!==null){e.return=t.return,G=e;break}G=t.return}return w=id,id=!1,w}function hs(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&vl(t,n,i)}s=s.next}while(s!==r)}}function Po(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function yl(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Em(e){var t=e.alternate;t!==null&&(e.alternate=null,Em(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Tt],delete t[_s],delete t[il],delete t[Sx],delete t[kx])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Nm(e){return e.tag===5||e.tag===3||e.tag===4}function od(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Nm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function wl(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Ui));else if(r!==4&&(e=e.child,e!==null))for(wl(e,t,n),e=e.sibling;e!==null;)wl(e,t,n),e=e.sibling}function bl(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(bl(e,t,n),e=e.sibling;e!==null;)bl(e,t,n),e=e.sibling}var De=null,yt=!1;function Yt(e,t,n){for(n=n.child;n!==null;)_m(e,t,n),n=n.sibling}function _m(e,t,n){if(Nt&&typeof Nt.onCommitFiberUnmount=="function")try{Nt.onCommitFiberUnmount(vo,n)}catch{}switch(n.tag){case 5:Ge||gr(n,t);case 6:var r=De,s=yt;De=null,Yt(e,t,n),De=r,yt=s,De!==null&&(yt?(e=De,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):De.removeChild(n.stateNode));break;case 18:De!==null&&(yt?(e=De,n=n.stateNode,e.nodeType===8?aa(e.parentNode,n):e.nodeType===1&&aa(e,n),Cs(e)):aa(De,n.stateNode));break;case 4:r=De,s=yt,De=n.stateNode.containerInfo,yt=!0,Yt(e,t,n),De=r,yt=s;break;case 0:case 11:case 14:case 15:if(!Ge&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&vl(n,t,o),s=s.next}while(s!==r)}Yt(e,t,n);break;case 1:if(!Ge&&(gr(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){ve(n,t,a)}Yt(e,t,n);break;case 21:Yt(e,t,n);break;case 22:n.mode&1?(Ge=(r=Ge)||n.memoizedState!==null,Yt(e,t,n),Ge=r):Yt(e,t,n);break;default:Yt(e,t,n)}}function ad(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Gx),t.forEach(function(r){var s=Qx.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function gt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:De=a.stateNode,yt=!1;break e;case 3:De=a.stateNode.containerInfo,yt=!0;break e;case 4:De=a.stateNode.containerInfo,yt=!0;break e}a=a.return}if(De===null)throw Error(D(160));_m(i,o,s),De=null,yt=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){ve(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Am(t,e),t=t.sibling}function Am(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gt(t,e),jt(e),r&4){try{hs(3,e,e.return),Po(3,e)}catch(b){ve(e,e.return,b)}try{hs(5,e,e.return)}catch(b){ve(e,e.return,b)}}break;case 1:gt(t,e),jt(e),r&512&&n!==null&&gr(n,n.return);break;case 5:if(gt(t,e),jt(e),r&512&&n!==null&&gr(n,n.return),e.flags&32){var s=e.stateNode;try{bs(s,"")}catch(b){ve(e,e.return,b)}}if(r&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=n!==null?n.memoizedProps:i,a=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&Jh(s,i),$a(a,o);var u=$a(a,i);for(o=0;o<c.length;o+=2){var h=c[o],d=c[o+1];h==="style"?rf(s,d):h==="dangerouslySetInnerHTML"?tf(s,d):h==="children"?bs(s,d):ql(s,h,d,u)}switch(a){case"input":Va(s,i);break;case"textarea":Zh(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var v=i.value;v!=null?kr(s,!!i.multiple,v,!1):m!==!!i.multiple&&(i.defaultValue!=null?kr(s,!!i.multiple,i.defaultValue,!0):kr(s,!!i.multiple,i.multiple?[]:"",!1))}s[_s]=i}catch(b){ve(e,e.return,b)}}break;case 6:if(gt(t,e),jt(e),r&4){if(e.stateNode===null)throw Error(D(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(b){ve(e,e.return,b)}}break;case 3:if(gt(t,e),jt(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Cs(t.containerInfo)}catch(b){ve(e,e.return,b)}break;case 4:gt(t,e),jt(e);break;case 13:gt(t,e),jt(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Pc=be())),r&4&&ad(e);break;case 22:if(h=n!==null&&n.memoizedState!==null,e.mode&1?(Ge=(u=Ge)||h,gt(t,e),Ge=u):gt(t,e),jt(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!h&&e.mode&1)for(G=e,h=e.child;h!==null;){for(d=G=h;G!==null;){switch(m=G,v=m.child,m.tag){case 0:case 11:case 14:case 15:hs(4,m,m.return);break;case 1:gr(m,m.return);var w=m.stateNode;if(typeof w.componentWillUnmount=="function"){r=m,n=m.return;try{t=r,w.props=t.memoizedProps,w.state=t.memoizedState,w.componentWillUnmount()}catch(b){ve(r,n,b)}}break;case 5:gr(m,m.return);break;case 22:if(m.memoizedState!==null){cd(d);continue}}v!==null?(v.return=m,G=v):cd(d)}h=h.sibling}e:for(h=null,d=e;;){if(d.tag===5){if(h===null){h=d;try{s=d.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=nf("display",o))}catch(b){ve(e,e.return,b)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(b){ve(e,e.return,b)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:gt(t,e),jt(e),r&4&&ad(e);break;case 21:break;default:gt(t,e),jt(e)}}function jt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Nm(n)){var r=n;break e}n=n.return}throw Error(D(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(bs(s,""),r.flags&=-33);var i=od(e);bl(e,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=od(e);wl(e,a,o);break;default:throw Error(D(161))}}catch(c){ve(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Bx(e,t,n){G=e,Mm(e)}function Mm(e,t,n){for(var r=(e.mode&1)!==0;G!==null;){var s=G,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||hi;if(!o){var a=s.alternate,c=a!==null&&a.memoizedState!==null||Ge;a=hi;var u=Ge;if(hi=o,(Ge=c)&&!u)for(G=s;G!==null;)o=G,c=o.child,o.tag===22&&o.memoizedState!==null?ud(s):c!==null?(c.return=o,G=c):ud(s);for(;i!==null;)G=i,Mm(i),i=i.sibling;G=s,hi=a,Ge=u}ld(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,G=i):ld(e)}}function ld(e){for(;G!==null;){var t=G;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ge||Po(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Ge)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:vt(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Wu(t,i,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Wu(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&Cs(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(D(163))}Ge||t.flags&512&&yl(t)}catch(m){ve(t,t.return,m)}}if(t===e){G=null;break}if(n=t.sibling,n!==null){n.return=t.return,G=n;break}G=t.return}}function cd(e){for(;G!==null;){var t=G;if(t===e){G=null;break}var n=t.sibling;if(n!==null){n.return=t.return,G=n;break}G=t.return}}function ud(e){for(;G!==null;){var t=G;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Po(4,t)}catch(c){ve(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(c){ve(t,s,c)}}var i=t.return;try{yl(t)}catch(c){ve(t,i,c)}break;case 5:var o=t.return;try{yl(t)}catch(c){ve(t,o,c)}}}catch(c){ve(t,t.return,c)}if(t===e){G=null;break}var a=t.sibling;if(a!==null){a.return=t.return,G=a;break}G=t.return}}var zx=Math.ceil,to=Kt.ReactCurrentDispatcher,jc=Kt.ReactCurrentOwner,ft=Kt.ReactCurrentBatchConfig,Y=0,_e=null,ke=null,Le=0,tt=0,xr=Pn(0),Ce=0,Is=null,$n=0,To=0,Cc=0,fs=null,Ke=null,Pc=0,Ir=1/0,Mt=null,no=!1,Sl=null,mn=null,fi=!1,an=null,ro=0,ms=0,kl=null,_i=-1,Ai=0;function $e(){return Y&6?be():_i!==-1?_i:_i=be()}function pn(e){return e.mode&1?Y&2&&Le!==0?Le&-Le:Cx.transition!==null?(Ai===0&&(Ai=gf()),Ai):(e=ne,e!==0||(e=window.event,e=e===void 0?16:kf(e.type)),e):1}function St(e,t,n,r){if(50<ms)throw ms=0,kl=null,Error(D(185));zs(e,n,r),(!(Y&2)||e!==_e)&&(e===_e&&(!(Y&2)&&(To|=n),Ce===4&&sn(e,Le)),Je(e,r),n===1&&Y===0&&!(t.mode&1)&&(Ir=be()+500,ko&&Tn()))}function Je(e,t){var n=e.callbackNode;Cg(e,t);var r=Vi(e,e===_e?Le:0);if(r===0)n!==null&&yu(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&yu(n),t===1)e.tag===0?jx(dd.bind(null,e)):zf(dd.bind(null,e)),wx(function(){!(Y&6)&&Tn()}),n=null;else{switch(xf(r)){case 1:n=Jl;break;case 4:n=mf;break;case 16:n=Gi;break;case 536870912:n=pf;break;default:n=Gi}n=Vm(n,Dm.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Dm(e,t){if(_i=-1,Ai=0,Y&6)throw Error(D(327));var n=e.callbackNode;if(Er()&&e.callbackNode!==n)return null;var r=Vi(e,e===_e?Le:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=so(e,r);else{t=r;var s=Y;Y|=2;var i=Rm();(_e!==e||Le!==t)&&(Mt=null,Ir=be()+500,Vn(e,t));do try{$x();break}catch(a){Lm(e,a)}while(1);dc(),to.current=i,Y=s,ke!==null?t=0:(_e=null,Le=0,t=Ce)}if(t!==0){if(t===2&&(s=Xa(e),s!==0&&(r=s,t=jl(e,s))),t===1)throw n=Is,Vn(e,0),sn(e,r),Je(e,be()),n;if(t===6)sn(e,r);else{if(s=e.current.alternate,!(r&30)&&!Hx(s)&&(t=so(e,r),t===2&&(i=Xa(e),i!==0&&(r=i,t=jl(e,i))),t===1))throw n=Is,Vn(e,0),sn(e,r),Je(e,be()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(D(345));case 2:Mn(e,Ke,Mt);break;case 3:if(sn(e,r),(r&130023424)===r&&(t=Pc+500-be(),10<t)){if(Vi(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){$e(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=sl(Mn.bind(null,e,Ke,Mt),t);break}Mn(e,Ke,Mt);break;case 4:if(sn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var o=31-bt(r);i=1<<o,o=t[o],o>s&&(s=o),r&=~i}if(r=s,r=be()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*zx(r/1960))-r,10<r){e.timeoutHandle=sl(Mn.bind(null,e,Ke,Mt),r);break}Mn(e,Ke,Mt);break;case 5:Mn(e,Ke,Mt);break;default:throw Error(D(329))}}}return Je(e,be()),e.callbackNode===n?Dm.bind(null,e):null}function jl(e,t){var n=fs;return e.current.memoizedState.isDehydrated&&(Vn(e,t).flags|=256),e=so(e,t),e!==2&&(t=Ke,Ke=n,t!==null&&Cl(t)),e}function Cl(e){Ke===null?Ke=e:Ke.push.apply(Ke,e)}function Hx(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!kt(i(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function sn(e,t){for(t&=~Cc,t&=~To,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-bt(t),r=1<<n;e[n]=-1,t&=~r}}function dd(e){if(Y&6)throw Error(D(327));Er();var t=Vi(e,0);if(!(t&1))return Je(e,be()),null;var n=so(e,t);if(e.tag!==0&&n===2){var r=Xa(e);r!==0&&(t=r,n=jl(e,r))}if(n===1)throw n=Is,Vn(e,0),sn(e,t),Je(e,be()),n;if(n===6)throw Error(D(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Mn(e,Ke,Mt),Je(e,be()),null}function Tc(e,t){var n=Y;Y|=1;try{return e(t)}finally{Y=n,Y===0&&(Ir=be()+500,ko&&Tn())}}function Wn(e){an!==null&&an.tag===0&&!(Y&6)&&Er();var t=Y;Y|=1;var n=ft.transition,r=ne;try{if(ft.transition=null,ne=1,e)return e()}finally{ne=r,ft.transition=n,Y=t,!(Y&6)&&Tn()}}function Ec(){tt=xr.current,de(xr)}function Vn(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,yx(n)),ke!==null)for(n=ke.return;n!==null;){var r=n;switch(lc(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&$i();break;case 3:Lr(),de(Xe),de(Be),xc();break;case 5:gc(r);break;case 4:Lr();break;case 13:de(me);break;case 19:de(me);break;case 10:hc(r.type._context);break;case 22:case 23:Ec()}n=n.return}if(_e=e,ke=e=gn(e.current,null),Le=tt=t,Ce=0,Is=null,Cc=To=$n=0,Ke=fs=null,On!==null){for(t=0;t<On.length;t++)if(n=On[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}On=null}return e}function Lm(e,t){do{var n=ke;try{if(dc(),Ti.current=eo,Zi){for(var r=ge.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Zi=!1}if(Un=0,Ne=je=ge=null,ds=!1,Ds=0,jc.current=null,n===null||n.return===null){Ce=1,Is=t,ke=null;break}e:{var i=e,o=n.return,a=n,c=t;if(t=Le,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var v=Ju(o);if(v!==null){v.flags&=-257,Zu(v,o,a,i,t),v.mode&1&&Yu(i,u,t),t=v,c=u;var w=t.updateQueue;if(w===null){var b=new Set;b.add(c),t.updateQueue=b}else w.add(c);break e}else{if(!(t&1)){Yu(i,u,t),Nc();break e}c=Error(D(426))}}else if(fe&&a.mode&1){var S=Ju(o);if(S!==null){!(S.flags&65536)&&(S.flags|=256),Zu(S,o,a,i,t),cc(Rr(c,a));break e}}i=c=Rr(c,a),Ce!==4&&(Ce=2),fs===null?fs=[i]:fs.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var p=xm(i,c,t);$u(i,p);break e;case 1:a=c;var f=i.type,g=i.stateNode;if(!(i.flags&128)&&(typeof f.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(mn===null||!mn.has(g)))){i.flags|=65536,t&=-t,i.lanes|=t;var y=vm(i,a,t);$u(i,y);break e}}i=i.return}while(i!==null)}Om(n)}catch(k){t=k,ke===n&&n!==null&&(ke=n=n.return);continue}break}while(1)}function Rm(){var e=to.current;return to.current=eo,e===null?eo:e}function Nc(){(Ce===0||Ce===3||Ce===2)&&(Ce=4),_e===null||!($n&268435455)&&!(To&268435455)||sn(_e,Le)}function so(e,t){var n=Y;Y|=2;var r=Rm();(_e!==e||Le!==t)&&(Mt=null,Vn(e,t));do try{Ux();break}catch(s){Lm(e,s)}while(1);if(dc(),Y=n,to.current=r,ke!==null)throw Error(D(261));return _e=null,Le=0,Ce}function Ux(){for(;ke!==null;)Im(ke)}function $x(){for(;ke!==null&&!gg();)Im(ke)}function Im(e){var t=Gm(e.alternate,e,tt);e.memoizedProps=e.pendingProps,t===null?Om(e):ke=t,jc.current=null}function Om(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Fx(n,t),n!==null){n.flags&=32767,ke=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ce=6,ke=null;return}}else if(n=Ox(n,t,tt),n!==null){ke=n;return}if(t=t.sibling,t!==null){ke=t;return}ke=t=e}while(t!==null);Ce===0&&(Ce=5)}function Mn(e,t,n){var r=ne,s=ft.transition;try{ft.transition=null,ne=1,Wx(e,t,n,r)}finally{ft.transition=s,ne=r}return null}function Wx(e,t,n,r){do Er();while(an!==null);if(Y&6)throw Error(D(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(D(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(Pg(e,i),e===_e&&(ke=_e=null,Le=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||fi||(fi=!0,Vm(Gi,function(){return Er(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=ft.transition,ft.transition=null;var o=ne;ne=1;var a=Y;Y|=4,jc.current=null,Vx(e,n),Am(n,e),hx(nl),Bi=!!tl,nl=tl=null,e.current=n,Bx(n),xg(),Y=a,ne=o,ft.transition=i}else e.current=n;if(fi&&(fi=!1,an=e,ro=s),i=e.pendingLanes,i===0&&(mn=null),wg(n.stateNode),Je(e,be()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(no)throw no=!1,e=Sl,Sl=null,e;return ro&1&&e.tag!==0&&Er(),i=e.pendingLanes,i&1?e===kl?ms++:(ms=0,kl=e):ms=0,Tn(),null}function Er(){if(an!==null){var e=xf(ro),t=ft.transition,n=ne;try{if(ft.transition=null,ne=16>e?16:e,an===null)var r=!1;else{if(e=an,an=null,ro=0,Y&6)throw Error(D(331));var s=Y;for(Y|=4,G=e.current;G!==null;){var i=G,o=i.child;if(G.flags&16){var a=i.deletions;if(a!==null){for(var c=0;c<a.length;c++){var u=a[c];for(G=u;G!==null;){var h=G;switch(h.tag){case 0:case 11:case 15:hs(8,h,i)}var d=h.child;if(d!==null)d.return=h,G=d;else for(;G!==null;){h=G;var m=h.sibling,v=h.return;if(Em(h),h===u){G=null;break}if(m!==null){m.return=v,G=m;break}G=v}}}var w=i.alternate;if(w!==null){var b=w.child;if(b!==null){w.child=null;do{var S=b.sibling;b.sibling=null,b=S}while(b!==null)}}G=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,G=o;else e:for(;G!==null;){if(i=G,i.flags&2048)switch(i.tag){case 0:case 11:case 15:hs(9,i,i.return)}var p=i.sibling;if(p!==null){p.return=i.return,G=p;break e}G=i.return}}var f=e.current;for(G=f;G!==null;){o=G;var g=o.child;if(o.subtreeFlags&2064&&g!==null)g.return=o,G=g;else e:for(o=f;G!==null;){if(a=G,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Po(9,a)}}catch(k){ve(a,a.return,k)}if(a===o){G=null;break e}var y=a.sibling;if(y!==null){y.return=a.return,G=y;break e}G=a.return}}if(Y=s,Tn(),Nt&&typeof Nt.onPostCommitFiberRoot=="function")try{Nt.onPostCommitFiberRoot(vo,e)}catch{}r=!0}return r}finally{ne=n,ft.transition=t}}return!1}function hd(e,t,n){t=Rr(n,t),t=xm(e,t,1),e=fn(e,t,1),t=$e(),e!==null&&(zs(e,1,t),Je(e,t))}function ve(e,t,n){if(e.tag===3)hd(e,e,n);else for(;t!==null;){if(t.tag===3){hd(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(mn===null||!mn.has(r))){e=Rr(n,e),e=vm(t,e,1),t=fn(t,e,1),e=$e(),t!==null&&(zs(t,1,e),Je(t,e));break}}t=t.return}}function qx(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=$e(),e.pingedLanes|=e.suspendedLanes&n,_e===e&&(Le&n)===n&&(Ce===4||Ce===3&&(Le&130023424)===Le&&500>be()-Pc?Vn(e,0):Cc|=n),Je(e,t)}function Fm(e,t){t===0&&(e.mode&1?(t=ri,ri<<=1,!(ri&130023424)&&(ri=4194304)):t=1);var n=$e();e=$t(e,t),e!==null&&(zs(e,t,n),Je(e,n))}function Kx(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Fm(e,n)}function Qx(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(D(314))}r!==null&&r.delete(t),Fm(e,n)}var Gm;Gm=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Xe.current)Qe=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Qe=!1,Ix(e,t,n);Qe=!!(e.flags&131072)}else Qe=!1,fe&&t.flags&1048576&&Hf(t,Ki,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ni(e,t),e=t.pendingProps;var s=Ar(t,Be.current);Tr(t,n),s=yc(null,t,r,e,s,n);var i=wc();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ye(r)?(i=!0,Wi(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,mc(t),s.updater=Co,t.stateNode=s,s._reactInternals=t,dl(t,r,e,n),t=ml(null,t,r,!0,i,n)):(t.tag=0,fe&&i&&ac(t),Ue(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ni(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=Yx(r),e=vt(r,e),s){case 0:t=fl(null,t,r,e,n);break e;case 1:t=nd(null,t,r,e,n);break e;case 11:t=ed(null,t,r,e,n);break e;case 14:t=td(null,t,r,vt(r.type,e),n);break e}throw Error(D(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:vt(r,s),fl(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:vt(r,s),nd(e,t,r,s,n);case 3:e:{if(Sm(t),e===null)throw Error(D(387));r=t.pendingProps,i=t.memoizedState,s=i.element,Qf(e,t),Yi(t,r,null,n);var o=t.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=Rr(Error(D(423)),t),t=rd(e,t,r,n,s);break e}else if(r!==s){s=Rr(Error(D(424)),t),t=rd(e,t,r,n,s);break e}else for(nt=hn(t.stateNode.containerInfo.firstChild),rt=t,fe=!0,wt=null,n=qf(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Mr(),r===s){t=Wt(e,t,n);break e}Ue(e,t,r,n)}t=t.child}return t;case 5:return Xf(t),e===null&&ll(t),r=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,rl(r,s)?o=null:i!==null&&rl(r,i)&&(t.flags|=32),bm(e,t),Ue(e,t,o,n),t.child;case 6:return e===null&&ll(t),null;case 13:return km(e,t,n);case 4:return pc(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Dr(t,null,r,n):Ue(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:vt(r,s),ed(e,t,r,s,n);case 7:return Ue(e,t,t.pendingProps,n),t.child;case 8:return Ue(e,t,t.pendingProps.children,n),t.child;case 12:return Ue(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,oe(Qi,r._currentValue),r._currentValue=o,i!==null)if(kt(i.value,o)){if(i.children===s.children&&!Xe.current){t=Wt(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Vt(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),cl(i.return,n,t),a.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(D(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),cl(o,n,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Ue(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Tr(t,n),s=mt(s),r=r(s),t.flags|=1,Ue(e,t,r,n),t.child;case 14:return r=t.type,s=vt(r,t.pendingProps),s=vt(r.type,s),td(e,t,r,s,n);case 15:return ym(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:vt(r,s),Ni(e,t),t.tag=1,Ye(r)?(e=!0,Wi(t)):e=!1,Tr(t,n),gm(t,r,s),dl(t,r,s,n),ml(null,t,r,!0,e,n);case 19:return jm(e,t,n);case 22:return wm(e,t,n)}throw Error(D(156,t.tag))};function Vm(e,t){return ff(e,t)}function Xx(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ht(e,t,n,r){return new Xx(e,t,n,r)}function _c(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Yx(e){if(typeof e=="function")return _c(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Ql)return 11;if(e===Xl)return 14}return 2}function gn(e,t){var n=e.alternate;return n===null?(n=ht(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Mi(e,t,n,r,s,i){var o=2;if(r=e,typeof e=="function")_c(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case ar:return Bn(n.children,s,i,t);case Kl:o=8,s|=8;break;case Ra:return e=ht(12,n,t,s|2),e.elementType=Ra,e.lanes=i,e;case Ia:return e=ht(13,n,t,s),e.elementType=Ia,e.lanes=i,e;case Oa:return e=ht(19,n,t,s),e.elementType=Oa,e.lanes=i,e;case Qh:return Eo(n,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case qh:o=10;break e;case Kh:o=9;break e;case Ql:o=11;break e;case Xl:o=14;break e;case en:o=16,r=null;break e}throw Error(D(130,e==null?e:typeof e,""))}return t=ht(o,n,t,s),t.elementType=e,t.type=r,t.lanes=i,t}function Bn(e,t,n,r){return e=ht(7,e,r,t),e.lanes=n,e}function Eo(e,t,n,r){return e=ht(22,e,r,t),e.elementType=Qh,e.lanes=n,e.stateNode={isHidden:!1},e}function pa(e,t,n){return e=ht(6,e,null,t),e.lanes=n,e}function ga(e,t,n){return t=ht(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Jx(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Xo(0),this.expirationTimes=Xo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xo(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Ac(e,t,n,r,s,i,o,a,c){return e=new Jx(e,t,n,a,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=ht(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},mc(i),e}function Zx(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:or,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Bm(e){if(!e)return wn;e=e._reactInternals;e:{if(er(e)!==e||e.tag!==1)throw Error(D(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ye(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(D(171))}if(e.tag===1){var n=e.type;if(Ye(n))return Bf(e,n,t)}return t}function zm(e,t,n,r,s,i,o,a,c){return e=Ac(n,r,!0,e,s,i,o,a,c),e.context=Bm(null),n=e.current,r=$e(),s=pn(n),i=Vt(r,s),i.callback=t??null,fn(n,i,s),e.current.lanes=s,zs(e,s,r),Je(e,r),e}function No(e,t,n,r){var s=t.current,i=$e(),o=pn(s);return n=Bm(n),t.context===null?t.context=n:t.pendingContext=n,t=Vt(i,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=fn(s,t,o),e!==null&&(St(e,s,o,i),Pi(e,s,o)),o}function io(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function fd(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Mc(e,t){fd(e,t),(e=e.alternate)&&fd(e,t)}function ev(){return null}var Hm=typeof reportError=="function"?reportError:function(e){console.error(e)};function Dc(e){this._internalRoot=e}_o.prototype.render=Dc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(D(409));No(e,t,null,null)};_o.prototype.unmount=Dc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Wn(function(){No(null,e,null,null)}),t[Ut]=null}};function _o(e){this._internalRoot=e}_o.prototype.unstable_scheduleHydration=function(e){if(e){var t=wf();e={blockedOn:null,target:e,priority:t};for(var n=0;n<rn.length&&t!==0&&t<rn[n].priority;n++);rn.splice(n,0,e),n===0&&Sf(e)}};function Lc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Ao(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function md(){}function tv(e,t,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=io(o);i.call(u)}}var o=zm(t,r,e,0,null,!1,!1,"",md);return e._reactRootContainer=o,e[Ut]=o.current,Es(e.nodeType===8?e.parentNode:e),Wn(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var u=io(c);a.call(u)}}var c=Ac(e,0,!1,null,null,!1,!1,"",md);return e._reactRootContainer=c,e[Ut]=c.current,Es(e.nodeType===8?e.parentNode:e),Wn(function(){No(t,c,n,r)}),c}function Mo(e,t,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var c=io(o);a.call(c)}}No(t,o,e,s)}else o=tv(n,t,e,s,r);return io(o)}vf=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=rs(t.pendingLanes);n!==0&&(Zl(t,n|1),Je(t,be()),!(Y&6)&&(Ir=be()+500,Tn()))}break;case 13:Wn(function(){var r=$t(e,1);if(r!==null){var s=$e();St(r,e,1,s)}}),Mc(e,1)}};ec=function(e){if(e.tag===13){var t=$t(e,134217728);if(t!==null){var n=$e();St(t,e,134217728,n)}Mc(e,134217728)}};yf=function(e){if(e.tag===13){var t=pn(e),n=$t(e,t);if(n!==null){var r=$e();St(n,e,t,r)}Mc(e,t)}};wf=function(){return ne};bf=function(e,t){var n=ne;try{return ne=e,t()}finally{ne=n}};qa=function(e,t,n){switch(t){case"input":if(Va(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=So(r);if(!s)throw Error(D(90));Yh(r),Va(r,s)}}}break;case"textarea":Zh(e,n);break;case"select":t=n.value,t!=null&&kr(e,!!n.multiple,t,!1)}};af=Tc;lf=Wn;var nv={usingClientEntryPoint:!1,Events:[Us,dr,So,sf,of,Tc]},Jr={findFiberByHostInstance:In,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},rv={bundleType:Jr.bundleType,version:Jr.version,rendererPackageName:Jr.rendererPackageName,rendererConfig:Jr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Kt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=df(e),e===null?null:e.stateNode},findFiberByHostInstance:Jr.findFiberByHostInstance||ev,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var mi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!mi.isDisabled&&mi.supportsFiber)try{vo=mi.inject(rv),Nt=mi}catch{}}ot.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nv;ot.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Lc(t))throw Error(D(200));return Zx(e,t,null,n)};ot.createRoot=function(e,t){if(!Lc(e))throw Error(D(299));var n=!1,r="",s=Hm;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Ac(e,1,!1,null,null,n,!1,r,s),e[Ut]=t.current,Es(e.nodeType===8?e.parentNode:e),new Dc(t)};ot.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(D(188)):(e=Object.keys(e).join(","),Error(D(268,e)));return e=df(t),e=e===null?null:e.stateNode,e};ot.flushSync=function(e){return Wn(e)};ot.hydrate=function(e,t,n){if(!Ao(t))throw Error(D(200));return Mo(null,e,t,!0,n)};ot.hydrateRoot=function(e,t,n){if(!Lc(e))throw Error(D(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=Hm;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=zm(t,null,e,1,n??null,s,!1,i,o),e[Ut]=t.current,Es(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new _o(t)};ot.render=function(e,t,n){if(!Ao(t))throw Error(D(200));return Mo(null,e,t,!1,n)};ot.unmountComponentAtNode=function(e){if(!Ao(e))throw Error(D(40));return e._reactRootContainer?(Wn(function(){Mo(null,null,e,!1,function(){e._reactRootContainer=null,e[Ut]=null})}),!0):!1};ot.unstable_batchedUpdates=Tc;ot.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Ao(n))throw Error(D(200));if(e==null||e._reactInternals===void 0)throw Error(D(38));return Mo(e,t,n,!1,r)};ot.version="18.3.1-next-f1338f8080-20240426";function Um(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Um)}catch(e){console.error(e)}}Um(),Hh.exports=ot;var sv=Hh.exports,pd=sv;Da.createRoot=pd.createRoot,Da.hydrateRoot=pd.hydrateRoot;const iv="modulepreload",ov=function(e){return"/cat-tetris/"+e},gd={},Rc=function(t,n,r){if(!n||n.length===0)return t();const s=document.getElementsByTagName("link");return Promise.all(n.map(i=>{if(i=ov(i),i in gd)return;gd[i]=!0;const o=i.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!r)for(let h=s.length-1;h>=0;h--){const d=s[h];if(d.href===i&&(!o||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${a}`))return;const u=document.createElement("link");if(u.rel=o?"stylesheet":iv,o||(u.as="script",u.crossOrigin=""),u.href=i,document.head.appendChild(u),o)return new Promise((h,d)=>{u.addEventListener("load",h),u.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>t()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})},$m=x.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),Do=x.createContext({}),Lo=x.createContext(null),Ro=typeof document<"u",Ic=Ro?x.useLayoutEffect:x.useEffect,Wm=x.createContext({strict:!1}),Oc=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),av="framerAppearId",qm="data-"+Oc(av);function lv(e,t,n,r){const{visualElement:s}=x.useContext(Do),i=x.useContext(Wm),o=x.useContext(Lo),a=x.useContext($m).reducedMotion,c=x.useRef();r=r||i.renderer,!c.current&&r&&(c.current=r(e,{visualState:t,parent:s,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:a}));const u=c.current;x.useInsertionEffect(()=>{u&&u.update(n,o)});const h=x.useRef(!!(n[qm]&&!window.HandoffComplete));return Ic(()=>{u&&(u.render(),h.current&&u.animationState&&u.animationState.animateChanges())}),x.useEffect(()=>{u&&(u.updateFeatures(),!h.current&&u.animationState&&u.animationState.animateChanges(),h.current&&(h.current=!1,window.HandoffComplete=!0))}),u}function vr(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function cv(e,t,n){return x.useCallback(r=>{r&&e.mount&&e.mount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):vr(n)&&(n.current=r))},[t])}function Os(e){return typeof e=="string"||Array.isArray(e)}function Io(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const Fc=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Gc=["initial",...Fc];function Oo(e){return Io(e.animate)||Gc.some(t=>Os(e[t]))}function Km(e){return!!(Oo(e)||e.variants)}function uv(e,t){if(Oo(e)){const{initial:n,animate:r}=e;return{initial:n===!1||Os(n)?n:void 0,animate:Os(r)?r:void 0}}return e.inherit!==!1?t:{}}function dv(e){const{initial:t,animate:n}=uv(e,x.useContext(Do));return x.useMemo(()=>({initial:t,animate:n}),[xd(t),xd(n)])}function xd(e){return Array.isArray(e)?e.join(" "):e}const vd={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Fs={};for(const e in vd)Fs[e]={isEnabled:t=>vd[e].some(n=>!!t[n])};function hv(e){for(const t in e)Fs[t]={...Fs[t],...e[t]}}const Vc=x.createContext({}),Qm=x.createContext({}),fv=Symbol.for("motionComponentSymbol");function mv({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:r,Component:s}){e&&hv(e);function i(a,c){let u;const h={...x.useContext($m),...a,layoutId:pv(a)},{isStatic:d}=h,m=dv(a),v=r(a,d);if(!d&&Ro){m.visualElement=lv(s,v,h,t);const w=x.useContext(Qm),b=x.useContext(Wm).strict;m.visualElement&&(u=m.visualElement.loadFeatures(h,b,e,w))}return x.createElement(Do.Provider,{value:m},u&&m.visualElement?x.createElement(u,{visualElement:m.visualElement,...h}):null,n(s,a,cv(v,m.visualElement,c),v,d,m.visualElement))}const o=x.forwardRef(i);return o[fv]=s,o}function pv({layoutId:e}){const t=x.useContext(Vc).id;return t&&e!==void 0?t+"-"+e:e}function gv(e){function t(r,s={}){return mv(e(r,s))}if(typeof Proxy>"u")return t;const n=new Map;return new Proxy(t,{get:(r,s)=>(n.has(s)||n.set(s,t(s)),n.get(s))})}const xv=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Bc(e){return typeof e!="string"||e.includes("-")?!1:!!(xv.indexOf(e)>-1||/[A-Z]/.test(e))}const oo={};function vv(e){Object.assign(oo,e)}const Ws=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],tr=new Set(Ws);function Xm(e,{layout:t,layoutId:n}){return tr.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!oo[e]||e==="opacity")}const Ze=e=>!!(e&&e.getVelocity),yv={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},wv=Ws.length;function bv(e,{enableHardwareAcceleration:t=!0,allowTransformNone:n=!0},r,s){let i="";for(let o=0;o<wv;o++){const a=Ws[o];if(e[a]!==void 0){const c=yv[a]||a;i+=`${c}(${e[a]}) `}}return t&&!e.z&&(i+="translateZ(0)"),i=i.trim(),s?i=s(e,r?"":i):n&&r&&(i="none"),i}const Ym=e=>t=>typeof t=="string"&&t.startsWith(e),Jm=Ym("--"),Pl=Ym("var(--"),Sv=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,kv=(e,t)=>t&&typeof e=="number"?t.transform(e):e,bn=(e,t,n)=>Math.min(Math.max(n,e),t),nr={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},ps={...nr,transform:e=>bn(0,1,e)},pi={...nr,default:1},gs=e=>Math.round(e*1e5)/1e5,Fo=/(-)?([\d]*\.?[\d])+/g,Zm=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,jv=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function qs(e){return typeof e=="string"}const Ks=e=>({test:t=>qs(t)&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Jt=Ks("deg"),At=Ks("%"),U=Ks("px"),Cv=Ks("vh"),Pv=Ks("vw"),yd={...At,parse:e=>At.parse(e)/100,transform:e=>At.transform(e*100)},wd={...nr,transform:Math.round},ep={borderWidth:U,borderTopWidth:U,borderRightWidth:U,borderBottomWidth:U,borderLeftWidth:U,borderRadius:U,radius:U,borderTopLeftRadius:U,borderTopRightRadius:U,borderBottomRightRadius:U,borderBottomLeftRadius:U,width:U,maxWidth:U,height:U,maxHeight:U,size:U,top:U,right:U,bottom:U,left:U,padding:U,paddingTop:U,paddingRight:U,paddingBottom:U,paddingLeft:U,margin:U,marginTop:U,marginRight:U,marginBottom:U,marginLeft:U,rotate:Jt,rotateX:Jt,rotateY:Jt,rotateZ:Jt,scale:pi,scaleX:pi,scaleY:pi,scaleZ:pi,skew:Jt,skewX:Jt,skewY:Jt,distance:U,translateX:U,translateY:U,translateZ:U,x:U,y:U,z:U,perspective:U,transformPerspective:U,opacity:ps,originX:yd,originY:yd,originZ:U,zIndex:wd,fillOpacity:ps,strokeOpacity:ps,numOctaves:wd};function zc(e,t,n,r){const{style:s,vars:i,transform:o,transformOrigin:a}=e;let c=!1,u=!1,h=!0;for(const d in t){const m=t[d];if(Jm(d)){i[d]=m;continue}const v=ep[d],w=kv(m,v);if(tr.has(d)){if(c=!0,o[d]=w,!h)continue;m!==(v.default||0)&&(h=!1)}else d.startsWith("origin")?(u=!0,a[d]=w):s[d]=w}if(t.transform||(c||r?s.transform=bv(e.transform,n,h,r):s.transform&&(s.transform="none")),u){const{originX:d="50%",originY:m="50%",originZ:v=0}=a;s.transformOrigin=`${d} ${m} ${v}`}}const Hc=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function tp(e,t,n){for(const r in t)!Ze(t[r])&&!Xm(r,n)&&(e[r]=t[r])}function Tv({transformTemplate:e},t,n){return x.useMemo(()=>{const r=Hc();return zc(r,t,{enableHardwareAcceleration:!n},e),Object.assign({},r.vars,r.style)},[t])}function Ev(e,t,n){const r=e.style||{},s={};return tp(s,r,e),Object.assign(s,Tv(e,t,n)),e.transformValues?e.transformValues(s):s}function Nv(e,t,n){const r={},s=Ev(e,t,n);return e.drag&&e.dragListener!==!1&&(r.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=s,r}const _v=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function ao(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||_v.has(e)}let np=e=>!ao(e);function Av(e){e&&(np=t=>t.startsWith("on")?!ao(t):e(t))}try{Av(require("@emotion/is-prop-valid").default)}catch{}function Mv(e,t,n){const r={};for(const s in e)s==="values"&&typeof e.values=="object"||(np(s)||n===!0&&ao(s)||!t&&!ao(s)||e.draggable&&s.startsWith("onDrag"))&&(r[s]=e[s]);return r}function bd(e,t,n){return typeof e=="string"?e:U.transform(t+n*e)}function Dv(e,t,n){const r=bd(t,e.x,e.width),s=bd(n,e.y,e.height);return`${r} ${s}`}const Lv={offset:"stroke-dashoffset",array:"stroke-dasharray"},Rv={offset:"strokeDashoffset",array:"strokeDasharray"};function Iv(e,t,n=1,r=0,s=!0){e.pathLength=1;const i=s?Lv:Rv;e[i.offset]=U.transform(-r);const o=U.transform(t),a=U.transform(n);e[i.array]=`${o} ${a}`}function Uc(e,{attrX:t,attrY:n,attrScale:r,originX:s,originY:i,pathLength:o,pathSpacing:a=1,pathOffset:c=0,...u},h,d,m){if(zc(e,u,h,m),d){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:v,style:w,dimensions:b}=e;v.transform&&(b&&(w.transform=v.transform),delete v.transform),b&&(s!==void 0||i!==void 0||w.transform)&&(w.transformOrigin=Dv(b,s!==void 0?s:.5,i!==void 0?i:.5)),t!==void 0&&(v.x=t),n!==void 0&&(v.y=n),r!==void 0&&(v.scale=r),o!==void 0&&Iv(v,o,a,c,!1)}const rp=()=>({...Hc(),attrs:{}}),$c=e=>typeof e=="string"&&e.toLowerCase()==="svg";function Ov(e,t,n,r){const s=x.useMemo(()=>{const i=rp();return Uc(i,t,{enableHardwareAcceleration:!1},$c(r),e.transformTemplate),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};tp(i,e.style,e),s.style={...i,...s.style}}return s}function Fv(e=!1){return(n,r,s,{latestValues:i},o)=>{const c=(Bc(n)?Ov:Nv)(r,i,o,n),h={...Mv(r,typeof n=="string",e),...c,ref:s},{children:d}=r,m=x.useMemo(()=>Ze(d)?d.get():d,[d]);return x.createElement(n,{...h,children:m})}}function sp(e,{style:t,vars:n},r,s){Object.assign(e.style,t,s&&s.getProjectionStyles(r));for(const i in n)e.style.setProperty(i,n[i])}const ip=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function op(e,t,n,r){sp(e,t,void 0,r);for(const s in t.attrs)e.setAttribute(ip.has(s)?s:Oc(s),t.attrs[s])}function Wc(e,t){const{style:n}=e,r={};for(const s in n)(Ze(n[s])||t.style&&Ze(t.style[s])||Xm(s,e))&&(r[s]=n[s]);return r}function ap(e,t){const n=Wc(e,t);for(const r in e)if(Ze(e[r])||Ze(t[r])){const s=Ws.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[s]=e[r]}return n}function qc(e,t,n,r={},s={}){return typeof t=="function"&&(t=t(n!==void 0?n:e.custom,r,s)),typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"&&(t=t(n!==void 0?n:e.custom,r,s)),t}function lp(e){const t=x.useRef(null);return t.current===null&&(t.current=e()),t.current}const lo=e=>Array.isArray(e),Gv=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),Vv=e=>lo(e)?e[e.length-1]||0:e;function Di(e){const t=Ze(e)?e.get():e;return Gv(t)?t.toValue():t}function Bv({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:n},r,s,i){const o={latestValues:zv(r,s,i,e),renderState:t()};return n&&(o.mount=a=>n(r,a,o)),o}const cp=e=>(t,n)=>{const r=x.useContext(Do),s=x.useContext(Lo),i=()=>Bv(e,t,r,s);return n?i():lp(i)};function zv(e,t,n,r){const s={},i=r(e,{});for(const m in i)s[m]=Di(i[m]);let{initial:o,animate:a}=e;const c=Oo(e),u=Km(e);t&&u&&!c&&e.inherit!==!1&&(o===void 0&&(o=t.initial),a===void 0&&(a=t.animate));let h=n?n.initial===!1:!1;h=h||o===!1;const d=h?a:o;return d&&typeof d!="boolean"&&!Io(d)&&(Array.isArray(d)?d:[d]).forEach(v=>{const w=qc(e,v);if(!w)return;const{transitionEnd:b,transition:S,...p}=w;for(const f in p){let g=p[f];if(Array.isArray(g)){const y=h?g.length-1:0;g=g[y]}g!==null&&(s[f]=g)}for(const f in b)s[f]=b[f]}),s}const ye=e=>e;class Sd{constructor(){this.order=[],this.scheduled=new Set}add(t){if(!this.scheduled.has(t))return this.scheduled.add(t),this.order.push(t),!0}remove(t){const n=this.order.indexOf(t);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(t))}clear(){this.order.length=0,this.scheduled.clear()}}function Hv(e){let t=new Sd,n=new Sd,r=0,s=!1,i=!1;const o=new WeakSet,a={schedule:(c,u=!1,h=!1)=>{const d=h&&s,m=d?t:n;return u&&o.add(c),m.add(c)&&d&&s&&(r=t.order.length),c},cancel:c=>{n.remove(c),o.delete(c)},process:c=>{if(s){i=!0;return}if(s=!0,[t,n]=[n,t],n.clear(),r=t.order.length,r)for(let u=0;u<r;u++){const h=t.order[u];h(c),o.has(h)&&(a.schedule(h),e())}s=!1,i&&(i=!1,a.process(c))}};return a}const gi=["prepare","read","update","preRender","render","postRender"],Uv=40;function $v(e,t){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=gi.reduce((d,m)=>(d[m]=Hv(()=>n=!0),d),{}),o=d=>i[d].process(s),a=()=>{const d=performance.now();n=!1,s.delta=r?1e3/60:Math.max(Math.min(d-s.timestamp,Uv),1),s.timestamp=d,s.isProcessing=!0,gi.forEach(o),s.isProcessing=!1,n&&t&&(r=!1,e(a))},c=()=>{n=!0,r=!0,s.isProcessing||e(a)};return{schedule:gi.reduce((d,m)=>{const v=i[m];return d[m]=(w,b=!1,S=!1)=>(n||c(),v.schedule(w,b,S)),d},{}),cancel:d=>gi.forEach(m=>i[m].cancel(d)),state:s,steps:i}}const{schedule:ae,cancel:qt,state:Fe,steps:xa}=$v(typeof requestAnimationFrame<"u"?requestAnimationFrame:ye,!0),Wv={useVisualState:cp({scrapeMotionValuesFromProps:ap,createRenderState:rp,onMount:(e,t,{renderState:n,latestValues:r})=>{ae.read(()=>{try{n.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),ae.render(()=>{Uc(n,r,{enableHardwareAcceleration:!1},$c(t.tagName),e.transformTemplate),op(t,n)})}})},qv={useVisualState:cp({scrapeMotionValuesFromProps:Wc,createRenderState:Hc})};function Kv(e,{forwardMotionProps:t=!1},n,r){return{...Bc(e)?Wv:qv,preloadedFeatures:n,useRender:Fv(t),createVisualElement:r,Component:e}}function Ot(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}const up=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function Go(e,t="page"){return{point:{x:e[t+"X"],y:e[t+"Y"]}}}const Qv=e=>t=>up(t)&&e(t,Go(t));function Bt(e,t,n,r){return Ot(e,t,Qv(n),r)}const Xv=(e,t)=>n=>t(e(n)),xn=(...e)=>e.reduce(Xv);function dp(e){let t=null;return()=>{const n=()=>{t=null};return t===null?(t=e,n):!1}}const kd=dp("dragHorizontal"),jd=dp("dragVertical");function hp(e){let t=!1;if(e==="y")t=jd();else if(e==="x")t=kd();else{const n=kd(),r=jd();n&&r?t=()=>{n(),r()}:(n&&n(),r&&r())}return t}function fp(){const e=hp(!0);return e?(e(),!1):!0}class En{constructor(t){this.isMounted=!1,this.node=t}update(){}}function Cd(e,t){const n="pointer"+(t?"enter":"leave"),r="onHover"+(t?"Start":"End"),s=(i,o)=>{if(i.pointerType==="touch"||fp())return;const a=e.getProps();e.animationState&&a.whileHover&&e.animationState.setActive("whileHover",t),a[r]&&ae.update(()=>a[r](i,o))};return Bt(e.current,n,s,{passive:!e.getProps()[r]})}class Yv extends En{mount(){this.unmount=xn(Cd(this.node,!0),Cd(this.node,!1))}unmount(){}}class Jv extends En{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=xn(Ot(this.node.current,"focus",()=>this.onFocus()),Ot(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const mp=(e,t)=>t?e===t?!0:mp(e,t.parentElement):!1;function va(e,t){if(!t)return;const n=new PointerEvent("pointer"+e);t(n,Go(n))}class Zv extends En{constructor(){super(...arguments),this.removeStartListeners=ye,this.removeEndListeners=ye,this.removeAccessibleListeners=ye,this.startPointerPress=(t,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),i=Bt(window,"pointerup",(a,c)=>{if(!this.checkPressEnd())return;const{onTap:u,onTapCancel:h,globalTapTarget:d}=this.node.getProps();ae.update(()=>{!d&&!mp(this.node.current,a.target)?h&&h(a,c):u&&u(a,c)})},{passive:!(r.onTap||r.onPointerUp)}),o=Bt(window,"pointercancel",(a,c)=>this.cancelPress(a,c),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=xn(i,o),this.startPress(t,n)},this.startAccessiblePress=()=>{const t=i=>{if(i.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||va("up",(c,u)=>{const{onTap:h}=this.node.getProps();h&&ae.update(()=>h(c,u))})};this.removeEndListeners(),this.removeEndListeners=Ot(this.node.current,"keyup",o),va("down",(a,c)=>{this.startPress(a,c)})},n=Ot(this.node.current,"keydown",t),r=()=>{this.isPressing&&va("cancel",(i,o)=>this.cancelPress(i,o))},s=Ot(this.node.current,"blur",r);this.removeAccessibleListeners=xn(n,s)}}startPress(t,n){this.isPressing=!0;const{onTapStart:r,whileTap:s}=this.node.getProps();s&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&ae.update(()=>r(t,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!fp()}cancelPress(t,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&ae.update(()=>r(t,n))}mount(){const t=this.node.getProps(),n=Bt(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),r=Ot(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=xn(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const Tl=new WeakMap,ya=new WeakMap,ey=e=>{const t=Tl.get(e.target);t&&t(e)},ty=e=>{e.forEach(ey)};function ny({root:e,...t}){const n=e||document;ya.has(n)||ya.set(n,{});const r=ya.get(n),s=JSON.stringify(t);return r[s]||(r[s]=new IntersectionObserver(ty,{root:e,...t})),r[s]}function ry(e,t,n){const r=ny(t);return Tl.set(e,n),r.observe(e),()=>{Tl.delete(e),r.unobserve(e)}}const sy={some:0,all:1};class iy extends En{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:i}=t,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:sy[s]},a=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,i&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:h,onViewportLeave:d}=this.node.getProps(),m=u?h:d;m&&m(c)};return ry(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(oy(t,n))&&this.startObserver()}unmount(){}}function oy({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const ay={inView:{Feature:iy},tap:{Feature:Zv},focus:{Feature:Jv},hover:{Feature:Yv}};function pp(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function ly(e){const t={};return e.values.forEach((n,r)=>t[r]=n.get()),t}function cy(e){const t={};return e.values.forEach((n,r)=>t[r]=n.getVelocity()),t}function Vo(e,t,n){const r=e.getProps();return qc(r,t,n!==void 0?n:r.custom,ly(e),cy(e))}let uy=ye,Kc=ye;const vn=e=>e*1e3,zt=e=>e/1e3,dy={current:!1},gp=e=>Array.isArray(e)&&typeof e[0]=="number";function xp(e){return!!(!e||typeof e=="string"&&vp[e]||gp(e)||Array.isArray(e)&&e.every(xp))}const is=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,vp={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:is([0,.65,.55,1]),circOut:is([.55,0,1,.45]),backIn:is([.31,.01,.66,-.59]),backOut:is([.33,1.53,.69,.99])};function yp(e){if(e)return gp(e)?is(e):Array.isArray(e)?e.map(yp):vp[e]}function hy(e,t,n,{delay:r=0,duration:s,repeat:i=0,repeatType:o="loop",ease:a,times:c}={}){const u={[t]:n};c&&(u.offset=c);const h=yp(a);return Array.isArray(h)&&(u.easing=h),e.animate(u,{delay:r,duration:s,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"})}function fy(e,{repeat:t,repeatType:n="loop"}){const r=t&&n!=="loop"&&t%2===1?0:e.length-1;return e[r]}const wp=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,my=1e-7,py=12;function gy(e,t,n,r,s){let i,o,a=0;do o=t+(n-t)/2,i=wp(o,r,s)-e,i>0?n=o:t=o;while(Math.abs(i)>my&&++a<py);return o}function Qs(e,t,n,r){if(e===t&&n===r)return ye;const s=i=>gy(i,0,1,e,n);return i=>i===0||i===1?i:wp(s(i),t,r)}const xy=Qs(.42,0,1,1),vy=Qs(0,0,.58,1),bp=Qs(.42,0,.58,1),yy=e=>Array.isArray(e)&&typeof e[0]!="number",Sp=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,kp=e=>t=>1-e(1-t),Qc=e=>1-Math.sin(Math.acos(e)),jp=kp(Qc),wy=Sp(Qc),Cp=Qs(.33,1.53,.69,.99),Xc=kp(Cp),by=Sp(Xc),Sy=e=>(e*=2)<1?.5*Xc(e):.5*(2-Math.pow(2,-10*(e-1))),ky={linear:ye,easeIn:xy,easeInOut:bp,easeOut:vy,circIn:Qc,circInOut:wy,circOut:jp,backIn:Xc,backInOut:by,backOut:Cp,anticipate:Sy},Pd=e=>{if(Array.isArray(e)){Kc(e.length===4);const[t,n,r,s]=e;return Qs(t,n,r,s)}else if(typeof e=="string")return ky[e];return e},Yc=(e,t)=>n=>!!(qs(n)&&jv.test(n)&&n.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(n,t)),Pp=(e,t,n)=>r=>{if(!qs(r))return r;const[s,i,o,a]=r.match(Fo);return{[e]:parseFloat(s),[t]:parseFloat(i),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},jy=e=>bn(0,255,e),wa={...nr,transform:e=>Math.round(jy(e))},Gn={test:Yc("rgb","red"),parse:Pp("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+wa.transform(e)+", "+wa.transform(t)+", "+wa.transform(n)+", "+gs(ps.transform(r))+")"};function Cy(e){let t="",n="",r="",s="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),s=e.substring(4,5),t+=t,n+=n,r+=r,s+=s),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const El={test:Yc("#"),parse:Cy,transform:Gn.transform},yr={test:Yc("hsl","hue"),parse:Pp("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+At.transform(gs(t))+", "+At.transform(gs(n))+", "+gs(ps.transform(r))+")"},He={test:e=>Gn.test(e)||El.test(e)||yr.test(e),parse:e=>Gn.test(e)?Gn.parse(e):yr.test(e)?yr.parse(e):El.parse(e),transform:e=>qs(e)?e:e.hasOwnProperty("red")?Gn.transform(e):yr.transform(e)},pe=(e,t,n)=>-n*e+n*t+e;function ba(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function Py({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let s=0,i=0,o=0;if(!t)s=i=o=n;else{const a=n<.5?n*(1+t):n+t-n*t,c=2*n-a;s=ba(c,a,e+1/3),i=ba(c,a,e),o=ba(c,a,e-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:r}}const Sa=(e,t,n)=>{const r=e*e;return Math.sqrt(Math.max(0,n*(t*t-r)+r))},Ty=[El,Gn,yr],Ey=e=>Ty.find(t=>t.test(e));function Td(e){const t=Ey(e);let n=t.parse(e);return t===yr&&(n=Py(n)),n}const Tp=(e,t)=>{const n=Td(e),r=Td(t),s={...n};return i=>(s.red=Sa(n.red,r.red,i),s.green=Sa(n.green,r.green,i),s.blue=Sa(n.blue,r.blue,i),s.alpha=pe(n.alpha,r.alpha,i),Gn.transform(s))};function Ny(e){var t,n;return isNaN(e)&&qs(e)&&(((t=e.match(Fo))===null||t===void 0?void 0:t.length)||0)+(((n=e.match(Zm))===null||n===void 0?void 0:n.length)||0)>0}const Ep={regex:Sv,countKey:"Vars",token:"${v}",parse:ye},Np={regex:Zm,countKey:"Colors",token:"${c}",parse:He.parse},_p={regex:Fo,countKey:"Numbers",token:"${n}",parse:nr.parse};function ka(e,{regex:t,countKey:n,token:r,parse:s}){const i=e.tokenised.match(t);i&&(e["num"+n]=i.length,e.tokenised=e.tokenised.replace(t,r),e.values.push(...i.map(s)))}function co(e){const t=e.toString(),n={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&ka(n,Ep),ka(n,Np),ka(n,_p),n}function Ap(e){return co(e).values}function Mp(e){const{values:t,numColors:n,numVars:r,tokenised:s}=co(e),i=t.length;return o=>{let a=s;for(let c=0;c<i;c++)c<r?a=a.replace(Ep.token,o[c]):c<r+n?a=a.replace(Np.token,He.transform(o[c])):a=a.replace(_p.token,gs(o[c]));return a}}const _y=e=>typeof e=="number"?0:e;function Ay(e){const t=Ap(e);return Mp(e)(t.map(_y))}const Sn={test:Ny,parse:Ap,createTransformer:Mp,getAnimatableNone:Ay},Dp=(e,t)=>n=>`${n>0?t:e}`;function Lp(e,t){return typeof e=="number"?n=>pe(e,t,n):He.test(e)?Tp(e,t):e.startsWith("var(")?Dp(e,t):Ip(e,t)}const Rp=(e,t)=>{const n=[...e],r=n.length,s=e.map((i,o)=>Lp(i,t[o]));return i=>{for(let o=0;o<r;o++)n[o]=s[o](i);return n}},My=(e,t)=>{const n={...e,...t},r={};for(const s in n)e[s]!==void 0&&t[s]!==void 0&&(r[s]=Lp(e[s],t[s]));return s=>{for(const i in r)n[i]=r[i](s);return n}},Ip=(e,t)=>{const n=Sn.createTransformer(t),r=co(e),s=co(t);return r.numVars===s.numVars&&r.numColors===s.numColors&&r.numNumbers>=s.numNumbers?xn(Rp(r.values,s.values),n):Dp(e,t)},Gs=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r},Ed=(e,t)=>n=>pe(e,t,n);function Dy(e){return typeof e=="number"?Ed:typeof e=="string"?He.test(e)?Tp:Ip:Array.isArray(e)?Rp:typeof e=="object"?My:Ed}function Ly(e,t,n){const r=[],s=n||Dy(e[0]),i=e.length-1;for(let o=0;o<i;o++){let a=s(e[o],e[o+1]);if(t){const c=Array.isArray(t)?t[o]||ye:t;a=xn(c,a)}r.push(a)}return r}function Op(e,t,{clamp:n=!0,ease:r,mixer:s}={}){const i=e.length;if(Kc(i===t.length),i===1)return()=>t[0];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=Ly(t,r,s),a=o.length,c=u=>{let h=0;if(a>1)for(;h<e.length-2&&!(u<e[h+1]);h++);const d=Gs(e[h],e[h+1],u);return o[h](d)};return n?u=>c(bn(e[0],e[i-1],u)):c}function Ry(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const s=Gs(0,t,r);e.push(pe(n,1,s))}}function Iy(e){const t=[0];return Ry(t,e.length-1),t}function Oy(e,t){return e.map(n=>n*t)}function Fy(e,t){return e.map(()=>t||bp).splice(0,e.length-1)}function uo({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const s=yy(r)?r.map(Pd):Pd(r),i={done:!1,value:t[0]},o=Oy(n&&n.length===t.length?n:Iy(t),e),a=Op(o,t,{ease:Array.isArray(s)?s:Fy(t,s)});return{calculatedDuration:e,next:c=>(i.value=a(c),i.done=c>=e,i)}}function Fp(e,t){return t?e*(1e3/t):0}const Gy=5;function Gp(e,t,n){const r=Math.max(t-Gy,0);return Fp(n-e(r),t-r)}const ja=.001,Vy=.01,Nd=10,By=.05,zy=1;function Hy({duration:e=800,bounce:t=.25,velocity:n=0,mass:r=1}){let s,i;uy(e<=vn(Nd));let o=1-t;o=bn(By,zy,o),e=bn(Vy,Nd,zt(e)),o<1?(s=u=>{const h=u*o,d=h*e,m=h-n,v=Nl(u,o),w=Math.exp(-d);return ja-m/v*w},i=u=>{const d=u*o*e,m=d*n+n,v=Math.pow(o,2)*Math.pow(u,2)*e,w=Math.exp(-d),b=Nl(Math.pow(u,2),o);return(-s(u)+ja>0?-1:1)*((m-v)*w)/b}):(s=u=>{const h=Math.exp(-u*e),d=(u-n)*e+1;return-ja+h*d},i=u=>{const h=Math.exp(-u*e),d=(n-u)*(e*e);return h*d});const a=5/e,c=$y(s,i,a);if(e=vn(e),isNaN(c))return{stiffness:100,damping:10,duration:e};{const u=Math.pow(c,2)*r;return{stiffness:u,damping:o*2*Math.sqrt(r*u),duration:e}}}const Uy=12;function $y(e,t,n){let r=n;for(let s=1;s<Uy;s++)r=r-e(r)/t(r);return r}function Nl(e,t){return e*Math.sqrt(1-t*t)}const Wy=["duration","bounce"],qy=["stiffness","damping","mass"];function _d(e,t){return t.some(n=>e[n]!==void 0)}function Ky(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!_d(e,qy)&&_d(e,Wy)){const n=Hy(e);t={...t,...n,mass:1},t.isResolvedFromDuration=!0}return t}function Vp({keyframes:e,restDelta:t,restSpeed:n,...r}){const s=e[0],i=e[e.length-1],o={done:!1,value:s},{stiffness:a,damping:c,mass:u,duration:h,velocity:d,isResolvedFromDuration:m}=Ky({...r,velocity:-zt(r.velocity||0)}),v=d||0,w=c/(2*Math.sqrt(a*u)),b=i-s,S=zt(Math.sqrt(a/u)),p=Math.abs(b)<5;n||(n=p?.01:2),t||(t=p?.005:.5);let f;if(w<1){const g=Nl(S,w);f=y=>{const k=Math.exp(-w*S*y);return i-k*((v+w*S*b)/g*Math.sin(g*y)+b*Math.cos(g*y))}}else if(w===1)f=g=>i-Math.exp(-S*g)*(b+(v+S*b)*g);else{const g=S*Math.sqrt(w*w-1);f=y=>{const k=Math.exp(-w*S*y),j=Math.min(g*y,300);return i-k*((v+w*S*b)*Math.sinh(j)+g*b*Math.cosh(j))/g}}return{calculatedDuration:m&&h||null,next:g=>{const y=f(g);if(m)o.done=g>=h;else{let k=v;g!==0&&(w<1?k=Gp(f,g,y):k=0);const j=Math.abs(k)<=n,C=Math.abs(i-y)<=t;o.done=j&&C}return o.value=o.done?i:y,o}}}function Ad({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:a,max:c,restDelta:u=.5,restSpeed:h}){const d=e[0],m={done:!1,value:d},v=P=>a!==void 0&&P<a||c!==void 0&&P>c,w=P=>a===void 0?c:c===void 0||Math.abs(a-P)<Math.abs(c-P)?a:c;let b=n*t;const S=d+b,p=o===void 0?S:o(S);p!==S&&(b=p-d);const f=P=>-b*Math.exp(-P/r),g=P=>p+f(P),y=P=>{const N=f(P),E=g(P);m.done=Math.abs(N)<=u,m.value=m.done?p:E};let k,j;const C=P=>{v(m.value)&&(k=P,j=Vp({keyframes:[m.value,w(m.value)],velocity:Gp(g,P,m.value),damping:s,stiffness:i,restDelta:u,restSpeed:h}))};return C(0),{calculatedDuration:null,next:P=>{let N=!1;return!j&&k===void 0&&(N=!0,y(P),C(P)),k!==void 0&&P>k?j.next(P-k):(!N&&y(P),m)}}}const Qy=e=>{const t=({timestamp:n})=>e(n);return{start:()=>ae.update(t,!0),stop:()=>qt(t),now:()=>Fe.isProcessing?Fe.timestamp:performance.now()}},Md=2e4;function Dd(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<Md;)t+=n,r=e.next(t);return t>=Md?1/0:t}const Xy={decay:Ad,inertia:Ad,tween:uo,keyframes:uo,spring:Vp};function ho({autoplay:e=!0,delay:t=0,driver:n=Qy,keyframes:r,type:s="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:a="loop",onPlay:c,onStop:u,onComplete:h,onUpdate:d,...m}){let v=1,w=!1,b,S;const p=()=>{S=new Promise(L=>{b=L})};p();let f;const g=Xy[s]||uo;let y;g!==uo&&typeof r[0]!="number"&&(y=Op([0,100],r,{clamp:!1}),r=[0,100]);const k=g({...m,keyframes:r});let j;a==="mirror"&&(j=g({...m,keyframes:[...r].reverse(),velocity:-(m.velocity||0)}));let C="idle",P=null,N=null,E=null;k.calculatedDuration===null&&i&&(k.calculatedDuration=Dd(k));const{calculatedDuration:V}=k;let K=1/0,q=1/0;V!==null&&(K=V+o,q=K*(i+1)-o);let X=0;const le=L=>{if(N===null)return;v>0&&(N=Math.min(N,L)),v<0&&(N=Math.min(L-q/v,N)),P!==null?X=P:X=Math.round(L-N)*v;const F=X-t*(v>=0?1:-1),re=v>=0?F<0:F>q;X=Math.max(F,0),C==="finished"&&P===null&&(X=q);let $=X,ie=k;if(i){const Pe=Math.min(X,q)/K;let Ae=Math.floor(Pe),ze=Pe%1;!ze&&Pe>=1&&(ze=1),ze===1&&Ae--,Ae=Math.min(Ae,i+1),!!(Ae%2)&&(a==="reverse"?(ze=1-ze,o&&(ze-=o/K)):a==="mirror"&&(ie=j)),$=bn(0,1,ze)*K}const z=re?{done:!1,value:r[0]}:ie.next($);y&&(z.value=y(z.value));let{done:se}=z;!re&&V!==null&&(se=v>=0?X>=q:X<=0);const et=P===null&&(C==="finished"||C==="running"&&se);return d&&d(z.value),et&&T(),z},I=()=>{f&&f.stop(),f=void 0},W=()=>{C="idle",I(),b(),p(),N=E=null},T=()=>{C="finished",h&&h(),I(),b()},M=()=>{if(w)return;f||(f=n(le));const L=f.now();c&&c(),P!==null?N=L-P:(!N||C==="finished")&&(N=L),C==="finished"&&p(),E=N,P=null,C="running",f.start()};e&&M();const A={then(L,F){return S.then(L,F)},get time(){return zt(X)},set time(L){L=vn(L),X=L,P!==null||!f||v===0?P=L:N=f.now()-L/v},get duration(){const L=k.calculatedDuration===null?Dd(k):k.calculatedDuration;return zt(L)},get speed(){return v},set speed(L){L===v||!f||(v=L,A.time=zt(X))},get state(){return C},play:M,pause:()=>{C="paused",P=X},stop:()=>{w=!0,C!=="idle"&&(C="idle",u&&u(),W())},cancel:()=>{E!==null&&le(E),W()},complete:()=>{C="finished"},sample:L=>(N=0,le(L))};return A}function Yy(e){let t;return()=>(t===void 0&&(t=e()),t)}const Jy=Yy(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Zy=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),xi=10,ew=2e4,tw=(e,t)=>t.type==="spring"||e==="backgroundColor"||!xp(t.ease);function nw(e,t,{onUpdate:n,onComplete:r,...s}){if(!(Jy()&&Zy.has(t)&&!s.repeatDelay&&s.repeatType!=="mirror"&&s.damping!==0&&s.type!=="inertia"))return!1;let o=!1,a,c,u=!1;const h=()=>{c=new Promise(g=>{a=g})};h();let{keyframes:d,duration:m=300,ease:v,times:w}=s;if(tw(t,s)){const g=ho({...s,repeat:0,delay:0});let y={done:!1,value:d[0]};const k=[];let j=0;for(;!y.done&&j<ew;)y=g.sample(j),k.push(y.value),j+=xi;w=void 0,d=k,m=j-xi,v="linear"}const b=hy(e.owner.current,t,d,{...s,duration:m,ease:v,times:w}),S=()=>{u=!1,b.cancel()},p=()=>{u=!0,ae.update(S),a(),h()};return b.onfinish=()=>{u||(e.set(fy(d,s)),r&&r(),p())},{then(g,y){return c.then(g,y)},attachTimeline(g){return b.timeline=g,b.onfinish=null,ye},get time(){return zt(b.currentTime||0)},set time(g){b.currentTime=vn(g)},get speed(){return b.playbackRate},set speed(g){b.playbackRate=g},get duration(){return zt(m)},play:()=>{o||(b.play(),qt(S))},pause:()=>b.pause(),stop:()=>{if(o=!0,b.playState==="idle")return;const{currentTime:g}=b;if(g){const y=ho({...s,autoplay:!1});e.setWithVelocity(y.sample(g-xi).value,y.sample(g).value,xi)}p()},complete:()=>{u||b.finish()},cancel:p}}function rw({keyframes:e,delay:t,onUpdate:n,onComplete:r}){const s=()=>(n&&n(e[e.length-1]),r&&r(),{time:0,speed:1,duration:0,play:ye,pause:ye,stop:ye,then:i=>(i(),Promise.resolve()),cancel:ye,complete:ye});return t?ho({keyframes:[0,1],duration:0,delay:t,onComplete:s}):s()}const sw={type:"spring",stiffness:500,damping:25,restSpeed:10},iw=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),ow={type:"keyframes",duration:.8},aw={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},lw=(e,{keyframes:t})=>t.length>2?ow:tr.has(e)?e.startsWith("scale")?iw(t[1]):sw:aw,_l=(e,t)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Sn.test(t)||t==="0")&&!t.startsWith("url(")),cw=new Set(["brightness","contrast","saturate","opacity"]);function uw(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(Fo)||[];if(!r)return e;const s=n.replace(r,"");let i=cw.has(t)?1:0;return r!==n&&(i*=100),t+"("+i+s+")"}const dw=/([a-z-]*)\(.*?\)/g,Al={...Sn,getAnimatableNone:e=>{const t=e.match(dw);return t?t.map(uw).join(" "):e}},hw={...ep,color:He,backgroundColor:He,outlineColor:He,fill:He,stroke:He,borderColor:He,borderTopColor:He,borderRightColor:He,borderBottomColor:He,borderLeftColor:He,filter:Al,WebkitFilter:Al},Jc=e=>hw[e];function Bp(e,t){let n=Jc(e);return n!==Al&&(n=Sn),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const zp=e=>/^0[^.\s]+$/.test(e);function fw(e){if(typeof e=="number")return e===0;if(e!==null)return e==="none"||e==="0"||zp(e)}function mw(e,t,n,r){const s=_l(t,n);let i;Array.isArray(n)?i=[...n]:i=[null,n];const o=r.from!==void 0?r.from:e.get();let a;const c=[];for(let u=0;u<i.length;u++)i[u]===null&&(i[u]=u===0?o:i[u-1]),fw(i[u])&&c.push(u),typeof i[u]=="string"&&i[u]!=="none"&&i[u]!=="0"&&(a=i[u]);if(s&&c.length&&a)for(let u=0;u<c.length;u++){const h=c[u];i[h]=Bp(t,a)}return i}function pw({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:a,from:c,elapsed:u,...h}){return!!Object.keys(h).length}function Zc(e,t){return e[t]||e.default||e}const gw={skipAnimations:!1},eu=(e,t,n,r={})=>s=>{const i=Zc(r,e)||{},o=i.delay||r.delay||0;let{elapsed:a=0}=r;a=a-vn(o);const c=mw(t,e,n,i),u=c[0],h=c[c.length-1],d=_l(e,u),m=_l(e,h);let v={keyframes:c,velocity:t.getVelocity(),ease:"easeOut",...i,delay:-a,onUpdate:w=>{t.set(w),i.onUpdate&&i.onUpdate(w)},onComplete:()=>{s(),i.onComplete&&i.onComplete()}};if(pw(i)||(v={...v,...lw(e,v)}),v.duration&&(v.duration=vn(v.duration)),v.repeatDelay&&(v.repeatDelay=vn(v.repeatDelay)),!d||!m||dy.current||i.type===!1||gw.skipAnimations)return rw(v);if(!r.isHandoff&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const w=nw(t,e,v);if(w)return w}return ho(v)};function fo(e){return!!(Ze(e)&&e.add)}const Hp=e=>/^\-?\d*\.?\d+$/.test(e);function tu(e,t){e.indexOf(t)===-1&&e.push(t)}function nu(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class ru{constructor(){this.subscriptions=[]}add(t){return tu(this.subscriptions,t),()=>nu(this.subscriptions,t)}notify(t,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,n,r);else for(let i=0;i<s;i++){const o=this.subscriptions[i];o&&o(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const xw=e=>!isNaN(parseFloat(e));class vw{constructor(t,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,s=!0)=>{this.prev=this.current,this.current=r;const{delta:i,timestamp:o}=Fe;this.lastUpdated!==o&&(this.timeDelta=i,this.lastUpdated=o,ae.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>ae.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=xw(this.current),this.owner=n.owner}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new ru);const r=this.events[t].add(n);return t==="change"?()=>{r(),ae.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,r){this.set(n),this.prev=t,this.timeDelta=r}jump(t){this.updateAndNotify(t),this.prev=t,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?Fp(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Or(e,t){return new vw(e,t)}const Up=e=>t=>t.test(e),yw={test:e=>e==="auto",parse:e=>e},$p=[nr,U,At,Jt,Pv,Cv,yw],Zr=e=>$p.find(Up(e)),ww=[...$p,He,Sn],bw=e=>ww.find(Up(e));function Sw(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,Or(n))}function kw(e,t){const n=Vo(e,t);let{transitionEnd:r={},transition:s={},...i}=n?e.makeTargetAnimatable(n,!1):{};i={...i,...r};for(const o in i){const a=Vv(i[o]);Sw(e,o,a)}}function jw(e,t,n){var r,s;const i=Object.keys(t).filter(a=>!e.hasValue(a)),o=i.length;if(o)for(let a=0;a<o;a++){const c=i[a],u=t[c];let h=null;Array.isArray(u)&&(h=u[0]),h===null&&(h=(s=(r=n[c])!==null&&r!==void 0?r:e.readValue(c))!==null&&s!==void 0?s:t[c]),h!=null&&(typeof h=="string"&&(Hp(h)||zp(h))?h=parseFloat(h):!bw(h)&&Sn.test(u)&&(h=Bp(c,u)),e.addValue(c,Or(h,{owner:e})),n[c]===void 0&&(n[c]=h),h!==null&&e.setBaseTarget(c,h))}}function Cw(e,t){return t?(t[e]||t.default||t).from:void 0}function Pw(e,t,n){const r={};for(const s in e){const i=Cw(s,t);if(i!==void 0)r[s]=i;else{const o=n.getValue(s);o&&(r[s]=o.get())}}return r}function Tw({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function Ew(e,t){const n=e.get();if(Array.isArray(t)){for(let r=0;r<t.length;r++)if(t[r]!==n)return!0}else return n!==t}function Wp(e,t,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:i=e.getDefaultTransition(),transitionEnd:o,...a}=e.makeTargetAnimatable(t);const c=e.getValue("willChange");r&&(i=r);const u=[],h=s&&e.animationState&&e.animationState.getState()[s];for(const d in a){const m=e.getValue(d),v=a[d];if(!m||v===void 0||h&&Tw(h,d))continue;const w={delay:n,elapsed:0,...Zc(i||{},d)};if(window.HandoffAppearAnimations){const p=e.getProps()[qm];if(p){const f=window.HandoffAppearAnimations(p,d,m,ae);f!==null&&(w.elapsed=f,w.isHandoff=!0)}}let b=!w.isHandoff&&!Ew(m,v);if(w.type==="spring"&&(m.getVelocity()||w.velocity)&&(b=!1),m.animation&&(b=!1),b)continue;m.start(eu(d,m,v,e.shouldReduceMotion&&tr.has(d)?{type:!1}:w));const S=m.animation;fo(c)&&(c.add(d),S.then(()=>c.remove(d))),u.push(S)}return o&&Promise.all(u).then(()=>{o&&kw(e,o)}),u}function Ml(e,t,n={}){const r=Vo(e,t,n.custom);let{transition:s=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const i=r?()=>Promise.all(Wp(e,r,n)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:h,staggerDirection:d}=s;return Nw(e,t,u+c,h,d,n)}:()=>Promise.resolve(),{when:a}=s;if(a){const[c,u]=a==="beforeChildren"?[i,o]:[o,i];return c().then(()=>u())}else return Promise.all([i(),o(n.delay)])}function Nw(e,t,n=0,r=0,s=1,i){const o=[],a=(e.variantChildren.size-1)*r,c=s===1?(u=0)=>u*r:(u=0)=>a-u*r;return Array.from(e.variantChildren).sort(_w).forEach((u,h)=>{u.notify("AnimationStart",t),o.push(Ml(u,t,{...i,delay:n+c(h)}).then(()=>u.notify("AnimationComplete",t)))}),Promise.all(o)}function _w(e,t){return e.sortNodePosition(t)}function Aw(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const s=t.map(i=>Ml(e,i,n));r=Promise.all(s)}else if(typeof t=="string")r=Ml(e,t,n);else{const s=typeof t=="function"?Vo(e,t,n.custom):t;r=Promise.all(Wp(e,s,n))}return r.then(()=>e.notify("AnimationComplete",t))}const Mw=[...Fc].reverse(),Dw=Fc.length;function Lw(e){return t=>Promise.all(t.map(({animation:n,options:r})=>Aw(e,n,r)))}function Rw(e){let t=Lw(e);const n=Ow();let r=!0;const s=(c,u)=>{const h=Vo(e,u);if(h){const{transition:d,transitionEnd:m,...v}=h;c={...c,...v,...m}}return c};function i(c){t=c(e)}function o(c,u){const h=e.getProps(),d=e.getVariantContext(!0)||{},m=[],v=new Set;let w={},b=1/0;for(let p=0;p<Dw;p++){const f=Mw[p],g=n[f],y=h[f]!==void 0?h[f]:d[f],k=Os(y),j=f===u?g.isActive:null;j===!1&&(b=p);let C=y===d[f]&&y!==h[f]&&k;if(C&&r&&e.manuallyAnimateOnMount&&(C=!1),g.protectedKeys={...w},!g.isActive&&j===null||!y&&!g.prevProp||Io(y)||typeof y=="boolean")continue;let N=Iw(g.prevProp,y)||f===u&&g.isActive&&!C&&k||p>b&&k,E=!1;const V=Array.isArray(y)?y:[y];let K=V.reduce(s,{});j===!1&&(K={});const{prevResolvedValues:q={}}=g,X={...q,...K},le=I=>{N=!0,v.has(I)&&(E=!0,v.delete(I)),g.needsAnimating[I]=!0};for(const I in X){const W=K[I],T=q[I];if(w.hasOwnProperty(I))continue;let M=!1;lo(W)&&lo(T)?M=!pp(W,T):M=W!==T,M?W!==void 0?le(I):v.add(I):W!==void 0&&v.has(I)?le(I):g.protectedKeys[I]=!0}g.prevProp=y,g.prevResolvedValues=K,g.isActive&&(w={...w,...K}),r&&e.blockInitialAnimation&&(N=!1),N&&(!C||E)&&m.push(...V.map(I=>({animation:I,options:{type:f,...c}})))}if(v.size){const p={};v.forEach(f=>{const g=e.getBaseTarget(f);g!==void 0&&(p[f]=g)}),m.push({animation:p})}let S=!!m.length;return r&&(h.initial===!1||h.initial===h.animate)&&!e.manuallyAnimateOnMount&&(S=!1),r=!1,S?t(m):Promise.resolve()}function a(c,u,h){var d;if(n[c].isActive===u)return Promise.resolve();(d=e.variantChildren)===null||d===void 0||d.forEach(v=>{var w;return(w=v.animationState)===null||w===void 0?void 0:w.setActive(c,u)}),n[c].isActive=u;const m=o(h,c);for(const v in n)n[v].protectedKeys={};return m}return{animateChanges:o,setActive:a,setAnimateFunction:i,getState:()=>n}}function Iw(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!pp(t,e):!1}function Nn(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Ow(){return{animate:Nn(!0),whileInView:Nn(),whileHover:Nn(),whileTap:Nn(),whileDrag:Nn(),whileFocus:Nn(),exit:Nn()}}class Fw extends En{constructor(t){super(t),t.animationState||(t.animationState=Rw(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();this.unmount(),Io(t)&&(this.unmount=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let Gw=0;class Vw extends En{constructor(){super(...arguments),this.id=Gw++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n,custom:r}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===s)return;const i=this.node.animationState.setActive("exit",!t,{custom:r??this.node.getProps().custom});n&&!t&&i.then(()=>n(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const Bw={animation:{Feature:Fw},exit:{Feature:Vw}},Ld=(e,t)=>Math.abs(e-t);function zw(e,t){const n=Ld(e.x,t.x),r=Ld(e.y,t.y);return Math.sqrt(n**2+r**2)}class qp{constructor(t,n,{transformPagePoint:r,contextWindow:s,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=Pa(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,v=zw(d.offset,{x:0,y:0})>=3;if(!m&&!v)return;const{point:w}=d,{timestamp:b}=Fe;this.history.push({...w,timestamp:b});const{onStart:S,onMove:p}=this.handlers;m||(S&&S(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),p&&p(this.lastMoveEvent,d)},this.handlePointerMove=(d,m)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=Ca(m,this.transformPagePoint),ae.update(this.updatePoint,!0)},this.handlePointerUp=(d,m)=>{this.end();const{onEnd:v,onSessionEnd:w,resumeAnimation:b}=this.handlers;if(this.dragSnapToOrigin&&b&&b(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const S=Pa(d.type==="pointercancel"?this.lastMoveEventInfo:Ca(m,this.transformPagePoint),this.history);this.startEvent&&v&&v(d,S),w&&w(d,S)},!up(t))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.contextWindow=s||window;const o=Go(t),a=Ca(o,this.transformPagePoint),{point:c}=a,{timestamp:u}=Fe;this.history=[{...c,timestamp:u}];const{onSessionStart:h}=n;h&&h(t,Pa(a,this.history)),this.removeListeners=xn(Bt(this.contextWindow,"pointermove",this.handlePointerMove),Bt(this.contextWindow,"pointerup",this.handlePointerUp),Bt(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),qt(this.updatePoint)}}function Ca(e,t){return t?{point:t(e.point)}:e}function Rd(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Pa({point:e},t){return{point:e,delta:Rd(e,Kp(t)),offset:Rd(e,Hw(t)),velocity:Uw(t,.1)}}function Hw(e){return e[0]}function Kp(e){return e[e.length-1]}function Uw(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const s=Kp(e);for(;n>=0&&(r=e[n],!(s.timestamp-r.timestamp>vn(t)));)n--;if(!r)return{x:0,y:0};const i=zt(s.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const o={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function it(e){return e.max-e.min}function Dl(e,t=0,n=.01){return Math.abs(e-t)<=n}function Id(e,t,n,r=.5){e.origin=r,e.originPoint=pe(t.min,t.max,e.origin),e.scale=it(n)/it(t),(Dl(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=pe(n.min,n.max,e.origin)-e.originPoint,(Dl(e.translate)||isNaN(e.translate))&&(e.translate=0)}function xs(e,t,n,r){Id(e.x,t.x,n.x,r?r.originX:void 0),Id(e.y,t.y,n.y,r?r.originY:void 0)}function Od(e,t,n){e.min=n.min+t.min,e.max=e.min+it(t)}function $w(e,t,n){Od(e.x,t.x,n.x),Od(e.y,t.y,n.y)}function Fd(e,t,n){e.min=t.min-n.min,e.max=e.min+it(t)}function vs(e,t,n){Fd(e.x,t.x,n.x),Fd(e.y,t.y,n.y)}function Ww(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?pe(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?pe(n,e,r.max):Math.min(e,n)),e}function Gd(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function qw(e,{top:t,left:n,bottom:r,right:s}){return{x:Gd(e.x,n,s),y:Gd(e.y,t,r)}}function Vd(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function Kw(e,t){return{x:Vd(e.x,t.x),y:Vd(e.y,t.y)}}function Qw(e,t){let n=.5;const r=it(e),s=it(t);return s>r?n=Gs(t.min,t.max-r,e.min):r>s&&(n=Gs(e.min,e.max-s,t.min)),bn(0,1,n)}function Xw(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const Ll=.35;function Yw(e=Ll){return e===!1?e=0:e===!0&&(e=Ll),{x:Bd(e,"left","right"),y:Bd(e,"top","bottom")}}function Bd(e,t,n){return{min:zd(e,t),max:zd(e,n)}}function zd(e,t){return typeof e=="number"?e:e[t]||0}const Hd=()=>({translate:0,scale:1,origin:0,originPoint:0}),wr=()=>({x:Hd(),y:Hd()}),Ud=()=>({min:0,max:0}),Se=()=>({x:Ud(),y:Ud()});function ct(e){return[e("x"),e("y")]}function Qp({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function Jw({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function Zw(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Ta(e){return e===void 0||e===1}function Rl({scale:e,scaleX:t,scaleY:n}){return!Ta(e)||!Ta(t)||!Ta(n)}function Dn(e){return Rl(e)||Xp(e)||e.z||e.rotate||e.rotateX||e.rotateY}function Xp(e){return $d(e.x)||$d(e.y)}function $d(e){return e&&e!=="0%"}function mo(e,t,n){const r=e-n,s=t*r;return n+s}function Wd(e,t,n,r,s){return s!==void 0&&(e=mo(e,s,r)),mo(e,n,r)+t}function Il(e,t=0,n=1,r,s){e.min=Wd(e.min,t,n,r,s),e.max=Wd(e.max,t,n,r,s)}function Yp(e,{x:t,y:n}){Il(e.x,t.translate,t.scale,t.originPoint),Il(e.y,n.translate,n.scale,n.originPoint)}function e1(e,t,n,r=!1){const s=n.length;if(!s)return;t.x=t.y=1;let i,o;for(let a=0;a<s;a++){i=n[a],o=i.projectionDelta;const c=i.instance;c&&c.style&&c.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&br(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,Yp(e,o)),r&&Dn(i.latestValues)&&br(e,i.latestValues))}t.x=qd(t.x),t.y=qd(t.y)}function qd(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function nn(e,t){e.min=e.min+t,e.max=e.max+t}function Kd(e,t,[n,r,s]){const i=t[s]!==void 0?t[s]:.5,o=pe(e.min,e.max,i);Il(e,t[n],t[r],o,t.scale)}const t1=["x","scaleX","originX"],n1=["y","scaleY","originY"];function br(e,t){Kd(e.x,t,t1),Kd(e.y,t,n1)}function Jp(e,t){return Qp(Zw(e.getBoundingClientRect(),t))}function r1(e,t,n){const r=Jp(e,n),{scroll:s}=t;return s&&(nn(r.x,s.offset.x),nn(r.y,s.offset.y)),r}const Zp=({current:e})=>e?e.ownerDocument.defaultView:null,s1=new WeakMap;class i1{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Se(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=h=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Go(h,"page").point)},i=(h,d)=>{const{drag:m,dragPropagation:v,onDragStart:w}=this.getProps();if(m&&!v&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=hp(m),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ct(S=>{let p=this.getAxisMotionValue(S).get()||0;if(At.test(p)){const{projection:f}=this.visualElement;if(f&&f.layout){const g=f.layout.layoutBox[S];g&&(p=it(g)*(parseFloat(p)/100))}}this.originPoint[S]=p}),w&&ae.update(()=>w(h,d),!1,!0);const{animationState:b}=this.visualElement;b&&b.setActive("whileDrag",!0)},o=(h,d)=>{const{dragPropagation:m,dragDirectionLock:v,onDirectionLock:w,onDrag:b}=this.getProps();if(!m&&!this.openGlobalLock)return;const{offset:S}=d;if(v&&this.currentDirection===null){this.currentDirection=o1(S),this.currentDirection!==null&&w&&w(this.currentDirection);return}this.updateAxis("x",d.point,S),this.updateAxis("y",d.point,S),this.visualElement.render(),b&&b(h,d)},a=(h,d)=>this.stop(h,d),c=()=>ct(h=>{var d;return this.getAnimationState(h)==="paused"&&((d=this.getAxisMotionValue(h).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new qp(t,{onSessionStart:s,onStart:i,onMove:o,onSessionEnd:a,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:Zp(this.visualElement)})}stop(t,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:s}=n;this.startAnimation(s);const{onDragEnd:i}=this.getProps();i&&ae.update(()=>i(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:s}=this.getProps();if(!r||!vi(t,s,this.currentDirection))return;const i=this.getAxisMotionValue(t);let o=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(o=Ww(o,this.constraints[t],this.elastic[t])),i.set(o)}resolveConstraints(){var t;const{dragConstraints:n,dragElastic:r}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,i=this.constraints;n&&vr(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&s?this.constraints=qw(s.layoutBox,n):this.constraints=!1,this.elastic=Yw(r),i!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&ct(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=Xw(s.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!vr(t))return!1;const r=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=r1(r,s.root,this.visualElement.getTransformPagePoint());let o=Kw(s.layout.layoutBox,i);if(n){const a=n(Jw(o));this.hasMutatedConstraints=!!a,a&&(o=Qp(a))}return o}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),c=this.constraints||{},u=ct(h=>{if(!vi(h,n,this.currentDirection))return;let d=c&&c[h]||{};o&&(d={min:0,max:0});const m=s?200:1e6,v=s?40:1e7,w={type:"inertia",velocity:r?t[h]:0,bounceStiffness:m,bounceDamping:v,timeConstant:750,restDelta:1,restSpeed:10,...i,...d};return this.startAxisValueAnimation(h,w)});return Promise.all(u).then(a)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return r.start(eu(t,r,0,n))}stopAnimation(){ct(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){ct(t=>{var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(t){const n="_drag"+t.toUpperCase(),r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){ct(n=>{const{drag:r}=this.getProps();if(!vi(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(n);if(s&&s.layout){const{min:o,max:a}=s.layout.layoutBox[n];i.set(t[n]-pe(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!vr(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};ct(o=>{const a=this.getAxisMotionValue(o);if(a){const c=a.get();s[o]=Qw({min:c,max:c},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),ct(o=>{if(!vi(o,t,null))return;const a=this.getAxisMotionValue(o),{min:c,max:u}=this.constraints[o];a.set(pe(c,u,s[o]))})}addListeners(){if(!this.visualElement.current)return;s1.set(this.visualElement,this);const t=this.visualElement.current,n=Bt(t,"pointerdown",c=>{const{drag:u,dragListener:h=!0}=this.getProps();u&&h&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();vr(c)&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),r();const o=Ot(window,"resize",()=>this.scalePositionWithinConstraints()),a=s.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(ct(h=>{const d=this.getAxisMotionValue(h);d&&(this.originPoint[h]+=c[h].translate,d.set(d.get()+c[h].translate))}),this.visualElement.render())});return()=>{o(),n(),i(),a&&a()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:o=Ll,dragMomentum:a=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:i,dragElastic:o,dragMomentum:a}}}function vi(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function o1(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class a1 extends En{constructor(t){super(t),this.removeGroupControls=ye,this.removeListeners=ye,this.controls=new i1(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ye}unmount(){this.removeGroupControls(),this.removeListeners()}}const Qd=e=>(t,n)=>{e&&ae.update(()=>e(t,n))};class l1 extends En{constructor(){super(...arguments),this.removePointerDownListener=ye}onPointerDown(t){this.session=new qp(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Zp(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:Qd(t),onStart:Qd(n),onMove:r,onEnd:(i,o)=>{delete this.session,s&&ae.update(()=>s(i,o))}}}mount(){this.removePointerDownListener=Bt(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function c1(){const e=x.useContext(Lo);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:n,register:r}=e,s=x.useId();return x.useEffect(()=>r(s),[]),!t&&n?[!1,()=>n&&n(s)]:[!0]}const Li={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Xd(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const es={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(U.test(e))e=parseFloat(e);else return e;const n=Xd(e,t.target.x),r=Xd(e,t.target.y);return`${n}% ${r}%`}},u1={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,s=Sn.parse(e);if(s.length>5)return r;const i=Sn.createTransformer(e),o=typeof s[0]!="number"?1:0,a=n.x.scale*t.x,c=n.y.scale*t.y;s[0+o]/=a,s[1+o]/=c;const u=pe(a,c,.5);return typeof s[2+o]=="number"&&(s[2+o]/=u),typeof s[3+o]=="number"&&(s[3+o]/=u),i(s)}};class d1 extends ue.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:i}=t;vv(h1),i&&(n.group&&n.group.add(i),r&&r.register&&s&&r.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Li.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:s,isPresent:i}=this.props,o=r.projection;return o&&(o.isPresent=i,s||t.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?o.promote():o.relegate()||ae.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),queueMicrotask(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=t;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function e0(e){const[t,n]=c1(),r=x.useContext(Vc);return ue.createElement(d1,{...e,layoutGroup:r,switchLayoutGroup:x.useContext(Qm),isPresent:t,safeToRemove:n})}const h1={borderRadius:{...es,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:es,borderTopRightRadius:es,borderBottomLeftRadius:es,borderBottomRightRadius:es,boxShadow:u1},t0=["TopLeft","TopRight","BottomLeft","BottomRight"],f1=t0.length,Yd=e=>typeof e=="string"?parseFloat(e):e,Jd=e=>typeof e=="number"||U.test(e);function m1(e,t,n,r,s,i){s?(e.opacity=pe(0,n.opacity!==void 0?n.opacity:1,p1(r)),e.opacityExit=pe(t.opacity!==void 0?t.opacity:1,0,g1(r))):i&&(e.opacity=pe(t.opacity!==void 0?t.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<f1;o++){const a=`border${t0[o]}Radius`;let c=Zd(t,a),u=Zd(n,a);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||Jd(c)===Jd(u)?(e[a]=Math.max(pe(Yd(c),Yd(u),r),0),(At.test(u)||At.test(c))&&(e[a]+="%")):e[a]=u}(t.rotate||n.rotate)&&(e.rotate=pe(t.rotate||0,n.rotate||0,r))}function Zd(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const p1=n0(0,.5,jp),g1=n0(.5,.95,ye);function n0(e,t,n){return r=>r<e?0:r>t?1:n(Gs(e,t,r))}function eh(e,t){e.min=t.min,e.max=t.max}function lt(e,t){eh(e.x,t.x),eh(e.y,t.y)}function th(e,t,n,r,s){return e-=t,e=mo(e,1/n,r),s!==void 0&&(e=mo(e,1/s,r)),e}function x1(e,t=0,n=1,r=.5,s,i=e,o=e){if(At.test(t)&&(t=parseFloat(t),t=pe(o.min,o.max,t/100)-o.min),typeof t!="number")return;let a=pe(i.min,i.max,r);e===i&&(a-=t),e.min=th(e.min,t,n,a,s),e.max=th(e.max,t,n,a,s)}function nh(e,t,[n,r,s],i,o){x1(e,t[n],t[r],t[s],t.scale,i,o)}const v1=["x","scaleX","originX"],y1=["y","scaleY","originY"];function rh(e,t,n,r){nh(e.x,t,v1,n?n.x:void 0,r?r.x:void 0),nh(e.y,t,y1,n?n.y:void 0,r?r.y:void 0)}function sh(e){return e.translate===0&&e.scale===1}function r0(e){return sh(e.x)&&sh(e.y)}function w1(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}function s0(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function ih(e){return it(e.x)/it(e.y)}class b1{constructor(){this.members=[]}add(t){tu(this.members,t),t.scheduleRender()}remove(t){if(nu(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(s=>t===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function oh(e,t,n){let r="";const s=e.x.translate/t.x,i=e.y.translate/t.y;if((s||i)&&(r=`translate3d(${s}px, ${i}px, 0) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{rotate:c,rotateX:u,rotateY:h}=n;c&&(r+=`rotate(${c}deg) `),u&&(r+=`rotateX(${u}deg) `),h&&(r+=`rotateY(${h}deg) `)}const o=e.x.scale*t.x,a=e.y.scale*t.y;return(o!==1||a!==1)&&(r+=`scale(${o}, ${a})`),r||"none"}const S1=(e,t)=>e.depth-t.depth;class k1{constructor(){this.children=[],this.isDirty=!1}add(t){tu(this.children,t),this.isDirty=!0}remove(t){nu(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(S1),this.isDirty=!1,this.children.forEach(t)}}function j1(e,t){const n=performance.now(),r=({timestamp:s})=>{const i=s-n;i>=t&&(qt(r),e(i-t))};return ae.read(r,!0),()=>qt(r)}function C1(e){window.MotionDebug&&window.MotionDebug.record(e)}function P1(e){return e instanceof SVGElement&&e.tagName!=="svg"}function T1(e,t,n){const r=Ze(e)?e:Or(e);return r.start(eu("",r,t,n)),r.animation}const ah=["","X","Y","Z"],E1={visibility:"hidden"},lh=1e3;let N1=0;const Ln={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function i0({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(o={},a=t==null?void 0:t()){this.id=N1++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Ln.totalNodes=Ln.resolvedTargetDeltas=Ln.recalculatedProjection=0,this.nodes.forEach(M1),this.nodes.forEach(O1),this.nodes.forEach(F1),this.nodes.forEach(D1),C1(Ln)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new k1)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new ru),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const c=this.eventHandlers.get(o);c&&c.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=P1(o),this.instance=o;const{layoutId:c,layout:u,visualElement:h}=this.options;if(h&&!h.current&&h.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(u||c)&&(this.isLayoutDirty=!0),e){let d;const m=()=>this.root.updateBlockedByResize=!1;e(o,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=j1(m,250),Li.hasAnimatedSinceResize&&(Li.hasAnimatedSinceResize=!1,this.nodes.forEach(uh))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&h&&(c||u)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:m,hasRelativeTargetChanged:v,layout:w})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const b=this.options.transition||h.getDefaultTransition()||H1,{onLayoutAnimationStart:S,onLayoutAnimationComplete:p}=h.getProps(),f=!this.targetLayout||!s0(this.targetLayout,w)||v,g=!m&&v;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||g||m&&(f||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,g);const y={...Zc(b,"layout"),onPlay:S,onComplete:p};(h.shouldReduceMotion||this.options.layoutRoot)&&(y.delay=0,y.type=!1),this.startAnimation(y)}else m||uh(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=w})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,qt(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(G1),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const d=this.path[h];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:a,layout:c}=this.options;if(a===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(ch);return}this.isUpdating||this.nodes.forEach(R1),this.isUpdating=!1,this.nodes.forEach(I1),this.nodes.forEach(_1),this.nodes.forEach(A1),this.clearAllSnapshots();const a=performance.now();Fe.delta=bn(0,1e3/60,a-Fe.timestamp),Fe.timestamp=a,Fe.isProcessing=!0,xa.update.process(Fe),xa.preRender.process(Fe),xa.render.process(Fe),Fe.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(L1),this.sharedNodes.forEach(V1)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ae.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ae.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Se(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:r(this.instance),offset:n(this.instance)})}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform,a=this.projectionDelta&&!r0(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,h=u!==this.prevTransformTemplateValue;o&&(a||Dn(this.latestValues)||h)&&(s(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let c=this.removeElementScroll(a);return o&&(c=this.removeTransform(c)),U1(c),{animationId:this.root.animationId,measuredBox:a,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return Se();const a=o.measureViewportBox(),{scroll:c}=this.root;return c&&(nn(a.x,c.offset.x),nn(a.y,c.offset.y)),a}removeElementScroll(o){const a=Se();lt(a,o);for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:h,options:d}=u;if(u!==this.root&&h&&d.layoutScroll){if(h.isRoot){lt(a,o);const{scroll:m}=this.root;m&&(nn(a.x,-m.offset.x),nn(a.y,-m.offset.y))}nn(a.x,h.offset.x),nn(a.y,h.offset.y)}}return a}applyTransform(o,a=!1){const c=Se();lt(c,o);for(let u=0;u<this.path.length;u++){const h=this.path[u];!a&&h.options.layoutScroll&&h.scroll&&h!==h.root&&br(c,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),Dn(h.latestValues)&&br(c,h.latestValues)}return Dn(this.latestValues)&&br(c,this.latestValues),c}removeTransform(o){const a=Se();lt(a,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!Dn(u.latestValues))continue;Rl(u.latestValues)&&u.updateSnapshot();const h=Se(),d=u.measurePageBox();lt(h,d),rh(a,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,h)}return Dn(this.latestValues)&&rh(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Fe.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==c;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:d,layoutId:m}=this.options;if(!(!this.layout||!(d||m))){if(this.resolvedRelativeTargetAt=Fe.timestamp,!this.targetDelta&&!this.relativeTarget){const v=this.getClosestProjectingParent();v&&v.layout&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Se(),this.relativeTargetOrigin=Se(),vs(this.relativeTargetOrigin,this.layout.layoutBox,v.layout.layoutBox),lt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Se(),this.targetWithTransforms=Se()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),$w(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):lt(this.target,this.layout.layoutBox),Yp(this.target,this.targetDelta)):lt(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const v=this.getClosestProjectingParent();v&&!!v.resumingFrom==!!this.resumingFrom&&!v.options.layoutScroll&&v.target&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Se(),this.relativeTargetOrigin=Se(),vs(this.relativeTargetOrigin,this.target,v.target),lt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Ln.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Rl(this.parent.latestValues)||Xp(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),c=!!this.resumingFrom||this!==a;let u=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(u=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===Fe.timestamp&&(u=!1),u)return;const{layout:h,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||d))return;lt(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,v=this.treeScale.y;e1(this.layoutCorrected,this.treeScale,this.path,c),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox);const{target:w}=a;if(!w){this.projectionTransform&&(this.projectionDelta=wr(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=wr(),this.projectionDeltaWithTransform=wr());const b=this.projectionTransform;xs(this.projectionDelta,this.layoutCorrected,w,this.latestValues),this.projectionTransform=oh(this.projectionDelta,this.treeScale),(this.projectionTransform!==b||this.treeScale.x!==m||this.treeScale.y!==v)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",w)),Ln.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,a=!1){const c=this.snapshot,u=c?c.latestValues:{},h={...this.latestValues},d=wr();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const m=Se(),v=c?c.source:void 0,w=this.layout?this.layout.source:void 0,b=v!==w,S=this.getStack(),p=!S||S.members.length<=1,f=!!(b&&!p&&this.options.crossfade===!0&&!this.path.some(z1));this.animationProgress=0;let g;this.mixTargetDelta=y=>{const k=y/1e3;dh(d.x,o.x,k),dh(d.y,o.y,k),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(vs(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),B1(this.relativeTarget,this.relativeTargetOrigin,m,k),g&&w1(this.relativeTarget,g)&&(this.isProjectionDirty=!1),g||(g=Se()),lt(g,this.relativeTarget)),b&&(this.animationValues=h,m1(h,u,this.latestValues,k,f,p)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=k},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(qt(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ae.update(()=>{Li.hasAnimatedSinceResize=!0,this.currentAnimation=T1(0,lh,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(lh),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:c,layout:u,latestValues:h}=o;if(!(!a||!c||!u)){if(this!==o&&this.layout&&u&&o0(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||Se();const d=it(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+d;const m=it(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+m}lt(a,c),br(a,h),xs(this.projectionDeltaWithTransform,this.layoutCorrected,a,h)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new b1),this.sharedNodes.get(o).add(a);const u=a.options.initialPromotionConfig;a.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:c}=o;if((c.rotate||c.rotateX||c.rotateY||c.rotateZ)&&(a=!0),!a)return;const u={};for(let h=0;h<ah.length;h++){const d="rotate"+ah[h];c[d]&&(u[d]=c[d],o.setStaticValue(d,0))}o.render();for(const h in u)o.setStaticValue(h,u[h]);o.scheduleRender()}getProjectionStyles(o){var a,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return E1;const u={visibility:""},h=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=Di(o==null?void 0:o.pointerEvents)||"",u.transform=h?h(this.latestValues,""):"none",u;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const b={};return this.options.layoutId&&(b.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,b.pointerEvents=Di(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Dn(this.latestValues)&&(b.transform=h?h({},""):"none",this.hasProjected=!1),b}const m=d.animationValues||d.latestValues;this.applyTransformsToTarget(),u.transform=oh(this.projectionDeltaWithTransform,this.treeScale,m),h&&(u.transform=h(m,u.transform));const{x:v,y:w}=this.projectionDelta;u.transformOrigin=`${v.origin*100}% ${w.origin*100}% 0`,d.animationValues?u.opacity=d===this?(c=(a=m.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:u.opacity=d===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const b in oo){if(m[b]===void 0)continue;const{correct:S,applyTo:p}=oo[b],f=u.transform==="none"?m[b]:S(m[b],d);if(p){const g=p.length;for(let y=0;y<g;y++)u[p[y]]=f}else u[b]=f}return this.options.layoutId&&(u.pointerEvents=d===this?Di(o==null?void 0:o.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(ch),this.root.sharedNodes.clear()}}}function _1(e){e.updateLayout()}function A1(e){var t;const n=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=e.layout,{animationType:i}=e.options,o=n.source!==e.layout.source;i==="size"?ct(d=>{const m=o?n.measuredBox[d]:n.layoutBox[d],v=it(m);m.min=r[d].min,m.max=m.min+v}):o0(i,n.layoutBox,r)&&ct(d=>{const m=o?n.measuredBox[d]:n.layoutBox[d],v=it(r[d]);m.max=m.min+v,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[d].max=e.relativeTarget[d].min+v)});const a=wr();xs(a,r,n.layoutBox);const c=wr();o?xs(c,e.applyTransform(s,!0),n.measuredBox):xs(c,r,n.layoutBox);const u=!r0(a);let h=!1;if(!e.resumeFrom){const d=e.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:m,layout:v}=d;if(m&&v){const w=Se();vs(w,n.layoutBox,m.layoutBox);const b=Se();vs(b,r,v.layoutBox),s0(w,b)||(h=!0),d.options.layoutRoot&&(e.relativeTarget=b,e.relativeTargetOrigin=w,e.relativeParent=d)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:c,layoutDelta:a,hasLayoutChanged:u,hasRelativeTargetChanged:h})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function M1(e){Ln.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function D1(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function L1(e){e.clearSnapshot()}function ch(e){e.clearMeasurements()}function R1(e){e.isLayoutDirty=!1}function I1(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function uh(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function O1(e){e.resolveTargetDelta()}function F1(e){e.calcProjection()}function G1(e){e.resetRotation()}function V1(e){e.removeLeadSnapshot()}function dh(e,t,n){e.translate=pe(t.translate,0,n),e.scale=pe(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function hh(e,t,n,r){e.min=pe(t.min,n.min,r),e.max=pe(t.max,n.max,r)}function B1(e,t,n,r){hh(e.x,t.x,n.x,r),hh(e.y,t.y,n.y,r)}function z1(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const H1={duration:.45,ease:[.4,0,.1,1]},fh=e=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(e),mh=fh("applewebkit/")&&!fh("chrome/")?Math.round:ye;function ph(e){e.min=mh(e.min),e.max=mh(e.max)}function U1(e){ph(e.x),ph(e.y)}function o0(e,t,n){return e==="position"||e==="preserve-aspect"&&!Dl(ih(t),ih(n),.2)}const $1=i0({attachResizeListener:(e,t)=>Ot(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Ea={current:void 0},a0=i0({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Ea.current){const e=new $1({});e.mount(window),e.setOptions({layoutScroll:!0}),Ea.current=e}return Ea.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),W1={pan:{Feature:l1},drag:{Feature:a1,ProjectionNode:a0,MeasureLayout:e0}},q1=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function K1(e){const t=q1.exec(e);if(!t)return[,];const[,n,r]=t;return[n,r]}function Ol(e,t,n=1){const[r,s]=K1(e);if(!r)return;const i=window.getComputedStyle(t).getPropertyValue(r);if(i){const o=i.trim();return Hp(o)?parseFloat(o):o}else return Pl(s)?Ol(s,t,n+1):s}function Q1(e,{...t},n){const r=e.current;if(!(r instanceof Element))return{target:t,transitionEnd:n};n&&(n={...n}),e.values.forEach(s=>{const i=s.get();if(!Pl(i))return;const o=Ol(i,r);o&&s.set(o)});for(const s in t){const i=t[s];if(!Pl(i))continue;const o=Ol(i,r);o&&(t[s]=o,n||(n={}),n[s]===void 0&&(n[s]=i))}return{target:t,transitionEnd:n}}const X1=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),l0=e=>X1.has(e),Y1=e=>Object.keys(e).some(l0),gh=e=>e===nr||e===U,xh=(e,t)=>parseFloat(e.split(", ")[t]),vh=(e,t)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const s=r.match(/^matrix3d\((.+)\)$/);if(s)return xh(s[1],t);{const i=r.match(/^matrix\((.+)\)$/);return i?xh(i[1],e):0}},J1=new Set(["x","y","z"]),Z1=Ws.filter(e=>!J1.has(e));function eb(e){const t=[];return Z1.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t.length&&e.render(),t}const Fr={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:vh(4,13),y:vh(5,14)};Fr.translateX=Fr.x;Fr.translateY=Fr.y;const tb=(e,t,n)=>{const r=t.measureViewportBox(),s=t.current,i=getComputedStyle(s),{display:o}=i,a={};o==="none"&&t.setStaticValue("display",e.display||"block"),n.forEach(u=>{a[u]=Fr[u](r,i)}),t.render();const c=t.measureViewportBox();return n.forEach(u=>{const h=t.getValue(u);h&&h.jump(a[u]),e[u]=Fr[u](c,i)}),e},nb=(e,t,n={},r={})=>{t={...t},r={...r};const s=Object.keys(t).filter(l0);let i=[],o=!1;const a=[];if(s.forEach(c=>{const u=e.getValue(c);if(!e.hasValue(c))return;let h=n[c],d=Zr(h);const m=t[c];let v;if(lo(m)){const w=m.length,b=m[0]===null?1:0;h=m[b],d=Zr(h);for(let S=b;S<w&&m[S]!==null;S++)v?Kc(Zr(m[S])===v):v=Zr(m[S])}else v=Zr(m);if(d!==v)if(gh(d)&&gh(v)){const w=u.get();typeof w=="string"&&u.set(parseFloat(w)),typeof m=="string"?t[c]=parseFloat(m):Array.isArray(m)&&v===U&&(t[c]=m.map(parseFloat))}else d!=null&&d.transform&&(v!=null&&v.transform)&&(h===0||m===0)?h===0?u.set(v.transform(h)):t[c]=d.transform(m):(o||(i=eb(e),o=!0),a.push(c),r[c]=r[c]!==void 0?r[c]:t[c],u.jump(m))}),a.length){const c=a.indexOf("height")>=0?window.pageYOffset:null,u=tb(t,e,a);return i.length&&i.forEach(([h,d])=>{e.getValue(h).set(d)}),e.render(),Ro&&c!==null&&window.scrollTo({top:c}),{target:u,transitionEnd:r}}else return{target:t,transitionEnd:r}};function rb(e,t,n,r){return Y1(t)?nb(e,t,n,r):{target:t,transitionEnd:r}}const sb=(e,t,n,r)=>{const s=Q1(e,t,r);return t=s.target,r=s.transitionEnd,rb(e,t,n,r)},Fl={current:null},c0={current:!1};function ib(){if(c0.current=!0,!!Ro)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Fl.current=e.matches;e.addListener(t),t()}else Fl.current=!1}function ob(e,t,n){const{willChange:r}=t;for(const s in t){const i=t[s],o=n[s];if(Ze(i))e.addValue(s,i),fo(r)&&r.add(s);else if(Ze(o))e.addValue(s,Or(i,{owner:e})),fo(r)&&r.remove(s);else if(o!==i)if(e.hasValue(s)){const a=e.getValue(s);!a.hasAnimated&&a.set(i)}else{const a=e.getStaticValue(s);e.addValue(s,Or(a!==void 0?a:i,{owner:e}))}}for(const s in n)t[s]===void 0&&e.removeValue(s);return t}const yh=new WeakMap,u0=Object.keys(Fs),ab=u0.length,wh=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],lb=Gc.length;class cb{constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:s,visualState:i},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>ae.render(this.render,!1,!0);const{latestValues:a,renderState:c}=i;this.latestValues=a,this.baseTarget={...a},this.initialValues=n.initial?{...a}:{},this.renderState=c,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=o,this.isControllingVariants=Oo(n),this.isVariantNode=Km(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:u,...h}=this.scrapeMotionValuesFromProps(n,{});for(const d in h){const m=h[d];a[d]!==void 0&&Ze(m)&&(m.set(a[d],!1),fo(u)&&u.add(d))}}scrapeMotionValuesFromProps(t,n){return{}}mount(t){this.current=t,yh.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),c0.current||ib(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Fl.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){yh.delete(this.current),this.projection&&this.projection.unmount(),qt(this.notifyUpdate),qt(this.render),this.valueSubscriptions.forEach(t=>t()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features)this.features[t].unmount();this.current=null}bindToMotionValue(t,n){const r=tr.has(t),s=n.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&ae.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),i=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,()=>{s(),i()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}loadFeatures({children:t,...n},r,s,i){let o,a;for(let c=0;c<ab;c++){const u=u0[c],{isEnabled:h,Feature:d,ProjectionNode:m,MeasureLayout:v}=Fs[u];m&&(o=m),h(n)&&(!this.features[u]&&d&&(this.features[u]=new d(this)),v&&(a=v))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:c,layout:u,drag:h,dragConstraints:d,layoutScroll:m,layoutRoot:v}=n;this.projection.setOptions({layoutId:c,layout:u,alwaysMeasureLayout:!!h||d&&vr(d),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof u=="string"?u:"both",initialPromotionConfig:i,layoutScroll:m,layoutRoot:v})}return a}updateFeatures(){for(const t in this.features){const n=this.features[t];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Se()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}makeTargetAnimatable(t,n=!0){return this.makeTargetAnimatableFromInstance(t,this.props,n)}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<wh.length;r++){const s=wh[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i=t["on"+s];i&&(this.propEventSubscriptions[s]=this.on(s,i))}this.prevMotionValues=ob(this,this.scrapeMotionValuesFromProps(t,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(t=!1){if(t)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const n={};for(let r=0;r<lb;r++){const s=Gc[r],i=this.props[s];(Os(i)||i===!1)&&(n[s]=i)}return n}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){n!==this.values.get(t)&&(this.removeValue(t),this.bindToMotionValue(t,n)),this.values.set(t,n),this.latestValues[t]=n.get()}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=Or(n,{owner:this}),this.addValue(t,r)),r}readValue(t){var n;return this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(n=this.getBaseTargetFromProps(this.props,t))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,t,this.options)}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var n;const{initial:r}=this.props,s=typeof r=="string"||typeof r=="object"?(n=qc(this.props,r))===null||n===void 0?void 0:n[t]:void 0;if(r&&s!==void 0)return s;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!Ze(i)?i:this.initialValues[t]!==void 0&&s===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new ru),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class d0 extends cb{sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}makeTargetAnimatableFromInstance({transition:t,transitionEnd:n,...r},{transformValues:s},i){let o=Pw(r,t||{},this);if(s&&(n&&(n=s(n)),r&&(r=s(r)),o&&(o=s(o))),i){jw(this,r,o);const a=sb(this,r,o,n);n=a.transitionEnd,r=a.target}return{transition:t,transitionEnd:n,...r}}}function ub(e){return window.getComputedStyle(e)}class db extends d0{constructor(){super(...arguments),this.type="html"}readValueFromInstance(t,n){if(tr.has(n)){const r=Jc(n);return r&&r.default||0}else{const r=ub(t),s=(Jm(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(t,{transformPagePoint:n}){return Jp(t,n)}build(t,n,r,s){zc(t,n,r,s.transformTemplate)}scrapeMotionValuesFromProps(t,n){return Wc(t,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Ze(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(t,n,r,s){sp(t,n,r,s)}}class hb extends d0{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(tr.has(n)){const r=Jc(n);return r&&r.default||0}return n=ip.has(n)?n:Oc(n),t.getAttribute(n)}measureInstanceViewportBox(){return Se()}scrapeMotionValuesFromProps(t,n){return ap(t,n)}build(t,n,r,s){Uc(t,n,r,this.isSVGTag,s.transformTemplate)}renderInstance(t,n,r,s){op(t,n,r,s)}mount(t){this.isSVGTag=$c(t.tagName),super.mount(t)}}const fb=(e,t)=>Bc(e)?new hb(t,{enableHardwareAcceleration:!1}):new db(t,{enableHardwareAcceleration:!0}),mb={layout:{ProjectionNode:a0,MeasureLayout:e0}},pb={...Bw,...ay,...W1,...mb},_=gv((e,t)=>Kv(e,t,pb,fb));function h0(){const e=x.useRef(!1);return Ic(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function gb(){const e=h0(),[t,n]=x.useState(0),r=x.useCallback(()=>{e.current&&n(t+1)},[t]);return[x.useCallback(()=>ae.postRender(r),[r]),t]}class xb extends x.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function vb({children:e,isPresent:t}){const n=x.useId(),r=x.useRef(null),s=x.useRef({width:0,height:0,top:0,left:0});return x.useInsertionEffect(()=>{const{width:i,height:o,top:a,left:c}=s.current;if(t||!r.current||!i||!o)return;r.current.dataset.motionPopId=n;const u=document.createElement("style");return document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${i}px !important;
            height: ${o}px !important;
            top: ${a}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[t]),x.createElement(xb,{isPresent:t,childRef:r,sizeRef:s},x.cloneElement(e,{ref:r}))}const Na=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:i,mode:o})=>{const a=lp(yb),c=x.useId(),u=x.useMemo(()=>({id:c,initial:t,isPresent:n,custom:s,onExitComplete:h=>{a.set(h,!0);for(const d of a.values())if(!d)return;r&&r()},register:h=>(a.set(h,!1),()=>a.delete(h))}),i?void 0:[n]);return x.useMemo(()=>{a.forEach((h,d)=>a.set(d,!1))},[n]),x.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),o==="popLayout"&&(e=x.createElement(vb,{isPresent:n},e)),x.createElement(Lo.Provider,{value:u},e)};function yb(){return new Map}function wb(e){return x.useEffect(()=>()=>e(),[])}const Rn=e=>e.key||"";function bb(e,t){e.forEach(n=>{const r=Rn(n);t.set(r,n)})}function Sb(e){const t=[];return x.Children.forEach(e,n=>{x.isValidElement(n)&&t.push(n)}),t}const we=({children:e,custom:t,initial:n=!0,onExitComplete:r,exitBeforeEnter:s,presenceAffectsLayout:i=!0,mode:o="sync"})=>{const a=x.useContext(Vc).forceRender||gb()[0],c=h0(),u=Sb(e);let h=u;const d=x.useRef(new Map).current,m=x.useRef(h),v=x.useRef(new Map).current,w=x.useRef(!0);if(Ic(()=>{w.current=!1,bb(u,v),m.current=h}),wb(()=>{w.current=!0,v.clear(),d.clear()}),w.current)return x.createElement(x.Fragment,null,h.map(f=>x.createElement(Na,{key:Rn(f),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:i,mode:o},f)));h=[...h];const b=m.current.map(Rn),S=u.map(Rn),p=b.length;for(let f=0;f<p;f++){const g=b[f];S.indexOf(g)===-1&&!d.has(g)&&d.set(g,void 0)}return o==="wait"&&d.size&&(h=[]),d.forEach((f,g)=>{if(S.indexOf(g)!==-1)return;const y=v.get(g);if(!y)return;const k=b.indexOf(g);let j=f;if(!j){const C=()=>{d.delete(g);const P=Array.from(v.keys()).filter(N=>!S.includes(N));if(P.forEach(N=>v.delete(N)),m.current=u.filter(N=>{const E=Rn(N);return E===g||P.includes(E)}),!d.size){if(c.current===!1)return;a(),r&&r()}};j=x.createElement(Na,{key:Rn(y),isPresent:!1,onExitComplete:C,custom:t,presenceAffectsLayout:i,mode:o},y),d.set(g,j)}h.splice(k,0,j)}),h=h.map(f=>{const g=f.key;return d.has(g)?f:x.createElement(Na,{key:Rn(f),isPresent:!0,presenceAffectsLayout:i,mode:o},f)}),x.createElement(x.Fragment,null,d.size?h:h.map(f=>x.cloneElement(f)))},_n={I:"I",O:"O",T:"T",S:"S",Z:"Z",J:"J",L:"L"},f0={[_n.I]:{shape:[[0,0,0,0],[1,1,1,1],[0,0,0,0],[0,0,0,0]],color:"#00f5ff",emoji:"",name:"I-Piece"},[_n.O]:{shape:[[1,1],[1,1]],color:"#ffff00",emoji:"",name:"O-Piece"},[_n.T]:{shape:[[0,1,0],[1,1,1],[0,0,0]],color:"#a000f0",emoji:"",name:"T-Piece"},[_n.S]:{shape:[[0,1,1],[1,1,0],[0,0,0]],color:"#00f000",emoji:"",name:"S-Piece"},[_n.Z]:{shape:[[1,1,0],[0,1,1],[0,0,0]],color:"#f00000",emoji:"",name:"Z-Piece"},[_n.J]:{shape:[[1,0,0],[1,1,1],[0,0,0]],color:"#0000f0",emoji:"",name:"J-Piece"},[_n.L]:{shape:[[0,0,1],[1,1,1],[0,0,0]],color:"#ff7f00",emoji:"",name:"L-Piece"}};let Ft={...f0};function bh(e){if(!e||!e.pieces){Ft={...f0};return}Object.keys(Ft).forEach(t=>{e.pieces[t]&&(Ft[t]={...Ft[t],color:e.pieces[t].color,emoji:e.pieces[t].emoji})})}if(typeof window<"u"){window.addEventListener("themeEquipped",e=>{bh(e.detail.theme)});try{const e=localStorage.getItem("cat-tetris-shopInventory");if(e){const n=JSON.parse(e).equippedTheme;Rc(()=>Promise.resolve().then(()=>lS),void 0).then(({PIECE_THEMES:r})=>{r[n]&&bh(r[n])})}}catch{}}function Nr(e){return{"#00f5ff":"#00f5ff","#ffff00":"#ffff00","#a000f0":"#a000f0","#00f000":"#00f000","#f00000":"#f00000","#0000f0":"#0000f0","#ff7f00":"#ff7f00"}[e]||e}class kb{constructor(){this.events={}}on(t,n){this.events[t]||(this.events[t]=[]),this.events[t].push(n)}off(t,n){this.events[t]&&(this.events[t]=this.events[t].filter(r=>r!==n))}emit(t,n){this.events[t]&&this.events[t].forEach(r=>{try{r(n)}catch(s){typeof window<"u"&&window.__ERROR_LOGGER__&&window.__ERROR_LOGGER__.logError("EventEmitter",`emit:${t}`,s.message,{event:t,stack:s.stack})}})}clear(){this.events={}}}const R=new kb,O={GAME_INITIALIZED:"game_initialized",PIECE_MOVED:"piece_moved",PIECE_ROTATED:"piece_rotated",PIECE_PLACED:"piece_placed",PIECE_HELD:"piece_held",HARD_DROP:"hard_drop",LINE_CLEARED:"line_cleared",T_SPIN:"t_spin",BACK_TO_BACK:"back_to_back",SCORE_UPDATED:"score_updated",LEVEL_UP:"level_up",GAME_OVER:"game_over",GAME_PAUSED:"game_paused",GAME_RESUMED:"game_resumed"},Ri=2;function jb({text:e,color:t,id:n}){return l.jsx(_.div,{initial:{opacity:1,y:0,scale:.5},animate:{opacity:0,y:-60,scale:1.3},exit:{opacity:0},transition:{duration:1.2,ease:"easeOut"},className:"absolute left-1/2 top-1/3 -translate-x-1/2 pointer-events-none font-black text-lg drop-shadow-lg whitespace-nowrap",style:{color:t,zIndex:50,textShadow:`0 0 12px ${t}`},children:e},n)}function Cb({lines:e}){const t=x.useMemo(()=>{const n=[];return e.forEach(r=>{for(let s=0;s<14;s++)n.push({id:`${r}-${s}`,startX:Math.random()*220,startY:(r+Ri)*21+10,endX:(Math.random()-.5)*300,endY:-(Math.random()*120+40),size:Math.random()*5+2,color:["#FFD700","#FF6B6B","#4ECDC4","#A78BFA","#F472B6","#34D399"][Math.floor(Math.random()*6)],delay:Math.random()*.15})}),n},[e]);return l.jsx("div",{className:"absolute inset-0 pointer-events-none overflow-visible",style:{zIndex:35},children:t.map(n=>l.jsx(_.div,{initial:{x:n.startX,y:n.startY,scale:1,opacity:1},animate:{x:n.startX+n.endX,y:n.startY+n.endY,scale:0,opacity:0},transition:{duration:.8,delay:n.delay,ease:"easeOut"},className:"absolute rounded-full",style:{width:n.size,height:n.size,backgroundColor:n.color,boxShadow:`0 0 ${n.size+4}px ${n.color}`}},n.id))})}const Pb=({board:e,currentPiece:t,dropPreview:n,gameOver:r})=>{var b;const[s,i]=x.useState([]),[o,a]=x.useState([]),[c,u]=x.useState(0),h=x.useRef(0),d=x.useRef(null),m=((b=e==null?void 0:e[0])==null?void 0:b.length)||10,v=x.useMemo(()=>[...Array(Ri).fill(null).map(()=>Array(m).fill(null)),...e],[e,m]);x.useEffect(()=>{const S=()=>{u(.12),setTimeout(()=>u(0),150)};return R.on("hard_drop",S),()=>R.off("hard_drop",S)},[]),x.useEffect(()=>{const S=[];for(let p=0;p<e.length;p++)e[p]&&e[p].every(f=>f!==null)&&S.push(p);S.length>0&&(i(S),u(S.length>=4?.3:.18),setTimeout(()=>u(0),250),setTimeout(()=>i([]),800))},[e]),x.useEffect(()=>{const S=p=>{const f=(p==null?void 0:p.linesCleared)||0;if(f<=0)return;let g,y;f===1?(g="Single",y="#4ECDC4"):f===2?(g="Double!",y="#A78BFA"):f===3?(g="Triple!!",y="#F472B6"):(g=" TETRIS!! ",y="#FFD700");const k=++h.current;a(j=>[...j,{id:k,text:g,color:y}]),setTimeout(()=>a(j=>j.filter(C=>C.id!==k)),1400)};return R.on("line_cleared",S),()=>R.off("line_cleared",S)},[]),x.useEffect(()=>{const S=p=>{const f=(p==null?void 0:p.combo)||0;if(f>=2){const g=++h.current;a(y=>[...y,{id:g,text:`${f}x Combo! `,color:"#FF6B6B"}]),setTimeout(()=>a(y=>y.filter(k=>k.id!==g)),1400)}};return R.on("score_updated",S),()=>R.off("score_updated",S)},[]),x.useEffect(()=>{const S=()=>{const p=++h.current;a(f=>[...f,{id:p,text:" Back-to-Back!",color:"#FBBF24"}]),setTimeout(()=>a(f=>f.filter(g=>g.id!==p)),1400)};return R.on("back_to_back",S),()=>R.off("back_to_back",S)},[]),x.useEffect(()=>{const S=()=>{const p=++h.current;a(f=>[...f,{id:p,text:"T-SPIN!",color:"#C084FC"}]),setTimeout(()=>a(f=>f.filter(g=>g.id!==p)),1400)};return R.on("t_spin",S),()=>R.off("t_spin",S)},[]);const w=x.useCallback((S,p,f,g)=>{let y=null,k=null;const j=s.includes(f);if(t){const{position:{x:C,y:P},shape:N}=t;for(let E=0;E<N.length;E++){for(let V=0;V<N[E].length;V++)N[E][V]&&C+V===p&&P+E===f&&(y=t);if(y)break}}if(n&&n!==t){const{position:{x:C,y:P},shape:N}=n;for(let E=0;E<N.length;E++){for(let V=0;V<N[E].length;V++)N[E][V]&&C+V===p&&P+E===f&&(k=n);if(k)break}}if(y){const C=Nr(y.color);return l.jsx("div",{className:"tetris-cell rounded-sm flex items-center justify-center border border-white/40",style:{backgroundColor:C,boxShadow:`0 0 6px ${C}80, inset 0 1px 0 rgba(255,255,255,0.3)`},children:l.jsx("span",{className:"text-xs drop-shadow",children:y.emoji})},`${p}-${f}`)}if(k){const C=Nr(k.color);return l.jsx("div",{className:"tetris-cell rounded-sm flex items-center justify-center border-2 border-dashed",style:{borderColor:C+"50",backgroundColor:C+"12"},children:l.jsx("span",{className:"text-xs opacity-30",children:k.emoji})},`${p}-${f}`)}if(S){const C=Nr(S.color);return l.jsx("div",{className:`cat-block tetris-cell rounded-sm flex items-center justify-center ${j?"line-clearing":""}`,style:{backgroundColor:j?"#fff":C,borderColor:"rgba(255, 255, 255, 0.35)",boxShadow:j?`0 0 20px #fff, 0 0 40px ${C}`:"inset 0 1px 0 rgba(255,255,255,0.25), 0 1px 3px rgba(0,0,0,0.3)",transform:j?"scale(1.1)":void 0,transition:"all 0.15s ease-out",zIndex:j?10:1},children:l.jsx("span",{className:`text-xs ${j?"opacity-0":""}`,children:S.emoji})},`${p}-${f}`)}return l.jsx("div",{className:`tetris-cell rounded-sm ${g?"bg-gray-900/30 border border-gray-500/10":"border border-white/[0.06] bg-white/[0.02]"}`},`${p}-${f}`)},[t,n,s]);return l.jsx("div",{className:"flex flex-col items-center",children:l.jsx("div",{className:"relative bg-gray-900/60 p-3 rounded-xl border-2 border-white/15 shadow-2xl overflow-hidden flex-shrink-0",ref:d,style:{width:"fit-content"},children:l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"tetris-grid",children:v.map((S,p)=>{const f=p-Ri,g=p<Ri;return S.map((y,k)=>w(y,k,f,g))})}),s.length>0&&l.jsx(l.Fragment,{children:l.jsx(Cb,{lines:s})}),l.jsx(we,{children:c>0&&l.jsx(_.div,{initial:{opacity:c},animate:{opacity:0},exit:{opacity:0},transition:{duration:.3},className:"absolute inset-0 rounded-lg pointer-events-none",style:{background:"white",zIndex:20}},"flash")}),l.jsx(we,{children:o.map(S=>l.jsx(jb,{id:S.id,text:S.text,color:S.color},S.id))}),r&&l.jsx(_.div,{initial:{opacity:0},animate:{opacity:1},className:"absolute inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center rounded-lg",style:{zIndex:50},children:l.jsxs(_.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",damping:12},className:"text-center",children:[l.jsx("div",{className:"text-5xl mb-2",children:""}),l.jsx("div",{className:"text-white font-black text-xl drop-shadow-lg",children:"Game Over!"})]})})]})})})},kn=ue.memo(Pb);class Tb{constructor(){this.HIGH_SCORE_KEY="tetris_high_score"}getHighScore(){try{const t=localStorage.getItem(this.HIGH_SCORE_KEY);return t?parseInt(t,10):0}catch{return 0}}saveHighScore(t){try{const n=this.getHighScore();return t>n?(localStorage.setItem(this.HIGH_SCORE_KEY,t.toString()),!0):!1}catch{return!1}}clearHighScore(){try{localStorage.removeItem(this.HIGH_SCORE_KEY)}catch{}}}const Sh=new Tb,Eb=({score:e,level:t,lines:n,combo:r})=>{const[s,i]=x.useState(0);return x.useEffect(()=>{i(Sh.getHighScore())},[]),x.useEffect(()=>{Sh.saveHighScore(e)&&i(e)},[e]),l.jsxs("div",{className:"bg-gray-900/50 p-2 rounded-xl border-2 border-white/20 shadow-2xl w-28",children:[l.jsx("h2",{className:"text-xs font-bold text-white mb-1 text-center",children:" Pontuao"}),l.jsxs("div",{className:"space-y-0.5 text-xs",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-white/70",children:"Pontos:"}),l.jsx("span",{className:"text-yellow-400 font-bold",children:e.toLocaleString()})]}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-white/70",children:"Recorde:"}),l.jsx("span",{className:"text-green-400 font-bold",children:s.toLocaleString()})]}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-white/70",children:"Nvel:"}),l.jsx("span",{className:"text-blue-400 font-bold",children:t})]}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-white/70",children:"Linhas:"}),l.jsx("span",{className:"text-purple-400 font-bold",children:n})]}),r>0&&l.jsxs("div",{className:"flex justify-between items-center bg-orange-500/20 px-1.5 py-0.5 rounded border border-orange-400/30 mt-0.5",children:[l.jsx("span",{className:"text-white/90",children:"Combo:"}),l.jsxs("span",{className:"text-orange-400 font-bold",children:[r,"x"]})]})]})]})},qn=ue.memo(Eb),Nb=({onMove:e,onRotate:t,onHardDrop:n,onPause:r,onHold:s,isPaused:i,gameOver:o,canHold:a})=>{const c=u=>{if(!o)switch(u){case"left":e("left");break;case"right":e("right");break;case"down":e("down");break;case"rotate":t();break;case"hardDrop":n();break;case"hold":s();break;case"pause":r();break}};return l.jsxs("div",{className:"flex flex-col items-center gap-1",children:[l.jsx("div",{className:"hidden lg:block",children:l.jsx("div",{className:"text-center text-white/50 text-[11px]",children:l.jsx("p",{children:"  mover |  girar |  soft | Espao = hard drop | C = hold"})})}),l.jsxs("div",{className:"lg:hidden",children:[l.jsxs("div",{className:"grid grid-cols-3 gap-3 max-w-xs",children:[l.jsx("div",{}),l.jsx(_.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>c("rotate"),disabled:o,className:"bg-blue-500 text-white p-4 rounded-full shadow-lg hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed",children:""}),l.jsx("div",{}),l.jsx(_.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>c("left"),disabled:o,className:"bg-gray-600 text-white p-4 rounded-full shadow-lg hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:""}),l.jsx(_.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>c("down"),disabled:o,className:"bg-gray-600 text-white p-4 rounded-full shadow-lg hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:""}),l.jsx(_.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>c("right"),disabled:o,className:"bg-gray-600 text-white p-4 rounded-full shadow-lg hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:""}),l.jsx(_.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>c("hardDrop"),disabled:o,className:"bg-red-500 text-white p-4 rounded-full shadow-lg hover:bg-red-600 disabled:opacity-50 disabled:cursor-not-allowed",children:""}),l.jsx(_.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>c("hold"),disabled:o||!a,className:`p-4 rounded-full shadow-lg disabled:opacity-50 disabled:cursor-not-allowed ${a?"bg-green-500 text-white hover:bg-green-600":"bg-gray-500 text-white"}`,children:""})]}),l.jsx("div",{className:"mt-4 flex justify-center",children:l.jsx(_.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>c("pause"),disabled:o,className:"bg-yellow-500 text-white px-6 py-3 rounded-lg shadow-lg hover:bg-yellow-600 disabled:opacity-50 disabled:cursor-not-allowed",children:i?" Continuar":" Pausar"})}),l.jsxs("div",{className:"mt-4 text-center text-white/60 text-xs",children:[l.jsx("p",{children:" Controles touch-friendly"}),l.jsx("p",{children:" Use a sombra para planejar!"})]})]})]})};function _b({scoreData:e,onClose:t}){const[n,r]=x.useState(!1),s=` Cat Tetris!
 ${e.score.toLocaleString()} pontos
 Nvel ${e.level}
 ${e.lines} linhas

Consegue me superar? `,i=async()=>{try{await navigator.clipboard.writeText(s),r(!0),setTimeout(()=>r(!1),2e3)}catch{}},o=async()=>{if(navigator.share)try{await navigator.share({title:"Minha pontuao no Cat Tetris",text:s})}catch(u){u.name}},a=()=>{const u=`https://twitter.com/intent/tweet?text=${encodeURIComponent(s)}`;window.open(u,"_blank","width=600,height=400")},c=()=>{const u=`https://wa.me/?text=${encodeURIComponent(s)}`;window.open(u,"_blank")};return l.jsxs(_.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-black/40 rounded-lg p-4 mt-4",children:[l.jsx("div",{className:"text-white/80 text-sm mb-3 text-center",children:"Compartilhe sua pontuao:"}),l.jsxs("div",{className:"flex flex-wrap gap-2 justify-center",children:[navigator.share&&l.jsx(_.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:o,className:"bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-lg font-bold flex items-center gap-2 transition-colors",children:" Compartilhar"}),l.jsx(_.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:i,className:`${n?"bg-green-600":"bg-gray-600 hover:bg-gray-500"} text-white px-4 py-2 rounded-lg font-bold flex items-center gap-2 transition-colors`,children:n?" Copiado!":" Copiar"}),l.jsx(_.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:a,className:"bg-[#1DA1F2] hover:bg-[#1a8cd8] text-white px-4 py-2 rounded-lg font-bold flex items-center gap-2 transition-colors",children:" Twitter"}),l.jsx(_.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:c,className:"bg-[#25D366] hover:bg-[#20bd5a] text-white px-4 py-2 rounded-lg font-bold flex items-center gap-2 transition-colors",children:" WhatsApp"})]}),t&&l.jsx("div",{className:"text-center mt-3",children:l.jsx("button",{onClick:t,className:"text-white/60 hover:text-white text-sm transition-colors",children:"Fechar"})})]})}function rr({itemCount:e=0,onConfirm:t,onBack:n,active:r=!0,vertical:s=!0,columns:i=1,wrap:o=!0}={}){const[a,c]=x.useState(0),u=x.useRef({}),h=x.useRef({}),d=250,m=400,v=x.useRef({}),w=.5;x.useEffect(()=>{c(p=>p>=e?Math.max(0,e-1):p)},[e]),x.useEffect(()=>{r&&c(0)},[r]);const b=x.useCallback(p=>{if(!p||p.length<2)return null;const f=p[0],g=p[1];return Math.abs(f)<w&&Math.abs(g)<w?null:Math.abs(f)>Math.abs(g)?f>0?"right":"left":g>0?"down":"up"},[]),S=x.useCallback(()=>{var W,T,M,A,L,F,re;if(!r||e===0)return;const p=navigator.getGamepads(),f=Array.from(p).find($=>$&&$.connected);if(!f)return;const g=Date.now(),y=b(f.axes),k=($,ie)=>{const z=`nav_${$}`,se=v.current[z+"_pressed"]||!1,et=v.current[z+"_start"]||0,Pe=u.current[z]||0;if(ie&&!se){v.current[z+"_pressed"]=!0,v.current[z+"_start"]=g,u.current[z]=g,j($);return}if(ie&&se){g-et>=m&&g-Pe>=d&&(u.current[z]=g,j($));return}!ie&&se&&(v.current[z+"_pressed"]=!1)},j=$=>{c(ie=>{let z=ie;if(i===1)$==="up"||$==="left"?(z=ie-1,z<0&&(z=o?e-1:0)):($==="down"||$==="right")&&(z=ie+1,z>=e&&(z=o?0:e-1));else{const se=Math.floor(ie/i),et=ie%i,Pe=Math.ceil(e/i);$==="up"?z=(se-1<0?o?Pe-1:0:se-1)*i+et:$==="down"?z=(se+1>=Pe?o?0:Pe-1:se+1)*i+et:$==="left"?(z=ie-1,z<0&&(z=o?e-1:0)):$==="right"&&(z=ie+1,z>=e&&(z=o?0:e-1)),z>=e&&(z=e-1)}return z});try{f.vibrationActuator&&f.vibrationActuator.playEffect("dual-rumble",{duration:30,strongMagnitude:.05,weakMagnitude:.03})}catch{}},C=((W=f.buttons[12])==null?void 0:W.pressed)||y==="up",P=((T=f.buttons[13])==null?void 0:T.pressed)||y==="down",N=((M=f.buttons[14])==null?void 0:M.pressed)||y==="left",E=((A=f.buttons[15])==null?void 0:A.pressed)||y==="right";s?(k("up",C),k("down",P),i>1&&(k("left",N),k("right",E))):(k("left",N),k("right",E));const V=(L=f.buttons[0])==null?void 0:L.pressed,K=h.current[0];if(V&&!K){t==null||t(a);try{f.vibrationActuator&&f.vibrationActuator.playEffect("dual-rumble",{duration:50,strongMagnitude:.15,weakMagnitude:.1})}catch{}}const q=(F=f.buttons[1])==null?void 0:F.pressed,X=h.current[1];q&&!X&&(n==null||n());const le=(re=f.buttons[9])==null?void 0:re.pressed,I=h.current[9];le&&!I&&(t==null||t(a)),h.current={0:V,1:q,9:le}},[r,e,i,o,s,t,n,b,a]);return x.useEffect(()=>{if(!r)return;const p=setInterval(S,16);return()=>clearInterval(p)},[r,S]),{selectedIndex:a,setSelectedIndex:c}}const Ab=({score:e,onRestart:t,onBackToMenu:n})=>{const r=typeof e=="number"?e:e.points,s=typeof e=="object"?e.level:1,i=typeof e=="object"?e.lines:0,o=[t,n],a=x.useCallback(d=>{var m;(m=o[d])==null||m.call(o)},[t,n]),{selectedIndex:c}=rr({itemCount:2,onConfirm:a,active:!0,wrap:!0}),u=d=>d<1e3?"No desista! Cada tentativa te torna melhor! ":d<5e3?"Bom trabalho! Continue praticando! ":d<1e4?"Excelente! Voc est ficando muito bom! ":"Incrvel! Voc  um mestre do Cat Tetris! ",h=d=>d<1e3?"":d<5e3?"":d<1e4?"":"";return l.jsx(_.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",children:l.jsx(_.div,{initial:{scale:.8,y:20},animate:{scale:1,y:0},transition:{type:"spring",damping:15},className:"bg-gray-900/90 p-8 rounded-2xl border-2 border-white/20 shadow-2xl max-w-md w-full mx-4 max-h-[90vh] overflow-y-auto",children:l.jsxs("div",{className:"text-center",children:[l.jsx(_.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring"},className:"text-6xl mb-4",children:h(r)}),l.jsx(_.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"text-3xl font-cat font-bold text-white mb-2",children:"Game Over!"}),l.jsxs(_.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-gradient-to-r from-yellow-400 to-orange-400 text-gray-900 font-bold text-xl p-3 rounded-lg mb-4",children:[r.toLocaleString()," pontos"]}),l.jsx(_.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"text-white/80 mb-6 text-lg",children:u(r)}),l.jsx(_.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.55},children:l.jsx(_b,{scoreData:{score:r,level:s,lines:i}})}),l.jsxs(_.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"space-y-3 mt-4",children:[l.jsx(_.button,{onClick:d=>{d.stopPropagation(),t()},whileHover:{scale:1.05},whileTap:{scale:.95},className:`w-full bg-gradient-to-r from-green-500 to-emerald-600 text-white font-bold py-3 px-6 rounded-lg hover:from-green-400 hover:to-emerald-500 transition-all duration-300 shadow-lg ${c===0?"ring-2 ring-yellow-400 ring-offset-2 ring-offset-gray-900 scale-105":""}`,children:" Jogar Novamente"}),l.jsx(_.button,{onClick:d=>{d.stopPropagation(),n()},whileHover:{scale:1.05},whileTap:{scale:.95},className:`w-full bg-gradient-to-r from-blue-500 to-cyan-600 text-white font-bold py-3 px-6 rounded-lg hover:from-blue-400 hover:to-cyan-500 transition-all duration-300 shadow-lg ${c===1?"ring-2 ring-yellow-400 ring-offset-2 ring-offset-gray-900 scale-105":""}`,children:" Voltar ao Menu"})]}),l.jsxs(_.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},className:"mt-6 text-center text-white/60 text-sm",children:[l.jsx("p",{children:" Dica: Use a sombra para planejar melhor!"}),l.jsx("p",{children:" Tente fazer combos para mais pontos!"})]})]})})})},Mb=({pieces:e})=>{const t=(n,r)=>{if(!n)return null;const s=Math.max(...n.shape.map(o=>o.length)),i=n.shape.length;return l.jsx("div",{className:"bg-gray-800/50 p-1.5 rounded-lg border border-white/20",children:l.jsx("div",{className:"flex justify-center",children:l.jsx("div",{className:"grid gap-1",style:{gridTemplateColumns:`repeat(${s}, 1fr)`,gridTemplateRows:`repeat(${i}, 1fr)`},children:n.shape.map((o,a)=>o.map((c,u)=>l.jsx("div",{className:`w-5 h-5 rounded-sm flex items-center justify-center ${c?"border border-white/40 shadow-sm":""}`,style:{backgroundColor:c?Nr(n.color):"transparent"},children:c&&c!==0?l.jsx("span",{className:"text-xs leading-none",children:n.emoji}):null},`${u}-${a}`)))})})},r)};return l.jsxs("div",{className:"bg-gray-900/50 p-2 rounded-xl border-2 border-white/20 shadow-2xl w-24",children:[l.jsxs("h2",{className:"text-xs font-bold text-white mb-1 text-center flex items-center justify-center gap-1",children:[l.jsx("span",{children:""}),l.jsx("span",{className:"hidden lg:inline",children:"Prximas"})]}),l.jsx("div",{className:"space-y-1.5",children:e.map((n,r)=>t(n,r))})]})},Kn=ue.memo(Mb),Db=({heldPiece:e,canHold:t})=>{const n=()=>{if(!e)return l.jsx("div",{className:"bg-gray-800/50 p-2 lg:p-4 rounded-lg border-2 border-dashed border-white/20 flex items-center justify-center",children:l.jsx("span",{className:"text-white/40 text-xs lg:text-sm",children:"Vazio"})});const r=Math.max(...e.shape.map(i=>i.length)),s=e.shape.length;return l.jsx("div",{className:"bg-gray-800/50 p-1.5 rounded-lg border border-white/20",children:l.jsx("div",{className:"flex justify-center",children:l.jsx("div",{className:"grid gap-1",style:{gridTemplateColumns:`repeat(${r}, 1fr)`,gridTemplateRows:`repeat(${s}, 1fr)`},children:e.shape.map((i,o)=>i.map((a,c)=>l.jsx("div",{className:`w-5 h-5 rounded-sm flex items-center justify-center ${a?"border border-white/40 shadow-sm":""}`,style:{backgroundColor:a?Nr(e.color):"transparent"},children:a&&a!==0?l.jsx("span",{className:"text-xs leading-none",children:e.emoji}):null},`${c}-${o}`)))})})})};return l.jsxs("div",{className:"bg-gray-900/50 p-2 rounded-xl border-2 border-white/20 shadow-2xl w-24",children:[l.jsxs("h2",{className:"text-xs font-bold text-white mb-1 text-center flex items-center justify-center gap-1",children:[l.jsx("span",{children:""}),l.jsx("span",{className:"hidden lg:inline",children:"Guardada"})]}),l.jsx("div",{children:n()})]})},Qn=ue.memo(Db),kh=500,_a="cat_tetris_error_log";class Lb{constructor(){this.logs=this._loadLogs(),this.sessionId=`session_${Date.now()}_${Math.random().toString(36).substr(2,6)}`,this._gameStateProvider=null,this._setupGlobalHandlers()}_loadLogs(){try{const t=localStorage.getItem(_a);return t?JSON.parse(t):[]}catch{return[]}}_saveLogs(){try{this.logs.length>kh&&(this.logs=this.logs.slice(-kh)),localStorage.setItem(_a,JSON.stringify(this.logs))}catch{this.logs=this.logs.slice(-50);try{localStorage.setItem(_a,JSON.stringify(this.logs))}catch{}}}_setupGlobalHandlers(){typeof window>"u"||(window.addEventListener("error",t=>{var n;this.logError("window","uncaughtError",t.message,{filename:t.filename,lineno:t.lineno,colno:t.colno,stack:(n=t.error)==null?void 0:n.stack})}),window.addEventListener("unhandledrejection",t=>{var n;this.logError("window","unhandledRejection",String(t.reason),{stack:(n=t.reason)==null?void 0:n.stack,type:typeof t.reason})}))}setGameStateProvider(t){this._gameStateProvider=t}_getGameStateSnapshot(){var t,n,r,s,i,o;if(!this._gameStateProvider)return null;try{const a=this._gameStateProvider();return a?{isPlaying:a.isPlaying,isPaused:a.isPaused,gameOver:a.gameOver,score:(t=a.score)==null?void 0:t.points,level:(n=a.score)==null?void 0:n.level,lines:(r=a.score)==null?void 0:r.lines,currentPiece:(s=a.currentPiece)==null?void 0:s.type,gameMode:((i=a.gameMode)==null?void 0:i.id)||((o=a.gameMode)==null?void 0:o.name)||null}:null}catch(a){return{snapshotError:a.message}}}logError(t,n,r,s=null){const i={id:`${Date.now()}_${Math.random().toString(36).substr(2,4)}`,timestamp:new Date().toISOString(),sessionId:this.sessionId,level:"error",source:t,action:n,message:r,details:s,gameState:this._getGameStateSnapshot()};return this.logs.push(i),this._saveLogs(),i}logWarn(t,n,r,s=null){const i={id:`${Date.now()}_${Math.random().toString(36).substr(2,4)}`,timestamp:new Date().toISOString(),sessionId:this.sessionId,level:"warn",source:t,action:n,message:r,details:s,gameState:this._getGameStateSnapshot()};return this.logs.push(i),this._saveLogs(),i}getErrors(){return this.logs.filter(t=>t.level==="error")}clearLogs(){this.logs=[],this._saveLogs()}}const Gt=new Lb;class Rb extends ue.Component{constructor(t){super(t),this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,n){Gt.logError("ErrorBoundary","componentDidCatch",t.message,{stack:t.stack,componentStack:n==null?void 0:n.componentStack}),Gt.saveForExternalAccess()}render(){return this.state.hasError?l.jsx("div",{className:"min-h-screen cat-bg flex items-center justify-center p-4",children:l.jsxs("div",{className:"game-container rounded-2xl p-6 shadow-2xl text-center",children:[l.jsx("h1",{className:"text-3xl font-cat font-bold text-white mb-4",children:" Ops! Algo deu errado"}),l.jsx("p",{className:"text-white/80 mb-4",children:"O jogo encontrou um problema inesperado."}),l.jsx("button",{onClick:()=>window.location.reload(),className:"bg-gradient-to-r from-cat-green to-cat-blue text-white font-bold py-3 px-6 rounded-xl hover:from-cat-blue hover:to-cat-green transition-all duration-200 border-2 border-white/30",children:" Reiniciar Jogo "}),!1]})}):this.props.children}}let Lt=null,jh=!1;function Ib(){Lt&&Lt.state==="suspended"&&Lt.resume().catch(()=>{})}function Ob(){jh||(jh=!0,["click","touchstart","keydown"].forEach(e=>{document.addEventListener(e,Ib,{once:!1,passive:!0})}))}function Gr(){if(Lt)return Lt.state==="suspended"&&Lt.resume().catch(()=>{}),Lt;try{return Lt=new(window.AudioContext||window.webkitAudioContext),Ob(),Lt}catch{return null}}function Fb(){const e=x.useCallback((a,c,u="sine")=>{const h=Gr();if(h)try{const d=h.createOscillator(),m=h.createGain();d.connect(m),m.connect(h.destination),d.frequency.setValueAtTime(a,h.currentTime),d.type=u,m.gain.setValueAtTime(.1,h.currentTime),m.gain.exponentialRampToValueAtTime(.001,h.currentTime+c),d.start(h.currentTime),d.stop(h.currentTime+c)}catch{}},[]),t=x.useCallback(()=>{e(523,.1)},[e]),n=x.useCallback(()=>{e(659,.2),setTimeout(()=>e(784,.15),50)},[e]),r=x.useCallback(()=>{e(440,.15),setTimeout(()=>e(330,.1),80)},[e]),s=x.useCallback(()=>{e(392,.1),setTimeout(()=>e(494,.1),100),setTimeout(()=>e(588,.15),200)},[e]),i=x.useCallback(()=>{const a=Gr();if(a)try{((h,d,m=.3)=>{h.forEach(v=>{const w=a.createOscillator(),b=a.createGain();w.connect(b),b.connect(a.destination),w.frequency.setValueAtTime(v,a.currentTime),w.type="triangle",b.gain.setValueAtTime(.05,a.currentTime+d),b.gain.exponentialRampToValueAtTime(.001,a.currentTime+d+m),w.start(a.currentTime+d),w.stop(a.currentTime+d+m)})})([523,659,784,1047],0,.5)}catch{}},[]),o=x.useCallback(()=>{e(698,.15),setTimeout(()=>e(880,.15),100),setTimeout(()=>e(1047,.2),200)},[e]);return{playMenuHover:t,playMenuSelect:n,playMenuBack:r,playMenuOpen:s,playGameStart:i,playPWAInstall:o}}class Gb{constructor(){this.services=new Map,this.singletons=new Map}register(t,n,r={}){this.services.set(t,{factory:n,singleton:r.singleton||!1,dependencies:r.dependencies||[]})}resolve(t){const n=this.services.get(t);if(!n)throw new Error(`Service '${t}' not found in container`);if(n.singleton&&this.singletons.has(t))return this.singletons.get(t);const r=n.dependencies.map(i=>this.resolve(i)),s=n.factory(...r);return n.singleton&&this.singletons.set(t,s),s}registerSingleton(t,n,r=[]){this.register(t,n,{singleton:!0,dependencies:r})}registerTransient(t,n,r=[]){this.register(t,n,{singleton:!1,dependencies:r})}has(t){return this.services.has(t)}clear(){this.services.clear(),this.singletons.clear()}}class Vb{initializeGame(){throw new Error("Must be implemented")}movePiece(t){throw new Error("Must be implemented")}rotatePiece(){throw new Error("Must be implemented")}rotatePieceLeft(){throw new Error("Must be implemented")}placePiece(){throw new Error("Must be implemented")}holdPiece(){throw new Error("Must be implemented")}hardDrop(){throw new Error("Must be implemented")}updateGame(t){throw new Error("Must be implemented")}pause(){throw new Error("Must be implemented")}resume(){throw new Error("Must be implemented")}restart(){throw new Error("Must be implemented")}getDropPreview(){throw new Error("Must be implemented")}}class po{constructor(t=10,n=20){this.width=t,this.height=n,this.bufferHeight=4,this.grid=this.createEmptyGrid(),this._buffer=this.createEmptyBuffer()}createEmptyGrid(){return Array(this.height).fill(null).map(()=>Array(this.width).fill(null))}createEmptyBuffer(){return Array(this.bufferHeight).fill(null).map(()=>Array(this.width).fill(null))}clone(){const t=new po(this.width,this.height);return t.grid=this.grid.map(n=>[...n]),t._buffer=this._buffer.map(n=>[...n]),t}isWithinBounds(t,n){return t>=0&&t<this.width&&n>=-this.bufferHeight&&n<this.height}getCell(t,n){if(!(t<0||t>=this.width)&&!(n<-this.bufferHeight||n>=this.height))return n<0?this._buffer[this.bufferHeight+n][t]:this.grid[n][t]}setCell(t,n,r){return t<0||t>=this.width||n<-this.bufferHeight||n>=this.height?!1:n<0?(this._buffer[this.bufferHeight+n][t]=r,!0):(this.grid[n][t]=r,!0)}clearCell(t,n){return this.setCell(t,n,null)}placePiece(t){t.getCells().forEach(r=>{this.setCell(r.x,r.y,{type:r.type,color:r.color,emoji:r.emoji})})}canPlacePiece(t){return t.getCells().every(r=>r.x<0||r.x>=this.width||r.y>=this.height||r.y<-this.bufferHeight?!1:this.getCell(r.x,r.y)===null)}clearLines(){const t=[...this._buffer,...this.grid],n=[];let r=0;for(let s=t.length-1;s>=0;s--)t[s].every(o=>o!==null)?r++:n.unshift(t[s]);for(;n.length<t.length;)n.unshift(Array(this.width).fill(null));return this._buffer=n.slice(0,this.bufferHeight),this.grid=n.slice(this.bufferHeight),r}getFilledRows(){const t=[];for(let n=0;n<this.height;n++)this.grid[n].every(r=>r!==null)&&t.push(n);return t}isGameOver(){return this._buffer.some(t=>t.some(n=>n!==null))}getBoardState(){return this.grid.map(t=>[...t])}setBoardState(t){this.grid=t.map(n=>[...n]),this._buffer=this.createEmptyBuffer()}clear(){this.grid=this.createEmptyGrid(),this._buffer=this.createEmptyBuffer()}addGarbageLines(t,n=-1){if(t<=0)return!1;const r=n>=0?n:Math.floor(Math.random()*this.width),s=[];for(let c=0;c<t;c++){const u=Array(this.width).fill(null).map((h,d)=>d===r?null:{type:"garbage",color:"#808080",emoji:""});s.push(u)}const i=this.grid.splice(0,t),o=this._buffer.splice(0,t);return this._buffer.push(...i),this.grid.push(...s),o.some(c=>c.some(u=>u!==null))}}class go{constructor(){this.points=0,this.level=1,this.lines=0,this.combo=0,this.tSpins=0,this.backToBack=0,this.tetrisCount=0,this._fixedLevel=null}addPoints(t){this.points+=t}addLines(t){this.lines+=t,this.updateLevel()}incrementCombo(){this.combo++}resetCombo(){this.combo=0}addTSpin(){this.tSpins++}addBackToBack(){this.backToBack++}addTetris(){this.tetrisCount++}updateLevel(){this._fixedLevel||(this.level=Math.min(15,Math.floor(this.lines/10)+1))}getLevel(){return this.level}getDropTime(){const t=this._fixedLevel||this.level;return[1e3,793,618,473,355,262,190,135,94,64,43,28,18,11,7][Math.min(t,15)-1]||7}reset(){this.points=0,this.level=1,this.lines=0,this.combo=0,this.tSpins=0,this.backToBack=0,this.tetrisCount=0,this._fixedLevel=null}clone(){const t=new go;return t.points=this.points,t.level=this.level,t.lines=this.lines,t.combo=this.combo,t.tSpins=this.tSpins,t.backToBack=this.backToBack,t.tetrisCount=this.tetrisCount,t}toJSON(){return{points:this.points,level:this.level,lines:this.lines,combo:this.combo,tSpins:this.tSpins,backToBack:this.backToBack,tetrisCount:this.tetrisCount}}}class Et{constructor(t,n,r,s,i,o=!1,a=0){this.type=t,this.shape=n,this.color=r,this.emoji=s,this.position=i,this.isTSpin=o,this.rotationState=a}move(t,n){return new Et(this.type,this.shape,this.color,this.emoji,{x:this.position.x+t,y:this.position.y+n},this.isTSpin,this.rotationState)}rotate(){const t=this.shape[0].map((n,r)=>this.shape.map(s=>s[r]).reverse());return new Et(this.type,t,this.color,this.emoji,this.position,this.isTSpin,(this.rotationState+1)%4)}setTSpin(t){return new Et(this.type,this.shape,this.color,this.emoji,this.position,t,this.rotationState)}clone(){return new Et(this.type,this.shape.map(t=>[...t]),this.color,this.emoji,{...this.position},this.isTSpin,this.rotationState)}reset(t,n,r,s,i,o=!1){return this.type=t,this.shape=n,this.color=r,this.emoji=s,this.position=i,this.isTSpin=o,this.rotationState=0,this}getWidth(){var t;return((t=this.shape[0])==null?void 0:t.length)||0}getHeight(){return this.shape.length||0}getCells(){const t=[];return this.shape.forEach((n,r)=>{n.forEach((s,i)=>{s&&t.push({x:this.position.x+i,y:this.position.y+r,type:this.type,color:this.color,emoji:this.emoji})})}),t}}class Bb{calculateScore(t,n,r,s,i){throw new Error("Must be implemented")}calculateSoftDropPoints(){throw new Error("Must be implemented")}calculateTSpinBonus(t){throw new Error("Must be implemented")}calculateBackToBackBonus(t){throw new Error("Must be implemented")}calculateComboBonus(t){throw new Error("Must be implemented")}}class jn extends Bb{calculateScore(t,n,r,s,i){let o=this.getBasePoints(t);return s&&(o=this.calculateTSpinBonus(t)),i&&(o=this.calculateBackToBackBonus(o)),o*=n,o+=this.calculateComboBonus(r),o}calculateSoftDropPoints(){return 1}calculateTSpinBonus(t){return[0,800,1200,1600,2e3][t]||0}calculateBackToBackBonus(t){return Math.floor(t*1.5)}calculateComboBonus(t){return t*50}getBasePoints(t){return[0,100,300,500,800][t]||0}}const Ve={BOARD_WIDTH:10,BOARD_HEIGHT:20,BUFFER_ROWS:4,INITIAL_DROP_TIME:1e3,LOCK_DELAY:500,SOFT_DROP_MULTIPLIER:20,NEXT_PIECES_COUNT:3,BAG_SIZE:7,KICK_OFFSETS:[{x:-1,y:0},{x:1,y:0},{x:0,y:-1},{x:-1,y:-1},{x:1,y:-1}],SRS_KICKS_CW:{"0>1":[{x:-1,y:0},{x:-1,y:-1},{x:0,y:2},{x:-1,y:2}],"1>2":[{x:1,y:0},{x:1,y:1},{x:0,y:-2},{x:1,y:-2}],"2>3":[{x:1,y:0},{x:1,y:-1},{x:0,y:2},{x:1,y:2}],"3>0":[{x:-1,y:0},{x:-1,y:1},{x:0,y:-2},{x:-1,y:-2}]},SRS_KICKS_CCW:{"1>0":[{x:1,y:0},{x:1,y:1},{x:0,y:-2},{x:1,y:-2}],"2>1":[{x:-1,y:0},{x:-1,y:-1},{x:0,y:2},{x:-1,y:2}],"3>2":[{x:-1,y:0},{x:-1,y:1},{x:0,y:-2},{x:-1,y:-2}],"0>3":[{x:1,y:0},{x:1,y:-1},{x:0,y:2},{x:1,y:2}]},DROP_TIMES:[1e3,850,700,600,500,400,350,300,250,200,150,100,80,60,50],LEVEL_LINES_REQUIREMENT:10,MAX_LEVEL:15};class Xn extends Vb{constructor(t,n,r,s=new jn){super(),this.pieceFactory=t,this.movementStrategyFactory=n,this.gameRepository=r,this.scoringService=s,this.board=new po(Ve.BOARD_WIDTH,Ve.BOARD_HEIGHT),this.score=new go,this.currentPiece=null,this.nextPieces=[],this.heldPiece=null,this.canHold=!0,this.isPlaying=!1,this.isPaused=!1,this.gameOver=!1,this.lastDropTime=0,this.backToBack=!1,this._lockDelayActive=!1,this._lockDelayElapsed=0,this._lockDelayResets=0,this._lockDelayMax=Ve.LOCK_DELAY,this._lockDelayMaxResets=15,this.gameMode=null,this.modeTimeElapsed=0,this.modeStartTime=0,this.pendingGarbage=0,this._lastAttack=0,this._dirty=!0,this._cachedState=null}_markDirty(){this._dirty=!0,this._cachedState=null}get isDirty(){return this._dirty}clearDirty(){this._dirty=!1}initializeGame(){this.pieceFactory.resetBag(),this.board=new po(Ve.BOARD_WIDTH,Ve.BOARD_HEIGHT),this.score=new go,this.currentPiece=this.pieceFactory.createRandomPiece(),this.nextPieces=this.pieceFactory.createNextPieces(Ve.NEXT_PIECES_COUNT),this.heldPiece=null,this.canHold=!0,this.isPlaying=!1,this.isPaused=!1,this.gameOver=!1,this.lastDropTime=0,this.backToBack=!1,this._lockDelayActive=!1,this._lockDelayElapsed=0,this._lockDelayResets=0,this.modeTimeElapsed=0,this.modeStartTime=Date.now(),this.pendingGarbage=0,this._lastAttack=0,this.applyGameMode(),R.emit(O.GAME_INITIALIZED),this._markDirty()}setGameMode(t){this.gameMode=t}applyGameMode(){if(!this.gameMode||!this.gameMode.rules)return;const t=this.gameMode.rules;t.startLevel&&(this.score.level=t.startLevel),t.fixedLevel?this.score._fixedLevel=t.fixedLevel:this.score._fixedLevel=null,this._modeRules=t}movePiece(t){var n,r;if(!(!this.currentPiece||this.gameOver||this.isPaused))try{const s=this.movementStrategyFactory.createStrategy(t),i=s.execute(this.currentPiece,this.board.grid);if(i!==this.currentPiece){if(this.currentPiece=i,this._markDirty(),t==="down"){if(this._lockDelayActive=!1,this._lockDelayElapsed=0,this.lastDropTime=0,s.getSoftDropPoints){const o=this.scoringService.calculateSoftDropPoints();this.score.addPoints(o)}}else(t==="left"||t==="right")&&(this._resetLockDelay(),this._checkUngrounded());R.emit(O.PIECE_MOVED,{direction:t,piece:i})}else t==="down"&&(this._markDirty(),this._lockDelayActive||(this._lockDelayActive=!0,this._lockDelayElapsed=0,this._lockDelayResets=0))}catch(s){Gt.logError("GameService","movePiece",s.message,{direction:t,pieceType:(n=this.currentPiece)==null?void 0:n.type,piecePos:(r=this.currentPiece)==null?void 0:r.position,stack:s.stack})}}rotatePiece(){var t,n;if(!(!this.currentPiece||this.gameOver||this.isPaused))try{const s=this.movementStrategyFactory.createStrategy("rotate").execute(this.currentPiece,this.board.grid);s!==this.currentPiece&&(this.currentPiece=s,this._markDirty(),this._resetLockDelay(),this._checkUngrounded(),R.emit(O.PIECE_ROTATED,{piece:s}))}catch(r){Gt.logError("GameService","rotatePiece",r.message,{pieceType:(t=this.currentPiece)==null?void 0:t.type,piecePos:(n=this.currentPiece)==null?void 0:n.position,stack:r.stack})}}rotatePieceLeft(){if(!this.currentPiece||this.gameOver||this.isPaused)return;const n=this.movementStrategyFactory.createStrategy("rotateLeft").execute(this.currentPiece,this.board.grid);n!==this.currentPiece&&(this.currentPiece=n,this._markDirty(),this._resetLockDelay(),this._checkUngrounded(),R.emit(O.PIECE_ROTATED,{piece:n}))}placePiece(){var n,r;if(!this.currentPiece)return;this._markDirty(),this._lockDelayActive=!1,this._lockDelayElapsed=0,this._lockDelayResets=0,this._lastAttack=0,this.board.placePiece(this.currentPiece);const t=this.board.clearLines();if(t>0){this.score.addLines(t),this.score.incrementCombo();const s=this.currentPiece.isTSpin,i=this.scoringService.calculateScore(t,this.score.getLevel(),this.score.combo,s,this.backToBack);if(this.score.addPoints(i),s||t===4?(this.backToBack&&R.emit(O.BACK_TO_BACK),this.backToBack=!0,s&&(this.score.addTSpin(),R.emit(O.T_SPIN,{linesCleared:t}))):this.backToBack=!1,R.emit(O.LINE_CLEARED,{linesCleared:t}),R.emit(O.SCORE_UPDATED,{score:this.score.points,level:this.score.level,combo:this.score.combo,points:i,isTSpin:s}),this._lastAttack=this._calculateAttack(t,s,this.score.combo,this.backToBack),this._lastAttack>0&&this.pendingGarbage>0){const o=Math.min(this._lastAttack,this.pendingGarbage);this._lastAttack-=o,this.pendingGarbage-=o}}else this.score.resetCombo();if(R.emit(O.PIECE_PLACED,{piece:this.currentPiece,linesCleared:t}),this.pendingGarbage>0){const s=this.board.addGarbageLines(this.pendingGarbage);if(this.pendingGarbage=0,s&&this.board.isGameOver()){this.gameOver=!0,R.emit(O.GAME_OVER);return}}if(this.getNextPiece(),this.canHold=!0,(n=this._modeRules)!=null&&n.lineGoal&&this.score.lines>=this._modeRules.lineGoal){this.gameOver=!0,R.emit(O.GAME_OVER);return}if(((r=this._modeRules)==null?void 0:r.gameOver)===!1){if(this.board.isGameOver()){this.board._buffer=this.board.createEmptyBuffer();for(let s=0;s<4;s++)for(let i=0;i<this.board.width;i++)this.board.clearCell(i,s)}}else this.board.isGameOver()&&(this.gameOver=!0,R.emit(O.GAME_OVER))}_calculateAttack(t,n,r,s){if(t===0)return 0;let i=0;if(n?i=[0,2,4,6][t]||0:i=[0,0,1,2,4][t]||0,s&&(n||t===4)&&(i+=1),r>=1){const a=[0,0,1,1,2,2,3,3,4,4];i+=a[Math.min(r,a.length-1)]||4}return this.board.grid.every(a=>a.every(c=>c===null))&&(i=10),i}receiveGarbage(t){t>0&&(this.pendingGarbage+=t,this._markDirty())}consumeAttack(){const t=this._lastAttack;return this._lastAttack=0,t}holdPiece(){var t,n;if(!(!this.canHold||!this.currentPiece)){this._lockDelayActive=!1,this._lockDelayElapsed=0,this._lockDelayResets=0;try{const r=this.heldPiece,s=this.currentPiece.type,i=Ft[s];if(this.heldPiece=new Et(s,i.shape,i.color,i.emoji,{x:3,y:0},!1,0),r){const o=r.type==="I"?{x:3,y:-2}:{x:3,y:0},a=Ft[r.type];this.currentPiece=new Et(r.type,a.shape,a.color,a.emoji,o,!1,0)}else this.getNextPiece();this.canHold=!1,this._markDirty(),R.emit(O.PIECE_HELD,{heldPiece:this.heldPiece})}catch(r){Gt.logError("GameService","holdPiece",r.message,{currentPieceType:(t=this.currentPiece)==null?void 0:t.type,heldPieceType:(n=this.heldPiece)==null?void 0:n.type,stack:r.stack})}}}hardDrop(){var t,n;if(!(!this.currentPiece||this.gameOver||this.isPaused))try{this._lockDelayActive=!1,this._lockDelayElapsed=0;const s=this.movementStrategyFactory.createStrategy("hardDrop").execute(this.currentPiece,this.board.grid);this.currentPiece=s.piece,this.score.addPoints(s.dropDistance),this._markDirty();const i=this.currentPiece;R.emit(O.HARD_DROP,{dropDistance:s.dropDistance}),R.emit(O.PIECE_MOVED,{direction:"hardDrop",piece:i}),this.placePiece()}catch(r){Gt.logError("GameService","hardDrop",r.message,{pieceType:(t=this.currentPiece)==null?void 0:t.type,piecePos:(n=this.currentPiece)==null?void 0:n.position,stack:r.stack})}}updateGame(t){var n;if(!(!this.isPlaying||this.gameOver||this.isPaused)){if((n=this._modeRules)!=null&&n.timeLimit&&(this.modeTimeElapsed=(Date.now()-this.modeStartTime)/1e3,this.modeTimeElapsed>=this._modeRules.timeLimit)){this.gameOver=!0,this._markDirty(),R.emit(O.GAME_OVER);return}if(this._lockDelayActive){if(this._lockDelayElapsed+=t,this._lockDelayElapsed>=this._lockDelayMax){this._lockDelayActive=!1,this._lockDelayElapsed=0,this.placePiece(),this.lastDropTime=0;return}return}this.lastDropTime+=t,this.lastDropTime>=this.score.getDropTime()&&(this.movePiece("down"),this.lastDropTime=0)}}_resetLockDelay(){this._lockDelayActive&&this._lockDelayResets<this._lockDelayMaxResets&&(this._lockDelayElapsed=0,this._lockDelayResets++)}_checkUngrounded(){if(!this._lockDelayActive||!this.currentPiece)return;this.board.canPlacePiece(this.currentPiece.move(0,1))&&(this._lockDelayActive=!1,this._lockDelayElapsed=0,this._lockDelayResets=0)}pause(){this.isPaused=!0,this._markDirty(),R.emit(O.GAME_PAUSED)}resume(){this.isPaused=!1,this.isPlaying=!0,this._markDirty(),R.emit(O.GAME_RESUMED)}restart(){this.initializeGame(),this.isPlaying=!0,this.isPaused=!1,this.modeStartTime=Date.now(),this._markDirty()}getDropPreview(){if(!this.currentPiece)return null;let t=this.currentPiece,n=0;const r=20;for(;n<r&&this.board.canPlacePiece(t.move(0,1));)t=t.move(0,1),n++;return t}getNextPiece(){const t=this.nextPieces.shift();this.nextPieces.push(this.pieceFactory.createRandomPiece()),this.currentPiece=t,this.currentPiece&&!this.board.canPlacePiece(this.currentPiece)&&(this.gameOver=!0,this._markDirty(),R.emit(O.GAME_OVER))}getGameState(){var t;return this._cachedState&&!this._dirty?this._cachedState:(this._cachedState={board:this.board.grid.map(n=>[...n]),currentPiece:this.currentPiece,nextPieces:[...this.nextPieces],heldPiece:this.heldPiece,canHold:this.canHold,score:this.score.toJSON(),isPlaying:this.isPlaying,isPaused:this.isPaused,gameOver:this.gameOver,backToBack:this.backToBack,gameMode:this.gameMode,modeTimeElapsed:(t=this._modeRules)!=null&&t.timeLimit?Math.max(0,this._modeRules.timeLimit-(Date.now()-this.modeStartTime)/1e3):null},this._cachedState)}setGameState(t){this.board.setBoardState(t.board),this.currentPiece=t.currentPiece,this.nextPieces=t.nextPieces,this.heldPiece=t.heldPiece,this.canHold=t.canHold,this.isPlaying=t.isPlaying,this.isPaused=t.isPaused,this.gameOver=t.gameOver,this.backToBack=t.backToBack,Object.assign(this.score,t.score)}}class zb{saveHighScore(t){throw new Error("Must be implemented")}getHighScore(){throw new Error("Must be implemented")}saveSettings(t){throw new Error("Must be implemented")}getSettings(){throw new Error("Must be implemented")}saveGameState(t){throw new Error("Must be implemented")}getGameState(){throw new Error("Must be implemented")}clearGameState(){throw new Error("Must be implemented")}}class Hb extends zb{constructor(){super(),this.highScoreKey="cat-tetris-high-score",this.settingsKey="cat-tetris-settings",this.gameStateKey="cat-tetris-game-state"}saveHighScore(t){localStorage.setItem(this.highScoreKey,t.toString())}getHighScore(){return parseInt(localStorage.getItem(this.highScoreKey)||"0")}saveSettings(t){localStorage.setItem(this.settingsKey,JSON.stringify(t))}getSettings(){const t=localStorage.getItem(this.settingsKey);return t?JSON.parse(t):{volume:80,gameSpeed:"normal",soundEnabled:!0,particlesEnabled:!0}}saveGameState(t){localStorage.setItem(this.gameStateKey,JSON.stringify(t))}getGameState(){const t=localStorage.getItem(this.gameStateKey);return t?JSON.parse(t):null}clearGameState(){localStorage.removeItem(this.gameStateKey)}load(t){const n=localStorage.getItem(`cat-tetris-${t}`);return n?JSON.parse(n):null}save(t,n){localStorage.setItem(`cat-tetris-${t}`,JSON.stringify(n))}remove(t){localStorage.removeItem(`cat-tetris-${t}`)}}class Ub{createPiece(t,n){throw new Error("Must be implemented")}createRandomPiece(){throw new Error("Must be implemented")}createNextPieces(t){throw new Error("Must be implemented")}}class $b{execute(t,n){throw new Error("Must be implemented")}}class Ur extends $b{execute(t,n){throw new Error("execute method must be implemented")}movePiece(t,n,r,s){if(!t||!n||!Array.isArray(n))return t;const i={x:t.position.x+r,y:t.position.y+s};return this.isValidMove(t,n,i)?t.move(r,s):t}isValidMove(t,n,r){return!t||!t.shape||!n||!Array.isArray(n)?!1:t.shape.every((s,i)=>Array.isArray(s)?s.every((o,a)=>{if(!o)return!0;const c=r.x+a,u=r.y+i;return c<0||c>=Ve.BOARD_WIDTH||u>=Ve.BOARD_HEIGHT?!1:u<0?!0:n[u]&&Array.isArray(n[u])&&!n[u][c]}):!0)}}class Wb extends Ur{execute(t,n){return this.movePiece(t,n,-1,0)}}class qb extends Ur{execute(t,n){return this.movePiece(t,n,1,0)}}class Kb extends Ur{execute(t,n){if(!t||!n)return t;const r={x:t.position.x,y:t.position.y+1};return this.isValidMove(t,n,r)?t.move(0,1):t}getSoftDropPoints(){return 1}}class Qb extends Ur{execute(t,n){var u;if(!t||!t.shape||!n)return t;const r=this.rotatePiece(t);let s=!1;if(this.isValidMove(r,n,r.position))return s=this.detectTSpin(r,n),r.setTSpin(s);const i=t.rotationState??0,o=(i+1)%4,a=`${i}>${o}`,c=((u=Ve.SRS_KICKS_CW)==null?void 0:u[a])||Ve.KICK_OFFSETS;for(const h of c){const d={x:r.position.x+h.x,y:r.position.y+h.y};if(this.isValidMove(r,n,d)){const m=r.move(h.x,h.y);return s=this.detectTSpin(m,n),m.setTSpin(s)}}return t}detectTSpin(t,n){return t.type!=="T"?!1:this.getCornerPositions(t).filter(o=>o.x<0||o.x>=Ve.BOARD_WIDTH||o.y<0||o.y>=Ve.BOARD_HEIGHT||n[o.y]&&n[o.y][o.x]).length>=3}getCornerPositions(t){const n=[],r=t.position.x,s=t.position.y;return n.push({x:r,y:s}),n.push({x:r+2,y:s}),n.push({x:r,y:s+2}),n.push({x:r+2,y:s+2}),n}rotatePiece(t){return!t||!t.shape||!Array.isArray(t.shape)||t.shape.length===0?t:t.rotate()}}class Xb extends Ur{execute(t,n){var u;if(!t||!t.shape||!n)return t;const r=this.rotatePieceLeft(t);let s=!1;if(this.isValidMove(r,n,r.position))return s=this.detectTSpin(r,n),r.setTSpin(s);const i=t.rotationState??0,o=(i+3)%4,a=`${i}>${o}`,c=((u=Ve.SRS_KICKS_CCW)==null?void 0:u[a])||Ve.KICK_OFFSETS;for(const h of c){const d={x:r.position.x+h.x,y:r.position.y+h.y};if(this.isValidMove(r,n,d)){const m=r.move(h.x,h.y);return s=this.detectTSpin(m,n),m.setTSpin(s)}}return t}detectTSpin(t,n){return t.type!=="T"?!1:this.getCornerPositions(t).filter(o=>o.x<0||o.x>=Ve.BOARD_WIDTH||o.y<0||o.y>=Ve.BOARD_HEIGHT||n[o.y]&&n[o.y][o.x]).length>=3}getCornerPositions(t){const n=[],r=t.position.x,s=t.position.y;return n.push({x:r,y:s}),n.push({x:r+2,y:s}),n.push({x:r,y:s+2}),n.push({x:r+2,y:s+2}),n}rotatePieceLeft(t){if(!t||!t.shape||!Array.isArray(t.shape)||t.shape.length===0)return t;const n=t.shape[0].map((r,s)=>t.shape.map(i=>i[i.length-1-s]));return new Et(t.type,n,t.color,t.emoji,t.position,t.isTSpin,(t.rotationState+3)%4)}}class Yb extends Ur{execute(t,n){if(!t||!n)return{piece:t,dropDistance:0};let r=t,s=0;for(;;){const i={x:r.position.x,y:r.position.y+1};if(this.isValidMove(r,n,i))r=r.move(0,1),s++;else break}return{piece:r,dropDistance:s}}}class Ch{constructor(){this.reset()}reset(){return this.piece={type:null,shape:[],color:"#000000",emoji:"",position:{x:3,y:0},isTSpin:!1},this}setType(t){return this.piece.type=t,this}setShape(t){return this.piece.shape=t,this}setColor(t){return this.piece.color=t,this}setEmoji(t){return this.piece.emoji=t,this}setPosition(t,n){return this.piece.position={x:t,y:n},this}setTSpin(t){return this.piece.isTSpin=t,this}build(){const t=new Et(this.piece.type,this.piece.shape,this.piece.color,this.piece.emoji,this.piece.position,this.piece.isTSpin);return this.reset(),t}}class Yn extends Ub{constructor(){super(),this.pieceConfigs=Ft,this._bag=[],this._bagIndex=0}_refillBag(){this._bag=Object.keys(this.pieceConfigs);for(let t=this._bag.length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1));[this._bag[t],this._bag[n]]=[this._bag[n],this._bag[t]]}this._bagIndex=0}resetBag(){this._bag=[],this._bagIndex=0}_getNextType(){return this._bagIndex>=this._bag.length&&this._refillBag(),this._bag[this._bagIndex++]}createPiece(t,n={x:3,y:0}){const r=this.pieceConfigs[t];if(!r)throw new Error(`Tipo de pea invlido: ${t}`);return new Ch().setType(t).setShape(r.shape).setColor(r.color).setEmoji(r.emoji).setPosition(n.x,n.y).build()}createRandomPiece(){const t=this._getNextType(),n=this.pieceConfigs[t];let r={x:3,y:0};return t==="I"&&(r={x:3,y:-2}),new Ch().setType(t).setShape(n.shape).setColor(n.color).setEmoji(n.emoji).setPosition(r.x,r.y).build()}createNextPieces(t=3){const n=[];for(let r=0;r<t;r++)n.push(this.createRandomPiece());return n}registerPieceType(t,n){this.pieceConfigs[t]=n}getPieceTypes(){return Object.keys(this.pieceConfigs)}}class Jn{constructor(){this.strategies=new Map,this.registerDefaultStrategies()}registerDefaultStrategies(){this.strategies.set("left",()=>new Wb),this.strategies.set("right",()=>new qb),this.strategies.set("down",()=>new Kb),this.strategies.set("rotate",()=>new Qb),this.strategies.set("rotateLeft",()=>new Xb),this.strategies.set("hardDrop",()=>new Yb)}createStrategy(t){const n=this.strategies.get(t);if(!n)throw new Error(`Strategy type '${t}' not found`);return n()}registerStrategy(t,n){if(typeof n!="function")throw new Error("Strategy factory must be a function");this.strategies.set(t,n)}unregisterStrategy(t){this.strategies.delete(t)}getAvailableStrategies(){return Array.from(this.strategies.keys())}hasStrategy(t){return this.strategies.has(t)}}class Jb{getSettings(){throw new Error("Method getSettings must be implemented")}saveSettings(t){throw new Error("Method saveSettings must be implemented")}updateSetting(t,n){throw new Error("Method updateSetting must be implemented")}resetSettings(){throw new Error("Method resetSettings must be implemented")}}class Zb extends Jb{constructor(){super(),this.storageKey="cat-tetris-settings",this.defaultSettings={volume:80,gameSpeed:"normal",soundEnabled:!0,particlesEnabled:!0}}getSettings(){try{const t=localStorage.getItem(this.storageKey);return t?{...this.defaultSettings,...JSON.parse(t)}:this.defaultSettings}catch{return this.defaultSettings}}saveSettings(t){try{const n={...this.defaultSettings,...t};return localStorage.setItem(this.storageKey,JSON.stringify(n)),n}catch{throw new Error("Failed to save settings")}}resetSettings(){try{return localStorage.removeItem(this.storageKey),this.defaultSettings}catch{throw new Error("Failed to reset settings")}}updateSetting(t,n){const s={...this.getSettings(),[t]:n};return this.saveSettings(s)}}class eS{getStats(){throw new Error("Method getStats must be implemented")}incrementPlayTime(){throw new Error("Method incrementPlayTime must be implemented")}incrementPiecesPlaced(){throw new Error("Method incrementPiecesPlaced must be implemented")}addLinesCleared(t){throw new Error("Method addLinesCleared must be implemented")}incrementTSpins(){throw new Error("Method incrementTSpins must be implemented")}updateMaxCombo(t){throw new Error("Method updateMaxCombo must be implemented")}reset(){throw new Error("Method reset must be implemented")}}class tS extends eS{constructor(){super(),this.stats={playTime:0,piecesPlaced:0,linesCleared:0,tSpins:0,backToBack:0,maxCombo:0,tetrisCount:0,linesPerSecond:0},this.sessionStartTime=Date.now()}getStats(){return{...this.stats}}incrementPlayTime(){this.stats.playTime+=1,this.calculateLinesPerSecond()}incrementPiecesPlaced(){this.stats.piecesPlaced+=1}addLinesCleared(t){this.stats.linesCleared+=t,t===4&&(this.stats.tetrisCount+=1),this.calculateLinesPerSecond()}incrementTSpins(){this.stats.tSpins+=1}incrementBackToBack(){this.stats.backToBack+=1}updateMaxCombo(t){t>this.stats.maxCombo&&(this.stats.maxCombo=t)}calculateLinesPerSecond(){this.stats.playTime>0?this.stats.linesPerSecond=this.stats.linesCleared/this.stats.playTime:this.stats.linesPerSecond=0}reset(){this.stats={playTime:0,piecesPlaced:0,linesCleared:0,tSpins:0,backToBack:0,maxCombo:0,tetrisCount:0,linesPerSecond:0},this.sessionStartTime=Date.now()}getSessionDuration(){return Date.now()-this.sessionStartTime}}class nS{registerHandler(t,n){throw new Error("Method registerHandler must be implemented")}unregisterHandler(t,n){throw new Error("Method unregisterHandler must be implemented")}startListening(){throw new Error("Method startListening must be implemented")}stopListening(){throw new Error("Method stopListening must be implemented")}setKeyMapping(t,n){throw new Error("Method setKeyMapping must be implemented")}getKeyMappings(){throw new Error("Method getKeyMappings must be implemented")}}class rS extends nS{constructor(){super();Ys(this,"_handleKeyDown",n=>{if(this.preventDefaultKeys.includes(n.key)&&n.preventDefault(),n.repeat)return;const r=this.keyMappings[n.key];r&&(this._fireAction(r),this._dasActions.has(r)&&this._pressedKeys.set(n.key,{action:r,dasTimer:0,arrTimer:0,dasTriggered:!1}))});Ys(this,"_handleKeyUp",n=>{this._pressedKeys.delete(n.key)});Ys(this,"_handleBlur",()=>{this._pressedKeys.clear()});this.keyMappings={ArrowLeft:"moveLeft",ArrowRight:"moveRight",ArrowDown:"moveDown",ArrowUp:"rotate",x:"rotate",X:"rotate",z:"rotateLeft",Z:"rotateLeft"," ":"hardDrop",c:"hold",C:"hold",Shift:"hold",p:"pause",P:"pause",Escape:"pause"},this.preventDefaultKeys=["ArrowLeft","ArrowRight","ArrowDown","ArrowUp"," "],this.handlers=new Map,this.isListening=!1,this.das=167,this.arr=33,this.sdf=5,this._dasActions=new Set(["moveLeft","moveRight","moveDown"]),this._pressedKeys=new Map,this._rafId=null,this._lastTime=0}setDAS(n){this.das=Math.max(0,n)}setARR(n){this.arr=Math.max(0,n)}getDAS(){return this.das}getARR(){return this.arr}registerHandler(n,r){this.handlers.has(n)||this.handlers.set(n,[]),this.handlers.get(n).push(r)}unregisterHandler(n,r){if(this.handlers.has(n)){const s=this.handlers.get(n),i=s.indexOf(r);i>-1&&s.splice(i,1)}}_fireAction(n){this.handlers.has(n)&&this.handlers.get(n).forEach(r=>{try{r()}catch{}})}startListening(){this.isListening||(window.addEventListener("keydown",this._handleKeyDown),window.addEventListener("keyup",this._handleKeyUp),window.addEventListener("blur",this._handleBlur),this.isListening=!0,this._startLoop())}stopListening(){this.isListening&&(window.removeEventListener("keydown",this._handleKeyDown),window.removeEventListener("keyup",this._handleKeyUp),window.removeEventListener("blur",this._handleBlur),this.isListening=!1,this._stopLoop(),this._pressedKeys.clear())}_startLoop(){this._lastTime=performance.now();const n=r=>{const s=r-this._lastTime;this._lastTime=r,this._updateDAS(s),this._rafId=requestAnimationFrame(n)};this._rafId=requestAnimationFrame(n)}_stopLoop(){this._rafId&&(cancelAnimationFrame(this._rafId),this._rafId=null)}_updateDAS(n){for(const[r,s]of this._pressedKeys)if(s.dasTriggered)if(s.arrTimer+=n,this.arr===0){for(let i=0;i<20;i++)this._fireAction(s.action);s.arrTimer=0}else for(;s.arrTimer>=this.arr;)s.arrTimer-=this.arr,this._fireAction(s.action);else if(s.dasTimer+=n,s.dasTimer>=this.das)if(s.dasTriggered=!0,s.arrTimer=0,this.arr===0)for(let i=0;i<20;i++)this._fireAction(s.action);else this._fireAction(s.action)}setKeyMapping(n,r){this.keyMappings[n]=r}removeKeyMapping(n){delete this.keyMappings[n]}getKeyMappings(){return{...this.keyMappings}}clear(){this.handlers.clear(),this.stopListening()}}class sS{constructor(t){this.gameRepository=t,this.currency=this.loadCurrency()}loadCurrency(){return this.gameRepository.load("playerCurrency")||{fish:0,totalEarned:0,totalSpent:0}}save(){this.gameRepository.save("playerCurrency",this.currency)}getFish(){return this.currency.fish}getCurrency(){return{...this.currency}}addFish(t,n="unknown"){return t<=0?!1:(this.currency.fish+=t,this.currency.totalEarned+=t,this.save(),!0)}spendFish(t,n="unknown"){return t<=0||this.currency.fish<t?!1:(this.currency.fish-=t,this.currency.totalSpent+=t,this.save(),!0)}canAfford(t){return this.currency.fish>=t}reset(){this.currency={fish:0,totalEarned:0,totalSpent:0},this.save()}getStats(){return{currentFish:this.currency.fish,totalEarned:this.currency.totalEarned,totalSpent:this.currency.totalSpent,netWorth:this.currency.totalEarned-this.currency.totalSpent}}}const he={CLEAR_LINES:"clear_lines",T_SPINS:"t_spins",COMBOS:"combos",SURVIVE_TIME:"survive_time",REACH_LEVEL:"reach_level",SCORE_POINTS:"score_points",PLACE_PIECES:"place_pieces",BACK_TO_BACK:"back_to_back",TETRIS_CLEAR:"tetris_clear"},Aa=[{type:he.CLEAR_LINES,target:20,reward:100,difficulty:"easy",title:"Limpeza Bsica",description:"Limpe 20 linhas"},{type:he.PLACE_PIECES,target:30,reward:100,difficulty:"easy",title:"Gato Trabalhador",description:"Coloque 30 peas"},{type:he.SURVIVE_TIME,target:180,reward:120,difficulty:"easy",title:"Sobrevivente",description:"Sobreviva por 3 minutos"},{type:he.SCORE_POINTS,target:5e3,reward:150,difficulty:"easy",title:"Fazendo Pontos",description:"Alcance 5.000 pontos"},{type:he.CLEAR_LINES,target:40,reward:200,difficulty:"medium",title:"Limpeza Profunda",description:"Limpe 40 linhas em uma partida"},{type:he.T_SPINS,target:3,reward:250,difficulty:"medium",title:"Mestre do T-Spin",description:"Faa 3 T-Spins"},{type:he.COMBOS,target:7,reward:200,difficulty:"medium",title:"Combo Felino",description:"Alcance um combo de 7x"},{type:he.REACH_LEVEL,target:8,reward:180,difficulty:"medium",title:"Subindo de Nvel",description:"Alcance o nvel 8"},{type:he.TETRIS_CLEAR,target:2,reward:220,difficulty:"medium",title:"Tetris Duplo",description:"Faa 2 Tetris (4 linhas)"},{type:he.T_SPINS,target:5,reward:350,difficulty:"hard",title:"Ninja T-Spin",description:"Faa 5 T-Spins em uma partida"},{type:he.COMBOS,target:10,reward:300,difficulty:"hard",title:"Combo Insano",description:"Alcance um combo de 10x"},{type:he.SURVIVE_TIME,target:600,reward:400,difficulty:"hard",title:"Resistncia Felina",description:"Sobreviva por 10 minutos"},{type:he.REACH_LEVEL,target:12,reward:350,difficulty:"hard",title:"Mestre dos Gatos",description:"Alcance o nvel 12"},{type:he.SCORE_POINTS,target:5e4,reward:400,difficulty:"hard",title:"Pontuao Lendria",description:"Alcance 50.000 pontos"},{type:he.BACK_TO_BACK,target:3,reward:380,difficulty:"hard",title:"Back-to-Back Master",description:"Faa 3 back-to-backs"}];class iS{constructor(t,n){this.gameRepository=t,this.currencyService=n,this.missions=this.loadMissions(),this.checkAndResetDaily()}loadMissions(){return this.gameRepository.load("dailyMissions")||this.generateNewMissions()}save(){this.gameRepository.save("dailyMissions",this.missions)}checkAndResetDaily(){const n=new Date().toDateString();this.missions.lastResetDate!==n&&(this.missions=this.generateNewMissions(),this.save())}generateNewMissions(){const t=Aa.filter(o=>o.difficulty==="easy"),n=Aa.filter(o=>o.difficulty==="medium"),r=Aa.filter(o=>o.difficulty==="hard"),s=[this.selectRandomMission(t),this.selectRandomMission(n),this.selectRandomMission(r)],i=new Date;return{lastResetDate:i.toDateString(),missions:s.map((o,a)=>({id:`mission_${i.getTime()}_${a}`,...o,progress:0,completed:!1,claimed:!1}))}}selectRandomMission(t){return t[Math.floor(Math.random()*t.length)]}getMissions(){return this.checkAndResetDaily(),this.missions.missions}updateProgress(t,n){let r=!1;return this.missions.missions.forEach(s=>{s.type===t&&!s.completed&&(s.progress=Math.max(s.progress,n),s.progress>=s.target&&(s.completed=!0,r=!0))}),r&&this.save(),r}incrementProgress(t,n=1){let r=!1;return this.missions.missions.forEach(s=>{s.type===t&&!s.completed&&(s.progress+=n,s.progress>=s.target&&(s.completed=!0,r=!0))}),r&&this.save(),r}claimReward(t){const n=this.missions.missions.find(r=>r.id===t);return n?n.completed?n.claimed?{success:!1,error:"Already claimed"}:(n.claimed=!0,this.currencyService.addFish(n.reward,`Mission: ${n.title}`),this.save(),{success:!0,reward:n.reward,title:n.title}):{success:!1,error:"Mission not completed"}:{success:!1,error:"Mission not found"}}getStats(){const t=this.missions.missions.length,n=this.missions.missions.filter(o=>o.completed).length,r=this.missions.missions.filter(o=>o.claimed).length,s=this.missions.missions.reduce((o,a)=>o+a.reward,0),i=this.missions.missions.filter(o=>o.claimed).reduce((o,a)=>o+a.reward,0);return{total:t,completed:n,claimed:r,totalRewards:s,claimedRewards:i,allCompleted:n===t,allClaimed:r===t}}reset(){this.missions=this.generateNewMissions(),this.save()}}const Ma=[{id:"first_line",title:" Primeira Linha",description:"Limpe sua primeira linha",requirement:{type:"lines_total",value:1},reward:50,tier:"bronze"},{id:"first_game",title:" Primeira Partida",description:"Complete sua primeira partida",requirement:{type:"games_played",value:1},reward:50,tier:"bronze"},{id:"scorer",title:" Pontuador",description:"Alcance 10.000 pontos em uma partida",requirement:{type:"score_single",value:1e4},reward:100,tier:"bronze"},{id:"combo_starter",title:" Combo Starter",description:"Alcance um combo de 5x",requirement:{type:"max_combo",value:5},reward:150,tier:"silver"},{id:"tspin_novice",title:" Aprendiz T-Spin",description:"Faa seu primeiro T-Spin",requirement:{type:"tspins_total",value:1},reward:150,tier:"silver"},{id:"survivor",title:" Sobrevivente",description:"Sobreviva por 5 minutos",requirement:{type:"survive_time",value:300},reward:150,tier:"silver"},{id:"level_5",title:" Nvel 5",description:"Alcance o nvel 5",requirement:{type:"max_level",value:5},reward:100,tier:"silver"},{id:"line_clearer",title:" Limpador",description:"Limpe 100 linhas no total",requirement:{type:"lines_total",value:100},reward:200,tier:"silver"},{id:"combo_master",title:" Combo Master",description:"Alcance um combo de 10x",requirement:{type:"max_combo",value:10},reward:300,tier:"gold"},{id:"tspin_master",title:" Mestre T-Spin",description:"Faa 50 T-Spins no total",requirement:{type:"tspins_total",value:50},reward:400,tier:"gold"},{id:"speed_demon",title:" Speed Demon",description:"Alcance o nvel 15",requirement:{type:"max_level",value:15},reward:350,tier:"gold"},{id:"high_scorer",title:" Alto Pontuador",description:"Alcance 100.000 pontos em uma partida",requirement:{type:"score_single",value:1e5},reward:400,tier:"gold"},{id:"dedicated",title:" Dedicado",description:"Jogue 50 partidas",requirement:{type:"games_played",value:50},reward:300,tier:"gold"},{id:"marathon",title:" Maratonista",description:"Limpe 500 linhas no total",requirement:{type:"lines_total",value:500},reward:350,tier:"gold"},{id:"cat_king",title:" Rei dos Gatos",description:"Alcance 1.000.000 de pontos em uma partida",requirement:{type:"score_single",value:1e6},reward:1e3,tier:"platinum"},{id:"immortal",title:" Imortal",description:"Alcance o nvel 20",requirement:{type:"max_level",value:20},reward:800,tier:"platinum"},{id:"combo_legend",title:" Lenda do Combo",description:"Alcance um combo de 15x",requirement:{type:"max_combo",value:15},reward:700,tier:"platinum"},{id:"tspin_legend",title:" Lenda T-Spin",description:"Faa 200 T-Spins no total",requirement:{type:"tspins_total",value:200},reward:800,tier:"platinum"},{id:"veteran",title:" Veterano",description:"Jogue 200 partidas",requirement:{type:"games_played",value:200},reward:600,tier:"platinum"},{id:"ultimate_cleaner",title:" Limpador Supremo",description:"Limpe 2.000 linhas no total",requirement:{type:"lines_total",value:2e3},reward:700,tier:"platinum"}];class oS{constructor(t,n,r){this.gameRepository=t,this.currencyService=n,this.statisticsService=r,this.achievements=this.loadAchievements()}loadAchievements(){const t=this.gameRepository.load("achievements");if(!t)return Ma.map(r=>({...r,unlocked:!1,unlockedAt:null,progress:0}));const n=new Map(t.map(r=>[r.id,r]));return Ma.map(r=>{const s=n.get(r.id);return s?{...r,unlocked:s.unlocked||!1,unlockedAt:s.unlockedAt||null,progress:s.progress||0}:{...r,unlocked:!1,unlockedAt:null,progress:0}})}save(){this.gameRepository.save("achievements",this.achievements)}getAchievements(){return[...this.achievements]}getUnlocked(){return this.achievements.filter(t=>t.unlocked)}getLocked(){return this.achievements.filter(t=>!t.unlocked)}getByTier(t){return this.achievements.filter(n=>n.tier===t)}checkAchievements(t){const n=[];return this.achievements.forEach(r=>{if(r.unlocked)return;const{type:s,value:i}=r.requirement;let o=0;switch(s){case"lines_total":o=t.linesCleared||0;break;case"games_played":o=t.gamesPlayed||0;break;case"score_single":o=t.highScore||0;break;case"max_combo":o=t.maxCombo||0;break;case"tspins_total":o=t.tSpins||0;break;case"survive_time":o=t.longestGame||0;break;case"max_level":o=t.maxLevel||0;break}r.progress=Math.min(o,i),o>=i&&(r.unlocked=!0,r.unlockedAt=new Date().toISOString(),this.currencyService.addFish(r.reward,`Achievement: ${r.title}`),n.push(r))}),n.length>0&&this.save(),n}getStats(){const t=this.achievements.length,n=this.achievements.filter(o=>o.unlocked).length,r=this.achievements.reduce((o,a)=>o+a.reward,0),s=this.achievements.filter(o=>o.unlocked).reduce((o,a)=>o+a.reward,0),i={bronze:this.getByTier("bronze").filter(o=>o.unlocked).length,silver:this.getByTier("silver").filter(o=>o.unlocked).length,gold:this.getByTier("gold").filter(o=>o.unlocked).length,platinum:this.getByTier("platinum").filter(o=>o.unlocked).length};return{total:t,unlocked:n,percentage:Math.floor(n/t*100),totalRewards:r,earnedRewards:s,byTier:i}}reset(){this.achievements=Ma.map(t=>({...t,unlocked:!1,unlockedAt:null,progress:0})),this.save()}}class aS{constructor(t){this.gameRepository=t,this.stats=this.loadStats()}loadStats(){return this.gameRepository.load("playerStats")||{gamesPlayed:0,linesCleared:0,piecesPlaced:0,tSpins:0,backToBack:0,totalPlayTime:0,highScore:0,maxLevel:0,maxCombo:0,longestGame:0,mostLinesInGame:0,lastUpdated:new Date().toISOString(),lastPlayedDate:null,currentStreak:0,longestStreak:0}}save(){this.stats.lastUpdated=new Date().toISOString(),this.gameRepository.save("playerStats",this.stats)}getStats(){return{...this.stats}}updateAfterGame(t){this.stats.gamesPlayed+=1,this.stats.linesCleared+=t.linesCleared||0,this.stats.piecesPlaced+=t.piecesPlaced||0,this.stats.tSpins+=t.tSpins||0,this.stats.backToBack+=t.backToBack||0,this.stats.totalPlayTime+=t.playTime||0,t.score>this.stats.highScore&&(this.stats.highScore=t.score),t.level>this.stats.maxLevel&&(this.stats.maxLevel=t.level),t.maxCombo>this.stats.maxCombo&&(this.stats.maxCombo=t.maxCombo),t.playTime>this.stats.longestGame&&(this.stats.longestGame=t.playTime),t.linesCleared>this.stats.mostLinesInGame&&(this.stats.mostLinesInGame=t.linesCleared),this.updateStreak(),this.save()}updateStreak(){const t=new Date().toDateString(),n=this.stats.lastPlayedDate;if(n!==t){if(!n)this.stats.currentStreak=1,this.stats.longestStreak=1;else{const r=new Date(n),s=new Date(t);Math.floor((s-r)/(1e3*60*60*24))===1?(this.stats.currentStreak+=1,this.stats.currentStreak>this.stats.longestStreak&&(this.stats.longestStreak=this.stats.currentStreak)):this.stats.currentStreak=1}this.stats.lastPlayedDate=t}}incrementStat(t,n=1){this.stats.hasOwnProperty(t)&&(this.stats[t]+=n,this.save())}updateRecord(t,n){return this.stats.hasOwnProperty(t)&&n>this.stats[t]?(this.stats[t]=n,this.save(),!0):!1}reset(){this.stats={gamesPlayed:0,linesCleared:0,piecesPlaced:0,tSpins:0,backToBack:0,totalPlayTime:0,highScore:0,maxLevel:0,maxCombo:0,longestGame:0,mostLinesInGame:0,lastUpdated:new Date().toISOString(),lastPlayedDate:null,currentStreak:0,longestStreak:0},this.save()}}const Zt={classic:{id:"classic",name:" Tetris Clssico",description:"Cores oficiais do Tetris",price:0,default:!0,pieces:{I:{emoji:"",color:"#00F0F0"},O:{emoji:"",color:"#F0F000"},T:{emoji:"",color:"#A000F0"},S:{emoji:"",color:"#00F000"},Z:{emoji:"",color:"#F00000"},J:{emoji:"",color:"#0000F0"},L:{emoji:"",color:"#F0A000"}}},cats:{id:"cats",name:" Gatos Clssicos",description:"Os gatinhos originais do Cat Tetris",price:0,default:!0,pieces:{I:{emoji:"",color:"#00f0f0"},O:{emoji:"",color:"#f0f000"},T:{emoji:"",color:"#a000f0"},S:{emoji:"",color:"#00f000"},Z:{emoji:"",color:"#f00000"},J:{emoji:"",color:"#f0a000"},L:{emoji:"",color:"#ffc0cb"}}},dogs:{id:"dogs",name:" Cachorros Felizes",description:"Amigos caninos adorveis",price:500,pieces:{I:{emoji:"",color:"#8B4513"},O:{emoji:"",color:"#D2691E"},T:{emoji:"",color:"#CD853F"},S:{emoji:"",color:"#DEB887"},Z:{emoji:"",color:"#F4A460"},J:{emoji:"",color:"#FFDEAD"},L:{emoji:"",color:"#FFE4B5"}}},pandas:{id:"pandas",name:" Pandas Fofos",description:"Ursinhos preto e branco",price:600,pieces:{I:{emoji:"",color:"#000000"},O:{emoji:"",color:"#808080"},T:{emoji:"",color:"#A0A0A0"},S:{emoji:"",color:"#FFFFFF"},Z:{emoji:"",color:"#D3D3D3"},J:{emoji:"",color:"#90EE90"},L:{emoji:"",color:"#98FB98"}}},foxes:{id:"foxes",name:" Raposas Astutas",description:"Raposinhas espertas e geis",price:700,pieces:{I:{emoji:"",color:"#FF4500"},O:{emoji:"",color:"#FF6347"},T:{emoji:"",color:"#FF7F50"},S:{emoji:"",color:"#CD5C5C"},Z:{emoji:"",color:"#D2691E"},J:{emoji:"",color:"#8B4513"},L:{emoji:"",color:"#DAA520"}}},unicorns:{id:"unicorns",name:" Unicrnios Mgicos",description:"Criaturas msticas e coloridas",price:900,pieces:{I:{emoji:"",color:"#FF00FF"},O:{emoji:"",color:"#FFD700"},T:{emoji:"",color:"#87CEEB"},S:{emoji:"",color:"#FF69B4"},Z:{emoji:"",color:"#9370DB"},J:{emoji:"",color:"#DA70D6"},L:{emoji:"",color:"#FFC0CB"}}},robots:{id:"robots",name:" Robs Futuristas",description:"Tecnologia do futuro",price:800,pieces:{I:{emoji:"",color:"#708090"},O:{emoji:"",color:"#778899"},T:{emoji:"",color:"#4682B4"},S:{emoji:"",color:"#5F9EA0"},Z:{emoji:"",color:"#00CED1"},J:{emoji:"",color:"#1E90FF"},L:{emoji:"",color:"#4169E1"}}},foods:{id:"foods",name:" Comidas Deliciosas",description:"Para quem joga com fome",price:750,pieces:{I:{emoji:"",color:"#FF6347"},O:{emoji:"",color:"#FFD700"},T:{emoji:"",color:"#FFA500"},S:{emoji:"",color:"#FF4500"},Z:{emoji:"",color:"#FFB6C1"},J:{emoji:"",color:"#DDA0DD"},L:{emoji:"",color:"#D2691E"}}},crystals:{id:"crystals",name:" Cristais Brilhantes",description:"Gemas preciosas reluzentes",price:1e3,premium:!0,pieces:{I:{emoji:"",color:"#00FFFF"},O:{emoji:"",color:"#FFD700"},T:{emoji:"",color:"#9370DB"},S:{emoji:"",color:"#00FF00"},Z:{emoji:"",color:"#FF0000"},J:{emoji:"",color:"#FFA500"},L:{emoji:"",color:"#FF1493"}}},ocean:{id:"ocean",name:" Mundo Marinho",description:"Criaturas do oceano",price:850,pieces:{I:{emoji:"",color:"#1E90FF"},O:{emoji:"",color:"#00CED1"},T:{emoji:"",color:"#4682B4"},S:{emoji:"",color:"#87CEEB"},Z:{emoji:"",color:"#5F9EA0"},J:{emoji:"",color:"#6495ED"},L:{emoji:"",color:"#FF6347"}}},space:{id:"space",name:" Espao Sideral",description:"Explorao espacial",price:950,pieces:{I:{emoji:"",color:"#4169E1"},O:{emoji:"",color:"#00FFFF"},T:{emoji:"",color:"#32CD32"},S:{emoji:"",color:"#FFD700"},Z:{emoji:"",color:"#FFFF00"},J:{emoji:"",color:"#FF8C00"},L:{emoji:"",color:"#FF4500"}}}};class m0{constructor(t,n){this.gameRepository=t,this.currencyService=n,this.inventory=this.loadInventory()}loadInventory(){const t=this.gameRepository.load("shopInventory");if(t){const n=Object.values(Zt).filter(s=>s.price===0).map(s=>s.id);let r=!1;for(const s of n)t.ownedThemes.includes(s)||(t.ownedThemes.push(s),r=!0);return r&&this.gameRepository.save("shopInventory",t),t}return{ownedThemes:["cats","classic"],equippedTheme:"cats",purchaseHistory:[]}}save(){this.gameRepository.save("shopInventory",this.inventory)}getAllThemes(){return Object.values(Zt).map(t=>({...t,owned:this.inventory.ownedThemes.includes(t.id),equipped:this.inventory.equippedTheme===t.id}))}getOwnedThemes(){return this.inventory.ownedThemes.map(t=>Zt[t])}getEquippedTheme(){return Zt[this.inventory.equippedTheme]}ownsTheme(t){return this.inventory.ownedThemes.includes(t)}purchaseTheme(t){const n=Zt[t];return n?this.ownsTheme(t)?{success:!1,error:"Already owned"}:this.currencyService.canAfford(n.price)?this.currencyService.spendFish(n.price,`Theme: ${n.name}`)?(this.inventory.ownedThemes.push(t),this.inventory.purchaseHistory.push({themeId:t,purchasedAt:new Date().toISOString(),price:n.price}),this.save(),{success:!0,theme:n}):{success:!1,error:"Purchase failed"}:{success:!1,error:"Insufficient funds"}:{success:!1,error:"Theme not found"}}equipTheme(t){if(!this.ownsTheme(t))return{success:!1,error:"Theme not owned"};this.inventory.equippedTheme=t,this.save();const n=Zt[t];return window.dispatchEvent(new CustomEvent("themeEquipped",{detail:{themeId:t,theme:n}})),{success:!0,theme:n}}getStats(){return{totalThemes:Object.keys(Zt).length,ownedThemes:this.inventory.ownedThemes.length,totalSpent:this.inventory.purchaseHistory.reduce((t,n)=>t+n.price,0),equippedTheme:this.inventory.equippedTheme}}reset(){this.inventory={ownedThemes:["cats"],equippedTheme:"cats",purchaseHistory:[]},this.save()}}const lS=Object.freeze(Object.defineProperty({__proto__:null,PIECE_THEMES:Zt,ShopService:m0},Symbol.toStringTag,{value:"Module"})),xt={CLASSIC:{id:"classic",name:" Clssico",description:"O Tetris tradicional",icon:"",rules:{gameOver:!0,timeLimit:!1,lineGoal:!1,speedIncrease:!0}},SPRINT:{id:"sprint",name:" Sprint 40",description:"Limpe 40 linhas o mais rpido possvel",icon:"",rules:{gameOver:!1,timeLimit:!1,lineGoal:40,speedIncrease:!1,fixedLevel:1}},ULTRA:{id:"ultra",name:" Ultra 3min",description:"Mximo de pontos em 3 minutos",icon:"",rules:{gameOver:!1,timeLimit:180,lineGoal:!1,speedIncrease:!0}},ZEN:{id:"zen",name:" Zen",description:"Jogue sem presso, sem game over",icon:"",rules:{gameOver:!1,timeLimit:!1,lineGoal:!1,speedIncrease:!1,fixedLevel:1,relaxed:!0}},SURVIVAL:{id:"survival",name:" Sobrevivncia",description:"Comece no nvel 10, quanto tempo aguenta?",icon:"",rules:{gameOver:!0,timeLimit:!1,lineGoal:!1,speedIncrease:!0,startLevel:10}}};class cS{constructor(t){this.gameRepository=t,this.currentMode=xt.CLASSIC,this.modeStats=this.loadModeStats()}loadModeStats(){return this.gameRepository.load("gameModesStats")||this.initializeStats()}initializeStats(){const t={};return Object.keys(xt).forEach(n=>{const r=xt[n];t[r.id]={gamesPlayed:0,bestScore:0,bestTime:r.rules.timeLimit?r.rules.timeLimit:0,bestLines:0,totalGames:0}}),t}save(){this.gameRepository.save("gameModesStats",this.modeStats)}getAllModes(){return Object.values(xt)}getCurrentMode(){return this.currentMode}setMode(t){const n=Object.values(xt).find(r=>r.id===t);return n?(this.currentMode=n,!0):!1}getModeStats(t){return this.modeStats[t]||null}getAllStats(){return{...this.modeStats}}updateStats(t,n){if(!this.modeStats[t])return;const r=this.modeStats[t];r.gamesPlayed+=1,r.totalGames+=1,n.score>r.bestScore&&(r.bestScore=n.score),n.time&&(r.bestTime===0||n.time<r.bestTime)&&(r.bestTime=n.time),n.lines>r.bestLines&&(r.bestLines=n.lines),this.save()}checkGoal(t,n){return t.rules?t.rules.lineGoal?n.score.lines>=t.rules.lineGoal:(t.rules.timeLimit,!1):!1}getRecommendedOrder(){return[xt.CLASSIC,xt.ZEN,xt.SPRINT,xt.ULTRA,xt.SURVIVAL]}reset(){this.modeStats=this.initializeStats(),this.currentMode=xt.CLASSIC,this.save()}}const Ph=[{id:"bot1",name:"MeowMaster",score:25e4,level:18,lines:120,country:"BR"},{id:"bot2",name:"NyanCat",score:18e4,level:15,lines:95,country:"US"},{id:"bot3",name:"FelixPro",score:15e4,level:14,lines:85,country:"JP"},{id:"bot4",name:"WhiskerKing",score:12e4,level:12,lines:75,country:"KR"},{id:"bot5",name:"PawsGaming",score:1e5,level:11,lines:68,country:"FR"},{id:"bot6",name:"CatNinja",score:85e3,level:10,lines:60,country:"DE"},{id:"bot7",name:"TigerClaw",score:7e4,level:9,lines:55,country:"BR"},{id:"bot8",name:"LionHeart",score:65e3,level:8,lines:50,country:"UK"},{id:"bot9",name:"CheetahSpeed",score:55e3,level:8,lines:45,country:"ES"},{id:"bot10",name:"PantherShadow",score:5e4,level:7,lines:42,country:"IT"},{id:"bot11",name:"JaguarForce",score:45e3,level:7,lines:40,country:"MX"},{id:"bot12",name:"LynxSwift",score:4e4,level:6,lines:38,country:"CA"},{id:"bot13",name:"OcelotPro",score:35e3,level:6,lines:35,country:"AR"},{id:"bot14",name:"BobcatGamer",score:3e4,level:5,lines:32,country:"AU"},{id:"bot15",name:"CougarRush",score:28e3,level:5,lines:30,country:"NZ"}];class uS{constructor(t,n){this.gameRepository=t,this.playerStatsService=n,this.playerName=this.loadPlayerName(),this.playerId=this.loadPlayerId()}loadPlayerName(){const t=this.gameRepository.load("playerProfile");return(t==null?void 0:t.name)||"Jogador"}loadPlayerId(){let t=this.gameRepository.load("playerProfile");return(!t||!t.id)&&(t={...t,id:`player_${Date.now()}_${Math.random().toString(36).substr(2,9)}`},this.gameRepository.save("playerProfile",t)),t.id}setPlayerName(t){const n=this.gameRepository.load("playerProfile")||{};n.name=t,n.id=this.playerId,this.gameRepository.save("playerProfile",n),this.playerName=t}getPlayerName(){return this.playerName}getGlobalLeaderboard(t=100){const n=this.playerStatsService.getStats(),r={id:this.playerId,name:this.playerName,score:n.highScore,level:n.maxLevel,lines:n.linesCleared,country:"BR",isPlayer:!0},s=[...Ph,r];return s.sort((i,o)=>o.score-i.score),s.slice(0,t)}getWeeklyLeaderboard(t=50){return this.getGlobalLeaderboard(t)}getCountryLeaderboard(t="BR",n=50){return this.getGlobalLeaderboard(200).filter(s=>s.country===t).slice(0,n)}getPlayerRank(){const t=this.getGlobalLeaderboard(1e3),n=t.findIndex(r=>r.id===this.playerId);return n===-1?{rank:t.length+1,total:t.length,percentile:0}:{rank:n+1,total:t.length,percentile:Math.floor((t.length-n)/t.length*100)}}getAroundPlayer(t=5){const n=this.getGlobalLeaderboard(1e3),r=n.findIndex(o=>o.id===this.playerId);if(r===-1)return[];const s=Math.max(0,r-t),i=Math.min(n.length,r+t+1);return n.slice(s,i)}submitScore(t){return Promise.resolve({success:!0})}getModeLeaderboard(t,n=50){return this.getGlobalLeaderboard(n)}getFriendsLeaderboard(){return Ph.slice(0,5)}getLeaderboardStats(){const t=this.getPlayerRank(),n=this.playerStatsService.getStats();return{playerName:this.playerName,rank:t.rank,total:t.total,percentile:t.percentile,score:n.highScore,level:n.maxLevel,lines:n.linesCleared}}}class dS{constructor(t){this.playerStatsService=t}generateShareText(t){const{score:n,level:r,lines:s,mode:i}=t;return` Cat Tetris${i?` no modo ${i}`:""}!
 Pontuao: ${n.toLocaleString()}
 Nvel: ${r}
 Linhas: ${s}

Consegue me superar? `}generateShareURL(t){const n=window.location.origin+window.location.pathname,r=new URLSearchParams({score:t.score,level:t.level,lines:t.lines});return`${n}?${r.toString()}`}async copyToClipboard(t){try{return await navigator.clipboard.writeText(t),{success:!0}}catch(n){return{success:!1,error:n.message}}}async shareNative(t){if(!navigator.share)return{success:!1,error:"Web Share API not supported"};try{const n=this.generateShareText(t),r=this.generateShareURL(t);return await navigator.share({title:"Minha pontuao no Cat Tetris",text:n,url:r}),{success:!0}}catch(n){return n.name==="AbortError"?{success:!1,error:"Share cancelled"}:{success:!1,error:n.message}}}shareToTwitter(t){const n=this.generateShareText(t),r=this.generateShareURL(t),s=`https://twitter.com/intent/tweet?text=${encodeURIComponent(n)}&url=${encodeURIComponent(r)}`;return window.open(s,"_blank","width=600,height=400"),{success:!0}}shareToFacebook(t){const n=this.generateShareURL(t),r=`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(n)}`;return window.open(r,"_blank","width=600,height=400"),{success:!0}}shareToWhatsApp(t){const n=this.generateShareText(t),r=this.generateShareURL(t),s=`${n}

${r}`,i=`https://wa.me/?text=${encodeURIComponent(s)}`;return window.open(i,"_blank"),{success:!0}}async takeScreenshot(t){return{success:!1,error:"Not implemented"}}getAvailableMethods(){return{native:!!navigator.share,clipboard:!!navigator.clipboard,twitter:!0,facebook:!0,whatsapp:!0}}}class ys{constructor(){this.difficulty="medium",this.thinkingTime=100,this.lastDecision=Date.now(),this._actionQueue=[],this._isExpert=!1,this._visualMode=!1,this._visualActionDelay=40}setDifficulty(t){switch(this.difficulty=t,this._isExpert=t.startsWith("expert"),t){case"easy":this.thinkingTime=250;break;case"medium":this.thinkingTime=120;break;case"hard":this.thinkingTime=60;break;case"expert":this.thinkingTime=80;break;default:this.thinkingTime=120}}setVisualMode(t){this._visualMode=t}decideNextMove(t){const n=Date.now(),r=this._visualMode?this._visualActionDelay:this.thinkingTime;if(this._actionQueue.length>0)return n-this.lastDecision<r?null:(this.lastDecision=n,this._actionQueue.shift());if(!this._isExpert&&n-this.lastDecision<r||this._visualMode&&n-this.lastDecision<r)return null;this.lastDecision=n;const{currentPiece:s,board:i,heldPiece:o,canHold:a,nextPieces:c}=t;if(!s)return null;try{const u=(c==null?void 0:c[0])||null;let h=this._findBestMoveWithLookahead(s,i,u),d=!1;if(a){const m=o||u;if(m&&m.type!==s.type){const v=o?u:(c==null?void 0:c[1])||null,w=this._findBestMoveWithLookahead(m,i,v);w&&(!h||w.score>h.score)&&(h=w,d=!0)}}if(!h)this._actionQueue=[{action:"drop"}];else{const m=[];d&&m.push({action:"hold"});const v=d?o||(c==null?void 0:c[0]):s;m.push(...this._buildActionSequence(v,h.rotations,h.targetX,d)),this._actionQueue=m}}catch{this._actionQueue=[{action:"drop"}]}return this._actionQueue.length>0?this._actionQueue.shift():{action:"down"}}_findBestMoveWithLookahead(t,n,r){var u;let s=-1/0,i=null;const o=n.length,a=((u=n[0])==null?void 0:u.length)||10,c=this._isExpert&&r;for(let h=0;h<4;h++){const d=this._rotateShape(t.shape,h),m=d[0].length;for(let v=-2;v<=a-m+2;v++){const w=this._findLandingRow(d,n,v,o,a);if(w===null||w<0)continue;const b=this._placeOnBoard(d,n,v,w);if(!b)continue;const{board:S}=this._simulateClear(b);let p=this._evaluate(b,t);if(c){let f=-1/0;for(let g=0;g<4;g++){const y=this._rotateShape(r.shape,g),k=y[0].length;for(let j=-2;j<=a-k+2;j++){const C=this._findLandingRow(y,S,j,o,a);if(C===null||C<0)continue;const P=this._placeOnBoard(y,S,j,C);if(!P)continue;const N=this._evaluate(P,r);N>f&&(f=N)}}f>-1/0&&(p=p*(1-.3)+f*.3)}this.difficulty==="easy"?p+=(Math.random()-.5)*1200:this.difficulty==="medium"&&Math.random()<.2?p+=(Math.random()-.5)*500:this.difficulty==="expert"&&Math.random()<.12&&(p+=(Math.random()-.5)*600),p>s&&(s=p,i={rotations:h,targetX:v,score:s})}}return i}_evaluate(t,n){switch(this.difficulty){case"expert":return this._evalSurvival(t,n);default:return this._evalDefault(t,n)}}_simulateClear(t){const n=t[0].length,r=[];let s=0;for(const i of t)i.every(o=>o!=null)?s++:r.push([...i]);for(;r.length<t.length;)r.unshift(new Array(n).fill(null));return{board:r,cleared:s}}_evalDefault(t,n){const{board:r,cleared:s}=this._simulateClear(t);let i=0;return i+=s*800,i-=this._getHeight(r)*45,i-=this._countHoles(r)*400,i-=this._getBumpiness(r)*35,i-=this._getRowTransitions(r)*15,i-=this._getColTransitions(r)*10,this.difficulty==="hard"&&(i+=s>=2?s*400:0,i-=this._countHoles(r)*200,i-=this._getCoveredHoles(r)*100,i-=this._getHeight(r)*30,this._countHoles(r)===0&&(i+=300),this._getHeight(r)<=6&&(i+=200)),i}_evalSurvival(t){const{board:n,cleared:r}=this._simulateClear(t),s=this._getHeight(n),i=this._countHoles(n),o=this._getBumpiness(n),a=this._getCoveredHoles(n),c=this._getColumnHeights(n),u=Math.max(...c),h=Math.min(...c),d=this._getRowTransitions(n),m=this._getColTransitions(n),v=this._getWellDepths(n);let w=0;w+=r*5e3,r>=2&&(w+=r*r*1500),r===3&&(w+=8e3),r===4&&(w+=25e3),s>10&&(w+=r*8e3,r>=2&&(w+=r*5e3)),s>14&&(w+=r*2e4),w-=s*s*25,w-=s*300,w-=u*u*15,w-=i*4e3,w-=i*i*500,w-=a*1200,w-=o*250;const b=c.reduce((g,y)=>g+y,0)/c.length,S=c.reduce((g,y)=>g+(y-b)**2,0)/c.length;w-=S*80;const p=u-h;p>4&&(w-=(p-4)*800),p>6&&(w-=(p-6)*1500),w-=d*60,w-=m*50,w-=v*200,s===0?w+=15e3:s<=2?w+=6e3:s<=4?w+=3e3:s<=6&&(w+=1500),i===0&&(w+=5e3),i===0&&s<=4&&(w+=3e3),o<=1?w+=2e3:o<=3&&(w+=800),s>10&&(w-=(s-10)*2e3),s>12&&(w-=(s-12)*(s-12)*800),s>14&&(w-=(s-14)*(s-14)*1500),s>16&&(w-=6e4),s>18&&(w-=2e5);const f=this._countNearCompleteLines(n);return s>8&&(w+=f*1500),w}_evalCombo(t,n){const{board:r,cleared:s}=this._simulateClear(t),i=r[0].length,o=this._getHeight(r),a=this._countHoles(r),c=this._getBumpiness(r),u=this._getCoveredHoles(r);let h=0;s===1?h+=6e3:s===2?h+=3500:s===3?h+=2500:s===4&&(h+=2e3);let d=0,m=0,v=0;const w={};for(let S=r.length-1;S>=0;S--){let p=0,f=-1;for(let g=0;g<i;g++)r[S][g]!=null?p++:f=g;p===i-1?(d++,m++,v=Math.max(v,m),f>=0&&(w[f]=(w[f]||0)+1)):p>=i-2?(d+=.5,m++,v=Math.max(v,m)):m=0}h+=d*2500,h+=v*v*600;let b=0;for(const S in w)w[S]>b&&(b=w[S]);return b>=2&&(h+=b*b*500),h-=a*2500,h-=u*700,h-=o*100,h-=c*120,h-=this._getRowTransitions(r)*35,h-=this._getColTransitions(r)*25,a===0&&(h+=1500),o<=6&&(h+=600),o>12&&(h-=(o-12)*800),o>15&&(h-=(o-15)*2e3),o>18&&(h-=25e3),h}_evalTetris(t,n){const{board:r,cleared:s}=this._simulateClear(t),i=r[0].length,o=r.length,a=this._getColumnHeights(r);this._getHeight(r);const c=this._countHoles(r),u=this._getCoveredHoles(r);let h=0;const d=i-1;s===4?h+=2e5:s>0&&(h-=s*15e3);let m=0;for(let y=0;y<o;y++)r[y][d]!=null&&m++;h-=m*6e3;const v=[];for(let y=0;y<i;y++)y!==d&&v.push(a[y]);const w=v.reduce((y,k)=>y+k,0)/v.length,b=w-a[d];h+=Math.max(0,b)*600,b>=4?h+=25e3:b>=3?h+=12e3:b>=2?h+=5e3:b>=1&&(h+=1e3);let S=0;for(let y=0;y<v.length-1;y++)S+=Math.abs(v[y]-v[y+1]);h-=S*500;const p=v.reduce((y,k)=>y+(k-w)**2,0)/v.length;h-=p*150,S===0?h+=6e3:S<=1?h+=2500:S<=2&&(h+=800);const f=this._countNearFullLinesExcluding(r,d);h+=f*5e3,f>=4?h+=2e4:f>=3?h+=8e3:f>=2&&(h+=3e3);for(let y=0;y<i;y++){if(y===d)continue;const k=a[y],j=y>0?a[y-1]:o,C=y<i-1?a[y+1]:o,P=Math.min(j,C)-k;P>1&&(h-=P*2e3)}n.type==="I"&&(s===4?h+=5e4:b<4&&(h-=2e4)),h-=c*5e3,h-=u*2e3,h-=this._getRowTransitions(r)*40,h-=this._getColTransitions(r)*30;const g=Math.max(...v);return g>14&&(h-=(g-14)*3e3),g>16&&(h-=(g-16)*6e3),g>18&&(h-=4e4),c===0&&(h+=4e3),w<=6&&(h+=1500),h}_countLines(t){let n=0;for(const r of t)r.every(s=>s!=null)&&n++;return n}_getHeight(t){for(let n=0;n<t.length;n++)if(t[n].some(r=>r!=null))return t.length-n;return 0}_countHoles(t){let n=0;const r=t[0].length;for(let s=0;s<r;s++){let i=!1;for(let o=0;o<t.length;o++)t[o][s]!=null?i=!0:i&&n++}return n}_getBumpiness(t){const n=this._getColumnHeights(t);let r=0;for(let s=0;s<n.length-1;s++)r+=Math.abs(n[s]-n[s+1]);return r}_getBumpinessExcluding(t,n){const r=this._getColumnHeights(t);let s=0;for(let i=0;i<r.length-1;i++)i===n||i+1===n||(s+=Math.abs(r[i]-r[i+1]));return s}_getColumnHeights(t){const n=t[0].length,r=[];for(let s=0;s<n;s++){let i=!1;for(let o=0;o<t.length;o++)if(t[o][s]!=null){r.push(t.length-o),i=!0;break}i||r.push(0)}return r}_getFlatness(t){const n=this._getColumnHeights(t),r=n.reduce((i,o)=>i+o,0)/n.length,s=n.reduce((i,o)=>i+(o-r)**2,0)/n.length;return Math.max(0,100-s)}_getWellDepths(t){const n=this._getColumnHeights(t);let r=0;for(let s=0;s<n.length;s++){const i=s>0?n[s-1]:20,o=s<n.length-1?n[s+1]:20,a=Math.min(i,o)-n[s];a>0&&(r+=a)}return r}_getRowTransitions(t){let n=0;const r=t[0].length;for(let s=0;s<t.length;s++){for(let i=0;i<r-1;i++){const o=t[s][i]!=null,a=t[s][i+1]!=null;o!==a&&n++}t[s][0]==null&&n++,t[s][r-1]==null&&n++}return n}_getColTransitions(t){let n=0;const r=t[0].length;for(let s=0;s<r;s++){for(let i=0;i<t.length-1;i++){const o=t[i][s]!=null,a=t[i+1][s]!=null;o!==a&&n++}t[t.length-1][s]==null&&n++}return n}_getCoveredHoles(t){let n=0;const r=t[0].length;for(let s=0;s<r;s++){let i=0;for(let o=0;o<t.length;o++)t[o][s]!=null?i++:i>0&&(n+=i)}return n}_countNearCompleteLines(t){let n=0;for(const r of t){const s=r.filter(i=>i!=null).length;s>=r.length-1&&s<r.length&&n++}return n}_countNearFullLinesExcluding(t,n){let r=0;for(const s of t){let i=0,o=-1;for(let a=0;a<s.length;a++)s[a]==null&&(i++,o=a);i===1&&o===n&&r++}return r}_buildActionSequence(t,n,r,s){var h;const i=[],o=n%4;for(let d=0;d<o;d++)i.push({action:"rotate"});const a=s?3:((h=t.position)==null?void 0:h.x)??3,c=r-a,u=c>0?"right":"left";for(let d=0;d<Math.abs(c);d++)i.push({action:u});return i.push({action:"drop"}),i}_rotateShape(t,n){let r=t;for(let s=0;s<n%4;s++)r=r[0].map((i,o)=>r.map(a=>a[o]).reverse());return r}_findLandingRow(t,n,r,s,i){for(let o=-t.length;o<s;o++)if(this._collides(t,n,r,o+1,s,i))return o;return s-t.length}_collides(t,n,r,s,i,o){for(let a=0;a<t.length;a++)for(let c=0;c<t[0].length;c++){if(!t[a][c])continue;const u=r+c,h=s+a;if(u<0||u>=o||h>=i||h>=0&&n[h][u]!=null)return!0}return!1}_placeOnBoard(t,n,r,s){const i=n.length,o=n[0].length,a=n.map(c=>[...c]);for(let c=0;c<t.length;c++)for(let u=0;u<t[0].length;u++){if(!t[c][u])continue;const h=r+u,d=s+c;if(h<0||h>=o||d<0||d>=i||a[d][h]!=null)return null;a[d][h]=1}return a}getDifficulties(){return[{id:"easy",name:"Fcil",emoji:"",description:"IA iniciante"},{id:"medium",name:"Mdio",emoji:"",description:"IA intermediria"},{id:"hard",name:"Difcil",emoji:"",description:"IA avanada"},{id:"expert",name:"Expert",emoji:"",description:"Mantm o board o mais baixo possvel"}]}}class hS{constructor(t){this.gameRepository=t,this.currentMode=null,this.players=[],this.matchState=null}startLocalMatch(t="Jogador 1",n="Jogador 2"){return this.currentMode="1v1-local",this.players=[{id:"p1",name:t,score:0,level:1,lines:0,gameState:null,alive:!0},{id:"p2",name:n,score:0,level:1,lines:0,gameState:null,alive:!0}],this.matchState={startTime:Date.now(),status:"playing",winner:null},{mode:this.currentMode,players:this.players,matchId:`local_${Date.now()}`}}startAIMatch(t="Jogador",n="medium"){return this.currentMode="vs-ai",this.players=[{id:"p1",name:t,score:0,level:1,lines:0,gameState:null,alive:!0,isHuman:!0},{id:"ai",name:this.getAIName(n),score:0,level:1,lines:0,gameState:null,alive:!0,isAI:!0,difficulty:n}],this.matchState={startTime:Date.now(),status:"playing",winner:null,aiDifficulty:n},{mode:"vsAI",aiDifficulty:n,players:this.players,matchId:`ai_${Date.now()}`}}updatePlayerState(t,n){var s,i;const r=this.players.find(o=>o.id===t);r&&(r.gameState=n,r.score=((s=n.score)==null?void 0:s.points)||0,r.level=((i=n.score)==null?void 0:i.level)||1,r.lines=n.linesCleared||0,r.alive=!n.gameOver,this.checkWinCondition())}checkWinCondition(){const t=this.players.filter(n=>n.alive);return t.length===1?(this.matchState.status="finished",this.matchState.winner=t[0],this.matchState.endTime=Date.now(),this.matchState.duration=this.matchState.endTime-this.matchState.startTime,this.saveMatchResult(),{hasWinner:!0,winner:this.matchState.winner}):{hasWinner:!1}}saveMatchResult(){const t=this.gameRepository.load("multiplayerStats")||{localMatches:0,aiMatches:0,wins:0,losses:0,draws:0,totalTime:0};this.currentMode==="1v1-local"?t.localMatches++:this.currentMode==="vs-ai"&&(t.aiMatches++,this.matchState.winner.isHuman?t.wins++:this.matchState.winner.isAI&&t.losses++),t.totalTime+=this.matchState.duration,this.gameRepository.save("multiplayerStats",t)}getStats(){const t=this.gameRepository.load("multiplayerStats")||{localMatches:0,aiMatches:0,wins:0,losses:0,draws:0,totalTime:0};return{...t,winRate:t.aiMatches>0?(t.wins/t.aiMatches*100).toFixed(1):0,avgMatchTime:t.localMatches+t.aiMatches>0?Math.floor(t.totalTime/(t.localMatches+t.aiMatches)/1e3):0}}getMatchState(){return{...this.matchState,players:this.players,mode:this.currentMode}}endMatch(){const t={mode:this.currentMode,players:this.players,winner:this.matchState.winner,duration:Date.now()-this.matchState.startTime};return this.currentMode=null,this.players=[],this.matchState=null,t}startAIvsAIMatch(t="expert",n="expert"){return this.currentMode="ai-vs-ai",this.players=[{id:"ai1",name:this.getAIName(t),score:0,level:1,lines:0,gameState:null,alive:!0,isAI:!0,difficulty:t},{id:"ai2",name:this.getAIName(n),score:0,level:1,lines:0,gameState:null,alive:!0,isAI:!0,difficulty:n}],this.matchState={startTime:Date.now(),status:"playing",winner:null,ai1Difficulty:t,ai2Difficulty:n},{mode:"aiVsAI",ai1Difficulty:t,ai2Difficulty:n,players:this.players,matchId:`aivai_${Date.now()}`}}getAIName(t){return{easy:" MeowBot Iniciante",medium:" CatAI Intermedirio",hard:" FelineBot Avanado",expert:" NyanMaster Survival"}[t]||"IA"}getAvailableModes(){return[{id:"vs-ai",name:"vs IA",emoji:"",description:"Enfrente o bot",players:1,type:"ai",difficulties:["easy","medium","hard","expert"]},{id:"ai-vs-ai",name:"IA vs IA",emoji:"",description:"Assista duas IAs se enfrentando (debug)",players:0,type:"debug"}]}}const Ct={FUNDAMENTALS:"fundamentals",INTERMEDIATE:"intermediate",ADVANCED:"advanced",PRO:"pro"};class fS{constructor(t){this.gameRepository=t,this.lessons=this._buildLessons(),this.progress=this._loadProgress()}_buildLessons(){return[{id:1,module:Ct.FUNDAMENTALS,title:"Movimentao",description:"Mover, rotacionar e dropar peas",difficulty:"beginner",estimatedTime:"2 min",intro:["   Setas movem a pea para os lados","  Seta para cima rotaciona a pea","  Seta para baixo = soft drop (desce rpido)","  Espao = hard drop (cai instantaneamente)","A sombra mostra onde a pea vai pousar"],practice:{objective:"Limpe 3 linhas usando os controles",validate:t=>{const n=t.linesCleared||0;return{complete:n>=3,progress:Math.min(1,n/3),feedback:n>=3?" timo! Voc dominou os controles!":`${n}/3 linhas`}}},rewards:{fishCoins:100,xp:50,badge:"first_move",unlocks:[2]}},{id:2,module:Ct.FUNDAMENTALS,title:"Hold Piece",description:"Segure uma pea para usar depois",difficulty:"beginner",estimatedTime:"2 min",intro:["Aperte C ou Shift para guardar a pea atual","A pea guardada aparece no canto esquerdo","Voc pode trocar 1 vez por turno","Dica: guarde peas valiosas como I e T","Isso ajuda quando a pea atual no encaixa bem"],practice:{objective:"Use o hold e limpe 3 linhas",validate:t=>{const n=t.hasUsedHold,r=t.linesCleared||0;return n?{complete:r>=3,progress:Math.min(1,r/3),feedback:r>=3?" Hold dominado!":` Hold usado! ${r}/3 linhas`}:{complete:!1,progress:0,feedback:"Aperte C para segurar a pea!"}}},rewards:{fishCoins:100,xp:50,badge:"hold_learner",unlocks:[3]}},{id:3,module:Ct.FUNDAMENTALS,title:"Planejamento",description:"Use o painel Next para planejar jogadas",difficulty:"beginner",estimatedTime:"3 min",intro:["O painel NEXT mostra as prximas peas","Olhe as prximas 2-3 peas antes de agir","Se vem uma pea I, deixe espao vertical","Pensar  frente = menos buracos = mais linhas","Tente limpar muitas linhas sem criar buracos!"],practice:{objective:"Limpe 8 linhas (planeje bem!)",validate:t=>{const n=t.linesCleared||0;return{complete:n>=8,progress:Math.min(1,n/8),feedback:n>=8?" Excelente planejamento!":`${n}/8 linhas`}}},rewards:{fishCoins:150,xp:75,badge:"planner",unlocks:[4]}},{id:4,module:Ct.INTERMEDIATE,title:"Combos",description:"Limpe linhas consecutivas para bnus",difficulty:"intermediate",estimatedTime:"4 min",intro:["Combo = limpar linhas em peas consecutivas","Cada combo seguido d +50 pontos de bnus","Combo 5x = +250 pontos extras!","Dica: empilhe baixo e limpe 1 linha por vez","Foque em manter o ritmo, sem pausas"],practice:{objective:"Consiga um combo de 3 ou mais",validate:t=>{const n=t.currentCombo||0,r=t.maxCombo||n,s=Math.max(n,r);return{complete:s>=3,progress:Math.min(1,s/3),feedback:s>=3?" Combo master!":`Melhor combo: ${s}x (precisa 3)`}}},rewards:{fishCoins:200,xp:100,badge:"combo_starter",unlocks:[5]}},{id:5,module:Ct.INTERMEDIATE,title:"Tetris (4 linhas)",description:"Limpe 4 linhas de uma vez para 800pts",difficulty:"intermediate",estimatedTime:"5 min",intro:["Tetris = limpar 4 linhas ao mesmo tempo","Vale 800 pontos  o clear mais valioso!","Deixe uma coluna vazia (geralmente a da direita)","Preencha as outras 9 colunas em 4 linhas","Use a pea I (barra) para completar o Tetris"],practice:{objective:"Alcance 2.000 pontos",validate:t=>{const n=t.score||0;return{complete:n>=2e3,progress:Math.min(1,n/2e3),feedback:n>=2e3?" Pontuao alta!":`${n.toLocaleString()}/2.000 pts`}}},rewards:{fishCoins:250,xp:125,badge:"tetris_scorer",unlocks:[6]}},{id:6,module:Ct.ADVANCED,title:"T-Spin",description:"Rotacione o T no ltimo momento para bnus",difficulty:"advanced",estimatedTime:"6 min",intro:["T-Spin = rotacionar a pea T em espao apertado","Vale pontos extras e ativa back-to-back!",'Crie um buraco em forma de "T" na pilha',"Deslize a pea T para dentro e rotacione"," difcil, mas d muitos pontos!"],practice:{objective:"Faa pelo menos 1 T-Spin e 4.000 pontos",validate:t=>{const n=t.tSpins||0,r=t.score||0;return n===0?{complete:!1,progress:Math.min(.5,r/8e3),feedback:"Tente rotacionar o T em espao apertado!"}:{complete:r>=4e3,progress:Math.min(1,r/4e3),feedback:r>=4e3?` T-Spin pro! (${n} T-Spins)`:` T-Spin! ${r.toLocaleString()}/4.000 pts`}}},rewards:{fishCoins:400,xp:250,badge:"tspin_learner",unlocks:[7]}},{id:7,module:Ct.ADVANCED,title:"Back-to-Back",description:"Tetris ou T-Spin seguidos do 50% bnus",difficulty:"advanced",estimatedTime:"6 min",intro:["Back-to-Back = dois clears difceis seguidos","Conta como: Tetris (4 linhas) ou T-Spin","Cada B2B seguido d +50% de pontos!","Limpar 1-3 linhas normais quebra a cadeia","Combine T-Spins e Tetris para pontuao mxima"],practice:{objective:"Alcance 6.000 pontos com back-to-back",validate:t=>{const n=t.score||0,r=t.backToBackActive;return{complete:n>=6e3,progress:Math.min(1,n/6e3),feedback:n>=6e3?" Back-to-back dominado!":r?` B2B ativo! ${n.toLocaleString()}/6.000 pts`:`${n.toLocaleString()}/6.000 pts`}}},rewards:{fishCoins:500,xp:300,badge:"b2b_learner",unlocks:[8]}},{id:8,module:Ct.PRO,title:"Desafio Final",description:"Prove que domina o Tetris!",difficulty:"pro",estimatedTime:"10 min",intro:["Use TUDO que aprendeu at aqui","Movimentao, hold, combos, T-Spins, B2B...","O objetivo  alcanar uma pontuao alta","No tenha pressa  planeje cada jogada","Boa sorte, mestre! "],practice:{objective:"Alcance 15.000 pontos",validate:t=>{const n=t.score||0;return{complete:n>=15e3,progress:Math.min(1,n/15e3),feedback:n>=15e3?" MESTRE DO TETRIS!":`${n.toLocaleString()}/15.000 pts`}}},rewards:{fishCoins:1e3,xp:500,badge:"tetris_master",unlocks:[]}}]}_loadProgress(){var n,r;return((r=(n=this.gameRepository)==null?void 0:n.load)==null?void 0:r.call(n,"tutorialProgress"))||{completedLessons:[],unlockedLessons:[1],badges:[],totalXP:0,currentModule:Ct.FUNDAMENTALS}}_saveProgress(){var t,n;(n=(t=this.gameRepository)==null?void 0:t.save)==null||n.call(t,"tutorialProgress",this.progress)}getProgress(){return this.progress}getLessonById(t){return this.lessons.find(n=>n.id===t)}getAvailableLessons(){return this.lessons.filter(t=>this.progress.unlockedLessons.includes(t.id))}completeLesson(t,n){var s;const r=this.getLessonById(t);return r?(this.progress.completedLessons.includes(t)||this.progress.completedLessons.push(t),(r.rewards.unlocks||[]).forEach(i=>{this.progress.unlockedLessons.includes(i)||this.progress.unlockedLessons.push(i)}),r.rewards.badge&&!this.progress.badges.includes(r.rewards.badge)&&this.progress.badges.push(r.rewards.badge),this.progress.totalXP+=r.rewards.xp||0,this._saveProgress(),{completed:!0,lessonId:t,lessonTitle:r.title,rewards:r.rewards,nextLesson:((s=r.rewards.unlocks)==null?void 0:s[0])||null,performance:n}):null}resetProgress(){this.progress={completedLessons:[],unlockedLessons:[1],badges:[],totalXP:0,currentModule:Ct.FUNDAMENTALS},this._saveProgress()}}function mS(e=new Gb){return e.registerSingleton("gameRepository",()=>new Hb),e.registerSingleton("settingsService",()=>new Zb),e.registerSingleton("statisticsService",()=>new tS),e.registerSingleton("scoringService",()=>new jn),e.registerSingleton("pieceFactory",()=>new Yn),e.registerSingleton("movementStrategyFactory",()=>new Jn),e.registerSingleton("keyboardInputService",()=>new rS),e.registerSingleton("playerStatsService",t=>new aS(t),["gameRepository"]),e.registerSingleton("currencyService",t=>new sS(t),["gameRepository"]),e.registerSingleton("missionsService",(t,n)=>new iS(t,n),["gameRepository","currencyService"]),e.registerSingleton("achievementsService",(t,n,r)=>new oS(t,n,r),["gameRepository","currencyService","playerStatsService"]),e.registerSingleton("shopService",(t,n)=>new m0(t,n),["gameRepository","currencyService"]),e.registerSingleton("gameModesService",t=>new cS(t),["gameRepository"]),e.registerSingleton("leaderboardService",(t,n)=>new uS(t,n),["gameRepository","playerStatsService"]),e.registerSingleton("shareService",t=>new dS(t),["playerStatsService"]),e.registerSingleton("aiOpponentService",()=>new ys),e.registerSingleton("multiplayerService",t=>new hS(t),["gameRepository"]),e.registerSingleton("tutorialService",t=>new fS(t),["gameRepository"]),e.registerSingleton("gameService",(t,n,r,s)=>new Xn(t,n,r,s),["pieceFactory","movementStrategyFactory","gameRepository","scoringService"]),e}const B=mS();function p0(){const[e,t]=x.useState(null),[n,r]=x.useState(!0);x.useEffect(()=>{try{const a=B.resolve("currencyService");t(a.getCurrency()),r(!1);const c=()=>{t(a.getCurrency())};return window.addEventListener("currencyUpdated",c),()=>{window.removeEventListener("currencyUpdated",c)}}catch{r(!1)}},[]);const s=x.useCallback((a,c)=>{try{const u=B.resolve("currencyService"),h=u.addFish(a,c);return h&&(t(u.getCurrency()),window.dispatchEvent(new Event("currencyUpdated"))),h}catch{return!1}},[]),i=x.useCallback((a,c)=>{try{const u=B.resolve("currencyService"),h=u.spendFish(a,c);return h&&(t(u.getCurrency()),window.dispatchEvent(new Event("currencyUpdated"))),h}catch{return!1}},[]),o=x.useCallback(a=>{try{return B.resolve("currencyService").canAfford(a)}catch{return!1}},[]);return{currency:e,loading:n,addFish:s,spendFish:i,canAfford:o}}function pS({className:e=""}){const{currency:t,loading:n}=p0();return n||!t?l.jsxs("div",{className:`flex items-center gap-2 ${e}`,children:[l.jsx("div",{className:"text-2xl",children:""}),l.jsx("div",{className:"text-white/60",children:"..."})]}):l.jsxs(_.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:`flex items-center gap-2 bg-black/30 px-4 py-2 rounded-lg backdrop-blur-sm ${e}`,children:[l.jsx("span",{className:"text-2xl",children:""}),l.jsx(_.span,{initial:{scale:1.2,color:"#fbbf24"},animate:{scale:1,color:"#ffffff"},transition:{duration:.3},className:"text-xl font-bold",children:t.fish.toLocaleString()},t.fish)]})}function gS({onStartGame:e,onNewGame:t,onShowSettings:n,onShowShop:r,onShowMissions:s,onShowAchievements:i,onShowMultiplayer:o,onShowTutorial:a,onShowTutorialHub:c,onShowAIShowcase:u,onShowCreatorMode:h,onShowInstallPrompt:d,canInstallPWA:m,hasActiveGame:v,gameState:w}){var P,N;const[b,S]=x.useState(!0),p=Fb(),f=x.useCallback(E=>{var V;b&&((V=p.playMenuSelect)==null||V.call(p)),E==null||E()},[b,p]),g=x.useMemo(()=>{const E=[];return v?(E.push({label:"Continuar",action:e}),E.push({label:"Novo Jogo",action:t})):E.push({label:"Jogar",action:e}),E.push({label:"VS IA",action:o}),E.push({label:"Tutorial",action:c}),E.push({label:"Criador",action:h}),E.push({label:"IA Expert",action:u}),E.push({label:"Loja",action:r}),E.push({label:"Misses",action:s}),E.push({label:"Conquistas",action:i}),E.push({label:"Config",action:n}),E},[v,e,t,o,c,h,u,r,s,i,n]),y=x.useCallback(E=>{g[E]&&f(g[E].action)},[g,f]),{selectedIndex:k}=rr({itemCount:g.length,onConfirm:y,active:!0,wrap:!0}),j=x.useCallback(E=>{var V;return((V=g[k])==null?void 0:V.label)===E},[g,k]);x.useEffect(()=>{const E=V=>{V.key==="Enter"&&(V.preventDefault(),f(e))};return window.addEventListener("keydown",E),()=>window.removeEventListener("keydown",E)},[f,e]);const C=(E=0)=>({initial:{opacity:0,y:16},animate:{opacity:1,y:0},transition:{duration:.35,delay:E,ease:"easeOut"}});return l.jsxs("div",{className:"h-screen bg-gradient-to-b from-slate-900 via-purple-950 to-slate-900 flex flex-col items-center justify-center p-4 relative overflow-hidden",children:[l.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[l.jsx("div",{className:"absolute top-1/4 -left-32 w-64 h-64 bg-purple-600/10 rounded-full blur-3xl"}),l.jsx("div",{className:"absolute bottom-1/4 -right-32 w-64 h-64 bg-blue-600/10 rounded-full blur-3xl"})]}),l.jsx("div",{className:"fixed top-3 right-3 z-50",children:l.jsx(pS,{})}),l.jsxs("div",{className:"w-full max-w-sm relative z-10 flex flex-col items-center",children:[l.jsxs(_.div,{...C(0),className:"text-center mb-4",children:[l.jsx("h1",{className:"text-4xl font-extrabold text-white tracking-tight drop-shadow-lg select-none",children:" Cat Tetris"}),l.jsx("p",{className:"text-white/50 text-xs mt-1",children:"Empilhe blocos com seus amigos felinos"})]}),l.jsx(_.div,{...C(.1),className:"w-full space-y-2 mb-4",children:v?l.jsxs(l.Fragment,{children:[l.jsxs("button",{onClick:()=>f(e),className:`w-full py-4 rounded-xl bg-emerald-500 hover:bg-emerald-400 active:scale-[0.98] text-white font-bold text-lg shadow-lg shadow-emerald-500/20 transition-all duration-150 ${j("Continuar")?"ring-2 ring-yellow-400 ring-offset-2 ring-offset-slate-900 scale-[1.02]":""}`,children:[" Continuar",l.jsxs("span",{className:"block text-emerald-100/70 text-xs font-normal mt-0.5",children:["Nvel ",((P=w==null?void 0:w.score)==null?void 0:P.level)||1,"  ",(((N=w==null?void 0:w.score)==null?void 0:N.points)||0).toLocaleString()," pts"]})]}),l.jsx("button",{onClick:()=>f(t),className:`w-full py-3 rounded-xl bg-white/10 hover:bg-white/15 active:scale-[0.98] text-white font-semibold text-base border border-white/10 transition-all duration-150 ${j("Novo Jogo")?"ring-2 ring-yellow-400 ring-offset-2 ring-offset-slate-900 scale-[1.02]":""}`,children:"Novo Jogo"})]}):l.jsx("button",{onClick:()=>f(e),className:`w-full py-5 rounded-xl bg-gradient-to-r from-emerald-500 to-green-500 hover:from-emerald-400 hover:to-green-400 active:scale-[0.98] text-white font-bold text-xl shadow-lg shadow-emerald-500/25 transition-all duration-150 ${j("Jogar")?"ring-2 ring-yellow-400 ring-offset-2 ring-offset-slate-900 scale-[1.02]":""}`,children:" Jogar"})}),l.jsxs(_.div,{...C(.18),className:"w-full grid grid-cols-2 gap-2 mb-4",children:[l.jsx(yi,{icon:"",label:"VS IA",sub:"Desafie o bot",onClick:()=>f(o),selected:j("VS IA")}),l.jsx(yi,{icon:"",label:"Tutorial",sub:"Aprenda a jogar",onClick:()=>f(c),selected:j("Tutorial")}),l.jsx(yi,{icon:"",label:"Criador",sub:"Treine T-Spins",onClick:()=>f(h),selected:j("Criador")}),l.jsx(yi,{icon:"",label:"IA Expert",sub:"Assista a IA jogar",onClick:()=>f(u),selected:j("IA Expert")})]}),l.jsxs(_.div,{...C(.25),className:"w-full grid grid-cols-4 gap-1 mb-4",children:[l.jsx(wi,{icon:"",label:"Loja",onClick:()=>f(r),selected:j("Loja")}),l.jsx(wi,{icon:"",label:"Misses",onClick:()=>f(s),selected:j("Misses")}),l.jsx(wi,{icon:"",label:"Conquistas",onClick:()=>f(i),selected:j("Conquistas")}),l.jsx(wi,{icon:"",label:"Config",onClick:()=>f(n),selected:j("Config")})]}),l.jsxs(_.div,{...C(.3),className:"flex items-center gap-3 text-xs text-white/25",children:[l.jsx("button",{onClick:()=>S(!b),className:"hover:text-white/50 transition-colors",children:b?"":""}),m&&l.jsx("button",{onClick:()=>f(d),className:"hover:text-white/50 transition-colors",children:" Instalar"}),l.jsx("span",{className:"select-none",children:"v1.0"})]})]})]})}function yi({icon:e,label:t,sub:n,onClick:r,selected:s}){return l.jsxs("button",{onClick:r,className:`flex flex-col items-center text-center p-3 rounded-xl bg-white/[0.06] hover:bg-white/[0.1] border border-white/[0.06] hover:border-white/[0.12] active:scale-[0.97] transition-all duration-150 ${s?"ring-2 ring-yellow-400 bg-white/[0.12] border-yellow-400/30 scale-[1.03]":""}`,children:[l.jsx("span",{className:"text-2xl mb-1",children:e}),l.jsx("span",{className:"text-white font-semibold text-sm leading-tight",children:t}),l.jsx("span",{className:"text-white/40 text-[10px] mt-0.5 leading-tight",children:n})]})}function wi({icon:e,label:t,onClick:n,selected:r}){return l.jsxs("button",{onClick:n,className:`flex flex-col items-center gap-1 px-2 py-2 rounded-lg hover:bg-white/[0.07] active:scale-95 transition-all duration-150 ${r?"ring-2 ring-yellow-400 bg-white/[0.1] scale-105":""}`,children:[l.jsx("span",{className:"text-lg",children:e}),l.jsx("span",{className:"text-white/40 text-[10px] leading-none",children:t})]})}function xS({onClose:e}){const[t,n]=x.useState(null),[r,s]=x.useState(!0),[i,o]=x.useState(!1);x.useEffect(()=>{const u=d=>{d.preventDefault(),n(d)},h=()=>{o(!0),s(!1),n(null),localStorage.setItem("cat-tetris-installed","true"),e&&e()};return window.addEventListener("beforeinstallprompt",u),window.addEventListener("appinstalled",h),window.matchMedia("(display-mode: standalone)").matches&&(o(!0),e&&e()),()=>{window.removeEventListener("beforeinstallprompt",u),window.removeEventListener("appinstalled",h)}},[e]);const a=async()=>{if(!t)return;t.prompt();const{outcome:u}=await t.userChoice;u==="accepted"&&(s(!1),e&&e()),localStorage.setItem("cat-tetris-install-prompt-seen","true"),n(null)},c=()=>{s(!1),localStorage.setItem("cat-tetris-install-prompt-seen","true"),e&&e()};return i?null:t?l.jsx(we,{children:r&&l.jsx(_.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:l.jsx(_.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},className:"bg-gradient-to-br from-purple-900 to-blue-900 rounded-2xl p-6 max-w-md w-full shadow-2xl border-2 border-purple-500/30",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-6xl mb-4",children:""}),l.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Instalar Cat Tetris"}),l.jsx("p",{className:"text-purple-200 mb-6",children:"Instale o Cat Tetris na sua tela inicial para jogar offline a qualquer momento! Funciona como um app nativo."}),l.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-6 text-sm",children:[l.jsxs("div",{className:"bg-white/10 rounded-lg p-3",children:[l.jsx("div",{className:"text-green-400 mb-1",children:" Acesso Rpido"}),l.jsx("div",{className:"text-purple-200",children:"cone na tela inicial"})]}),l.jsxs("div",{className:"bg-white/10 rounded-lg p-3",children:[l.jsx("div",{className:"text-green-400 mb-1",children:" Offline"}),l.jsx("div",{className:"text-purple-200",children:"Jogue sem internet"})]}),l.jsxs("div",{className:"bg-white/10 rounded-lg p-3",children:[l.jsx("div",{className:"text-green-400 mb-1",children:" Performance"}),l.jsx("div",{className:"text-purple-200",children:"Carregamento instantneo"})]}),l.jsxs("div",{className:"bg-white/10 rounded-lg p-3",children:[l.jsx("div",{className:"text-green-400 mb-1",children:" Experincia"}),l.jsx("div",{className:"text-purple-200",children:"Como app nativo"})]})]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx(_.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:c,className:"flex-1 bg-gray-600 hover:bg-gray-700 text-white py-3 px-4 rounded-xl font-semibold transition-colors",children:"Agora no"}),l.jsx(_.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:a,className:"flex-1 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white py-3 px-4 rounded-xl font-semibold transition-all shadow-lg",children:" Instalar"})]})]})})})}):l.jsx(_.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:l.jsx(_.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},className:"bg-gradient-to-br from-purple-900 to-blue-900 rounded-2xl p-6 max-w-md w-full shadow-2xl border-2 border-purple-500/30",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-6xl mb-4",children:""}),l.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"PWA no disponvel"}),l.jsx("p",{className:"text-purple-200 mb-6",children:"Este dispositivo no suporta instalao de PWA ou o app j est instalado."}),l.jsx(_.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:c,className:"w-full bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white py-3 px-4 rounded-xl font-semibold transition-all shadow-lg",children:" Entendi"})]})})})}function g0(){const[e,t]=x.useState([]),[n,r]=x.useState(!0);x.useEffect(()=>{try{const o=B.resolve("missionsService");t(o.getMissions()),r(!1);const a=()=>{t(o.getMissions())},c=({linesCleared:v})=>{o.incrementProgress(he.CLEAR_LINES,v),v===4&&o.incrementProgress(he.TETRIS_CLEAR,1),a()},u=()=>{o.incrementProgress(he.T_SPINS,1),a()},h=()=>{o.incrementProgress(he.PLACE_PIECES,1),a()},d=({score:v,level:w,combo:b})=>{v&&o.updateProgress(he.SCORE_POINTS,v),w&&o.updateProgress(he.REACH_LEVEL,w),b&&o.updateProgress(he.COMBOS,b),a()},m=()=>{o.incrementProgress(he.BACK_TO_BACK,1),a()};return R.on(O.LINE_CLEARED,c),R.on(O.T_SPIN,u),R.on(O.PIECE_PLACED,h),R.on(O.SCORE_UPDATED,d),R.on(O.BACK_TO_BACK,m),()=>{R.off(O.LINE_CLEARED,c),R.off(O.T_SPIN,u),R.off(O.PIECE_PLACED,h),R.off(O.SCORE_UPDATED,d),R.off(O.BACK_TO_BACK,m)}}catch{r(!1)}},[]),x.useEffect(()=>{if(n)return;const o=setInterval(()=>{try{const a=B.resolve("missionsService"),u=B.resolve("statisticsService").getStats();u.playTime>0&&(a.updateProgress(he.SURVIVE_TIME,u.playTime),t(a.getMissions()))}catch{}},1e3);return()=>clearInterval(o)},[n]);const s=x.useCallback(o=>{try{const a=B.resolve("missionsService"),c=a.claimReward(o);return c.success&&(t(a.getMissions()),window.dispatchEvent(new Event("currencyUpdated"))),c}catch(a){return{success:!1,error:a.message}}},[]),i=x.useCallback(()=>{try{return B.resolve("missionsService").getStats()}catch{return null}},[]);return{missions:e,loading:n,claimReward:s,getMissionsStats:i}}function x0({trigger:e,duration:t=3e3,message:n}){const[r,s]=x.useState(!1),[i,o]=x.useState([]);return x.useEffect(()=>{if(e){s(!0);const a=[];for(let c=0;c<50;c++)a.push({id:c,x:Math.random()*100,y:-10,rotation:Math.random()*360,color:["#FFD700","#FF6B6B","#4ECDC4","#45B7D1","#FFA07A","#98D8C8"][Math.floor(Math.random()*6)],size:Math.random()*10+5,delay:Math.random()*.5});o(a),setTimeout(()=>{s(!1),o([])},t)}},[e,t]),r?l.jsxs("div",{className:"fixed inset-0 pointer-events-none z-[9999] overflow-hidden",children:[i.map(a=>l.jsx(_.div,{initial:{x:`${a.x}vw`,y:a.y,rotate:a.rotation,opacity:1},animate:{y:"110vh",rotate:a.rotation+720,opacity:0},transition:{duration:2+Math.random(),delay:a.delay,ease:"easeIn"},style:{position:"absolute",width:a.size,height:a.size,backgroundColor:a.color,borderRadius:Math.random()>.5?"50%":"0"}},a.id)),n&&l.jsx(_.div,{initial:{scale:0,y:"50vh"},animate:{scale:1,y:"40vh"},exit:{scale:0,opacity:0},transition:{type:"spring",stiffness:200,damping:20},className:"absolute inset-x-0 flex justify-center",children:l.jsx("div",{className:"bg-gradient-to-r from-yellow-400 to-orange-500 text-white font-bold text-4xl px-8 py-4 rounded-2xl shadow-2xl border-4 border-white",children:n})}),l.jsx(_.div,{initial:{opacity:0},animate:{opacity:[0,1,0]},transition:{duration:1,repeat:3},className:"absolute inset-0 bg-gradient-to-b from-yellow-400/20 via-transparent to-transparent"})]}):null}function vS(){const[e,t]=x.useState([]);x.useEffect(()=>{const s=i=>{const{message:o,type:a="info",duration:c=3e3}=i.detail,u={id:`toast_${Date.now()}_${Math.random()}`,message:o,type:a,duration:c};t(h=>[...h,u]),setTimeout(()=>{t(h=>h.filter(d=>d.id!==u.id))},c)};return window.addEventListener("showToast",s),()=>window.removeEventListener("showToast",s)},[]);const n=s=>{switch(s){case"success":return"from-green-600 to-emerald-600 border-green-400";case"error":return"from-red-600 to-rose-600 border-red-400";case"warning":return"from-yellow-600 to-amber-600 border-yellow-400";case"info":default:return"from-blue-600 to-cyan-600 border-blue-400"}},r=s=>{switch(s){case"success":return"";case"error":return"";case"warning":return"";case"info":default:return""}};return l.jsx("div",{className:"fixed top-4 right-4 z-[9999] flex flex-col gap-2 pointer-events-none",children:l.jsx(we,{children:e.map(s=>l.jsx(_.div,{initial:{opacity:0,x:100,scale:.8},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:100,scale:.8},className:`bg-gradient-to-r ${n(s.type)} border-2 rounded-lg px-4 py-3 shadow-2xl min-w-[250px] max-w-[400px] pointer-events-auto`,children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("span",{className:"text-white text-xl font-bold",children:r(s.type)}),l.jsx("span",{className:"text-white font-medium flex-1",children:s.message})]})},s.id))})})}function Sr(e,t="info",n=3e3){window.dispatchEvent(new CustomEvent("showToast",{detail:{message:e,type:t,duration:n}}))}function yS({onClose:e}){const{missions:t,loading:n,claimReward:r,getMissionsStats:s}=g0(),[i,o]=ue.useState(!1);rr({itemCount:0,onBack:e,active:!0});const a=s(),c=d=>{const m=r(d);m.success?(Sr(` Recompensa coletada: +${m.reward} `,"success"),s().allClaimed&&(o(!0),setTimeout(()=>o(!1),3e3))):Sr(` ${m.error}`,"error")},u=d=>{switch(d){case"easy":return"text-green-400";case"medium":return"text-yellow-400";case"hard":return"text-red-400";default:return"text-white"}},h=d=>{switch(d){case"easy":return" Fcil";case"medium":return" Mdio";case"hard":return" Difcil";default:return d}};return n?l.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",children:l.jsx("div",{className:"text-white text-xl",children:"Carregando misses..."})}):l.jsxs(_.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:e,children:[l.jsxs(_.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},className:"bg-gradient-to-br from-purple-900/95 to-blue-900/95 rounded-2xl p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto border-2 border-white/20 shadow-2xl",onClick:d=>d.stopPropagation(),children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-3xl font-bold text-white flex items-center gap-2",children:" Misses Dirias"}),l.jsx("p",{className:"text-white/60 text-sm mt-1",children:"Complete misses para ganhar  Peixes"})]}),l.jsx("button",{onClick:e,className:"text-white/60 hover:text-white text-2xl transition-colors",children:""})]}),a&&l.jsxs("div",{className:"bg-black/30 rounded-lg p-4 mb-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-white/80",children:"Progresso Dirio:"}),l.jsxs("span",{className:"text-white font-bold",children:[a.completed,"/",a.total," completas"]})]}),l.jsxs("div",{className:"flex justify-between items-center mt-2",children:[l.jsx("span",{className:"text-white/80",children:"Recompensas Disponveis:"}),l.jsxs("span",{className:"text-yellow-400 font-bold flex items-center gap-1",children:[" ",a.claimedRewards,"/",a.totalRewards]})]})]}),l.jsx("div",{className:"space-y-4",children:t.map((d,m)=>{const v=Math.min(d.progress,d.target),w=v/d.target*100;return l.jsxs(_.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:m*.1},className:`bg-black/40 rounded-lg p-4 border-2 ${d.completed?"border-green-500/50":"border-white/10"}`,children:[l.jsxs("div",{className:"flex justify-between items-start mb-2",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx("h3",{className:"text-white font-bold text-lg",children:d.title}),d.completed&&!d.claimed&&l.jsx("span",{className:"text-green-400 text-xl animate-pulse",children:""}),d.claimed&&l.jsx("span",{className:"text-white/40 text-sm",children:"(Coletado)"})]}),l.jsx("p",{className:"text-white/60 text-sm",children:d.description}),l.jsx("span",{className:`text-xs ${u(d.difficulty)}`,children:h(d.difficulty)})]}),l.jsx("div",{className:"text-right",children:l.jsxs("div",{className:"text-yellow-400 font-bold flex items-center gap-1",children:[l.jsx("span",{className:"text-2xl",children:""}),l.jsx("span",{children:d.reward})]})})]}),l.jsxs("div",{className:"mt-3",children:[l.jsxs("div",{className:"flex justify-between text-sm text-white/60 mb-1",children:[l.jsx("span",{children:"Progresso"}),l.jsxs("span",{children:[v,"/",d.target]})]}),l.jsx("div",{className:"w-full bg-gray-700 rounded-full h-3 overflow-hidden",children:l.jsx(_.div,{initial:{width:0},animate:{width:`${w}%`},transition:{duration:.5},className:`h-full ${d.completed?"bg-green-500":"bg-blue-500"}`})})]}),d.completed&&!d.claimed&&l.jsx(_.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>c(d.id),className:"w-full mt-3 bg-green-600 hover:bg-green-500 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:" Coletar Recompensa"})]},d.id)})}),l.jsx("div",{className:"mt-6 text-center text-white/40 text-sm",children:"As misses resetam todos os dias s 00:00"})]}),l.jsx(x0,{trigger:i,message:" Todas as misses completas! ",duration:3e3})]})}function v0(){const[e,t]=x.useState([]),[n,r]=x.useState([]),[s,i]=x.useState(!0);x.useEffect(()=>{try{const h=B.resolve("achievementsService");t(h.getAchievements()),i(!1);const d=()=>{try{const b=B.resolve("playerStatsService").getStats(),S=h.checkAchievements(b);S.length>0&&(t(h.getAchievements()),r(S),window.dispatchEvent(new CustomEvent("achievementsUnlocked",{detail:S})),setTimeout(()=>{r([])},5e3))}catch{}},m=setInterval(d,2e3),v=()=>d();return window.addEventListener("playerStatsUpdated",v),()=>{clearInterval(m),window.removeEventListener("playerStatsUpdated",v)}}catch{i(!1)}},[]);const o=x.useCallback(h=>{try{return B.resolve("achievementsService").getByTier(h)}catch{return[]}},[]),a=x.useCallback(()=>{try{return B.resolve("achievementsService").getUnlocked()}catch{return[]}},[]),c=x.useCallback(()=>{try{return B.resolve("achievementsService").getLocked()}catch{return[]}},[]),u=x.useCallback(()=>{try{return B.resolve("achievementsService").getStats()}catch{return null}},[]);return{achievements:e,newUnlocks:n,loading:s,getAchievementsByTier:o,getUnlocked:a,getLocked:c,getStats:u}}function wS({onClose:e}){const{achievements:t,loading:n,getStats:r,getAchievementsByTier:s}=v0(),[i,o]=x.useState("all");rr({itemCount:0,onBack:e,active:!0});const a=r(),c={bronze:"from-amber-700 to-amber-900",silver:"from-gray-400 to-gray-600",gold:"from-yellow-400 to-yellow-600",platinum:"from-cyan-400 to-blue-600"},u={bronze:"",silver:"",gold:"",platinum:""},h=i==="all"?t:s(i);return n?l.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",children:l.jsx("div",{className:"text-white text-xl",children:"Carregando conquistas..."})}):l.jsx(_.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:e,children:l.jsxs(_.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},className:"bg-gradient-to-br from-indigo-900/95 to-purple-900/95 rounded-2xl p-6 max-w-4xl w-full max-h-[90vh] overflow-y-auto border-2 border-white/20 shadow-2xl",onClick:d=>d.stopPropagation(),children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-3xl font-bold text-white flex items-center gap-2",children:" Conquistas"}),l.jsx("p",{className:"text-white/60 text-sm mt-1",children:"Desbloqueie conquistas para ganhar  Peixes"})]}),l.jsx("button",{onClick:e,className:"text-white/60 hover:text-white text-2xl transition-colors",children:""})]}),a&&l.jsxs("div",{className:"bg-black/30 rounded-lg p-4 mb-6",children:[l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-2xl font-bold text-white",children:[a.unlocked,"/",a.total]}),l.jsx("div",{className:"text-white/60 text-sm",children:"Desbloqueadas"})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-2xl font-bold text-green-400",children:[a.percentage,"%"]}),l.jsx("div",{className:"text-white/60 text-sm",children:"Completo"})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-2xl font-bold text-yellow-400 flex items-center justify-center gap-1",children:[" ",a.earnedRewards.toLocaleString()]}),l.jsx("div",{className:"text-white/60 text-sm",children:"Ganhos"})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-2xl font-bold text-white/40 flex items-center justify-center gap-1",children:[" ",a.totalRewards.toLocaleString()]}),l.jsx("div",{className:"text-white/60 text-sm",children:"Total"})]})]}),l.jsxs("div",{className:"flex justify-around mt-4 pt-4 border-t border-white/10",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-lg",children:""}),l.jsx("div",{className:"text-white/80 text-sm",children:a.byTier.bronze})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-lg",children:""}),l.jsx("div",{className:"text-white/80 text-sm",children:a.byTier.silver})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-lg",children:""}),l.jsx("div",{className:"text-white/80 text-sm",children:a.byTier.gold})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-lg",children:""}),l.jsx("div",{className:"text-white/80 text-sm",children:a.byTier.platinum})]})]})]}),l.jsxs("div",{className:"flex gap-2 mb-4 overflow-x-auto",children:[l.jsx("button",{onClick:()=>o("all"),className:`px-4 py-2 rounded-lg font-bold transition-colors whitespace-nowrap ${i==="all"?"bg-white text-black":"bg-white/20 text-white hover:bg-white/30"}`,children:"Todas"}),Object.keys(u).map(d=>l.jsxs("button",{onClick:()=>o(d),className:`px-4 py-2 rounded-lg font-bold transition-colors whitespace-nowrap ${i===d?`bg-gradient-to-r ${c[d]} text-white`:"bg-white/20 text-white hover:bg-white/30"}`,children:[u[d]," ",d.charAt(0).toUpperCase()+d.slice(1)]},d))]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:h.map((d,m)=>{const v=d.progress||0,w=d.requirement.value,b=Math.min(v/w*100,100);return l.jsxs(_.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:m*.05},className:`bg-black/40 rounded-lg p-4 border-2 relative overflow-hidden ${d.unlocked?`border-transparent bg-gradient-to-br ${c[d.tier]}`:"border-white/10"}`,children:[d.unlocked&&l.jsx("div",{className:"absolute top-2 right-2 text-3xl",children:""}),l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:"text-4xl",children:u[d.tier]}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:`font-bold text-lg mb-1 ${d.unlocked?"text-white":"text-white/60"}`,children:d.title}),l.jsx("p",{className:`text-sm mb-2 ${d.unlocked?"text-white/90":"text-white/40"}`,children:d.description}),l.jsxs("div",{className:`flex items-center gap-1 text-sm font-bold ${d.unlocked?"text-yellow-300":"text-white/40"}`,children:[" ",d.reward]}),!d.unlocked&&l.jsxs("div",{className:"mt-2",children:[l.jsxs("div",{className:"flex justify-between text-xs text-white/40 mb-1",children:[l.jsx("span",{children:"Progresso"}),l.jsxs("span",{children:[v,"/",w]})]}),l.jsx("div",{className:"w-full bg-gray-700/50 rounded-full h-2",children:l.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${b}%`}})})]}),d.unlocked&&d.unlockedAt&&l.jsxs("div",{className:"text-xs text-white/60 mt-2",children:["Desbloqueado em ",new Date(d.unlockedAt).toLocaleDateString()]})]})]})]},d.id)})}),h.length===0&&l.jsx("div",{className:"text-center text-white/40 py-8",children:"Nenhuma conquista nesta categoria"})]})})}function bS(){const[e,t]=x.useState([]),[n,r]=x.useState(!1);x.useEffect(()=>{const o=a=>{const c=a.detail;c.some(h=>h.tier==="platinum")&&(r(!0),setTimeout(()=>r(!1),3e3)),c.forEach((h,d)=>{setTimeout(()=>{const m={id:`${h.id}_${Date.now()}`,achievement:h};t(v=>[...v,m]),setTimeout(()=>{t(v=>v.filter(w=>w.id!==m.id))},5e3)},d*500)})};return window.addEventListener("achievementsUnlocked",o),()=>{window.removeEventListener("achievementsUnlocked",o)}},[]);const s={bronze:"",silver:"",gold:"",platinum:""},i={bronze:"from-amber-700 to-amber-900",silver:"from-gray-400 to-gray-600",gold:"from-yellow-400 to-yellow-600",platinum:"from-cyan-400 to-blue-600"};return l.jsxs("div",{className:"fixed top-4 right-4 z-[9999] pointer-events-none",children:[l.jsx(we,{children:e.map(o=>{const{achievement:a}=o;return l.jsx(_.div,{initial:{opacity:0,x:100,scale:.8},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:100,scale:.8},transition:{type:"spring",stiffness:200,damping:20},className:`bg-gradient-to-r ${i[a.tier]} rounded-lg p-4 shadow-2xl mb-3 border-2 border-white/30 pointer-events-auto max-w-sm`,children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"text-5xl",children:s[a.tier]}),l.jsxs("div",{className:"flex-1",children:[l.jsx("div",{className:"text-white/90 text-sm font-bold mb-1",children:" CONQUISTA DESBLOQUEADA!"}),l.jsx("h3",{className:"text-white font-bold text-lg",children:a.title}),l.jsx("p",{className:"text-white/80 text-sm",children:a.description}),l.jsxs("div",{className:"flex items-center gap-1 mt-2 text-yellow-200 font-bold",children:[l.jsx("span",{className:"text-xl",children:""}),l.jsxs("span",{children:["+",a.reward]})]})]})]})},o.id)})}),l.jsx(x0,{trigger:n,message:" Conquista Lendria! ",duration:3e3})]})}const y0=({isConnected:e,controllerCount:t,gamepadInfo:n,className:r=""})=>{const[s,i]=x.useState(!1);return e?l.jsx("div",{className:`fixed top-4 right-4 z-50 ${r}`,children:l.jsxs(_.div,{initial:{opacity:0,scale:.8,x:20},animate:{opacity:1,scale:1,x:0},exit:{opacity:0,scale:.8,x:20},transition:{duration:.3},className:"bg-gray-900/90 backdrop-blur-sm text-white p-3 rounded-lg border border-green-500/30 shadow-lg",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(_.div,{animate:{rotate:[0,-10,10,-10,0],scale:[1,1.1,1]},transition:{duration:2,repeat:1/0,repeatDelay:3},children:""}),l.jsxs("div",{className:"text-sm",children:[l.jsxs("div",{className:"text-green-400 font-semibold",children:[t," Controle",t!==1?"s":""," Conectado",t!==1?"s":""]}),l.jsx("div",{className:"text-gray-300 text-xs",children:"Pronto para jogar!"})]}),l.jsx(_.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>i(!s),className:"ml-2 text-gray-400 hover:text-white transition-colors",title:"Mostrar controles",children:l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"})})})]}),l.jsx(we,{children:s&&l.jsx(_.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},className:"mt-3 pt-3 border-t border-gray-700",children:l.jsxs("div",{className:"text-xs text-gray-300 space-y-1",children:[l.jsx("div",{className:"font-semibold text-white mb-2",children:" Controles:"}),l.jsxs("div",{className:"grid grid-cols-2 gap-1 text-xs",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-yellow-400",children:"D-Pad  "}),l.jsx("div",{className:"text-gray-400",children:"Mover"})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-yellow-400",children:"D-Pad "}),l.jsx("div",{className:"text-gray-400",children:"Acelerar"})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-yellow-400",children:"D-Pad "}),l.jsx("div",{className:"text-gray-400",children:"Hard Drop"})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-yellow-400",children:"A/X/Y"}),l.jsx("div",{className:"text-gray-400",children:"Girar "})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-yellow-400",children:"B"}),l.jsx("div",{className:"text-gray-400",children:"Girar "})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-yellow-400",children:"L/R"}),l.jsx("div",{className:"text-gray-400",children:"Guardar"})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-yellow-400",children:"Start"}),l.jsx("div",{className:"text-gray-400",children:"Pausar"})]})]}),l.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-700",children:[l.jsx("div",{className:"text-green-400 text-xs",children:" Analog Stick Esquerdo tambm funciona!"}),l.jsx("div",{className:"text-blue-400 text-xs",children:" L2/R2 tambm giram a pea"}),l.jsx("div",{className:"text-purple-400 text-xs",children:" Back/Select = Voltar ao menu"})]}),n&&(Array.isArray(n)?n:[n]).length>0&&l.jsx("div",{className:"mt-2 pt-2 border-t border-gray-700",children:l.jsx("div",{className:"text-xs text-gray-400",children:(Array.isArray(n)?n:[n]).map((o,a)=>l.jsxs("div",{className:"mb-1",children:[l.jsxs("div",{className:"font-semibold text-white",children:["Controle ",o.index+1,":"]}),l.jsx("div",{className:"text-gray-300 truncate",children:o.id.length>30?o.id.substring(0,30)+"...":o.id}),l.jsxs("div",{className:"flex gap-2 text-xs",children:[l.jsxs("span",{className:"text-blue-400",children:[o.buttons," botes"]}),l.jsxs("span",{className:"text-green-400",children:[o.axes," eixos"]}),o.vibration&&l.jsx("span",{className:"text-purple-400",children:" Vibrao"})]})]},a))})})]})})})]})}):null},Me={DPAD_UP:12,DPAD_DOWN:13,DPAD_LEFT:14,DPAD_RIGHT:15,FACE_BUTTON_BOTTOM:0,FACE_BUTTON_RIGHT:1,FACE_BUTTON_LEFT:2,FACE_BUTTON_TOP:3,BUMPER_LEFT:4,BUMPER_RIGHT:5,TRIGGER_LEFT:6,TRIGGER_RIGHT:7,BUTTON_BACK:8,BUTTON_START:9,STICK_LEFT:10,STICK_RIGHT:11},w0=(e=null)=>{const[t,n]=x.useState([]),[r,s]=x.useState(!1),i=x.useRef({}),o=x.useRef(33),a=x.useRef({}),c=x.useRef({}),u=x.useRef(167),h=.5,d=.5;x.useEffect(()=>{const S=g=>{n(y=>y.some(k=>k.index===g.gamepad.index)?y:[...y,g.gamepad]),s(!0);try{g.gamepad.vibrationActuator&&g.gamepad.vibrationActuator.playEffect("dual-rumble",{duration:200,strongMagnitude:.5,weakMagnitude:.5})}catch{}},p=g=>{n(k=>k.filter(j=>j.index!==g.gamepad.index));const y=navigator.getGamepads().filter(k=>k&&k.connected);s(y.length>0)};return window.addEventListener("gamepadconnected",S),window.addEventListener("gamepaddisconnected",p),(()=>{const g=navigator.getGamepads(),y=Array.from(g).filter(k=>k&&k.connected);y.length>0&&(n(y),s(!0))})(),()=>{window.removeEventListener("gamepadconnected",S),window.removeEventListener("gamepaddisconnected",p)}},[]);const m=x.useCallback((S,p,f)=>{const g=f??d;return Math.abs(S)<g&&Math.abs(p)<g?null:Math.abs(S)>Math.abs(p)?S>0?"right":"left":p>0?"down":"up"},[]),v=x.useCallback(()=>{var le,I,W,T,M;if(!r||!e)return;const S=navigator.getGamepads(),p=Array.from(S).find(A=>A&&A.connected);if(!p)return;const f=Date.now(),{movePiece:g,rotatePiece:y,rotatePieceLeft:k,hardDrop:j,holdPiece:C,pause:P,resume:N,togglePause:E}=e;if(!g)return;const V=((le=e.isGameOver)==null?void 0:le.call(e))??!1,K=(A,L)=>{const F=`movement_${A}`,re=i.current[F]||0,$=c.current[F]||!1;if(L&&!$){c.current[F]=!0,c.current[F+"_start"]=f,i.current[F]=f,q(A);return}if(L&&$){const z=f-(c.current[F+"_start"]||re)<u.current?u.current:o.current;f-re>=z&&(i.current[F]=f,q(A));return}!L&&$&&(c.current[F]=!1,c.current[F+"_start"]=0)},q=A=>{e.movePiece&&e.movePiece(A)};if(!V){const A=m(p.axes[0],p.axes[1]),L=((I=p.buttons[Me.DPAD_LEFT])==null?void 0:I.pressed)||A==="left",F=((W=p.buttons[Me.DPAD_RIGHT])==null?void 0:W.pressed)||A==="right",re=((T=p.buttons[Me.DPAD_DOWN])==null?void 0:T.pressed)||A==="down";(M=p.buttons[Me.DPAD_UP])!=null&&M.pressed,K("left",L),K("right",F),K("down",re);const $={};[{button:Me.DPAD_UP,action:()=>j==null?void 0:j()},{button:Me.FACE_BUTTON_BOTTOM,action:()=>y==null?void 0:y()},{button:Me.FACE_BUTTON_RIGHT,action:()=>k==null?void 0:k()},{button:Me.FACE_BUTTON_LEFT,action:()=>y==null?void 0:y()},{button:Me.FACE_BUTTON_TOP,action:()=>y==null?void 0:y()},{button:Me.BUMPER_LEFT,action:()=>C==null?void 0:C()},{button:Me.BUMPER_RIGHT,action:()=>C==null?void 0:C()},{button:Me.TRIGGER_LEFT,action:()=>k==null?void 0:k(),isTrigger:!0},{button:Me.TRIGGER_RIGHT,action:()=>y==null?void 0:y(),isTrigger:!0}].forEach(({button:se,action:et,isTrigger:Pe})=>{var H,Z;const Ae=Pe?(((H=p.buttons[se])==null?void 0:H.value)??0)>h:(Z=p.buttons[se])==null?void 0:Z.pressed,ze=a.current[se];$[se]=Ae,Ae&&!ze&&(et(),w(p,se))});const z="stick_up_hardDrop";A==="up"&&!a.current[z]&&(j==null||j(),w(p,Me.DPAD_UP)),$[z]=A==="up",a.current={...a.current,...$}}[{button:Me.BUTTON_START,action:()=>{E?E():P&&P()}},{button:Me.BUTTON_BACK,action:()=>{e.backToMenu&&e.backToMenu()}}].forEach(({button:A,action:L})=>{var $;const F=($=p.buttons[A])==null?void 0:$.pressed,re=a.current[A];a.current[A]=F,F&&!re&&(L(),w(p,A))})},[r,m,e]),w=x.useCallback((S,p)=>{try{if(S.vibrationActuator){const f=p===Me.DPAD_UP;S.vibrationActuator.playEffect("dual-rumble",{duration:f?80:50,strongMagnitude:f?.3:.1,weakMagnitude:f?.15:.05})}}catch{}},[]),b=x.useCallback(()=>{const S=navigator.getGamepads(),p=Array.from(S).filter(f=>f&&f.connected);return p.length===0?[]:p.map(f=>({id:f.id,index:f.index,connected:f.connected,buttons:f.buttons.length,axes:f.axes.length,vibration:!!f.vibrationActuator}))},[]);return{isGamepadActive:r,connectedGamepads:t,processGamepadInput:v,getGamepadInfo:b,controllerCount:t.length}};function SS({mode:e,aiDifficulty:t,ai1Difficulty:n,ai2Difficulty:r,onExit:s}){var E,V,K,q,X,le,I,W,T,M,A,L,F,re,$,ie,z,se,et,Pe,Ae,ze;const[i,o]=x.useState(null),[a,c]=x.useState(null),[u,h]=x.useState(null),[d,m]=x.useState(0),[v,w]=x.useState(0),b=x.useRef({p1:null,p2:null,ai:null,ai1:null,ai2:null}),S=x.useRef(0),p=x.useRef(null),f=x.useRef(null);x.useEffect(()=>{const H=new Xn(new Yn,new Jn,null,new jn),Z=new Xn(new Yn,new Jn,null,new jn);let Te=null,ee=null,te=null;if(e==="vsAI")try{Te=new ys,Te.setDifficulty(t||"medium"),t==="expert"&&(Z.score._fixedLevel=1)}catch{}else e==="aiVsAI"&&(ee=new ys,ee.setDifficulty(n||"expert"),ee.setVisualMode(!0),te=new ys,te.setDifficulty(r||"expert"),te.setVisualMode(!0),(n||"expert")==="expert"&&(H.score._fixedLevel=1),(r||"expert")==="expert"&&(Z.score._fixedLevel=1));return H.initializeGame(),H.isPlaying=!0,Z.initializeGame(),Z.isPlaying=!0,e==="vsAI"&&t==="expert"?(Z._lockDelayMax=2e3,Z._lockDelayMaxResets=50):e==="aiVsAI"&&((n||"expert")==="expert"&&(H._lockDelayMax=2e3,H._lockDelayMaxResets=50),(r||"expert")==="expert"&&(Z._lockDelayMax=2e3,Z._lockDelayMaxResets=50)),b.current={p1:H,p2:Z,ai:Te,ai1:ee,ai2:te},o(H.getGameState()),c(Z.getGameState()),()=>{p.current&&cancelAnimationFrame(p.current)}},[e,t,n,r]),x.useEffect(()=>{const H=Z=>{var su,iu;S.current||(S.current=Z);const Te=Z-S.current;S.current=Z;const{p1:ee,p2:te,ai:Xs,ai1:Bo,ai2:J}=b.current;if(!ee||!te){p.current=requestAnimationFrame(H);return}if(ee.gameOver||te.gameOver){f.current||(ee.gameOver&&!te.gameOver?f.current="player2":!ee.gameOver&&te.gameOver?f.current="player1":f.current=(((su=ee.score)==null?void 0:su.points)||0)>=(((iu=te.score)==null?void 0:iu.points)||0)?"player1":"player2",h(f.current)),ee.gameOver||(ee.gameOver=!0,ee._markDirty()),te.gameOver||(te.gameOver=!0,te._markDirty()),ee.isDirty&&(o(ee.getGameState()),ee.clearDirty()),te.isDirty&&(c(te.getGameState()),te.clearDirty());return}ee.isPaused||ee.updateGame(Te),te.isPaused||te.updateGame(Te);const Ee=ee.consumeAttack();Ee>0&&!te.gameOver&&te.receiveGarbage(Ee);const Qt=te.consumeAttack();Qt>0&&!ee.gameOver&&ee.receiveGarbage(Qt);const zo=(Ho,Xt)=>{if(!(!Ho||Xt.gameOver))try{const N0=e==="aiVsAI"?3:Ho._isExpert?2:1;for(let ou=0;ou<N0;ou++){const Uo=Ho.decideNextMove(Xt.getGameState());if(!Uo)break;switch(Uo.action){case"left":Xt.movePiece("left");break;case"right":Xt.movePiece("right");break;case"rotate":Xt.rotatePiece();break;case"down":Xt.movePiece("down");break;case"drop":Xt.hardDrop();break;case"hold":Xt.holdPiece();break}if(Uo.action==="drop")break}}catch{}};e==="aiVsAI"?(zo(Bo,ee),zo(J,te)):e==="vsAI"&&zo(Xs,te),ee.isDirty&&(o(ee.getGameState()),m(ee.pendingGarbage),ee.clearDirty()),te.isDirty&&(c(te.getGameState()),w(te.pendingGarbage),te.clearDirty()),p.current=requestAnimationFrame(H)};return p.current=requestAnimationFrame(H),()=>{p.current&&cancelAnimationFrame(p.current)}},[e]),x.useEffect(()=>{if(u||e==="aiVsAI")return;const H=Z=>{const Te=b.current.p1;if(!(!Te||Te.gameOver))switch(Z.key){case"ArrowLeft":Z.preventDefault(),Te.movePiece("left");break;case"ArrowRight":Z.preventDefault(),Te.movePiece("right");break;case"ArrowDown":Z.preventDefault(),Te.movePiece("down");break;case"ArrowUp":Z.preventDefault(),Te.rotatePiece();break;case"z":case"Z":Te.rotatePiece("left");break;case"c":case"C":case"Shift":Te.holdPiece();break;case" ":Z.preventDefault(),Te.hardDrop();break}};return window.addEventListener("keydown",H),()=>window.removeEventListener("keydown",H)},[u]);const g=ue.useMemo(()=>u||e==="aiVsAI"?null:{movePiece:H=>{const Z=b.current.p1;Z&&!Z.gameOver&&Z.movePiece(H)},rotatePiece:()=>{const H=b.current.p1;H&&!H.gameOver&&H.rotatePiece()},rotatePieceLeft:()=>{const H=b.current.p1;H&&!H.gameOver&&H.rotatePiece("left")},hardDrop:()=>{const H=b.current.p1;H&&!H.gameOver&&H.hardDrop()},holdPiece:()=>{const H=b.current.p1;H&&!H.gameOver&&H.holdPiece()},isGameOver:()=>{const H=b.current.p1;return(H==null?void 0:H.gameOver)??!1},backToMenu:s},[u,e,s]),{isGamepadActive:y,controllerCount:k,processGamepadInput:j,getGamepadInfo:C}=w0(g);x.useEffect(()=>{if(!y||u||e==="aiVsAI")return;const H=setInterval(()=>j(),16);return()=>clearInterval(H)},[y,u,e,j]);const P=ue.useMemo(()=>{var H;if(!(i!=null&&i.currentPiece)||i!=null&&i.gameOver)return null;try{return(H=b.current.p1)==null?void 0:H.getDropPreview()}catch{return null}},[(V=(E=i==null?void 0:i.currentPiece)==null?void 0:E.position)==null?void 0:V.x,(q=(K=i==null?void 0:i.currentPiece)==null?void 0:K.position)==null?void 0:q.y,(X=i==null?void 0:i.currentPiece)==null?void 0:X.type,(le=i==null?void 0:i.currentPiece)==null?void 0:le.rotationState]),N=ue.useMemo(()=>{var H;if(!(a!=null&&a.currentPiece)||a!=null&&a.gameOver)return null;try{return(H=b.current.p2)==null?void 0:H.getDropPreview()}catch{return null}},[(W=(I=a==null?void 0:a.currentPiece)==null?void 0:I.position)==null?void 0:W.x,(M=(T=a==null?void 0:a.currentPiece)==null?void 0:T.position)==null?void 0:M.y,(A=a==null?void 0:a.currentPiece)==null?void 0:A.type,(L=a==null?void 0:a.currentPiece)==null?void 0:L.rotationState]);return!i||!a?l.jsx("div",{className:"h-screen flex items-center justify-center bg-gradient-to-br from-purple-900 to-blue-900",children:l.jsx("div",{className:"text-white text-2xl",children:"Carregando multiplayer..."})}):l.jsxs("div",{className:"h-screen flex flex-col items-center bg-gradient-to-br from-purple-900 to-blue-900 p-2 overflow-hidden",children:[y&&l.jsx(y0,{isConnected:y,controllerCount:k,gamepadInfo:C()}),l.jsxs("div",{className:"flex justify-between items-center w-full max-w-5xl mb-2",children:[l.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-white",children:e==="aiVsAI"?" IA vs IA (Debug)":e==="vsAI"?" vs IA":" 1v1 Local"}),l.jsx("button",{onClick:s,className:"bg-red-600 hover:bg-red-700 text-white px-3 py-1.5 rounded-lg transition-colors text-sm font-bold",children:" Voltar"})]}),l.jsxs("div",{className:"flex gap-2 sm:gap-4 items-start justify-center flex-wrap",children:[l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("div",{className:"bg-blue-600 text-white px-4 py-1 rounded-t-lg font-bold text-sm sm:text-base",children:e==="aiVsAI"?` IA1 (${(n==null?void 0:n.toUpperCase())||"EXPERT"})`:e==="vsAI"?" VOC":" P1"}),l.jsx("div",{className:"bg-black/40 p-2 rounded-b-lg",children:l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx(Qn,{heldPiece:i.heldPiece,canHold:i.canHold}),e!=="aiVsAI"&&l.jsxs("div",{className:"text-white/60 text-[10px] leading-tight",children:[" mover",l.jsx("br",{})," rotacionar",l.jsx("br",{}),"C segurar",l.jsx("br",{}),"Espao dropar"]})]}),l.jsx(kn,{board:i.board,currentPiece:i.currentPiece,dropPreview:P,gameOver:i.gameOver}),d>0&&l.jsx(Th,{count:d}),l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx(Kn,{pieces:i.nextPieces||[]}),l.jsx(qn,{score:((F=i.score)==null?void 0:F.points)||0,level:((re=i.score)==null?void 0:re.level)||1,lines:(($=i.score)==null?void 0:$.lines)||0,combo:((ie=i.score)==null?void 0:ie.combo)||0})]})]})})]}),l.jsx("div",{className:"flex items-center justify-center self-center",children:l.jsx("div",{className:"bg-yellow-500 text-black font-bold text-2xl sm:text-3xl px-4 py-2 rounded-full shadow-2xl animate-pulse",children:"VS"})}),l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("div",{className:"bg-red-600 text-white px-4 py-1 rounded-t-lg font-bold text-sm sm:text-base",children:e==="aiVsAI"?` IA2 (${(r==null?void 0:r.toUpperCase())||"EXPERT"})`:e==="vsAI"?` IA (${(t==null?void 0:t.toUpperCase())||"MEDIUM"})`:" P2"}),l.jsx("div",{className:"bg-black/40 p-2 rounded-b-lg",children:l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx(Qn,{heldPiece:a.heldPiece,canHold:a.canHold}),e==="1v1"&&l.jsxs("div",{className:"text-white/60 text-[10px] leading-tight",children:["Setas mover",l.jsx("br",{})," rotacionar",l.jsx("br",{}),"Ctrl segurar",l.jsx("br",{}),"Enter dropar"]})]}),l.jsx(kn,{board:a.board,currentPiece:a.currentPiece,dropPreview:N,gameOver:a.gameOver}),v>0&&l.jsx(Th,{count:v}),l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx(Kn,{pieces:a.nextPieces||[]}),l.jsx(qn,{score:((z=a.score)==null?void 0:z.points)||0,level:((se=a.score)==null?void 0:se.level)||1,lines:((et=a.score)==null?void 0:et.lines)||0,combo:((Pe=a.score)==null?void 0:Pe.combo)||0})]})]})})]})]}),l.jsx(we,{children:u&&l.jsx(_.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/90 flex items-center justify-center z-50",children:l.jsxs(_.div,{initial:{scale:.8,y:50},animate:{scale:1,y:0},className:"bg-gradient-to-br from-yellow-500 to-orange-600 rounded-2xl p-12 text-center",children:[l.jsx("div",{className:"text-8xl mb-4",children:u==="player1"||e==="aiVsAI"?"":""}),l.jsx("h2",{className:"text-5xl font-bold text-white mb-4",children:e==="aiVsAI"?u==="player1"?"IA 1 VENCEU!":"IA 2 VENCEU!":u==="player1"?"VITRIA!":"DERROTA!"}),l.jsx("p",{className:"text-2xl text-white/80 mb-8",children:e==="aiVsAI"?`${u==="player1"?n==null?void 0:n.toUpperCase():r==null?void 0:r.toUpperCase()}  superior!`:u==="player1"?e==="vsAI"?"Voc venceu a IA!":"Player 1 venceu!":e==="vsAI"?"IA venceu!":"Player 2 venceu!"}),l.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-8 text-white",children:[l.jsxs("div",{className:"bg-black/30 rounded-lg p-4",children:[l.jsx("div",{className:"text-sm opacity-60",children:e==="aiVsAI"?`IA1 (${n})`:"Player 1"}),l.jsx("div",{className:"text-3xl font-bold",children:(((Ae=i.score)==null?void 0:Ae.points)||0).toLocaleString()})]}),l.jsxs("div",{className:"bg-black/30 rounded-lg p-4",children:[l.jsx("div",{className:"text-sm opacity-60",children:e==="aiVsAI"?`IA2 (${r})`:e==="vsAI"?"IA":"Player 2"}),l.jsx("div",{className:"text-3xl font-bold",children:(((ze=a.score)==null?void 0:ze.points)||0).toLocaleString()})]})]}),l.jsxs("div",{className:"flex gap-4",children:[l.jsx("button",{onClick:()=>window.location.reload(),className:"bg-green-600 hover:bg-green-700 text-white px-8 py-3 rounded-lg font-bold text-xl transition-colors",children:" Jogar Novamente"}),l.jsx("button",{onClick:s,className:"bg-gray-700 hover:bg-gray-800 text-white px-8 py-3 rounded-lg font-bold text-xl transition-colors",children:" Menu"})]})]})})})]})}function Th({count:e}){const n=Math.min(e,20);return l.jsx("div",{className:"flex flex-col-reverse justify-end w-3 rounded overflow-hidden",style:{height:"calc(var(--cell) * 22 + 22px)"},children:Array.from({length:n},(r,s)=>l.jsx("div",{className:"w-full",style:{height:`${100/20}%`,backgroundColor:e>8?"#ef4444":e>4?"#f59e0b":"#ef4444",opacity:.7+s/n*.3}},s))})}class kS{constructor(){this._actionQueue=[],this._lastPieceType=null,this._holdCooldown=0,this._comboCount=0,this.thinkingTime=0,this.lastDecision=0}setDifficulty(){}decideNextMove(t){var d;const n=Date.now();if(n-this.lastDecision<this.thinkingTime)return null;this.lastDecision=n;const{currentPiece:r,board:s,heldPiece:i,canHold:o}=t;if(!r||!s)return null;const a=r.type;if(a!==this._lastPieceType&&(this._lastPieceType=a,this._actionQueue=[],this._holdCooldown>0&&this._holdCooldown--),this._actionQueue.length>0)return this._actionQueue.shift();const c=s.length,u=((d=s[0])==null?void 0:d.length)||10,h=this._findBestMove(r,s,c,u);if(o&&this._holdCooldown<=0&&i){const m=this._findBestMove(i,s,c,u);if(m&&(!h||m.score>h.score+500))return this._holdCooldown=1,{action:"hold"}}return!h&&o&&this._holdCooldown<=0?(this._holdCooldown=1,{action:"hold"}):(h?this._actionQueue=this._buildActionSequence(r,h.rotations,h.targetX):this._actionQueue=[{action:"drop"}],this._actionQueue.shift()||{action:"drop"})}_findBestMove(t,n,r,s){let i=-1/0,o=null;for(let a=0;a<4;a++){const c=this._rotateShape(t.shape,a),u=c[0].length;for(let h=-1;h<=s-u+1;h++){const d=this._findLandingRow(c,n,h,r,s);if(d==null||d<0)continue;const m=this._placeOnBoard(c,n,h,d);if(!m)continue;const v=this._evaluate(m,n,d);v>i&&(i=v,o={rotations:a,targetX:h,score:v})}}return o}_evaluate(t,n,r){const s=t.length,i=t[0].length;let o=0;const a=this._countCompleteLines(t);a===1&&(o+=1e4),a===2&&(o+=25e3),a===3&&(o+=5e4),a>=4&&(o+=1e5);const c=this._removeCompleteLines(t);let u=0,h=0;for(let f=0;f<i;f++){let g=!1,y=0;for(let k=0;k<s;k++)c[k][f]!=null?(g=!0,y++):g&&(u++,h+=y)}o-=u*1e4,o-=h*1e3;const d=[];for(let f=0;f<i;f++){let g=0;for(let y=0;y<s;y++)if(c[y][f]!=null){g=s-y;break}d.push(g)}const m=Math.max(...d),v=d.reduce((f,g)=>f+g,0);o-=v*50,o-=m*100,m>12&&(o-=(m-12)*(m-12)*500),m>16&&(o-=1e5);let w=0;for(let f=0;f<i-1;f++)f===i-2?w+=Math.abs(d[f]-d[f+1])*.3:w+=Math.abs(d[f]-d[f+1]);o-=w*200;let b=0;for(let f=0;f<s;f++)if(c[f].filter(y=>y!=null).length!==0){for(let y=0;y<i-1;y++){const k=c[f][y]!=null,j=c[f][y+1]!=null;k!==j&&b++}c[f][0]==null&&b++,c[f][i-1]==null&&b++}o-=b*100;let S=0;for(let f=0;f<i;f++){for(let g=0;g<s-1;g++){const y=c[g][f]!=null,k=c[g+1][f]!=null;y!==k&&S++}c[s-1][f]==null&&S++}o-=S*80;const p=i-1;if(d[p]<d[p-1]){const f=d[p-1]-d[p];f>=1&&f<=4&&m<=12&&(o+=f*300)}for(let f=0;f<s;f++){const g=c[f].filter(y=>y!=null).length;g===9&&(o+=500),g===8&&(o+=200)}return o-=r>0?0:(s-r)*30,m>14&&(o+=a*5e4),o}_buildActionSequence(t,n,r){var u;const s=[],i=n%4;for(let h=0;h<i;h++)s.push({action:"rotate"});const o=((u=t.position)==null?void 0:u.x)??3,a=r-o,c=a>0?"right":"left";for(let h=0;h<Math.abs(a);h++)s.push({action:c});return s.push({action:"drop"}),s}_rotateShape(t,n){let r=t;for(let s=0;s<n%4;s++)r=r[0].map((i,o)=>r.map(a=>a[o]).reverse());return r}_findLandingRow(t,n,r,s,i){const o=t.length;for(let a=-o;a<s;a++)if(this._collides(t,n,r,a+1,s,i))return a;return s-o}_collides(t,n,r,s,i,o){for(let a=0;a<t.length;a++)for(let c=0;c<t[0].length;c++){if(!t[a][c])continue;const u=r+c,h=s+a;if(u<0||u>=o||h>=i||h>=0&&n[h][u]!=null)return!0}return!1}_placeOnBoard(t,n,r,s){const i=n.length,o=n[0].length,a=n.map(c=>[...c]);for(let c=0;c<t.length;c++)for(let u=0;u<t[0].length;u++){if(!t[c][u])continue;const h=r+u,d=s+c;if(h<0||h>=o||d<0||d>=i||a[d][h]!=null)return null;a[d][h]=1}return a}_removeCompleteLines(t){const n=t[0].length,r=t.filter(s=>!s.every(i=>i!=null));for(;r.length<t.length;)r.unshift(new Array(n).fill(null));return r}_countCompleteLines(t){return t.filter(n=>n.every(r=>r!=null)).length}_countHoles(t){let n=0;const r=t[0].length;for(let s=0;s<r;s++){let i=!1;for(let o=0;o<t.length;o++)t[o][s]!=null?i=!0:i&&n++}return n}_getMaxHeight(t){var s;const n=t.length,r=((s=t[0])==null?void 0:s.length)||10;for(let i=0;i<n;i++)for(let o=0;o<r;o++)if(t[i][o]!=null)return n-i;return 0}}const jS=50;function CS(e){const[t,n]=x.useState(null),[r,s]=x.useState({lines:0,combos:0,tetrises:0,maxCombo:0}),[i,o]=x.useState(!1),[a,c]=x.useState(!1),u=x.useRef(null),h=x.useRef(null),d=x.useRef(null),m=x.useRef(0),v=x.useRef(0),w=x.useRef({lines:0,combos:0,tetrises:0,maxCombo:0,currentCombo:0}),b=x.useCallback(()=>{const p=new Xn(new Yn,new Jn,null,new jn);p.initializeGame(),p.isPlaying=!0;const f=new kS;u.current=p,h.current=f,v.current=0,m.current=0,w.current.currentCombo=0,n(p.getGameState()),c(!0)},[]);x.useEffect(()=>{if(!e){d.current&&cancelAnimationFrame(d.current),u.current=null,h.current=null,c(!1),n(null),s({lines:0,combos:0,tetrises:0,maxCombo:0}),w.current={lines:0,combos:0,tetrises:0,maxCombo:0,currentCombo:0};return}b();const p=({linesCleared:g})=>{const y=w.current;y.lines+=g,y.currentCombo++,y.currentCombo>1&&(y.combos++,y.currentCombo>y.maxCombo&&(y.maxCombo=y.currentCombo),o(!0),setTimeout(()=>o(!1),600)),g>=4&&y.tetrises++,s({lines:y.lines,combos:y.combos,tetrises:y.tetrises,maxCombo:y.maxCombo})},f=({linesCleared:g})=>{g===0&&(w.current.currentCombo=0)};return R.on(O.LINE_CLEARED,p),R.on(O.PIECE_PLACED,f),()=>{d.current&&cancelAnimationFrame(d.current),R.off(O.LINE_CLEARED,p),R.off(O.PIECE_PLACED,f),u.current=null,h.current=null}},[e,b]),x.useEffect(()=>{if(!a||!u.current||!e)return;const p=f=>{m.current||(m.current=f);let g=f-m.current;m.current=f,g>200&&(g=16);const y=u.current,k=h.current;if(!(!y||!k)){if(y.gameOver){b(),d.current=requestAnimationFrame(p);return}if(y.isPlaying&&!y.isPaused&&y.updateGame(g),v.current+=g,v.current>=jS){v.current=0;try{const j=y.getGameState(),C=k.decideNextMove(j);if(C)switch(C.action){case"left":y.movePiece("left");break;case"right":y.movePiece("right");break;case"rotate":y.rotatePiece();break;case"rotateLeft":y.rotatePieceLeft();break;case"down":y.movePiece("down");break;case"drop":y.hardDrop();break;case"hold":y.holdPiece();break}n(y.getGameState())}catch{}}d.current=requestAnimationFrame(p)}};return d.current=requestAnimationFrame(p),()=>{d.current&&cancelAnimationFrame(d.current)}},[a,e,b]);const S=x.useCallback(()=>{var p;try{return((p=u.current)==null?void 0:p.getDropPreview())||null}catch{return null}},[]);return{gameState:t,stats:r,comboFlash:i,isRunning:a,getDropPreview:S}}function PS({onClose:e}){const{gameState:t,stats:n,comboFlash:r,getDropPreview:s}=CS(!0),i=x.useMemo(()=>s(),[t,s]);if(!t)return l.jsx("div",{className:"h-screen bg-gradient-to-b from-slate-950 via-violet-950 to-slate-950 flex items-center justify-center overflow-hidden",children:l.jsx("p",{className:"text-white/50 animate-pulse",children:"Preparando IA Expert..."})});const o=t.score;return l.jsxs("div",{className:"h-screen bg-gradient-to-b from-slate-950 via-violet-950 to-slate-950 flex flex-col overflow-hidden select-none",children:[l.jsx("div",{className:"absolute inset-0 pointer-events-none overflow-hidden",children:l.jsx("div",{className:"absolute top-1/3 left-1/2 -translate-x-1/2 w-[500px] h-[500px] bg-cyan-600/10 rounded-full blur-[120px]"})}),l.jsxs("div",{className:"flex items-center justify-between px-3 py-1.5 bg-black/30 backdrop-blur-sm border-b border-white/10 shrink-0 relative z-10",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(_.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:e,className:"bg-white/15 hover:bg-white/25 text-white p-1.5 rounded-lg transition-colors",children:l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"})})}),l.jsx("span",{className:"text-sm font-bold text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-400",children:" Cat Tetris AI"})]}),l.jsxs("div",{className:`flex items-center gap-3 text-xs px-3 py-1 rounded-full transition-colors duration-300 ${r?"bg-cyan-500/30 text-cyan-300":"text-white/60"}`,children:[l.jsxs("span",{className:"font-bold",children:[n.lines," linhas"]}),l.jsxs("span",{children:["T:",n.tetrises]}),l.jsxs("span",{children:["C:",n.combos]}),l.jsxs("span",{children:["Max:",n.maxCombo]})]}),l.jsxs("div",{className:"text-xs text-white/50",children:[l.jsx("span",{className:"text-yellow-400 font-bold",children:((o==null?void 0:o.points)||0).toLocaleString()}),l.jsxs("span",{className:"ml-2",children:["Nv.",(o==null?void 0:o.level)||1]})]})]}),l.jsx(we,{children:r&&l.jsx(_.div,{initial:{opacity:0,scale:.7,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:1.2,y:-20},transition:{duration:.4,ease:"easeOut"},className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-50 pointer-events-none",children:l.jsx("div",{className:"text-5xl font-black text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 via-blue-400 to-yellow-300 drop-shadow-[0_0_30px_rgba(34,211,238,0.7)]",children:"COMBO!"})})}),l.jsx("div",{className:"flex-1 flex items-center justify-center overflow-hidden p-2 relative z-10",children:l.jsxs("div",{className:"flex gap-2 justify-center items-start",children:[l.jsx(Qn,{heldPiece:t.heldPiece,canHold:t.canHold}),l.jsx(kn,{board:t.board,currentPiece:t.currentPiece,dropPreview:i,gameOver:t.gameOver}),l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx(Kn,{pieces:t.nextPieces||[]}),l.jsx(qn,{score:(o==null?void 0:o.points)||0,level:(o==null?void 0:o.level)||1,lines:(o==null?void 0:o.lines)||0,combo:(o==null?void 0:o.combo)||0})]})]})})]})}const Vr=10,Vs=20,Eh=["I","O","T","S","Z","J","L"],ln={I:"#00f5ff",O:"#ffff00",T:"#a000f0",S:"#00f000",Z:"#f00000",J:"#0000f0",L:"#ff7f00",G:"#888888"},b0=[{id:"tss",name:"T-Spin Single",emoji:"",desc:"O T-Spin mais simples  limpa 1 linha",board:ir(18,["GGG..GGGGG","GGG...GGGG"]),queue:["T"],isDefault:!0},{id:"tsd-right",name:"T-Spin Double (Direita)",emoji:"",desc:"O clssico TSD  limpa 2 linhas",board:ir(17,["GGG..GGGGG","GGG...GGGG","GGGG.GGGGG"]),queue:["T"],isDefault:!0},{id:"tsd-left",name:"T-Spin Double (Esquerda)",emoji:"",desc:"TSD espelhado  limpa 2 linhas",board:ir(17,["GGGGG..GGG","GGGG...GGG","GGGGG.GGGG"]),queue:["T"],isDefault:!0},{id:"tsd-chain",name:"TSD em Cadeia",emoji:"",desc:"Dois T-Spin Doubles seguidos  Back-to-Back!",board:ir(12,["G....GGGGG","G...GGGGGG","GGG..GGGGG","GGG...GGGG","GGGG.GGGGG","GGG..GGGGG","GGG...GGGG","GGGG.GGGGG"]),queue:["T","T"],isDefault:!0},{id:"dt-cannon",name:"DT Cannon",emoji:"",desc:"TSD + TST combinados!",board:ir(13,["G...GGGGGG","G....GGGGG","GGGG.GGGGG","GGG..GGGGG","GGG...GGGG","GGGG.GGGGG","GGGG.GGGGG"]),queue:["T","T"],isDefault:!0},{id:"stsd",name:"Super T-Spin Double",emoji:"",desc:"STSD  usa wall kick avanado pra entrar na cavidade!",board:ir(13,["GGG..GGGGG","GGG..GGGGG","GGG..GGGGG","GGG...GGGG","GGGGG.GGGG","GGGG..GGGG","GGGG..GGGG"]),queue:["T","T"],isDefault:!0}];function ir(e,t){const n=[];for(let r=0;r<Vs;r++)r>=e&&r<e+t.length?n.push(t[r-e]):n.push("..........");return n}function TS(e){return e.map(t=>Array.from(t).map(n=>n==="."||n===" "?null:{type:"G",color:ln[n]||"#888",emoji:""}))}function Gl(){return Array(Vs).fill(null).map(()=>Array(Vr).fill(null))}function S0(e){return e.map(t=>t.map(n=>n?{...n}:null))}const Vl="cattetris_all_setups";function k0(e){return e.map(t=>t.map(n=>n?n.type||"G":".").join(""))}function ES(e){return e.map(t=>Array.from(t).map(n=>n==="."?null:{type:n,color:ln[n]||"#888",emoji:""}))}function j0(e){return{id:e.id,name:e.name,emoji:e.emoji||"",desc:e.desc||"",board:Array.isArray(e.board)&&typeof e.board[0]=="string"?e.board:k0(e.board||[]),queue:e.queue||[],steps:e.steps||[],isDefault:e.isDefault||!1}}function NS(){try{const t=localStorage.getItem(Vl);if(t){const n=JSON.parse(t);if(Array.isArray(n)&&n.length>0)return n}}catch{}const e=b0.map(j0);return localStorage.setItem(Vl,JSON.stringify(e)),e}function _S(e){localStorage.setItem(Vl,JSON.stringify(e))}function Nh(e){const t=JSON.stringify(e,null,2),n=new Blob([t],{type:"application/json"}),r=URL.createObjectURL(n),s=document.createElement("a");s.href=r,s.download="cat-tetris-setups.json",s.click(),URL.revokeObjectURL(r)}function AS(e){return new Promise((t,n)=>{const r=new FileReader;r.onload=s=>{try{const i=JSON.parse(s.target.result);if(!Array.isArray(i))throw new Error("not array");const o=i.filter(a=>a.name&&a.board&&Array.isArray(a.board)&&Array.isArray(a.queue));t(o.map(a=>({...a,id:a.id||"imp_"+Date.now()+"_"+Math.random().toString(36).slice(2,6)})))}catch(i){n(i)}},r.onerror=n,r.readAsText(e)})}function MS(e,t){const n=new Xn(new Yn,new Jn,null,new jn);n.initializeGame(),n.isPlaying=!0;for(let r=0;r<Vs;r++)for(let s=0;s<Vr;s++)e[r][s]&&n.board.setCell(s,r,e[r][s]);if(t.length>0){const r=s=>{const i=Ft[s],o=s==="I"?{x:3,y:-2}:{x:3,y:0};return new Et(s,i.shape,i.color,i.emoji,o,!1,0)};for(n.currentPiece=r(t[0]),n.nextPieces=t.slice(1).map(r);n.nextPieces.length<3;)n.nextPieces.push(n.pieceFactory.createRandomPiece())}return n._markDirty(),n}function DS({onExit:e}){const[t,n]=x.useState("menu"),[r,s]=x.useState(null),[i,o]=x.useState(()=>NS()),[a,c]=x.useState(null),[u,h]=x.useState(null),[d,m]=x.useState(Gl),[v,w]=x.useState([]),[b,S]=x.useState(""),[p,f]=x.useState(""),[g,y]=x.useState(""),[k,j]=x.useState("G"),C=x.useRef(null),P=x.useCallback(M=>{o(M),_S(M)},[]),N=x.useCallback(M=>{s(M),n("play")},[]),E=x.useCallback(()=>{s({id:"custom_preview",name:b||"Setup Personalizado",emoji:p,board:null,queue:[...v],_rawBoard:S0(d)}),n("play")},[d,v,b,p]),V=x.useCallback(()=>{c(null),m(Gl()),w([]),S(""),f(""),y(""),n("editor")},[]),K=x.useCallback(M=>{c(M),m(ES(M.board)),w([...M.queue]),S(M.name),f(M.emoji||""),y(M.desc||""),n("editor")},[]),q=x.useCallback(()=>{const M=b.trim()||"Meu Setup",A=k0(d);if(a){const L=i.map(F=>F.id===a.id?{...F,name:M,emoji:p,desc:g,board:A,queue:[...v]}:F);P(L)}else{const L={id:"custom_"+Date.now(),name:M,emoji:p,desc:g,board:A,queue:[...v],steps:[],isDefault:!1};P([...i,L])}n("menu")},[d,v,b,p,g,a,i,P]),X=x.useCallback(M=>{P(i.filter(A=>A.id!==M))},[i,P]),le=x.useCallback(()=>{const M=b0.map(j0),A=i.filter(L=>!L.isDefault);P([...M,...A])},[i,P]),I=x.useCallback(async M=>{var L;const A=(L=M.target.files)==null?void 0:L[0];if(A){try{const F=await AS(A);if(F.length===0){h("Nenhum setup vlido no arquivo.");return}P([...i,...F]),h(`${F.length} setup(s) importado(s)!`),setTimeout(()=>h(null),3e3)}catch{h("Erro ao ler o arquivo JSON."),setTimeout(()=>h(null),3e3)}M.target.value=""}},[i,P]),W=x.useCallback(()=>{i.length!==0&&Nh(i)},[i]),T=x.useCallback((M,A)=>{const L=i.findIndex($=>$.id===M);if(L<0)return;const F=L+A;if(F<0||F>=i.length)return;const re=[...i];[re[L],re[F]]=[re[F],re[L]],P(re)},[i,P]);return t==="play"&&r?l.jsx(IS,{template:r,onBack:()=>n("menu"),onExit:e}):t==="editor"?l.jsx(OS,{board:d,setBoard:m,queue:v,setQueue:w,name:b,setName:S,emoji:p,setEmoji:f,desc:g,setDesc:y,selectedColor:k,setSelectedColor:j,onPlay:E,onSave:q,isEditing:!!a,onBack:()=>n("menu"),onExit:e}):l.jsxs("div",{className:"h-screen bg-gradient-to-b from-slate-900 via-indigo-950 to-slate-900 flex flex-col items-center p-4 overflow-auto",children:[l.jsxs("div",{className:"flex justify-between items-center w-full max-w-lg mb-4",children:[l.jsx("h1",{className:"text-2xl font-bold text-white",children:" Modo Criador"}),l.jsx("button",{onClick:e,className:"bg-red-600 hover:bg-red-700 text-white px-3 py-1.5 rounded-lg text-sm font-bold",children:" Voltar"})]}),l.jsx("p",{className:"text-white/50 text-sm mb-4 text-center max-w-md",children:"Crie, edite e organize seus setups de treino!"}),l.jsxs("div",{className:"flex gap-2 w-full max-w-lg mb-4 flex-wrap justify-center",children:[l.jsxs(_.button,{whileHover:{scale:1.03},whileTap:{scale:.97},onClick:V,className:"flex-1 min-w-[140px] p-3 rounded-xl bg-gradient-to-r from-violet-600/30 to-fuchsia-600/30 hover:from-violet-600/40 hover:to-fuchsia-600/40 border border-violet-500/30 hover:border-violet-500/50 transition-all flex items-center gap-3",children:[l.jsx("span",{className:"text-2xl",children:""}),l.jsxs("div",{className:"text-left",children:[l.jsx("div",{className:"text-white font-bold text-sm",children:"Criar Novo"}),l.jsx("div",{className:"text-white/40 text-[10px]",children:"Monte do zero"})]})]}),l.jsx("button",{onClick:()=>{var M;return(M=C.current)==null?void 0:M.click()},className:"bg-green-600/40 hover:bg-green-600/60 text-white px-4 py-3 rounded-xl text-xs font-bold transition-colors border border-green-500/20",children:" Importar"}),l.jsx("button",{onClick:W,className:"bg-blue-600/40 hover:bg-blue-600/60 text-white px-4 py-3 rounded-xl text-xs font-bold transition-colors border border-blue-500/20",disabled:i.length===0,children:" Exportar"}),l.jsx("button",{onClick:le,className:"bg-orange-600/40 hover:bg-orange-600/60 text-white px-4 py-3 rounded-xl text-xs font-bold transition-colors border border-orange-500/20",children:" Resetar Padro"})]}),l.jsx("input",{ref:C,type:"file",accept:".json",onChange:I,className:"hidden"}),u&&l.jsx("div",{className:"w-full max-w-lg mb-3 px-4 py-2 rounded-lg bg-blue-500/20 border border-blue-500/30 text-blue-200 text-xs text-center font-medium",children:u}),l.jsxs("div",{className:"text-white/40 text-xs font-semibold uppercase tracking-wide mb-2",children:["Todos os Setups (",i.length,")"]}),l.jsxs("div",{className:"grid grid-cols-1 gap-2 w-full max-w-lg pb-8",children:[i.map((M,A)=>l.jsx(LS,{setup:M,onPlay:()=>N(M),onEdit:()=>K(M),onDelete:()=>X(M.id),onExport:()=>Nh([M]),onMoveUp:A>0?()=>T(M.id,-1):null,onMoveDown:A<i.length-1?()=>T(M.id,1):null},M.id)),i.length===0&&l.jsx("div",{className:"text-center py-8 text-white/30 text-sm",children:'Nenhum setup. Clique em "Criar Novo" ou "Resetar Padro".'})]})]})}function LS({setup:e,onPlay:t,onEdit:n,onDelete:r,onExport:s,onMoveUp:i,onMoveDown:o}){const[a,c]=x.useState(!1),u=e.isDefault;return l.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl border transition-all ${u?"bg-white/[0.04] border-white/[0.06] hover:bg-white/[0.07]":"bg-violet-500/[0.06] border-violet-500/[0.12] hover:bg-violet-500/[0.1]"}`,children:[l.jsx("div",{className:"flex flex-col items-center min-w-[44px]",children:l.jsx(RS,{boardRows:e.board})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-center gap-1.5",children:[l.jsx("span",{className:"text-lg",children:e.emoji||""}),l.jsx("span",{className:"text-white font-bold text-sm truncate",children:e.name}),u&&l.jsx("span",{className:"text-[9px] px-1.5 py-0.5 rounded bg-blue-500/20 text-blue-300 border border-blue-500/20 shrink-0",children:"padro"})]}),e.desc&&l.jsx("p",{className:"text-white/40 text-[11px] mt-0.5 leading-tight truncate",children:e.desc}),l.jsxs("div",{className:"flex items-center gap-1.5 mt-1",children:[l.jsx("span",{className:"text-white/30 text-[10px]",children:"Peas:"}),(e.queue||[]).map((h,d)=>l.jsx("span",{className:"inline-block w-3.5 h-3.5 rounded",style:{backgroundColor:ln[h]},title:h},d)),(!e.queue||e.queue.length===0)&&l.jsx("span",{className:"text-white/20 text-[10px]",children:"aleatria"})]})]}),l.jsxs("div",{className:"flex flex-col gap-1 shrink-0",children:[l.jsxs("div",{className:"flex gap-1",children:[l.jsx("button",{onClick:t,className:"bg-emerald-600 hover:bg-emerald-500 text-white px-2.5 py-1 rounded text-[10px] font-bold transition-colors",title:"Jogar",children:""}),l.jsx("button",{onClick:n,className:"bg-blue-600 hover:bg-blue-500 text-white px-2.5 py-1 rounded text-[10px] font-bold transition-colors",title:"Editar",children:""}),l.jsx("button",{onClick:s,className:"bg-slate-600 hover:bg-slate-500 text-white px-2.5 py-1 rounded text-[10px] font-bold transition-colors",title:"Exportar",children:""})]}),l.jsxs("div",{className:"flex gap-1",children:[i&&l.jsx("button",{onClick:i,className:"bg-white/10 hover:bg-white/20 text-white px-2 py-1 rounded text-[10px] font-bold flex-1",title:"Mover pra cima",children:""}),o&&l.jsx("button",{onClick:o,className:"bg-white/10 hover:bg-white/20 text-white px-2 py-1 rounded text-[10px] font-bold flex-1",title:"Mover pra baixo",children:""})]}),a?l.jsxs("div",{className:"flex gap-1",children:[l.jsx("button",{onClick:()=>{r(),c(!1)},className:"bg-red-600 hover:bg-red-500 text-white px-2 py-1 rounded text-[9px] font-bold flex-1",children:"Sim"}),l.jsx("button",{onClick:()=>c(!1),className:"bg-slate-600 hover:bg-slate-500 text-white px-2 py-1 rounded text-[9px] font-bold flex-1",children:"No"})]}):l.jsx("button",{onClick:()=>c(!0),className:"bg-red-700/40 hover:bg-red-700/70 text-red-300 px-2.5 py-1 rounded text-[10px] font-bold transition-colors w-full",children:" Excluir"})]})]})}function RS({boardRows:e}){const n=e.findIndex(s=>s!==".........."),r=e.slice(Math.max(n>=0?n:Vs-4,Vs-6));return l.jsx("div",{className:"bg-black/40 rounded border border-white/10 p-0.5",children:r.map((s,i)=>l.jsx("div",{className:"flex",children:Array.from(s).map((o,a)=>l.jsx("div",{style:{width:3,height:3,backgroundColor:o!=="."?"#888":"transparent"}},a))},i))})}function IS({template:e,onBack:t,onExit:n}){var v,w,b,S,p,f,g,y,k,j;const[r,s]=x.useState(null),[i,o]=x.useState(0),a=x.useRef(null),c=x.useRef(null),u=x.useRef(0),h=x.useMemo(()=>e._rawBoard?S0(e._rawBoard):TS(e.board),[e]),d=x.useCallback(()=>{c.current&&cancelAnimationFrame(c.current);const C=MS(h,e.queue);a.current=C,s(C.getGameState()),u.current=0,o(P=>P+1)},[h,e.queue]);x.useEffect(()=>{d()},[d]),x.useEffect(()=>{const C=P=>{u.current||(u.current=P);const N=P-u.current;u.current=P;const E=a.current;E&&(!E.gameOver&&!E.isPaused&&E.updateGame(N),E.isDirty&&(s(E.getGameState()),E.clearDirty()),c.current=requestAnimationFrame(C))};return c.current=requestAnimationFrame(C),()=>{c.current&&cancelAnimationFrame(c.current)}},[i]),x.useEffect(()=>{const C=P=>{const N=a.current;if(!(!N||N.gameOver))switch(P.key){case"ArrowLeft":P.preventDefault(),N.movePiece("left");break;case"ArrowRight":P.preventDefault(),N.movePiece("right");break;case"ArrowDown":P.preventDefault(),N.movePiece("down");break;case"ArrowUp":P.preventDefault(),N.rotatePiece();break;case"z":case"Z":N.rotatePieceLeft();break;case"c":case"C":case"Shift":N.holdPiece();break;case" ":P.preventDefault(),N.hardDrop();break;case"r":case"R":d();break}};return window.addEventListener("keydown",C),()=>window.removeEventListener("keydown",C)},[d]);const m=x.useMemo(()=>{var C;if(!(r!=null&&r.currentPiece)||r!=null&&r.gameOver)return null;try{return(C=a.current)==null?void 0:C.getDropPreview()}catch{return null}},[(w=(v=r==null?void 0:r.currentPiece)==null?void 0:v.position)==null?void 0:w.x,(S=(b=r==null?void 0:r.currentPiece)==null?void 0:b.position)==null?void 0:S.y,(p=r==null?void 0:r.currentPiece)==null?void 0:p.type,(f=r==null?void 0:r.currentPiece)==null?void 0:f.rotationState]);return l.jsxs("div",{className:"h-screen bg-gradient-to-b from-slate-900 via-indigo-950 to-slate-900 flex flex-col items-center p-2 overflow-hidden",children:[l.jsxs("div",{className:"flex justify-between items-center w-full max-w-xl mb-2",children:[l.jsxs("h1",{className:"text-lg font-bold text-white truncate",children:[e.emoji," ",e.name]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:d,className:"bg-yellow-600 hover:bg-yellow-700 text-white px-3 py-1 rounded-lg text-xs font-bold",children:" Replay"}),l.jsx("button",{onClick:t,className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded-lg text-xs font-bold",children:" Voltar"}),l.jsx("button",{onClick:n,className:"bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded-lg text-xs font-bold",children:"Sair"})]})]}),r&&l.jsxs("div",{className:"flex gap-3 items-start justify-center",children:[l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx(Qn,{heldPiece:r.heldPiece,canHold:r.canHold}),l.jsxs("div",{className:"text-white/50 text-[10px] leading-tight",children:[" mover",l.jsx("br",{})," girar",l.jsx("br",{}),"C hold",l.jsx("br",{}),"Espao drop",l.jsx("br",{}),"R replay"]})]}),l.jsx(kn,{board:r.board,currentPiece:r.currentPiece,dropPreview:m,gameOver:r.gameOver}),l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx(Kn,{pieces:r.nextPieces||[]}),l.jsx(qn,{score:((g=r.score)==null?void 0:g.points)||0,level:((y=r.score)==null?void 0:y.level)||1,lines:((k=r.score)==null?void 0:k.lines)||0,combo:((j=r.score)==null?void 0:j.combo)||0})]})]}),(r==null?void 0:r.gameOver)&&l.jsxs("div",{className:"mt-4 flex gap-3",children:[l.jsx("button",{onClick:d,className:"bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg font-bold text-lg",children:" Tentar Novamente"}),l.jsx("button",{onClick:t,className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-bold text-lg",children:" Voltar"})]})]})}function OS({board:e,setBoard:t,queue:n,setQueue:r,name:s,setName:i,emoji:o,setEmoji:a,desc:c,setDesc:u,selectedColor:h,setSelectedColor:d,onPlay:m,onSave:v,isEditing:w,onBack:b,onExit:S}){const p=x.useCallback((y,k)=>{t(j=>{const C=j.map(P=>[...P]);return C[k][y]=C[k][y]?null:{type:h,color:ln[h],emoji:""},C})},[h,t]),f=x.useCallback((y,k)=>{t(j=>{const C=j.map(P=>[...P]);for(let P=0;P<Vr;P++)C[y][P]=P===k?null:{type:"G",color:ln.G,emoji:""};return C})},[t]),g=x.useCallback(y=>{t(k=>{const j=k.map(C=>[...C]);for(let C=0;C<Vr;C++)j[y][C]=null;return j})},[t]);return l.jsxs("div",{className:"h-screen bg-gradient-to-b from-slate-900 via-indigo-950 to-slate-900 flex flex-col items-center p-3 overflow-auto",children:[l.jsxs("div",{className:"flex justify-between items-center w-full max-w-2xl mb-3",children:[l.jsx("h1",{className:"text-xl font-bold text-white",children:w?" Editar Setup":" Criar Meu Setup"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:b,className:"bg-slate-600 hover:bg-slate-700 text-white px-3 py-1 rounded-lg text-sm font-bold",children:" Voltar"}),l.jsx("button",{onClick:S,className:"bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded-lg text-sm font-bold",children:"Sair"})]})]}),l.jsxs("div",{className:"flex gap-4 items-start justify-center flex-wrap max-w-2xl",children:[l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx("div",{className:"text-white/60 text-xs font-semibold mb-1",children:"TABULEIRO (clique para editar)"}),l.jsx(FS,{board:e,onToggle:p,onFillRow:f,onClearRow:g}),l.jsxs("div",{className:"flex gap-1 items-center mt-1",children:[l.jsx("span",{className:"text-white/50 text-xs mr-1",children:"Cor:"}),Eh.map(y=>l.jsx("button",{onClick:()=>d(y),className:`w-6 h-6 rounded border-2 transition-all ${h===y?"border-white scale-110":"border-white/20"}`,style:{backgroundColor:ln[y]},title:y},y)),l.jsx("button",{onClick:()=>d("G"),className:`w-6 h-6 rounded border-2 transition-all ${h==="G"?"border-white scale-110":"border-white/20"}`,style:{backgroundColor:ln.G},title:"Cinza"})]}),l.jsx("button",{onClick:()=>t(Gl()),className:"bg-red-700/60 hover:bg-red-700 text-white px-3 py-1 rounded text-xs font-semibold mt-1 w-fit",children:"Limpar Tudo"})]}),l.jsxs("div",{className:"flex flex-col gap-3 min-w-[160px]",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-white/60 text-xs font-semibold mb-2",children:"FILA DE PEAS"}),l.jsx("div",{className:"flex flex-wrap gap-1 mb-2",children:Eh.map(y=>l.jsx("button",{onClick:()=>r(k=>[...k,y]),className:"flex items-center justify-center w-9 h-9 rounded-lg bg-white/10 hover:bg-white/20 border border-white/10 transition-all",title:`Adicionar ${y}`,children:l.jsx(_h,{type:y})},y))}),l.jsxs("div",{className:"flex flex-col gap-1 min-h-[60px] bg-black/30 rounded-lg p-2",children:[n.length===0?l.jsxs("span",{className:"text-white/30 text-xs text-center py-2",children:["Clique nas peas acima",l.jsx("br",{}),"(vazio = fila aleatria)"]}):l.jsx("div",{className:"flex flex-wrap gap-1",children:n.map((y,k)=>l.jsxs("button",{onClick:()=>r(j=>j.filter((C,P)=>P!==k)),className:"flex items-center justify-center w-8 h-8 rounded bg-white/10 hover:bg-red-500/30 border border-white/10 transition-all group relative",title:"Remover",children:[l.jsx(_h,{type:y,size:10}),l.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-[8px] rounded-full w-3 h-3 flex items-center justify-center opacity-0 group-hover:opacity-100",children:""})]},k))}),n.length>0&&l.jsx("button",{onClick:()=>r([]),className:"text-red-400 text-[10px] mt-1 hover:text-red-300",children:"Limpar fila"})]})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-white/60 text-xs font-semibold mb-2",children:"DETALHES"}),l.jsxs("div",{className:"flex gap-2 mb-2",children:[l.jsx("input",{type:"text",value:o,onChange:y=>a(y.target.value),placeholder:"",maxLength:4,className:"w-14 px-2 py-2 rounded-lg bg-black/30 border border-white/10 text-white text-center text-lg focus:border-violet-500/50 focus:outline-none",title:"Emoji"}),l.jsx("input",{type:"text",value:s,onChange:y=>i(y.target.value),placeholder:"Nome do setup",maxLength:40,className:"flex-1 px-3 py-2 rounded-lg bg-black/30 border border-white/10 text-white text-sm placeholder-white/20 focus:border-violet-500/50 focus:outline-none"})]}),l.jsx("input",{type:"text",value:c,onChange:y=>u(y.target.value),placeholder:"Descrio (opcional)",maxLength:80,className:"w-full px-3 py-2 rounded-lg bg-black/30 border border-white/10 text-white text-xs placeholder-white/20 focus:border-violet-500/50 focus:outline-none mb-3"})]}),l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx("button",{onClick:v,className:"w-full py-3 rounded-xl bg-gradient-to-r from-violet-500 to-purple-500 hover:from-violet-400 hover:to-purple-400 text-white font-bold text-base shadow-lg shadow-violet-500/25 transition-all active:scale-95",children:w?" Salvar Alteraes":" Salvar Setup"}),l.jsx("button",{onClick:m,className:"w-full py-2.5 rounded-xl bg-gradient-to-r from-emerald-500 to-green-500 hover:from-emerald-400 hover:to-green-400 text-white font-bold text-sm shadow-lg shadow-emerald-500/25 transition-all active:scale-95",children:" Testar (sem salvar)"})]})]})]})]})}function FS({board:e,onToggle:t,onFillRow:n,onClearRow:r}){const[s,i]=x.useState(!1),[o,a]=x.useState(null),c=22,u=(m,v)=>{i(!0),a(e[v][m]?"erase":"place"),t(m,v)},h=(m,v)=>{s&&(o==="place"&&!e[v][m]&&t(m,v),o==="erase"&&e[v][m]&&t(m,v))},d=()=>{i(!1),a(null)};return x.useEffect(()=>(window.addEventListener("pointerup",d),()=>window.removeEventListener("pointerup",d)),[]),l.jsx("div",{className:"relative bg-black/50 rounded-lg border border-white/10 select-none",style:{width:c*Vr+2,padding:1},onContextMenu:m=>m.preventDefault(),children:e.map((m,v)=>l.jsxs("div",{className:"flex",style:{height:c},children:[m.map((w,b)=>l.jsx("div",{onPointerDown:()=>u(b,v),onPointerEnter:()=>h(b,v),className:"cursor-pointer border border-white/[0.04] hover:border-white/20 transition-colors",style:{width:c,height:c,backgroundColor:w?w.color:"transparent",opacity:w?.85:1}},b)),l.jsx("button",{onClick:()=>m.some(w=>w)?r(v):n(v,Math.floor(Math.random()*Vr)),className:"ml-0.5 text-white/20 hover:text-white/60 text-[9px] w-4 flex items-center justify-center",title:m.some(w=>w)?"Limpar linha":"Preencher linha",children:m.some(w=>w)?"":"+"})]},v))})}function _h({type:e,size:t=12}){var u;const n=(u=Ft[e])==null?void 0:u.shape;if(!n)return null;const r=ln[e],s=n.filter(h=>h.some(d=>d));let i=1/0,o=-1;for(const h of s)for(let d=0;d<h.length;d++)h[d]&&(i=Math.min(i,d),o=Math.max(o,d));if(o<0)return null;const a=s.map(h=>h.slice(i,o+1)),c=o-i+1;return l.jsx("div",{className:"flex flex-col items-center",children:a.map((h,d)=>l.jsx("div",{className:"flex",children:Array.from({length:c},(m,v)=>l.jsx("div",{style:{width:t,height:t,backgroundColor:h[v]?r:"transparent",borderRadius:1}},v))},d))})}function C0(){const[e,t]=x.useState([]),[n,r]=x.useState(null),[s,i]=x.useState(!0);x.useEffect(()=>{try{const u=B.resolve("shopService");t(u.getAllThemes()),r(u.getEquippedTheme()),i(!1);const h=m=>{r(m.detail.theme),t(u.getAllThemes())},d=()=>{t(u.getAllThemes())};return window.addEventListener("themeEquipped",h),window.addEventListener("currencyUpdated",d),()=>{window.removeEventListener("themeEquipped",h),window.removeEventListener("currencyUpdated",d)}}catch{i(!1)}},[]);const o=x.useCallback(u=>{try{const h=B.resolve("shopService"),d=h.purchaseTheme(u);return d.success&&(t(h.getAllThemes()),window.dispatchEvent(new Event("currencyUpdated"))),d}catch(h){return{success:!1,error:h.message}}},[]),a=x.useCallback(u=>{try{const h=B.resolve("shopService"),d=h.equipTheme(u);return d.success&&(r(d.theme),t(h.getAllThemes())),d}catch(h){return{success:!1,error:h.message}}},[]),c=x.useCallback(()=>{try{return B.resolve("shopService").getStats()}catch{return null}},[]);return{themes:e,equippedTheme:n,loading:s,purchaseTheme:o,equipTheme:a,getStats:c}}function GS({onClose:e}){var v,w;const{themes:t,equippedTheme:n,loading:r,purchaseTheme:s,equipTheme:i,getStats:o}=C0(),{currency:a}=p0(),[c,u]=x.useState(null);rr({itemCount:0,onBack:e,active:!0});const h=o();if(r)return l.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",children:l.jsx("div",{className:"text-white text-lg",children:"Carregando loja..."})});if(!t||t.length===0)return l.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-red-900/90 text-white p-6 rounded-lg",children:[l.jsx("p",{className:"text-xl",children:" Erro ao carregar temas"}),l.jsx("button",{onClick:e,className:"mt-4 bg-white text-black px-4 py-2 rounded",children:"Fechar"})]})});const d=b=>{const S=s(b);S.success?Sr(` ${S.theme.name} comprado com sucesso!`,"success"):Sr(` ${S.error}`,"error")},m=b=>{const S=i(b);S.success?Sr(` ${S.theme.name} equipado!`,"success"):Sr(` ${S.error}`,"error")};return r?l.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",children:l.jsx("div",{className:"text-white text-xl",children:"Carregando loja..."})}):l.jsx(_.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:e,children:l.jsxs(_.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},className:"bg-gradient-to-br from-pink-900/95 to-purple-900/95 rounded-2xl p-6 max-w-6xl w-full max-h-[90vh] overflow-y-auto border-2 border-white/20 shadow-2xl",onClick:b=>b.stopPropagation(),children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-3xl font-bold text-white flex items-center gap-2",children:" Loja de Temas"}),l.jsx("p",{className:"text-white/60 text-sm mt-1",children:"Personalize suas peas de Tetris"})]}),l.jsx("button",{onClick:e,className:"text-white/60 hover:text-white text-2xl transition-colors",children:""})]}),l.jsx("div",{className:"bg-black/30 rounded-lg p-4 mb-6",children:l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-2xl font-bold text-yellow-400 flex items-center justify-center gap-1",children:[" ",((v=a==null?void 0:a.fish)==null?void 0:v.toLocaleString())||0]}),l.jsx("div",{className:"text-white/60 text-sm",children:"Seus Peixes"})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-2xl font-bold text-white",children:[h==null?void 0:h.ownedThemes,"/",h==null?void 0:h.totalThemes]}),l.jsx("div",{className:"text-white/60 text-sm",children:"Temas Desbloqueados"})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-2xl font-bold text-green-400",children:[Math.floor((h==null?void 0:h.ownedThemes)/(h==null?void 0:h.totalThemes)*100),"%"]}),l.jsx("div",{className:"text-white/60 text-sm",children:"Coleo"})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-2xl font-bold text-purple-400 flex items-center justify-center gap-1",children:[" ",((w=h==null?void 0:h.totalSpent)==null?void 0:w.toLocaleString())||0]}),l.jsx("div",{className:"text-white/60 text-sm",children:"Gasto Total"})]})]})}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map((b,S)=>{const p=!b.owned&&(a==null?void 0:a.fish)>=b.price;return l.jsxs(_.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:S*.05},className:`bg-black/40 rounded-lg p-4 border-2 relative ${b.equipped?"border-green-500 shadow-lg shadow-green-500/30":b.owned?"border-white/20":"border-white/10"}`,children:[b.equipped&&l.jsx("div",{className:"absolute top-2 right-2 bg-green-600 text-white text-xs px-2 py-1 rounded-full font-bold",children:" Equipado"}),b.premium&&l.jsx("div",{className:"absolute top-2 left-2 bg-gradient-to-r from-yellow-400 to-orange-500 text-white text-xs px-2 py-1 rounded-full font-bold",children:" Premium"}),l.jsxs("div",{className:"mb-4",children:[l.jsx("h3",{className:"text-white font-bold text-lg mb-1",children:b.name}),l.jsx("p",{className:"text-white/60 text-sm",children:b.description})]}),l.jsx("div",{className:"bg-black/30 rounded-lg p-3 mb-4",children:l.jsx("div",{className:"flex justify-center gap-2 flex-wrap",children:Object.entries(b.pieces).map(([f,g])=>l.jsx("div",{className:"w-12 h-12 rounded flex items-center justify-center text-2xl border border-white/10",style:{backgroundColor:g.color},children:g.emoji},f))})}),l.jsxs("div",{className:"flex gap-2",children:[b.owned?b.equipped?l.jsx("button",{disabled:!0,className:"flex-1 bg-green-600 text-white py-2 px-4 rounded-lg font-bold cursor-default",children:"Em Uso"}):l.jsx("button",{onClick:()=>m(b.id),className:"flex-1 bg-blue-600 hover:bg-blue-500 text-white py-2 px-4 rounded-lg font-bold transition-colors",children:"Equipar"}):l.jsx("button",{onClick:()=>d(b.id),disabled:!p,className:`flex-1 py-2 px-4 rounded-lg font-bold transition-colors ${p?"bg-yellow-600 hover:bg-yellow-500 text-white":"bg-gray-600 text-white/40 cursor-not-allowed"}`,children:b.default?"Gratuito":l.jsxs(l.Fragment,{children:[" ",b.price.toLocaleString()]})}),l.jsx("button",{onClick:()=>u(b),className:"bg-purple-600 hover:bg-purple-500 text-white py-2 px-4 rounded-lg font-bold transition-colors",children:""})]})]},b.id)})}),l.jsx(we,{children:c&&l.jsx(_.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/90 flex items-center justify-center z-[60]",onClick:()=>u(null),children:l.jsxs(_.div,{initial:{scale:.8},animate:{scale:1},exit:{scale:.8},className:"bg-gray-900 rounded-xl p-6 max-w-md",onClick:b=>b.stopPropagation(),children:[l.jsx("h3",{className:"text-white font-bold text-2xl mb-4",children:c.name}),l.jsx("div",{className:"grid grid-cols-4 gap-3 mb-4",children:Object.entries(c.pieces).map(([b,S])=>l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"w-16 h-16 rounded-lg flex items-center justify-center text-3xl mb-2 border-2 border-white/20",style:{backgroundColor:S.color},children:S.emoji}),l.jsx("div",{className:"text-white/60 text-xs",children:b})]},b))}),l.jsx("button",{onClick:()=>u(null),className:"w-full bg-purple-600 hover:bg-purple-500 text-white py-2 rounded-lg font-bold",children:"Fechar"})]})})})]})})}function P0(){const[e,t]=x.useState([]),[n,r]=x.useState(null),[s,i]=x.useState(null),[o,a]=x.useState(!0);x.useEffect(()=>{try{const d=B.resolve("gameModesService");t(d.getAllModes()),r(d.getCurrentMode()),i(d.getAllStats()),a(!1)}catch{a(!1)}},[]);const c=x.useCallback(d=>{try{const m=B.resolve("gameModesService"),v=m.setMode(d);return v&&(r(m.getCurrentMode()),window.dispatchEvent(new CustomEvent("gameModeChanged",{detail:{mode:m.getCurrentMode()}}))),v}catch{return!1}},[]),u=x.useCallback(d=>{try{return B.resolve("gameModesService").getModeStats(d)}catch{return null}},[]),h=x.useCallback((d,m)=>{try{const v=B.resolve("gameModesService");v.updateStats(d,m),i(v.getAllStats())}catch{}},[]);return{modes:e,currentMode:n,modeStats:s,loading:o,selectMode:c,getModeStats:u,updateStats:h}}function VS({onClose:e,onStartGame:t}){const{modes:n,currentMode:r,modeStats:s,loading:i,selectMode:o}=P0(),a=u=>{o(u),setTimeout(()=>{t(),e()},300)},c=u=>{const h=Math.floor(u/60),d=u%60;return`${h}:${d.toString().padStart(2,"0")}`};return i?l.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",children:l.jsx("div",{className:"text-white text-xl",children:"Carregando modos..."})}):!n||n.length===0?l.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-red-900/90 text-white p-6 rounded-lg",children:[l.jsx("p",{className:"text-xl",children:" Erro ao carregar modos"}),l.jsx("button",{onClick:e,className:"mt-4 bg-white text-black px-4 py-2 rounded",children:"Fechar"})]})}):l.jsx(_.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:e,children:l.jsxs(_.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},className:"bg-gradient-to-br from-blue-900/95 to-indigo-900/95 rounded-2xl p-6 max-w-4xl w-full max-h-[90vh] overflow-y-auto border-2 border-white/20 shadow-2xl",onClick:u=>u.stopPropagation(),children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-3xl font-bold text-white flex items-center gap-2",children:" Modos de Jogo"}),l.jsx("p",{className:"text-white/60 text-sm mt-1",children:"Escolha seu desafio"})]}),l.jsx("button",{onClick:e,className:"text-white/60 hover:text-white text-2xl transition-colors",children:""})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:n.map((u,h)=>{const d=s[u.id],m=(r==null?void 0:r.id)===u.id;return l.jsxs(_.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:h*.1},className:`bg-black/40 rounded-lg p-5 border-2 cursor-pointer transition-all hover:scale-105 ${m?"border-green-500 shadow-lg shadow-green-500/30":"border-white/10 hover:border-white/30"}`,onClick:()=>a(u.id),children:[m&&l.jsx("div",{className:"absolute top-3 right-3 bg-green-600 text-white text-xs px-2 py-1 rounded-full font-bold",children:" Selecionado"}),l.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[l.jsx("div",{className:"text-5xl",children:u.icon}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"text-white font-bold text-xl",children:u.name}),l.jsx("p",{className:"text-white/60 text-sm",children:u.description})]})]}),l.jsx("div",{className:"bg-black/30 rounded-lg p-3 mb-3",children:l.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[u.rules.lineGoal&&l.jsxs("div",{className:"text-white/80",children:[" Meta: ",u.rules.lineGoal," linhas"]}),u.rules.timeLimit&&l.jsxs("div",{className:"text-white/80",children:[" Tempo: ",c(u.rules.timeLimit)]}),u.rules.gameOver!==void 0&&l.jsx("div",{className:"text-white/80",children:u.rules.gameOver?" Game Over":" Sem Game Over"}),u.rules.speedIncrease!==void 0&&l.jsx("div",{className:"text-white/80",children:u.rules.speedIncrease?" Velocidade aumenta":" Velocidade fixa"}),u.rules.startLevel&&l.jsxs("div",{className:"text-white/80",children:[" Incio: Nvel ",u.rules.startLevel]}),u.rules.relaxed&&l.jsx("div",{className:"text-white/80",children:" Modo relaxado"})]})}),d&&d.gamesPlayed>0&&l.jsxs("div",{className:"bg-black/30 rounded-lg p-3",children:[l.jsx("div",{className:"text-white/60 text-xs mb-2",children:"Seus recordes:"}),l.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-yellow-400 font-bold",children:d.bestScore.toLocaleString()}),l.jsx("div",{className:"text-white/40 text-xs",children:"Melhor Pontuao"})]}),u.rules.lineGoal&&d.bestTime>0&&l.jsxs("div",{children:[l.jsx("div",{className:"text-green-400 font-bold",children:c(d.bestTime)}),l.jsx("div",{className:"text-white/40 text-xs",children:"Melhor Tempo"})]}),!u.rules.lineGoal&&l.jsxs("div",{children:[l.jsx("div",{className:"text-blue-400 font-bold",children:d.bestLines}),l.jsx("div",{className:"text-white/40 text-xs",children:"Mais Linhas"})]})]}),l.jsxs("div",{className:"text-white/40 text-xs mt-2",children:[d.gamesPlayed," partidas jogadas"]})]}),(!d||d.gamesPlayed===0)&&l.jsx("div",{className:"bg-black/30 rounded-lg p-3 text-center",children:l.jsx("div",{className:"text-white/40 text-sm",children:" Nenhum recorde ainda"})}),l.jsx(_.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"w-full mt-3 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-500 hover:to-emerald-500 text-white font-bold py-3 rounded-lg transition-colors",children:" Jogar"})]},u.id)})})]})})}function BS(){const[e,t]=x.useState(null),[n,r]=x.useState([]),[s,i]=x.useState(null),[o,a]=x.useState(null);x.useEffect(()=>{try{const b=B.resolve("multiplayerService");a(b.getStats())}catch{}},[]);const c=x.useCallback((b,S)=>{try{const p=B.resolve("multiplayerService"),f=p.startLocalMatch(b,S);return t(f.mode),r(f.players),i(p.getMatchState()),f}catch{return null}},[]),u=x.useCallback((b,S)=>{try{const p=B.resolve("multiplayerService"),f=p.startAIMatch(b,S);return t(f.mode),r(f.players),i(p.getMatchState()),f}catch{return null}},[]),h=x.useCallback((b,S)=>{try{const p=B.resolve("multiplayerService"),f=p.startAIvsAIMatch(b,S);return t(f.mode),r(f.players),i(p.getMatchState()),f}catch{return null}},[]),d=x.useCallback((b,S)=>{try{const p=B.resolve("multiplayerService");p.updatePlayerState(b,S);const f=p.getMatchState();return i(f),r(f.players),f}catch{return null}},[]),m=x.useCallback(()=>{try{const b=B.resolve("multiplayerService"),S=b.endMatch();return t(null),r([]),i(null),a(b.getStats()),S}catch{return null}},[]),v=x.useCallback(()=>{try{return B.resolve("multiplayerService").getAvailableModes()}catch{return[]}},[]),w=x.useCallback(()=>{try{const b=B.resolve("multiplayerService");a(b.getStats())}catch{}},[]);return{currentMode:e,players:n,matchState:s,stats:o,startLocalMatch:c,startAIMatch:u,startAIvsAIMatch:h,updatePlayerState:d,endMatch:m,getAvailableModes:v,refreshStats:w}}function zS(){const[e,t]=x.useState("medium"),[n,r]=x.useState(null);x.useEffect(()=>{try{const a=B.resolve("aiOpponentService");a.setDifficulty(e),r(a)}catch{}},[e]);const s=x.useCallback(a=>{if(!n)return null;try{return n.decideNextMove(a)}catch{return null}},[n]),i=x.useCallback(a=>{t(a),n&&n.setDifficulty(a)},[n]),o=x.useCallback(()=>n?n.getDifficulties():[],[n]);return{difficulty:e,changeDifficulty:i,getNextMove:s,getDifficulties:o}}function HS({onClose:e,onStartMatch:t}){const{getAvailableModes:n,stats:r,startLocalMatch:s,startAIMatch:i,startAIvsAIMatch:o}=BS(),{getDifficulties:a}=zS(),[c,u]=x.useState(null);rr({itemCount:0,onBack:e,active:!0});const[h,d]=x.useState("Jogador 1");x.useState("Jogador 2");const[m,v]=x.useState("medium"),[w,b]=x.useState("expert"),[S,p]=x.useState("expert"),f=n(),g=a();if(!f||f.length===0)return l.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-red-900/90 text-white p-6 rounded-lg",children:[l.jsx("p",{className:"text-xl",children:" Erro ao carregar multiplayer"}),l.jsx("button",{onClick:e,className:"mt-4 bg-white text-black px-4 py-2 rounded",children:"Fechar"})]})});const y=j=>{j.disabled||u(j)},k=()=>{let j=null;c.id==="vs-ai"?j=i(h,m):c.id==="ai-vs-ai"&&(j=o(w,S)),j&&t&&t(j)};return l.jsx(_.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:e,children:l.jsxs(_.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},className:"bg-gradient-to-br from-purple-900/95 to-indigo-900/95 rounded-2xl p-6 max-w-4xl w-full max-h-[90vh] overflow-y-auto border-2 border-white/20 shadow-2xl",onClick:j=>j.stopPropagation(),children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-3xl font-bold text-white flex items-center gap-2",children:" Multiplayer"}),l.jsx("p",{className:"text-white/60 text-sm mt-1",children:"Desafie amigos ou enfrente a IA"})]}),l.jsx("button",{onClick:e,className:"text-white/60 hover:text-white text-2xl transition-colors",children:""})]}),r&&l.jsxs("div",{className:"bg-black/30 rounded-lg p-4 mb-6 grid grid-cols-3 gap-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-white",children:r.aiMatches}),l.jsx("div",{className:"text-white/60 text-sm",children:"Partidas vs IA"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-green-400",children:r.wins}),l.jsx("div",{className:"text-white/60 text-sm",children:"Vitrias"})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-2xl font-bold text-yellow-400",children:[r.winRate,"%"]}),l.jsx("div",{className:"text-white/60 text-sm",children:"Taxa de Vitria"})]})]}),c?l.jsxs("div",{children:[l.jsx("button",{onClick:()=>u(null),className:"text-white/60 hover:text-white mb-4 flex items-center gap-2",children:" Voltar"}),l.jsxs("div",{className:"bg-black/30 rounded-lg p-6",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[l.jsx("span",{className:"text-5xl",children:c.emoji}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-2xl font-bold text-white",children:c.name}),l.jsx("p",{className:"text-white/60",children:c.description})]})]}),c.id==="vs-ai"&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-white/80 mb-2",children:"Seu Nome:"}),l.jsx("input",{type:"text",value:h,onChange:j=>d(j.target.value),className:"w-full bg-black/30 text-white px-4 py-2 rounded-lg border border-white/20 focus:border-blue-500 focus:outline-none",maxLength:20})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-white/80 mb-2",children:"Dificuldade da IA:"}),l.jsx("div",{className:"grid grid-cols-2 gap-3",children:g.map(j=>l.jsxs("button",{onClick:()=>v(j.id),className:`p-3 rounded-lg border-2 transition-all ${m===j.id?"bg-blue-600 border-blue-400":"bg-black/30 border-white/20 hover:border-white/40"}`,children:[l.jsx("div",{className:"text-2xl mb-1",children:j.emoji}),l.jsx("div",{className:"text-white font-bold",children:j.name}),l.jsx("div",{className:"text-white/60 text-xs",children:j.description})]},j.id))})]})]}),c.id==="ai-vs-ai"&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-white/80 mb-2",children:" IA 1 (Esquerda):"}),l.jsx("div",{className:"grid grid-cols-2 gap-3",children:g.map(j=>l.jsxs("button",{onClick:()=>b(j.id),className:`p-3 rounded-lg border-2 transition-all ${w===j.id?"bg-blue-600 border-blue-400":"bg-black/30 border-white/20 hover:border-white/40"}`,children:[l.jsx("div",{className:"text-2xl mb-1",children:j.emoji}),l.jsx("div",{className:"text-white font-bold",children:j.name}),l.jsx("div",{className:"text-white/60 text-xs",children:j.description})]},j.id))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-white/80 mb-2",children:" IA 2 (Direita):"}),l.jsx("div",{className:"grid grid-cols-2 gap-3",children:g.map(j=>l.jsxs("button",{onClick:()=>p(j.id),className:`p-3 rounded-lg border-2 transition-all ${S===j.id?"bg-red-600 border-red-400":"bg-black/30 border-white/20 hover:border-white/40"}`,children:[l.jsx("div",{className:"text-2xl mb-1",children:j.emoji}),l.jsx("div",{className:"text-white font-bold",children:j.name}),l.jsx("div",{className:"text-white/60 text-xs",children:j.description})]},j.id))})]})]}),l.jsx(_.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:k,className:"w-full mt-6 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-400 hover:to-emerald-500 text-white font-bold py-4 px-6 rounded-lg shadow-lg transition-all",children:" Iniciar Partida"})]})]}):l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:f.map(j=>l.jsxs(_.button,{whileHover:j.disabled?{}:{scale:1.02},whileTap:j.disabled?{}:{scale:.98},onClick:()=>y(j),disabled:j.disabled,className:`p-6 rounded-xl border-2 text-left transition-all ${j.disabled?"bg-gray-800/50 border-gray-700 opacity-50 cursor-not-allowed":"bg-gradient-to-br from-blue-600/30 to-purple-600/30 border-blue-500/50 hover:border-blue-400 cursor-pointer"}`,children:[l.jsx("div",{className:"text-4xl mb-3",children:j.emoji}),l.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:j.name}),l.jsx("p",{className:"text-white/70 text-sm mb-3",children:j.description}),l.jsx("div",{className:"flex items-center gap-2 text-white/50 text-sm",children:l.jsxs("span",{children:[" ",j.players," jogador",j.players>1?"es":""]})}),j.disabled&&l.jsx("div",{className:"mt-3 text-yellow-400 text-xs font-bold",children:" EM BREVE"})]},j.id))})]})})}function US({onComplete:e}){const[t,n]=x.useState(0),[r,s]=x.useState(!1);x.useEffect(()=>{localStorage.getItem("catTetris_tutorialCompleted")||s(!0)},[]);const i=[{title:" Bem-vindo ao Cat Tetris!",description:"Um Tetris com gatinhos e sistema de progresso viciante!",tips:[" Use as setas para mover as peas"," Seta para cima para rotacionar"," Seta para baixo para drop rpido","C para segurar pea (Hold)"]},{title:" Sistema de Moedas",description:"Ganhe Peixes () completando misses e conquistas!",tips:[" 3 misses dirias (resetam  meia-noite)"," 22 conquistas desbloqueveis"," Use  para comprar temas na loja"," Quanto mais voc joga, mais voc ganha!"]},{title:" Misses Dirias",description:"Complete desafios dirios para ganhar recompensas!",tips:[" Misso Fcil: 100"," Misso Mdia: 200"," Misso Difcil: 400"," Complete todas para celebrao especial!"]},{title:" Loja e Personalizao",description:"Customize suas peas com temas exclusivos!",tips:[" 10 temas diferentes disponveis"," Cristais e Espao so os mais caros"," Cada tema muda os emojis das peas"," Desbloqueie todos com suas moedas!"]},{title:" Ranking Global",description:"Compete com jogadores do mundo todo!",tips:[" Veja sua posio no ranking global"," 4 tipos de ranking: Global, Semanal, Pas, Ao Redor"," Compartilhe seus recordes"," Chegue ao Top 3 para medalha!"]},{title:" Pronto para Jogar!",description:"Agora voc sabe tudo. Divirta-se!",tips:[" Dica: Use a sombra da pea para planejar"," Faa combos para mais pontos"," T-Spins valem MUITO mais"," Modo Zen  perfeito para relaxar"]}],o=()=>{t<i.length-1?n(t+1):c()},a=()=>{c()},c=()=>{localStorage.setItem("catTetris_tutorialCompleted","true"),s(!1),e&&e()};if(!r)return null;const u=i[t],h=t===i.length-1;return l.jsx(_.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/90 backdrop-blur-sm flex items-center justify-center z-[100] p-4",children:l.jsxs(_.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-gradient-to-br from-purple-900/95 to-indigo-900/95 rounded-2xl p-8 max-w-lg w-full border-2 border-white/20 shadow-2xl max-h-[90vh] overflow-y-auto",children:[l.jsx("div",{className:"flex gap-2 mb-6",children:i.map((d,m)=>l.jsx("div",{className:`h-2 flex-1 rounded-full transition-colors ${m<=t?"bg-green-500":"bg-white/20"}`},m))}),l.jsx(_.h2,{initial:{y:-20},animate:{y:0},className:"text-3xl font-bold text-white mb-3",children:u.title}),l.jsx(_.p,{initial:{y:-10},animate:{y:0},className:"text-white/80 text-lg mb-6",children:u.description}),l.jsx(_.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},className:"bg-black/30 rounded-lg p-4 mb-6 space-y-2",children:u.tips.map((d,m)=>l.jsxs(_.div,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.3+m*.1},className:"text-white/90 flex items-start gap-2",children:[l.jsx("span",{className:"text-green-400 mt-0.5",children:""}),l.jsx("span",{children:d})]},m))}),l.jsxs("div",{className:"flex gap-3",children:[!h&&l.jsx("button",{onClick:a,className:"flex-1 bg-white/10 hover:bg-white/20 text-white font-bold py-3 px-6 rounded-lg transition-colors",children:"Pular Tutorial"}),l.jsx("button",{onClick:o,className:"flex-1 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-400 hover:to-emerald-500 text-white font-bold py-3 px-6 rounded-lg transition-all shadow-lg",children:h?" Comear a Jogar!":"Prximo "})]}),l.jsxs("div",{className:"text-center mt-4 text-white/40 text-sm",children:["Passo ",t+1," de ",i.length]})]},t)})}function $S(e){const[t,n]=x.useState(null),[r,s]=x.useState(!1),i=x.useRef(null),o=x.useRef(0);x.useEffect(()=>{if(!e){n(null),s(!1),i.current=null,o.current=0;return}const d=new Xn(new Yn,new Jn,null,new jn);return d.initializeGame(),d.isPlaying=!0,o.current=0,i.current=d,n(d.getGameState()),s(!0),()=>{i.current=null,s(!1)}},[e]);const a=x.useRef(0),c=x.useRef(null);x.useEffect(()=>{if(!i.current||!r)return;a.current=0;const d=m=>{var b;a.current||(a.current=m);const v=m-a.current;a.current=m;const w=i.current;if(w){w.isPlaying&&!w.isPaused&&!w.gameOver&&w.updateGame(v);const S=w.getGameState(),p=((b=S.score)==null?void 0:b.combo)||0;p>o.current&&(o.current=p),n(S)}c.current=requestAnimationFrame(d)};return c.current=requestAnimationFrame(d),()=>{c.current&&cancelAnimationFrame(c.current)}},[r]);const u={movePiece:x.useCallback(d=>{var m;(m=i.current)==null||m.movePiece(d)},[]),rotatePiece:x.useCallback(()=>{var d;(d=i.current)==null||d.rotatePiece()},[]),rotatePieceLeft:x.useCallback(()=>{var d,m;(m=(d=i.current)==null?void 0:d.rotatePieceLeft)==null||m.call(d)},[]),hardDrop:x.useCallback(()=>{var d;(d=i.current)==null||d.hardDrop()},[]),holdPiece:x.useCallback(()=>{var d;(d=i.current)==null||d.holdPiece()},[]),pause:x.useCallback(()=>{var d;(d=i.current)==null||d.pause()},[]),resume:x.useCallback(()=>{var d;(d=i.current)==null||d.resume()},[]),restart:x.useCallback(()=>{i.current&&(i.current.restart(),o.current=0)},[]),getDropPreview:x.useCallback(()=>{var d;try{return((d=i.current)==null?void 0:d.getDropPreview())||null}catch{return null}},[])},h=x.useCallback(()=>{var d,m,v,w,b;return t?{score:((d=t.score)==null?void 0:d.points)||0,level:((m=t.score)==null?void 0:m.level)||1,linesCleared:((v=t.score)==null?void 0:v.lines)||0,currentPiece:t.currentPiece,hasCurrentPiece:!!t.currentPiece,heldPiece:t.heldPiece,hasUsedHold:!!t.heldPiece,currentCombo:((w=t.score)==null?void 0:w.combo)||0,maxCombo:o.current,backToBackActive:t.backToBack||!1,board:t.board,gameOver:t.gameOver,isPlaying:t.isPlaying,isPaused:t.isPaused,tSpins:((b=t.score)==null?void 0:b.tSpins)||0}:null},[t]);return{gameState:t,actions:u,isInitialized:r,getValidationState:h}}const Ah={1:{difficulty:"easy",forceHold:!1,comboBoost:!1,label:"Movendo peas..."},2:{difficulty:"easy",forceHold:!0,comboBoost:!1,label:"Usando Hold (C)..."},3:{difficulty:"medium",forceHold:!1,comboBoost:!1,label:"Planejando jogadas..."},4:{difficulty:"medium",forceHold:!1,comboBoost:!0,label:"Buscando combos..."},5:{difficulty:"hard",forceHold:!1,comboBoost:!1,label:"Montando Tetris..."},6:{difficulty:"expert",forceHold:!0,comboBoost:!1,label:"Tentando T-Spins..."},7:{difficulty:"expert",forceHold:!0,comboBoost:!1,label:"Buscando Back-to-Back..."},8:{difficulty:"hard",forceHold:!0,comboBoost:!1,label:"Jogando no mximo..."}};function WS(e,t){const[n,r]=x.useState(null),[s,i]=x.useState(!1),[o,a]=x.useState(!1),[c,u]=x.useState(""),h=x.useRef(null),d=x.useRef(null),m=x.useRef(0),v=x.useRef(null),w=x.useRef(0),b=x.useRef(0),S=x.useRef(0),p=x.useRef(null),f=250,g=25;x.useEffect(()=>{if(!e){r(null),i(!1),a(!1),u(""),h.current=null,d.current=null,b.current=0,S.current=0,v.current&&cancelAnimationFrame(v.current);return}const k=Ah[t]||Ah[1];p.current=k,u(k.label);const j=new Xn(new Yn,new Jn,null,new jn);j.initializeGame(),j.isPlaying=!0;const C=new ys;if(C.setDifficulty(k.difficulty),C.thinkingTime=0,k.comboBoost){const P=C._evaluateBoard.bind(C);C._evaluateBoard=(N,E)=>{let V=P(N,E);for(let K=0;K<N.length;K++){const q=N[K].filter(X=>X!=null).length;q>=8&&(V+=200),q>=9&&(V+=500)}return V}}return h.current=j,d.current=C,b.current=0,S.current=0,w.current=0,m.current=0,r(j.getGameState()),i(!0),a(!1),()=>{v.current&&cancelAnimationFrame(v.current),h.current=null,d.current=null}},[e,t]),x.useEffect(()=>{if(!h.current||!s||!e)return;m.current=0,w.current=0;let k=null;const j=C=>{var K;m.current||(m.current=C);const P=C-m.current;m.current=C;const N=h.current,E=d.current,V=p.current;if(N&&E&&!N.gameOver){N.isPlaying&&!N.isPaused&&N.updateGame(P);const q=N.getGameState(),X=(K=q.currentPiece)==null?void 0:K.type;if(k&&X!==k&&(b.current++,S.current++,b.current>=g)){a(!0),r(q);return}if(k=X,w.current+=P,w.current>=f){if(w.current=0,V!=null&&V.forceHold&&S.current>=3&&q.currentPiece&&q.canHold!==!1){N.holdPiece(),S.current=0,r(N.getGameState()),v.current=requestAnimationFrame(j);return}const le=E.decideNextMove(q);if(le)switch(le.action){case"left":N.movePiece("left");break;case"right":N.movePiece("right");break;case"rotate":N.rotatePiece();break;case"down":N.movePiece("down");break;case"drop":N.hardDrop();break;case"hold":N.holdPiece();break}}r(q)}else if(N!=null&&N.gameOver){a(!0),r(N.getGameState());return}v.current=requestAnimationFrame(j)};return v.current=requestAnimationFrame(j),()=>{v.current&&cancelAnimationFrame(v.current)}},[s,e]);const y=x.useCallback(()=>{var k;try{return((k=h.current)==null?void 0:k.getDropPreview())||null}catch{return null}},[]);return{gameState:n,isInitialized:s,demoComplete:o,statusLabel:c,getDropPreview:y}}function T0(e,t,n=!0){const r=x.useRef(t);r.current=t;const s=x.useRef(e);s.current=e,x.useEffect(()=>{if(!(!e||!n))try{const d=B.resolve("keyboardInputService"),m=()=>{var k;return!((k=r.current)!=null&&k.gameOver)},v=()=>{m()&&s.current.movePiece("left")},w=()=>{m()&&s.current.movePiece("right")},b=()=>{m()&&s.current.movePiece("down")},S=()=>{m()&&s.current.rotatePiece()},p=()=>{var k,j;m()&&((j=(k=s.current).rotatePieceLeft)==null||j.call(k))},f=()=>{m()&&s.current.hardDrop()},g=()=>{m()&&s.current.holdPiece()},y=()=>{var k,j;(k=r.current)!=null&&k.gameOver||((j=r.current)!=null&&j.isPaused?s.current.resume():s.current.pause())};return d.registerHandler("moveLeft",v),d.registerHandler("moveRight",w),d.registerHandler("moveDown",b),d.registerHandler("rotate",S),d.registerHandler("rotateLeft",p),d.registerHandler("hardDrop",f),d.registerHandler("hold",g),d.registerHandler("pause",y),d.startListening(),()=>{d.unregisterHandler("moveLeft",v),d.unregisterHandler("moveRight",w),d.unregisterHandler("moveDown",b),d.unregisterHandler("rotate",S),d.unregisterHandler("rotateLeft",p),d.unregisterHandler("hardDrop",f),d.unregisterHandler("hold",g),d.unregisterHandler("pause",y),d.stopListening()}}catch{return()=>{}}},[n]);const i=x.useCallback((d,m)=>{try{B.resolve("keyboardInputService").setKeyMapping(d,m)}catch{}},[]),o=x.useCallback(()=>{try{return B.resolve("keyboardInputService").getKeyMappings()}catch{return{}}},[]),a=x.useCallback(d=>{try{B.resolve("keyboardInputService").setDAS(d)}catch{}},[]),c=x.useCallback(d=>{try{B.resolve("keyboardInputService").setARR(d)}catch{}},[]),u=x.useCallback(()=>{try{return B.resolve("keyboardInputService").getDAS()}catch{return 133}},[]),h=x.useCallback(()=>{try{return B.resolve("keyboardInputService").getARR()}catch{return 10}},[]);return{customizeKeyMapping:i,getKeyMappings:o,setDAS:a,setARR:c,getDAS:u,getARR:h}}function qS({show:e,onComplete:t}){const[n,r]=x.useState([]);return x.useEffect(()=>{if(!e)return;const s=Array.from({length:50},(o,a)=>({id:a,x:Math.random()*window.innerWidth,y:-20,rotation:Math.random()*360,color:["#FF6B6B","#4ECDC4","#45B7D1","#FFA07A","#98D8C8","#F7DC6F","#BB8FCE","#85C1E2"][Math.floor(Math.random()*8)],size:Math.random()*10+5,delay:Math.random()*.5,duration:Math.random()*2+2,xOffset:(Math.random()-.5)*300}));r(s);const i=setTimeout(()=>{r([]),t&&t()},4e3);return()=>clearTimeout(i)},[e,t]),!e||n.length===0?null:l.jsx("div",{className:"fixed inset-0 pointer-events-none z-50 overflow-hidden",children:n.map(s=>l.jsx(_.div,{initial:{x:s.x,y:s.y,rotate:0,opacity:1},animate:{x:s.x+s.xOffset,y:window.innerHeight+100,rotate:s.rotation+720,opacity:0},transition:{duration:s.duration,delay:s.delay,ease:"easeIn"},style:{position:"absolute",width:s.size,height:s.size,backgroundColor:s.color,borderRadius:"50%"}},s.id))})}function KS({lesson:e,onStartDemo:t,onStartPractice:n}){return l.jsxs(_.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"max-w-lg mx-auto",children:[l.jsxs("div",{className:"bg-white/[0.06] border border-white/[0.08] rounded-xl p-6 mb-5 text-center",children:[l.jsx("div",{className:"text-4xl mb-3",children:""}),l.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:"Objetivo"}),l.jsx("p",{className:"text-white/70 text-base leading-relaxed",children:e.practice.objective})]}),e.intro&&e.intro.length>0&&l.jsxs("div",{className:"bg-white/[0.04] border border-white/[0.06] rounded-xl p-5 mb-5",children:[l.jsx("h4",{className:"text-sm font-semibold text-white/50 uppercase tracking-wide mb-3",children:"Como funciona"}),l.jsx("div",{className:"space-y-2.5",children:e.intro.map((r,s)=>l.jsxs(_.p,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:s*.08},className:"text-white/70 text-sm leading-relaxed flex items-start gap-2",children:[l.jsxs("span",{className:"text-white/25 font-mono text-xs mt-0.5 flex-shrink-0",children:[s+1,"."]}),l.jsx("span",{children:r})]},s))})]}),e.rewards&&l.jsxs("div",{className:"flex justify-center gap-4 mb-5 text-xs text-white/30",children:[l.jsxs("span",{children:[" ",e.rewards.fishCoins]}),l.jsxs("span",{children:[" ",e.rewards.xp," XP"]})]}),l.jsxs("div",{className:"flex flex-col items-center gap-3",children:[l.jsxs(_.button,{whileHover:{scale:1.03},whileTap:{scale:.97},onClick:t,className:`bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-500 hover:to-indigo-500
                   text-white px-8 py-3 rounded-xl font-bold text-sm shadow-lg shadow-blue-900/30 transition-all
                   flex items-center gap-2`,children:[l.jsx("span",{children:""}),l.jsx("span",{children:"Ver IA Jogar Primeiro"})]}),l.jsx("button",{onClick:n,className:"text-white/30 hover:text-white/50 text-xs transition-all",children:"Ir direto para prtica "})]})]},"intro")}function QS({lesson:e,gameState:t,isInitialized:n,demoComplete:r,dropPreview:s,statusLabel:i,onSkip:o}){var c,u,h,d,m;if(!t||!n)return l.jsx("div",{className:"text-center text-white/40 text-sm py-12",children:"Preparando demonstrao..."});const a=x.useMemo(()=>{var b;if(!e.intro||e.intro.length===0)return null;const v=((b=t.score)==null?void 0:b.lines)||0,w=Math.min(Math.floor(v/2),e.intro.length-1);return e.intro[w]},[e.intro,(c=t.score)==null?void 0:c.lines]);return l.jsxs(_.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"text-center",children:[l.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-xl p-3 mb-3 max-w-md mx-auto",children:[l.jsxs("div",{className:"flex items-center justify-center gap-2",children:[l.jsx("span",{className:"text-lg",children:""}),l.jsx("p",{className:"text-sm font-semibold text-blue-300",children:"IA jogando  observe como ela faz!"})]}),i&&l.jsx("p",{className:"text-xs text-blue-400/70 mt-1",children:i})]}),a&&l.jsx(_.div,{initial:{opacity:0,y:-5},animate:{opacity:1,y:0},className:"bg-white/[0.04] border border-white/[0.06] rounded-lg p-2.5 mb-3 max-w-md mx-auto",children:l.jsxs("p",{className:"text-xs text-white/60",children:[" ",a]})},a),l.jsxs("div",{className:"flex gap-3 justify-center items-start",children:[l.jsx(Qn,{heldPiece:t.heldPiece,canHold:t.canHold}),l.jsx(kn,{board:t.board,currentPiece:t.currentPiece,dropPreview:s,gameOver:t.gameOver}),l.jsxs("div",{className:"flex flex-col gap-3",children:[l.jsx(Kn,{pieces:t.nextPieces||[]}),l.jsx(qn,{score:((u=t.score)==null?void 0:u.points)||0,level:((h=t.score)==null?void 0:h.level)||1,lines:((d=t.score)==null?void 0:d.lines)||0,combo:((m=t.score)==null?void 0:m.combo)||0})]})]}),l.jsx("div",{className:"mt-4",children:r?l.jsx(_.button,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},whileHover:{scale:1.03},whileTap:{scale:.97},onClick:o,className:`bg-gradient-to-r from-emerald-600 to-green-600 hover:from-emerald-500 hover:to-green-500
                     text-white px-6 py-2.5 rounded-xl font-bold text-sm shadow-lg shadow-emerald-900/30 transition-all`,children:"  Agora  sua vez!"}):l.jsx("button",{onClick:o,className:"text-white/30 hover:text-white/50 text-xs transition-all",children:"Pular demonstrao "})})]},"demo")}function XS({lesson:e,gameState:t,isInitialized:n,practiceState:r,onRestart:s,dropPreview:i}){var o,a,c,u;return!t||!n?l.jsx("div",{className:"text-center text-white/40 text-sm py-12",children:"Carregando..."}):l.jsxs(_.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"text-center",children:[l.jsxs("div",{className:"bg-white/[0.06] border border-white/[0.06] rounded-xl p-3 mb-3 max-w-md mx-auto",children:[l.jsxs("p",{className:"text-sm font-semibold text-white mb-2",children:[" ",e.practice.objective]}),r.progress>0&&l.jsxs("div",{children:[l.jsx("div",{className:"h-1.5 bg-white/[0.08] rounded-full overflow-hidden",children:l.jsx(_.div,{className:`h-full rounded-full ${r.complete?"bg-emerald-400":"bg-gradient-to-r from-blue-500 to-indigo-500"}`,initial:{width:0},animate:{width:`${Math.min(100,r.progress*100)}%`},transition:{duration:.3}})}),l.jsxs("div",{className:"text-white/30 text-[10px] mt-1",children:[Math.round(r.progress*100),"%"]})]})]}),l.jsxs("div",{className:"flex gap-3 justify-center items-start",children:[l.jsx(Qn,{heldPiece:t.heldPiece,canHold:t.canHold}),l.jsx(kn,{board:t.board,currentPiece:t.currentPiece,dropPreview:i,gameOver:t.gameOver}),l.jsxs("div",{className:"flex flex-col gap-3",children:[l.jsx(Kn,{pieces:t.nextPieces||[]}),l.jsx(qn,{score:((o=t.score)==null?void 0:o.points)||0,level:((a=t.score)==null?void 0:a.level)||1,lines:((c=t.score)==null?void 0:c.lines)||0,combo:((u=t.score)==null?void 0:u.combo)||0})]})]}),l.jsx("div",{className:"mt-3 text-white/20 text-[10px]",children:" Mover   Rotao   Soft Drop  Espao: Hard Drop  C: Hold"}),r.feedback&&!r.complete&&l.jsx(_.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"mt-3 bg-white/[0.06] border border-white/[0.08] rounded-lg p-3 max-w-md mx-auto",children:l.jsx("p",{className:"text-sm text-white/70",children:r.feedback})},r.feedback),t.gameOver&&!r.complete&&l.jsxs(_.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"mt-4",children:[l.jsx("p",{className:"text-white/40 text-sm mb-2",children:"Game Over  tente de novo!"}),l.jsx("button",{onClick:s,className:"bg-white/[0.08] hover:bg-white/[0.12] text-white text-sm px-4 py-2 rounded-lg transition-all",children:" Recomear"})]}),r.complete&&l.jsxs(_.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",bounce:.4},className:"mt-4 bg-emerald-500/10 border border-emerald-500/20 rounded-xl p-6 max-w-sm mx-auto",children:[l.jsx("div",{className:"text-4xl mb-2",children:""}),l.jsx("h3",{className:"text-lg font-bold text-white mb-1",children:"Parabns!"}),l.jsx("p",{className:"text-emerald-300/70 text-sm",children:r.feedback})]})]},"practice")}function YS({lesson:e,onComplete:t,onExit:n}){const[r,s]=x.useState("introduction"),[i,o]=x.useState({progress:0,feedback:"",complete:!1}),[a,c]=x.useState(!1),{gameState:u,isInitialized:h,demoComplete:d,statusLabel:m,getDropPreview:v}=WS(r==="demo",e==null?void 0:e.id),w=x.useMemo(()=>r!=="demo"||!h?null:(v==null?void 0:v())||null,[r,h,v,u]),{gameState:b,actions:S,isInitialized:p,getValidationState:f}=$S(r==="practice"?e:null);T0(S,b,r==="practice"&&p);const g=x.useMemo(()=>{var P;return r!=="practice"||!p?null:((P=S.getDropPreview)==null?void 0:P.call(S))||null},[r,p,S,b]);x.useEffect(()=>{var E;if(r!=="practice"||!p||!b)return;const P=f();if(!P||!((E=e.practice)!=null&&E.validate))return;const N=e.practice.validate(P);o(V=>({...V,progress:N.progress||0,feedback:N.feedback||"",complete:N.complete||!1})),N.complete&&!i.complete&&(c(!0),setTimeout(()=>{t(e.id,{score:P.score})},2e3))},[r,p,b,e,f,i.complete,t]);const y=x.useCallback(()=>{s("demo")},[]),k=x.useCallback(()=>{s("practice"),o({progress:0,feedback:"",complete:!1})},[]),j=x.useCallback(()=>{var P;(P=S.restart)==null||P.call(S),o({progress:0,feedback:"",complete:!1})},[S]),C=r==="introduction"?" Introduo":r==="demo"?" Demonstrao":" Prtica";return l.jsxs("div",{className:"fixed inset-0 bg-gradient-to-b from-slate-900 via-indigo-950 to-slate-900 z-50 flex flex-col",children:[l.jsx("div",{className:"bg-black/30 border-b border-white/[0.06] px-4 py-2 flex-shrink-0",children:l.jsxs("div",{className:"flex items-center justify-between max-w-4xl mx-auto",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("span",{className:"text-2xl",children:e.module==="fundamentals"?"":e.module==="intermediate"?"":e.module==="advanced"?"":""}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-bold text-white",children:e.title}),l.jsx("p",{className:"text-white/40 text-xs",children:e.description})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-xs text-white/30 bg-white/[0.06] px-2 py-1 rounded",children:C}),l.jsx("button",{onClick:n,className:"text-white/40 hover:text-white/70 bg-white/[0.06] hover:bg-white/[0.1] rounded-lg px-3 py-1.5 text-sm transition-all",children:" Sair"})]})]})}),l.jsx("div",{className:"flex-1 overflow-auto p-3",children:l.jsx("div",{className:"max-w-4xl w-full mx-auto",children:l.jsxs(we,{mode:"wait",children:[r==="introduction"&&l.jsx(KS,{lesson:e,onStartDemo:y,onStartPractice:k}),r==="demo"&&l.jsx(QS,{lesson:e,gameState:u,isInitialized:h,demoComplete:d,dropPreview:w,statusLabel:m,onSkip:k}),r==="practice"&&l.jsx(XS,{lesson:e,gameState:b,isInitialized:p,practiceState:i,onRestart:j,dropPreview:g})]})})}),l.jsx(qS,{show:a,onComplete:()=>c(!1)})]})}function JS({tutorialService:e,onClose:t,onLessonComplete:n}){const[r,s]=x.useState(null),[i,o]=x.useState(e.getProgress()),[a,c]=x.useState("fundamentals");rr({itemCount:0,onBack:t,active:!r});const u=e.lessons,h=[{key:"fundamentals",icon:"",name:"Fundamentos",desc:"O bsico do Tetris"},{key:"intermediate",icon:"",name:"Intermedirio",desc:"T-spins e combos"},{key:"advanced",icon:"",name:"Avanado",desc:"Setups e estratgias"},{key:"pro",icon:"",name:"Profissional",desc:"Tcnicas PRO"}],d=u.filter(g=>g.module===a),m=g=>{const y=u.filter(j=>j.module===g).map(j=>j.id);return{done:y.filter(j=>i.completedLessons.includes(j)).length,total:y.length}},v=(g,y)=>{const k=e.completeLesson(g,y);o(e.getProgress()),s(null),n&&n(k)},w=g=>i.unlockedLessons.includes(g),b=g=>i.completedLessons.includes(g);if(r)return l.jsx(YS,{lesson:r,onComplete:v,onExit:()=>s(null)});const S=i.completedLessons.length,p=u.length,f=p>0?Math.round(S/p*100):0;return l.jsx(_.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-gradient-to-b from-slate-900 via-indigo-950 to-slate-900 z-40 overflow-y-auto",children:l.jsxs("div",{className:"min-h-screen max-w-lg mx-auto px-4 py-6 flex flex-col",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-extrabold text-white",children:" Tutorial"}),l.jsx("p",{className:"text-white/40 text-sm mt-0.5",children:"Aprenda do zero ao PRO"})]}),l.jsx("button",{onClick:t,className:"text-white/40 hover:text-white/70 bg-white/[0.06] hover:bg-white/[0.1] rounded-lg px-3 py-1.5 text-sm transition-all",children:" Voltar"})]}),l.jsxs("div",{className:"mb-6",children:[l.jsxs("div",{className:"flex justify-between text-xs text-white/40 mb-1.5",children:[l.jsx("span",{children:"Progresso geral"}),l.jsxs("span",{children:[S,"/",p," (",f,"%)"]})]}),l.jsx("div",{className:"h-2 bg-white/[0.08] rounded-full overflow-hidden",children:l.jsx(_.div,{className:"h-full bg-gradient-to-r from-emerald-500 to-green-400 rounded-full",initial:{width:0},animate:{width:`${f}%`},transition:{duration:.6,ease:"easeOut"}})})]}),l.jsx("div",{className:"flex gap-1.5 mb-5 overflow-x-auto pb-1 -mx-1 px-1",children:h.map(g=>{const y=m(g.key),k=a===g.key;return l.jsx("button",{onClick:()=>c(g.key),className:`flex-shrink-0 rounded-lg px-3 py-2 text-left transition-all duration-150 ${k?"bg-white/[0.12] border border-white/[0.15]":"bg-white/[0.04] border border-transparent hover:bg-white/[0.07]"}`,children:l.jsxs("div",{className:"flex items-center gap-1.5",children:[l.jsx("span",{className:"text-base",children:g.icon}),l.jsx("span",{className:`text-xs font-semibold ${k?"text-white":"text-white/50"}`,children:g.name}),l.jsxs("span",{className:`text-[10px] ml-1 ${y.done===y.total&&y.total>0?"text-emerald-400":"text-white/30"}`,children:[y.done,"/",y.total]})]})},g.key)})}),l.jsx("div",{className:"flex-1 space-y-2",children:l.jsx(we,{mode:"wait",children:l.jsxs(_.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},transition:{duration:.2},className:"space-y-2",children:[d.map((g,y)=>{var C,P;const k=w(g.id),j=b(g.id);return l.jsxs(_.button,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:y*.04},disabled:!k,onClick:()=>k&&s(g),className:`w-full text-left rounded-xl p-4 transition-all duration-150 flex items-center gap-3 ${k?"bg-white/[0.06] hover:bg-white/[0.1] border border-white/[0.06] hover:border-white/[0.12] active:scale-[0.99]":"bg-white/[0.02] border border-white/[0.03] opacity-40 cursor-not-allowed"} ${j?"border-emerald-500/30":""}`,children:[l.jsx("div",{className:`w-9 h-9 rounded-lg flex items-center justify-center text-sm flex-shrink-0 ${j?"bg-emerald-500/20 text-emerald-400":k?"bg-white/[0.08] text-white/60":"bg-white/[0.04] text-white/20"}`,children:j?"":k?y+1:""}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("div",{className:"text-sm font-semibold text-white truncate",children:g.title}),l.jsx("div",{className:"text-xs text-white/35 mt-0.5 truncate",children:g.description}),l.jsxs("div",{className:"flex items-center gap-3 mt-1.5 text-[10px] text-white/25",children:[l.jsxs("span",{children:[" ",g.estimatedTime]}),l.jsxs("span",{children:[" ",((C=g.rewards)==null?void 0:C.fishCoins)||0]}),l.jsxs("span",{children:[" ",((P=g.rewards)==null?void 0:P.xp)||0," XP"]})]})]}),l.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[l.jsx("span",{className:`w-2 h-2 rounded-full ${g.difficulty==="beginner"?"bg-green-400":g.difficulty==="intermediate"?"bg-yellow-400":g.difficulty==="advanced"?"bg-red-400":"bg-purple-400"}`}),k&&l.jsx("svg",{className:"w-4 h-4 text-white/20",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]},g.id)}),d.length===0&&l.jsx("div",{className:"text-center py-12 text-white/20 text-sm",children:"Nenhuma lio neste mdulo"})]},a)})}),i.badges.length>0&&l.jsxs("div",{className:"mt-6 pt-4 border-t border-white/[0.06]",children:[l.jsx("div",{className:"text-xs text-white/30 mb-2",children:"Badges conquistadas"}),l.jsx("div",{className:"flex flex-wrap gap-2",children:i.badges.map(g=>l.jsxs("span",{className:"bg-amber-500/10 text-amber-300/70 text-[10px] px-2 py-1 rounded-md font-medium",children:[" ",g.replace(/_/g," ")]},g))})]})]})})}function ZS({reward:e,onClose:t}){var n,r,s;return ue.useEffect(()=>{const i=setTimeout(()=>{t()},5e3);return()=>clearTimeout(i)},[t]),e?l.jsx(_.div,{initial:{opacity:0,y:-50,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,scale:.9},className:"fixed top-24 right-6 z-[60] max-w-md",children:l.jsx("div",{className:"bg-gradient-to-br from-green-600 to-emerald-600 rounded-xl p-6 shadow-2xl border-2 border-white/20",children:l.jsxs("div",{className:"flex items-start gap-4",children:[l.jsx("div",{className:"text-4xl",children:""}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Lio Completa!"}),e.lessonTitle&&l.jsx("p",{className:"text-white/90 text-sm mb-3",children:e.lessonTitle}),l.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[((n=e.rewards)==null?void 0:n.fishCoins)>0&&l.jsxs("div",{className:"bg-white/10 rounded-lg p-2 text-center",children:[l.jsx("div",{className:"text-xl",children:""}),l.jsxs("div",{className:"text-lg font-bold text-white",children:["+",e.rewards.fishCoins]}),l.jsx("div",{className:"text-xs text-white/70",children:"Peixes"})]}),((r=e.rewards)==null?void 0:r.xp)>0&&l.jsxs("div",{className:"bg-white/10 rounded-lg p-2 text-center",children:[l.jsx("div",{className:"text-xl",children:""}),l.jsxs("div",{className:"text-lg font-bold text-white",children:["+",e.rewards.xp]}),l.jsx("div",{className:"text-xs text-white/70",children:"XP"})]}),((s=e.rewards)==null?void 0:s.badge)&&l.jsxs("div",{className:"bg-white/10 rounded-lg p-2 text-center",children:[l.jsx("div",{className:"text-xl",children:""}),l.jsx("div",{className:"text-xs font-bold text-white mt-1",children:"Badge"}),l.jsx("div",{className:"text-xs text-white/70",children:e.rewards.badge.split("_")[0]})]})]})]}),l.jsx("button",{onClick:t,className:"text-white/60 hover:text-white transition-colors",children:""})]})})}):null}function ek(){const[e,t]=x.useState(null),n=x.useRef(null),r=x.useRef(null),s=x.useRef(0),i=x.useRef(!1),o=x.useRef(!1);x.useEffect(()=>{if(!i.current){i.current=!0;try{const y=B.resolve("gameService");n.current=y,y.initializeGame(),t(y.getGameState());const k=()=>{o.current=!0};return Object.values(O).forEach(j=>{R.on(j,k)}),()=>{Object.values(O).forEach(j=>{R.off(j,k)}),r.current&&cancelAnimationFrame(r.current)}}catch(y){throw Gt.logError("useGameService","init",y.message,{stack:y.stack}),y}}},[]),x.useEffect(()=>{if(!n.current)return;const y=k=>{s.current||(s.current=k);const j=k-s.current;s.current=k,n.current&&(n.current.isPlaying&&!n.current.isPaused&&!n.current.gameOver&&n.current.updateGame(j),o.current&&(o.current=!1,t(n.current.getGameState()))),r.current=requestAnimationFrame(y)};return r.current=requestAnimationFrame(y),()=>{r.current&&cancelAnimationFrame(r.current)}},[]);const a=x.useCallback(y=>(...k)=>{if(n.current&&typeof n.current[y]=="function")try{return n.current[y](...k)}catch(j){if(Gt.logError("useGameService",y,j.message,{stack:j.stack,args:k.map(C=>String(C).slice(0,100))}),y==="getDropPreview")return null;throw j}},[]),c=x.useCallback(a("movePiece"),[a]),u=x.useCallback(a("rotatePiece"),[a]),h=x.useCallback(a("rotatePieceLeft"),[a]),d=x.useCallback(a("hardDrop"),[a]),m=x.useCallback(a("holdPiece"),[a]),v=x.useCallback(a("getDropPreview"),[a]),w=x.useCallback(a("pause"),[a]),b=x.useCallback(a("resume"),[a]),S=x.useCallback(a("restart"),[a]),p=x.useCallback(a("saveGame"),[a]),f=x.useCallback(a("loadGame"),[a]);return{gameState:e,actions:{movePiece:c,rotatePiece:u,rotatePieceLeft:h,hardDrop:d,holdPiece:m,getDropPreview:v,pause:w,resume:b,restart:S,saveGame:p,loadGame:f}}}function tk(){const[e,t]=x.useState({volume:80,gameSpeed:"normal",soundEnabled:!0,particlesEnabled:!0,das:167,arr:33}),[n,r]=x.useState(!0),[s,i]=x.useState(null);x.useEffect(()=>{try{const h=B.resolve("settingsService").getSettings();t(h||{volume:80,gameSpeed:"normal",soundEnabled:!0,particlesEnabled:!0,das:167,arr:33}),r(!1)}catch(u){i(u.message),r(!1),t({volume:80,gameSpeed:"normal",soundEnabled:!0,particlesEnabled:!0,das:167,arr:33})}},[]);const o=x.useCallback(async u=>{try{i(null);const d=B.resolve("settingsService").saveSettings(u);return t(d),d}catch(h){throw i(h.message),h}},[]),a=x.useCallback(async(u,h)=>{try{i(null);const m=B.resolve("settingsService").updateSetting(u,h);return t(m),m}catch(d){throw i(d.message),d}},[]),c=x.useCallback(async()=>{try{i(null);const h=B.resolve("settingsService").resetSettings();return t(h),h}catch(u){throw i(u.message),u}},[]);return{settings:e,loading:n,error:s,updateSettings:o,updateSetting:a,resetSettings:c}}function nk(){const e=x.useCallback((S,p,f="sine",g=.1)=>{const y=Gr();if(y)try{const k=y.createOscillator(),j=y.createGain();k.connect(j),j.connect(y.destination),k.frequency.setValueAtTime(S,y.currentTime),k.type=f,j.gain.setValueAtTime(g,y.currentTime),j.gain.exponentialRampToValueAtTime(.001,y.currentTime+p),k.start(y.currentTime),k.stop(y.currentTime+p)}catch{}},[]),t=x.useCallback((S,p=.05)=>{const f=Gr();if(f)try{const g=f.sampleRate*S,y=f.createBuffer(1,g,f.sampleRate),k=y.getChannelData(0);for(let C=0;C<g;C++)k[C]=(Math.random()*2-1)*p;const j=f.createBufferSource();j.buffer=y,j.connect(f.destination),j.start()}catch{}},[]),n=x.useCallback(S=>{switch(S){case"I":[800,700,600,500].forEach((p,f)=>{setTimeout(()=>e(p,.1,"square",.08),f*50)});break;case"O":e(600,.1,"sine",.1),setTimeout(()=>e(600,.1,"sine",.1),80);break;case"T":e(523,.08,"triangle",.08),setTimeout(()=>e(659,.08,"triangle",.08),40),setTimeout(()=>e(523,.08,"triangle",.08),80);break;case"S":[440,494,523,587].forEach((p,f)=>{setTimeout(()=>e(p,.06,"sawtooth",.06),f*30)});break;case"Z":[587,523,494,440].forEach((p,f)=>{setTimeout(()=>e(p,.06,"sawtooth",.06),f*30)});break;case"J":[330,415,523].forEach((p,f)=>{setTimeout(()=>e(p,.15,"triangle",.07),f*20)});break;case"L":[392,494,659].forEach((p,f)=>{setTimeout(()=>e(p,.15,"sine",.08),f*30)});break;default:e(440,.1,"sine",.05)}},[e]),r=x.useCallback(S=>{switch(S){case 1:[440,494,523].forEach((p,f)=>{setTimeout(()=>e(p,.1,"triangle",.1),f*80)});break;case 2:[440,523,659,784].forEach((p,f)=>{setTimeout(()=>e(p,.12,"triangle",.1),f*60)});break;case 3:[523,659,784,1047,1319].forEach((p,f)=>{setTimeout(()=>e(p,.15,"triangle",.12),f*50)});break;case 4:t(.02),setTimeout(()=>{[262,330,392,523,659,784,1047].forEach((p,f)=>{setTimeout(()=>e(p,.2,"sawtooth",.15),f*40)})},50),setTimeout(()=>{[1047,1319,1568,2093].forEach((p,f)=>{setTimeout(()=>e(p,.3,"triangle",.2),f*30)})},350);break}},[e,t]),s=x.useCallback(()=>{[{freq:523,delay:0},{freq:659,delay:100},{freq:784,delay:200},{freq:1047,delay:300},{freq:784,delay:400},{freq:1047,delay:500},{freq:1319,delay:600},{freq:1568,delay:700}].forEach(p=>{setTimeout(()=>e(p.freq,.15,"triangle",.12),p.delay)}),setTimeout(()=>{[1047,1319,1568,2093].forEach((p,f)=>{setTimeout(()=>e(p,.4,"triangle",.15),f*50)})},800)},[e]),i=x.useCallback(()=>{e(200,.05,"square",.03),e(120,.06,"sine",.04)},[e]),o=x.useCallback(()=>{t(.04,.08),e(80,.08,"square",.12),e(60,.1,"sine",.1)},[e,t]),a=x.useCallback(()=>{t(.03,.04),[349,440,523,659,784].forEach((S,p)=>{setTimeout(()=>e(S,.2,"sawtooth",.1),p*40)}),setTimeout(()=>{e(1047,.4,"triangle",.15)},250)},[e,t]),c=x.useCallback(()=>{[660,880,1100,1320,1760].forEach((S,p)=>{setTimeout(()=>e(S,.12,"triangle",.08),p*50)})},[e]),u=x.useCallback(S=>{const p=400+S*80;e(p,.1,"triangle",.08),setTimeout(()=>e(p*1.25,.08,"triangle",.06),50)},[e]),h=x.useCallback(()=>{[523,494,440,392,349,330,294,262].forEach((p,f)=>{setTimeout(()=>e(p,.3,"sine",.1),f*150)})},[e]),d=x.useCallback(()=>{e(440,.2,"triangle",.08)},[e]),m=x.useCallback(()=>{e(523,.15,"triangle",.08),setTimeout(()=>e(659,.1,"triangle",.06),100)},[e]),v=x.useCallback(()=>{e(880,.1,"sine",.06),setTimeout(()=>e(1100,.08,"sine",.05),60)},[e]),w=x.useCallback(()=>{e(1200,.05,"square",.04)},[e]),b=x.useCallback(()=>{e(800,.03,"square",.02)},[e]);return{playPieceSound:n,playLineClear:r,playLevelUp:s,playPieceLand:i,playHardDrop:o,playTSpin:a,playBackToBack:c,playCombo:u,playGameOver:h,playPause:d,playResume:m,playHold:v,playRotate:w,playMove:b}}function rk(){const e=nk(),t=x.useRef(e);t.current=e,x.useEffect(()=>{const n=()=>t.current,r=w=>{var b;n().playPieceLand(),(b=w==null?void 0:w.piece)!=null&&b.type&&n().playPieceSound(w.piece.type)},s=w=>{(w==null?void 0:w.linesCleared)>0&&n().playLineClear(w.linesCleared)},i=()=>n().playHardDrop(),o=()=>n().playTSpin(),a=()=>n().playBackToBack(),c=w=>{(w==null?void 0:w.combo)>=2&&n().playCombo(w.combo)},u=()=>n().playHold(),h=()=>n().playRotate(),d=()=>n().playMove(),m=()=>n().playGameOver(),v=()=>n().playLevelUp();return R.on(O.PIECE_PLACED,r),R.on(O.LINE_CLEARED,s),R.on(O.HARD_DROP,i),R.on(O.T_SPIN,o),R.on(O.BACK_TO_BACK,a),R.on(O.SCORE_UPDATED,c),R.on(O.PIECE_HELD,u),R.on(O.PIECE_ROTATED,h),R.on(O.PIECE_MOVED,d),R.on(O.GAME_OVER,m),R.on(O.LEVEL_UP,v),()=>{R.off(O.PIECE_PLACED,r),R.off(O.LINE_CLEARED,s),R.off(O.HARD_DROP,i),R.off(O.T_SPIN,o),R.off(O.BACK_TO_BACK,a),R.off(O.SCORE_UPDATED,c),R.off(O.PIECE_HELD,u),R.off(O.PIECE_ROTATED,h),R.off(O.PIECE_MOVED,d),R.off(O.GAME_OVER,m),R.off(O.LEVEL_UP,v)}},[])}function sk(){const[e,t]=x.useState(!1),[n,r]=x.useState(null),s=x.useRef(null),i=x.useRef([]),o=x.useRef(null),a=x.useCallback(()=>{s.current&&(s.current.pause(),s.current.currentTime=0),i.current.forEach(m=>{try{m.stop()}catch{}}),i.current=[],o.current&&(clearTimeout(o.current),o.current=null),t(!1),r(null)},[]),c=x.useCallback(async()=>{try{a();const m=new Audio("/cat-tetris/sounds/background-music.mp3");m.loop=!0,m.volume=.3,s.current=m,await m.play(),t(!0),r("background")}catch{h()}},[a]),u=x.useCallback(async()=>{try{a();const m=new Audio("/cat-tetris/sounds/game-music.mp3");m.loop=!0,m.volume=.4,s.current=m,await m.play(),t(!0),r("game")}catch{d()}},[a]),h=x.useCallback(()=>{a();try{const m=Gr();if(!m)return;const v=[{freq:523.25,duration:.4},{freq:587.33,duration:.4},{freq:659.25,duration:.4},{freq:698.46,duration:.4},{freq:783.99,duration:.6},{freq:659.25,duration:.4},{freq:523.25,duration:.8},{freq:587.33,duration:.4},{freq:659.25,duration:.4},{freq:698.46,duration:.4},{freq:783.99,duration:.6},{freq:880,duration:.4},{freq:783.99,duration:.8},{freq:659.25,duration:.4},{freq:698.46,duration:.4},{freq:783.99,duration:.4},{freq:880,duration:.6},{freq:987.77,duration:.4},{freq:1046.5,duration:.8}];let w=m.currentTime;v.forEach((b,S)=>{const p=m.createOscillator(),f=m.createGain();if(p.connect(f),f.connect(m.destination),p.frequency.setValueAtTime(b.freq,w),p.type="sine",f.gain.setValueAtTime(0,w),f.gain.linearRampToValueAtTime(.1,w+.05),f.gain.exponentialRampToValueAtTime(.01,w+b.duration),p.start(w),p.stop(w+b.duration),i.current.push(p),S<v.length-1){const g=m.createOscillator(),y=m.createGain();g.connect(y),y.connect(m.destination),g.frequency.setValueAtTime(b.freq*1.25,w),g.type="triangle",y.gain.setValueAtTime(0,w),y.gain.linearRampToValueAtTime(.05,w+.05),y.gain.exponentialRampToValueAtTime(.01,w+b.duration),g.start(w),g.stop(w+b.duration),i.current.push(g)}w+=b.duration}),o.current=setTimeout(()=>{s.current||h()},w*1e3+1e3),t(!0),r("cheerful-fallback")}catch{}},[a]),d=x.useCallback(()=>{a();try{const m=Gr();if(!m)return;const v=[{freq:261.63,duration:.2},{freq:329.63,duration:.2},{freq:392,duration:.2},{freq:523.25,duration:.3},{freq:392,duration:.1},{freq:523.25,duration:.3},{freq:293.66,duration:.2},{freq:369.99,duration:.2},{freq:440,duration:.2},{freq:587.33,duration:.3},{freq:440,duration:.1},{freq:587.33,duration:.3},{freq:329.63,duration:.2},{freq:415.3,duration:.2},{freq:493.88,duration:.2},{freq:659.25,duration:.4},{freq:493.88,duration:.2},{freq:659.25,duration:.4}];let w=m.currentTime;v.forEach((b,S)=>{const p=m.createOscillator(),f=m.createGain();if(p.connect(f),f.connect(m.destination),p.frequency.setValueAtTime(b.freq,w),p.type="square",f.gain.setValueAtTime(0,w),f.gain.linearRampToValueAtTime(.15,w+.02),f.gain.exponentialRampToValueAtTime(.01,w+b.duration),p.start(w),p.stop(w+b.duration),i.current.push(p),S%2===0){const g=m.createOscillator(),y=m.createGain();g.connect(y),y.connect(m.destination),g.frequency.setValueAtTime(b.freq*.5,w),g.type="sawtooth",y.gain.setValueAtTime(0,w),y.gain.linearRampToValueAtTime(.08,w+.02),y.gain.exponentialRampToValueAtTime(.01,w+b.duration),g.start(w),g.stop(w+b.duration),i.current.push(g)}w+=b.duration}),o.current=setTimeout(()=>{s.current||d()},w*1e3+500),t(!0),r("energetic-fallback")}catch{}},[a]);return{isPlaying:e,currentTrack:n,startBackgroundMusic:c,startGameMusic:u,stopMusic:a,playCheerfulMelody:h,playEnergeticMelody:d}}function ik(){const[e,t]=x.useState(null),[n,r]=x.useState(!0);x.useEffect(()=>{try{const o=B.resolve("playerStatsService");t(o.getStats()),r(!1);const a=()=>{try{const c=B.resolve("statisticsService"),u=B.resolve("gameService");if(!u.gameOver)return;const h=u.getGameState(),d=c.getStats();if(d.piecesPlaced===0&&d.linesCleared===0)return;const m={score:h.score.points,level:h.score.level,linesCleared:d.linesCleared,piecesPlaced:d.piecesPlaced,tSpins:d.tSpins,backToBack:d.backToBack,maxCombo:d.maxCombo,playTime:d.playTime};o.updateAfterGame(m),t(o.getStats()),c.reset(),window.dispatchEvent(new Event("playerStatsUpdated"))}catch{}};return R.on(O.GAME_OVER,a),()=>{R.off(O.GAME_OVER,a)}}catch{r(!1)}},[]);const s=x.useCallback((o,a)=>{try{const c=B.resolve("playerStatsService"),u=c.updateRecord(o,a);return u&&(t(c.getStats()),window.dispatchEvent(new Event("playerStatsUpdated"))),u}catch{return!1}},[]),i=x.useCallback((o,a=1)=>{try{const c=B.resolve("playerStatsService");c.incrementStat(o,a),t(c.getStats()),window.dispatchEvent(new Event("playerStatsUpdated"))}catch{}},[]);return{playerStats:e,loading:n,updateRecord:s,incrementStat:i}}function ok(){const[e,t]=x.useState(null),[n,r]=x.useState(!0);x.useEffect(()=>{try{const i=B.resolve("statisticsService");t(i.getStats()),r(!1);const o=()=>{t(i.getStats())},a=()=>{i.incrementPiecesPlaced(),o()},c=({linesCleared:m})=>{i.addLinesCleared(m),o()},u=()=>{i.incrementTSpins(),o()},h=({combo:m})=>{i.updateMaxCombo(m),o()},d=()=>{i.incrementBackToBack(),o()};return R.on(O.PIECE_PLACED,a),R.on(O.LINE_CLEARED,c),R.on(O.T_SPIN,u),R.on(O.SCORE_UPDATED,h),R.on(O.BACK_TO_BACK,d),()=>{R.off(O.PIECE_PLACED,a),R.off(O.LINE_CLEARED,c),R.off(O.T_SPIN,u),R.off(O.SCORE_UPDATED,h),R.off(O.BACK_TO_BACK,d)}}catch{r(!1)}},[]),x.useEffect(()=>{if(n)return;const i=setInterval(()=>{try{const o=B.resolve("statisticsService"),a=B.resolve("gameService");a.isPlaying&&!a.isPaused&&!a.gameOver&&o.incrementPlayTime(),t(o.getStats())}catch{}},1e3);return()=>clearInterval(i)},[n]);const s=x.useCallback(()=>{try{const i=B.resolve("statisticsService");i.reset(),t(i.getStats())}catch{}},[]);return{statistics:e,loading:n,resetStatistics:s}}const ak=x.lazy(()=>Rc(()=>import("./SettingsMenu-6dcda284.js"),[]));function lk(){return l.jsx("div",{className:"flex items-center justify-center p-8",children:l.jsx(_.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"text-4xl",children:""})})}function ck({gameState:e,actions:t,onBackToMenu:n,onRestart:r,isGamepadActive:s,controllerCount:i,getGamepadInfo:o}){var v,w,b,S,p,f;const a=ue.useMemo(()=>{if(!(e!=null&&e.currentPiece)||e!=null&&e.gameOver||e!=null&&e.isPaused)return null;try{return t.getDropPreview()}catch{return null}},[(w=(v=e==null?void 0:e.currentPiece)==null?void 0:v.position)==null?void 0:w.x,(S=(b=e==null?void 0:e.currentPiece)==null?void 0:b.position)==null?void 0:S.y,(p=e==null?void 0:e.currentPiece)==null?void 0:p.type,(f=e==null?void 0:e.currentPiece)==null?void 0:f.shape,e==null?void 0:e.gameOver,e==null?void 0:e.isPaused]),[c,u]=ue.useState({hardDrop:!1,hold:!1,pause:!1}),h=ue.useCallback(()=>{c.hardDrop||e!=null&&e.gameOver||(t.hardDrop(),u(g=>({...g,hardDrop:!0})),setTimeout(()=>{u(g=>({...g,hardDrop:!1}))},300))},[t,c.hardDrop,e==null?void 0:e.gameOver]),d=ue.useCallback(()=>{c.hold||e!=null&&e.gameOver||!(e!=null&&e.canHold)||(t.holdPiece(),u(g=>({...g,hold:!0})),setTimeout(()=>{u(g=>({...g,hold:!1}))},500))},[t,c.hold,e==null?void 0:e.gameOver,e==null?void 0:e.canHold]),m=ue.useCallback(()=>{c.pause||e!=null&&e.gameOver||(e!=null&&e.isPaused?t.resume():t.pause(),u(g=>({...g,pause:!0})),setTimeout(()=>{u(g=>({...g,pause:!1}))},300))},[t,c.pause,e==null?void 0:e.gameOver,e==null?void 0:e.isPaused]);return l.jsxs("div",{className:"h-screen cat-bg flex flex-col overflow-hidden",children:[l.jsxs("div",{className:"flex items-center justify-between px-3 py-1.5 bg-black/30 backdrop-blur-sm border-b border-white/10 shrink-0",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(_.button,{onClick:n,whileHover:{scale:1.05},whileTap:{scale:.95},className:"bg-white/15 hover:bg-white/25 text-white p-1.5 rounded-lg transition-colors",title:"Voltar ao Menu",children:l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"})})}),l.jsx("span",{className:"text-white font-bold text-sm",children:" Cat Tetris"})]}),l.jsxs("div",{className:"flex items-center gap-3 text-xs text-white/70",children:[l.jsxs("span",{className:"text-yellow-400 font-bold",children:[e.score.points.toLocaleString()," pts"]}),l.jsxs("span",{children:["Nv.",e.score.level]}),l.jsxs("span",{children:[e.score.lines," linhas"]})]}),l.jsx("div",{className:"flex items-center gap-1.5",children:l.jsx(_.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:e.isPaused?t.resume:t.pause,disabled:e.gameOver,className:"bg-white/10 hover:bg-white/20 text-white px-2.5 py-1 rounded-lg text-xs transition-colors disabled:opacity-50",children:e.isPaused?"":""})})]}),l.jsxs("div",{className:"flex-1 flex items-center justify-center overflow-hidden p-2",children:[l.jsxs("div",{className:"flex flex-col lg:flex-row gap-2 items-center justify-center",children:[l.jsxs("div",{className:"hidden lg:flex flex-col lg:flex-row gap-2 items-center justify-center",children:[l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx(Qn,{heldPiece:e.heldPiece,canHold:e.canHold}),l.jsx(qn,{score:e.score.points,level:e.score.level,lines:e.score.lines,combo:e.score.combo})]}),l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx(kn,{board:e.board,currentPiece:e.currentPiece,dropPreview:a,gameOver:e.gameOver}),l.jsx(Nb,{onMove:t.movePiece,onRotate:t.rotatePiece,onHardDrop:t.hardDrop,onPause:e.isPaused?t.resume:t.pause,onHold:t.holdPiece,isPaused:e.isPaused,gameOver:e.gameOver,canHold:e.canHold})]}),l.jsx("div",{className:"flex flex-col gap-2",children:l.jsx(Kn,{pieces:e.nextPieces})})]}),l.jsxs("div",{className:"flex lg:hidden flex-col w-full h-full","data-testid":"mobile-layout",children:[l.jsxs("div",{className:"flex justify-between items-center mb-2 px-2 bg-black/30 rounded-lg mx-2 py-1",children:[l.jsxs("div",{className:"text-white text-sm",children:[l.jsx("span",{className:"text-yellow-400 font-bold",children:e.score.points.toLocaleString()}),l.jsxs("span",{className:"text-white/60 ml-2",children:["Nv.",e.score.level]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[e.heldPiece&&l.jsx("div",{className:"text-xs text-white/60",children:""}),l.jsx("div",{className:"text-xs text-white/60",children:"Prxima:"}),l.jsx("div",{className:"bg-gray-800/50 p-1 rounded",children:e.nextPieces[0]?l.jsx("div",{className:"grid gap-0.5",style:{gridTemplateColumns:`repeat(${Math.max(...e.nextPieces[0].shape.map(g=>g.length))}, 8px)`,gridTemplateRows:`repeat(${e.nextPieces[0].shape.length}, 8px)`},children:e.nextPieces[0].shape.map((g,y)=>g.map((k,j)=>l.jsx("div",{className:"w-2 h-2 rounded-sm",style:{backgroundColor:k?Nr(e.nextPieces[0].color):"transparent",border:k?"1px solid rgba(255,255,255,0.3)":"none"},children:k&&e.nextPieces[0].emoji?l.jsx("span",{className:"text-[6px] leading-none block text-center",children:e.nextPieces[0].emoji}):null},`next-${j}-${y}`)))}):l.jsx("div",{className:"w-8 h-6 flex items-center justify-center",children:l.jsx("span",{className:"text-xs text-white/40",children:"?"})})})]})]}),l.jsxs("div",{className:"flex items-center justify-center flex-1 relative px-1",children:[l.jsxs("div",{className:"flex flex-col gap-1 mr-2",children:[l.jsx(_.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onTouchStart:()=>t.rotatePiece(),onClick:()=>t.rotatePiece(),disabled:e.gameOver,className:"bg-blue-500 text-white p-4 rounded-full shadow-lg hover:bg-blue-600 disabled:opacity-50 touch-manipulation text-lg",children:""}),l.jsx(_.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onTouchStart:()=>t.movePiece("left"),onClick:()=>t.movePiece("left"),disabled:e.gameOver,className:"bg-gray-600 text-white p-4 rounded-lg shadow-lg hover:bg-gray-700 disabled:opacity-50 touch-manipulation text-lg",children:""})]}),l.jsx("div",{className:"flex-shrink-0 mx-1",children:l.jsx(kn,{board:e.board,currentPiece:e.currentPiece,dropPreview:a,gameOver:e.gameOver})}),l.jsxs("div",{className:"flex flex-col gap-1 ml-2",children:[l.jsx(_.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onTouchStart:h,onClick:h,disabled:e.gameOver||c.hardDrop,className:`text-white p-4 rounded-full shadow-lg disabled:opacity-50 touch-manipulation text-lg ${c.hardDrop?"bg-red-400":"bg-red-500 hover:bg-red-600"}`,children:""}),l.jsx(_.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onTouchStart:()=>t.movePiece("right"),onClick:()=>t.movePiece("right"),disabled:e.gameOver,className:"bg-gray-600 text-white p-4 rounded-lg shadow-lg hover:bg-gray-700 disabled:opacity-50 touch-manipulation text-lg",children:""})]})]}),l.jsxs("div",{className:"flex justify-center gap-2 py-2 px-2",children:[l.jsx(_.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onTouchStart:()=>t.movePiece("down"),onClick:()=>t.movePiece("down"),disabled:e.gameOver,className:"bg-gray-700 text-white px-4 py-2 rounded-lg shadow-lg hover:bg-gray-600 disabled:opacity-50 touch-manipulation",children:" Acelerar"}),e.canHold&&l.jsx(_.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onTouchStart:d,onClick:d,disabled:e.gameOver||!e.canHold||c.hold,className:`text-white px-4 py-2 rounded-lg shadow-lg disabled:opacity-50 touch-manipulation ${c.hold?"bg-green-400":e.canHold?"bg-green-600 hover:bg-green-500":"bg-gray-500"}`,children:" Guardar"}),l.jsx(_.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onTouchStart:m,onClick:m,disabled:e.gameOver||c.pause,className:`text-white px-4 py-2 rounded-lg shadow-lg disabled:opacity-50 touch-manipulation ${c.pause?"bg-yellow-400":"bg-yellow-500 hover:bg-yellow-600"}`,children:e.isPaused?"":""})]})]})]}),l.jsx(we,{children:e.gameOver&&l.jsx(Ab,{score:e.score,onRestart:r,onBackToMenu:n})}),l.jsx(y0,{isConnected:s,controllerCount:i,gamepadInfo:o()})]})]})}function uk(){const[e,t]=x.useState("menu"),[n,r]=x.useState(!1),[s,i]=x.useState(!1),[o,a]=x.useState(!1),[c,u]=x.useState(!1),[h,d]=x.useState(!1),[m,v]=x.useState(!1),[w,b]=x.useState(!1),[S,p]=x.useState(!1),[f,g]=x.useState(!1),[y,k]=x.useState(!0),[j,C]=x.useState(!1),[P,N]=x.useState(null),[E,V]=x.useState(null),[K,q]=x.useState(!1),[X,le]=x.useState(!1),{gameState:I,actions:W}=ek();ue.useEffect(()=>{Gt.setGameStateProvider(()=>{try{return B.resolve("gameService").getGameState()}catch{return null}})},[]);const{settings:T,updateSettings:M}=tk(),{startBackgroundMusic:A,startGameMusic:L,stopMusic:F}=sk(),re=ue.useMemo(()=>W?{...W,togglePause:()=>{var J,Ee;I!=null&&I.isPaused?(J=W.resume)==null||J.call(W):(Ee=W.pause)==null||Ee.call(W)},isGameOver:()=>(I==null?void 0:I.gameOver)??!1,backToMenu:()=>{t("menu"),T!=null&&T.soundEnabled&&(A==null||A()),I&&!I.gameOver&&W.pause()}}:null,[W,I==null?void 0:I.isPaused,I==null?void 0:I.gameOver,T==null?void 0:T.soundEnabled,A]),{isGamepadActive:$,controllerCount:ie,processGamepadInput:z,getGamepadInfo:se}=w0(re);g0(),ok(),v0(),ik(),C0(),P0(),rk();const et=e==="game",{setDAS:Pe,setARR:Ae}=T0(W,I,et);ue.useEffect(()=>{(T==null?void 0:T.das)!=null&&Pe(T.das),(T==null?void 0:T.arr)!=null&&Ae(T.arr)},[T==null?void 0:T.das,T==null?void 0:T.arr,Pe,Ae]),ue.useEffect(()=>{const J=Ee=>{try{B.resolve("gameService").setGameMode(Ee.detail.mode)}catch{}};return window.addEventListener("gameModeChanged",J),()=>window.removeEventListener("gameModeChanged",J)},[]),ue.useEffect(()=>{I&&!I.gameOver&&I.score.points>0&&I.isPlaying?u(!0):u(!1)},[I]),ue.useEffect(()=>(A&&F&&(T!=null&&T.soundEnabled)?e==="menu"?A():e==="game"&&L():F(),()=>{F()}),[e,T==null?void 0:T.soundEnabled,A,L,F]);const ze=n||w||h||m||S||f||j||s;ue.useEffect(()=>{if($&&e==="game"&&!ze&&!(I!=null&&I.gameOver)){const J=setInterval(()=>{z()},16);return()=>clearInterval(J)}},[$,e,z,ze,I==null?void 0:I.gameOver]),ue.useEffect(()=>{const J=Qt=>{Qt.preventDefault(),a(!0)},Ee=()=>{a(!1),i(!1)};return window.addEventListener("beforeinstallprompt",J),window.addEventListener("appinstalled",Ee),window.matchMedia("(display-mode: standalone)").matches&&a(!1),()=>{window.removeEventListener("beforeinstallprompt",J),window.removeEventListener("appinstalled",Ee)}},[]);const H=J=>{M(J),J.das!=null&&Pe(J.das),J.arr!=null&&Ae(J.arr),J.soundEnabled?e==="menu"?A==null||A():e==="game"&&(L==null||L()):F==null||F()},Z=()=>{t("game"),T!=null&&T.soundEnabled&&(L==null||L()),I!=null&&I.gameOver?W.restart():I!=null&&I.isPaused?W.resume():I!=null&&I.isPlaying||W.restart()},Te=()=>{t("game"),T!=null&&T.soundEnabled&&(L==null||L()),I!=null&&I.isPaused&&W.resume()},ee=()=>{t("game"),T!=null&&T.soundEnabled&&(L==null||L()),W.restart()},te=()=>{W.restart(),t("game")},Xs=()=>{t("menu"),T!=null&&T.soundEnabled&&(A==null||A()),I&&!I.gameOver&&W.pause()},Bo=()=>{i(!0)};return X?l.jsx(DS,{onExit:()=>le(!1)}):K?l.jsx(PS,{onClose:()=>q(!1)}):E?l.jsx(SS,{mode:E.mode,aiDifficulty:E.aiDifficulty,ai1Difficulty:E.ai1Difficulty,ai2Difficulty:E.ai2Difficulty,onExit:()=>{V(null),t("menu")}}):e==="menu"?l.jsxs(l.Fragment,{children:[l.jsx(gS,{onStartGame:c?Te:Z,onNewGame:ee,onShowSettings:()=>r(!0),onShowGameModes:()=>p(!0),onShowShop:()=>b(!0),onShowMissions:()=>d(!0),onShowAchievements:()=>v(!0),onShowMultiplayer:()=>g(!0),onShowTutorial:()=>k(!0),onShowTutorialHub:()=>C(!0),onShowAIShowcase:()=>q(!0),onShowCreatorMode:()=>le(!0),onShowInstallPrompt:Bo,canInstallPWA:o,hasActiveGame:c,gameState:I}),l.jsx(we,{children:f&&l.jsx(HS,{onClose:()=>g(!1),onStartMatch:J=>{g(!1),V(J)}})}),l.jsx(we,{children:S&&l.jsx(VS,{onClose:()=>p(!1),onStartGame:ee})}),l.jsx(we,{children:w&&l.jsx(GS,{onClose:()=>b(!1)})}),l.jsx(we,{children:h&&l.jsx(yS,{onClose:()=>d(!1)})}),l.jsx(we,{children:m&&l.jsx(wS,{onClose:()=>v(!1)})}),l.jsx(we,{children:j&&l.jsx(JS,{tutorialService:B.resolve("tutorialService"),onClose:()=>C(!1),onLessonComplete:J=>{if(!(!J||!J.rewards)){try{const Ee=B.resolve("currencyService");J.rewards.fishCoins&&Ee.addFish(J.rewards.fishCoins,`Tutorial: ${J.lessonTitle||"Lesson"}`)}catch{}try{J.rewards.xp&&B.resolve("playerStatsService").incrementStat("totalPlayTime",J.rewards.xp)}catch{}try{if(J.rewards.achievement){const Ee=B.resolve("achievementsService"),Qt=B.resolve("playerStatsService");Ee.checkAchievements(Qt.getStats())}}catch{}N(J)}}})}),l.jsx(we,{children:l.jsx(x.Suspense,{fallback:l.jsx(lk,{}),children:l.jsx(ak,{isOpen:n,settings:T||{},onSettingsChange:H,onClose:()=>r(!1)})})}),s&&l.jsx(xS,{onClose:()=>i(!1)}),l.jsx(bS,{}),l.jsx(we,{children:P&&l.jsx(ZS,{reward:P,onClose:()=>N(null)})})]}):I?l.jsxs(l.Fragment,{children:[l.jsx(ck,{gameState:I,actions:W,onBackToMenu:Xs,onRestart:te,isGamepadActive:$,controllerCount:ie,getGamepadInfo:se}),l.jsx(we,{children:y&&l.jsx(US,{onComplete:()=>k(!1)})})]}):l.jsx("div",{className:"h-screen cat-bg flex items-center justify-center overflow-hidden",children:l.jsx("div",{className:"text-white text-xl",children:"Carregando..."})})}function dk(){return l.jsxs(Rb,{children:[l.jsx(uk,{}),l.jsx(vS,{})]})}function hk(e={}){const{immediate:t=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:s,onRegisteredSW:i,onRegisterError:o}=e;let a,c;const u=async(d=!0)=>{await c};async function h(){if("serviceWorker"in navigator){if(a=await Rc(()=>import("./workbox-window.prod.es5-5ffdab76.js"),[]).then(({Workbox:d})=>new d("/cat-tetris/sw.js",{scope:"/cat-tetris/",type:"classic"})).catch(d=>{o==null||o(d)}),!a)return;a.addEventListener("activated",d=>{(d.isUpdate||d.isExternal)&&window.location.reload()}),a.addEventListener("installed",d=>{d.isUpdate||r==null||r()}),a.register({immediate:t}).then(d=>{i?i("/cat-tetris/sw.js",d):s==null||s(d)}).catch(d=>{o==null||o(d)})}}return c=h(),u}hk({onRegisteredSW(e,t){t&&(setInterval(()=>{t.update()},60*60*1e3),"periodicSync"in t&&t.periodicSync.register("content-sync",{minInterval:24*60*60*1e3}).catch(()=>{}))},onOfflineReady(){console.log("Cat Tetris pronto para uso offline!")}});Da.createRoot(document.getElementById("root")).render(l.jsx(dk,{}));export{we as A,l as j,_ as m,x as r,rr as u};
