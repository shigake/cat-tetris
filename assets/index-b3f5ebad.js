var f0=Object.defineProperty;var m0=(e,t,n)=>t in e?f0(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var qs=(e,t,n)=>(m0(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function p0(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var bh={exports:{}},fo={},Sh={exports:{}},X={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rs=Symbol.for("react.element"),g0=Symbol.for("react.portal"),v0=Symbol.for("react.fragment"),x0=Symbol.for("react.strict_mode"),y0=Symbol.for("react.profiler"),w0=Symbol.for("react.provider"),b0=Symbol.for("react.context"),S0=Symbol.for("react.forward_ref"),k0=Symbol.for("react.suspense"),j0=Symbol.for("react.memo"),C0=Symbol.for("react.lazy"),Yc=Symbol.iterator;function P0(e){return e===null||typeof e!="object"?null:(e=Yc&&e[Yc]||e["@@iterator"],typeof e=="function"?e:null)}var kh={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},jh=Object.assign,Ch={};function Rr(e,t,n){this.props=e,this.context=t,this.refs=Ch,this.updater=n||kh}Rr.prototype.isReactComponent={};Rr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Rr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Ph(){}Ph.prototype=Rr.prototype;function Ll(e,t,n){this.props=e,this.context=t,this.refs=Ch,this.updater=n||kh}var Rl=Ll.prototype=new Ph;Rl.constructor=Ll;jh(Rl,Rr.prototype);Rl.isPureReactComponent=!0;var Jc=Array.isArray,Th=Object.prototype.hasOwnProperty,Dl={current:null},Eh={key:!0,ref:!0,__self:!0,__source:!0};function Nh(e,t,n){var r,s={},i=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)Th.call(t,r)&&!Eh.hasOwnProperty(r)&&(s[r]=t[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var c=Array(a),u=0;u<a;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Rs,type:e,key:i,ref:o,props:s,_owner:Dl.current}}function T0(e,t){return{$$typeof:Rs,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Il(e){return typeof e=="object"&&e!==null&&e.$$typeof===Rs}function E0(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Zc=/\/+/g;function Fo(e,t){return typeof e=="object"&&e!==null&&e.key!=null?E0(""+e.key):t.toString(36)}function vi(e,t,n,r,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Rs:case g0:o=!0}}if(o)return o=e,s=s(o),e=r===""?"."+Fo(o,0):r,Jc(s)?(n="",e!=null&&(n=e.replace(Zc,"$&/")+"/"),vi(s,t,n,"",function(u){return u})):s!=null&&(Il(s)&&(s=T0(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Zc,"$&/")+"/")+e)),t.push(s)),1;if(o=0,r=r===""?".":r+":",Jc(e))for(var a=0;a<e.length;a++){i=e[a];var c=r+Fo(i,a);o+=vi(i,t,n,c,s)}else if(c=P0(e),typeof c=="function")for(e=c.call(e),a=0;!(i=e.next()).done;)i=i.value,c=r+Fo(i,a++),o+=vi(i,t,n,c,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Ks(e,t,n){if(e==null)return e;var r=[],s=0;return vi(e,r,"","",function(i){return t.call(n,i,s++)}),r}function N0(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Be={current:null},xi={transition:null},_0={ReactCurrentDispatcher:Be,ReactCurrentBatchConfig:xi,ReactCurrentOwner:Dl};function _h(){throw Error("act(...) is not supported in production builds of React.")}X.Children={map:Ks,forEach:function(e,t,n){Ks(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Ks(e,function(){t++}),t},toArray:function(e){return Ks(e,function(t){return t})||[]},only:function(e){if(!Il(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};X.Component=Rr;X.Fragment=v0;X.Profiler=y0;X.PureComponent=Ll;X.StrictMode=x0;X.Suspense=k0;X.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_0;X.act=_h;X.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=jh({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=Dl.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(c in t)Th.call(t,c)&&!Eh.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&a!==void 0?a[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var u=0;u<c;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Rs,type:e.type,key:s,ref:i,props:r,_owner:o}};X.createContext=function(e){return e={$$typeof:b0,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:w0,_context:e},e.Consumer=e};X.createElement=Nh;X.createFactory=function(e){var t=Nh.bind(null,e);return t.type=e,t};X.createRef=function(){return{current:null}};X.forwardRef=function(e){return{$$typeof:S0,render:e}};X.isValidElement=Il;X.lazy=function(e){return{$$typeof:C0,_payload:{_status:-1,_result:e},_init:N0}};X.memo=function(e,t){return{$$typeof:j0,type:e,compare:t===void 0?null:t}};X.startTransition=function(e){var t=xi.transition;xi.transition={};try{e()}finally{xi.transition=t}};X.unstable_act=_h;X.useCallback=function(e,t){return Be.current.useCallback(e,t)};X.useContext=function(e){return Be.current.useContext(e)};X.useDebugValue=function(){};X.useDeferredValue=function(e){return Be.current.useDeferredValue(e)};X.useEffect=function(e,t){return Be.current.useEffect(e,t)};X.useId=function(){return Be.current.useId()};X.useImperativeHandle=function(e,t,n){return Be.current.useImperativeHandle(e,t,n)};X.useInsertionEffect=function(e,t){return Be.current.useInsertionEffect(e,t)};X.useLayoutEffect=function(e,t){return Be.current.useLayoutEffect(e,t)};X.useMemo=function(e,t){return Be.current.useMemo(e,t)};X.useReducer=function(e,t,n){return Be.current.useReducer(e,t,n)};X.useRef=function(e){return Be.current.useRef(e)};X.useState=function(e){return Be.current.useState(e)};X.useSyncExternalStore=function(e,t,n){return Be.current.useSyncExternalStore(e,t,n)};X.useTransition=function(){return Be.current.useTransition()};X.version="18.3.1";Sh.exports=X;var x=Sh.exports;const ce=p0(x);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var A0=x,M0=Symbol.for("react.element"),L0=Symbol.for("react.fragment"),R0=Object.prototype.hasOwnProperty,D0=A0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,I0={key:!0,ref:!0,__self:!0,__source:!0};function Ah(e,t,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)R0.call(t,r)&&!I0.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:M0,type:e,key:i,ref:o,props:s,_owner:D0.current}}fo.Fragment=L0;fo.jsx=Ah;fo.jsxs=Ah;bh.exports=fo;var l=bh.exports,Ta={},Mh={exports:{}},Ze={},Lh={exports:{}},Rh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(T,F){var V=T.length;T.push(F);e:for(;0<V;){var D=V-1>>>1,K=T[D];if(0<s(K,F))T[D]=F,T[V]=K,V=D;else break e}}function n(T){return T.length===0?null:T[0]}function r(T){if(T.length===0)return null;var F=T[0],V=T.pop();if(V!==F){T[0]=V;e:for(var D=0,K=T.length,Te=K>>>1;D<Te;){var je=2*(D+1)-1,L=T[je],M=je+1,O=T[M];if(0>s(L,V))M<K&&0>s(O,L)?(T[D]=O,T[M]=V,D=M):(T[D]=L,T[je]=V,D=je);else if(M<K&&0>s(O,V))T[D]=O,T[M]=V,D=M;else break e}}return F}function s(T,F){var V=T.sortIndex-F.sortIndex;return V!==0?V:T.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var c=[],u=[],h=1,d=null,f=3,y=!1,v=!1,w=!1,S=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(T){for(var F=n(u);F!==null;){if(F.callback===null)r(u);else if(F.startTime<=T)r(u),F.sortIndex=F.expirationTime,t(c,F);else break;F=n(u)}}function b(T){if(w=!1,g(T),!v)if(n(c)!==null)v=!0,G(j);else{var F=n(u);F!==null&&q(b,F.startTime-T)}}function j(T,F){v=!1,w&&(w=!1,p(P),P=-1),y=!0;var V=f;try{for(g(F),d=n(c);d!==null&&(!(d.expirationTime>F)||T&&!H());){var D=d.callback;if(typeof D=="function"){d.callback=null,f=d.priorityLevel;var K=D(d.expirationTime<=F);F=e.unstable_now(),typeof K=="function"?d.callback=K:d===n(c)&&r(c),g(F)}else r(c);d=n(c)}if(d!==null)var Te=!0;else{var je=n(u);je!==null&&q(b,je.startTime-F),Te=!1}return Te}finally{d=null,f=V,y=!1}}var k=!1,C=null,P=-1,N=5,A=-1;function H(){return!(e.unstable_now()-A<N)}function Y(){if(C!==null){var T=e.unstable_now();A=T;var F=!0;try{F=C(!0,T)}finally{F?Q():(k=!1,C=null)}}else k=!1}var Q;if(typeof m=="function")Q=function(){m(Y)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,J=Z.port2;Z.port1.onmessage=Y,Q=function(){J.postMessage(null)}}else Q=function(){S(Y,0)};function G(T){C=T,k||(k=!0,Q())}function q(T,F){P=S(function(){T(e.unstable_now())},F)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(T){T.callback=null},e.unstable_continueExecution=function(){v||y||(v=!0,G(j))},e.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<T?Math.floor(1e3/T):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(T){switch(f){case 1:case 2:case 3:var F=3;break;default:F=f}var V=f;f=F;try{return T()}finally{f=V}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(T,F){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var V=f;f=T;try{return F()}finally{f=V}},e.unstable_scheduleCallback=function(T,F,V){var D=e.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?D+V:D):V=D,T){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=V+K,T={id:h++,callback:F,priorityLevel:T,startTime:V,expirationTime:K,sortIndex:-1},V>D?(T.sortIndex=V,t(u,T),n(c)===null&&T===n(u)&&(w?(p(P),P=-1):w=!0,q(b,V-D))):(T.sortIndex=K,t(c,T),v||y||(v=!0,G(j))),T},e.unstable_shouldYield=H,e.unstable_wrapCallback=function(T){var F=f;return function(){var V=f;f=F;try{return T.apply(this,arguments)}finally{f=V}}}})(Rh);Lh.exports=Rh;var O0=Lh.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F0=x,Ye=O0;function _(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Dh=new Set,ms={};function Wn(e,t){jr(e,t),jr(e+"Capture",t)}function jr(e,t){for(ms[e]=t,e=0;e<t.length;e++)Dh.add(t[e])}var Ft=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ea=Object.prototype.hasOwnProperty,V0=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,eu={},tu={};function B0(e){return Ea.call(tu,e)?!0:Ea.call(eu,e)?!1:V0.test(e)?tu[e]=!0:(eu[e]=!0,!1)}function G0(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function z0(e,t,n,r){if(t===null||typeof t>"u"||G0(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ge(e,t,n,r,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var _e={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){_e[e]=new Ge(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];_e[t]=new Ge(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){_e[e]=new Ge(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){_e[e]=new Ge(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){_e[e]=new Ge(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){_e[e]=new Ge(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){_e[e]=new Ge(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){_e[e]=new Ge(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){_e[e]=new Ge(e,5,!1,e.toLowerCase(),null,!1,!1)});var Ol=/[\-:]([a-z])/g;function Fl(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Ol,Fl);_e[t]=new Ge(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Ol,Fl);_e[t]=new Ge(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Ol,Fl);_e[t]=new Ge(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){_e[e]=new Ge(e,1,!1,e.toLowerCase(),null,!1,!1)});_e.xlinkHref=new Ge("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){_e[e]=new Ge(e,1,!1,e.toLowerCase(),null,!0,!0)});function Vl(e,t,n,r){var s=_e.hasOwnProperty(t)?_e[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(z0(t,n,s,r)&&(n=null),r||s===null?B0(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Ht=F0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Qs=Symbol.for("react.element"),Jn=Symbol.for("react.portal"),Zn=Symbol.for("react.fragment"),Bl=Symbol.for("react.strict_mode"),Na=Symbol.for("react.profiler"),Ih=Symbol.for("react.provider"),Oh=Symbol.for("react.context"),Gl=Symbol.for("react.forward_ref"),_a=Symbol.for("react.suspense"),Aa=Symbol.for("react.suspense_list"),zl=Symbol.for("react.memo"),qt=Symbol.for("react.lazy"),Fh=Symbol.for("react.offscreen"),nu=Symbol.iterator;function Vr(e){return e===null||typeof e!="object"?null:(e=nu&&e[nu]||e["@@iterator"],typeof e=="function"?e:null)}var me=Object.assign,Vo;function Qr(e){if(Vo===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Vo=t&&t[1]||""}return`
`+Vo+e}var Bo=!1;function Go(e,t){if(!e||Bo)return"";Bo=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var c=`
`+s[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=a);break}}}finally{Bo=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Qr(e):""}function H0(e){switch(e.tag){case 5:return Qr(e.type);case 16:return Qr("Lazy");case 13:return Qr("Suspense");case 19:return Qr("SuspenseList");case 0:case 2:case 15:return e=Go(e.type,!1),e;case 11:return e=Go(e.type.render,!1),e;case 1:return e=Go(e.type,!0),e;default:return""}}function Ma(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Zn:return"Fragment";case Jn:return"Portal";case Na:return"Profiler";case Bl:return"StrictMode";case _a:return"Suspense";case Aa:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Oh:return(e.displayName||"Context")+".Consumer";case Ih:return(e._context.displayName||"Context")+".Provider";case Gl:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case zl:return t=e.displayName||null,t!==null?t:Ma(e.type)||"Memo";case qt:t=e._payload,e=e._init;try{return Ma(e(t))}catch{}}return null}function U0(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ma(t);case 8:return t===Bl?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function dn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Vh(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function $0(e){var t=Vh(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Xs(e){e._valueTracker||(e._valueTracker=$0(e))}function Bh(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Vh(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Mi(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function La(e,t){var n=t.checked;return me({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function ru(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=dn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Gh(e,t){t=t.checked,t!=null&&Vl(e,"checked",t,!1)}function Ra(e,t){Gh(e,t);var n=dn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Da(e,t.type,n):t.hasOwnProperty("defaultValue")&&Da(e,t.type,dn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function su(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Da(e,t,n){(t!=="number"||Mi(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Xr=Array.isArray;function gr(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+dn(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Ia(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(_(91));return me({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function iu(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(_(92));if(Xr(n)){if(1<n.length)throw Error(_(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:dn(n)}}function zh(e,t){var n=dn(t.value),r=dn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function ou(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Hh(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Oa(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Hh(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ys,Uh=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ys=Ys||document.createElement("div"),Ys.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ys.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ps(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var es={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},W0=["Webkit","ms","Moz","O"];Object.keys(es).forEach(function(e){W0.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),es[t]=es[e]})});function $h(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||es.hasOwnProperty(e)&&es[e]?(""+t).trim():t+"px"}function Wh(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=$h(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var q0=me({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Fa(e,t){if(t){if(q0[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(_(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(_(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(_(61))}if(t.style!=null&&typeof t.style!="object")throw Error(_(62))}}function Va(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ba=null;function Hl(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ga=null,vr=null,xr=null;function au(e){if(e=Os(e)){if(typeof Ga!="function")throw Error(_(280));var t=e.stateNode;t&&(t=xo(t),Ga(e.stateNode,e.type,t))}}function qh(e){vr?xr?xr.push(e):xr=[e]:vr=e}function Kh(){if(vr){var e=vr,t=xr;if(xr=vr=null,au(e),t)for(e=0;e<t.length;e++)au(t[e])}}function Qh(e,t){return e(t)}function Xh(){}var zo=!1;function Yh(e,t,n){if(zo)return e(t,n);zo=!0;try{return Qh(e,t,n)}finally{zo=!1,(vr!==null||xr!==null)&&(Xh(),Kh())}}function gs(e,t){var n=e.stateNode;if(n===null)return null;var r=xo(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(_(231,t,typeof n));return n}var za=!1;if(Ft)try{var Br={};Object.defineProperty(Br,"passive",{get:function(){za=!0}}),window.addEventListener("test",Br,Br),window.removeEventListener("test",Br,Br)}catch{za=!1}function K0(e,t,n,r,s,i,o,a,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(h){this.onError(h)}}var ts=!1,Li=null,Ri=!1,Ha=null,Q0={onError:function(e){ts=!0,Li=e}};function X0(e,t,n,r,s,i,o,a,c){ts=!1,Li=null,K0.apply(Q0,arguments)}function Y0(e,t,n,r,s,i,o,a,c){if(X0.apply(this,arguments),ts){if(ts){var u=Li;ts=!1,Li=null}else throw Error(_(198));Ri||(Ri=!0,Ha=u)}}function qn(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Jh(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function lu(e){if(qn(e)!==e)throw Error(_(188))}function J0(e){var t=e.alternate;if(!t){if(t=qn(e),t===null)throw Error(_(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return lu(s),e;if(i===r)return lu(s),t;i=i.sibling}throw Error(_(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(_(189))}}if(n.alternate!==r)throw Error(_(190))}if(n.tag!==3)throw Error(_(188));return n.stateNode.current===n?e:t}function Zh(e){return e=J0(e),e!==null?ef(e):null}function ef(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=ef(e);if(t!==null)return t;e=e.sibling}return null}var tf=Ye.unstable_scheduleCallback,cu=Ye.unstable_cancelCallback,Z0=Ye.unstable_shouldYield,eg=Ye.unstable_requestPaint,ye=Ye.unstable_now,tg=Ye.unstable_getCurrentPriorityLevel,Ul=Ye.unstable_ImmediatePriority,nf=Ye.unstable_UserBlockingPriority,Di=Ye.unstable_NormalPriority,ng=Ye.unstable_LowPriority,rf=Ye.unstable_IdlePriority,mo=null,jt=null;function rg(e){if(jt&&typeof jt.onCommitFiberRoot=="function")try{jt.onCommitFiberRoot(mo,e,void 0,(e.current.flags&128)===128)}catch{}}var gt=Math.clz32?Math.clz32:og,sg=Math.log,ig=Math.LN2;function og(e){return e>>>=0,e===0?32:31-(sg(e)/ig|0)|0}var Js=64,Zs=4194304;function Yr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ii(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Yr(a):(i&=o,i!==0&&(r=Yr(i)))}else o=n&~s,o!==0?r=Yr(o):i!==0&&(r=Yr(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-gt(t),s=1<<n,r|=e[n],t&=~s;return r}function ag(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function lg(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-gt(i),a=1<<o,c=s[o];c===-1?(!(a&n)||a&r)&&(s[o]=ag(a,t)):c<=t&&(e.expiredLanes|=a),i&=~a}}function Ua(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function sf(){var e=Js;return Js<<=1,!(Js&4194240)&&(Js=64),e}function Ho(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ds(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-gt(t),e[t]=n}function cg(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-gt(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}function $l(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-gt(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var re=0;function of(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var af,Wl,lf,cf,uf,$a=!1,ei=[],en=null,tn=null,nn=null,vs=new Map,xs=new Map,Xt=[],ug="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function uu(e,t){switch(e){case"focusin":case"focusout":en=null;break;case"dragenter":case"dragleave":tn=null;break;case"mouseover":case"mouseout":nn=null;break;case"pointerover":case"pointerout":vs.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":xs.delete(t.pointerId)}}function Gr(e,t,n,r,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},t!==null&&(t=Os(t),t!==null&&Wl(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function dg(e,t,n,r,s){switch(t){case"focusin":return en=Gr(en,e,t,n,r,s),!0;case"dragenter":return tn=Gr(tn,e,t,n,r,s),!0;case"mouseover":return nn=Gr(nn,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return vs.set(i,Gr(vs.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,xs.set(i,Gr(xs.get(i)||null,e,t,n,r,s)),!0}return!1}function df(e){var t=Nn(e.target);if(t!==null){var n=qn(t);if(n!==null){if(t=n.tag,t===13){if(t=Jh(n),t!==null){e.blockedOn=t,uf(e.priority,function(){lf(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function yi(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Wa(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Ba=r,n.target.dispatchEvent(r),Ba=null}else return t=Os(n),t!==null&&Wl(t),e.blockedOn=n,!1;t.shift()}return!0}function du(e,t,n){yi(e)&&n.delete(t)}function hg(){$a=!1,en!==null&&yi(en)&&(en=null),tn!==null&&yi(tn)&&(tn=null),nn!==null&&yi(nn)&&(nn=null),vs.forEach(du),xs.forEach(du)}function zr(e,t){e.blockedOn===t&&(e.blockedOn=null,$a||($a=!0,Ye.unstable_scheduleCallback(Ye.unstable_NormalPriority,hg)))}function ys(e){function t(s){return zr(s,e)}if(0<ei.length){zr(ei[0],e);for(var n=1;n<ei.length;n++){var r=ei[n];r.blockedOn===e&&(r.blockedOn=null)}}for(en!==null&&zr(en,e),tn!==null&&zr(tn,e),nn!==null&&zr(nn,e),vs.forEach(t),xs.forEach(t),n=0;n<Xt.length;n++)r=Xt[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Xt.length&&(n=Xt[0],n.blockedOn===null);)df(n),n.blockedOn===null&&Xt.shift()}var yr=Ht.ReactCurrentBatchConfig,Oi=!0;function fg(e,t,n,r){var s=re,i=yr.transition;yr.transition=null;try{re=1,ql(e,t,n,r)}finally{re=s,yr.transition=i}}function mg(e,t,n,r){var s=re,i=yr.transition;yr.transition=null;try{re=4,ql(e,t,n,r)}finally{re=s,yr.transition=i}}function ql(e,t,n,r){if(Oi){var s=Wa(e,t,n,r);if(s===null)Zo(e,t,r,Fi,n),uu(e,r);else if(dg(s,e,t,n,r))r.stopPropagation();else if(uu(e,r),t&4&&-1<ug.indexOf(e)){for(;s!==null;){var i=Os(s);if(i!==null&&af(i),i=Wa(e,t,n,r),i===null&&Zo(e,t,r,Fi,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Zo(e,t,r,null,n)}}var Fi=null;function Wa(e,t,n,r){if(Fi=null,e=Hl(r),e=Nn(e),e!==null)if(t=qn(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Jh(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Fi=e,null}function hf(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(tg()){case Ul:return 1;case nf:return 4;case Di:case ng:return 16;case rf:return 536870912;default:return 16}default:return 16}}var Jt=null,Kl=null,wi=null;function ff(){if(wi)return wi;var e,t=Kl,n=t.length,r,s="value"in Jt?Jt.value:Jt.textContent,i=s.length;for(e=0;e<n&&t[e]===s[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===s[i-r];r++);return wi=s.slice(e,1<r?1-r:void 0)}function bi(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ti(){return!0}function hu(){return!1}function et(e){function t(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ti:hu,this.isPropagationStopped=hu,this}return me(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ti)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ti)},persist:function(){},isPersistent:ti}),t}var Dr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ql=et(Dr),Is=me({},Dr,{view:0,detail:0}),pg=et(Is),Uo,$o,Hr,po=me({},Is,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xl,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Hr&&(Hr&&e.type==="mousemove"?(Uo=e.screenX-Hr.screenX,$o=e.screenY-Hr.screenY):$o=Uo=0,Hr=e),Uo)},movementY:function(e){return"movementY"in e?e.movementY:$o}}),fu=et(po),gg=me({},po,{dataTransfer:0}),vg=et(gg),xg=me({},Is,{relatedTarget:0}),Wo=et(xg),yg=me({},Dr,{animationName:0,elapsedTime:0,pseudoElement:0}),wg=et(yg),bg=me({},Dr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Sg=et(bg),kg=me({},Dr,{data:0}),mu=et(kg),jg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Cg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Pg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tg(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Pg[e])?!!t[e]:!1}function Xl(){return Tg}var Eg=me({},Is,{key:function(e){if(e.key){var t=jg[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=bi(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Cg[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xl,charCode:function(e){return e.type==="keypress"?bi(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?bi(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Ng=et(Eg),_g=me({},po,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),pu=et(_g),Ag=me({},Is,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xl}),Mg=et(Ag),Lg=me({},Dr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Rg=et(Lg),Dg=me({},po,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ig=et(Dg),Og=[9,13,27,32],Yl=Ft&&"CompositionEvent"in window,ns=null;Ft&&"documentMode"in document&&(ns=document.documentMode);var Fg=Ft&&"TextEvent"in window&&!ns,mf=Ft&&(!Yl||ns&&8<ns&&11>=ns),gu=String.fromCharCode(32),vu=!1;function pf(e,t){switch(e){case"keyup":return Og.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gf(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var er=!1;function Vg(e,t){switch(e){case"compositionend":return gf(t);case"keypress":return t.which!==32?null:(vu=!0,gu);case"textInput":return e=t.data,e===gu&&vu?null:e;default:return null}}function Bg(e,t){if(er)return e==="compositionend"||!Yl&&pf(e,t)?(e=ff(),wi=Kl=Jt=null,er=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return mf&&t.locale!=="ko"?null:t.data;default:return null}}var Gg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Gg[e.type]:t==="textarea"}function vf(e,t,n,r){qh(r),t=Vi(t,"onChange"),0<t.length&&(n=new Ql("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var rs=null,ws=null;function zg(e){Ef(e,0)}function go(e){var t=rr(e);if(Bh(t))return e}function Hg(e,t){if(e==="change")return t}var xf=!1;if(Ft){var qo;if(Ft){var Ko="oninput"in document;if(!Ko){var yu=document.createElement("div");yu.setAttribute("oninput","return;"),Ko=typeof yu.oninput=="function"}qo=Ko}else qo=!1;xf=qo&&(!document.documentMode||9<document.documentMode)}function wu(){rs&&(rs.detachEvent("onpropertychange",yf),ws=rs=null)}function yf(e){if(e.propertyName==="value"&&go(ws)){var t=[];vf(t,ws,e,Hl(e)),Yh(zg,t)}}function Ug(e,t,n){e==="focusin"?(wu(),rs=t,ws=n,rs.attachEvent("onpropertychange",yf)):e==="focusout"&&wu()}function $g(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return go(ws)}function Wg(e,t){if(e==="click")return go(t)}function qg(e,t){if(e==="input"||e==="change")return go(t)}function Kg(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var xt=typeof Object.is=="function"?Object.is:Kg;function bs(e,t){if(xt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Ea.call(t,s)||!xt(e[s],t[s]))return!1}return!0}function bu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Su(e,t){var n=bu(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=bu(n)}}function wf(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?wf(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function bf(){for(var e=window,t=Mi();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Mi(e.document)}return t}function Jl(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Qg(e){var t=bf(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&wf(n.ownerDocument.documentElement,n)){if(r!==null&&Jl(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=Su(n,i);var o=Su(n,r);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Xg=Ft&&"documentMode"in document&&11>=document.documentMode,tr=null,qa=null,ss=null,Ka=!1;function ku(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ka||tr==null||tr!==Mi(r)||(r=tr,"selectionStart"in r&&Jl(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ss&&bs(ss,r)||(ss=r,r=Vi(qa,"onSelect"),0<r.length&&(t=new Ql("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=tr)))}function ni(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var nr={animationend:ni("Animation","AnimationEnd"),animationiteration:ni("Animation","AnimationIteration"),animationstart:ni("Animation","AnimationStart"),transitionend:ni("Transition","TransitionEnd")},Qo={},Sf={};Ft&&(Sf=document.createElement("div").style,"AnimationEvent"in window||(delete nr.animationend.animation,delete nr.animationiteration.animation,delete nr.animationstart.animation),"TransitionEvent"in window||delete nr.transitionend.transition);function vo(e){if(Qo[e])return Qo[e];if(!nr[e])return e;var t=nr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Sf)return Qo[e]=t[n];return e}var kf=vo("animationend"),jf=vo("animationiteration"),Cf=vo("animationstart"),Pf=vo("transitionend"),Tf=new Map,ju="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function vn(e,t){Tf.set(e,t),Wn(t,[e])}for(var Xo=0;Xo<ju.length;Xo++){var Yo=ju[Xo],Yg=Yo.toLowerCase(),Jg=Yo[0].toUpperCase()+Yo.slice(1);vn(Yg,"on"+Jg)}vn(kf,"onAnimationEnd");vn(jf,"onAnimationIteration");vn(Cf,"onAnimationStart");vn("dblclick","onDoubleClick");vn("focusin","onFocus");vn("focusout","onBlur");vn(Pf,"onTransitionEnd");jr("onMouseEnter",["mouseout","mouseover"]);jr("onMouseLeave",["mouseout","mouseover"]);jr("onPointerEnter",["pointerout","pointerover"]);jr("onPointerLeave",["pointerout","pointerover"]);Wn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Wn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Wn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Wn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Wn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Wn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Jr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Zg=new Set("cancel close invalid load scroll toggle".split(" ").concat(Jr));function Cu(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Y0(r,t,void 0,e),e.currentTarget=null}function Ef(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,u=a.currentTarget;if(a=a.listener,c!==i&&s.isPropagationStopped())break e;Cu(s,a,u),i=c}else for(o=0;o<r.length;o++){if(a=r[o],c=a.instance,u=a.currentTarget,a=a.listener,c!==i&&s.isPropagationStopped())break e;Cu(s,a,u),i=c}}}if(Ri)throw e=Ha,Ri=!1,Ha=null,e}function oe(e,t){var n=t[Za];n===void 0&&(n=t[Za]=new Set);var r=e+"__bubble";n.has(r)||(Nf(t,e,2,!1),n.add(r))}function Jo(e,t,n){var r=0;t&&(r|=4),Nf(n,e,r,t)}var ri="_reactListening"+Math.random().toString(36).slice(2);function Ss(e){if(!e[ri]){e[ri]=!0,Dh.forEach(function(n){n!=="selectionchange"&&(Zg.has(n)||Jo(n,!1,e),Jo(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ri]||(t[ri]=!0,Jo("selectionchange",!1,t))}}function Nf(e,t,n,r){switch(hf(t)){case 1:var s=fg;break;case 4:s=mg;break;default:s=ql}n=s.bind(null,t,n,e),s=void 0,!za||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Zo(e,t,n,r,s){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Nn(a),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}a=a.parentNode}}r=r.return}Yh(function(){var u=i,h=Hl(n),d=[];e:{var f=Tf.get(e);if(f!==void 0){var y=Ql,v=e;switch(e){case"keypress":if(bi(n)===0)break e;case"keydown":case"keyup":y=Ng;break;case"focusin":v="focus",y=Wo;break;case"focusout":v="blur",y=Wo;break;case"beforeblur":case"afterblur":y=Wo;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=fu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=vg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=Mg;break;case kf:case jf:case Cf:y=wg;break;case Pf:y=Rg;break;case"scroll":y=pg;break;case"wheel":y=Ig;break;case"copy":case"cut":case"paste":y=Sg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=pu}var w=(t&4)!==0,S=!w&&e==="scroll",p=w?f!==null?f+"Capture":null:f;w=[];for(var m=u,g;m!==null;){g=m;var b=g.stateNode;if(g.tag===5&&b!==null&&(g=b,p!==null&&(b=gs(m,p),b!=null&&w.push(ks(m,b,g)))),S)break;m=m.return}0<w.length&&(f=new y(f,v,null,n,h),d.push({event:f,listeners:w}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",y=e==="mouseout"||e==="pointerout",f&&n!==Ba&&(v=n.relatedTarget||n.fromElement)&&(Nn(v)||v[Vt]))break e;if((y||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,y?(v=n.relatedTarget||n.toElement,y=u,v=v?Nn(v):null,v!==null&&(S=qn(v),v!==S||v.tag!==5&&v.tag!==6)&&(v=null)):(y=null,v=u),y!==v)){if(w=fu,b="onMouseLeave",p="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(w=pu,b="onPointerLeave",p="onPointerEnter",m="pointer"),S=y==null?f:rr(y),g=v==null?f:rr(v),f=new w(b,m+"leave",y,n,h),f.target=S,f.relatedTarget=g,b=null,Nn(h)===u&&(w=new w(p,m+"enter",v,n,h),w.target=g,w.relatedTarget=S,b=w),S=b,y&&v)t:{for(w=y,p=v,m=0,g=w;g;g=Xn(g))m++;for(g=0,b=p;b;b=Xn(b))g++;for(;0<m-g;)w=Xn(w),m--;for(;0<g-m;)p=Xn(p),g--;for(;m--;){if(w===p||p!==null&&w===p.alternate)break t;w=Xn(w),p=Xn(p)}w=null}else w=null;y!==null&&Pu(d,f,y,w,!1),v!==null&&S!==null&&Pu(d,S,v,w,!0)}}e:{if(f=u?rr(u):window,y=f.nodeName&&f.nodeName.toLowerCase(),y==="select"||y==="input"&&f.type==="file")var j=Hg;else if(xu(f))if(xf)j=qg;else{j=$g;var k=Ug}else(y=f.nodeName)&&y.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(j=Wg);if(j&&(j=j(e,u))){vf(d,j,n,h);break e}k&&k(e,f,u),e==="focusout"&&(k=f._wrapperState)&&k.controlled&&f.type==="number"&&Da(f,"number",f.value)}switch(k=u?rr(u):window,e){case"focusin":(xu(k)||k.contentEditable==="true")&&(tr=k,qa=u,ss=null);break;case"focusout":ss=qa=tr=null;break;case"mousedown":Ka=!0;break;case"contextmenu":case"mouseup":case"dragend":Ka=!1,ku(d,n,h);break;case"selectionchange":if(Xg)break;case"keydown":case"keyup":ku(d,n,h)}var C;if(Yl)e:{switch(e){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else er?pf(e,n)&&(P="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(P="onCompositionStart");P&&(mf&&n.locale!=="ko"&&(er||P!=="onCompositionStart"?P==="onCompositionEnd"&&er&&(C=ff()):(Jt=h,Kl="value"in Jt?Jt.value:Jt.textContent,er=!0)),k=Vi(u,P),0<k.length&&(P=new mu(P,e,null,n,h),d.push({event:P,listeners:k}),C?P.data=C:(C=gf(n),C!==null&&(P.data=C)))),(C=Fg?Vg(e,n):Bg(e,n))&&(u=Vi(u,"onBeforeInput"),0<u.length&&(h=new mu("onBeforeInput","beforeinput",null,n,h),d.push({event:h,listeners:u}),h.data=C))}Ef(d,t)})}function ks(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Vi(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=gs(e,n),i!=null&&r.unshift(ks(e,i,s)),i=gs(e,t),i!=null&&r.push(ks(e,i,s))),e=e.return}return r}function Xn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Pu(e,t,n,r,s){for(var i=t._reactName,o=[];n!==null&&n!==r;){var a=n,c=a.alternate,u=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&u!==null&&(a=u,s?(c=gs(n,i),c!=null&&o.unshift(ks(n,c,a))):s||(c=gs(n,i),c!=null&&o.push(ks(n,c,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var ev=/\r\n?/g,tv=/\u0000|\uFFFD/g;function Tu(e){return(typeof e=="string"?e:""+e).replace(ev,`
`).replace(tv,"")}function si(e,t,n){if(t=Tu(t),Tu(e)!==t&&n)throw Error(_(425))}function Bi(){}var Qa=null,Xa=null;function Ya(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ja=typeof setTimeout=="function"?setTimeout:void 0,nv=typeof clearTimeout=="function"?clearTimeout:void 0,Eu=typeof Promise=="function"?Promise:void 0,rv=typeof queueMicrotask=="function"?queueMicrotask:typeof Eu<"u"?function(e){return Eu.resolve(null).then(e).catch(sv)}:Ja;function sv(e){setTimeout(function(){throw e})}function ea(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),ys(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);ys(t)}function rn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Nu(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Ir=Math.random().toString(36).slice(2),St="__reactFiber$"+Ir,js="__reactProps$"+Ir,Vt="__reactContainer$"+Ir,Za="__reactEvents$"+Ir,iv="__reactListeners$"+Ir,ov="__reactHandles$"+Ir;function Nn(e){var t=e[St];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Vt]||n[St]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Nu(e);e!==null;){if(n=e[St])return n;e=Nu(e)}return t}e=n,n=e.parentNode}return null}function Os(e){return e=e[St]||e[Vt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function rr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(_(33))}function xo(e){return e[js]||null}var el=[],sr=-1;function xn(e){return{current:e}}function ae(e){0>sr||(e.current=el[sr],el[sr]=null,sr--)}function se(e,t){sr++,el[sr]=e.current,e.current=t}var hn={},Ie=xn(hn),Ue=xn(!1),Dn=hn;function Cr(e,t){var n=e.type.contextTypes;if(!n)return hn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function $e(e){return e=e.childContextTypes,e!=null}function Gi(){ae(Ue),ae(Ie)}function _u(e,t,n){if(Ie.current!==hn)throw Error(_(168));se(Ie,t),se(Ue,n)}function _f(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(_(108,U0(e)||"Unknown",s));return me({},n,r)}function zi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||hn,Dn=Ie.current,se(Ie,e),se(Ue,Ue.current),!0}function Au(e,t,n){var r=e.stateNode;if(!r)throw Error(_(169));n?(e=_f(e,t,Dn),r.__reactInternalMemoizedMergedChildContext=e,ae(Ue),ae(Ie),se(Ie,e)):ae(Ue),se(Ue,n)}var Et=null,yo=!1,ta=!1;function Af(e){Et===null?Et=[e]:Et.push(e)}function av(e){yo=!0,Af(e)}function yn(){if(!ta&&Et!==null){ta=!0;var e=0,t=re;try{var n=Et;for(re=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Et=null,yo=!1}catch(s){throw Et!==null&&(Et=Et.slice(e+1)),tf(Ul,yn),s}finally{re=t,ta=!1}}return null}var ir=[],or=0,Hi=null,Ui=0,it=[],ot=0,In=null,_t=1,At="";function jn(e,t){ir[or++]=Ui,ir[or++]=Hi,Hi=e,Ui=t}function Mf(e,t,n){it[ot++]=_t,it[ot++]=At,it[ot++]=In,In=e;var r=_t;e=At;var s=32-gt(r)-1;r&=~(1<<s),n+=1;var i=32-gt(t)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,_t=1<<32-gt(t)+s|n<<s|r,At=i+e}else _t=1<<i|n<<s|r,At=e}function Zl(e){e.return!==null&&(jn(e,1),Mf(e,1,0))}function ec(e){for(;e===Hi;)Hi=ir[--or],ir[or]=null,Ui=ir[--or],ir[or]=null;for(;e===In;)In=it[--ot],it[ot]=null,At=it[--ot],it[ot]=null,_t=it[--ot],it[ot]=null}var Xe=null,Qe=null,ue=!1,pt=null;function Lf(e,t){var n=at(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Mu(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Xe=e,Qe=rn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Xe=e,Qe=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=In!==null?{id:_t,overflow:At}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=at(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Xe=e,Qe=null,!0):!1;default:return!1}}function tl(e){return(e.mode&1)!==0&&(e.flags&128)===0}function nl(e){if(ue){var t=Qe;if(t){var n=t;if(!Mu(e,t)){if(tl(e))throw Error(_(418));t=rn(n.nextSibling);var r=Xe;t&&Mu(e,t)?Lf(r,n):(e.flags=e.flags&-4097|2,ue=!1,Xe=e)}}else{if(tl(e))throw Error(_(418));e.flags=e.flags&-4097|2,ue=!1,Xe=e}}}function Lu(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Xe=e}function ii(e){if(e!==Xe)return!1;if(!ue)return Lu(e),ue=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Ya(e.type,e.memoizedProps)),t&&(t=Qe)){if(tl(e))throw Rf(),Error(_(418));for(;t;)Lf(e,t),t=rn(t.nextSibling)}if(Lu(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(_(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Qe=rn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Qe=null}}else Qe=Xe?rn(e.stateNode.nextSibling):null;return!0}function Rf(){for(var e=Qe;e;)e=rn(e.nextSibling)}function Pr(){Qe=Xe=null,ue=!1}function tc(e){pt===null?pt=[e]:pt.push(e)}var lv=Ht.ReactCurrentBatchConfig;function Ur(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(_(309));var r=n.stateNode}if(!r)throw Error(_(147,e));var s=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(_(284));if(!n._owner)throw Error(_(290,e))}return e}function oi(e,t){throw e=Object.prototype.toString.call(t),Error(_(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ru(e){var t=e._init;return t(e._payload)}function Df(e){function t(p,m){if(e){var g=p.deletions;g===null?(p.deletions=[m],p.flags|=16):g.push(m)}}function n(p,m){if(!e)return null;for(;m!==null;)t(p,m),m=m.sibling;return null}function r(p,m){for(p=new Map;m!==null;)m.key!==null?p.set(m.key,m):p.set(m.index,m),m=m.sibling;return p}function s(p,m){return p=ln(p,m),p.index=0,p.sibling=null,p}function i(p,m,g){return p.index=g,e?(g=p.alternate,g!==null?(g=g.index,g<m?(p.flags|=2,m):g):(p.flags|=2,m)):(p.flags|=1048576,m)}function o(p){return e&&p.alternate===null&&(p.flags|=2),p}function a(p,m,g,b){return m===null||m.tag!==6?(m=la(g,p.mode,b),m.return=p,m):(m=s(m,g),m.return=p,m)}function c(p,m,g,b){var j=g.type;return j===Zn?h(p,m,g.props.children,b,g.key):m!==null&&(m.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===qt&&Ru(j)===m.type)?(b=s(m,g.props),b.ref=Ur(p,m,g),b.return=p,b):(b=Ei(g.type,g.key,g.props,null,p.mode,b),b.ref=Ur(p,m,g),b.return=p,b)}function u(p,m,g,b){return m===null||m.tag!==4||m.stateNode.containerInfo!==g.containerInfo||m.stateNode.implementation!==g.implementation?(m=ca(g,p.mode,b),m.return=p,m):(m=s(m,g.children||[]),m.return=p,m)}function h(p,m,g,b,j){return m===null||m.tag!==7?(m=Rn(g,p.mode,b,j),m.return=p,m):(m=s(m,g),m.return=p,m)}function d(p,m,g){if(typeof m=="string"&&m!==""||typeof m=="number")return m=la(""+m,p.mode,g),m.return=p,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Qs:return g=Ei(m.type,m.key,m.props,null,p.mode,g),g.ref=Ur(p,null,m),g.return=p,g;case Jn:return m=ca(m,p.mode,g),m.return=p,m;case qt:var b=m._init;return d(p,b(m._payload),g)}if(Xr(m)||Vr(m))return m=Rn(m,p.mode,g,null),m.return=p,m;oi(p,m)}return null}function f(p,m,g,b){var j=m!==null?m.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return j!==null?null:a(p,m,""+g,b);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Qs:return g.key===j?c(p,m,g,b):null;case Jn:return g.key===j?u(p,m,g,b):null;case qt:return j=g._init,f(p,m,j(g._payload),b)}if(Xr(g)||Vr(g))return j!==null?null:h(p,m,g,b,null);oi(p,g)}return null}function y(p,m,g,b,j){if(typeof b=="string"&&b!==""||typeof b=="number")return p=p.get(g)||null,a(m,p,""+b,j);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Qs:return p=p.get(b.key===null?g:b.key)||null,c(m,p,b,j);case Jn:return p=p.get(b.key===null?g:b.key)||null,u(m,p,b,j);case qt:var k=b._init;return y(p,m,g,k(b._payload),j)}if(Xr(b)||Vr(b))return p=p.get(g)||null,h(m,p,b,j,null);oi(m,b)}return null}function v(p,m,g,b){for(var j=null,k=null,C=m,P=m=0,N=null;C!==null&&P<g.length;P++){C.index>P?(N=C,C=null):N=C.sibling;var A=f(p,C,g[P],b);if(A===null){C===null&&(C=N);break}e&&C&&A.alternate===null&&t(p,C),m=i(A,m,P),k===null?j=A:k.sibling=A,k=A,C=N}if(P===g.length)return n(p,C),ue&&jn(p,P),j;if(C===null){for(;P<g.length;P++)C=d(p,g[P],b),C!==null&&(m=i(C,m,P),k===null?j=C:k.sibling=C,k=C);return ue&&jn(p,P),j}for(C=r(p,C);P<g.length;P++)N=y(C,p,P,g[P],b),N!==null&&(e&&N.alternate!==null&&C.delete(N.key===null?P:N.key),m=i(N,m,P),k===null?j=N:k.sibling=N,k=N);return e&&C.forEach(function(H){return t(p,H)}),ue&&jn(p,P),j}function w(p,m,g,b){var j=Vr(g);if(typeof j!="function")throw Error(_(150));if(g=j.call(g),g==null)throw Error(_(151));for(var k=j=null,C=m,P=m=0,N=null,A=g.next();C!==null&&!A.done;P++,A=g.next()){C.index>P?(N=C,C=null):N=C.sibling;var H=f(p,C,A.value,b);if(H===null){C===null&&(C=N);break}e&&C&&H.alternate===null&&t(p,C),m=i(H,m,P),k===null?j=H:k.sibling=H,k=H,C=N}if(A.done)return n(p,C),ue&&jn(p,P),j;if(C===null){for(;!A.done;P++,A=g.next())A=d(p,A.value,b),A!==null&&(m=i(A,m,P),k===null?j=A:k.sibling=A,k=A);return ue&&jn(p,P),j}for(C=r(p,C);!A.done;P++,A=g.next())A=y(C,p,P,A.value,b),A!==null&&(e&&A.alternate!==null&&C.delete(A.key===null?P:A.key),m=i(A,m,P),k===null?j=A:k.sibling=A,k=A);return e&&C.forEach(function(Y){return t(p,Y)}),ue&&jn(p,P),j}function S(p,m,g,b){if(typeof g=="object"&&g!==null&&g.type===Zn&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case Qs:e:{for(var j=g.key,k=m;k!==null;){if(k.key===j){if(j=g.type,j===Zn){if(k.tag===7){n(p,k.sibling),m=s(k,g.props.children),m.return=p,p=m;break e}}else if(k.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===qt&&Ru(j)===k.type){n(p,k.sibling),m=s(k,g.props),m.ref=Ur(p,k,g),m.return=p,p=m;break e}n(p,k);break}else t(p,k);k=k.sibling}g.type===Zn?(m=Rn(g.props.children,p.mode,b,g.key),m.return=p,p=m):(b=Ei(g.type,g.key,g.props,null,p.mode,b),b.ref=Ur(p,m,g),b.return=p,p=b)}return o(p);case Jn:e:{for(k=g.key;m!==null;){if(m.key===k)if(m.tag===4&&m.stateNode.containerInfo===g.containerInfo&&m.stateNode.implementation===g.implementation){n(p,m.sibling),m=s(m,g.children||[]),m.return=p,p=m;break e}else{n(p,m);break}else t(p,m);m=m.sibling}m=ca(g,p.mode,b),m.return=p,p=m}return o(p);case qt:return k=g._init,S(p,m,k(g._payload),b)}if(Xr(g))return v(p,m,g,b);if(Vr(g))return w(p,m,g,b);oi(p,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,m!==null&&m.tag===6?(n(p,m.sibling),m=s(m,g),m.return=p,p=m):(n(p,m),m=la(g,p.mode,b),m.return=p,p=m),o(p)):n(p,m)}return S}var Tr=Df(!0),If=Df(!1),$i=xn(null),Wi=null,ar=null,nc=null;function rc(){nc=ar=Wi=null}function sc(e){var t=$i.current;ae($i),e._currentValue=t}function rl(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function wr(e,t){Wi=e,nc=ar=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(He=!0),e.firstContext=null)}function ct(e){var t=e._currentValue;if(nc!==e)if(e={context:e,memoizedValue:t,next:null},ar===null){if(Wi===null)throw Error(_(308));ar=e,Wi.dependencies={lanes:0,firstContext:e}}else ar=ar.next=e;return t}var _n=null;function ic(e){_n===null?_n=[e]:_n.push(e)}function Of(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,ic(t)):(n.next=s.next,s.next=n),t.interleaved=n,Bt(e,r)}function Bt(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Kt=!1;function oc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ff(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Dt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function sn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,ee&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Bt(e,n)}return s=r.interleaved,s===null?(t.next=t,ic(r)):(t.next=s.next,s.next=t),r.interleaved=t,Bt(e,n)}function Si(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,$l(e,n)}}function Du(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=t:i=i.next=t}else s=i=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function qi(e,t,n,r){var s=e.updateQueue;Kt=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var c=a,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var h=e.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=u:a.next=u,h.lastBaseUpdate=c))}if(i!==null){var d=s.baseState;o=0,h=u=c=null,a=i;do{var f=a.lane,y=a.eventTime;if((r&f)===f){h!==null&&(h=h.next={eventTime:y,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=e,w=a;switch(f=t,y=n,w.tag){case 1:if(v=w.payload,typeof v=="function"){d=v.call(y,d,f);break e}d=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=w.payload,f=typeof v=="function"?v.call(y,d,f):v,f==null)break e;d=me({},d,f);break e;case 2:Kt=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else y={eventTime:y,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(u=h=y,c=d):h=h.next=y,o|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(1);if(h===null&&(c=d),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=h,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);Fn|=o,e.lanes=o,e.memoizedState=d}}function Iu(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(_(191,s));s.call(r)}}}var Fs={},Ct=xn(Fs),Cs=xn(Fs),Ps=xn(Fs);function An(e){if(e===Fs)throw Error(_(174));return e}function ac(e,t){switch(se(Ps,t),se(Cs,e),se(Ct,Fs),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Oa(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Oa(t,e)}ae(Ct),se(Ct,t)}function Er(){ae(Ct),ae(Cs),ae(Ps)}function Vf(e){An(Ps.current);var t=An(Ct.current),n=Oa(t,e.type);t!==n&&(se(Cs,e),se(Ct,n))}function lc(e){Cs.current===e&&(ae(Ct),ae(Cs))}var de=xn(0);function Ki(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var na=[];function cc(){for(var e=0;e<na.length;e++)na[e]._workInProgressVersionPrimary=null;na.length=0}var ki=Ht.ReactCurrentDispatcher,ra=Ht.ReactCurrentBatchConfig,On=0,fe=null,Se=null,Ce=null,Qi=!1,is=!1,Ts=0,cv=0;function Ae(){throw Error(_(321))}function uc(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!xt(e[n],t[n]))return!1;return!0}function dc(e,t,n,r,s,i){if(On=i,fe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ki.current=e===null||e.memoizedState===null?fv:mv,e=n(r,s),is){i=0;do{if(is=!1,Ts=0,25<=i)throw Error(_(301));i+=1,Ce=Se=null,t.updateQueue=null,ki.current=pv,e=n(r,s)}while(is)}if(ki.current=Xi,t=Se!==null&&Se.next!==null,On=0,Ce=Se=fe=null,Qi=!1,t)throw Error(_(300));return e}function hc(){var e=Ts!==0;return Ts=0,e}function bt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ce===null?fe.memoizedState=Ce=e:Ce=Ce.next=e,Ce}function ut(){if(Se===null){var e=fe.alternate;e=e!==null?e.memoizedState:null}else e=Se.next;var t=Ce===null?fe.memoizedState:Ce.next;if(t!==null)Ce=t,Se=e;else{if(e===null)throw Error(_(310));Se=e,e={memoizedState:Se.memoizedState,baseState:Se.baseState,baseQueue:Se.baseQueue,queue:Se.queue,next:null},Ce===null?fe.memoizedState=Ce=e:Ce=Ce.next=e}return Ce}function Es(e,t){return typeof t=="function"?t(e):t}function sa(e){var t=ut(),n=t.queue;if(n===null)throw Error(_(311));n.lastRenderedReducer=e;var r=Se,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,c=null,u=i;do{var h=u.lane;if((On&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(a=c=d,o=r):c=c.next=d,fe.lanes|=h,Fn|=h}u=u.next}while(u!==null&&u!==i);c===null?o=r:c.next=a,xt(r,t.memoizedState)||(He=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do i=s.lane,fe.lanes|=i,Fn|=i,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ia(e){var t=ut(),n=t.queue;if(n===null)throw Error(_(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);xt(i,t.memoizedState)||(He=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function Bf(){}function Gf(e,t){var n=fe,r=ut(),s=t(),i=!xt(r.memoizedState,s);if(i&&(r.memoizedState=s,He=!0),r=r.queue,fc(Uf.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||Ce!==null&&Ce.memoizedState.tag&1){if(n.flags|=2048,Ns(9,Hf.bind(null,n,r,s,t),void 0,null),Pe===null)throw Error(_(349));On&30||zf(n,t,s)}return s}function zf(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=fe.updateQueue,t===null?(t={lastEffect:null,stores:null},fe.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Hf(e,t,n,r){t.value=n,t.getSnapshot=r,$f(t)&&Wf(e)}function Uf(e,t,n){return n(function(){$f(t)&&Wf(e)})}function $f(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!xt(e,n)}catch{return!0}}function Wf(e){var t=Bt(e,1);t!==null&&vt(t,e,1,-1)}function Ou(e){var t=bt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Es,lastRenderedState:e},t.queue=e,e=e.dispatch=hv.bind(null,fe,e),[t.memoizedState,e]}function Ns(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=fe.updateQueue,t===null?(t={lastEffect:null,stores:null},fe.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function qf(){return ut().memoizedState}function ji(e,t,n,r){var s=bt();fe.flags|=e,s.memoizedState=Ns(1|t,n,void 0,r===void 0?null:r)}function wo(e,t,n,r){var s=ut();r=r===void 0?null:r;var i=void 0;if(Se!==null){var o=Se.memoizedState;if(i=o.destroy,r!==null&&uc(r,o.deps)){s.memoizedState=Ns(t,n,i,r);return}}fe.flags|=e,s.memoizedState=Ns(1|t,n,i,r)}function Fu(e,t){return ji(8390656,8,e,t)}function fc(e,t){return wo(2048,8,e,t)}function Kf(e,t){return wo(4,2,e,t)}function Qf(e,t){return wo(4,4,e,t)}function Xf(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Yf(e,t,n){return n=n!=null?n.concat([e]):null,wo(4,4,Xf.bind(null,t,e),n)}function mc(){}function Jf(e,t){var n=ut();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&uc(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Zf(e,t){var n=ut();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&uc(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function em(e,t,n){return On&21?(xt(n,t)||(n=sf(),fe.lanes|=n,Fn|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,He=!0),e.memoizedState=n)}function uv(e,t){var n=re;re=n!==0&&4>n?n:4,e(!0);var r=ra.transition;ra.transition={};try{e(!1),t()}finally{re=n,ra.transition=r}}function tm(){return ut().memoizedState}function dv(e,t,n){var r=an(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},nm(e))rm(t,n);else if(n=Of(e,t,n,r),n!==null){var s=Ve();vt(n,e,r,s),sm(n,t,r)}}function hv(e,t,n){var r=an(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(nm(e))rm(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,xt(a,o)){var c=t.interleaved;c===null?(s.next=s,ic(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}n=Of(e,t,s,r),n!==null&&(s=Ve(),vt(n,e,r,s),sm(n,t,r))}}function nm(e){var t=e.alternate;return e===fe||t!==null&&t===fe}function rm(e,t){is=Qi=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function sm(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,$l(e,n)}}var Xi={readContext:ct,useCallback:Ae,useContext:Ae,useEffect:Ae,useImperativeHandle:Ae,useInsertionEffect:Ae,useLayoutEffect:Ae,useMemo:Ae,useReducer:Ae,useRef:Ae,useState:Ae,useDebugValue:Ae,useDeferredValue:Ae,useTransition:Ae,useMutableSource:Ae,useSyncExternalStore:Ae,useId:Ae,unstable_isNewReconciler:!1},fv={readContext:ct,useCallback:function(e,t){return bt().memoizedState=[e,t===void 0?null:t],e},useContext:ct,useEffect:Fu,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,ji(4194308,4,Xf.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ji(4194308,4,e,t)},useInsertionEffect:function(e,t){return ji(4,2,e,t)},useMemo:function(e,t){var n=bt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=bt();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=dv.bind(null,fe,e),[r.memoizedState,e]},useRef:function(e){var t=bt();return e={current:e},t.memoizedState=e},useState:Ou,useDebugValue:mc,useDeferredValue:function(e){return bt().memoizedState=e},useTransition:function(){var e=Ou(!1),t=e[0];return e=uv.bind(null,e[1]),bt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=fe,s=bt();if(ue){if(n===void 0)throw Error(_(407));n=n()}else{if(n=t(),Pe===null)throw Error(_(349));On&30||zf(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,Fu(Uf.bind(null,r,i,e),[e]),r.flags|=2048,Ns(9,Hf.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=bt(),t=Pe.identifierPrefix;if(ue){var n=At,r=_t;n=(r&~(1<<32-gt(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Ts++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=cv++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},mv={readContext:ct,useCallback:Jf,useContext:ct,useEffect:fc,useImperativeHandle:Yf,useInsertionEffect:Kf,useLayoutEffect:Qf,useMemo:Zf,useReducer:sa,useRef:qf,useState:function(){return sa(Es)},useDebugValue:mc,useDeferredValue:function(e){var t=ut();return em(t,Se.memoizedState,e)},useTransition:function(){var e=sa(Es)[0],t=ut().memoizedState;return[e,t]},useMutableSource:Bf,useSyncExternalStore:Gf,useId:tm,unstable_isNewReconciler:!1},pv={readContext:ct,useCallback:Jf,useContext:ct,useEffect:fc,useImperativeHandle:Yf,useInsertionEffect:Kf,useLayoutEffect:Qf,useMemo:Zf,useReducer:ia,useRef:qf,useState:function(){return ia(Es)},useDebugValue:mc,useDeferredValue:function(e){var t=ut();return Se===null?t.memoizedState=e:em(t,Se.memoizedState,e)},useTransition:function(){var e=ia(Es)[0],t=ut().memoizedState;return[e,t]},useMutableSource:Bf,useSyncExternalStore:Gf,useId:tm,unstable_isNewReconciler:!1};function ft(e,t){if(e&&e.defaultProps){t=me({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function sl(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:me({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var bo={isMounted:function(e){return(e=e._reactInternals)?qn(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Ve(),s=an(e),i=Dt(r,s);i.payload=t,n!=null&&(i.callback=n),t=sn(e,i,s),t!==null&&(vt(t,e,s,r),Si(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Ve(),s=an(e),i=Dt(r,s);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=sn(e,i,s),t!==null&&(vt(t,e,s,r),Si(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ve(),r=an(e),s=Dt(n,r);s.tag=2,t!=null&&(s.callback=t),t=sn(e,s,r),t!==null&&(vt(t,e,r,n),Si(t,e,r))}};function Vu(e,t,n,r,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,o):t.prototype&&t.prototype.isPureReactComponent?!bs(n,r)||!bs(s,i):!0}function im(e,t,n){var r=!1,s=hn,i=t.contextType;return typeof i=="object"&&i!==null?i=ct(i):(s=$e(t)?Dn:Ie.current,r=t.contextTypes,i=(r=r!=null)?Cr(e,s):hn),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=bo,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function Bu(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&bo.enqueueReplaceState(t,t.state,null)}function il(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},oc(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=ct(i):(i=$e(t)?Dn:Ie.current,s.context=Cr(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(sl(e,t,i,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&bo.enqueueReplaceState(s,s.state,null),qi(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Nr(e,t){try{var n="",r=t;do n+=H0(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function oa(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function ol(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var gv=typeof WeakMap=="function"?WeakMap:Map;function om(e,t,n){n=Dt(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ji||(Ji=!0,gl=r),ol(e,t)},n}function am(e,t,n){n=Dt(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){ol(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){ol(e,t),typeof r!="function"&&(on===null?on=new Set([this]):on.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function Gu(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new gv;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=_v.bind(null,e,t,n),t.then(e,e))}function zu(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Hu(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Dt(-1,1),t.tag=2,sn(n,t,1))),n.lanes|=1),e)}var vv=Ht.ReactCurrentOwner,He=!1;function Fe(e,t,n,r){t.child=e===null?If(t,null,n,r):Tr(t,e.child,n,r)}function Uu(e,t,n,r,s){n=n.render;var i=t.ref;return wr(t,s),r=dc(e,t,n,r,i,s),n=hc(),e!==null&&!He?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Gt(e,t,s)):(ue&&n&&Zl(t),t.flags|=1,Fe(e,t,r,s),t.child)}function $u(e,t,n,r,s){if(e===null){var i=n.type;return typeof i=="function"&&!Sc(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,lm(e,t,i,r,s)):(e=Ei(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:bs,n(o,r)&&e.ref===t.ref)return Gt(e,t,s)}return t.flags|=1,e=ln(i,r),e.ref=t.ref,e.return=t,t.child=e}function lm(e,t,n,r,s){if(e!==null){var i=e.memoizedProps;if(bs(i,r)&&e.ref===t.ref)if(He=!1,t.pendingProps=r=i,(e.lanes&s)!==0)e.flags&131072&&(He=!0);else return t.lanes=e.lanes,Gt(e,t,s)}return al(e,t,n,r,s)}function cm(e,t,n){var r=t.pendingProps,s=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},se(cr,Ke),Ke|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,se(cr,Ke),Ke|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,se(cr,Ke),Ke|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,se(cr,Ke),Ke|=r;return Fe(e,t,s,n),t.child}function um(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function al(e,t,n,r,s){var i=$e(n)?Dn:Ie.current;return i=Cr(t,i),wr(t,s),n=dc(e,t,n,r,i,s),r=hc(),e!==null&&!He?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Gt(e,t,s)):(ue&&r&&Zl(t),t.flags|=1,Fe(e,t,n,s),t.child)}function Wu(e,t,n,r,s){if($e(n)){var i=!0;zi(t)}else i=!1;if(wr(t,s),t.stateNode===null)Ci(e,t),im(t,n,r),il(t,n,r,s),r=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=ct(u):(u=$e(n)?Dn:Ie.current,u=Cr(t,u));var h=n.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||c!==u)&&Bu(t,o,r,u),Kt=!1;var f=t.memoizedState;o.state=f,qi(t,r,o,s),c=t.memoizedState,a!==r||f!==c||Ue.current||Kt?(typeof h=="function"&&(sl(t,n,h,r),c=t.memoizedState),(a=Kt||Vu(t,n,a,r,f,c,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),o.props=r,o.state=c,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Ff(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:ft(t.type,a),o.props=u,d=t.pendingProps,f=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=ct(c):(c=$e(n)?Dn:Ie.current,c=Cr(t,c));var y=n.getDerivedStateFromProps;(h=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==c)&&Bu(t,o,r,c),Kt=!1,f=t.memoizedState,o.state=f,qi(t,r,o,s);var v=t.memoizedState;a!==d||f!==v||Ue.current||Kt?(typeof y=="function"&&(sl(t,n,y,r),v=t.memoizedState),(u=Kt||Vu(t,n,u,r,f,v,c)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=v),o.props=r,o.state=v,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return ll(e,t,n,r,i,s)}function ll(e,t,n,r,s,i){um(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return s&&Au(t,n,!1),Gt(e,t,i);r=t.stateNode,vv.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=Tr(t,e.child,null,i),t.child=Tr(t,null,a,i)):Fe(e,t,a,i),t.memoizedState=r.state,s&&Au(t,n,!0),t.child}function dm(e){var t=e.stateNode;t.pendingContext?_u(e,t.pendingContext,t.pendingContext!==t.context):t.context&&_u(e,t.context,!1),ac(e,t.containerInfo)}function qu(e,t,n,r,s){return Pr(),tc(s),t.flags|=256,Fe(e,t,n,r),t.child}var cl={dehydrated:null,treeContext:null,retryLane:0};function ul(e){return{baseLanes:e,cachePool:null,transitions:null}}function hm(e,t,n){var r=t.pendingProps,s=de.current,i=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(s&2)!==0),a?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),se(de,s&1),e===null)return nl(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,i?(r=t.mode,i=t.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=jo(o,r,0,null),e=Rn(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=ul(n),t.memoizedState=cl,e):pc(t,o));if(s=e.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return xv(e,t,o,r,a,s,n);if(i){i=r.fallback,o=t.mode,s=e.child,a=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=ln(s,c),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=ln(a,i):(i=Rn(i,o,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,o=e.child.memoizedState,o=o===null?ul(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~n,t.memoizedState=cl,r}return i=e.child,e=i.sibling,r=ln(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function pc(e,t){return t=jo({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ai(e,t,n,r){return r!==null&&tc(r),Tr(t,e.child,null,n),e=pc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function xv(e,t,n,r,s,i,o){if(n)return t.flags&256?(t.flags&=-257,r=oa(Error(_(422))),ai(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,s=t.mode,r=jo({mode:"visible",children:r.children},s,0,null),i=Rn(i,s,o,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&Tr(t,e.child,null,o),t.child.memoizedState=ul(o),t.memoizedState=cl,i);if(!(t.mode&1))return ai(e,t,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(_(419)),r=oa(i,r,void 0),ai(e,t,o,r)}if(a=(o&e.childLanes)!==0,He||a){if(r=Pe,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Bt(e,s),vt(r,e,s,-1))}return bc(),r=oa(Error(_(421))),ai(e,t,o,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=Av.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,Qe=rn(s.nextSibling),Xe=t,ue=!0,pt=null,e!==null&&(it[ot++]=_t,it[ot++]=At,it[ot++]=In,_t=e.id,At=e.overflow,In=t),t=pc(t,r.children),t.flags|=4096,t)}function Ku(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),rl(e.return,t,n)}function aa(e,t,n,r,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function fm(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(Fe(e,t,r.children,n),r=de.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Ku(e,n,t);else if(e.tag===19)Ku(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(se(de,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&Ki(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),aa(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Ki(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}aa(t,!0,n,null,i);break;case"together":aa(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ci(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Gt(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Fn|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(_(153));if(t.child!==null){for(e=t.child,n=ln(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=ln(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function yv(e,t,n){switch(t.tag){case 3:dm(t),Pr();break;case 5:Vf(t);break;case 1:$e(t.type)&&zi(t);break;case 4:ac(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;se($i,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(se(de,de.current&1),t.flags|=128,null):n&t.child.childLanes?hm(e,t,n):(se(de,de.current&1),e=Gt(e,t,n),e!==null?e.sibling:null);se(de,de.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return fm(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),se(de,de.current),r)break;return null;case 22:case 23:return t.lanes=0,cm(e,t,n)}return Gt(e,t,n)}var mm,dl,pm,gm;mm=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};dl=function(){};pm=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,An(Ct.current);var i=null;switch(n){case"input":s=La(e,s),r=La(e,r),i=[];break;case"select":s=me({},s,{value:void 0}),r=me({},r,{value:void 0}),i=[];break;case"textarea":s=Ia(e,s),r=Ia(e,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Bi)}Fa(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ms.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(a=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==a&&(c!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ms.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&oe("scroll",e),i||a===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};gm=function(e,t,n,r){n!==r&&(t.flags|=4)};function $r(e,t){if(!ue)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Me(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function wv(e,t,n){var r=t.pendingProps;switch(ec(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Me(t),null;case 1:return $e(t.type)&&Gi(),Me(t),null;case 3:return r=t.stateNode,Er(),ae(Ue),ae(Ie),cc(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(ii(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,pt!==null&&(yl(pt),pt=null))),dl(e,t),Me(t),null;case 5:lc(t);var s=An(Ps.current);if(n=t.type,e!==null&&t.stateNode!=null)pm(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(_(166));return Me(t),null}if(e=An(Ct.current),ii(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[St]=t,r[js]=i,e=(t.mode&1)!==0,n){case"dialog":oe("cancel",r),oe("close",r);break;case"iframe":case"object":case"embed":oe("load",r);break;case"video":case"audio":for(s=0;s<Jr.length;s++)oe(Jr[s],r);break;case"source":oe("error",r);break;case"img":case"image":case"link":oe("error",r),oe("load",r);break;case"details":oe("toggle",r);break;case"input":ru(r,i),oe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},oe("invalid",r);break;case"textarea":iu(r,i),oe("invalid",r)}Fa(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&si(r.textContent,a,e),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&si(r.textContent,a,e),s=["children",""+a]):ms.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&oe("scroll",r)}switch(n){case"input":Xs(r),su(r,i,!0);break;case"textarea":Xs(r),ou(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Bi)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Hh(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[St]=t,e[js]=r,mm(e,t,!1,!1),t.stateNode=e;e:{switch(o=Va(n,r),n){case"dialog":oe("cancel",e),oe("close",e),s=r;break;case"iframe":case"object":case"embed":oe("load",e),s=r;break;case"video":case"audio":for(s=0;s<Jr.length;s++)oe(Jr[s],e);s=r;break;case"source":oe("error",e),s=r;break;case"img":case"image":case"link":oe("error",e),oe("load",e),s=r;break;case"details":oe("toggle",e),s=r;break;case"input":ru(e,r),s=La(e,r),oe("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=me({},r,{value:void 0}),oe("invalid",e);break;case"textarea":iu(e,r),s=Ia(e,r),oe("invalid",e);break;default:s=r}Fa(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var c=a[i];i==="style"?Wh(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Uh(e,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&ps(e,c):typeof c=="number"&&ps(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ms.hasOwnProperty(i)?c!=null&&i==="onScroll"&&oe("scroll",e):c!=null&&Vl(e,i,c,o))}switch(n){case"input":Xs(e),su(e,r,!1);break;case"textarea":Xs(e),ou(e);break;case"option":r.value!=null&&e.setAttribute("value",""+dn(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?gr(e,!!r.multiple,i,!1):r.defaultValue!=null&&gr(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Bi)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Me(t),null;case 6:if(e&&t.stateNode!=null)gm(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(_(166));if(n=An(Ps.current),An(Ct.current),ii(t)){if(r=t.stateNode,n=t.memoizedProps,r[St]=t,(i=r.nodeValue!==n)&&(e=Xe,e!==null))switch(e.tag){case 3:si(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&si(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[St]=t,t.stateNode=r}return Me(t),null;case 13:if(ae(de),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ue&&Qe!==null&&t.mode&1&&!(t.flags&128))Rf(),Pr(),t.flags|=98560,i=!1;else if(i=ii(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(_(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(_(317));i[St]=t}else Pr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Me(t),i=!1}else pt!==null&&(yl(pt),pt=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||de.current&1?ke===0&&(ke=3):bc())),t.updateQueue!==null&&(t.flags|=4),Me(t),null);case 4:return Er(),dl(e,t),e===null&&Ss(t.stateNode.containerInfo),Me(t),null;case 10:return sc(t.type._context),Me(t),null;case 17:return $e(t.type)&&Gi(),Me(t),null;case 19:if(ae(de),i=t.memoizedState,i===null)return Me(t),null;if(r=(t.flags&128)!==0,o=i.rendering,o===null)if(r)$r(i,!1);else{if(ke!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Ki(e),o!==null){for(t.flags|=128,$r(i,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return se(de,de.current&1|2),t.child}e=e.sibling}i.tail!==null&&ye()>_r&&(t.flags|=128,r=!0,$r(i,!1),t.lanes=4194304)}else{if(!r)if(e=Ki(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),$r(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!ue)return Me(t),null}else 2*ye()-i.renderingStartTime>_r&&n!==1073741824&&(t.flags|=128,r=!0,$r(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(n=i.last,n!==null?n.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=ye(),t.sibling=null,n=de.current,se(de,r?n&1|2:n&1),t):(Me(t),null);case 22:case 23:return wc(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Ke&1073741824&&(Me(t),t.subtreeFlags&6&&(t.flags|=8192)):Me(t),null;case 24:return null;case 25:return null}throw Error(_(156,t.tag))}function bv(e,t){switch(ec(t),t.tag){case 1:return $e(t.type)&&Gi(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Er(),ae(Ue),ae(Ie),cc(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return lc(t),null;case 13:if(ae(de),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(_(340));Pr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ae(de),null;case 4:return Er(),null;case 10:return sc(t.type._context),null;case 22:case 23:return wc(),null;case 24:return null;default:return null}}var li=!1,Re=!1,Sv=typeof WeakSet=="function"?WeakSet:Set,I=null;function lr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){pe(e,t,r)}else n.current=null}function hl(e,t,n){try{n()}catch(r){pe(e,t,r)}}var Qu=!1;function kv(e,t){if(Qa=Oi,e=bf(),Jl(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,u=0,h=0,d=e,f=null;t:for(;;){for(var y;d!==n||s!==0&&d.nodeType!==3||(a=o+s),d!==i||r!==0&&d.nodeType!==3||(c=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(y=d.firstChild)!==null;)f=d,d=y;for(;;){if(d===e)break t;if(f===n&&++u===s&&(a=o),f===i&&++h===r&&(c=o),(y=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=y}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Xa={focusedElem:e,selectionRange:n},Oi=!1,I=t;I!==null;)if(t=I,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,I=e;else for(;I!==null;){t=I;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var w=v.memoizedProps,S=v.memoizedState,p=t.stateNode,m=p.getSnapshotBeforeUpdate(t.elementType===t.type?w:ft(t.type,w),S);p.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var g=t.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(_(163))}}catch(b){pe(t,t.return,b)}if(e=t.sibling,e!==null){e.return=t.return,I=e;break}I=t.return}return v=Qu,Qu=!1,v}function os(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&hl(t,n,i)}s=s.next}while(s!==r)}}function So(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function fl(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function vm(e){var t=e.alternate;t!==null&&(e.alternate=null,vm(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[St],delete t[js],delete t[Za],delete t[iv],delete t[ov])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function xm(e){return e.tag===5||e.tag===3||e.tag===4}function Xu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||xm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ml(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Bi));else if(r!==4&&(e=e.child,e!==null))for(ml(e,t,n),e=e.sibling;e!==null;)ml(e,t,n),e=e.sibling}function pl(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(pl(e,t,n),e=e.sibling;e!==null;)pl(e,t,n),e=e.sibling}var Ee=null,mt=!1;function Ut(e,t,n){for(n=n.child;n!==null;)ym(e,t,n),n=n.sibling}function ym(e,t,n){if(jt&&typeof jt.onCommitFiberUnmount=="function")try{jt.onCommitFiberUnmount(mo,n)}catch{}switch(n.tag){case 5:Re||lr(n,t);case 6:var r=Ee,s=mt;Ee=null,Ut(e,t,n),Ee=r,mt=s,Ee!==null&&(mt?(e=Ee,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Ee.removeChild(n.stateNode));break;case 18:Ee!==null&&(mt?(e=Ee,n=n.stateNode,e.nodeType===8?ea(e.parentNode,n):e.nodeType===1&&ea(e,n),ys(e)):ea(Ee,n.stateNode));break;case 4:r=Ee,s=mt,Ee=n.stateNode.containerInfo,mt=!0,Ut(e,t,n),Ee=r,mt=s;break;case 0:case 11:case 14:case 15:if(!Re&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&hl(n,t,o),s=s.next}while(s!==r)}Ut(e,t,n);break;case 1:if(!Re&&(lr(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){pe(n,t,a)}Ut(e,t,n);break;case 21:Ut(e,t,n);break;case 22:n.mode&1?(Re=(r=Re)||n.memoizedState!==null,Ut(e,t,n),Re=r):Ut(e,t,n);break;default:Ut(e,t,n)}}function Yu(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Sv),t.forEach(function(r){var s=Mv.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function dt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ee=a.stateNode,mt=!1;break e;case 3:Ee=a.stateNode.containerInfo,mt=!0;break e;case 4:Ee=a.stateNode.containerInfo,mt=!0;break e}a=a.return}if(Ee===null)throw Error(_(160));ym(i,o,s),Ee=null,mt=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){pe(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)wm(t,e),t=t.sibling}function wm(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(dt(t,e),yt(e),r&4){try{os(3,e,e.return),So(3,e)}catch(w){pe(e,e.return,w)}try{os(5,e,e.return)}catch(w){pe(e,e.return,w)}}break;case 1:dt(t,e),yt(e),r&512&&n!==null&&lr(n,n.return);break;case 5:if(dt(t,e),yt(e),r&512&&n!==null&&lr(n,n.return),e.flags&32){var s=e.stateNode;try{ps(s,"")}catch(w){pe(e,e.return,w)}}if(r&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=n!==null?n.memoizedProps:i,a=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&Gh(s,i),Va(a,o);var u=Va(a,i);for(o=0;o<c.length;o+=2){var h=c[o],d=c[o+1];h==="style"?Wh(s,d):h==="dangerouslySetInnerHTML"?Uh(s,d):h==="children"?ps(s,d):Vl(s,h,d,u)}switch(a){case"input":Ra(s,i);break;case"textarea":zh(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var y=i.value;y!=null?gr(s,!!i.multiple,y,!1):f!==!!i.multiple&&(i.defaultValue!=null?gr(s,!!i.multiple,i.defaultValue,!0):gr(s,!!i.multiple,i.multiple?[]:"",!1))}s[js]=i}catch(w){pe(e,e.return,w)}}break;case 6:if(dt(t,e),yt(e),r&4){if(e.stateNode===null)throw Error(_(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(w){pe(e,e.return,w)}}break;case 3:if(dt(t,e),yt(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ys(t.containerInfo)}catch(w){pe(e,e.return,w)}break;case 4:dt(t,e),yt(e);break;case 13:dt(t,e),yt(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(xc=ye())),r&4&&Yu(e);break;case 22:if(h=n!==null&&n.memoizedState!==null,e.mode&1?(Re=(u=Re)||h,dt(t,e),Re=u):dt(t,e),yt(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!h&&e.mode&1)for(I=e,h=e.child;h!==null;){for(d=I=h;I!==null;){switch(f=I,y=f.child,f.tag){case 0:case 11:case 14:case 15:os(4,f,f.return);break;case 1:lr(f,f.return);var v=f.stateNode;if(typeof v.componentWillUnmount=="function"){r=f,n=f.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(w){pe(r,n,w)}}break;case 5:lr(f,f.return);break;case 22:if(f.memoizedState!==null){Zu(d);continue}}y!==null?(y.return=f,I=y):Zu(d)}h=h.sibling}e:for(h=null,d=e;;){if(d.tag===5){if(h===null){h=d;try{s=d.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=$h("display",o))}catch(w){pe(e,e.return,w)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(w){pe(e,e.return,w)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:dt(t,e),yt(e),r&4&&Yu(e);break;case 21:break;default:dt(t,e),yt(e)}}function yt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(xm(n)){var r=n;break e}n=n.return}throw Error(_(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(ps(s,""),r.flags&=-33);var i=Xu(e);pl(e,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Xu(e);ml(e,a,o);break;default:throw Error(_(161))}}catch(c){pe(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function jv(e,t,n){I=e,bm(e)}function bm(e,t,n){for(var r=(e.mode&1)!==0;I!==null;){var s=I,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||li;if(!o){var a=s.alternate,c=a!==null&&a.memoizedState!==null||Re;a=li;var u=Re;if(li=o,(Re=c)&&!u)for(I=s;I!==null;)o=I,c=o.child,o.tag===22&&o.memoizedState!==null?ed(s):c!==null?(c.return=o,I=c):ed(s);for(;i!==null;)I=i,bm(i),i=i.sibling;I=s,li=a,Re=u}Ju(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,I=i):Ju(e)}}function Ju(e){for(;I!==null;){var t=I;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Re||So(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Re)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:ft(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Iu(t,i,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Iu(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&ys(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(_(163))}Re||t.flags&512&&fl(t)}catch(f){pe(t,t.return,f)}}if(t===e){I=null;break}if(n=t.sibling,n!==null){n.return=t.return,I=n;break}I=t.return}}function Zu(e){for(;I!==null;){var t=I;if(t===e){I=null;break}var n=t.sibling;if(n!==null){n.return=t.return,I=n;break}I=t.return}}function ed(e){for(;I!==null;){var t=I;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{So(4,t)}catch(c){pe(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(c){pe(t,s,c)}}var i=t.return;try{fl(t)}catch(c){pe(t,i,c)}break;case 5:var o=t.return;try{fl(t)}catch(c){pe(t,o,c)}}}catch(c){pe(t,t.return,c)}if(t===e){I=null;break}var a=t.sibling;if(a!==null){a.return=t.return,I=a;break}I=t.return}}var Cv=Math.ceil,Yi=Ht.ReactCurrentDispatcher,gc=Ht.ReactCurrentOwner,lt=Ht.ReactCurrentBatchConfig,ee=0,Pe=null,be=null,Ne=0,Ke=0,cr=xn(0),ke=0,_s=null,Fn=0,ko=0,vc=0,as=null,ze=null,xc=0,_r=1/0,Tt=null,Ji=!1,gl=null,on=null,ci=!1,Zt=null,Zi=0,ls=0,vl=null,Pi=-1,Ti=0;function Ve(){return ee&6?ye():Pi!==-1?Pi:Pi=ye()}function an(e){return e.mode&1?ee&2&&Ne!==0?Ne&-Ne:lv.transition!==null?(Ti===0&&(Ti=sf()),Ti):(e=re,e!==0||(e=window.event,e=e===void 0?16:hf(e.type)),e):1}function vt(e,t,n,r){if(50<ls)throw ls=0,vl=null,Error(_(185));Ds(e,n,r),(!(ee&2)||e!==Pe)&&(e===Pe&&(!(ee&2)&&(ko|=n),ke===4&&Yt(e,Ne)),We(e,r),n===1&&ee===0&&!(t.mode&1)&&(_r=ye()+500,yo&&yn()))}function We(e,t){var n=e.callbackNode;lg(e,t);var r=Ii(e,e===Pe?Ne:0);if(r===0)n!==null&&cu(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&cu(n),t===1)e.tag===0?av(td.bind(null,e)):Af(td.bind(null,e)),rv(function(){!(ee&6)&&yn()}),n=null;else{switch(of(r)){case 1:n=Ul;break;case 4:n=nf;break;case 16:n=Di;break;case 536870912:n=rf;break;default:n=Di}n=Nm(n,Sm.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Sm(e,t){if(Pi=-1,Ti=0,ee&6)throw Error(_(327));var n=e.callbackNode;if(br()&&e.callbackNode!==n)return null;var r=Ii(e,e===Pe?Ne:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=eo(e,r);else{t=r;var s=ee;ee|=2;var i=jm();(Pe!==e||Ne!==t)&&(Tt=null,_r=ye()+500,Ln(e,t));do try{Ev();break}catch(a){km(e,a)}while(1);rc(),Yi.current=i,ee=s,be!==null?t=0:(Pe=null,Ne=0,t=ke)}if(t!==0){if(t===2&&(s=Ua(e),s!==0&&(r=s,t=xl(e,s))),t===1)throw n=_s,Ln(e,0),Yt(e,r),We(e,ye()),n;if(t===6)Yt(e,r);else{if(s=e.current.alternate,!(r&30)&&!Pv(s)&&(t=eo(e,r),t===2&&(i=Ua(e),i!==0&&(r=i,t=xl(e,i))),t===1))throw n=_s,Ln(e,0),Yt(e,r),We(e,ye()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(_(345));case 2:Cn(e,ze,Tt);break;case 3:if(Yt(e,r),(r&130023424)===r&&(t=xc+500-ye(),10<t)){if(Ii(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){Ve(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Ja(Cn.bind(null,e,ze,Tt),t);break}Cn(e,ze,Tt);break;case 4:if(Yt(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var o=31-gt(r);i=1<<o,o=t[o],o>s&&(s=o),r&=~i}if(r=s,r=ye()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Cv(r/1960))-r,10<r){e.timeoutHandle=Ja(Cn.bind(null,e,ze,Tt),r);break}Cn(e,ze,Tt);break;case 5:Cn(e,ze,Tt);break;default:throw Error(_(329))}}}return We(e,ye()),e.callbackNode===n?Sm.bind(null,e):null}function xl(e,t){var n=as;return e.current.memoizedState.isDehydrated&&(Ln(e,t).flags|=256),e=eo(e,t),e!==2&&(t=ze,ze=n,t!==null&&yl(t)),e}function yl(e){ze===null?ze=e:ze.push.apply(ze,e)}function Pv(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!xt(i(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Yt(e,t){for(t&=~vc,t&=~ko,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-gt(t),r=1<<n;e[n]=-1,t&=~r}}function td(e){if(ee&6)throw Error(_(327));br();var t=Ii(e,0);if(!(t&1))return We(e,ye()),null;var n=eo(e,t);if(e.tag!==0&&n===2){var r=Ua(e);r!==0&&(t=r,n=xl(e,r))}if(n===1)throw n=_s,Ln(e,0),Yt(e,t),We(e,ye()),n;if(n===6)throw Error(_(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Cn(e,ze,Tt),We(e,ye()),null}function yc(e,t){var n=ee;ee|=1;try{return e(t)}finally{ee=n,ee===0&&(_r=ye()+500,yo&&yn())}}function Vn(e){Zt!==null&&Zt.tag===0&&!(ee&6)&&br();var t=ee;ee|=1;var n=lt.transition,r=re;try{if(lt.transition=null,re=1,e)return e()}finally{re=r,lt.transition=n,ee=t,!(ee&6)&&yn()}}function wc(){Ke=cr.current,ae(cr)}function Ln(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,nv(n)),be!==null)for(n=be.return;n!==null;){var r=n;switch(ec(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Gi();break;case 3:Er(),ae(Ue),ae(Ie),cc();break;case 5:lc(r);break;case 4:Er();break;case 13:ae(de);break;case 19:ae(de);break;case 10:sc(r.type._context);break;case 22:case 23:wc()}n=n.return}if(Pe=e,be=e=ln(e.current,null),Ne=Ke=t,ke=0,_s=null,vc=ko=Fn=0,ze=as=null,_n!==null){for(t=0;t<_n.length;t++)if(n=_n[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}_n=null}return e}function km(e,t){do{var n=be;try{if(rc(),ki.current=Xi,Qi){for(var r=fe.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Qi=!1}if(On=0,Ce=Se=fe=null,is=!1,Ts=0,gc.current=null,n===null||n.return===null){ke=1,_s=t,be=null;break}e:{var i=e,o=n.return,a=n,c=t;if(t=Ne,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var y=zu(o);if(y!==null){y.flags&=-257,Hu(y,o,a,i,t),y.mode&1&&Gu(i,u,t),t=y,c=u;var v=t.updateQueue;if(v===null){var w=new Set;w.add(c),t.updateQueue=w}else v.add(c);break e}else{if(!(t&1)){Gu(i,u,t),bc();break e}c=Error(_(426))}}else if(ue&&a.mode&1){var S=zu(o);if(S!==null){!(S.flags&65536)&&(S.flags|=256),Hu(S,o,a,i,t),tc(Nr(c,a));break e}}i=c=Nr(c,a),ke!==4&&(ke=2),as===null?as=[i]:as.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var p=om(i,c,t);Du(i,p);break e;case 1:a=c;var m=i.type,g=i.stateNode;if(!(i.flags&128)&&(typeof m.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(on===null||!on.has(g)))){i.flags|=65536,t&=-t,i.lanes|=t;var b=am(i,a,t);Du(i,b);break e}}i=i.return}while(i!==null)}Pm(n)}catch(j){t=j,be===n&&n!==null&&(be=n=n.return);continue}break}while(1)}function jm(){var e=Yi.current;return Yi.current=Xi,e===null?Xi:e}function bc(){(ke===0||ke===3||ke===2)&&(ke=4),Pe===null||!(Fn&268435455)&&!(ko&268435455)||Yt(Pe,Ne)}function eo(e,t){var n=ee;ee|=2;var r=jm();(Pe!==e||Ne!==t)&&(Tt=null,Ln(e,t));do try{Tv();break}catch(s){km(e,s)}while(1);if(rc(),ee=n,Yi.current=r,be!==null)throw Error(_(261));return Pe=null,Ne=0,ke}function Tv(){for(;be!==null;)Cm(be)}function Ev(){for(;be!==null&&!Z0();)Cm(be)}function Cm(e){var t=Em(e.alternate,e,Ke);e.memoizedProps=e.pendingProps,t===null?Pm(e):be=t,gc.current=null}function Pm(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=bv(n,t),n!==null){n.flags&=32767,be=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ke=6,be=null;return}}else if(n=wv(n,t,Ke),n!==null){be=n;return}if(t=t.sibling,t!==null){be=t;return}be=t=e}while(t!==null);ke===0&&(ke=5)}function Cn(e,t,n){var r=re,s=lt.transition;try{lt.transition=null,re=1,Nv(e,t,n,r)}finally{lt.transition=s,re=r}return null}function Nv(e,t,n,r){do br();while(Zt!==null);if(ee&6)throw Error(_(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(_(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(cg(e,i),e===Pe&&(be=Pe=null,Ne=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ci||(ci=!0,Nm(Di,function(){return br(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=lt.transition,lt.transition=null;var o=re;re=1;var a=ee;ee|=4,gc.current=null,kv(e,n),wm(n,e),Qg(Xa),Oi=!!Qa,Xa=Qa=null,e.current=n,jv(n),eg(),ee=a,re=o,lt.transition=i}else e.current=n;if(ci&&(ci=!1,Zt=e,Zi=s),i=e.pendingLanes,i===0&&(on=null),rg(n.stateNode),We(e,ye()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Ji)throw Ji=!1,e=gl,gl=null,e;return Zi&1&&e.tag!==0&&br(),i=e.pendingLanes,i&1?e===vl?ls++:(ls=0,vl=e):ls=0,yn(),null}function br(){if(Zt!==null){var e=of(Zi),t=lt.transition,n=re;try{if(lt.transition=null,re=16>e?16:e,Zt===null)var r=!1;else{if(e=Zt,Zt=null,Zi=0,ee&6)throw Error(_(331));var s=ee;for(ee|=4,I=e.current;I!==null;){var i=I,o=i.child;if(I.flags&16){var a=i.deletions;if(a!==null){for(var c=0;c<a.length;c++){var u=a[c];for(I=u;I!==null;){var h=I;switch(h.tag){case 0:case 11:case 15:os(8,h,i)}var d=h.child;if(d!==null)d.return=h,I=d;else for(;I!==null;){h=I;var f=h.sibling,y=h.return;if(vm(h),h===u){I=null;break}if(f!==null){f.return=y,I=f;break}I=y}}}var v=i.alternate;if(v!==null){var w=v.child;if(w!==null){v.child=null;do{var S=w.sibling;w.sibling=null,w=S}while(w!==null)}}I=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,I=o;else e:for(;I!==null;){if(i=I,i.flags&2048)switch(i.tag){case 0:case 11:case 15:os(9,i,i.return)}var p=i.sibling;if(p!==null){p.return=i.return,I=p;break e}I=i.return}}var m=e.current;for(I=m;I!==null;){o=I;var g=o.child;if(o.subtreeFlags&2064&&g!==null)g.return=o,I=g;else e:for(o=m;I!==null;){if(a=I,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:So(9,a)}}catch(j){pe(a,a.return,j)}if(a===o){I=null;break e}var b=a.sibling;if(b!==null){b.return=a.return,I=b;break e}I=a.return}}if(ee=s,yn(),jt&&typeof jt.onPostCommitFiberRoot=="function")try{jt.onPostCommitFiberRoot(mo,e)}catch{}r=!0}return r}finally{re=n,lt.transition=t}}return!1}function nd(e,t,n){t=Nr(n,t),t=om(e,t,1),e=sn(e,t,1),t=Ve(),e!==null&&(Ds(e,1,t),We(e,t))}function pe(e,t,n){if(e.tag===3)nd(e,e,n);else for(;t!==null;){if(t.tag===3){nd(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(on===null||!on.has(r))){e=Nr(n,e),e=am(t,e,1),t=sn(t,e,1),e=Ve(),t!==null&&(Ds(t,1,e),We(t,e));break}}t=t.return}}function _v(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Ve(),e.pingedLanes|=e.suspendedLanes&n,Pe===e&&(Ne&n)===n&&(ke===4||ke===3&&(Ne&130023424)===Ne&&500>ye()-xc?Ln(e,0):vc|=n),We(e,t)}function Tm(e,t){t===0&&(e.mode&1?(t=Zs,Zs<<=1,!(Zs&130023424)&&(Zs=4194304)):t=1);var n=Ve();e=Bt(e,t),e!==null&&(Ds(e,t,n),We(e,n))}function Av(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Tm(e,n)}function Mv(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(_(314))}r!==null&&r.delete(t),Tm(e,n)}var Em;Em=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ue.current)He=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return He=!1,yv(e,t,n);He=!!(e.flags&131072)}else He=!1,ue&&t.flags&1048576&&Mf(t,Ui,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ci(e,t),e=t.pendingProps;var s=Cr(t,Ie.current);wr(t,n),s=dc(null,t,r,e,s,n);var i=hc();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,$e(r)?(i=!0,zi(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,oc(t),s.updater=bo,t.stateNode=s,s._reactInternals=t,il(t,r,e,n),t=ll(null,t,r,!0,i,n)):(t.tag=0,ue&&i&&Zl(t),Fe(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ci(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=Rv(r),e=ft(r,e),s){case 0:t=al(null,t,r,e,n);break e;case 1:t=Wu(null,t,r,e,n);break e;case 11:t=Uu(null,t,r,e,n);break e;case 14:t=$u(null,t,r,ft(r.type,e),n);break e}throw Error(_(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:ft(r,s),al(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:ft(r,s),Wu(e,t,r,s,n);case 3:e:{if(dm(t),e===null)throw Error(_(387));r=t.pendingProps,i=t.memoizedState,s=i.element,Ff(e,t),qi(t,r,null,n);var o=t.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=Nr(Error(_(423)),t),t=qu(e,t,r,n,s);break e}else if(r!==s){s=Nr(Error(_(424)),t),t=qu(e,t,r,n,s);break e}else for(Qe=rn(t.stateNode.containerInfo.firstChild),Xe=t,ue=!0,pt=null,n=If(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Pr(),r===s){t=Gt(e,t,n);break e}Fe(e,t,r,n)}t=t.child}return t;case 5:return Vf(t),e===null&&nl(t),r=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,Ya(r,s)?o=null:i!==null&&Ya(r,i)&&(t.flags|=32),um(e,t),Fe(e,t,o,n),t.child;case 6:return e===null&&nl(t),null;case 13:return hm(e,t,n);case 4:return ac(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Tr(t,null,r,n):Fe(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:ft(r,s),Uu(e,t,r,s,n);case 7:return Fe(e,t,t.pendingProps,n),t.child;case 8:return Fe(e,t,t.pendingProps.children,n),t.child;case 12:return Fe(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,se($i,r._currentValue),r._currentValue=o,i!==null)if(xt(i.value,o)){if(i.children===s.children&&!Ue.current){t=Gt(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Dt(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),rl(i.return,n,t),a.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(_(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),rl(o,n,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Fe(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,wr(t,n),s=ct(s),r=r(s),t.flags|=1,Fe(e,t,r,n),t.child;case 14:return r=t.type,s=ft(r,t.pendingProps),s=ft(r.type,s),$u(e,t,r,s,n);case 15:return lm(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:ft(r,s),Ci(e,t),t.tag=1,$e(r)?(e=!0,zi(t)):e=!1,wr(t,n),im(t,r,s),il(t,r,s,n),ll(null,t,r,!0,e,n);case 19:return fm(e,t,n);case 22:return cm(e,t,n)}throw Error(_(156,t.tag))};function Nm(e,t){return tf(e,t)}function Lv(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function at(e,t,n,r){return new Lv(e,t,n,r)}function Sc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Rv(e){if(typeof e=="function")return Sc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Gl)return 11;if(e===zl)return 14}return 2}function ln(e,t){var n=e.alternate;return n===null?(n=at(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ei(e,t,n,r,s,i){var o=2;if(r=e,typeof e=="function")Sc(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Zn:return Rn(n.children,s,i,t);case Bl:o=8,s|=8;break;case Na:return e=at(12,n,t,s|2),e.elementType=Na,e.lanes=i,e;case _a:return e=at(13,n,t,s),e.elementType=_a,e.lanes=i,e;case Aa:return e=at(19,n,t,s),e.elementType=Aa,e.lanes=i,e;case Fh:return jo(n,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Ih:o=10;break e;case Oh:o=9;break e;case Gl:o=11;break e;case zl:o=14;break e;case qt:o=16,r=null;break e}throw Error(_(130,e==null?e:typeof e,""))}return t=at(o,n,t,s),t.elementType=e,t.type=r,t.lanes=i,t}function Rn(e,t,n,r){return e=at(7,e,r,t),e.lanes=n,e}function jo(e,t,n,r){return e=at(22,e,r,t),e.elementType=Fh,e.lanes=n,e.stateNode={isHidden:!1},e}function la(e,t,n){return e=at(6,e,null,t),e.lanes=n,e}function ca(e,t,n){return t=at(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Dv(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ho(0),this.expirationTimes=Ho(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ho(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function kc(e,t,n,r,s,i,o,a,c){return e=new Dv(e,t,n,a,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=at(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},oc(i),e}function Iv(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Jn,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function _m(e){if(!e)return hn;e=e._reactInternals;e:{if(qn(e)!==e||e.tag!==1)throw Error(_(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if($e(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(_(171))}if(e.tag===1){var n=e.type;if($e(n))return _f(e,n,t)}return t}function Am(e,t,n,r,s,i,o,a,c){return e=kc(n,r,!0,e,s,i,o,a,c),e.context=_m(null),n=e.current,r=Ve(),s=an(n),i=Dt(r,s),i.callback=t??null,sn(n,i,s),e.current.lanes=s,Ds(e,s,r),We(e,r),e}function Co(e,t,n,r){var s=t.current,i=Ve(),o=an(s);return n=_m(n),t.context===null?t.context=n:t.pendingContext=n,t=Dt(i,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=sn(s,t,o),e!==null&&(vt(e,s,o,i),Si(e,s,o)),o}function to(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function rd(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function jc(e,t){rd(e,t),(e=e.alternate)&&rd(e,t)}function Ov(){return null}var Mm=typeof reportError=="function"?reportError:function(e){console.error(e)};function Cc(e){this._internalRoot=e}Po.prototype.render=Cc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(_(409));Co(e,t,null,null)};Po.prototype.unmount=Cc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Vn(function(){Co(null,e,null,null)}),t[Vt]=null}};function Po(e){this._internalRoot=e}Po.prototype.unstable_scheduleHydration=function(e){if(e){var t=cf();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Xt.length&&t!==0&&t<Xt[n].priority;n++);Xt.splice(n,0,e),n===0&&df(e)}};function Pc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function To(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function sd(){}function Fv(e,t,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=to(o);i.call(u)}}var o=Am(t,r,e,0,null,!1,!1,"",sd);return e._reactRootContainer=o,e[Vt]=o.current,Ss(e.nodeType===8?e.parentNode:e),Vn(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var u=to(c);a.call(u)}}var c=kc(e,0,!1,null,null,!1,!1,"",sd);return e._reactRootContainer=c,e[Vt]=c.current,Ss(e.nodeType===8?e.parentNode:e),Vn(function(){Co(t,c,n,r)}),c}function Eo(e,t,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var c=to(o);a.call(c)}}Co(t,o,e,s)}else o=Fv(n,t,e,s,r);return to(o)}af=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Yr(t.pendingLanes);n!==0&&($l(t,n|1),We(t,ye()),!(ee&6)&&(_r=ye()+500,yn()))}break;case 13:Vn(function(){var r=Bt(e,1);if(r!==null){var s=Ve();vt(r,e,1,s)}}),jc(e,1)}};Wl=function(e){if(e.tag===13){var t=Bt(e,134217728);if(t!==null){var n=Ve();vt(t,e,134217728,n)}jc(e,134217728)}};lf=function(e){if(e.tag===13){var t=an(e),n=Bt(e,t);if(n!==null){var r=Ve();vt(n,e,t,r)}jc(e,t)}};cf=function(){return re};uf=function(e,t){var n=re;try{return re=e,t()}finally{re=n}};Ga=function(e,t,n){switch(t){case"input":if(Ra(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=xo(r);if(!s)throw Error(_(90));Bh(r),Ra(r,s)}}}break;case"textarea":zh(e,n);break;case"select":t=n.value,t!=null&&gr(e,!!n.multiple,t,!1)}};Qh=yc;Xh=Vn;var Vv={usingClientEntryPoint:!1,Events:[Os,rr,xo,qh,Kh,yc]},Wr={findFiberByHostInstance:Nn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Bv={bundleType:Wr.bundleType,version:Wr.version,rendererPackageName:Wr.rendererPackageName,rendererConfig:Wr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ht.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Zh(e),e===null?null:e.stateNode},findFiberByHostInstance:Wr.findFiberByHostInstance||Ov,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ui=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ui.isDisabled&&ui.supportsFiber)try{mo=ui.inject(Bv),jt=ui}catch{}}Ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Vv;Ze.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Pc(t))throw Error(_(200));return Iv(e,t,null,n)};Ze.createRoot=function(e,t){if(!Pc(e))throw Error(_(299));var n=!1,r="",s=Mm;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=kc(e,1,!1,null,null,n,!1,r,s),e[Vt]=t.current,Ss(e.nodeType===8?e.parentNode:e),new Cc(t)};Ze.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(_(188)):(e=Object.keys(e).join(","),Error(_(268,e)));return e=Zh(t),e=e===null?null:e.stateNode,e};Ze.flushSync=function(e){return Vn(e)};Ze.hydrate=function(e,t,n){if(!To(t))throw Error(_(200));return Eo(null,e,t,!0,n)};Ze.hydrateRoot=function(e,t,n){if(!Pc(e))throw Error(_(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=Mm;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=Am(t,null,e,1,n??null,s,!1,i,o),e[Vt]=t.current,Ss(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Po(t)};Ze.render=function(e,t,n){if(!To(t))throw Error(_(200));return Eo(null,e,t,!1,n)};Ze.unmountComponentAtNode=function(e){if(!To(e))throw Error(_(40));return e._reactRootContainer?(Vn(function(){Eo(null,null,e,!1,function(){e._reactRootContainer=null,e[Vt]=null})}),!0):!1};Ze.unstable_batchedUpdates=yc;Ze.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!To(n))throw Error(_(200));if(e==null||e._reactInternals===void 0)throw Error(_(38));return Eo(e,t,n,!1,r)};Ze.version="18.3.1-next-f1338f8080-20240426";function Lm(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Lm)}catch(e){console.error(e)}}Lm(),Mh.exports=Ze;var Gv=Mh.exports,id=Gv;Ta.createRoot=id.createRoot,Ta.hydrateRoot=id.hydrateRoot;const zv="modulepreload",Hv=function(e){return"/cat-tetris/"+e},od={},Rm=function(t,n,r){if(!n||n.length===0)return t();const s=document.getElementsByTagName("link");return Promise.all(n.map(i=>{if(i=Hv(i),i in od)return;od[i]=!0;const o=i.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!r)for(let h=s.length-1;h>=0;h--){const d=s[h];if(d.href===i&&(!o||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${a}`))return;const u=document.createElement("link");if(u.rel=o?"stylesheet":zv,o||(u.as="script",u.crossOrigin=""),u.href=i,document.head.appendChild(u),o)return new Promise((h,d)=>{u.addEventListener("load",h),u.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>t()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})},Dm=x.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),No=x.createContext({}),_o=x.createContext(null),Ao=typeof document<"u",Tc=Ao?x.useLayoutEffect:x.useEffect,Im=x.createContext({strict:!1}),Ec=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),Uv="framerAppearId",Om="data-"+Ec(Uv);function $v(e,t,n,r){const{visualElement:s}=x.useContext(No),i=x.useContext(Im),o=x.useContext(_o),a=x.useContext(Dm).reducedMotion,c=x.useRef();r=r||i.renderer,!c.current&&r&&(c.current=r(e,{visualState:t,parent:s,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:a}));const u=c.current;x.useInsertionEffect(()=>{u&&u.update(n,o)});const h=x.useRef(!!(n[Om]&&!window.HandoffComplete));return Tc(()=>{u&&(u.render(),h.current&&u.animationState&&u.animationState.animateChanges())}),x.useEffect(()=>{u&&(u.updateFeatures(),!h.current&&u.animationState&&u.animationState.animateChanges(),h.current&&(h.current=!1,window.HandoffComplete=!0))}),u}function ur(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function Wv(e,t,n){return x.useCallback(r=>{r&&e.mount&&e.mount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):ur(n)&&(n.current=r))},[t])}function As(e){return typeof e=="string"||Array.isArray(e)}function Mo(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const Nc=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],_c=["initial",...Nc];function Lo(e){return Mo(e.animate)||_c.some(t=>As(e[t]))}function Fm(e){return!!(Lo(e)||e.variants)}function qv(e,t){if(Lo(e)){const{initial:n,animate:r}=e;return{initial:n===!1||As(n)?n:void 0,animate:As(r)?r:void 0}}return e.inherit!==!1?t:{}}function Kv(e){const{initial:t,animate:n}=qv(e,x.useContext(No));return x.useMemo(()=>({initial:t,animate:n}),[ad(t),ad(n)])}function ad(e){return Array.isArray(e)?e.join(" "):e}const ld={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ms={};for(const e in ld)Ms[e]={isEnabled:t=>ld[e].some(n=>!!t[n])};function Qv(e){for(const t in e)Ms[t]={...Ms[t],...e[t]}}const Ac=x.createContext({}),Vm=x.createContext({}),Xv=Symbol.for("motionComponentSymbol");function Yv({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:r,Component:s}){e&&Qv(e);function i(a,c){let u;const h={...x.useContext(Dm),...a,layoutId:Jv(a)},{isStatic:d}=h,f=Kv(a),y=r(a,d);if(!d&&Ao){f.visualElement=$v(s,y,h,t);const v=x.useContext(Vm),w=x.useContext(Im).strict;f.visualElement&&(u=f.visualElement.loadFeatures(h,w,e,v))}return x.createElement(No.Provider,{value:f},u&&f.visualElement?x.createElement(u,{visualElement:f.visualElement,...h}):null,n(s,a,Wv(y,f.visualElement,c),y,d,f.visualElement))}const o=x.forwardRef(i);return o[Xv]=s,o}function Jv({layoutId:e}){const t=x.useContext(Ac).id;return t&&e!==void 0?t+"-"+e:e}function Zv(e){function t(r,s={}){return Yv(e(r,s))}if(typeof Proxy>"u")return t;const n=new Map;return new Proxy(t,{get:(r,s)=>(n.has(s)||n.set(s,t(s)),n.get(s))})}const ex=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Mc(e){return typeof e!="string"||e.includes("-")?!1:!!(ex.indexOf(e)>-1||/[A-Z]/.test(e))}const no={};function tx(e){Object.assign(no,e)}const Vs=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Kn=new Set(Vs);function Bm(e,{layout:t,layoutId:n}){return Kn.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!no[e]||e==="opacity")}const qe=e=>!!(e&&e.getVelocity),nx={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},rx=Vs.length;function sx(e,{enableHardwareAcceleration:t=!0,allowTransformNone:n=!0},r,s){let i="";for(let o=0;o<rx;o++){const a=Vs[o];if(e[a]!==void 0){const c=nx[a]||a;i+=`${c}(${e[a]}) `}}return t&&!e.z&&(i+="translateZ(0)"),i=i.trim(),s?i=s(e,r?"":i):n&&r&&(i="none"),i}const Gm=e=>t=>typeof t=="string"&&t.startsWith(e),zm=Gm("--"),wl=Gm("var(--"),ix=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,ox=(e,t)=>t&&typeof e=="number"?t.transform(e):e,fn=(e,t,n)=>Math.min(Math.max(n,e),t),Qn={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},cs={...Qn,transform:e=>fn(0,1,e)},di={...Qn,default:1},us=e=>Math.round(e*1e5)/1e5,Ro=/(-)?([\d]*\.?[\d])+/g,Hm=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,ax=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Bs(e){return typeof e=="string"}const Gs=e=>({test:t=>Bs(t)&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),$t=Gs("deg"),Pt=Gs("%"),$=Gs("px"),lx=Gs("vh"),cx=Gs("vw"),cd={...Pt,parse:e=>Pt.parse(e)/100,transform:e=>Pt.transform(e*100)},ud={...Qn,transform:Math.round},Um={borderWidth:$,borderTopWidth:$,borderRightWidth:$,borderBottomWidth:$,borderLeftWidth:$,borderRadius:$,radius:$,borderTopLeftRadius:$,borderTopRightRadius:$,borderBottomRightRadius:$,borderBottomLeftRadius:$,width:$,maxWidth:$,height:$,maxHeight:$,size:$,top:$,right:$,bottom:$,left:$,padding:$,paddingTop:$,paddingRight:$,paddingBottom:$,paddingLeft:$,margin:$,marginTop:$,marginRight:$,marginBottom:$,marginLeft:$,rotate:$t,rotateX:$t,rotateY:$t,rotateZ:$t,scale:di,scaleX:di,scaleY:di,scaleZ:di,skew:$t,skewX:$t,skewY:$t,distance:$,translateX:$,translateY:$,translateZ:$,x:$,y:$,z:$,perspective:$,transformPerspective:$,opacity:cs,originX:cd,originY:cd,originZ:$,zIndex:ud,fillOpacity:cs,strokeOpacity:cs,numOctaves:ud};function Lc(e,t,n,r){const{style:s,vars:i,transform:o,transformOrigin:a}=e;let c=!1,u=!1,h=!0;for(const d in t){const f=t[d];if(zm(d)){i[d]=f;continue}const y=Um[d],v=ox(f,y);if(Kn.has(d)){if(c=!0,o[d]=v,!h)continue;f!==(y.default||0)&&(h=!1)}else d.startsWith("origin")?(u=!0,a[d]=v):s[d]=v}if(t.transform||(c||r?s.transform=sx(e.transform,n,h,r):s.transform&&(s.transform="none")),u){const{originX:d="50%",originY:f="50%",originZ:y=0}=a;s.transformOrigin=`${d} ${f} ${y}`}}const Rc=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function $m(e,t,n){for(const r in t)!qe(t[r])&&!Bm(r,n)&&(e[r]=t[r])}function ux({transformTemplate:e},t,n){return x.useMemo(()=>{const r=Rc();return Lc(r,t,{enableHardwareAcceleration:!n},e),Object.assign({},r.vars,r.style)},[t])}function dx(e,t,n){const r=e.style||{},s={};return $m(s,r,e),Object.assign(s,ux(e,t,n)),e.transformValues?e.transformValues(s):s}function hx(e,t,n){const r={},s=dx(e,t,n);return e.drag&&e.dragListener!==!1&&(r.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=s,r}const fx=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function ro(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||fx.has(e)}let Wm=e=>!ro(e);function mx(e){e&&(Wm=t=>t.startsWith("on")?!ro(t):e(t))}try{mx(require("@emotion/is-prop-valid").default)}catch{}function px(e,t,n){const r={};for(const s in e)s==="values"&&typeof e.values=="object"||(Wm(s)||n===!0&&ro(s)||!t&&!ro(s)||e.draggable&&s.startsWith("onDrag"))&&(r[s]=e[s]);return r}function dd(e,t,n){return typeof e=="string"?e:$.transform(t+n*e)}function gx(e,t,n){const r=dd(t,e.x,e.width),s=dd(n,e.y,e.height);return`${r} ${s}`}const vx={offset:"stroke-dashoffset",array:"stroke-dasharray"},xx={offset:"strokeDashoffset",array:"strokeDasharray"};function yx(e,t,n=1,r=0,s=!0){e.pathLength=1;const i=s?vx:xx;e[i.offset]=$.transform(-r);const o=$.transform(t),a=$.transform(n);e[i.array]=`${o} ${a}`}function Dc(e,{attrX:t,attrY:n,attrScale:r,originX:s,originY:i,pathLength:o,pathSpacing:a=1,pathOffset:c=0,...u},h,d,f){if(Lc(e,u,h,f),d){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:y,style:v,dimensions:w}=e;y.transform&&(w&&(v.transform=y.transform),delete y.transform),w&&(s!==void 0||i!==void 0||v.transform)&&(v.transformOrigin=gx(w,s!==void 0?s:.5,i!==void 0?i:.5)),t!==void 0&&(y.x=t),n!==void 0&&(y.y=n),r!==void 0&&(y.scale=r),o!==void 0&&yx(y,o,a,c,!1)}const qm=()=>({...Rc(),attrs:{}}),Ic=e=>typeof e=="string"&&e.toLowerCase()==="svg";function wx(e,t,n,r){const s=x.useMemo(()=>{const i=qm();return Dc(i,t,{enableHardwareAcceleration:!1},Ic(r),e.transformTemplate),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};$m(i,e.style,e),s.style={...i,...s.style}}return s}function bx(e=!1){return(n,r,s,{latestValues:i},o)=>{const c=(Mc(n)?wx:hx)(r,i,o,n),h={...px(r,typeof n=="string",e),...c,ref:s},{children:d}=r,f=x.useMemo(()=>qe(d)?d.get():d,[d]);return x.createElement(n,{...h,children:f})}}function Km(e,{style:t,vars:n},r,s){Object.assign(e.style,t,s&&s.getProjectionStyles(r));for(const i in n)e.style.setProperty(i,n[i])}const Qm=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Xm(e,t,n,r){Km(e,t,void 0,r);for(const s in t.attrs)e.setAttribute(Qm.has(s)?s:Ec(s),t.attrs[s])}function Oc(e,t){const{style:n}=e,r={};for(const s in n)(qe(n[s])||t.style&&qe(t.style[s])||Bm(s,e))&&(r[s]=n[s]);return r}function Ym(e,t){const n=Oc(e,t);for(const r in e)if(qe(e[r])||qe(t[r])){const s=Vs.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[s]=e[r]}return n}function Fc(e,t,n,r={},s={}){return typeof t=="function"&&(t=t(n!==void 0?n:e.custom,r,s)),typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"&&(t=t(n!==void 0?n:e.custom,r,s)),t}function Jm(e){const t=x.useRef(null);return t.current===null&&(t.current=e()),t.current}const so=e=>Array.isArray(e),Sx=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),kx=e=>so(e)?e[e.length-1]||0:e;function Ni(e){const t=qe(e)?e.get():e;return Sx(t)?t.toValue():t}function jx({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:n},r,s,i){const o={latestValues:Cx(r,s,i,e),renderState:t()};return n&&(o.mount=a=>n(r,a,o)),o}const Zm=e=>(t,n)=>{const r=x.useContext(No),s=x.useContext(_o),i=()=>jx(e,t,r,s);return n?i():Jm(i)};function Cx(e,t,n,r){const s={},i=r(e,{});for(const f in i)s[f]=Ni(i[f]);let{initial:o,animate:a}=e;const c=Lo(e),u=Fm(e);t&&u&&!c&&e.inherit!==!1&&(o===void 0&&(o=t.initial),a===void 0&&(a=t.animate));let h=n?n.initial===!1:!1;h=h||o===!1;const d=h?a:o;return d&&typeof d!="boolean"&&!Mo(d)&&(Array.isArray(d)?d:[d]).forEach(y=>{const v=Fc(e,y);if(!v)return;const{transitionEnd:w,transition:S,...p}=v;for(const m in p){let g=p[m];if(Array.isArray(g)){const b=h?g.length-1:0;g=g[b]}g!==null&&(s[m]=g)}for(const m in w)s[m]=w[m]}),s}const ge=e=>e;class hd{constructor(){this.order=[],this.scheduled=new Set}add(t){if(!this.scheduled.has(t))return this.scheduled.add(t),this.order.push(t),!0}remove(t){const n=this.order.indexOf(t);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(t))}clear(){this.order.length=0,this.scheduled.clear()}}function Px(e){let t=new hd,n=new hd,r=0,s=!1,i=!1;const o=new WeakSet,a={schedule:(c,u=!1,h=!1)=>{const d=h&&s,f=d?t:n;return u&&o.add(c),f.add(c)&&d&&s&&(r=t.order.length),c},cancel:c=>{n.remove(c),o.delete(c)},process:c=>{if(s){i=!0;return}if(s=!0,[t,n]=[n,t],n.clear(),r=t.order.length,r)for(let u=0;u<r;u++){const h=t.order[u];h(c),o.has(h)&&(a.schedule(h),e())}s=!1,i&&(i=!1,a.process(c))}};return a}const hi=["prepare","read","update","preRender","render","postRender"],Tx=40;function Ex(e,t){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=hi.reduce((d,f)=>(d[f]=Px(()=>n=!0),d),{}),o=d=>i[d].process(s),a=()=>{const d=performance.now();n=!1,s.delta=r?1e3/60:Math.max(Math.min(d-s.timestamp,Tx),1),s.timestamp=d,s.isProcessing=!0,hi.forEach(o),s.isProcessing=!1,n&&t&&(r=!1,e(a))},c=()=>{n=!0,r=!0,s.isProcessing||e(a)};return{schedule:hi.reduce((d,f)=>{const y=i[f];return d[f]=(v,w=!1,S=!1)=>(n||c(),y.schedule(v,w,S)),d},{}),cancel:d=>hi.forEach(f=>i[f].cancel(d)),state:s,steps:i}}const{schedule:ie,cancel:zt,state:Le,steps:ua}=Ex(typeof requestAnimationFrame<"u"?requestAnimationFrame:ge,!0),Nx={useVisualState:Zm({scrapeMotionValuesFromProps:Ym,createRenderState:qm,onMount:(e,t,{renderState:n,latestValues:r})=>{ie.read(()=>{try{n.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),ie.render(()=>{Dc(n,r,{enableHardwareAcceleration:!1},Ic(t.tagName),e.transformTemplate),Xm(t,n)})}})},_x={useVisualState:Zm({scrapeMotionValuesFromProps:Oc,createRenderState:Rc})};function Ax(e,{forwardMotionProps:t=!1},n,r){return{...Mc(e)?Nx:_x,preloadedFeatures:n,useRender:bx(t),createVisualElement:r,Component:e}}function Mt(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}const ep=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function Do(e,t="page"){return{point:{x:e[t+"X"],y:e[t+"Y"]}}}const Mx=e=>t=>ep(t)&&e(t,Do(t));function It(e,t,n,r){return Mt(e,t,Mx(n),r)}const Lx=(e,t)=>n=>t(e(n)),cn=(...e)=>e.reduce(Lx);function tp(e){let t=null;return()=>{const n=()=>{t=null};return t===null?(t=e,n):!1}}const fd=tp("dragHorizontal"),md=tp("dragVertical");function np(e){let t=!1;if(e==="y")t=md();else if(e==="x")t=fd();else{const n=fd(),r=md();n&&r?t=()=>{n(),r()}:(n&&n(),r&&r())}return t}function rp(){const e=np(!0);return e?(e(),!1):!0}class wn{constructor(t){this.isMounted=!1,this.node=t}update(){}}function pd(e,t){const n="pointer"+(t?"enter":"leave"),r="onHover"+(t?"Start":"End"),s=(i,o)=>{if(i.pointerType==="touch"||rp())return;const a=e.getProps();e.animationState&&a.whileHover&&e.animationState.setActive("whileHover",t),a[r]&&ie.update(()=>a[r](i,o))};return It(e.current,n,s,{passive:!e.getProps()[r]})}class Rx extends wn{mount(){this.unmount=cn(pd(this.node,!0),pd(this.node,!1))}unmount(){}}class Dx extends wn{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=cn(Mt(this.node.current,"focus",()=>this.onFocus()),Mt(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const sp=(e,t)=>t?e===t?!0:sp(e,t.parentElement):!1;function da(e,t){if(!t)return;const n=new PointerEvent("pointer"+e);t(n,Do(n))}class Ix extends wn{constructor(){super(...arguments),this.removeStartListeners=ge,this.removeEndListeners=ge,this.removeAccessibleListeners=ge,this.startPointerPress=(t,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),i=It(window,"pointerup",(a,c)=>{if(!this.checkPressEnd())return;const{onTap:u,onTapCancel:h,globalTapTarget:d}=this.node.getProps();ie.update(()=>{!d&&!sp(this.node.current,a.target)?h&&h(a,c):u&&u(a,c)})},{passive:!(r.onTap||r.onPointerUp)}),o=It(window,"pointercancel",(a,c)=>this.cancelPress(a,c),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=cn(i,o),this.startPress(t,n)},this.startAccessiblePress=()=>{const t=i=>{if(i.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||da("up",(c,u)=>{const{onTap:h}=this.node.getProps();h&&ie.update(()=>h(c,u))})};this.removeEndListeners(),this.removeEndListeners=Mt(this.node.current,"keyup",o),da("down",(a,c)=>{this.startPress(a,c)})},n=Mt(this.node.current,"keydown",t),r=()=>{this.isPressing&&da("cancel",(i,o)=>this.cancelPress(i,o))},s=Mt(this.node.current,"blur",r);this.removeAccessibleListeners=cn(n,s)}}startPress(t,n){this.isPressing=!0;const{onTapStart:r,whileTap:s}=this.node.getProps();s&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&ie.update(()=>r(t,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!rp()}cancelPress(t,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&ie.update(()=>r(t,n))}mount(){const t=this.node.getProps(),n=It(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),r=Mt(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=cn(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const bl=new WeakMap,ha=new WeakMap,Ox=e=>{const t=bl.get(e.target);t&&t(e)},Fx=e=>{e.forEach(Ox)};function Vx({root:e,...t}){const n=e||document;ha.has(n)||ha.set(n,{});const r=ha.get(n),s=JSON.stringify(t);return r[s]||(r[s]=new IntersectionObserver(Fx,{root:e,...t})),r[s]}function Bx(e,t,n){const r=Vx(t);return bl.set(e,n),r.observe(e),()=>{bl.delete(e),r.unobserve(e)}}const Gx={some:0,all:1};class zx extends wn{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:i}=t,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:Gx[s]},a=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,i&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:h,onViewportLeave:d}=this.node.getProps(),f=u?h:d;f&&f(c)};return Bx(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(Hx(t,n))&&this.startObserver()}unmount(){}}function Hx({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const Ux={inView:{Feature:zx},tap:{Feature:Ix},focus:{Feature:Dx},hover:{Feature:Rx}};function ip(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function $x(e){const t={};return e.values.forEach((n,r)=>t[r]=n.get()),t}function Wx(e){const t={};return e.values.forEach((n,r)=>t[r]=n.getVelocity()),t}function Io(e,t,n){const r=e.getProps();return Fc(r,t,n!==void 0?n:r.custom,$x(e),Wx(e))}let qx=ge,Vc=ge;const un=e=>e*1e3,Ot=e=>e/1e3,Kx={current:!1},op=e=>Array.isArray(e)&&typeof e[0]=="number";function ap(e){return!!(!e||typeof e=="string"&&lp[e]||op(e)||Array.isArray(e)&&e.every(ap))}const Zr=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,lp={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Zr([0,.65,.55,1]),circOut:Zr([.55,0,1,.45]),backIn:Zr([.31,.01,.66,-.59]),backOut:Zr([.33,1.53,.69,.99])};function cp(e){if(e)return op(e)?Zr(e):Array.isArray(e)?e.map(cp):lp[e]}function Qx(e,t,n,{delay:r=0,duration:s,repeat:i=0,repeatType:o="loop",ease:a,times:c}={}){const u={[t]:n};c&&(u.offset=c);const h=cp(a);return Array.isArray(h)&&(u.easing=h),e.animate(u,{delay:r,duration:s,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"})}function Xx(e,{repeat:t,repeatType:n="loop"}){const r=t&&n!=="loop"&&t%2===1?0:e.length-1;return e[r]}const up=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,Yx=1e-7,Jx=12;function Zx(e,t,n,r,s){let i,o,a=0;do o=t+(n-t)/2,i=up(o,r,s)-e,i>0?n=o:t=o;while(Math.abs(i)>Yx&&++a<Jx);return o}function zs(e,t,n,r){if(e===t&&n===r)return ge;const s=i=>Zx(i,0,1,e,n);return i=>i===0||i===1?i:up(s(i),t,r)}const ey=zs(.42,0,1,1),ty=zs(0,0,.58,1),dp=zs(.42,0,.58,1),ny=e=>Array.isArray(e)&&typeof e[0]!="number",hp=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,fp=e=>t=>1-e(1-t),Bc=e=>1-Math.sin(Math.acos(e)),mp=fp(Bc),ry=hp(Bc),pp=zs(.33,1.53,.69,.99),Gc=fp(pp),sy=hp(Gc),iy=e=>(e*=2)<1?.5*Gc(e):.5*(2-Math.pow(2,-10*(e-1))),oy={linear:ge,easeIn:ey,easeInOut:dp,easeOut:ty,circIn:Bc,circInOut:ry,circOut:mp,backIn:Gc,backInOut:sy,backOut:pp,anticipate:iy},gd=e=>{if(Array.isArray(e)){Vc(e.length===4);const[t,n,r,s]=e;return zs(t,n,r,s)}else if(typeof e=="string")return oy[e];return e},zc=(e,t)=>n=>!!(Bs(n)&&ax.test(n)&&n.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(n,t)),gp=(e,t,n)=>r=>{if(!Bs(r))return r;const[s,i,o,a]=r.match(Ro);return{[e]:parseFloat(s),[t]:parseFloat(i),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},ay=e=>fn(0,255,e),fa={...Qn,transform:e=>Math.round(ay(e))},Mn={test:zc("rgb","red"),parse:gp("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+fa.transform(e)+", "+fa.transform(t)+", "+fa.transform(n)+", "+us(cs.transform(r))+")"};function ly(e){let t="",n="",r="",s="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),s=e.substring(4,5),t+=t,n+=n,r+=r,s+=s),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const Sl={test:zc("#"),parse:ly,transform:Mn.transform},dr={test:zc("hsl","hue"),parse:gp("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+Pt.transform(us(t))+", "+Pt.transform(us(n))+", "+us(cs.transform(r))+")"},Oe={test:e=>Mn.test(e)||Sl.test(e)||dr.test(e),parse:e=>Mn.test(e)?Mn.parse(e):dr.test(e)?dr.parse(e):Sl.parse(e),transform:e=>Bs(e)?e:e.hasOwnProperty("red")?Mn.transform(e):dr.transform(e)},he=(e,t,n)=>-n*e+n*t+e;function ma(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function cy({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let s=0,i=0,o=0;if(!t)s=i=o=n;else{const a=n<.5?n*(1+t):n+t-n*t,c=2*n-a;s=ma(c,a,e+1/3),i=ma(c,a,e),o=ma(c,a,e-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:r}}const pa=(e,t,n)=>{const r=e*e;return Math.sqrt(Math.max(0,n*(t*t-r)+r))},uy=[Sl,Mn,dr],dy=e=>uy.find(t=>t.test(e));function vd(e){const t=dy(e);let n=t.parse(e);return t===dr&&(n=cy(n)),n}const vp=(e,t)=>{const n=vd(e),r=vd(t),s={...n};return i=>(s.red=pa(n.red,r.red,i),s.green=pa(n.green,r.green,i),s.blue=pa(n.blue,r.blue,i),s.alpha=he(n.alpha,r.alpha,i),Mn.transform(s))};function hy(e){var t,n;return isNaN(e)&&Bs(e)&&(((t=e.match(Ro))===null||t===void 0?void 0:t.length)||0)+(((n=e.match(Hm))===null||n===void 0?void 0:n.length)||0)>0}const xp={regex:ix,countKey:"Vars",token:"${v}",parse:ge},yp={regex:Hm,countKey:"Colors",token:"${c}",parse:Oe.parse},wp={regex:Ro,countKey:"Numbers",token:"${n}",parse:Qn.parse};function ga(e,{regex:t,countKey:n,token:r,parse:s}){const i=e.tokenised.match(t);i&&(e["num"+n]=i.length,e.tokenised=e.tokenised.replace(t,r),e.values.push(...i.map(s)))}function io(e){const t=e.toString(),n={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&ga(n,xp),ga(n,yp),ga(n,wp),n}function bp(e){return io(e).values}function Sp(e){const{values:t,numColors:n,numVars:r,tokenised:s}=io(e),i=t.length;return o=>{let a=s;for(let c=0;c<i;c++)c<r?a=a.replace(xp.token,o[c]):c<r+n?a=a.replace(yp.token,Oe.transform(o[c])):a=a.replace(wp.token,us(o[c]));return a}}const fy=e=>typeof e=="number"?0:e;function my(e){const t=bp(e);return Sp(e)(t.map(fy))}const mn={test:hy,parse:bp,createTransformer:Sp,getAnimatableNone:my},kp=(e,t)=>n=>`${n>0?t:e}`;function jp(e,t){return typeof e=="number"?n=>he(e,t,n):Oe.test(e)?vp(e,t):e.startsWith("var(")?kp(e,t):Pp(e,t)}const Cp=(e,t)=>{const n=[...e],r=n.length,s=e.map((i,o)=>jp(i,t[o]));return i=>{for(let o=0;o<r;o++)n[o]=s[o](i);return n}},py=(e,t)=>{const n={...e,...t},r={};for(const s in n)e[s]!==void 0&&t[s]!==void 0&&(r[s]=jp(e[s],t[s]));return s=>{for(const i in r)n[i]=r[i](s);return n}},Pp=(e,t)=>{const n=mn.createTransformer(t),r=io(e),s=io(t);return r.numVars===s.numVars&&r.numColors===s.numColors&&r.numNumbers>=s.numNumbers?cn(Cp(r.values,s.values),n):kp(e,t)},Ls=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r},xd=(e,t)=>n=>he(e,t,n);function gy(e){return typeof e=="number"?xd:typeof e=="string"?Oe.test(e)?vp:Pp:Array.isArray(e)?Cp:typeof e=="object"?py:xd}function vy(e,t,n){const r=[],s=n||gy(e[0]),i=e.length-1;for(let o=0;o<i;o++){let a=s(e[o],e[o+1]);if(t){const c=Array.isArray(t)?t[o]||ge:t;a=cn(c,a)}r.push(a)}return r}function Tp(e,t,{clamp:n=!0,ease:r,mixer:s}={}){const i=e.length;if(Vc(i===t.length),i===1)return()=>t[0];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=vy(t,r,s),a=o.length,c=u=>{let h=0;if(a>1)for(;h<e.length-2&&!(u<e[h+1]);h++);const d=Ls(e[h],e[h+1],u);return o[h](d)};return n?u=>c(fn(e[0],e[i-1],u)):c}function xy(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const s=Ls(0,t,r);e.push(he(n,1,s))}}function yy(e){const t=[0];return xy(t,e.length-1),t}function wy(e,t){return e.map(n=>n*t)}function by(e,t){return e.map(()=>t||dp).splice(0,e.length-1)}function oo({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const s=ny(r)?r.map(gd):gd(r),i={done:!1,value:t[0]},o=wy(n&&n.length===t.length?n:yy(t),e),a=Tp(o,t,{ease:Array.isArray(s)?s:by(t,s)});return{calculatedDuration:e,next:c=>(i.value=a(c),i.done=c>=e,i)}}function Ep(e,t){return t?e*(1e3/t):0}const Sy=5;function Np(e,t,n){const r=Math.max(t-Sy,0);return Ep(n-e(r),t-r)}const va=.001,ky=.01,yd=10,jy=.05,Cy=1;function Py({duration:e=800,bounce:t=.25,velocity:n=0,mass:r=1}){let s,i;qx(e<=un(yd));let o=1-t;o=fn(jy,Cy,o),e=fn(ky,yd,Ot(e)),o<1?(s=u=>{const h=u*o,d=h*e,f=h-n,y=kl(u,o),v=Math.exp(-d);return va-f/y*v},i=u=>{const d=u*o*e,f=d*n+n,y=Math.pow(o,2)*Math.pow(u,2)*e,v=Math.exp(-d),w=kl(Math.pow(u,2),o);return(-s(u)+va>0?-1:1)*((f-y)*v)/w}):(s=u=>{const h=Math.exp(-u*e),d=(u-n)*e+1;return-va+h*d},i=u=>{const h=Math.exp(-u*e),d=(n-u)*(e*e);return h*d});const a=5/e,c=Ey(s,i,a);if(e=un(e),isNaN(c))return{stiffness:100,damping:10,duration:e};{const u=Math.pow(c,2)*r;return{stiffness:u,damping:o*2*Math.sqrt(r*u),duration:e}}}const Ty=12;function Ey(e,t,n){let r=n;for(let s=1;s<Ty;s++)r=r-e(r)/t(r);return r}function kl(e,t){return e*Math.sqrt(1-t*t)}const Ny=["duration","bounce"],_y=["stiffness","damping","mass"];function wd(e,t){return t.some(n=>e[n]!==void 0)}function Ay(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!wd(e,_y)&&wd(e,Ny)){const n=Py(e);t={...t,...n,mass:1},t.isResolvedFromDuration=!0}return t}function _p({keyframes:e,restDelta:t,restSpeed:n,...r}){const s=e[0],i=e[e.length-1],o={done:!1,value:s},{stiffness:a,damping:c,mass:u,duration:h,velocity:d,isResolvedFromDuration:f}=Ay({...r,velocity:-Ot(r.velocity||0)}),y=d||0,v=c/(2*Math.sqrt(a*u)),w=i-s,S=Ot(Math.sqrt(a/u)),p=Math.abs(w)<5;n||(n=p?.01:2),t||(t=p?.005:.5);let m;if(v<1){const g=kl(S,v);m=b=>{const j=Math.exp(-v*S*b);return i-j*((y+v*S*w)/g*Math.sin(g*b)+w*Math.cos(g*b))}}else if(v===1)m=g=>i-Math.exp(-S*g)*(w+(y+S*w)*g);else{const g=S*Math.sqrt(v*v-1);m=b=>{const j=Math.exp(-v*S*b),k=Math.min(g*b,300);return i-j*((y+v*S*w)*Math.sinh(k)+g*w*Math.cosh(k))/g}}return{calculatedDuration:f&&h||null,next:g=>{const b=m(g);if(f)o.done=g>=h;else{let j=y;g!==0&&(v<1?j=Np(m,g,b):j=0);const k=Math.abs(j)<=n,C=Math.abs(i-b)<=t;o.done=k&&C}return o.value=o.done?i:b,o}}}function bd({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:a,max:c,restDelta:u=.5,restSpeed:h}){const d=e[0],f={done:!1,value:d},y=P=>a!==void 0&&P<a||c!==void 0&&P>c,v=P=>a===void 0?c:c===void 0||Math.abs(a-P)<Math.abs(c-P)?a:c;let w=n*t;const S=d+w,p=o===void 0?S:o(S);p!==S&&(w=p-d);const m=P=>-w*Math.exp(-P/r),g=P=>p+m(P),b=P=>{const N=m(P),A=g(P);f.done=Math.abs(N)<=u,f.value=f.done?p:A};let j,k;const C=P=>{y(f.value)&&(j=P,k=_p({keyframes:[f.value,v(f.value)],velocity:Np(g,P,f.value),damping:s,stiffness:i,restDelta:u,restSpeed:h}))};return C(0),{calculatedDuration:null,next:P=>{let N=!1;return!k&&j===void 0&&(N=!0,b(P),C(P)),j!==void 0&&P>j?k.next(P-j):(!N&&b(P),f)}}}const My=e=>{const t=({timestamp:n})=>e(n);return{start:()=>ie.update(t,!0),stop:()=>zt(t),now:()=>Le.isProcessing?Le.timestamp:performance.now()}},Sd=2e4;function kd(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<Sd;)t+=n,r=e.next(t);return t>=Sd?1/0:t}const Ly={decay:bd,inertia:bd,tween:oo,keyframes:oo,spring:_p};function ao({autoplay:e=!0,delay:t=0,driver:n=My,keyframes:r,type:s="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:a="loop",onPlay:c,onStop:u,onComplete:h,onUpdate:d,...f}){let y=1,v=!1,w,S;const p=()=>{S=new Promise(D=>{w=D})};p();let m;const g=Ly[s]||oo;let b;g!==oo&&typeof r[0]!="number"&&(b=Tp([0,100],r,{clamp:!1}),r=[0,100]);const j=g({...f,keyframes:r});let k;a==="mirror"&&(k=g({...f,keyframes:[...r].reverse(),velocity:-(f.velocity||0)}));let C="idle",P=null,N=null,A=null;j.calculatedDuration===null&&i&&(j.calculatedDuration=kd(j));const{calculatedDuration:H}=j;let Y=1/0,Q=1/0;H!==null&&(Y=H+o,Q=Y*(i+1)-o);let Z=0;const J=D=>{if(N===null)return;y>0&&(N=Math.min(N,D)),y<0&&(N=Math.min(D-Q/y,N)),P!==null?Z=P:Z=Math.round(D-N)*y;const K=Z-t*(y>=0?1:-1),Te=y>=0?K<0:K>Q;Z=Math.max(K,0),C==="finished"&&P===null&&(Z=Q);let je=Z,L=j;if(i){const W=Math.min(Z,Q)/Y;let te=Math.floor(W),tt=W%1;!tt&&W>=1&&(tt=1),tt===1&&te--,te=Math.min(te,i+1),!!(te%2)&&(a==="reverse"?(tt=1-tt,o&&(tt-=o/Y)):a==="mirror"&&(L=k)),je=fn(0,1,tt)*Y}const M=Te?{done:!1,value:r[0]}:L.next(je);b&&(M.value=b(M.value));let{done:O}=M;!Te&&H!==null&&(O=y>=0?Z>=Q:Z<=0);const U=P===null&&(C==="finished"||C==="running"&&O);return d&&d(M.value),U&&T(),M},G=()=>{m&&m.stop(),m=void 0},q=()=>{C="idle",G(),w(),p(),N=A=null},T=()=>{C="finished",h&&h(),G(),w()},F=()=>{if(v)return;m||(m=n(J));const D=m.now();c&&c(),P!==null?N=D-P:(!N||C==="finished")&&(N=D),C==="finished"&&p(),A=N,P=null,C="running",m.start()};e&&F();const V={then(D,K){return S.then(D,K)},get time(){return Ot(Z)},set time(D){D=un(D),Z=D,P!==null||!m||y===0?P=D:N=m.now()-D/y},get duration(){const D=j.calculatedDuration===null?kd(j):j.calculatedDuration;return Ot(D)},get speed(){return y},set speed(D){D===y||!m||(y=D,V.time=Ot(Z))},get state(){return C},play:F,pause:()=>{C="paused",P=Z},stop:()=>{v=!0,C!=="idle"&&(C="idle",u&&u(),q())},cancel:()=>{A!==null&&J(A),q()},complete:()=>{C="finished"},sample:D=>(N=0,J(D))};return V}function Ry(e){let t;return()=>(t===void 0&&(t=e()),t)}const Dy=Ry(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Iy=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),fi=10,Oy=2e4,Fy=(e,t)=>t.type==="spring"||e==="backgroundColor"||!ap(t.ease);function Vy(e,t,{onUpdate:n,onComplete:r,...s}){if(!(Dy()&&Iy.has(t)&&!s.repeatDelay&&s.repeatType!=="mirror"&&s.damping!==0&&s.type!=="inertia"))return!1;let o=!1,a,c,u=!1;const h=()=>{c=new Promise(g=>{a=g})};h();let{keyframes:d,duration:f=300,ease:y,times:v}=s;if(Fy(t,s)){const g=ao({...s,repeat:0,delay:0});let b={done:!1,value:d[0]};const j=[];let k=0;for(;!b.done&&k<Oy;)b=g.sample(k),j.push(b.value),k+=fi;v=void 0,d=j,f=k-fi,y="linear"}const w=Qx(e.owner.current,t,d,{...s,duration:f,ease:y,times:v}),S=()=>{u=!1,w.cancel()},p=()=>{u=!0,ie.update(S),a(),h()};return w.onfinish=()=>{u||(e.set(Xx(d,s)),r&&r(),p())},{then(g,b){return c.then(g,b)},attachTimeline(g){return w.timeline=g,w.onfinish=null,ge},get time(){return Ot(w.currentTime||0)},set time(g){w.currentTime=un(g)},get speed(){return w.playbackRate},set speed(g){w.playbackRate=g},get duration(){return Ot(f)},play:()=>{o||(w.play(),zt(S))},pause:()=>w.pause(),stop:()=>{if(o=!0,w.playState==="idle")return;const{currentTime:g}=w;if(g){const b=ao({...s,autoplay:!1});e.setWithVelocity(b.sample(g-fi).value,b.sample(g).value,fi)}p()},complete:()=>{u||w.finish()},cancel:p}}function By({keyframes:e,delay:t,onUpdate:n,onComplete:r}){const s=()=>(n&&n(e[e.length-1]),r&&r(),{time:0,speed:1,duration:0,play:ge,pause:ge,stop:ge,then:i=>(i(),Promise.resolve()),cancel:ge,complete:ge});return t?ao({keyframes:[0,1],duration:0,delay:t,onComplete:s}):s()}const Gy={type:"spring",stiffness:500,damping:25,restSpeed:10},zy=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),Hy={type:"keyframes",duration:.8},Uy={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},$y=(e,{keyframes:t})=>t.length>2?Hy:Kn.has(e)?e.startsWith("scale")?zy(t[1]):Gy:Uy,jl=(e,t)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(mn.test(t)||t==="0")&&!t.startsWith("url(")),Wy=new Set(["brightness","contrast","saturate","opacity"]);function qy(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(Ro)||[];if(!r)return e;const s=n.replace(r,"");let i=Wy.has(t)?1:0;return r!==n&&(i*=100),t+"("+i+s+")"}const Ky=/([a-z-]*)\(.*?\)/g,Cl={...mn,getAnimatableNone:e=>{const t=e.match(Ky);return t?t.map(qy).join(" "):e}},Qy={...Um,color:Oe,backgroundColor:Oe,outlineColor:Oe,fill:Oe,stroke:Oe,borderColor:Oe,borderTopColor:Oe,borderRightColor:Oe,borderBottomColor:Oe,borderLeftColor:Oe,filter:Cl,WebkitFilter:Cl},Hc=e=>Qy[e];function Ap(e,t){let n=Hc(e);return n!==Cl&&(n=mn),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const Mp=e=>/^0[^.\s]+$/.test(e);function Xy(e){if(typeof e=="number")return e===0;if(e!==null)return e==="none"||e==="0"||Mp(e)}function Yy(e,t,n,r){const s=jl(t,n);let i;Array.isArray(n)?i=[...n]:i=[null,n];const o=r.from!==void 0?r.from:e.get();let a;const c=[];for(let u=0;u<i.length;u++)i[u]===null&&(i[u]=u===0?o:i[u-1]),Xy(i[u])&&c.push(u),typeof i[u]=="string"&&i[u]!=="none"&&i[u]!=="0"&&(a=i[u]);if(s&&c.length&&a)for(let u=0;u<c.length;u++){const h=c[u];i[h]=Ap(t,a)}return i}function Jy({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:a,from:c,elapsed:u,...h}){return!!Object.keys(h).length}function Uc(e,t){return e[t]||e.default||e}const Zy={skipAnimations:!1},$c=(e,t,n,r={})=>s=>{const i=Uc(r,e)||{},o=i.delay||r.delay||0;let{elapsed:a=0}=r;a=a-un(o);const c=Yy(t,e,n,i),u=c[0],h=c[c.length-1],d=jl(e,u),f=jl(e,h);let y={keyframes:c,velocity:t.getVelocity(),ease:"easeOut",...i,delay:-a,onUpdate:v=>{t.set(v),i.onUpdate&&i.onUpdate(v)},onComplete:()=>{s(),i.onComplete&&i.onComplete()}};if(Jy(i)||(y={...y,...$y(e,y)}),y.duration&&(y.duration=un(y.duration)),y.repeatDelay&&(y.repeatDelay=un(y.repeatDelay)),!d||!f||Kx.current||i.type===!1||Zy.skipAnimations)return By(y);if(!r.isHandoff&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const v=Vy(t,e,y);if(v)return v}return ao(y)};function lo(e){return!!(qe(e)&&e.add)}const Lp=e=>/^\-?\d*\.?\d+$/.test(e);function Wc(e,t){e.indexOf(t)===-1&&e.push(t)}function qc(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class Kc{constructor(){this.subscriptions=[]}add(t){return Wc(this.subscriptions,t),()=>qc(this.subscriptions,t)}notify(t,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,n,r);else for(let i=0;i<s;i++){const o=this.subscriptions[i];o&&o(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ew=e=>!isNaN(parseFloat(e));class tw{constructor(t,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,s=!0)=>{this.prev=this.current,this.current=r;const{delta:i,timestamp:o}=Le;this.lastUpdated!==o&&(this.timeDelta=i,this.lastUpdated=o,ie.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>ie.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=ew(this.current),this.owner=n.owner}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new Kc);const r=this.events[t].add(n);return t==="change"?()=>{r(),ie.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,r){this.set(n),this.prev=t,this.timeDelta=r}jump(t){this.updateAndNotify(t),this.prev=t,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?Ep(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ar(e,t){return new tw(e,t)}const Rp=e=>t=>t.test(e),nw={test:e=>e==="auto",parse:e=>e},Dp=[Qn,$,Pt,$t,cx,lx,nw],qr=e=>Dp.find(Rp(e)),rw=[...Dp,Oe,mn],sw=e=>rw.find(Rp(e));function iw(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,Ar(n))}function ow(e,t){const n=Io(e,t);let{transitionEnd:r={},transition:s={},...i}=n?e.makeTargetAnimatable(n,!1):{};i={...i,...r};for(const o in i){const a=kx(i[o]);iw(e,o,a)}}function aw(e,t,n){var r,s;const i=Object.keys(t).filter(a=>!e.hasValue(a)),o=i.length;if(o)for(let a=0;a<o;a++){const c=i[a],u=t[c];let h=null;Array.isArray(u)&&(h=u[0]),h===null&&(h=(s=(r=n[c])!==null&&r!==void 0?r:e.readValue(c))!==null&&s!==void 0?s:t[c]),h!=null&&(typeof h=="string"&&(Lp(h)||Mp(h))?h=parseFloat(h):!sw(h)&&mn.test(u)&&(h=Ap(c,u)),e.addValue(c,Ar(h,{owner:e})),n[c]===void 0&&(n[c]=h),h!==null&&e.setBaseTarget(c,h))}}function lw(e,t){return t?(t[e]||t.default||t).from:void 0}function cw(e,t,n){const r={};for(const s in e){const i=lw(s,t);if(i!==void 0)r[s]=i;else{const o=n.getValue(s);o&&(r[s]=o.get())}}return r}function uw({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function dw(e,t){const n=e.get();if(Array.isArray(t)){for(let r=0;r<t.length;r++)if(t[r]!==n)return!0}else return n!==t}function Ip(e,t,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:i=e.getDefaultTransition(),transitionEnd:o,...a}=e.makeTargetAnimatable(t);const c=e.getValue("willChange");r&&(i=r);const u=[],h=s&&e.animationState&&e.animationState.getState()[s];for(const d in a){const f=e.getValue(d),y=a[d];if(!f||y===void 0||h&&uw(h,d))continue;const v={delay:n,elapsed:0,...Uc(i||{},d)};if(window.HandoffAppearAnimations){const p=e.getProps()[Om];if(p){const m=window.HandoffAppearAnimations(p,d,f,ie);m!==null&&(v.elapsed=m,v.isHandoff=!0)}}let w=!v.isHandoff&&!dw(f,y);if(v.type==="spring"&&(f.getVelocity()||v.velocity)&&(w=!1),f.animation&&(w=!1),w)continue;f.start($c(d,f,y,e.shouldReduceMotion&&Kn.has(d)?{type:!1}:v));const S=f.animation;lo(c)&&(c.add(d),S.then(()=>c.remove(d))),u.push(S)}return o&&Promise.all(u).then(()=>{o&&ow(e,o)}),u}function Pl(e,t,n={}){const r=Io(e,t,n.custom);let{transition:s=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const i=r?()=>Promise.all(Ip(e,r,n)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:h,staggerDirection:d}=s;return hw(e,t,u+c,h,d,n)}:()=>Promise.resolve(),{when:a}=s;if(a){const[c,u]=a==="beforeChildren"?[i,o]:[o,i];return c().then(()=>u())}else return Promise.all([i(),o(n.delay)])}function hw(e,t,n=0,r=0,s=1,i){const o=[],a=(e.variantChildren.size-1)*r,c=s===1?(u=0)=>u*r:(u=0)=>a-u*r;return Array.from(e.variantChildren).sort(fw).forEach((u,h)=>{u.notify("AnimationStart",t),o.push(Pl(u,t,{...i,delay:n+c(h)}).then(()=>u.notify("AnimationComplete",t)))}),Promise.all(o)}function fw(e,t){return e.sortNodePosition(t)}function mw(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const s=t.map(i=>Pl(e,i,n));r=Promise.all(s)}else if(typeof t=="string")r=Pl(e,t,n);else{const s=typeof t=="function"?Io(e,t,n.custom):t;r=Promise.all(Ip(e,s,n))}return r.then(()=>e.notify("AnimationComplete",t))}const pw=[...Nc].reverse(),gw=Nc.length;function vw(e){return t=>Promise.all(t.map(({animation:n,options:r})=>mw(e,n,r)))}function xw(e){let t=vw(e);const n=ww();let r=!0;const s=(c,u)=>{const h=Io(e,u);if(h){const{transition:d,transitionEnd:f,...y}=h;c={...c,...y,...f}}return c};function i(c){t=c(e)}function o(c,u){const h=e.getProps(),d=e.getVariantContext(!0)||{},f=[],y=new Set;let v={},w=1/0;for(let p=0;p<gw;p++){const m=pw[p],g=n[m],b=h[m]!==void 0?h[m]:d[m],j=As(b),k=m===u?g.isActive:null;k===!1&&(w=p);let C=b===d[m]&&b!==h[m]&&j;if(C&&r&&e.manuallyAnimateOnMount&&(C=!1),g.protectedKeys={...v},!g.isActive&&k===null||!b&&!g.prevProp||Mo(b)||typeof b=="boolean")continue;let N=yw(g.prevProp,b)||m===u&&g.isActive&&!C&&j||p>w&&j,A=!1;const H=Array.isArray(b)?b:[b];let Y=H.reduce(s,{});k===!1&&(Y={});const{prevResolvedValues:Q={}}=g,Z={...Q,...Y},J=G=>{N=!0,y.has(G)&&(A=!0,y.delete(G)),g.needsAnimating[G]=!0};for(const G in Z){const q=Y[G],T=Q[G];if(v.hasOwnProperty(G))continue;let F=!1;so(q)&&so(T)?F=!ip(q,T):F=q!==T,F?q!==void 0?J(G):y.add(G):q!==void 0&&y.has(G)?J(G):g.protectedKeys[G]=!0}g.prevProp=b,g.prevResolvedValues=Y,g.isActive&&(v={...v,...Y}),r&&e.blockInitialAnimation&&(N=!1),N&&(!C||A)&&f.push(...H.map(G=>({animation:G,options:{type:m,...c}})))}if(y.size){const p={};y.forEach(m=>{const g=e.getBaseTarget(m);g!==void 0&&(p[m]=g)}),f.push({animation:p})}let S=!!f.length;return r&&(h.initial===!1||h.initial===h.animate)&&!e.manuallyAnimateOnMount&&(S=!1),r=!1,S?t(f):Promise.resolve()}function a(c,u,h){var d;if(n[c].isActive===u)return Promise.resolve();(d=e.variantChildren)===null||d===void 0||d.forEach(y=>{var v;return(v=y.animationState)===null||v===void 0?void 0:v.setActive(c,u)}),n[c].isActive=u;const f=o(h,c);for(const y in n)n[y].protectedKeys={};return f}return{animateChanges:o,setActive:a,setAnimateFunction:i,getState:()=>n}}function yw(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!ip(t,e):!1}function Sn(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function ww(){return{animate:Sn(!0),whileInView:Sn(),whileHover:Sn(),whileTap:Sn(),whileDrag:Sn(),whileFocus:Sn(),exit:Sn()}}class bw extends wn{constructor(t){super(t),t.animationState||(t.animationState=xw(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();this.unmount(),Mo(t)&&(this.unmount=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let Sw=0;class kw extends wn{constructor(){super(...arguments),this.id=Sw++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n,custom:r}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===s)return;const i=this.node.animationState.setActive("exit",!t,{custom:r??this.node.getProps().custom});n&&!t&&i.then(()=>n(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const jw={animation:{Feature:bw},exit:{Feature:kw}},jd=(e,t)=>Math.abs(e-t);function Cw(e,t){const n=jd(e.x,t.x),r=jd(e.y,t.y);return Math.sqrt(n**2+r**2)}class Op{constructor(t,n,{transformPagePoint:r,contextWindow:s,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=ya(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,y=Cw(d.offset,{x:0,y:0})>=3;if(!f&&!y)return;const{point:v}=d,{timestamp:w}=Le;this.history.push({...v,timestamp:w});const{onStart:S,onMove:p}=this.handlers;f||(S&&S(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),p&&p(this.lastMoveEvent,d)},this.handlePointerMove=(d,f)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=xa(f,this.transformPagePoint),ie.update(this.updatePoint,!0)},this.handlePointerUp=(d,f)=>{this.end();const{onEnd:y,onSessionEnd:v,resumeAnimation:w}=this.handlers;if(this.dragSnapToOrigin&&w&&w(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const S=ya(d.type==="pointercancel"?this.lastMoveEventInfo:xa(f,this.transformPagePoint),this.history);this.startEvent&&y&&y(d,S),v&&v(d,S)},!ep(t))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.contextWindow=s||window;const o=Do(t),a=xa(o,this.transformPagePoint),{point:c}=a,{timestamp:u}=Le;this.history=[{...c,timestamp:u}];const{onSessionStart:h}=n;h&&h(t,ya(a,this.history)),this.removeListeners=cn(It(this.contextWindow,"pointermove",this.handlePointerMove),It(this.contextWindow,"pointerup",this.handlePointerUp),It(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),zt(this.updatePoint)}}function xa(e,t){return t?{point:t(e.point)}:e}function Cd(e,t){return{x:e.x-t.x,y:e.y-t.y}}function ya({point:e},t){return{point:e,delta:Cd(e,Fp(t)),offset:Cd(e,Pw(t)),velocity:Tw(t,.1)}}function Pw(e){return e[0]}function Fp(e){return e[e.length-1]}function Tw(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const s=Fp(e);for(;n>=0&&(r=e[n],!(s.timestamp-r.timestamp>un(t)));)n--;if(!r)return{x:0,y:0};const i=Ot(s.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const o={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function Je(e){return e.max-e.min}function Tl(e,t=0,n=.01){return Math.abs(e-t)<=n}function Pd(e,t,n,r=.5){e.origin=r,e.originPoint=he(t.min,t.max,e.origin),e.scale=Je(n)/Je(t),(Tl(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=he(n.min,n.max,e.origin)-e.originPoint,(Tl(e.translate)||isNaN(e.translate))&&(e.translate=0)}function ds(e,t,n,r){Pd(e.x,t.x,n.x,r?r.originX:void 0),Pd(e.y,t.y,n.y,r?r.originY:void 0)}function Td(e,t,n){e.min=n.min+t.min,e.max=e.min+Je(t)}function Ew(e,t,n){Td(e.x,t.x,n.x),Td(e.y,t.y,n.y)}function Ed(e,t,n){e.min=t.min-n.min,e.max=e.min+Je(t)}function hs(e,t,n){Ed(e.x,t.x,n.x),Ed(e.y,t.y,n.y)}function Nw(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?he(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?he(n,e,r.max):Math.min(e,n)),e}function Nd(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function _w(e,{top:t,left:n,bottom:r,right:s}){return{x:Nd(e.x,n,s),y:Nd(e.y,t,r)}}function _d(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function Aw(e,t){return{x:_d(e.x,t.x),y:_d(e.y,t.y)}}function Mw(e,t){let n=.5;const r=Je(e),s=Je(t);return s>r?n=Ls(t.min,t.max-r,e.min):r>s&&(n=Ls(e.min,e.max-s,t.min)),fn(0,1,n)}function Lw(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const El=.35;function Rw(e=El){return e===!1?e=0:e===!0&&(e=El),{x:Ad(e,"left","right"),y:Ad(e,"top","bottom")}}function Ad(e,t,n){return{min:Md(e,t),max:Md(e,n)}}function Md(e,t){return typeof e=="number"?e:e[t]||0}const Ld=()=>({translate:0,scale:1,origin:0,originPoint:0}),hr=()=>({x:Ld(),y:Ld()}),Rd=()=>({min:0,max:0}),we=()=>({x:Rd(),y:Rd()});function st(e){return[e("x"),e("y")]}function Vp({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function Dw({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function Iw(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function wa(e){return e===void 0||e===1}function Nl({scale:e,scaleX:t,scaleY:n}){return!wa(e)||!wa(t)||!wa(n)}function Pn(e){return Nl(e)||Bp(e)||e.z||e.rotate||e.rotateX||e.rotateY}function Bp(e){return Dd(e.x)||Dd(e.y)}function Dd(e){return e&&e!=="0%"}function co(e,t,n){const r=e-n,s=t*r;return n+s}function Id(e,t,n,r,s){return s!==void 0&&(e=co(e,s,r)),co(e,n,r)+t}function _l(e,t=0,n=1,r,s){e.min=Id(e.min,t,n,r,s),e.max=Id(e.max,t,n,r,s)}function Gp(e,{x:t,y:n}){_l(e.x,t.translate,t.scale,t.originPoint),_l(e.y,n.translate,n.scale,n.originPoint)}function Ow(e,t,n,r=!1){const s=n.length;if(!s)return;t.x=t.y=1;let i,o;for(let a=0;a<s;a++){i=n[a],o=i.projectionDelta;const c=i.instance;c&&c.style&&c.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&fr(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,Gp(e,o)),r&&Pn(i.latestValues)&&fr(e,i.latestValues))}t.x=Od(t.x),t.y=Od(t.y)}function Od(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function Qt(e,t){e.min=e.min+t,e.max=e.max+t}function Fd(e,t,[n,r,s]){const i=t[s]!==void 0?t[s]:.5,o=he(e.min,e.max,i);_l(e,t[n],t[r],o,t.scale)}const Fw=["x","scaleX","originX"],Vw=["y","scaleY","originY"];function fr(e,t){Fd(e.x,t,Fw),Fd(e.y,t,Vw)}function zp(e,t){return Vp(Iw(e.getBoundingClientRect(),t))}function Bw(e,t,n){const r=zp(e,n),{scroll:s}=t;return s&&(Qt(r.x,s.offset.x),Qt(r.y,s.offset.y)),r}const Hp=({current:e})=>e?e.ownerDocument.defaultView:null,Gw=new WeakMap;class zw{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=we(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=h=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Do(h,"page").point)},i=(h,d)=>{const{drag:f,dragPropagation:y,onDragStart:v}=this.getProps();if(f&&!y&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=np(f),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),st(S=>{let p=this.getAxisMotionValue(S).get()||0;if(Pt.test(p)){const{projection:m}=this.visualElement;if(m&&m.layout){const g=m.layout.layoutBox[S];g&&(p=Je(g)*(parseFloat(p)/100))}}this.originPoint[S]=p}),v&&ie.update(()=>v(h,d),!1,!0);const{animationState:w}=this.visualElement;w&&w.setActive("whileDrag",!0)},o=(h,d)=>{const{dragPropagation:f,dragDirectionLock:y,onDirectionLock:v,onDrag:w}=this.getProps();if(!f&&!this.openGlobalLock)return;const{offset:S}=d;if(y&&this.currentDirection===null){this.currentDirection=Hw(S),this.currentDirection!==null&&v&&v(this.currentDirection);return}this.updateAxis("x",d.point,S),this.updateAxis("y",d.point,S),this.visualElement.render(),w&&w(h,d)},a=(h,d)=>this.stop(h,d),c=()=>st(h=>{var d;return this.getAnimationState(h)==="paused"&&((d=this.getAxisMotionValue(h).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new Op(t,{onSessionStart:s,onStart:i,onMove:o,onSessionEnd:a,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:Hp(this.visualElement)})}stop(t,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:s}=n;this.startAnimation(s);const{onDragEnd:i}=this.getProps();i&&ie.update(()=>i(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:s}=this.getProps();if(!r||!mi(t,s,this.currentDirection))return;const i=this.getAxisMotionValue(t);let o=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(o=Nw(o,this.constraints[t],this.elastic[t])),i.set(o)}resolveConstraints(){var t;const{dragConstraints:n,dragElastic:r}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,i=this.constraints;n&&ur(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&s?this.constraints=_w(s.layoutBox,n):this.constraints=!1,this.elastic=Rw(r),i!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&st(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=Lw(s.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!ur(t))return!1;const r=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=Bw(r,s.root,this.visualElement.getTransformPagePoint());let o=Aw(s.layout.layoutBox,i);if(n){const a=n(Dw(o));this.hasMutatedConstraints=!!a,a&&(o=Vp(a))}return o}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),c=this.constraints||{},u=st(h=>{if(!mi(h,n,this.currentDirection))return;let d=c&&c[h]||{};o&&(d={min:0,max:0});const f=s?200:1e6,y=s?40:1e7,v={type:"inertia",velocity:r?t[h]:0,bounceStiffness:f,bounceDamping:y,timeConstant:750,restDelta:1,restSpeed:10,...i,...d};return this.startAxisValueAnimation(h,v)});return Promise.all(u).then(a)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return r.start($c(t,r,0,n))}stopAnimation(){st(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){st(t=>{var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(t){const n="_drag"+t.toUpperCase(),r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){st(n=>{const{drag:r}=this.getProps();if(!mi(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(n);if(s&&s.layout){const{min:o,max:a}=s.layout.layoutBox[n];i.set(t[n]-he(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!ur(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};st(o=>{const a=this.getAxisMotionValue(o);if(a){const c=a.get();s[o]=Mw({min:c,max:c},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),st(o=>{if(!mi(o,t,null))return;const a=this.getAxisMotionValue(o),{min:c,max:u}=this.constraints[o];a.set(he(c,u,s[o]))})}addListeners(){if(!this.visualElement.current)return;Gw.set(this.visualElement,this);const t=this.visualElement.current,n=It(t,"pointerdown",c=>{const{drag:u,dragListener:h=!0}=this.getProps();u&&h&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();ur(c)&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),r();const o=Mt(window,"resize",()=>this.scalePositionWithinConstraints()),a=s.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(st(h=>{const d=this.getAxisMotionValue(h);d&&(this.originPoint[h]+=c[h].translate,d.set(d.get()+c[h].translate))}),this.visualElement.render())});return()=>{o(),n(),i(),a&&a()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:o=El,dragMomentum:a=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:i,dragElastic:o,dragMomentum:a}}}function mi(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function Hw(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class Uw extends wn{constructor(t){super(t),this.removeGroupControls=ge,this.removeListeners=ge,this.controls=new zw(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ge}unmount(){this.removeGroupControls(),this.removeListeners()}}const Vd=e=>(t,n)=>{e&&ie.update(()=>e(t,n))};class $w extends wn{constructor(){super(...arguments),this.removePointerDownListener=ge}onPointerDown(t){this.session=new Op(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Hp(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:Vd(t),onStart:Vd(n),onMove:r,onEnd:(i,o)=>{delete this.session,s&&ie.update(()=>s(i,o))}}}mount(){this.removePointerDownListener=It(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function Ww(){const e=x.useContext(_o);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:n,register:r}=e,s=x.useId();return x.useEffect(()=>r(s),[]),!t&&n?[!1,()=>n&&n(s)]:[!0]}const _i={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Bd(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Kr={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if($.test(e))e=parseFloat(e);else return e;const n=Bd(e,t.target.x),r=Bd(e,t.target.y);return`${n}% ${r}%`}},qw={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,s=mn.parse(e);if(s.length>5)return r;const i=mn.createTransformer(e),o=typeof s[0]!="number"?1:0,a=n.x.scale*t.x,c=n.y.scale*t.y;s[0+o]/=a,s[1+o]/=c;const u=he(a,c,.5);return typeof s[2+o]=="number"&&(s[2+o]/=u),typeof s[3+o]=="number"&&(s[3+o]/=u),i(s)}};class Kw extends ce.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:i}=t;tx(Qw),i&&(n.group&&n.group.add(i),r&&r.register&&s&&r.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),_i.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:s,isPresent:i}=this.props,o=r.projection;return o&&(o.isPresent=i,s||t.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?o.promote():o.relegate()||ie.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),queueMicrotask(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=t;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function Up(e){const[t,n]=Ww(),r=x.useContext(Ac);return ce.createElement(Kw,{...e,layoutGroup:r,switchLayoutGroup:x.useContext(Vm),isPresent:t,safeToRemove:n})}const Qw={borderRadius:{...Kr,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Kr,borderTopRightRadius:Kr,borderBottomLeftRadius:Kr,borderBottomRightRadius:Kr,boxShadow:qw},$p=["TopLeft","TopRight","BottomLeft","BottomRight"],Xw=$p.length,Gd=e=>typeof e=="string"?parseFloat(e):e,zd=e=>typeof e=="number"||$.test(e);function Yw(e,t,n,r,s,i){s?(e.opacity=he(0,n.opacity!==void 0?n.opacity:1,Jw(r)),e.opacityExit=he(t.opacity!==void 0?t.opacity:1,0,Zw(r))):i&&(e.opacity=he(t.opacity!==void 0?t.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<Xw;o++){const a=`border${$p[o]}Radius`;let c=Hd(t,a),u=Hd(n,a);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||zd(c)===zd(u)?(e[a]=Math.max(he(Gd(c),Gd(u),r),0),(Pt.test(u)||Pt.test(c))&&(e[a]+="%")):e[a]=u}(t.rotate||n.rotate)&&(e.rotate=he(t.rotate||0,n.rotate||0,r))}function Hd(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const Jw=Wp(0,.5,mp),Zw=Wp(.5,.95,ge);function Wp(e,t,n){return r=>r<e?0:r>t?1:n(Ls(e,t,r))}function Ud(e,t){e.min=t.min,e.max=t.max}function nt(e,t){Ud(e.x,t.x),Ud(e.y,t.y)}function $d(e,t,n,r,s){return e-=t,e=co(e,1/n,r),s!==void 0&&(e=co(e,1/s,r)),e}function e1(e,t=0,n=1,r=.5,s,i=e,o=e){if(Pt.test(t)&&(t=parseFloat(t),t=he(o.min,o.max,t/100)-o.min),typeof t!="number")return;let a=he(i.min,i.max,r);e===i&&(a-=t),e.min=$d(e.min,t,n,a,s),e.max=$d(e.max,t,n,a,s)}function Wd(e,t,[n,r,s],i,o){e1(e,t[n],t[r],t[s],t.scale,i,o)}const t1=["x","scaleX","originX"],n1=["y","scaleY","originY"];function qd(e,t,n,r){Wd(e.x,t,t1,n?n.x:void 0,r?r.x:void 0),Wd(e.y,t,n1,n?n.y:void 0,r?r.y:void 0)}function Kd(e){return e.translate===0&&e.scale===1}function qp(e){return Kd(e.x)&&Kd(e.y)}function r1(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}function Kp(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function Qd(e){return Je(e.x)/Je(e.y)}class s1{constructor(){this.members=[]}add(t){Wc(this.members,t),t.scheduleRender()}remove(t){if(qc(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(s=>t===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Xd(e,t,n){let r="";const s=e.x.translate/t.x,i=e.y.translate/t.y;if((s||i)&&(r=`translate3d(${s}px, ${i}px, 0) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{rotate:c,rotateX:u,rotateY:h}=n;c&&(r+=`rotate(${c}deg) `),u&&(r+=`rotateX(${u}deg) `),h&&(r+=`rotateY(${h}deg) `)}const o=e.x.scale*t.x,a=e.y.scale*t.y;return(o!==1||a!==1)&&(r+=`scale(${o}, ${a})`),r||"none"}const i1=(e,t)=>e.depth-t.depth;class o1{constructor(){this.children=[],this.isDirty=!1}add(t){Wc(this.children,t),this.isDirty=!0}remove(t){qc(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(i1),this.isDirty=!1,this.children.forEach(t)}}function a1(e,t){const n=performance.now(),r=({timestamp:s})=>{const i=s-n;i>=t&&(zt(r),e(i-t))};return ie.read(r,!0),()=>zt(r)}function l1(e){window.MotionDebug&&window.MotionDebug.record(e)}function c1(e){return e instanceof SVGElement&&e.tagName!=="svg"}function u1(e,t,n){const r=qe(e)?e:Ar(e);return r.start($c("",r,t,n)),r.animation}const Yd=["","X","Y","Z"],d1={visibility:"hidden"},Jd=1e3;let h1=0;const Tn={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function Qp({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(o={},a=t==null?void 0:t()){this.id=h1++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Tn.totalNodes=Tn.resolvedTargetDeltas=Tn.recalculatedProjection=0,this.nodes.forEach(p1),this.nodes.forEach(w1),this.nodes.forEach(b1),this.nodes.forEach(g1),l1(Tn)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new o1)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Kc),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const c=this.eventHandlers.get(o);c&&c.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=c1(o),this.instance=o;const{layoutId:c,layout:u,visualElement:h}=this.options;if(h&&!h.current&&h.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(u||c)&&(this.isLayoutDirty=!0),e){let d;const f=()=>this.root.updateBlockedByResize=!1;e(o,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=a1(f,250),_i.hasAnimatedSinceResize&&(_i.hasAnimatedSinceResize=!1,this.nodes.forEach(eh))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&h&&(c||u)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:f,hasRelativeTargetChanged:y,layout:v})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const w=this.options.transition||h.getDefaultTransition()||P1,{onLayoutAnimationStart:S,onLayoutAnimationComplete:p}=h.getProps(),m=!this.targetLayout||!Kp(this.targetLayout,v)||y,g=!f&&y;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||g||f&&(m||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,g);const b={...Uc(w,"layout"),onPlay:S,onComplete:p};(h.shouldReduceMotion||this.options.layoutRoot)&&(b.delay=0,b.type=!1),this.startAnimation(b)}else f||eh(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=v})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,zt(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(S1),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const d=this.path[h];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:a,layout:c}=this.options;if(a===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Zd);return}this.isUpdating||this.nodes.forEach(x1),this.isUpdating=!1,this.nodes.forEach(y1),this.nodes.forEach(f1),this.nodes.forEach(m1),this.clearAllSnapshots();const a=performance.now();Le.delta=fn(0,1e3/60,a-Le.timestamp),Le.timestamp=a,Le.isProcessing=!0,ua.update.process(Le),ua.preRender.process(Le),ua.render.process(Le),Le.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(v1),this.sharedNodes.forEach(k1)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ie.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ie.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=we(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:r(this.instance),offset:n(this.instance)})}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform,a=this.projectionDelta&&!qp(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,h=u!==this.prevTransformTemplateValue;o&&(a||Pn(this.latestValues)||h)&&(s(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let c=this.removeElementScroll(a);return o&&(c=this.removeTransform(c)),T1(c),{animationId:this.root.animationId,measuredBox:a,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return we();const a=o.measureViewportBox(),{scroll:c}=this.root;return c&&(Qt(a.x,c.offset.x),Qt(a.y,c.offset.y)),a}removeElementScroll(o){const a=we();nt(a,o);for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:h,options:d}=u;if(u!==this.root&&h&&d.layoutScroll){if(h.isRoot){nt(a,o);const{scroll:f}=this.root;f&&(Qt(a.x,-f.offset.x),Qt(a.y,-f.offset.y))}Qt(a.x,h.offset.x),Qt(a.y,h.offset.y)}}return a}applyTransform(o,a=!1){const c=we();nt(c,o);for(let u=0;u<this.path.length;u++){const h=this.path[u];!a&&h.options.layoutScroll&&h.scroll&&h!==h.root&&fr(c,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),Pn(h.latestValues)&&fr(c,h.latestValues)}return Pn(this.latestValues)&&fr(c,this.latestValues),c}removeTransform(o){const a=we();nt(a,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!Pn(u.latestValues))continue;Nl(u.latestValues)&&u.updateSnapshot();const h=we(),d=u.measurePageBox();nt(h,d),qd(a,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,h)}return Pn(this.latestValues)&&qd(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Le.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==c;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:d,layoutId:f}=this.options;if(!(!this.layout||!(d||f))){if(this.resolvedRelativeTargetAt=Le.timestamp,!this.targetDelta&&!this.relativeTarget){const y=this.getClosestProjectingParent();y&&y.layout&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=we(),this.relativeTargetOrigin=we(),hs(this.relativeTargetOrigin,this.layout.layoutBox,y.layout.layoutBox),nt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=we(),this.targetWithTransforms=we()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Ew(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):nt(this.target,this.layout.layoutBox),Gp(this.target,this.targetDelta)):nt(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const y=this.getClosestProjectingParent();y&&!!y.resumingFrom==!!this.resumingFrom&&!y.options.layoutScroll&&y.target&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=we(),this.relativeTargetOrigin=we(),hs(this.relativeTargetOrigin,this.target,y.target),nt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Tn.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Nl(this.parent.latestValues)||Bp(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),c=!!this.resumingFrom||this!==a;let u=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(u=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===Le.timestamp&&(u=!1),u)return;const{layout:h,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||d))return;nt(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,y=this.treeScale.y;Ow(this.layoutCorrected,this.treeScale,this.path,c),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox);const{target:v}=a;if(!v){this.projectionTransform&&(this.projectionDelta=hr(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=hr(),this.projectionDeltaWithTransform=hr());const w=this.projectionTransform;ds(this.projectionDelta,this.layoutCorrected,v,this.latestValues),this.projectionTransform=Xd(this.projectionDelta,this.treeScale),(this.projectionTransform!==w||this.treeScale.x!==f||this.treeScale.y!==y)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",v)),Tn.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,a=!1){const c=this.snapshot,u=c?c.latestValues:{},h={...this.latestValues},d=hr();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const f=we(),y=c?c.source:void 0,v=this.layout?this.layout.source:void 0,w=y!==v,S=this.getStack(),p=!S||S.members.length<=1,m=!!(w&&!p&&this.options.crossfade===!0&&!this.path.some(C1));this.animationProgress=0;let g;this.mixTargetDelta=b=>{const j=b/1e3;th(d.x,o.x,j),th(d.y,o.y,j),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(hs(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),j1(this.relativeTarget,this.relativeTargetOrigin,f,j),g&&r1(this.relativeTarget,g)&&(this.isProjectionDirty=!1),g||(g=we()),nt(g,this.relativeTarget)),w&&(this.animationValues=h,Yw(h,u,this.latestValues,j,m,p)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=j},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(zt(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ie.update(()=>{_i.hasAnimatedSinceResize=!0,this.currentAnimation=u1(0,Jd,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Jd),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:c,layout:u,latestValues:h}=o;if(!(!a||!c||!u)){if(this!==o&&this.layout&&u&&Xp(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||we();const d=Je(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+d;const f=Je(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+f}nt(a,c),fr(a,h),ds(this.projectionDeltaWithTransform,this.layoutCorrected,a,h)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new s1),this.sharedNodes.get(o).add(a);const u=a.options.initialPromotionConfig;a.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:c}=o;if((c.rotate||c.rotateX||c.rotateY||c.rotateZ)&&(a=!0),!a)return;const u={};for(let h=0;h<Yd.length;h++){const d="rotate"+Yd[h];c[d]&&(u[d]=c[d],o.setStaticValue(d,0))}o.render();for(const h in u)o.setStaticValue(h,u[h]);o.scheduleRender()}getProjectionStyles(o){var a,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return d1;const u={visibility:""},h=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=Ni(o==null?void 0:o.pointerEvents)||"",u.transform=h?h(this.latestValues,""):"none",u;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const w={};return this.options.layoutId&&(w.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,w.pointerEvents=Ni(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Pn(this.latestValues)&&(w.transform=h?h({},""):"none",this.hasProjected=!1),w}const f=d.animationValues||d.latestValues;this.applyTransformsToTarget(),u.transform=Xd(this.projectionDeltaWithTransform,this.treeScale,f),h&&(u.transform=h(f,u.transform));const{x:y,y:v}=this.projectionDelta;u.transformOrigin=`${y.origin*100}% ${v.origin*100}% 0`,d.animationValues?u.opacity=d===this?(c=(a=f.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:u.opacity=d===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const w in no){if(f[w]===void 0)continue;const{correct:S,applyTo:p}=no[w],m=u.transform==="none"?f[w]:S(f[w],d);if(p){const g=p.length;for(let b=0;b<g;b++)u[p[b]]=m}else u[w]=m}return this.options.layoutId&&(u.pointerEvents=d===this?Ni(o==null?void 0:o.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(Zd),this.root.sharedNodes.clear()}}}function f1(e){e.updateLayout()}function m1(e){var t;const n=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=e.layout,{animationType:i}=e.options,o=n.source!==e.layout.source;i==="size"?st(d=>{const f=o?n.measuredBox[d]:n.layoutBox[d],y=Je(f);f.min=r[d].min,f.max=f.min+y}):Xp(i,n.layoutBox,r)&&st(d=>{const f=o?n.measuredBox[d]:n.layoutBox[d],y=Je(r[d]);f.max=f.min+y,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[d].max=e.relativeTarget[d].min+y)});const a=hr();ds(a,r,n.layoutBox);const c=hr();o?ds(c,e.applyTransform(s,!0),n.measuredBox):ds(c,r,n.layoutBox);const u=!qp(a);let h=!1;if(!e.resumeFrom){const d=e.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:f,layout:y}=d;if(f&&y){const v=we();hs(v,n.layoutBox,f.layoutBox);const w=we();hs(w,r,y.layoutBox),Kp(v,w)||(h=!0),d.options.layoutRoot&&(e.relativeTarget=w,e.relativeTargetOrigin=v,e.relativeParent=d)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:c,layoutDelta:a,hasLayoutChanged:u,hasRelativeTargetChanged:h})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function p1(e){Tn.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function g1(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function v1(e){e.clearSnapshot()}function Zd(e){e.clearMeasurements()}function x1(e){e.isLayoutDirty=!1}function y1(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function eh(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function w1(e){e.resolveTargetDelta()}function b1(e){e.calcProjection()}function S1(e){e.resetRotation()}function k1(e){e.removeLeadSnapshot()}function th(e,t,n){e.translate=he(t.translate,0,n),e.scale=he(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function nh(e,t,n,r){e.min=he(t.min,n.min,r),e.max=he(t.max,n.max,r)}function j1(e,t,n,r){nh(e.x,t.x,n.x,r),nh(e.y,t.y,n.y,r)}function C1(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const P1={duration:.45,ease:[.4,0,.1,1]},rh=e=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(e),sh=rh("applewebkit/")&&!rh("chrome/")?Math.round:ge;function ih(e){e.min=sh(e.min),e.max=sh(e.max)}function T1(e){ih(e.x),ih(e.y)}function Xp(e,t,n){return e==="position"||e==="preserve-aspect"&&!Tl(Qd(t),Qd(n),.2)}const E1=Qp({attachResizeListener:(e,t)=>Mt(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),ba={current:void 0},Yp=Qp({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!ba.current){const e=new E1({});e.mount(window),e.setOptions({layoutScroll:!0}),ba.current=e}return ba.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),N1={pan:{Feature:$w},drag:{Feature:Uw,ProjectionNode:Yp,MeasureLayout:Up}},_1=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function A1(e){const t=_1.exec(e);if(!t)return[,];const[,n,r]=t;return[n,r]}function Al(e,t,n=1){const[r,s]=A1(e);if(!r)return;const i=window.getComputedStyle(t).getPropertyValue(r);if(i){const o=i.trim();return Lp(o)?parseFloat(o):o}else return wl(s)?Al(s,t,n+1):s}function M1(e,{...t},n){const r=e.current;if(!(r instanceof Element))return{target:t,transitionEnd:n};n&&(n={...n}),e.values.forEach(s=>{const i=s.get();if(!wl(i))return;const o=Al(i,r);o&&s.set(o)});for(const s in t){const i=t[s];if(!wl(i))continue;const o=Al(i,r);o&&(t[s]=o,n||(n={}),n[s]===void 0&&(n[s]=i))}return{target:t,transitionEnd:n}}const L1=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),Jp=e=>L1.has(e),R1=e=>Object.keys(e).some(Jp),oh=e=>e===Qn||e===$,ah=(e,t)=>parseFloat(e.split(", ")[t]),lh=(e,t)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const s=r.match(/^matrix3d\((.+)\)$/);if(s)return ah(s[1],t);{const i=r.match(/^matrix\((.+)\)$/);return i?ah(i[1],e):0}},D1=new Set(["x","y","z"]),I1=Vs.filter(e=>!D1.has(e));function O1(e){const t=[];return I1.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t.length&&e.render(),t}const Mr={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:lh(4,13),y:lh(5,14)};Mr.translateX=Mr.x;Mr.translateY=Mr.y;const F1=(e,t,n)=>{const r=t.measureViewportBox(),s=t.current,i=getComputedStyle(s),{display:o}=i,a={};o==="none"&&t.setStaticValue("display",e.display||"block"),n.forEach(u=>{a[u]=Mr[u](r,i)}),t.render();const c=t.measureViewportBox();return n.forEach(u=>{const h=t.getValue(u);h&&h.jump(a[u]),e[u]=Mr[u](c,i)}),e},V1=(e,t,n={},r={})=>{t={...t},r={...r};const s=Object.keys(t).filter(Jp);let i=[],o=!1;const a=[];if(s.forEach(c=>{const u=e.getValue(c);if(!e.hasValue(c))return;let h=n[c],d=qr(h);const f=t[c];let y;if(so(f)){const v=f.length,w=f[0]===null?1:0;h=f[w],d=qr(h);for(let S=w;S<v&&f[S]!==null;S++)y?Vc(qr(f[S])===y):y=qr(f[S])}else y=qr(f);if(d!==y)if(oh(d)&&oh(y)){const v=u.get();typeof v=="string"&&u.set(parseFloat(v)),typeof f=="string"?t[c]=parseFloat(f):Array.isArray(f)&&y===$&&(t[c]=f.map(parseFloat))}else d!=null&&d.transform&&(y!=null&&y.transform)&&(h===0||f===0)?h===0?u.set(y.transform(h)):t[c]=d.transform(f):(o||(i=O1(e),o=!0),a.push(c),r[c]=r[c]!==void 0?r[c]:t[c],u.jump(f))}),a.length){const c=a.indexOf("height")>=0?window.pageYOffset:null,u=F1(t,e,a);return i.length&&i.forEach(([h,d])=>{e.getValue(h).set(d)}),e.render(),Ao&&c!==null&&window.scrollTo({top:c}),{target:u,transitionEnd:r}}else return{target:t,transitionEnd:r}};function B1(e,t,n,r){return R1(t)?V1(e,t,n,r):{target:t,transitionEnd:r}}const G1=(e,t,n,r)=>{const s=M1(e,t,r);return t=s.target,r=s.transitionEnd,B1(e,t,n,r)},Ml={current:null},Zp={current:!1};function z1(){if(Zp.current=!0,!!Ao)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Ml.current=e.matches;e.addListener(t),t()}else Ml.current=!1}function H1(e,t,n){const{willChange:r}=t;for(const s in t){const i=t[s],o=n[s];if(qe(i))e.addValue(s,i),lo(r)&&r.add(s);else if(qe(o))e.addValue(s,Ar(i,{owner:e})),lo(r)&&r.remove(s);else if(o!==i)if(e.hasValue(s)){const a=e.getValue(s);!a.hasAnimated&&a.set(i)}else{const a=e.getStaticValue(s);e.addValue(s,Ar(a!==void 0?a:i,{owner:e}))}}for(const s in n)t[s]===void 0&&e.removeValue(s);return t}const ch=new WeakMap,e0=Object.keys(Ms),U1=e0.length,uh=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],$1=_c.length;class W1{constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:s,visualState:i},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>ie.render(this.render,!1,!0);const{latestValues:a,renderState:c}=i;this.latestValues=a,this.baseTarget={...a},this.initialValues=n.initial?{...a}:{},this.renderState=c,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=o,this.isControllingVariants=Lo(n),this.isVariantNode=Fm(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:u,...h}=this.scrapeMotionValuesFromProps(n,{});for(const d in h){const f=h[d];a[d]!==void 0&&qe(f)&&(f.set(a[d],!1),lo(u)&&u.add(d))}}scrapeMotionValuesFromProps(t,n){return{}}mount(t){this.current=t,ch.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),Zp.current||z1(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Ml.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){ch.delete(this.current),this.projection&&this.projection.unmount(),zt(this.notifyUpdate),zt(this.render),this.valueSubscriptions.forEach(t=>t()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features)this.features[t].unmount();this.current=null}bindToMotionValue(t,n){const r=Kn.has(t),s=n.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&ie.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),i=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,()=>{s(),i()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}loadFeatures({children:t,...n},r,s,i){let o,a;for(let c=0;c<U1;c++){const u=e0[c],{isEnabled:h,Feature:d,ProjectionNode:f,MeasureLayout:y}=Ms[u];f&&(o=f),h(n)&&(!this.features[u]&&d&&(this.features[u]=new d(this)),y&&(a=y))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:c,layout:u,drag:h,dragConstraints:d,layoutScroll:f,layoutRoot:y}=n;this.projection.setOptions({layoutId:c,layout:u,alwaysMeasureLayout:!!h||d&&ur(d),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof u=="string"?u:"both",initialPromotionConfig:i,layoutScroll:f,layoutRoot:y})}return a}updateFeatures(){for(const t in this.features){const n=this.features[t];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):we()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}makeTargetAnimatable(t,n=!0){return this.makeTargetAnimatableFromInstance(t,this.props,n)}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<uh.length;r++){const s=uh[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i=t["on"+s];i&&(this.propEventSubscriptions[s]=this.on(s,i))}this.prevMotionValues=H1(this,this.scrapeMotionValuesFromProps(t,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(t=!1){if(t)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const n={};for(let r=0;r<$1;r++){const s=_c[r],i=this.props[s];(As(i)||i===!1)&&(n[s]=i)}return n}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){n!==this.values.get(t)&&(this.removeValue(t),this.bindToMotionValue(t,n)),this.values.set(t,n),this.latestValues[t]=n.get()}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=Ar(n,{owner:this}),this.addValue(t,r)),r}readValue(t){var n;return this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(n=this.getBaseTargetFromProps(this.props,t))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,t,this.options)}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var n;const{initial:r}=this.props,s=typeof r=="string"||typeof r=="object"?(n=Fc(this.props,r))===null||n===void 0?void 0:n[t]:void 0;if(r&&s!==void 0)return s;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!qe(i)?i:this.initialValues[t]!==void 0&&s===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new Kc),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class t0 extends W1{sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}makeTargetAnimatableFromInstance({transition:t,transitionEnd:n,...r},{transformValues:s},i){let o=cw(r,t||{},this);if(s&&(n&&(n=s(n)),r&&(r=s(r)),o&&(o=s(o))),i){aw(this,r,o);const a=G1(this,r,o,n);n=a.transitionEnd,r=a.target}return{transition:t,transitionEnd:n,...r}}}function q1(e){return window.getComputedStyle(e)}class K1 extends t0{constructor(){super(...arguments),this.type="html"}readValueFromInstance(t,n){if(Kn.has(n)){const r=Hc(n);return r&&r.default||0}else{const r=q1(t),s=(zm(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(t,{transformPagePoint:n}){return zp(t,n)}build(t,n,r,s){Lc(t,n,r,s.transformTemplate)}scrapeMotionValuesFromProps(t,n){return Oc(t,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;qe(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(t,n,r,s){Km(t,n,r,s)}}class Q1 extends t0{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(Kn.has(n)){const r=Hc(n);return r&&r.default||0}return n=Qm.has(n)?n:Ec(n),t.getAttribute(n)}measureInstanceViewportBox(){return we()}scrapeMotionValuesFromProps(t,n){return Ym(t,n)}build(t,n,r,s){Dc(t,n,r,this.isSVGTag,s.transformTemplate)}renderInstance(t,n,r,s){Xm(t,n,r,s)}mount(t){this.isSVGTag=Ic(t.tagName),super.mount(t)}}const X1=(e,t)=>Mc(e)?new Q1(t,{enableHardwareAcceleration:!1}):new K1(t,{enableHardwareAcceleration:!0}),Y1={layout:{ProjectionNode:Yp,MeasureLayout:Up}},J1={...jw,...Ux,...N1,...Y1},E=Zv((e,t)=>Ax(e,t,J1,X1));function n0(){const e=x.useRef(!1);return Tc(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function Z1(){const e=n0(),[t,n]=x.useState(0),r=x.useCallback(()=>{e.current&&n(t+1)},[t]);return[x.useCallback(()=>ie.postRender(r),[r]),t]}class eb extends x.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function tb({children:e,isPresent:t}){const n=x.useId(),r=x.useRef(null),s=x.useRef({width:0,height:0,top:0,left:0});return x.useInsertionEffect(()=>{const{width:i,height:o,top:a,left:c}=s.current;if(t||!r.current||!i||!o)return;r.current.dataset.motionPopId=n;const u=document.createElement("style");return document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${i}px !important;
            height: ${o}px !important;
            top: ${a}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[t]),x.createElement(eb,{isPresent:t,childRef:r,sizeRef:s},x.cloneElement(e,{ref:r}))}const Sa=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:i,mode:o})=>{const a=Jm(nb),c=x.useId(),u=x.useMemo(()=>({id:c,initial:t,isPresent:n,custom:s,onExitComplete:h=>{a.set(h,!0);for(const d of a.values())if(!d)return;r&&r()},register:h=>(a.set(h,!1),()=>a.delete(h))}),i?void 0:[n]);return x.useMemo(()=>{a.forEach((h,d)=>a.set(d,!1))},[n]),x.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),o==="popLayout"&&(e=x.createElement(tb,{isPresent:n},e)),x.createElement(_o.Provider,{value:u},e)};function nb(){return new Map}function rb(e){return x.useEffect(()=>()=>e(),[])}const En=e=>e.key||"";function sb(e,t){e.forEach(n=>{const r=En(n);t.set(r,n)})}function ib(e){const t=[];return x.Children.forEach(e,n=>{x.isValidElement(n)&&t.push(n)}),t}const xe=({children:e,custom:t,initial:n=!0,onExitComplete:r,exitBeforeEnter:s,presenceAffectsLayout:i=!0,mode:o="sync"})=>{const a=x.useContext(Ac).forceRender||Z1()[0],c=n0(),u=ib(e);let h=u;const d=x.useRef(new Map).current,f=x.useRef(h),y=x.useRef(new Map).current,v=x.useRef(!0);if(Tc(()=>{v.current=!1,sb(u,y),f.current=h}),rb(()=>{v.current=!0,y.clear(),d.clear()}),v.current)return x.createElement(x.Fragment,null,h.map(m=>x.createElement(Sa,{key:En(m),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:i,mode:o},m)));h=[...h];const w=f.current.map(En),S=u.map(En),p=w.length;for(let m=0;m<p;m++){const g=w[m];S.indexOf(g)===-1&&!d.has(g)&&d.set(g,void 0)}return o==="wait"&&d.size&&(h=[]),d.forEach((m,g)=>{if(S.indexOf(g)!==-1)return;const b=y.get(g);if(!b)return;const j=w.indexOf(g);let k=m;if(!k){const C=()=>{d.delete(g);const P=Array.from(y.keys()).filter(N=>!S.includes(N));if(P.forEach(N=>y.delete(N)),f.current=u.filter(N=>{const A=En(N);return A===g||P.includes(A)}),!d.size){if(c.current===!1)return;a(),r&&r()}};k=x.createElement(Sa,{key:En(b),isPresent:!1,onExitComplete:C,custom:t,presenceAffectsLayout:i,mode:o},b),d.set(g,k)}h.splice(j,0,k)}),h=h.map(m=>{const g=m.key;return d.has(g)?m:x.createElement(Sa,{key:En(m),isPresent:!0,presenceAffectsLayout:i,mode:o},m)}),x.createElement(x.Fragment,null,d.size?h:h.map(m=>x.cloneElement(m)))},kn={I:"I",O:"O",T:"T",S:"S",Z:"Z",J:"J",L:"L"},r0={[kn.I]:{shape:[[0,0,0,0],[1,1,1,1],[0,0,0,0],[0,0,0,0]],color:"#00f5ff",emoji:"",name:"I-Piece"},[kn.O]:{shape:[[1,1],[1,1]],color:"#ffff00",emoji:"",name:"O-Piece"},[kn.T]:{shape:[[0,1,0],[1,1,1],[0,0,0]],color:"#a000f0",emoji:"",name:"T-Piece"},[kn.S]:{shape:[[0,1,1],[1,1,0],[0,0,0]],color:"#00f000",emoji:"",name:"S-Piece"},[kn.Z]:{shape:[[1,1,0],[0,1,1],[0,0,0]],color:"#f00000",emoji:"",name:"Z-Piece"},[kn.J]:{shape:[[1,0,0],[1,1,1],[0,0,0]],color:"#0000f0",emoji:"",name:"J-Piece"},[kn.L]:{shape:[[0,0,1],[1,1,1],[0,0,0]],color:"#ff7f00",emoji:"",name:"L-Piece"}};let Lt={...r0};function dh(e){if(!e||!e.pieces){Lt={...r0};return}Object.keys(Lt).forEach(t=>{e.pieces[t]&&(Lt[t]={...Lt[t],color:e.pieces[t].color,emoji:e.pieces[t].emoji})})}if(typeof window<"u"){window.addEventListener("themeEquipped",e=>{dh(e.detail.theme)});try{const e=localStorage.getItem("cat-tetris-shopInventory");if(e){const n=JSON.parse(e).equippedTheme;Rm(()=>Promise.resolve().then(()=>$b),void 0).then(({PIECE_THEMES:r})=>{r[n]&&dh(r[n])})}}catch{}}function Sr(e){return{"#00f5ff":"#00f5ff","#ffff00":"#ffff00","#a000f0":"#a000f0","#00f000":"#00f000","#f00000":"#f00000","#0000f0":"#0000f0","#ff7f00":"#ff7f00"}[e]||e}class ob{constructor(){this.events={}}on(t,n){this.events[t]||(this.events[t]=[]),this.events[t].push(n)}off(t,n){this.events[t]&&(this.events[t]=this.events[t].filter(r=>r!==n))}emit(t,n){this.events[t]&&this.events[t].forEach(r=>{try{r(n)}catch(s){typeof window<"u"&&window.__ERROR_LOGGER__&&window.__ERROR_LOGGER__.logError("EventEmitter",`emit:${t}`,s.message,{event:t,stack:s.stack})}})}clear(){this.events={}}}const R=new ob,B={GAME_INITIALIZED:"game_initialized",PIECE_MOVED:"piece_moved",PIECE_ROTATED:"piece_rotated",PIECE_PLACED:"piece_placed",PIECE_HELD:"piece_held",HARD_DROP:"hard_drop",LINE_CLEARED:"line_cleared",T_SPIN:"t_spin",BACK_TO_BACK:"back_to_back",SCORE_UPDATED:"score_updated",LEVEL_UP:"level_up",GAME_OVER:"game_over",GAME_PAUSED:"game_paused",GAME_RESUMED:"game_resumed"},Ai=2;function ab({text:e,color:t,id:n}){return l.jsx(E.div,{initial:{opacity:1,y:0,scale:.5},animate:{opacity:0,y:-60,scale:1.3},exit:{opacity:0},transition:{duration:1.2,ease:"easeOut"},className:"absolute left-1/2 top-1/3 -translate-x-1/2 pointer-events-none font-black text-lg drop-shadow-lg whitespace-nowrap",style:{color:t,zIndex:50,textShadow:`0 0 12px ${t}`},children:e},n)}function lb({lines:e}){const t=x.useMemo(()=>{const n=[];return e.forEach(r=>{for(let s=0;s<14;s++)n.push({id:`${r}-${s}`,startX:Math.random()*220,startY:(r+Ai)*21+10,endX:(Math.random()-.5)*300,endY:-(Math.random()*120+40),size:Math.random()*5+2,color:["#FFD700","#FF6B6B","#4ECDC4","#A78BFA","#F472B6","#34D399"][Math.floor(Math.random()*6)],delay:Math.random()*.15})}),n},[e]);return l.jsx("div",{className:"absolute inset-0 pointer-events-none overflow-visible",style:{zIndex:35},children:t.map(n=>l.jsx(E.div,{initial:{x:n.startX,y:n.startY,scale:1,opacity:1},animate:{x:n.startX+n.endX,y:n.startY+n.endY,scale:0,opacity:0},transition:{duration:.8,delay:n.delay,ease:"easeOut"},className:"absolute rounded-full",style:{width:n.size,height:n.size,backgroundColor:n.color,boxShadow:`0 0 ${n.size+4}px ${n.color}`}},n.id))})}const cb=({board:e,currentPiece:t,dropPreview:n,gameOver:r})=>{var w;const[s,i]=x.useState([]),[o,a]=x.useState([]),[c,u]=x.useState(0),h=x.useRef(0),d=x.useRef(null),f=((w=e==null?void 0:e[0])==null?void 0:w.length)||10,y=x.useMemo(()=>[...Array(Ai).fill(null).map(()=>Array(f).fill(null)),...e],[e,f]);x.useEffect(()=>{const S=()=>{u(.12),setTimeout(()=>u(0),150)};return R.on("hard_drop",S),()=>R.off("hard_drop",S)},[]),x.useEffect(()=>{const S=[];for(let p=0;p<e.length;p++)e[p]&&e[p].every(m=>m!==null)&&S.push(p);S.length>0&&(i(S),u(S.length>=4?.3:.18),setTimeout(()=>u(0),250),setTimeout(()=>i([]),800))},[e]),x.useEffect(()=>{const S=p=>{const m=(p==null?void 0:p.linesCleared)||0;if(m<=0)return;let g,b;m===1?(g="Single",b="#4ECDC4"):m===2?(g="Double!",b="#A78BFA"):m===3?(g="Triple!!",b="#F472B6"):(g=" TETRIS!! ",b="#FFD700");const j=++h.current;a(k=>[...k,{id:j,text:g,color:b}]),setTimeout(()=>a(k=>k.filter(C=>C.id!==j)),1400)};return R.on("line_cleared",S),()=>R.off("line_cleared",S)},[]),x.useEffect(()=>{const S=p=>{const m=(p==null?void 0:p.combo)||0;if(m>=2){const g=++h.current;a(b=>[...b,{id:g,text:`${m}x Combo! `,color:"#FF6B6B"}]),setTimeout(()=>a(b=>b.filter(j=>j.id!==g)),1400)}};return R.on("score_updated",S),()=>R.off("score_updated",S)},[]),x.useEffect(()=>{const S=()=>{const p=++h.current;a(m=>[...m,{id:p,text:" Back-to-Back!",color:"#FBBF24"}]),setTimeout(()=>a(m=>m.filter(g=>g.id!==p)),1400)};return R.on("back_to_back",S),()=>R.off("back_to_back",S)},[]),x.useEffect(()=>{const S=()=>{const p=++h.current;a(m=>[...m,{id:p,text:"T-SPIN!",color:"#C084FC"}]),setTimeout(()=>a(m=>m.filter(g=>g.id!==p)),1400)};return R.on("t_spin",S),()=>R.off("t_spin",S)},[]);const v=x.useCallback((S,p,m,g)=>{let b=null,j=null;const k=s.includes(m);if(t){const{position:{x:C,y:P},shape:N}=t;for(let A=0;A<N.length;A++){for(let H=0;H<N[A].length;H++)N[A][H]&&C+H===p&&P+A===m&&(b=t);if(b)break}}if(n&&n!==t){const{position:{x:C,y:P},shape:N}=n;for(let A=0;A<N.length;A++){for(let H=0;H<N[A].length;H++)N[A][H]&&C+H===p&&P+A===m&&(j=n);if(j)break}}if(b){const C=Sr(b.color);return l.jsx("div",{className:"tetris-cell rounded-sm flex items-center justify-center border border-white/40",style:{backgroundColor:C,boxShadow:`0 0 6px ${C}80, inset 0 1px 0 rgba(255,255,255,0.3)`},children:l.jsx("span",{className:"text-xs drop-shadow",children:b.emoji})},`${p}-${m}`)}if(j){const C=Sr(j.color);return l.jsx("div",{className:"tetris-cell rounded-sm flex items-center justify-center border-2 border-dashed",style:{borderColor:C+"50",backgroundColor:C+"12"},children:l.jsx("span",{className:"text-xs opacity-30",children:j.emoji})},`${p}-${m}`)}if(S){const C=Sr(S.color);return l.jsx("div",{className:`cat-block tetris-cell rounded-sm flex items-center justify-center ${k?"line-clearing":""}`,style:{backgroundColor:k?"#fff":C,borderColor:"rgba(255, 255, 255, 0.35)",boxShadow:k?`0 0 20px #fff, 0 0 40px ${C}`:"inset 0 1px 0 rgba(255,255,255,0.25), 0 1px 3px rgba(0,0,0,0.3)",transform:k?"scale(1.1)":void 0,transition:"all 0.15s ease-out",zIndex:k?10:1},children:l.jsx("span",{className:`text-xs ${k?"opacity-0":""}`,children:S.emoji})},`${p}-${m}`)}return l.jsx("div",{className:`tetris-cell rounded-sm ${g?"bg-gray-900/30 border border-gray-500/10":"border border-white/[0.06] bg-white/[0.02]"}`},`${p}-${m}`)},[t,n,s]);return l.jsx("div",{className:"flex flex-col items-center",children:l.jsx("div",{className:"relative bg-gray-900/60 p-3 rounded-xl border-2 border-white/15 shadow-2xl overflow-hidden flex-shrink-0",ref:d,style:{width:"fit-content"},children:l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"tetris-grid",children:y.map((S,p)=>{const m=p-Ai,g=p<Ai;return S.map((b,j)=>v(b,j,m,g))})}),s.length>0&&l.jsx(l.Fragment,{children:l.jsx(lb,{lines:s})}),l.jsx(xe,{children:c>0&&l.jsx(E.div,{initial:{opacity:c},animate:{opacity:0},exit:{opacity:0},transition:{duration:.3},className:"absolute inset-0 rounded-lg pointer-events-none",style:{background:"white",zIndex:20}},"flash")}),l.jsx(xe,{children:o.map(S=>l.jsx(ab,{id:S.id,text:S.text,color:S.color},S.id))}),r&&l.jsx(E.div,{initial:{opacity:0},animate:{opacity:1},className:"absolute inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center rounded-lg",style:{zIndex:50},children:l.jsxs(E.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",damping:12},className:"text-center",children:[l.jsx("div",{className:"text-5xl mb-2",children:""}),l.jsx("div",{className:"text-white font-black text-xl drop-shadow-lg",children:"Game Over!"})]})})]})})})},pn=ce.memo(cb);class ub{constructor(){this.HIGH_SCORE_KEY="tetris_high_score"}getHighScore(){try{const t=localStorage.getItem(this.HIGH_SCORE_KEY);return t?parseInt(t,10):0}catch{return 0}}saveHighScore(t){try{const n=this.getHighScore();return t>n?(localStorage.setItem(this.HIGH_SCORE_KEY,t.toString()),!0):!1}catch{return!1}}clearHighScore(){try{localStorage.removeItem(this.HIGH_SCORE_KEY)}catch{}}}const hh=new ub,db=({score:e,level:t,lines:n,combo:r})=>{const[s,i]=x.useState(0);return x.useEffect(()=>{i(hh.getHighScore())},[]),x.useEffect(()=>{hh.saveHighScore(e)&&i(e)},[e]),l.jsxs("div",{className:"bg-gray-900/50 p-2 rounded-xl border-2 border-white/20 shadow-2xl w-28",children:[l.jsx("h2",{className:"text-xs font-bold text-white mb-1 text-center",children:" Pontuao"}),l.jsxs("div",{className:"space-y-0.5 text-xs",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-white/70",children:"Pontos:"}),l.jsx("span",{className:"text-yellow-400 font-bold",children:e.toLocaleString()})]}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-white/70",children:"Recorde:"}),l.jsx("span",{className:"text-green-400 font-bold",children:s.toLocaleString()})]}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-white/70",children:"Nvel:"}),l.jsx("span",{className:"text-blue-400 font-bold",children:t})]}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-white/70",children:"Linhas:"}),l.jsx("span",{className:"text-purple-400 font-bold",children:n})]}),r>0&&l.jsxs("div",{className:"flex justify-between items-center bg-orange-500/20 px-1.5 py-0.5 rounded border border-orange-400/30 mt-0.5",children:[l.jsx("span",{className:"text-white/90",children:"Combo:"}),l.jsxs("span",{className:"text-orange-400 font-bold",children:[r,"x"]})]})]})]})},Bn=ce.memo(db),hb=({onMove:e,onRotate:t,onHardDrop:n,onPause:r,onHold:s,isPaused:i,gameOver:o,canHold:a})=>{const c=u=>{if(!o)switch(u){case"left":e("left");break;case"right":e("right");break;case"down":e("down");break;case"rotate":t();break;case"hardDrop":n();break;case"hold":s();break;case"pause":r();break}};return l.jsxs("div",{className:"flex flex-col items-center gap-1",children:[l.jsx("div",{className:"hidden lg:block",children:l.jsx("div",{className:"text-center text-white/50 text-[11px]",children:l.jsx("p",{children:"  mover |  girar |  soft | Espao = hard drop | C = hold"})})}),l.jsxs("div",{className:"lg:hidden",children:[l.jsxs("div",{className:"grid grid-cols-3 gap-3 max-w-xs",children:[l.jsx("div",{}),l.jsx(E.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>c("rotate"),disabled:o,className:"bg-blue-500 text-white p-4 rounded-full shadow-lg hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed",children:""}),l.jsx("div",{}),l.jsx(E.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>c("left"),disabled:o,className:"bg-gray-600 text-white p-4 rounded-full shadow-lg hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:""}),l.jsx(E.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>c("down"),disabled:o,className:"bg-gray-600 text-white p-4 rounded-full shadow-lg hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:""}),l.jsx(E.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>c("right"),disabled:o,className:"bg-gray-600 text-white p-4 rounded-full shadow-lg hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:""}),l.jsx(E.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>c("hardDrop"),disabled:o,className:"bg-red-500 text-white p-4 rounded-full shadow-lg hover:bg-red-600 disabled:opacity-50 disabled:cursor-not-allowed",children:""}),l.jsx(E.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>c("hold"),disabled:o||!a,className:`p-4 rounded-full shadow-lg disabled:opacity-50 disabled:cursor-not-allowed ${a?"bg-green-500 text-white hover:bg-green-600":"bg-gray-500 text-white"}`,children:""})]}),l.jsx("div",{className:"mt-4 flex justify-center",children:l.jsx(E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>c("pause"),disabled:o,className:"bg-yellow-500 text-white px-6 py-3 rounded-lg shadow-lg hover:bg-yellow-600 disabled:opacity-50 disabled:cursor-not-allowed",children:i?" Continuar":" Pausar"})}),l.jsxs("div",{className:"mt-4 text-center text-white/60 text-xs",children:[l.jsx("p",{children:" Controles touch-friendly"}),l.jsx("p",{children:" Use a sombra para planejar!"})]})]})]})};function fb({scoreData:e,onClose:t}){const[n,r]=x.useState(!1),s=` Cat Tetris!
 ${e.score.toLocaleString()} pontos
 Nvel ${e.level}
 ${e.lines} linhas

Consegue me superar? `,i=async()=>{try{await navigator.clipboard.writeText(s),r(!0),setTimeout(()=>r(!1),2e3)}catch{}},o=async()=>{if(navigator.share)try{await navigator.share({title:"Minha pontuao no Cat Tetris",text:s})}catch(u){u.name}},a=()=>{const u=`https://twitter.com/intent/tweet?text=${encodeURIComponent(s)}`;window.open(u,"_blank","width=600,height=400")},c=()=>{const u=`https://wa.me/?text=${encodeURIComponent(s)}`;window.open(u,"_blank")};return l.jsxs(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-black/40 rounded-lg p-4 mt-4",children:[l.jsx("div",{className:"text-white/80 text-sm mb-3 text-center",children:"Compartilhe sua pontuao:"}),l.jsxs("div",{className:"flex flex-wrap gap-2 justify-center",children:[navigator.share&&l.jsx(E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:o,className:"bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-lg font-bold flex items-center gap-2 transition-colors",children:" Compartilhar"}),l.jsx(E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:i,className:`${n?"bg-green-600":"bg-gray-600 hover:bg-gray-500"} text-white px-4 py-2 rounded-lg font-bold flex items-center gap-2 transition-colors`,children:n?" Copiado!":" Copiar"}),l.jsx(E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:a,className:"bg-[#1DA1F2] hover:bg-[#1a8cd8] text-white px-4 py-2 rounded-lg font-bold flex items-center gap-2 transition-colors",children:" Twitter"}),l.jsx(E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:c,className:"bg-[#25D366] hover:bg-[#20bd5a] text-white px-4 py-2 rounded-lg font-bold flex items-center gap-2 transition-colors",children:" WhatsApp"})]}),t&&l.jsx("div",{className:"text-center mt-3",children:l.jsx("button",{onClick:t,className:"text-white/60 hover:text-white text-sm transition-colors",children:"Fechar"})})]})}const mb=({score:e,onRestart:t,onBackToMenu:n})=>{const r=typeof e=="number"?e:e.points,s=typeof e=="object"?e.level:1,i=typeof e=="object"?e.lines:0,o=c=>c<1e3?"No desista! Cada tentativa te torna melhor! ":c<5e3?"Bom trabalho! Continue praticando! ":c<1e4?"Excelente! Voc est ficando muito bom! ":"Incrvel! Voc  um mestre do Cat Tetris! ",a=c=>c<1e3?"":c<5e3?"":c<1e4?"":"";return l.jsx(E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",children:l.jsx(E.div,{initial:{scale:.8,y:20},animate:{scale:1,y:0},transition:{type:"spring",damping:15},className:"bg-gray-900/90 p-8 rounded-2xl border-2 border-white/20 shadow-2xl max-w-md w-full mx-4 max-h-[90vh] overflow-y-auto",children:l.jsxs("div",{className:"text-center",children:[l.jsx(E.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring"},className:"text-6xl mb-4",children:a(r)}),l.jsx(E.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"text-3xl font-cat font-bold text-white mb-2",children:"Game Over!"}),l.jsxs(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-gradient-to-r from-yellow-400 to-orange-400 text-gray-900 font-bold text-xl p-3 rounded-lg mb-4",children:[r.toLocaleString()," pontos"]}),l.jsx(E.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"text-white/80 mb-6 text-lg",children:o(r)}),l.jsx(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.55},children:l.jsx(fb,{scoreData:{score:r,level:s,lines:i}})}),l.jsxs(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"space-y-3 mt-4",children:[l.jsx(E.button,{onClick:c=>{c.stopPropagation(),t()},whileHover:{scale:1.05},whileTap:{scale:.95},className:"w-full bg-gradient-to-r from-green-500 to-emerald-600 text-white font-bold py-3 px-6 rounded-lg hover:from-green-400 hover:to-emerald-500 transition-all duration-300 shadow-lg",children:" Jogar Novamente"}),l.jsx(E.button,{onClick:c=>{c.stopPropagation(),n()},whileHover:{scale:1.05},whileTap:{scale:.95},className:"w-full bg-gradient-to-r from-blue-500 to-cyan-600 text-white font-bold py-3 px-6 rounded-lg hover:from-blue-400 hover:to-cyan-500 transition-all duration-300 shadow-lg",children:" Voltar ao Menu"})]}),l.jsxs(E.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},className:"mt-6 text-center text-white/60 text-sm",children:[l.jsx("p",{children:" Dica: Use a sombra para planejar melhor!"}),l.jsx("p",{children:" Tente fazer combos para mais pontos!"})]})]})})})},pb=({pieces:e})=>{const t=(n,r)=>{if(!n)return null;const s=Math.max(...n.shape.map(o=>o.length)),i=n.shape.length;return l.jsx("div",{className:"bg-gray-800/50 p-1.5 rounded-lg border border-white/20",children:l.jsx("div",{className:"flex justify-center",children:l.jsx("div",{className:"grid gap-1",style:{gridTemplateColumns:`repeat(${s}, 1fr)`,gridTemplateRows:`repeat(${i}, 1fr)`},children:n.shape.map((o,a)=>o.map((c,u)=>l.jsx("div",{className:`w-5 h-5 rounded-sm flex items-center justify-center ${c?"border border-white/40 shadow-sm":""}`,style:{backgroundColor:c?Sr(n.color):"transparent"},children:c&&c!==0?l.jsx("span",{className:"text-xs leading-none",children:n.emoji}):null},`${u}-${a}`)))})})},r)};return l.jsxs("div",{className:"bg-gray-900/50 p-2 rounded-xl border-2 border-white/20 shadow-2xl w-24",children:[l.jsxs("h2",{className:"text-xs font-bold text-white mb-1 text-center flex items-center justify-center gap-1",children:[l.jsx("span",{children:""}),l.jsx("span",{className:"hidden lg:inline",children:"Prximas"})]}),l.jsx("div",{className:"space-y-1.5",children:e.map((n,r)=>t(n,r))})]})},Gn=ce.memo(pb),gb=({heldPiece:e,canHold:t})=>{const n=()=>{if(!e)return l.jsx("div",{className:"bg-gray-800/50 p-2 lg:p-4 rounded-lg border-2 border-dashed border-white/20 flex items-center justify-center",children:l.jsx("span",{className:"text-white/40 text-xs lg:text-sm",children:"Vazio"})});const r=Math.max(...e.shape.map(i=>i.length)),s=e.shape.length;return l.jsx("div",{className:"bg-gray-800/50 p-1.5 rounded-lg border border-white/20",children:l.jsx("div",{className:"flex justify-center",children:l.jsx("div",{className:"grid gap-1",style:{gridTemplateColumns:`repeat(${r}, 1fr)`,gridTemplateRows:`repeat(${s}, 1fr)`},children:e.shape.map((i,o)=>i.map((a,c)=>l.jsx("div",{className:`w-5 h-5 rounded-sm flex items-center justify-center ${a?"border border-white/40 shadow-sm":""}`,style:{backgroundColor:a?Sr(e.color):"transparent"},children:a&&a!==0?l.jsx("span",{className:"text-xs leading-none",children:e.emoji}):null},`${c}-${o}`)))})})})};return l.jsxs("div",{className:"bg-gray-900/50 p-2 rounded-xl border-2 border-white/20 shadow-2xl w-24",children:[l.jsxs("h2",{className:"text-xs font-bold text-white mb-1 text-center flex items-center justify-center gap-1",children:[l.jsx("span",{children:""}),l.jsx("span",{className:"hidden lg:inline",children:"Guardada"})]}),l.jsx("div",{children:n()})]})},zn=ce.memo(gb),fh=500,ka="cat_tetris_error_log";class vb{constructor(){this.logs=this._loadLogs(),this.sessionId=`session_${Date.now()}_${Math.random().toString(36).substr(2,6)}`,this._gameStateProvider=null,this._setupGlobalHandlers()}_loadLogs(){try{const t=localStorage.getItem(ka);return t?JSON.parse(t):[]}catch{return[]}}_saveLogs(){try{this.logs.length>fh&&(this.logs=this.logs.slice(-fh)),localStorage.setItem(ka,JSON.stringify(this.logs))}catch{this.logs=this.logs.slice(-50);try{localStorage.setItem(ka,JSON.stringify(this.logs))}catch{}}}_setupGlobalHandlers(){typeof window>"u"||(window.addEventListener("error",t=>{var n;this.logError("window","uncaughtError",t.message,{filename:t.filename,lineno:t.lineno,colno:t.colno,stack:(n=t.error)==null?void 0:n.stack})}),window.addEventListener("unhandledrejection",t=>{var n;this.logError("window","unhandledRejection",String(t.reason),{stack:(n=t.reason)==null?void 0:n.stack,type:typeof t.reason})}))}setGameStateProvider(t){this._gameStateProvider=t}_getGameStateSnapshot(){var t,n,r,s,i,o;if(!this._gameStateProvider)return null;try{const a=this._gameStateProvider();return a?{isPlaying:a.isPlaying,isPaused:a.isPaused,gameOver:a.gameOver,score:(t=a.score)==null?void 0:t.points,level:(n=a.score)==null?void 0:n.level,lines:(r=a.score)==null?void 0:r.lines,currentPiece:(s=a.currentPiece)==null?void 0:s.type,gameMode:((i=a.gameMode)==null?void 0:i.id)||((o=a.gameMode)==null?void 0:o.name)||null}:null}catch(a){return{snapshotError:a.message}}}logError(t,n,r,s=null){const i={id:`${Date.now()}_${Math.random().toString(36).substr(2,4)}`,timestamp:new Date().toISOString(),sessionId:this.sessionId,level:"error",source:t,action:n,message:r,details:s,gameState:this._getGameStateSnapshot()};return this.logs.push(i),this._saveLogs(),i}logWarn(t,n,r,s=null){const i={id:`${Date.now()}_${Math.random().toString(36).substr(2,4)}`,timestamp:new Date().toISOString(),sessionId:this.sessionId,level:"warn",source:t,action:n,message:r,details:s,gameState:this._getGameStateSnapshot()};return this.logs.push(i),this._saveLogs(),i}getErrors(){return this.logs.filter(t=>t.level==="error")}clearLogs(){this.logs=[],this._saveLogs()}}const Rt=new vb;class xb extends ce.Component{constructor(t){super(t),this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,n){Rt.logError("ErrorBoundary","componentDidCatch",t.message,{stack:t.stack,componentStack:n==null?void 0:n.componentStack}),Rt.saveForExternalAccess()}render(){return this.state.hasError?l.jsx("div",{className:"min-h-screen cat-bg flex items-center justify-center p-4",children:l.jsxs("div",{className:"game-container rounded-2xl p-6 shadow-2xl text-center",children:[l.jsx("h1",{className:"text-3xl font-cat font-bold text-white mb-4",children:" Ops! Algo deu errado"}),l.jsx("p",{className:"text-white/80 mb-4",children:"O jogo encontrou um problema inesperado."}),l.jsx("button",{onClick:()=>window.location.reload(),className:"bg-gradient-to-r from-cat-green to-cat-blue text-white font-bold py-3 px-6 rounded-xl hover:from-cat-blue hover:to-cat-green transition-all duration-200 border-2 border-white/30",children:" Reiniciar Jogo "}),!1]})}):this.props.children}}let Nt=null,mh=!1;function yb(){Nt&&Nt.state==="suspended"&&Nt.resume().catch(()=>{})}function wb(){mh||(mh=!0,["click","touchstart","keydown"].forEach(e=>{document.addEventListener(e,yb,{once:!1,passive:!0})}))}function Lr(){if(Nt)return Nt.state==="suspended"&&Nt.resume().catch(()=>{}),Nt;try{return Nt=new(window.AudioContext||window.webkitAudioContext),wb(),Nt}catch{return null}}function bb(){const e=x.useCallback((a,c,u="sine")=>{const h=Lr();if(h)try{const d=h.createOscillator(),f=h.createGain();d.connect(f),f.connect(h.destination),d.frequency.setValueAtTime(a,h.currentTime),d.type=u,f.gain.setValueAtTime(.1,h.currentTime),f.gain.exponentialRampToValueAtTime(.001,h.currentTime+c),d.start(h.currentTime),d.stop(h.currentTime+c)}catch{}},[]),t=x.useCallback(()=>{e(523,.1)},[e]),n=x.useCallback(()=>{e(659,.2),setTimeout(()=>e(784,.15),50)},[e]),r=x.useCallback(()=>{e(440,.15),setTimeout(()=>e(330,.1),80)},[e]),s=x.useCallback(()=>{e(392,.1),setTimeout(()=>e(494,.1),100),setTimeout(()=>e(588,.15),200)},[e]),i=x.useCallback(()=>{const a=Lr();if(a)try{((h,d,f=.3)=>{h.forEach(y=>{const v=a.createOscillator(),w=a.createGain();v.connect(w),w.connect(a.destination),v.frequency.setValueAtTime(y,a.currentTime),v.type="triangle",w.gain.setValueAtTime(.05,a.currentTime+d),w.gain.exponentialRampToValueAtTime(.001,a.currentTime+d+f),v.start(a.currentTime+d),v.stop(a.currentTime+d+f)})})([523,659,784,1047],0,.5)}catch{}},[]),o=x.useCallback(()=>{e(698,.15),setTimeout(()=>e(880,.15),100),setTimeout(()=>e(1047,.2),200)},[e]);return{playMenuHover:t,playMenuSelect:n,playMenuBack:r,playMenuOpen:s,playGameStart:i,playPWAInstall:o}}class Sb{constructor(){this.services=new Map,this.singletons=new Map}register(t,n,r={}){this.services.set(t,{factory:n,singleton:r.singleton||!1,dependencies:r.dependencies||[]})}resolve(t){const n=this.services.get(t);if(!n)throw new Error(`Service '${t}' not found in container`);if(n.singleton&&this.singletons.has(t))return this.singletons.get(t);const r=n.dependencies.map(i=>this.resolve(i)),s=n.factory(...r);return n.singleton&&this.singletons.set(t,s),s}registerSingleton(t,n,r=[]){this.register(t,n,{singleton:!0,dependencies:r})}registerTransient(t,n,r=[]){this.register(t,n,{singleton:!1,dependencies:r})}has(t){return this.services.has(t)}clear(){this.services.clear(),this.singletons.clear()}}class kb{initializeGame(){throw new Error("Must be implemented")}movePiece(t){throw new Error("Must be implemented")}rotatePiece(){throw new Error("Must be implemented")}rotatePieceLeft(){throw new Error("Must be implemented")}placePiece(){throw new Error("Must be implemented")}holdPiece(){throw new Error("Must be implemented")}hardDrop(){throw new Error("Must be implemented")}updateGame(t){throw new Error("Must be implemented")}pause(){throw new Error("Must be implemented")}resume(){throw new Error("Must be implemented")}restart(){throw new Error("Must be implemented")}getDropPreview(){throw new Error("Must be implemented")}}class uo{constructor(t=10,n=20){this.width=t,this.height=n,this.bufferHeight=4,this.grid=this.createEmptyGrid(),this._buffer=this.createEmptyBuffer()}createEmptyGrid(){return Array(this.height).fill(null).map(()=>Array(this.width).fill(null))}createEmptyBuffer(){return Array(this.bufferHeight).fill(null).map(()=>Array(this.width).fill(null))}clone(){const t=new uo(this.width,this.height);return t.grid=this.grid.map(n=>[...n]),t._buffer=this._buffer.map(n=>[...n]),t}isWithinBounds(t,n){return t>=0&&t<this.width&&n>=-this.bufferHeight&&n<this.height}getCell(t,n){if(!(t<0||t>=this.width)&&!(n<-this.bufferHeight||n>=this.height))return n<0?this._buffer[this.bufferHeight+n][t]:this.grid[n][t]}setCell(t,n,r){return t<0||t>=this.width||n<-this.bufferHeight||n>=this.height?!1:n<0?(this._buffer[this.bufferHeight+n][t]=r,!0):(this.grid[n][t]=r,!0)}clearCell(t,n){return this.setCell(t,n,null)}placePiece(t){t.getCells().forEach(r=>{this.setCell(r.x,r.y,{type:r.type,color:r.color,emoji:r.emoji})})}canPlacePiece(t){return t.getCells().every(r=>r.x<0||r.x>=this.width||r.y>=this.height||r.y<-this.bufferHeight?!1:this.getCell(r.x,r.y)===null)}clearLines(){const t=[...this._buffer,...this.grid],n=[];let r=0;for(let s=t.length-1;s>=0;s--)t[s].every(o=>o!==null)?r++:n.unshift(t[s]);for(;n.length<t.length;)n.unshift(Array(this.width).fill(null));return this._buffer=n.slice(0,this.bufferHeight),this.grid=n.slice(this.bufferHeight),r}getFilledRows(){const t=[];for(let n=0;n<this.height;n++)this.grid[n].every(r=>r!==null)&&t.push(n);return t}isGameOver(){return this._buffer.some(t=>t.some(n=>n!==null))}getBoardState(){return this.grid.map(t=>[...t])}setBoardState(t){this.grid=t.map(n=>[...n]),this._buffer=this.createEmptyBuffer()}clear(){this.grid=this.createEmptyGrid(),this._buffer=this.createEmptyBuffer()}addGarbageLines(t,n=-1){if(t<=0)return!1;const r=n>=0?n:Math.floor(Math.random()*this.width),s=[];for(let c=0;c<t;c++){const u=Array(this.width).fill(null).map((h,d)=>d===r?null:{type:"garbage",color:"#808080",emoji:""});s.push(u)}const i=this.grid.splice(0,t),o=this._buffer.splice(0,t);return this._buffer.push(...i),this.grid.push(...s),o.some(c=>c.some(u=>u!==null))}}class ho{constructor(){this.points=0,this.level=1,this.lines=0,this.combo=0,this.tSpins=0,this.backToBack=0,this.tetrisCount=0,this._fixedLevel=null}addPoints(t){this.points+=t}addLines(t){this.lines+=t,this.updateLevel()}incrementCombo(){this.combo++}resetCombo(){this.combo=0}addTSpin(){this.tSpins++}addBackToBack(){this.backToBack++}addTetris(){this.tetrisCount++}updateLevel(){this._fixedLevel||(this.level=Math.min(15,Math.floor(this.lines/10)+1))}getLevel(){return this.level}getDropTime(){const t=this._fixedLevel||this.level;return[1e3,793,618,473,355,262,190,135,94,64,43,28,18,11,7][Math.min(t,15)-1]||7}reset(){this.points=0,this.level=1,this.lines=0,this.combo=0,this.tSpins=0,this.backToBack=0,this.tetrisCount=0,this._fixedLevel=null}clone(){const t=new ho;return t.points=this.points,t.level=this.level,t.lines=this.lines,t.combo=this.combo,t.tSpins=this.tSpins,t.backToBack=this.backToBack,t.tetrisCount=this.tetrisCount,t}toJSON(){return{points:this.points,level:this.level,lines:this.lines,combo:this.combo,tSpins:this.tSpins,backToBack:this.backToBack,tetrisCount:this.tetrisCount}}}class kt{constructor(t,n,r,s,i,o=!1,a=0){this.type=t,this.shape=n,this.color=r,this.emoji=s,this.position=i,this.isTSpin=o,this.rotationState=a}move(t,n){return new kt(this.type,this.shape,this.color,this.emoji,{x:this.position.x+t,y:this.position.y+n},this.isTSpin,this.rotationState)}rotate(){const t=this.shape[0].map((n,r)=>this.shape.map(s=>s[r]).reverse());return new kt(this.type,t,this.color,this.emoji,this.position,this.isTSpin,(this.rotationState+1)%4)}setTSpin(t){return new kt(this.type,this.shape,this.color,this.emoji,this.position,t,this.rotationState)}clone(){return new kt(this.type,this.shape.map(t=>[...t]),this.color,this.emoji,{...this.position},this.isTSpin,this.rotationState)}reset(t,n,r,s,i,o=!1){return this.type=t,this.shape=n,this.color=r,this.emoji=s,this.position=i,this.isTSpin=o,this.rotationState=0,this}getWidth(){var t;return((t=this.shape[0])==null?void 0:t.length)||0}getHeight(){return this.shape.length||0}getCells(){const t=[];return this.shape.forEach((n,r)=>{n.forEach((s,i)=>{s&&t.push({x:this.position.x+i,y:this.position.y+r,type:this.type,color:this.color,emoji:this.emoji})})}),t}}class jb{calculateScore(t,n,r,s,i){throw new Error("Must be implemented")}calculateSoftDropPoints(){throw new Error("Must be implemented")}calculateTSpinBonus(t){throw new Error("Must be implemented")}calculateBackToBackBonus(t){throw new Error("Must be implemented")}calculateComboBonus(t){throw new Error("Must be implemented")}}class gn extends jb{calculateScore(t,n,r,s,i){let o=this.getBasePoints(t);return s&&(o=this.calculateTSpinBonus(t)),i&&(o=this.calculateBackToBackBonus(o)),o*=n,o+=this.calculateComboBonus(r),o}calculateSoftDropPoints(){return 1}calculateTSpinBonus(t){return[0,800,1200,1600,2e3][t]||0}calculateBackToBackBonus(t){return Math.floor(t*1.5)}calculateComboBonus(t){return t*50}getBasePoints(t){return[0,100,300,500,800][t]||0}}const De={BOARD_WIDTH:10,BOARD_HEIGHT:20,BUFFER_ROWS:4,INITIAL_DROP_TIME:1e3,LOCK_DELAY:500,SOFT_DROP_MULTIPLIER:20,NEXT_PIECES_COUNT:3,BAG_SIZE:7,KICK_OFFSETS:[{x:-1,y:0},{x:1,y:0},{x:0,y:-1},{x:-1,y:-1},{x:1,y:-1}],SRS_KICKS_CW:{"0>1":[{x:-1,y:0},{x:-1,y:-1},{x:0,y:2},{x:-1,y:2}],"1>2":[{x:1,y:0},{x:1,y:1},{x:0,y:-2},{x:1,y:-2}],"2>3":[{x:1,y:0},{x:1,y:-1},{x:0,y:2},{x:1,y:2}],"3>0":[{x:-1,y:0},{x:-1,y:1},{x:0,y:-2},{x:-1,y:-2}]},SRS_KICKS_CCW:{"1>0":[{x:1,y:0},{x:1,y:1},{x:0,y:-2},{x:1,y:-2}],"2>1":[{x:-1,y:0},{x:-1,y:-1},{x:0,y:2},{x:-1,y:2}],"3>2":[{x:-1,y:0},{x:-1,y:1},{x:0,y:-2},{x:-1,y:-2}],"0>3":[{x:1,y:0},{x:1,y:-1},{x:0,y:2},{x:1,y:2}]},DROP_TIMES:[1e3,850,700,600,500,400,350,300,250,200,150,100,80,60,50],LEVEL_LINES_REQUIREMENT:10,MAX_LEVEL:15};class Hn extends kb{constructor(t,n,r,s=new gn){super(),this.pieceFactory=t,this.movementStrategyFactory=n,this.gameRepository=r,this.scoringService=s,this.board=new uo(De.BOARD_WIDTH,De.BOARD_HEIGHT),this.score=new ho,this.currentPiece=null,this.nextPieces=[],this.heldPiece=null,this.canHold=!0,this.isPlaying=!1,this.isPaused=!1,this.gameOver=!1,this.lastDropTime=0,this.backToBack=!1,this._lockDelayActive=!1,this._lockDelayElapsed=0,this._lockDelayResets=0,this._lockDelayMax=De.LOCK_DELAY,this._lockDelayMaxResets=15,this.gameMode=null,this.modeTimeElapsed=0,this.modeStartTime=0,this.pendingGarbage=0,this._lastAttack=0,this._dirty=!0,this._cachedState=null}_markDirty(){this._dirty=!0,this._cachedState=null}get isDirty(){return this._dirty}clearDirty(){this._dirty=!1}initializeGame(){this.pieceFactory.resetBag(),this.board=new uo(De.BOARD_WIDTH,De.BOARD_HEIGHT),this.score=new ho,this.currentPiece=this.pieceFactory.createRandomPiece(),this.nextPieces=this.pieceFactory.createNextPieces(De.NEXT_PIECES_COUNT),this.heldPiece=null,this.canHold=!0,this.isPlaying=!1,this.isPaused=!1,this.gameOver=!1,this.lastDropTime=0,this.backToBack=!1,this._lockDelayActive=!1,this._lockDelayElapsed=0,this._lockDelayResets=0,this.modeTimeElapsed=0,this.modeStartTime=Date.now(),this.pendingGarbage=0,this._lastAttack=0,this.applyGameMode(),R.emit(B.GAME_INITIALIZED),this._markDirty()}setGameMode(t){this.gameMode=t}applyGameMode(){if(!this.gameMode||!this.gameMode.rules)return;const t=this.gameMode.rules;t.startLevel&&(this.score.level=t.startLevel),t.fixedLevel?this.score._fixedLevel=t.fixedLevel:this.score._fixedLevel=null,this._modeRules=t}movePiece(t){var n,r;if(!(!this.currentPiece||this.gameOver||this.isPaused))try{const s=this.movementStrategyFactory.createStrategy(t),i=s.execute(this.currentPiece,this.board.grid);if(i!==this.currentPiece){if(this.currentPiece=i,this._markDirty(),t==="down"){if(this._lockDelayActive=!1,this._lockDelayElapsed=0,this.lastDropTime=0,s.getSoftDropPoints){const o=this.scoringService.calculateSoftDropPoints();this.score.addPoints(o)}}else(t==="left"||t==="right")&&(this._resetLockDelay(),this._checkUngrounded());R.emit(B.PIECE_MOVED,{direction:t,piece:i})}else t==="down"&&(this._markDirty(),this._lockDelayActive||(this._lockDelayActive=!0,this._lockDelayElapsed=0,this._lockDelayResets=0))}catch(s){Rt.logError("GameService","movePiece",s.message,{direction:t,pieceType:(n=this.currentPiece)==null?void 0:n.type,piecePos:(r=this.currentPiece)==null?void 0:r.position,stack:s.stack})}}rotatePiece(){var t,n;if(!(!this.currentPiece||this.gameOver||this.isPaused))try{const s=this.movementStrategyFactory.createStrategy("rotate").execute(this.currentPiece,this.board.grid);s!==this.currentPiece&&(this.currentPiece=s,this._markDirty(),this._resetLockDelay(),this._checkUngrounded(),R.emit(B.PIECE_ROTATED,{piece:s}))}catch(r){Rt.logError("GameService","rotatePiece",r.message,{pieceType:(t=this.currentPiece)==null?void 0:t.type,piecePos:(n=this.currentPiece)==null?void 0:n.position,stack:r.stack})}}rotatePieceLeft(){if(!this.currentPiece||this.gameOver||this.isPaused)return;const n=this.movementStrategyFactory.createStrategy("rotateLeft").execute(this.currentPiece,this.board.grid);n!==this.currentPiece&&(this.currentPiece=n,this._markDirty(),this._resetLockDelay(),this._checkUngrounded(),R.emit(B.PIECE_ROTATED,{piece:n}))}placePiece(){var n,r;if(!this.currentPiece)return;this._markDirty(),this._lockDelayActive=!1,this._lockDelayElapsed=0,this._lockDelayResets=0,this._lastAttack=0,this.board.placePiece(this.currentPiece);const t=this.board.clearLines();if(t>0){this.score.addLines(t),this.score.incrementCombo();const s=this.currentPiece.isTSpin,i=this.scoringService.calculateScore(t,this.score.getLevel(),this.score.combo,s,this.backToBack);if(this.score.addPoints(i),s||t===4?(this.backToBack&&R.emit(B.BACK_TO_BACK),this.backToBack=!0,s&&(this.score.addTSpin(),R.emit(B.T_SPIN,{linesCleared:t}))):this.backToBack=!1,R.emit(B.LINE_CLEARED,{linesCleared:t}),R.emit(B.SCORE_UPDATED,{score:this.score.points,level:this.score.level,combo:this.score.combo,points:i,isTSpin:s}),this._lastAttack=this._calculateAttack(t,s,this.score.combo,this.backToBack),this._lastAttack>0&&this.pendingGarbage>0){const o=Math.min(this._lastAttack,this.pendingGarbage);this._lastAttack-=o,this.pendingGarbage-=o}}else this.score.resetCombo();if(R.emit(B.PIECE_PLACED,{piece:this.currentPiece,linesCleared:t}),this.pendingGarbage>0){const s=this.board.addGarbageLines(this.pendingGarbage);if(this.pendingGarbage=0,s&&this.board.isGameOver()){this.gameOver=!0,R.emit(B.GAME_OVER);return}}if(this.getNextPiece(),this.canHold=!0,(n=this._modeRules)!=null&&n.lineGoal&&this.score.lines>=this._modeRules.lineGoal){this.gameOver=!0,R.emit(B.GAME_OVER);return}if(((r=this._modeRules)==null?void 0:r.gameOver)===!1){if(this.board.isGameOver()){this.board._buffer=this.board.createEmptyBuffer();for(let s=0;s<4;s++)for(let i=0;i<this.board.width;i++)this.board.clearCell(i,s)}}else this.board.isGameOver()&&(this.gameOver=!0,R.emit(B.GAME_OVER))}_calculateAttack(t,n,r,s){if(t===0)return 0;let i=0;if(n?i=[0,2,4,6][t]||0:i=[0,0,1,2,4][t]||0,s&&(n||t===4)&&(i+=1),r>=1){const a=[0,0,1,1,2,2,3,3,4,4];i+=a[Math.min(r,a.length-1)]||4}return this.board.grid.every(a=>a.every(c=>c===null))&&(i=10),i}receiveGarbage(t){t>0&&(this.pendingGarbage+=t,this._markDirty())}consumeAttack(){const t=this._lastAttack;return this._lastAttack=0,t}holdPiece(){var t,n;if(!(!this.canHold||!this.currentPiece)){this._lockDelayActive=!1,this._lockDelayElapsed=0,this._lockDelayResets=0;try{const r=this.heldPiece,s=this.currentPiece.type,i=Lt[s];if(this.heldPiece=new kt(s,i.shape,i.color,i.emoji,{x:3,y:0},!1,0),r){const o=r.type==="I"?{x:3,y:-2}:{x:3,y:0},a=Lt[r.type];this.currentPiece=new kt(r.type,a.shape,a.color,a.emoji,o,!1,0)}else this.getNextPiece();this.canHold=!1,this._markDirty(),R.emit(B.PIECE_HELD,{heldPiece:this.heldPiece})}catch(r){Rt.logError("GameService","holdPiece",r.message,{currentPieceType:(t=this.currentPiece)==null?void 0:t.type,heldPieceType:(n=this.heldPiece)==null?void 0:n.type,stack:r.stack})}}}hardDrop(){var t,n;if(!(!this.currentPiece||this.gameOver||this.isPaused))try{this._lockDelayActive=!1,this._lockDelayElapsed=0;const s=this.movementStrategyFactory.createStrategy("hardDrop").execute(this.currentPiece,this.board.grid);this.currentPiece=s.piece,this.score.addPoints(s.dropDistance),this._markDirty();const i=this.currentPiece;R.emit(B.HARD_DROP,{dropDistance:s.dropDistance}),R.emit(B.PIECE_MOVED,{direction:"hardDrop",piece:i}),this.placePiece()}catch(r){Rt.logError("GameService","hardDrop",r.message,{pieceType:(t=this.currentPiece)==null?void 0:t.type,piecePos:(n=this.currentPiece)==null?void 0:n.position,stack:r.stack})}}updateGame(t){var n;if(!(!this.isPlaying||this.gameOver||this.isPaused)){if((n=this._modeRules)!=null&&n.timeLimit&&(this.modeTimeElapsed=(Date.now()-this.modeStartTime)/1e3,this.modeTimeElapsed>=this._modeRules.timeLimit)){this.gameOver=!0,this._markDirty(),R.emit(B.GAME_OVER);return}if(this._lockDelayActive){if(this._lockDelayElapsed+=t,this._lockDelayElapsed>=this._lockDelayMax){this._lockDelayActive=!1,this._lockDelayElapsed=0,this.placePiece(),this.lastDropTime=0;return}return}this.lastDropTime+=t,this.lastDropTime>=this.score.getDropTime()&&(this.movePiece("down"),this.lastDropTime=0)}}_resetLockDelay(){this._lockDelayActive&&this._lockDelayResets<this._lockDelayMaxResets&&(this._lockDelayElapsed=0,this._lockDelayResets++)}_checkUngrounded(){if(!this._lockDelayActive||!this.currentPiece)return;this.board.canPlacePiece(this.currentPiece.move(0,1))&&(this._lockDelayActive=!1,this._lockDelayElapsed=0,this._lockDelayResets=0)}pause(){this.isPaused=!0,this._markDirty(),R.emit(B.GAME_PAUSED)}resume(){this.isPaused=!1,this.isPlaying=!0,this._markDirty(),R.emit(B.GAME_RESUMED)}restart(){this.initializeGame(),this.isPlaying=!0,this.isPaused=!1,this.modeStartTime=Date.now(),this._markDirty()}getDropPreview(){if(!this.currentPiece)return null;let t=this.currentPiece,n=0;const r=20;for(;n<r&&this.board.canPlacePiece(t.move(0,1));)t=t.move(0,1),n++;return t}getNextPiece(){const t=this.nextPieces.shift();this.nextPieces.push(this.pieceFactory.createRandomPiece()),this.currentPiece=t,this.currentPiece&&!this.board.canPlacePiece(this.currentPiece)&&(this.gameOver=!0,this._markDirty(),R.emit(B.GAME_OVER))}getGameState(){var t;return this._cachedState&&!this._dirty?this._cachedState:(this._cachedState={board:this.board.grid.map(n=>[...n]),currentPiece:this.currentPiece,nextPieces:[...this.nextPieces],heldPiece:this.heldPiece,canHold:this.canHold,score:this.score.toJSON(),isPlaying:this.isPlaying,isPaused:this.isPaused,gameOver:this.gameOver,backToBack:this.backToBack,gameMode:this.gameMode,modeTimeElapsed:(t=this._modeRules)!=null&&t.timeLimit?Math.max(0,this._modeRules.timeLimit-(Date.now()-this.modeStartTime)/1e3):null},this._cachedState)}setGameState(t){this.board.setBoardState(t.board),this.currentPiece=t.currentPiece,this.nextPieces=t.nextPieces,this.heldPiece=t.heldPiece,this.canHold=t.canHold,this.isPlaying=t.isPlaying,this.isPaused=t.isPaused,this.gameOver=t.gameOver,this.backToBack=t.backToBack,Object.assign(this.score,t.score)}}class Cb{saveHighScore(t){throw new Error("Must be implemented")}getHighScore(){throw new Error("Must be implemented")}saveSettings(t){throw new Error("Must be implemented")}getSettings(){throw new Error("Must be implemented")}saveGameState(t){throw new Error("Must be implemented")}getGameState(){throw new Error("Must be implemented")}clearGameState(){throw new Error("Must be implemented")}}class Pb extends Cb{constructor(){super(),this.highScoreKey="cat-tetris-high-score",this.settingsKey="cat-tetris-settings",this.gameStateKey="cat-tetris-game-state"}saveHighScore(t){localStorage.setItem(this.highScoreKey,t.toString())}getHighScore(){return parseInt(localStorage.getItem(this.highScoreKey)||"0")}saveSettings(t){localStorage.setItem(this.settingsKey,JSON.stringify(t))}getSettings(){const t=localStorage.getItem(this.settingsKey);return t?JSON.parse(t):{volume:80,gameSpeed:"normal",soundEnabled:!0,particlesEnabled:!0}}saveGameState(t){localStorage.setItem(this.gameStateKey,JSON.stringify(t))}getGameState(){const t=localStorage.getItem(this.gameStateKey);return t?JSON.parse(t):null}clearGameState(){localStorage.removeItem(this.gameStateKey)}load(t){const n=localStorage.getItem(`cat-tetris-${t}`);return n?JSON.parse(n):null}save(t,n){localStorage.setItem(`cat-tetris-${t}`,JSON.stringify(n))}remove(t){localStorage.removeItem(`cat-tetris-${t}`)}}class Tb{createPiece(t,n){throw new Error("Must be implemented")}createRandomPiece(){throw new Error("Must be implemented")}createNextPieces(t){throw new Error("Must be implemented")}}class Eb{execute(t,n){throw new Error("Must be implemented")}}class Or extends Eb{execute(t,n){throw new Error("execute method must be implemented")}movePiece(t,n,r,s){if(!t||!n||!Array.isArray(n))return t;const i={x:t.position.x+r,y:t.position.y+s};return this.isValidMove(t,n,i)?t.move(r,s):t}isValidMove(t,n,r){return!t||!t.shape||!n||!Array.isArray(n)?!1:t.shape.every((s,i)=>Array.isArray(s)?s.every((o,a)=>{if(!o)return!0;const c=r.x+a,u=r.y+i;return c<0||c>=De.BOARD_WIDTH||u>=De.BOARD_HEIGHT?!1:u<0?!0:n[u]&&Array.isArray(n[u])&&!n[u][c]}):!0)}}class Nb extends Or{execute(t,n){return this.movePiece(t,n,-1,0)}}class _b extends Or{execute(t,n){return this.movePiece(t,n,1,0)}}class Ab extends Or{execute(t,n){if(!t||!n)return t;const r={x:t.position.x,y:t.position.y+1};return this.isValidMove(t,n,r)?t.move(0,1):t}getSoftDropPoints(){return 1}}class Mb extends Or{execute(t,n){var u;if(!t||!t.shape||!n)return t;const r=this.rotatePiece(t);let s=!1;if(this.isValidMove(r,n,r.position))return s=this.detectTSpin(r,n),r.setTSpin(s);const i=t.rotationState??0,o=(i+1)%4,a=`${i}>${o}`,c=((u=De.SRS_KICKS_CW)==null?void 0:u[a])||De.KICK_OFFSETS;for(const h of c){const d={x:r.position.x+h.x,y:r.position.y+h.y};if(this.isValidMove(r,n,d)){const f=r.move(h.x,h.y);return s=this.detectTSpin(f,n),f.setTSpin(s)}}return t}detectTSpin(t,n){return t.type!=="T"?!1:this.getCornerPositions(t).filter(o=>o.x<0||o.x>=De.BOARD_WIDTH||o.y<0||o.y>=De.BOARD_HEIGHT||n[o.y]&&n[o.y][o.x]).length>=3}getCornerPositions(t){const n=[],r=t.position.x,s=t.position.y;return n.push({x:r,y:s}),n.push({x:r+2,y:s}),n.push({x:r,y:s+2}),n.push({x:r+2,y:s+2}),n}rotatePiece(t){return!t||!t.shape||!Array.isArray(t.shape)||t.shape.length===0?t:t.rotate()}}class Lb extends Or{execute(t,n){var u;if(!t||!t.shape||!n)return t;const r=this.rotatePieceLeft(t);let s=!1;if(this.isValidMove(r,n,r.position))return s=this.detectTSpin(r,n),r.setTSpin(s);const i=t.rotationState??0,o=(i+3)%4,a=`${i}>${o}`,c=((u=De.SRS_KICKS_CCW)==null?void 0:u[a])||De.KICK_OFFSETS;for(const h of c){const d={x:r.position.x+h.x,y:r.position.y+h.y};if(this.isValidMove(r,n,d)){const f=r.move(h.x,h.y);return s=this.detectTSpin(f,n),f.setTSpin(s)}}return t}detectTSpin(t,n){return t.type!=="T"?!1:this.getCornerPositions(t).filter(o=>o.x<0||o.x>=De.BOARD_WIDTH||o.y<0||o.y>=De.BOARD_HEIGHT||n[o.y]&&n[o.y][o.x]).length>=3}getCornerPositions(t){const n=[],r=t.position.x,s=t.position.y;return n.push({x:r,y:s}),n.push({x:r+2,y:s}),n.push({x:r,y:s+2}),n.push({x:r+2,y:s+2}),n}rotatePieceLeft(t){if(!t||!t.shape||!Array.isArray(t.shape)||t.shape.length===0)return t;const n=t.shape[0].map((r,s)=>t.shape.map(i=>i[i.length-1-s]));return new kt(t.type,n,t.color,t.emoji,t.position,t.isTSpin,(t.rotationState+3)%4)}}class Rb extends Or{execute(t,n){if(!t||!n)return{piece:t,dropDistance:0};let r=t,s=0;for(;;){const i={x:r.position.x,y:r.position.y+1};if(this.isValidMove(r,n,i))r=r.move(0,1),s++;else break}return{piece:r,dropDistance:s}}}class ph{constructor(){this.reset()}reset(){return this.piece={type:null,shape:[],color:"#000000",emoji:"",position:{x:3,y:0},isTSpin:!1},this}setType(t){return this.piece.type=t,this}setShape(t){return this.piece.shape=t,this}setColor(t){return this.piece.color=t,this}setEmoji(t){return this.piece.emoji=t,this}setPosition(t,n){return this.piece.position={x:t,y:n},this}setTSpin(t){return this.piece.isTSpin=t,this}build(){const t=new kt(this.piece.type,this.piece.shape,this.piece.color,this.piece.emoji,this.piece.position,this.piece.isTSpin);return this.reset(),t}}class Un extends Tb{constructor(){super(),this.pieceConfigs=Lt,this._bag=[],this._bagIndex=0}_refillBag(){this._bag=Object.keys(this.pieceConfigs);for(let t=this._bag.length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1));[this._bag[t],this._bag[n]]=[this._bag[n],this._bag[t]]}this._bagIndex=0}resetBag(){this._bag=[],this._bagIndex=0}_getNextType(){return this._bagIndex>=this._bag.length&&this._refillBag(),this._bag[this._bagIndex++]}createPiece(t,n={x:3,y:0}){const r=this.pieceConfigs[t];if(!r)throw new Error(`Tipo de pea invlido: ${t}`);return new ph().setType(t).setShape(r.shape).setColor(r.color).setEmoji(r.emoji).setPosition(n.x,n.y).build()}createRandomPiece(){const t=this._getNextType(),n=this.pieceConfigs[t];let r={x:3,y:0};return t==="I"&&(r={x:3,y:-2}),new ph().setType(t).setShape(n.shape).setColor(n.color).setEmoji(n.emoji).setPosition(r.x,r.y).build()}createNextPieces(t=3){const n=[];for(let r=0;r<t;r++)n.push(this.createRandomPiece());return n}registerPieceType(t,n){this.pieceConfigs[t]=n}getPieceTypes(){return Object.keys(this.pieceConfigs)}}class $n{constructor(){this.strategies=new Map,this.registerDefaultStrategies()}registerDefaultStrategies(){this.strategies.set("left",()=>new Nb),this.strategies.set("right",()=>new _b),this.strategies.set("down",()=>new Ab),this.strategies.set("rotate",()=>new Mb),this.strategies.set("rotateLeft",()=>new Lb),this.strategies.set("hardDrop",()=>new Rb)}createStrategy(t){const n=this.strategies.get(t);if(!n)throw new Error(`Strategy type '${t}' not found`);return n()}registerStrategy(t,n){if(typeof n!="function")throw new Error("Strategy factory must be a function");this.strategies.set(t,n)}unregisterStrategy(t){this.strategies.delete(t)}getAvailableStrategies(){return Array.from(this.strategies.keys())}hasStrategy(t){return this.strategies.has(t)}}class Db{getSettings(){throw new Error("Method getSettings must be implemented")}saveSettings(t){throw new Error("Method saveSettings must be implemented")}updateSetting(t,n){throw new Error("Method updateSetting must be implemented")}resetSettings(){throw new Error("Method resetSettings must be implemented")}}class Ib extends Db{constructor(){super(),this.storageKey="cat-tetris-settings",this.defaultSettings={volume:80,gameSpeed:"normal",soundEnabled:!0,particlesEnabled:!0}}getSettings(){try{const t=localStorage.getItem(this.storageKey);return t?{...this.defaultSettings,...JSON.parse(t)}:this.defaultSettings}catch{return this.defaultSettings}}saveSettings(t){try{const n={...this.defaultSettings,...t};return localStorage.setItem(this.storageKey,JSON.stringify(n)),n}catch{throw new Error("Failed to save settings")}}resetSettings(){try{return localStorage.removeItem(this.storageKey),this.defaultSettings}catch{throw new Error("Failed to reset settings")}}updateSetting(t,n){const s={...this.getSettings(),[t]:n};return this.saveSettings(s)}}class Ob{getStats(){throw new Error("Method getStats must be implemented")}incrementPlayTime(){throw new Error("Method incrementPlayTime must be implemented")}incrementPiecesPlaced(){throw new Error("Method incrementPiecesPlaced must be implemented")}addLinesCleared(t){throw new Error("Method addLinesCleared must be implemented")}incrementTSpins(){throw new Error("Method incrementTSpins must be implemented")}updateMaxCombo(t){throw new Error("Method updateMaxCombo must be implemented")}reset(){throw new Error("Method reset must be implemented")}}class Fb extends Ob{constructor(){super(),this.stats={playTime:0,piecesPlaced:0,linesCleared:0,tSpins:0,backToBack:0,maxCombo:0,tetrisCount:0,linesPerSecond:0},this.sessionStartTime=Date.now()}getStats(){return{...this.stats}}incrementPlayTime(){this.stats.playTime+=1,this.calculateLinesPerSecond()}incrementPiecesPlaced(){this.stats.piecesPlaced+=1}addLinesCleared(t){this.stats.linesCleared+=t,t===4&&(this.stats.tetrisCount+=1),this.calculateLinesPerSecond()}incrementTSpins(){this.stats.tSpins+=1}incrementBackToBack(){this.stats.backToBack+=1}updateMaxCombo(t){t>this.stats.maxCombo&&(this.stats.maxCombo=t)}calculateLinesPerSecond(){this.stats.playTime>0?this.stats.linesPerSecond=this.stats.linesCleared/this.stats.playTime:this.stats.linesPerSecond=0}reset(){this.stats={playTime:0,piecesPlaced:0,linesCleared:0,tSpins:0,backToBack:0,maxCombo:0,tetrisCount:0,linesPerSecond:0},this.sessionStartTime=Date.now()}getSessionDuration(){return Date.now()-this.sessionStartTime}}class Vb{registerHandler(t,n){throw new Error("Method registerHandler must be implemented")}unregisterHandler(t,n){throw new Error("Method unregisterHandler must be implemented")}startListening(){throw new Error("Method startListening must be implemented")}stopListening(){throw new Error("Method stopListening must be implemented")}setKeyMapping(t,n){throw new Error("Method setKeyMapping must be implemented")}getKeyMappings(){throw new Error("Method getKeyMappings must be implemented")}}class Bb extends Vb{constructor(){super();qs(this,"_handleKeyDown",n=>{if(this.preventDefaultKeys.includes(n.key)&&n.preventDefault(),n.repeat)return;const r=this.keyMappings[n.key];r&&(this._fireAction(r),this._dasActions.has(r)&&this._pressedKeys.set(n.key,{action:r,dasTimer:0,arrTimer:0,dasTriggered:!1}))});qs(this,"_handleKeyUp",n=>{this._pressedKeys.delete(n.key)});qs(this,"_handleBlur",()=>{this._pressedKeys.clear()});this.keyMappings={ArrowLeft:"moveLeft",ArrowRight:"moveRight",ArrowDown:"moveDown",ArrowUp:"rotate",x:"rotate",X:"rotate",z:"rotateLeft",Z:"rotateLeft"," ":"hardDrop",c:"hold",C:"hold",Shift:"hold",p:"pause",P:"pause",Escape:"pause"},this.preventDefaultKeys=["ArrowLeft","ArrowRight","ArrowDown","ArrowUp"," "],this.handlers=new Map,this.isListening=!1,this.das=167,this.arr=33,this.sdf=5,this._dasActions=new Set(["moveLeft","moveRight","moveDown"]),this._pressedKeys=new Map,this._rafId=null,this._lastTime=0}setDAS(n){this.das=Math.max(0,n)}setARR(n){this.arr=Math.max(0,n)}getDAS(){return this.das}getARR(){return this.arr}registerHandler(n,r){this.handlers.has(n)||this.handlers.set(n,[]),this.handlers.get(n).push(r)}unregisterHandler(n,r){if(this.handlers.has(n)){const s=this.handlers.get(n),i=s.indexOf(r);i>-1&&s.splice(i,1)}}_fireAction(n){this.handlers.has(n)&&this.handlers.get(n).forEach(r=>{try{r()}catch{}})}startListening(){this.isListening||(window.addEventListener("keydown",this._handleKeyDown),window.addEventListener("keyup",this._handleKeyUp),window.addEventListener("blur",this._handleBlur),this.isListening=!0,this._startLoop())}stopListening(){this.isListening&&(window.removeEventListener("keydown",this._handleKeyDown),window.removeEventListener("keyup",this._handleKeyUp),window.removeEventListener("blur",this._handleBlur),this.isListening=!1,this._stopLoop(),this._pressedKeys.clear())}_startLoop(){this._lastTime=performance.now();const n=r=>{const s=r-this._lastTime;this._lastTime=r,this._updateDAS(s),this._rafId=requestAnimationFrame(n)};this._rafId=requestAnimationFrame(n)}_stopLoop(){this._rafId&&(cancelAnimationFrame(this._rafId),this._rafId=null)}_updateDAS(n){for(const[r,s]of this._pressedKeys)if(s.dasTriggered)if(s.arrTimer+=n,this.arr===0){for(let i=0;i<20;i++)this._fireAction(s.action);s.arrTimer=0}else for(;s.arrTimer>=this.arr;)s.arrTimer-=this.arr,this._fireAction(s.action);else if(s.dasTimer+=n,s.dasTimer>=this.das)if(s.dasTriggered=!0,s.arrTimer=0,this.arr===0)for(let i=0;i<20;i++)this._fireAction(s.action);else this._fireAction(s.action)}setKeyMapping(n,r){this.keyMappings[n]=r}removeKeyMapping(n){delete this.keyMappings[n]}getKeyMappings(){return{...this.keyMappings}}clear(){this.handlers.clear(),this.stopListening()}}class Gb{constructor(t){this.gameRepository=t,this.currency=this.loadCurrency()}loadCurrency(){return this.gameRepository.load("playerCurrency")||{fish:0,totalEarned:0,totalSpent:0}}save(){this.gameRepository.save("playerCurrency",this.currency)}getFish(){return this.currency.fish}getCurrency(){return{...this.currency}}addFish(t,n="unknown"){return t<=0?!1:(this.currency.fish+=t,this.currency.totalEarned+=t,this.save(),!0)}spendFish(t,n="unknown"){return t<=0||this.currency.fish<t?!1:(this.currency.fish-=t,this.currency.totalSpent+=t,this.save(),!0)}canAfford(t){return this.currency.fish>=t}reset(){this.currency={fish:0,totalEarned:0,totalSpent:0},this.save()}getStats(){return{currentFish:this.currency.fish,totalEarned:this.currency.totalEarned,totalSpent:this.currency.totalSpent,netWorth:this.currency.totalEarned-this.currency.totalSpent}}}const le={CLEAR_LINES:"clear_lines",T_SPINS:"t_spins",COMBOS:"combos",SURVIVE_TIME:"survive_time",REACH_LEVEL:"reach_level",SCORE_POINTS:"score_points",PLACE_PIECES:"place_pieces",BACK_TO_BACK:"back_to_back",TETRIS_CLEAR:"tetris_clear"},ja=[{type:le.CLEAR_LINES,target:20,reward:100,difficulty:"easy",title:"Limpeza Bsica",description:"Limpe 20 linhas"},{type:le.PLACE_PIECES,target:30,reward:100,difficulty:"easy",title:"Gato Trabalhador",description:"Coloque 30 peas"},{type:le.SURVIVE_TIME,target:180,reward:120,difficulty:"easy",title:"Sobrevivente",description:"Sobreviva por 3 minutos"},{type:le.SCORE_POINTS,target:5e3,reward:150,difficulty:"easy",title:"Fazendo Pontos",description:"Alcance 5.000 pontos"},{type:le.CLEAR_LINES,target:40,reward:200,difficulty:"medium",title:"Limpeza Profunda",description:"Limpe 40 linhas em uma partida"},{type:le.T_SPINS,target:3,reward:250,difficulty:"medium",title:"Mestre do T-Spin",description:"Faa 3 T-Spins"},{type:le.COMBOS,target:7,reward:200,difficulty:"medium",title:"Combo Felino",description:"Alcance um combo de 7x"},{type:le.REACH_LEVEL,target:8,reward:180,difficulty:"medium",title:"Subindo de Nvel",description:"Alcance o nvel 8"},{type:le.TETRIS_CLEAR,target:2,reward:220,difficulty:"medium",title:"Tetris Duplo",description:"Faa 2 Tetris (4 linhas)"},{type:le.T_SPINS,target:5,reward:350,difficulty:"hard",title:"Ninja T-Spin",description:"Faa 5 T-Spins em uma partida"},{type:le.COMBOS,target:10,reward:300,difficulty:"hard",title:"Combo Insano",description:"Alcance um combo de 10x"},{type:le.SURVIVE_TIME,target:600,reward:400,difficulty:"hard",title:"Resistncia Felina",description:"Sobreviva por 10 minutos"},{type:le.REACH_LEVEL,target:12,reward:350,difficulty:"hard",title:"Mestre dos Gatos",description:"Alcance o nvel 12"},{type:le.SCORE_POINTS,target:5e4,reward:400,difficulty:"hard",title:"Pontuao Lendria",description:"Alcance 50.000 pontos"},{type:le.BACK_TO_BACK,target:3,reward:380,difficulty:"hard",title:"Back-to-Back Master",description:"Faa 3 back-to-backs"}];class zb{constructor(t,n){this.gameRepository=t,this.currencyService=n,this.missions=this.loadMissions(),this.checkAndResetDaily()}loadMissions(){return this.gameRepository.load("dailyMissions")||this.generateNewMissions()}save(){this.gameRepository.save("dailyMissions",this.missions)}checkAndResetDaily(){const n=new Date().toDateString();this.missions.lastResetDate!==n&&(this.missions=this.generateNewMissions(),this.save())}generateNewMissions(){const t=ja.filter(o=>o.difficulty==="easy"),n=ja.filter(o=>o.difficulty==="medium"),r=ja.filter(o=>o.difficulty==="hard"),s=[this.selectRandomMission(t),this.selectRandomMission(n),this.selectRandomMission(r)],i=new Date;return{lastResetDate:i.toDateString(),missions:s.map((o,a)=>({id:`mission_${i.getTime()}_${a}`,...o,progress:0,completed:!1,claimed:!1}))}}selectRandomMission(t){return t[Math.floor(Math.random()*t.length)]}getMissions(){return this.checkAndResetDaily(),this.missions.missions}updateProgress(t,n){let r=!1;return this.missions.missions.forEach(s=>{s.type===t&&!s.completed&&(s.progress=Math.max(s.progress,n),s.progress>=s.target&&(s.completed=!0,r=!0))}),r&&this.save(),r}incrementProgress(t,n=1){let r=!1;return this.missions.missions.forEach(s=>{s.type===t&&!s.completed&&(s.progress+=n,s.progress>=s.target&&(s.completed=!0,r=!0))}),r&&this.save(),r}claimReward(t){const n=this.missions.missions.find(r=>r.id===t);return n?n.completed?n.claimed?{success:!1,error:"Already claimed"}:(n.claimed=!0,this.currencyService.addFish(n.reward,`Mission: ${n.title}`),this.save(),{success:!0,reward:n.reward,title:n.title}):{success:!1,error:"Mission not completed"}:{success:!1,error:"Mission not found"}}getStats(){const t=this.missions.missions.length,n=this.missions.missions.filter(o=>o.completed).length,r=this.missions.missions.filter(o=>o.claimed).length,s=this.missions.missions.reduce((o,a)=>o+a.reward,0),i=this.missions.missions.filter(o=>o.claimed).reduce((o,a)=>o+a.reward,0);return{total:t,completed:n,claimed:r,totalRewards:s,claimedRewards:i,allCompleted:n===t,allClaimed:r===t}}reset(){this.missions=this.generateNewMissions(),this.save()}}const Ca=[{id:"first_line",title:" Primeira Linha",description:"Limpe sua primeira linha",requirement:{type:"lines_total",value:1},reward:50,tier:"bronze"},{id:"first_game",title:" Primeira Partida",description:"Complete sua primeira partida",requirement:{type:"games_played",value:1},reward:50,tier:"bronze"},{id:"scorer",title:" Pontuador",description:"Alcance 10.000 pontos em uma partida",requirement:{type:"score_single",value:1e4},reward:100,tier:"bronze"},{id:"combo_starter",title:" Combo Starter",description:"Alcance um combo de 5x",requirement:{type:"max_combo",value:5},reward:150,tier:"silver"},{id:"tspin_novice",title:" Aprendiz T-Spin",description:"Faa seu primeiro T-Spin",requirement:{type:"tspins_total",value:1},reward:150,tier:"silver"},{id:"survivor",title:" Sobrevivente",description:"Sobreviva por 5 minutos",requirement:{type:"survive_time",value:300},reward:150,tier:"silver"},{id:"level_5",title:" Nvel 5",description:"Alcance o nvel 5",requirement:{type:"max_level",value:5},reward:100,tier:"silver"},{id:"line_clearer",title:" Limpador",description:"Limpe 100 linhas no total",requirement:{type:"lines_total",value:100},reward:200,tier:"silver"},{id:"combo_master",title:" Combo Master",description:"Alcance um combo de 10x",requirement:{type:"max_combo",value:10},reward:300,tier:"gold"},{id:"tspin_master",title:" Mestre T-Spin",description:"Faa 50 T-Spins no total",requirement:{type:"tspins_total",value:50},reward:400,tier:"gold"},{id:"speed_demon",title:" Speed Demon",description:"Alcance o nvel 15",requirement:{type:"max_level",value:15},reward:350,tier:"gold"},{id:"high_scorer",title:" Alto Pontuador",description:"Alcance 100.000 pontos em uma partida",requirement:{type:"score_single",value:1e5},reward:400,tier:"gold"},{id:"dedicated",title:" Dedicado",description:"Jogue 50 partidas",requirement:{type:"games_played",value:50},reward:300,tier:"gold"},{id:"marathon",title:" Maratonista",description:"Limpe 500 linhas no total",requirement:{type:"lines_total",value:500},reward:350,tier:"gold"},{id:"cat_king",title:" Rei dos Gatos",description:"Alcance 1.000.000 de pontos em uma partida",requirement:{type:"score_single",value:1e6},reward:1e3,tier:"platinum"},{id:"immortal",title:" Imortal",description:"Alcance o nvel 20",requirement:{type:"max_level",value:20},reward:800,tier:"platinum"},{id:"combo_legend",title:" Lenda do Combo",description:"Alcance um combo de 15x",requirement:{type:"max_combo",value:15},reward:700,tier:"platinum"},{id:"tspin_legend",title:" Lenda T-Spin",description:"Faa 200 T-Spins no total",requirement:{type:"tspins_total",value:200},reward:800,tier:"platinum"},{id:"veteran",title:" Veterano",description:"Jogue 200 partidas",requirement:{type:"games_played",value:200},reward:600,tier:"platinum"},{id:"ultimate_cleaner",title:" Limpador Supremo",description:"Limpe 2.000 linhas no total",requirement:{type:"lines_total",value:2e3},reward:700,tier:"platinum"}];class Hb{constructor(t,n,r){this.gameRepository=t,this.currencyService=n,this.statisticsService=r,this.achievements=this.loadAchievements()}loadAchievements(){const t=this.gameRepository.load("achievements");if(!t)return Ca.map(r=>({...r,unlocked:!1,unlockedAt:null,progress:0}));const n=new Map(t.map(r=>[r.id,r]));return Ca.map(r=>n.get(r.id)||{...r,unlocked:!1,unlockedAt:null,progress:0})}save(){this.gameRepository.save("achievements",this.achievements)}getAchievements(){return[...this.achievements]}getUnlocked(){return this.achievements.filter(t=>t.unlocked)}getLocked(){return this.achievements.filter(t=>!t.unlocked)}getByTier(t){return this.achievements.filter(n=>n.tier===t)}checkAchievements(t){const n=[];return this.achievements.forEach(r=>{if(r.unlocked)return;const{type:s,value:i}=r.requirement;let o=0;switch(s){case"lines_total":o=t.linesCleared||0;break;case"games_played":o=t.gamesPlayed||0;break;case"score_single":o=t.highScore||0;break;case"max_combo":o=t.maxCombo||0;break;case"tspins_total":o=t.tSpins||0;break;case"survive_time":o=t.longestGame||0;break;case"max_level":o=t.maxLevel||0;break}r.progress=Math.min(o,i),o>=i&&(r.unlocked=!0,r.unlockedAt=new Date().toISOString(),this.currencyService.addFish(r.reward,`Achievement: ${r.title}`),n.push(r))}),n.length>0&&this.save(),n}getStats(){const t=this.achievements.length,n=this.achievements.filter(o=>o.unlocked).length,r=this.achievements.reduce((o,a)=>o+a.reward,0),s=this.achievements.filter(o=>o.unlocked).reduce((o,a)=>o+a.reward,0),i={bronze:this.getByTier("bronze").filter(o=>o.unlocked).length,silver:this.getByTier("silver").filter(o=>o.unlocked).length,gold:this.getByTier("gold").filter(o=>o.unlocked).length,platinum:this.getByTier("platinum").filter(o=>o.unlocked).length};return{total:t,unlocked:n,percentage:Math.floor(n/t*100),totalRewards:r,earnedRewards:s,byTier:i}}reset(){this.achievements=Ca.map(t=>({...t,unlocked:!1,unlockedAt:null,progress:0})),this.save()}}class Ub{constructor(t){this.gameRepository=t,this.stats=this.loadStats()}loadStats(){return this.gameRepository.load("playerStats")||{gamesPlayed:0,linesCleared:0,piecesPlaced:0,tSpins:0,backToBack:0,totalPlayTime:0,highScore:0,maxLevel:0,maxCombo:0,longestGame:0,mostLinesInGame:0,lastUpdated:new Date().toISOString(),lastPlayedDate:null,currentStreak:0,longestStreak:0}}save(){this.stats.lastUpdated=new Date().toISOString(),this.gameRepository.save("playerStats",this.stats)}getStats(){return{...this.stats}}updateAfterGame(t){this.stats.gamesPlayed+=1,this.stats.linesCleared+=t.linesCleared||0,this.stats.piecesPlaced+=t.piecesPlaced||0,this.stats.tSpins+=t.tSpins||0,this.stats.backToBack+=t.backToBack||0,this.stats.totalPlayTime+=t.playTime||0,t.score>this.stats.highScore&&(this.stats.highScore=t.score),t.level>this.stats.maxLevel&&(this.stats.maxLevel=t.level),t.maxCombo>this.stats.maxCombo&&(this.stats.maxCombo=t.maxCombo),t.playTime>this.stats.longestGame&&(this.stats.longestGame=t.playTime),t.linesCleared>this.stats.mostLinesInGame&&(this.stats.mostLinesInGame=t.linesCleared),this.updateStreak(),this.save()}updateStreak(){const t=new Date().toDateString(),n=this.stats.lastPlayedDate;if(n!==t){if(!n)this.stats.currentStreak=1,this.stats.longestStreak=1;else{const r=new Date(n),s=new Date(t);Math.floor((s-r)/(1e3*60*60*24))===1?(this.stats.currentStreak+=1,this.stats.currentStreak>this.stats.longestStreak&&(this.stats.longestStreak=this.stats.currentStreak)):this.stats.currentStreak=1}this.stats.lastPlayedDate=t}}incrementStat(t,n=1){this.stats.hasOwnProperty(t)&&(this.stats[t]+=n,this.save())}updateRecord(t,n){return this.stats.hasOwnProperty(t)&&n>this.stats[t]?(this.stats[t]=n,this.save(),!0):!1}reset(){this.stats={gamesPlayed:0,linesCleared:0,piecesPlaced:0,tSpins:0,backToBack:0,totalPlayTime:0,highScore:0,maxLevel:0,maxCombo:0,longestGame:0,mostLinesInGame:0,lastUpdated:new Date().toISOString(),lastPlayedDate:null,currentStreak:0,longestStreak:0},this.save()}}const Wt={classic:{id:"classic",name:" Tetris Clssico",description:"Cores oficiais do Tetris",price:0,default:!0,pieces:{I:{emoji:"",color:"#00F0F0"},O:{emoji:"",color:"#F0F000"},T:{emoji:"",color:"#A000F0"},S:{emoji:"",color:"#00F000"},Z:{emoji:"",color:"#F00000"},J:{emoji:"",color:"#0000F0"},L:{emoji:"",color:"#F0A000"}}},cats:{id:"cats",name:" Gatos Clssicos",description:"Os gatinhos originais do Cat Tetris",price:0,default:!0,pieces:{I:{emoji:"",color:"#00f0f0"},O:{emoji:"",color:"#f0f000"},T:{emoji:"",color:"#a000f0"},S:{emoji:"",color:"#00f000"},Z:{emoji:"",color:"#f00000"},J:{emoji:"",color:"#f0a000"},L:{emoji:"",color:"#ffc0cb"}}},dogs:{id:"dogs",name:" Cachorros Felizes",description:"Amigos caninos adorveis",price:500,pieces:{I:{emoji:"",color:"#8B4513"},O:{emoji:"",color:"#D2691E"},T:{emoji:"",color:"#CD853F"},S:{emoji:"",color:"#DEB887"},Z:{emoji:"",color:"#F4A460"},J:{emoji:"",color:"#FFDEAD"},L:{emoji:"",color:"#FFE4B5"}}},pandas:{id:"pandas",name:" Pandas Fofos",description:"Ursinhos preto e branco",price:600,pieces:{I:{emoji:"",color:"#000000"},O:{emoji:"",color:"#808080"},T:{emoji:"",color:"#A0A0A0"},S:{emoji:"",color:"#FFFFFF"},Z:{emoji:"",color:"#D3D3D3"},J:{emoji:"",color:"#90EE90"},L:{emoji:"",color:"#98FB98"}}},foxes:{id:"foxes",name:" Raposas Astutas",description:"Raposinhas espertas e geis",price:700,pieces:{I:{emoji:"",color:"#FF4500"},O:{emoji:"",color:"#FF6347"},T:{emoji:"",color:"#FF7F50"},S:{emoji:"",color:"#CD5C5C"},Z:{emoji:"",color:"#D2691E"},J:{emoji:"",color:"#8B4513"},L:{emoji:"",color:"#DAA520"}}},unicorns:{id:"unicorns",name:" Unicrnios Mgicos",description:"Criaturas msticas e coloridas",price:900,pieces:{I:{emoji:"",color:"#FF00FF"},O:{emoji:"",color:"#FFD700"},T:{emoji:"",color:"#87CEEB"},S:{emoji:"",color:"#FF69B4"},Z:{emoji:"",color:"#9370DB"},J:{emoji:"",color:"#DA70D6"},L:{emoji:"",color:"#FFC0CB"}}},robots:{id:"robots",name:" Robs Futuristas",description:"Tecnologia do futuro",price:800,pieces:{I:{emoji:"",color:"#708090"},O:{emoji:"",color:"#778899"},T:{emoji:"",color:"#4682B4"},S:{emoji:"",color:"#5F9EA0"},Z:{emoji:"",color:"#00CED1"},J:{emoji:"",color:"#1E90FF"},L:{emoji:"",color:"#4169E1"}}},foods:{id:"foods",name:" Comidas Deliciosas",description:"Para quem joga com fome",price:750,pieces:{I:{emoji:"",color:"#FF6347"},O:{emoji:"",color:"#FFD700"},T:{emoji:"",color:"#FFA500"},S:{emoji:"",color:"#FF4500"},Z:{emoji:"",color:"#FFB6C1"},J:{emoji:"",color:"#DDA0DD"},L:{emoji:"",color:"#D2691E"}}},crystals:{id:"crystals",name:" Cristais Brilhantes",description:"Gemas preciosas reluzentes",price:1e3,premium:!0,pieces:{I:{emoji:"",color:"#00FFFF"},O:{emoji:"",color:"#FFD700"},T:{emoji:"",color:"#9370DB"},S:{emoji:"",color:"#00FF00"},Z:{emoji:"",color:"#FF0000"},J:{emoji:"",color:"#FFA500"},L:{emoji:"",color:"#FF1493"}}},ocean:{id:"ocean",name:" Mundo Marinho",description:"Criaturas do oceano",price:850,pieces:{I:{emoji:"",color:"#1E90FF"},O:{emoji:"",color:"#00CED1"},T:{emoji:"",color:"#4682B4"},S:{emoji:"",color:"#87CEEB"},Z:{emoji:"",color:"#5F9EA0"},J:{emoji:"",color:"#6495ED"},L:{emoji:"",color:"#FF6347"}}},space:{id:"space",name:" Espao Sideral",description:"Explorao espacial",price:950,pieces:{I:{emoji:"",color:"#4169E1"},O:{emoji:"",color:"#00FFFF"},T:{emoji:"",color:"#32CD32"},S:{emoji:"",color:"#FFD700"},Z:{emoji:"",color:"#FFFF00"},J:{emoji:"",color:"#FF8C00"},L:{emoji:"",color:"#FF4500"}}}};class s0{constructor(t,n){this.gameRepository=t,this.currencyService=n,this.inventory=this.loadInventory()}loadInventory(){const t=this.gameRepository.load("shopInventory");if(t){const n=Object.values(Wt).filter(s=>s.price===0).map(s=>s.id);let r=!1;for(const s of n)t.ownedThemes.includes(s)||(t.ownedThemes.push(s),r=!0);return r&&this.gameRepository.save("shopInventory",t),t}return{ownedThemes:["cats","classic"],equippedTheme:"cats",purchaseHistory:[]}}save(){this.gameRepository.save("shopInventory",this.inventory)}getAllThemes(){return Object.values(Wt).map(t=>({...t,owned:this.inventory.ownedThemes.includes(t.id),equipped:this.inventory.equippedTheme===t.id}))}getOwnedThemes(){return this.inventory.ownedThemes.map(t=>Wt[t])}getEquippedTheme(){return Wt[this.inventory.equippedTheme]}ownsTheme(t){return this.inventory.ownedThemes.includes(t)}purchaseTheme(t){const n=Wt[t];return n?this.ownsTheme(t)?{success:!1,error:"Already owned"}:this.currencyService.canAfford(n.price)?this.currencyService.spendFish(n.price,`Theme: ${n.name}`)?(this.inventory.ownedThemes.push(t),this.inventory.purchaseHistory.push({themeId:t,purchasedAt:new Date().toISOString(),price:n.price}),this.save(),{success:!0,theme:n}):{success:!1,error:"Purchase failed"}:{success:!1,error:"Insufficient funds"}:{success:!1,error:"Theme not found"}}equipTheme(t){if(!this.ownsTheme(t))return{success:!1,error:"Theme not owned"};this.inventory.equippedTheme=t,this.save();const n=Wt[t];return window.dispatchEvent(new CustomEvent("themeEquipped",{detail:{themeId:t,theme:n}})),{success:!0,theme:n}}getStats(){return{totalThemes:Object.keys(Wt).length,ownedThemes:this.inventory.ownedThemes.length,totalSpent:this.inventory.purchaseHistory.reduce((t,n)=>t+n.price,0),equippedTheme:this.inventory.equippedTheme}}reset(){this.inventory={ownedThemes:["cats"],equippedTheme:"cats",purchaseHistory:[]},this.save()}}const $b=Object.freeze(Object.defineProperty({__proto__:null,PIECE_THEMES:Wt,ShopService:s0},Symbol.toStringTag,{value:"Module"})),ht={CLASSIC:{id:"classic",name:" Clssico",description:"O Tetris tradicional",icon:"",rules:{gameOver:!0,timeLimit:!1,lineGoal:!1,speedIncrease:!0}},SPRINT:{id:"sprint",name:" Sprint 40",description:"Limpe 40 linhas o mais rpido possvel",icon:"",rules:{gameOver:!1,timeLimit:!1,lineGoal:40,speedIncrease:!1,fixedLevel:1}},ULTRA:{id:"ultra",name:" Ultra 3min",description:"Mximo de pontos em 3 minutos",icon:"",rules:{gameOver:!1,timeLimit:180,lineGoal:!1,speedIncrease:!0}},ZEN:{id:"zen",name:" Zen",description:"Jogue sem presso, sem game over",icon:"",rules:{gameOver:!1,timeLimit:!1,lineGoal:!1,speedIncrease:!1,fixedLevel:1,relaxed:!0}},SURVIVAL:{id:"survival",name:" Sobrevivncia",description:"Comece no nvel 10, quanto tempo aguenta?",icon:"",rules:{gameOver:!0,timeLimit:!1,lineGoal:!1,speedIncrease:!0,startLevel:10}}};class Wb{constructor(t){this.gameRepository=t,this.currentMode=ht.CLASSIC,this.modeStats=this.loadModeStats()}loadModeStats(){return this.gameRepository.load("gameModesStats")||this.initializeStats()}initializeStats(){const t={};return Object.keys(ht).forEach(n=>{const r=ht[n];t[r.id]={gamesPlayed:0,bestScore:0,bestTime:r.rules.timeLimit?r.rules.timeLimit:0,bestLines:0,totalGames:0}}),t}save(){this.gameRepository.save("gameModesStats",this.modeStats)}getAllModes(){return Object.values(ht)}getCurrentMode(){return this.currentMode}setMode(t){const n=Object.values(ht).find(r=>r.id===t);return n?(this.currentMode=n,!0):!1}getModeStats(t){return this.modeStats[t]||null}getAllStats(){return{...this.modeStats}}updateStats(t,n){if(!this.modeStats[t])return;const r=this.modeStats[t];r.gamesPlayed+=1,r.totalGames+=1,n.score>r.bestScore&&(r.bestScore=n.score),n.time&&(r.bestTime===0||n.time<r.bestTime)&&(r.bestTime=n.time),n.lines>r.bestLines&&(r.bestLines=n.lines),this.save()}checkGoal(t,n){return t.rules?t.rules.lineGoal?n.score.lines>=t.rules.lineGoal:(t.rules.timeLimit,!1):!1}getRecommendedOrder(){return[ht.CLASSIC,ht.ZEN,ht.SPRINT,ht.ULTRA,ht.SURVIVAL]}reset(){this.modeStats=this.initializeStats(),this.currentMode=ht.CLASSIC,this.save()}}const gh=[{id:"bot1",name:"MeowMaster",score:25e4,level:18,lines:120,country:"BR"},{id:"bot2",name:"NyanCat",score:18e4,level:15,lines:95,country:"US"},{id:"bot3",name:"FelixPro",score:15e4,level:14,lines:85,country:"JP"},{id:"bot4",name:"WhiskerKing",score:12e4,level:12,lines:75,country:"KR"},{id:"bot5",name:"PawsGaming",score:1e5,level:11,lines:68,country:"FR"},{id:"bot6",name:"CatNinja",score:85e3,level:10,lines:60,country:"DE"},{id:"bot7",name:"TigerClaw",score:7e4,level:9,lines:55,country:"BR"},{id:"bot8",name:"LionHeart",score:65e3,level:8,lines:50,country:"UK"},{id:"bot9",name:"CheetahSpeed",score:55e3,level:8,lines:45,country:"ES"},{id:"bot10",name:"PantherShadow",score:5e4,level:7,lines:42,country:"IT"},{id:"bot11",name:"JaguarForce",score:45e3,level:7,lines:40,country:"MX"},{id:"bot12",name:"LynxSwift",score:4e4,level:6,lines:38,country:"CA"},{id:"bot13",name:"OcelotPro",score:35e3,level:6,lines:35,country:"AR"},{id:"bot14",name:"BobcatGamer",score:3e4,level:5,lines:32,country:"AU"},{id:"bot15",name:"CougarRush",score:28e3,level:5,lines:30,country:"NZ"}];class qb{constructor(t,n){this.gameRepository=t,this.playerStatsService=n,this.playerName=this.loadPlayerName(),this.playerId=this.loadPlayerId()}loadPlayerName(){const t=this.gameRepository.load("playerProfile");return(t==null?void 0:t.name)||"Jogador"}loadPlayerId(){let t=this.gameRepository.load("playerProfile");return(!t||!t.id)&&(t={...t,id:`player_${Date.now()}_${Math.random().toString(36).substr(2,9)}`},this.gameRepository.save("playerProfile",t)),t.id}setPlayerName(t){const n=this.gameRepository.load("playerProfile")||{};n.name=t,n.id=this.playerId,this.gameRepository.save("playerProfile",n),this.playerName=t}getPlayerName(){return this.playerName}getGlobalLeaderboard(t=100){const n=this.playerStatsService.getStats(),r={id:this.playerId,name:this.playerName,score:n.highScore,level:n.maxLevel,lines:n.linesCleared,country:"BR",isPlayer:!0},s=[...gh,r];return s.sort((i,o)=>o.score-i.score),s.slice(0,t)}getWeeklyLeaderboard(t=50){return this.getGlobalLeaderboard(t)}getCountryLeaderboard(t="BR",n=50){return this.getGlobalLeaderboard(200).filter(s=>s.country===t).slice(0,n)}getPlayerRank(){const t=this.getGlobalLeaderboard(1e3),n=t.findIndex(r=>r.id===this.playerId);return n===-1?{rank:t.length+1,total:t.length,percentile:0}:{rank:n+1,total:t.length,percentile:Math.floor((t.length-n)/t.length*100)}}getAroundPlayer(t=5){const n=this.getGlobalLeaderboard(1e3),r=n.findIndex(o=>o.id===this.playerId);if(r===-1)return[];const s=Math.max(0,r-t),i=Math.min(n.length,r+t+1);return n.slice(s,i)}submitScore(t){return Promise.resolve({success:!0})}getModeLeaderboard(t,n=50){return this.getGlobalLeaderboard(n)}getFriendsLeaderboard(){return gh.slice(0,5)}getLeaderboardStats(){const t=this.getPlayerRank(),n=this.playerStatsService.getStats();return{playerName:this.playerName,rank:t.rank,total:t.total,percentile:t.percentile,score:n.highScore,level:n.maxLevel,lines:n.linesCleared}}}class Kb{constructor(t){this.playerStatsService=t}generateShareText(t){const{score:n,level:r,lines:s,mode:i}=t;return` Cat Tetris${i?` no modo ${i}`:""}!
 Pontuao: ${n.toLocaleString()}
 Nvel: ${r}
 Linhas: ${s}

Consegue me superar? `}generateShareURL(t){const n=window.location.origin+window.location.pathname,r=new URLSearchParams({score:t.score,level:t.level,lines:t.lines});return`${n}?${r.toString()}`}async copyToClipboard(t){try{return await navigator.clipboard.writeText(t),{success:!0}}catch(n){return{success:!1,error:n.message}}}async shareNative(t){if(!navigator.share)return{success:!1,error:"Web Share API not supported"};try{const n=this.generateShareText(t),r=this.generateShareURL(t);return await navigator.share({title:"Minha pontuao no Cat Tetris",text:n,url:r}),{success:!0}}catch(n){return n.name==="AbortError"?{success:!1,error:"Share cancelled"}:{success:!1,error:n.message}}}shareToTwitter(t){const n=this.generateShareText(t),r=this.generateShareURL(t),s=`https://twitter.com/intent/tweet?text=${encodeURIComponent(n)}&url=${encodeURIComponent(r)}`;return window.open(s,"_blank","width=600,height=400"),{success:!0}}shareToFacebook(t){const n=this.generateShareURL(t),r=`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(n)}`;return window.open(r,"_blank","width=600,height=400"),{success:!0}}shareToWhatsApp(t){const n=this.generateShareText(t),r=this.generateShareURL(t),s=`${n}

${r}`,i=`https://wa.me/?text=${encodeURIComponent(s)}`;return window.open(i,"_blank"),{success:!0}}async takeScreenshot(t){return{success:!1,error:"Not implemented"}}getAvailableMethods(){return{native:!!navigator.share,clipboard:!!navigator.clipboard,twitter:!0,facebook:!0,whatsapp:!0}}}class fs{constructor(){this.difficulty="medium",this.thinkingTime=100,this.lastDecision=Date.now(),this._actionQueue=[],this._isExpert=!1,this._visualMode=!1,this._visualActionDelay=40}setDifficulty(t){switch(this.difficulty=t,this._isExpert=t.startsWith("expert"),t){case"easy":this.thinkingTime=250;break;case"medium":this.thinkingTime=120;break;case"hard":this.thinkingTime=60;break;case"expert":this.thinkingTime=20;break;default:this.thinkingTime=120}}setVisualMode(t){this._visualMode=t}decideNextMove(t){const n=Date.now(),r=this._visualMode?this._visualActionDelay:this.thinkingTime;if(this._actionQueue.length>0)return this._isExpert&&!this._visualMode?this._actionQueue.shift():n-this.lastDecision<r?null:(this.lastDecision=n,this._actionQueue.shift());if(!this._isExpert&&n-this.lastDecision<r||this._visualMode&&n-this.lastDecision<r)return null;this.lastDecision=n;const{currentPiece:s,board:i,heldPiece:o,canHold:a,nextPieces:c}=t;if(!s)return null;try{const u=(c==null?void 0:c[0])||null;let h=this._findBestMoveWithLookahead(s,i,u),d=!1;if(a){const f=o||u;if(f&&f.type!==s.type){const y=o?u:(c==null?void 0:c[1])||null,v=this._findBestMoveWithLookahead(f,i,y);v&&(!h||v.score>h.score)&&(h=v,d=!0)}}if(!h)this._actionQueue=[{action:"drop"}];else{const f=[];d&&f.push({action:"hold"});const y=d?o||(c==null?void 0:c[0]):s;f.push(...this._buildActionSequence(y,h.rotations,h.targetX,d)),this._actionQueue=f}}catch{this._actionQueue=[{action:"drop"}]}return this._actionQueue.length>0?this._actionQueue.shift():{action:"down"}}_findBestMoveWithLookahead(t,n,r){var u;let s=-1/0,i=null;const o=n.length,a=((u=n[0])==null?void 0:u.length)||10,c=this._isExpert&&r;for(let h=0;h<4;h++){const d=this._rotateShape(t.shape,h),f=d[0].length;for(let y=-2;y<=a-f+2;y++){const v=this._findLandingRow(d,n,y,o,a);if(v===null||v<0)continue;const w=this._placeOnBoard(d,n,y,v);if(!w)continue;const{board:S}=this._simulateClear(w);let p=this._evaluate(w,t);if(c){let m=-1/0;for(let g=0;g<4;g++){const b=this._rotateShape(r.shape,g),j=b[0].length;for(let k=-2;k<=a-j+2;k++){const C=this._findLandingRow(b,S,k,o,a);if(C===null||C<0)continue;const P=this._placeOnBoard(b,S,k,C);if(!P)continue;const N=this._evaluate(P,r);N>m&&(m=N)}}m>-1/0&&(p=p*(1-.45)+m*.45)}this.difficulty==="easy"?p+=(Math.random()-.5)*1200:this.difficulty==="medium"&&Math.random()<.2&&(p+=(Math.random()-.5)*500),p>s&&(s=p,i={rotations:h,targetX:y,score:s})}}return i}_evaluate(t,n){switch(this.difficulty){case"expert":return this._evalSurvival(t,n);default:return this._evalDefault(t,n)}}_simulateClear(t){const n=t[0].length,r=[];let s=0;for(const i of t)i.every(o=>o!=null)?s++:r.push([...i]);for(;r.length<t.length;)r.unshift(new Array(n).fill(null));return{board:r,cleared:s}}_evalDefault(t,n){const{board:r,cleared:s}=this._simulateClear(t);let i=0;return i+=s*800,i-=this._getHeight(r)*45,i-=this._countHoles(r)*400,i-=this._getBumpiness(r)*35,i-=this._getRowTransitions(r)*15,i-=this._getColTransitions(r)*10,this.difficulty==="hard"&&(i+=s>=2?s*400:0,i-=this._countHoles(r)*200,i-=this._getCoveredHoles(r)*100,i-=this._getHeight(r)*30,this._countHoles(r)===0&&(i+=300),this._getHeight(r)<=6&&(i+=200)),i}_evalSurvival(t){const{board:n,cleared:r}=this._simulateClear(t),s=this._getHeight(n),i=this._countHoles(n),o=this._getBumpiness(n),a=this._getCoveredHoles(n),c=this._getColumnHeights(n),u=Math.max(...c),h=Math.min(...c),d=this._getRowTransitions(n),f=this._getColTransitions(n),y=this._getWellDepths(n);let v=0;v+=r*5e3,r>=2&&(v+=r*r*1500),r===3&&(v+=8e3),r===4&&(v+=25e3),s>10&&(v+=r*8e3,r>=2&&(v+=r*5e3)),s>14&&(v+=r*2e4),v-=s*s*25,v-=s*300,v-=u*u*15,v-=i*4e3,v-=i*i*500,v-=a*1200,v-=o*250;const w=c.reduce((g,b)=>g+b,0)/c.length,S=c.reduce((g,b)=>g+(b-w)**2,0)/c.length;v-=S*80;const p=u-h;p>4&&(v-=(p-4)*800),p>6&&(v-=(p-6)*1500),v-=d*60,v-=f*50,v-=y*200,s===0?v+=15e3:s<=2?v+=6e3:s<=4?v+=3e3:s<=6&&(v+=1500),i===0&&(v+=5e3),i===0&&s<=4&&(v+=3e3),o<=1?v+=2e3:o<=3&&(v+=800),s>10&&(v-=(s-10)*2e3),s>12&&(v-=(s-12)*(s-12)*800),s>14&&(v-=(s-14)*(s-14)*1500),s>16&&(v-=6e4),s>18&&(v-=2e5);const m=this._countNearCompleteLines(n);return s>8&&(v+=m*1500),v}_evalCombo(t,n){const{board:r,cleared:s}=this._simulateClear(t),i=r[0].length,o=this._getHeight(r),a=this._countHoles(r),c=this._getBumpiness(r),u=this._getCoveredHoles(r);let h=0;s===1?h+=6e3:s===2?h+=3500:s===3?h+=2500:s===4&&(h+=2e3);let d=0,f=0,y=0;const v={};for(let S=r.length-1;S>=0;S--){let p=0,m=-1;for(let g=0;g<i;g++)r[S][g]!=null?p++:m=g;p===i-1?(d++,f++,y=Math.max(y,f),m>=0&&(v[m]=(v[m]||0)+1)):p>=i-2?(d+=.5,f++,y=Math.max(y,f)):f=0}h+=d*2500,h+=y*y*600;let w=0;for(const S in v)v[S]>w&&(w=v[S]);return w>=2&&(h+=w*w*500),h-=a*2500,h-=u*700,h-=o*100,h-=c*120,h-=this._getRowTransitions(r)*35,h-=this._getColTransitions(r)*25,a===0&&(h+=1500),o<=6&&(h+=600),o>12&&(h-=(o-12)*800),o>15&&(h-=(o-15)*2e3),o>18&&(h-=25e3),h}_evalTetris(t,n){const{board:r,cleared:s}=this._simulateClear(t),i=r[0].length,o=r.length,a=this._getColumnHeights(r);this._getHeight(r);const c=this._countHoles(r),u=this._getCoveredHoles(r);let h=0;const d=i-1;s===4?h+=2e5:s>0&&(h-=s*15e3);let f=0;for(let b=0;b<o;b++)r[b][d]!=null&&f++;h-=f*6e3;const y=[];for(let b=0;b<i;b++)b!==d&&y.push(a[b]);const v=y.reduce((b,j)=>b+j,0)/y.length,w=v-a[d];h+=Math.max(0,w)*600,w>=4?h+=25e3:w>=3?h+=12e3:w>=2?h+=5e3:w>=1&&(h+=1e3);let S=0;for(let b=0;b<y.length-1;b++)S+=Math.abs(y[b]-y[b+1]);h-=S*500;const p=y.reduce((b,j)=>b+(j-v)**2,0)/y.length;h-=p*150,S===0?h+=6e3:S<=1?h+=2500:S<=2&&(h+=800);const m=this._countNearFullLinesExcluding(r,d);h+=m*5e3,m>=4?h+=2e4:m>=3?h+=8e3:m>=2&&(h+=3e3);for(let b=0;b<i;b++){if(b===d)continue;const j=a[b],k=b>0?a[b-1]:o,C=b<i-1?a[b+1]:o,P=Math.min(k,C)-j;P>1&&(h-=P*2e3)}n.type==="I"&&(s===4?h+=5e4:w<4&&(h-=2e4)),h-=c*5e3,h-=u*2e3,h-=this._getRowTransitions(r)*40,h-=this._getColTransitions(r)*30;const g=Math.max(...y);return g>14&&(h-=(g-14)*3e3),g>16&&(h-=(g-16)*6e3),g>18&&(h-=4e4),c===0&&(h+=4e3),v<=6&&(h+=1500),h}_countLines(t){let n=0;for(const r of t)r.every(s=>s!=null)&&n++;return n}_getHeight(t){for(let n=0;n<t.length;n++)if(t[n].some(r=>r!=null))return t.length-n;return 0}_countHoles(t){let n=0;const r=t[0].length;for(let s=0;s<r;s++){let i=!1;for(let o=0;o<t.length;o++)t[o][s]!=null?i=!0:i&&n++}return n}_getBumpiness(t){const n=this._getColumnHeights(t);let r=0;for(let s=0;s<n.length-1;s++)r+=Math.abs(n[s]-n[s+1]);return r}_getBumpinessExcluding(t,n){const r=this._getColumnHeights(t);let s=0;for(let i=0;i<r.length-1;i++)i===n||i+1===n||(s+=Math.abs(r[i]-r[i+1]));return s}_getColumnHeights(t){const n=t[0].length,r=[];for(let s=0;s<n;s++){let i=!1;for(let o=0;o<t.length;o++)if(t[o][s]!=null){r.push(t.length-o),i=!0;break}i||r.push(0)}return r}_getFlatness(t){const n=this._getColumnHeights(t),r=n.reduce((i,o)=>i+o,0)/n.length,s=n.reduce((i,o)=>i+(o-r)**2,0)/n.length;return Math.max(0,100-s)}_getWellDepths(t){const n=this._getColumnHeights(t);let r=0;for(let s=0;s<n.length;s++){const i=s>0?n[s-1]:20,o=s<n.length-1?n[s+1]:20,a=Math.min(i,o)-n[s];a>0&&(r+=a)}return r}_getRowTransitions(t){let n=0;const r=t[0].length;for(let s=0;s<t.length;s++){for(let i=0;i<r-1;i++){const o=t[s][i]!=null,a=t[s][i+1]!=null;o!==a&&n++}t[s][0]==null&&n++,t[s][r-1]==null&&n++}return n}_getColTransitions(t){let n=0;const r=t[0].length;for(let s=0;s<r;s++){for(let i=0;i<t.length-1;i++){const o=t[i][s]!=null,a=t[i+1][s]!=null;o!==a&&n++}t[t.length-1][s]==null&&n++}return n}_getCoveredHoles(t){let n=0;const r=t[0].length;for(let s=0;s<r;s++){let i=0;for(let o=0;o<t.length;o++)t[o][s]!=null?i++:i>0&&(n+=i)}return n}_countNearCompleteLines(t){let n=0;for(const r of t){const s=r.filter(i=>i!=null).length;s>=r.length-1&&s<r.length&&n++}return n}_countNearFullLinesExcluding(t,n){let r=0;for(const s of t){let i=0,o=-1;for(let a=0;a<s.length;a++)s[a]==null&&(i++,o=a);i===1&&o===n&&r++}return r}_buildActionSequence(t,n,r,s){var h;const i=[],o=n%4;for(let d=0;d<o;d++)i.push({action:"rotate"});const a=s?3:((h=t.position)==null?void 0:h.x)??3,c=r-a,u=c>0?"right":"left";for(let d=0;d<Math.abs(c);d++)i.push({action:u});return i.push({action:"drop"}),i}_rotateShape(t,n){let r=t;for(let s=0;s<n%4;s++)r=r[0].map((i,o)=>r.map(a=>a[o]).reverse());return r}_findLandingRow(t,n,r,s,i){for(let o=-t.length;o<s;o++)if(this._collides(t,n,r,o+1,s,i))return o;return s-t.length}_collides(t,n,r,s,i,o){for(let a=0;a<t.length;a++)for(let c=0;c<t[0].length;c++){if(!t[a][c])continue;const u=r+c,h=s+a;if(u<0||u>=o||h>=i||h>=0&&n[h][u]!=null)return!0}return!1}_placeOnBoard(t,n,r,s){const i=n.length,o=n[0].length,a=n.map(c=>[...c]);for(let c=0;c<t.length;c++)for(let u=0;u<t[0].length;u++){if(!t[c][u])continue;const h=r+u,d=s+c;if(h<0||h>=o||d<0||d>=i||a[d][h]!=null)return null;a[d][h]=1}return a}getDifficulties(){return[{id:"easy",name:"Fcil",emoji:"",description:"IA iniciante"},{id:"medium",name:"Mdio",emoji:"",description:"IA intermediria"},{id:"hard",name:"Difcil",emoji:"",description:"IA avanada"},{id:"expert",name:"Expert",emoji:"",description:"Mantm o board o mais baixo possvel"}]}}class Qb{constructor(t){this.gameRepository=t,this.currentMode=null,this.players=[],this.matchState=null}startLocalMatch(t="Jogador 1",n="Jogador 2"){return this.currentMode="1v1-local",this.players=[{id:"p1",name:t,score:0,level:1,lines:0,gameState:null,alive:!0},{id:"p2",name:n,score:0,level:1,lines:0,gameState:null,alive:!0}],this.matchState={startTime:Date.now(),status:"playing",winner:null},{mode:this.currentMode,players:this.players,matchId:`local_${Date.now()}`}}startAIMatch(t="Jogador",n="medium"){return this.currentMode="vs-ai",this.players=[{id:"p1",name:t,score:0,level:1,lines:0,gameState:null,alive:!0,isHuman:!0},{id:"ai",name:this.getAIName(n),score:0,level:1,lines:0,gameState:null,alive:!0,isAI:!0,difficulty:n}],this.matchState={startTime:Date.now(),status:"playing",winner:null,aiDifficulty:n},{mode:"vsAI",aiDifficulty:n,players:this.players,matchId:`ai_${Date.now()}`}}updatePlayerState(t,n){var s,i;const r=this.players.find(o=>o.id===t);r&&(r.gameState=n,r.score=((s=n.score)==null?void 0:s.points)||0,r.level=((i=n.score)==null?void 0:i.level)||1,r.lines=n.linesCleared||0,r.alive=!n.gameOver,this.checkWinCondition())}checkWinCondition(){const t=this.players.filter(n=>n.alive);return t.length===1?(this.matchState.status="finished",this.matchState.winner=t[0],this.matchState.endTime=Date.now(),this.matchState.duration=this.matchState.endTime-this.matchState.startTime,this.saveMatchResult(),{hasWinner:!0,winner:this.matchState.winner}):{hasWinner:!1}}saveMatchResult(){const t=this.gameRepository.load("multiplayerStats")||{localMatches:0,aiMatches:0,wins:0,losses:0,draws:0,totalTime:0};this.currentMode==="1v1-local"?t.localMatches++:this.currentMode==="vs-ai"&&(t.aiMatches++,this.matchState.winner.isHuman?t.wins++:this.matchState.winner.isAI&&t.losses++),t.totalTime+=this.matchState.duration,this.gameRepository.save("multiplayerStats",t)}getStats(){const t=this.gameRepository.load("multiplayerStats")||{localMatches:0,aiMatches:0,wins:0,losses:0,draws:0,totalTime:0};return{...t,winRate:t.aiMatches>0?(t.wins/t.aiMatches*100).toFixed(1):0,avgMatchTime:t.localMatches+t.aiMatches>0?Math.floor(t.totalTime/(t.localMatches+t.aiMatches)/1e3):0}}getMatchState(){return{...this.matchState,players:this.players,mode:this.currentMode}}endMatch(){const t={mode:this.currentMode,players:this.players,winner:this.matchState.winner,duration:Date.now()-this.matchState.startTime};return this.currentMode=null,this.players=[],this.matchState=null,t}startAIvsAIMatch(t="expert",n="expert"){return this.currentMode="ai-vs-ai",this.players=[{id:"ai1",name:this.getAIName(t),score:0,level:1,lines:0,gameState:null,alive:!0,isAI:!0,difficulty:t},{id:"ai2",name:this.getAIName(n),score:0,level:1,lines:0,gameState:null,alive:!0,isAI:!0,difficulty:n}],this.matchState={startTime:Date.now(),status:"playing",winner:null,ai1Difficulty:t,ai2Difficulty:n},{mode:"aiVsAI",ai1Difficulty:t,ai2Difficulty:n,players:this.players,matchId:`aivai_${Date.now()}`}}getAIName(t){return{easy:" MeowBot Iniciante",medium:" CatAI Intermedirio",hard:" FelineBot Avanado",expert:" NyanMaster Survival"}[t]||"IA"}getAvailableModes(){return[{id:"vs-ai",name:"vs IA",emoji:"",description:"Enfrente o bot",players:1,type:"ai",difficulties:["easy","medium","hard","expert"]},{id:"ai-vs-ai",name:"IA vs IA",emoji:"",description:"Assista duas IAs se enfrentando (debug)",players:0,type:"debug"}]}}const wt={FUNDAMENTALS:"fundamentals",INTERMEDIATE:"intermediate",ADVANCED:"advanced",PRO:"pro"};class Xb{constructor(t){this.gameRepository=t,this.lessons=this._buildLessons(),this.progress=this._loadProgress()}_buildLessons(){return[{id:1,module:wt.FUNDAMENTALS,title:"Movimentao",description:"Mover, rotacionar e dropar peas",difficulty:"beginner",estimatedTime:"2 min",intro:["   Setas movem a pea para os lados","  Seta para cima rotaciona a pea","  Seta para baixo = soft drop (desce rpido)","  Espao = hard drop (cai instantaneamente)","A sombra mostra onde a pea vai pousar"],practice:{objective:"Limpe 3 linhas usando os controles",validate:t=>{const n=t.linesCleared||0;return{complete:n>=3,progress:Math.min(1,n/3),feedback:n>=3?" timo! Voc dominou os controles!":`${n}/3 linhas`}}},rewards:{fishCoins:100,xp:50,badge:"first_move",unlocks:[2]}},{id:2,module:wt.FUNDAMENTALS,title:"Hold Piece",description:"Segure uma pea para usar depois",difficulty:"beginner",estimatedTime:"2 min",intro:["Aperte C ou Shift para guardar a pea atual","A pea guardada aparece no canto esquerdo","Voc pode trocar 1 vez por turno","Dica: guarde peas valiosas como I e T","Isso ajuda quando a pea atual no encaixa bem"],practice:{objective:"Use o hold e limpe 3 linhas",validate:t=>{const n=t.hasUsedHold,r=t.linesCleared||0;return n?{complete:r>=3,progress:Math.min(1,r/3),feedback:r>=3?" Hold dominado!":` Hold usado! ${r}/3 linhas`}:{complete:!1,progress:0,feedback:"Aperte C para segurar a pea!"}}},rewards:{fishCoins:100,xp:50,badge:"hold_learner",unlocks:[3]}},{id:3,module:wt.FUNDAMENTALS,title:"Planejamento",description:"Use o painel Next para planejar jogadas",difficulty:"beginner",estimatedTime:"3 min",intro:["O painel NEXT mostra as prximas peas","Olhe as prximas 2-3 peas antes de agir","Se vem uma pea I, deixe espao vertical","Pensar  frente = menos buracos = mais linhas","Tente limpar muitas linhas sem criar buracos!"],practice:{objective:"Limpe 8 linhas (planeje bem!)",validate:t=>{const n=t.linesCleared||0;return{complete:n>=8,progress:Math.min(1,n/8),feedback:n>=8?" Excelente planejamento!":`${n}/8 linhas`}}},rewards:{fishCoins:150,xp:75,badge:"planner",unlocks:[4]}},{id:4,module:wt.INTERMEDIATE,title:"Combos",description:"Limpe linhas consecutivas para bnus",difficulty:"intermediate",estimatedTime:"4 min",intro:["Combo = limpar linhas em peas consecutivas","Cada combo seguido d +50 pontos de bnus","Combo 5x = +250 pontos extras!","Dica: empilhe baixo e limpe 1 linha por vez","Foque em manter o ritmo, sem pausas"],practice:{objective:"Consiga um combo de 3 ou mais",validate:t=>{const n=t.currentCombo||0,r=t.maxCombo||n,s=Math.max(n,r);return{complete:s>=3,progress:Math.min(1,s/3),feedback:s>=3?" Combo master!":`Melhor combo: ${s}x (precisa 3)`}}},rewards:{fishCoins:200,xp:100,badge:"combo_starter",unlocks:[5]}},{id:5,module:wt.INTERMEDIATE,title:"Tetris (4 linhas)",description:"Limpe 4 linhas de uma vez para 800pts",difficulty:"intermediate",estimatedTime:"5 min",intro:["Tetris = limpar 4 linhas ao mesmo tempo","Vale 800 pontos  o clear mais valioso!","Deixe uma coluna vazia (geralmente a da direita)","Preencha as outras 9 colunas em 4 linhas","Use a pea I (barra) para completar o Tetris"],practice:{objective:"Alcance 2.000 pontos",validate:t=>{const n=t.score||0;return{complete:n>=2e3,progress:Math.min(1,n/2e3),feedback:n>=2e3?" Pontuao alta!":`${n.toLocaleString()}/2.000 pts`}}},rewards:{fishCoins:250,xp:125,badge:"tetris_scorer",unlocks:[6]}},{id:6,module:wt.ADVANCED,title:"T-Spin",description:"Rotacione o T no ltimo momento para bnus",difficulty:"advanced",estimatedTime:"6 min",intro:["T-Spin = rotacionar a pea T em espao apertado","Vale pontos extras e ativa back-to-back!",'Crie um buraco em forma de "T" na pilha',"Deslize a pea T para dentro e rotacione"," difcil, mas d muitos pontos!"],practice:{objective:"Faa pelo menos 1 T-Spin e 4.000 pontos",validate:t=>{const n=t.tSpins||0,r=t.score||0;return n===0?{complete:!1,progress:Math.min(.5,r/8e3),feedback:"Tente rotacionar o T em espao apertado!"}:{complete:r>=4e3,progress:Math.min(1,r/4e3),feedback:r>=4e3?` T-Spin pro! (${n} T-Spins)`:` T-Spin! ${r.toLocaleString()}/4.000 pts`}}},rewards:{fishCoins:400,xp:250,badge:"tspin_learner",unlocks:[7]}},{id:7,module:wt.ADVANCED,title:"Back-to-Back",description:"Tetris ou T-Spin seguidos do 50% bnus",difficulty:"advanced",estimatedTime:"6 min",intro:["Back-to-Back = dois clears difceis seguidos","Conta como: Tetris (4 linhas) ou T-Spin","Cada B2B seguido d +50% de pontos!","Limpar 1-3 linhas normais quebra a cadeia","Combine T-Spins e Tetris para pontuao mxima"],practice:{objective:"Alcance 6.000 pontos com back-to-back",validate:t=>{const n=t.score||0,r=t.backToBackActive;return{complete:n>=6e3,progress:Math.min(1,n/6e3),feedback:n>=6e3?" Back-to-back dominado!":r?` B2B ativo! ${n.toLocaleString()}/6.000 pts`:`${n.toLocaleString()}/6.000 pts`}}},rewards:{fishCoins:500,xp:300,badge:"b2b_learner",unlocks:[8]}},{id:8,module:wt.PRO,title:"Desafio Final",description:"Prove que domina o Tetris!",difficulty:"pro",estimatedTime:"10 min",intro:["Use TUDO que aprendeu at aqui","Movimentao, hold, combos, T-Spins, B2B...","O objetivo  alcanar uma pontuao alta","No tenha pressa  planeje cada jogada","Boa sorte, mestre! "],practice:{objective:"Alcance 15.000 pontos",validate:t=>{const n=t.score||0;return{complete:n>=15e3,progress:Math.min(1,n/15e3),feedback:n>=15e3?" MESTRE DO TETRIS!":`${n.toLocaleString()}/15.000 pts`}}},rewards:{fishCoins:1e3,xp:500,badge:"tetris_master",unlocks:[]}}]}_loadProgress(){var n,r;return((r=(n=this.gameRepository)==null?void 0:n.load)==null?void 0:r.call(n,"tutorialProgress"))||{completedLessons:[],unlockedLessons:[1],badges:[],totalXP:0,currentModule:wt.FUNDAMENTALS}}_saveProgress(){var t,n;(n=(t=this.gameRepository)==null?void 0:t.save)==null||n.call(t,"tutorialProgress",this.progress)}getProgress(){return this.progress}getLessonById(t){return this.lessons.find(n=>n.id===t)}getAvailableLessons(){return this.lessons.filter(t=>this.progress.unlockedLessons.includes(t.id))}completeLesson(t,n){var s;const r=this.getLessonById(t);return r?(this.progress.completedLessons.includes(t)||this.progress.completedLessons.push(t),(r.rewards.unlocks||[]).forEach(i=>{this.progress.unlockedLessons.includes(i)||this.progress.unlockedLessons.push(i)}),r.rewards.badge&&!this.progress.badges.includes(r.rewards.badge)&&this.progress.badges.push(r.rewards.badge),this.progress.totalXP+=r.rewards.xp||0,this._saveProgress(),{completed:!0,lessonId:t,lessonTitle:r.title,rewards:r.rewards,nextLesson:((s=r.rewards.unlocks)==null?void 0:s[0])||null,performance:n}):null}resetProgress(){this.progress={completedLessons:[],unlockedLessons:[1],badges:[],totalXP:0,currentModule:wt.FUNDAMENTALS},this._saveProgress()}}function Yb(e=new Sb){return e.registerSingleton("gameRepository",()=>new Pb),e.registerSingleton("settingsService",()=>new Ib),e.registerSingleton("statisticsService",()=>new Fb),e.registerSingleton("scoringService",()=>new gn),e.registerSingleton("pieceFactory",()=>new Un),e.registerSingleton("movementStrategyFactory",()=>new $n),e.registerSingleton("keyboardInputService",()=>new Bb),e.registerSingleton("playerStatsService",t=>new Ub(t),["gameRepository"]),e.registerSingleton("currencyService",t=>new Gb(t),["gameRepository"]),e.registerSingleton("missionsService",(t,n)=>new zb(t,n),["gameRepository","currencyService"]),e.registerSingleton("achievementsService",(t,n,r)=>new Hb(t,n,r),["gameRepository","currencyService","playerStatsService"]),e.registerSingleton("shopService",(t,n)=>new s0(t,n),["gameRepository","currencyService"]),e.registerSingleton("gameModesService",t=>new Wb(t),["gameRepository"]),e.registerSingleton("leaderboardService",(t,n)=>new qb(t,n),["gameRepository","playerStatsService"]),e.registerSingleton("shareService",t=>new Kb(t),["playerStatsService"]),e.registerSingleton("aiOpponentService",()=>new fs),e.registerSingleton("multiplayerService",t=>new Qb(t),["gameRepository"]),e.registerSingleton("tutorialService",t=>new Xb(t),["gameRepository"]),e.registerSingleton("gameService",(t,n,r,s)=>new Hn(t,n,r,s),["pieceFactory","movementStrategyFactory","gameRepository","scoringService"]),e}const z=Yb();function i0(){const[e,t]=x.useState(null),[n,r]=x.useState(!0);x.useEffect(()=>{try{const a=z.resolve("currencyService");t(a.getCurrency()),r(!1);const c=()=>{t(a.getCurrency())};return window.addEventListener("currencyUpdated",c),()=>{window.removeEventListener("currencyUpdated",c)}}catch{r(!1)}},[]);const s=x.useCallback((a,c)=>{try{const u=z.resolve("currencyService"),h=u.addFish(a,c);return h&&(t(u.getCurrency()),window.dispatchEvent(new Event("currencyUpdated"))),h}catch{return!1}},[]),i=x.useCallback((a,c)=>{try{const u=z.resolve("currencyService"),h=u.spendFish(a,c);return h&&(t(u.getCurrency()),window.dispatchEvent(new Event("currencyUpdated"))),h}catch{return!1}},[]),o=x.useCallback(a=>{try{return z.resolve("currencyService").canAfford(a)}catch{return!1}},[]);return{currency:e,loading:n,addFish:s,spendFish:i,canAfford:o}}function Jb({className:e=""}){const{currency:t,loading:n}=i0();return n||!t?l.jsxs("div",{className:`flex items-center gap-2 ${e}`,children:[l.jsx("div",{className:"text-2xl",children:""}),l.jsx("div",{className:"text-white/60",children:"..."})]}):l.jsxs(E.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:`flex items-center gap-2 bg-black/30 px-4 py-2 rounded-lg backdrop-blur-sm ${e}`,children:[l.jsx("span",{className:"text-2xl",children:""}),l.jsx(E.span,{initial:{scale:1.2,color:"#fbbf24"},animate:{scale:1,color:"#ffffff"},transition:{duration:.3},className:"text-xl font-bold",children:t.fish.toLocaleString()},t.fish)]})}function Zb({onStartGame:e,onNewGame:t,onShowSettings:n,onShowShop:r,onShowMissions:s,onShowAchievements:i,onShowMultiplayer:o,onShowTutorial:a,onShowTutorialHub:c,onShowAIShowcase:u,onShowCreatorMode:h,onShowInstallPrompt:d,canInstallPWA:f,hasActiveGame:y,gameState:v}){var b,j;const[w,S]=x.useState(!0),p=bb(),m=x.useCallback(k=>{var C;w&&((C=p.playMenuSelect)==null||C.call(p)),k==null||k()},[w,p]);x.useEffect(()=>{const k=C=>{C.key==="Enter"&&(C.preventDefault(),m(e))};return window.addEventListener("keydown",k),()=>window.removeEventListener("keydown",k)},[m,e]);const g=(k=0)=>({initial:{opacity:0,y:16},animate:{opacity:1,y:0},transition:{duration:.35,delay:k,ease:"easeOut"}});return l.jsxs("div",{className:"h-screen bg-gradient-to-b from-slate-900 via-purple-950 to-slate-900 flex flex-col items-center justify-center p-4 relative overflow-hidden",children:[l.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[l.jsx("div",{className:"absolute top-1/4 -left-32 w-64 h-64 bg-purple-600/10 rounded-full blur-3xl"}),l.jsx("div",{className:"absolute bottom-1/4 -right-32 w-64 h-64 bg-blue-600/10 rounded-full blur-3xl"})]}),l.jsx("div",{className:"fixed top-3 right-3 z-50",children:l.jsx(Jb,{})}),l.jsxs("div",{className:"w-full max-w-sm relative z-10 flex flex-col items-center",children:[l.jsxs(E.div,{...g(0),className:"text-center mb-4",children:[l.jsx("h1",{className:"text-4xl font-extrabold text-white tracking-tight drop-shadow-lg select-none",children:" Cat Tetris"}),l.jsx("p",{className:"text-white/50 text-xs mt-1",children:"Empilhe blocos com seus amigos felinos"})]}),l.jsx(E.div,{...g(.1),className:"w-full space-y-2 mb-4",children:y?l.jsxs(l.Fragment,{children:[l.jsxs("button",{onClick:()=>m(e),className:"w-full py-4 rounded-xl bg-emerald-500 hover:bg-emerald-400 active:scale-[0.98] text-white font-bold text-lg shadow-lg shadow-emerald-500/20 transition-all duration-150",children:[" Continuar",l.jsxs("span",{className:"block text-emerald-100/70 text-xs font-normal mt-0.5",children:["Nvel ",((b=v==null?void 0:v.score)==null?void 0:b.level)||1,"  ",(((j=v==null?void 0:v.score)==null?void 0:j.points)||0).toLocaleString()," pts"]})]}),l.jsx("button",{onClick:()=>m(t),className:"w-full py-3 rounded-xl bg-white/10 hover:bg-white/15 active:scale-[0.98] text-white font-semibold text-base border border-white/10 transition-all duration-150",children:"Novo Jogo"})]}):l.jsx("button",{onClick:()=>m(e),className:"w-full py-5 rounded-xl bg-gradient-to-r from-emerald-500 to-green-500 hover:from-emerald-400 hover:to-green-400 active:scale-[0.98] text-white font-bold text-xl shadow-lg shadow-emerald-500/25 transition-all duration-150",children:" Jogar"})}),l.jsxs(E.div,{...g(.18),className:"w-full grid grid-cols-2 gap-2 mb-4",children:[l.jsx(pi,{icon:"",label:"VS IA",sub:"Desafie o bot",onClick:()=>m(o)}),l.jsx(pi,{icon:"",label:"Tutorial",sub:"Aprenda a jogar",onClick:()=>m(c)}),l.jsx(pi,{icon:"",label:"Criador",sub:"Treine T-Spins",onClick:()=>m(h)}),l.jsx(pi,{icon:"",label:"IA Expert",sub:"Assista a IA jogar",onClick:()=>m(u)})]}),l.jsxs(E.div,{...g(.25),className:"w-full grid grid-cols-4 gap-1 mb-4",children:[l.jsx(gi,{icon:"",label:"Loja",onClick:()=>m(r)}),l.jsx(gi,{icon:"",label:"Misses",onClick:()=>m(s)}),l.jsx(gi,{icon:"",label:"Conquistas",onClick:()=>m(i)}),l.jsx(gi,{icon:"",label:"Config",onClick:()=>m(n)})]}),l.jsxs(E.div,{...g(.3),className:"flex items-center gap-3 text-xs text-white/25",children:[l.jsx("button",{onClick:()=>S(!w),className:"hover:text-white/50 transition-colors",children:w?"":""}),f&&l.jsx("button",{onClick:()=>m(d),className:"hover:text-white/50 transition-colors",children:" Instalar"}),l.jsx("span",{className:"select-none",children:"v1.0"})]})]})]})}function pi({icon:e,label:t,sub:n,onClick:r}){return l.jsxs("button",{onClick:r,className:"flex flex-col items-center text-center p-3 rounded-xl bg-white/[0.06] hover:bg-white/[0.1] border border-white/[0.06] hover:border-white/[0.12] active:scale-[0.97] transition-all duration-150",children:[l.jsx("span",{className:"text-2xl mb-1",children:e}),l.jsx("span",{className:"text-white font-semibold text-sm leading-tight",children:t}),l.jsx("span",{className:"text-white/40 text-[10px] mt-0.5 leading-tight",children:n})]})}function gi({icon:e,label:t,onClick:n}){return l.jsxs("button",{onClick:n,className:"flex flex-col items-center gap-1 px-2 py-2 rounded-lg hover:bg-white/[0.07] active:scale-95 transition-all duration-150",children:[l.jsx("span",{className:"text-lg",children:e}),l.jsx("span",{className:"text-white/40 text-[10px] leading-none",children:t})]})}function eS({onClose:e}){const[t,n]=x.useState(null),[r,s]=x.useState(!0),[i,o]=x.useState(!1);x.useEffect(()=>{const u=d=>{d.preventDefault(),n(d)},h=()=>{o(!0),s(!1),n(null),localStorage.setItem("cat-tetris-installed","true"),e&&e()};return window.addEventListener("beforeinstallprompt",u),window.addEventListener("appinstalled",h),window.matchMedia("(display-mode: standalone)").matches&&(o(!0),e&&e()),()=>{window.removeEventListener("beforeinstallprompt",u),window.removeEventListener("appinstalled",h)}},[e]);const a=async()=>{if(!t)return;t.prompt();const{outcome:u}=await t.userChoice;u==="accepted"&&(s(!1),e&&e()),localStorage.setItem("cat-tetris-install-prompt-seen","true"),n(null)},c=()=>{s(!1),localStorage.setItem("cat-tetris-install-prompt-seen","true"),e&&e()};return i?null:t?l.jsx(xe,{children:r&&l.jsx(E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:l.jsx(E.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},className:"bg-gradient-to-br from-purple-900 to-blue-900 rounded-2xl p-6 max-w-md w-full shadow-2xl border-2 border-purple-500/30",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-6xl mb-4",children:""}),l.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Instalar Cat Tetris"}),l.jsx("p",{className:"text-purple-200 mb-6",children:"Instale o Cat Tetris na sua tela inicial para jogar offline a qualquer momento! Funciona como um app nativo."}),l.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-6 text-sm",children:[l.jsxs("div",{className:"bg-white/10 rounded-lg p-3",children:[l.jsx("div",{className:"text-green-400 mb-1",children:" Acesso Rpido"}),l.jsx("div",{className:"text-purple-200",children:"cone na tela inicial"})]}),l.jsxs("div",{className:"bg-white/10 rounded-lg p-3",children:[l.jsx("div",{className:"text-green-400 mb-1",children:" Offline"}),l.jsx("div",{className:"text-purple-200",children:"Jogue sem internet"})]}),l.jsxs("div",{className:"bg-white/10 rounded-lg p-3",children:[l.jsx("div",{className:"text-green-400 mb-1",children:" Performance"}),l.jsx("div",{className:"text-purple-200",children:"Carregamento instantneo"})]}),l.jsxs("div",{className:"bg-white/10 rounded-lg p-3",children:[l.jsx("div",{className:"text-green-400 mb-1",children:" Experincia"}),l.jsx("div",{className:"text-purple-200",children:"Como app nativo"})]})]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx(E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:c,className:"flex-1 bg-gray-600 hover:bg-gray-700 text-white py-3 px-4 rounded-xl font-semibold transition-colors",children:"Agora no"}),l.jsx(E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:a,className:"flex-1 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white py-3 px-4 rounded-xl font-semibold transition-all shadow-lg",children:" Instalar"})]})]})})})}):l.jsx(E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:l.jsx(E.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},className:"bg-gradient-to-br from-purple-900 to-blue-900 rounded-2xl p-6 max-w-md w-full shadow-2xl border-2 border-purple-500/30",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-6xl mb-4",children:""}),l.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"PWA no disponvel"}),l.jsx("p",{className:"text-purple-200 mb-6",children:"Este dispositivo no suporta instalao de PWA ou o app j est instalado."}),l.jsx(E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:c,className:"w-full bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white py-3 px-4 rounded-xl font-semibold transition-all shadow-lg",children:" Entendi"})]})})})}function o0(){const[e,t]=x.useState([]),[n,r]=x.useState(!0);x.useEffect(()=>{try{const o=z.resolve("missionsService");t(o.getMissions()),r(!1);const a=()=>{t(o.getMissions())},c=({linesCleared:y})=>{o.incrementProgress(le.CLEAR_LINES,y),y===4&&o.incrementProgress(le.TETRIS_CLEAR,1),a()},u=()=>{o.incrementProgress(le.T_SPINS,1),a()},h=()=>{o.incrementProgress(le.PLACE_PIECES,1),a()},d=({score:y,level:v,combo:w})=>{y&&o.updateProgress(le.SCORE_POINTS,y),v&&o.updateProgress(le.REACH_LEVEL,v),w&&o.updateProgress(le.COMBOS,w),a()},f=()=>{o.incrementProgress(le.BACK_TO_BACK,1),a()};return R.on(B.LINE_CLEARED,c),R.on(B.T_SPIN,u),R.on(B.PIECE_PLACED,h),R.on(B.SCORE_UPDATED,d),R.on(B.BACK_TO_BACK,f),()=>{R.off(B.LINE_CLEARED,c),R.off(B.T_SPIN,u),R.off(B.PIECE_PLACED,h),R.off(B.SCORE_UPDATED,d),R.off(B.BACK_TO_BACK,f)}}catch{r(!1)}},[]),x.useEffect(()=>{if(n)return;const o=setInterval(()=>{try{const a=z.resolve("missionsService"),u=z.resolve("statisticsService").getStats();u.playTime>0&&(a.updateProgress(le.SURVIVE_TIME,u.playTime),t(a.getMissions()))}catch{}},1e3);return()=>clearInterval(o)},[n]);const s=x.useCallback(o=>{try{const a=z.resolve("missionsService"),c=a.claimReward(o);return c.success&&(t(a.getMissions()),window.dispatchEvent(new Event("currencyUpdated"))),c}catch(a){return{success:!1,error:a.message}}},[]),i=x.useCallback(()=>{try{return z.resolve("missionsService").getStats()}catch{return null}},[]);return{missions:e,loading:n,claimReward:s,getMissionsStats:i}}function a0({trigger:e,duration:t=3e3,message:n}){const[r,s]=x.useState(!1),[i,o]=x.useState([]);return x.useEffect(()=>{if(e){s(!0);const a=[];for(let c=0;c<50;c++)a.push({id:c,x:Math.random()*100,y:-10,rotation:Math.random()*360,color:["#FFD700","#FF6B6B","#4ECDC4","#45B7D1","#FFA07A","#98D8C8"][Math.floor(Math.random()*6)],size:Math.random()*10+5,delay:Math.random()*.5});o(a),setTimeout(()=>{s(!1),o([])},t)}},[e,t]),r?l.jsxs("div",{className:"fixed inset-0 pointer-events-none z-[9999] overflow-hidden",children:[i.map(a=>l.jsx(E.div,{initial:{x:`${a.x}vw`,y:a.y,rotate:a.rotation,opacity:1},animate:{y:"110vh",rotate:a.rotation+720,opacity:0},transition:{duration:2+Math.random(),delay:a.delay,ease:"easeIn"},style:{position:"absolute",width:a.size,height:a.size,backgroundColor:a.color,borderRadius:Math.random()>.5?"50%":"0"}},a.id)),n&&l.jsx(E.div,{initial:{scale:0,y:"50vh"},animate:{scale:1,y:"40vh"},exit:{scale:0,opacity:0},transition:{type:"spring",stiffness:200,damping:20},className:"absolute inset-x-0 flex justify-center",children:l.jsx("div",{className:"bg-gradient-to-r from-yellow-400 to-orange-500 text-white font-bold text-4xl px-8 py-4 rounded-2xl shadow-2xl border-4 border-white",children:n})}),l.jsx(E.div,{initial:{opacity:0},animate:{opacity:[0,1,0]},transition:{duration:1,repeat:3},className:"absolute inset-0 bg-gradient-to-b from-yellow-400/20 via-transparent to-transparent"})]}):null}function tS(){const[e,t]=x.useState([]);x.useEffect(()=>{const s=i=>{const{message:o,type:a="info",duration:c=3e3}=i.detail,u={id:`toast_${Date.now()}_${Math.random()}`,message:o,type:a,duration:c};t(h=>[...h,u]),setTimeout(()=>{t(h=>h.filter(d=>d.id!==u.id))},c)};return window.addEventListener("showToast",s),()=>window.removeEventListener("showToast",s)},[]);const n=s=>{switch(s){case"success":return"from-green-600 to-emerald-600 border-green-400";case"error":return"from-red-600 to-rose-600 border-red-400";case"warning":return"from-yellow-600 to-amber-600 border-yellow-400";case"info":default:return"from-blue-600 to-cyan-600 border-blue-400"}},r=s=>{switch(s){case"success":return"";case"error":return"";case"warning":return"";case"info":default:return""}};return l.jsx("div",{className:"fixed top-4 right-4 z-[9999] flex flex-col gap-2 pointer-events-none",children:l.jsx(xe,{children:e.map(s=>l.jsx(E.div,{initial:{opacity:0,x:100,scale:.8},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:100,scale:.8},className:`bg-gradient-to-r ${n(s.type)} border-2 rounded-lg px-4 py-3 shadow-2xl min-w-[250px] max-w-[400px] pointer-events-auto`,children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("span",{className:"text-white text-xl font-bold",children:r(s.type)}),l.jsx("span",{className:"text-white font-medium flex-1",children:s.message})]})},s.id))})})}function mr(e,t="info",n=3e3){window.dispatchEvent(new CustomEvent("showToast",{detail:{message:e,type:t,duration:n}}))}function nS({onClose:e}){const{missions:t,loading:n,claimReward:r,getMissionsStats:s}=o0(),[i,o]=ce.useState(!1),a=s(),c=d=>{const f=r(d);f.success?(mr(` Recompensa coletada: +${f.reward} `,"success"),s().allClaimed&&(o(!0),setTimeout(()=>o(!1),3e3))):mr(` ${f.error}`,"error")},u=d=>{switch(d){case"easy":return"text-green-400";case"medium":return"text-yellow-400";case"hard":return"text-red-400";default:return"text-white"}},h=d=>{switch(d){case"easy":return" Fcil";case"medium":return" Mdio";case"hard":return" Difcil";default:return d}};return n?l.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",children:l.jsx("div",{className:"text-white text-xl",children:"Carregando misses..."})}):l.jsxs(E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:e,children:[l.jsxs(E.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},className:"bg-gradient-to-br from-purple-900/95 to-blue-900/95 rounded-2xl p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto border-2 border-white/20 shadow-2xl",onClick:d=>d.stopPropagation(),children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-3xl font-bold text-white flex items-center gap-2",children:" Misses Dirias"}),l.jsx("p",{className:"text-white/60 text-sm mt-1",children:"Complete misses para ganhar  Peixes"})]}),l.jsx("button",{onClick:e,className:"text-white/60 hover:text-white text-2xl transition-colors",children:""})]}),a&&l.jsxs("div",{className:"bg-black/30 rounded-lg p-4 mb-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-white/80",children:"Progresso Dirio:"}),l.jsxs("span",{className:"text-white font-bold",children:[a.completed,"/",a.total," completas"]})]}),l.jsxs("div",{className:"flex justify-between items-center mt-2",children:[l.jsx("span",{className:"text-white/80",children:"Recompensas Disponveis:"}),l.jsxs("span",{className:"text-yellow-400 font-bold flex items-center gap-1",children:[" ",a.claimedRewards,"/",a.totalRewards]})]})]}),l.jsx("div",{className:"space-y-4",children:t.map((d,f)=>{const y=Math.min(d.progress,d.target),v=y/d.target*100;return l.jsxs(E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:f*.1},className:`bg-black/40 rounded-lg p-4 border-2 ${d.completed?"border-green-500/50":"border-white/10"}`,children:[l.jsxs("div",{className:"flex justify-between items-start mb-2",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx("h3",{className:"text-white font-bold text-lg",children:d.title}),d.completed&&!d.claimed&&l.jsx("span",{className:"text-green-400 text-xl animate-pulse",children:""}),d.claimed&&l.jsx("span",{className:"text-white/40 text-sm",children:"(Coletado)"})]}),l.jsx("p",{className:"text-white/60 text-sm",children:d.description}),l.jsx("span",{className:`text-xs ${u(d.difficulty)}`,children:h(d.difficulty)})]}),l.jsx("div",{className:"text-right",children:l.jsxs("div",{className:"text-yellow-400 font-bold flex items-center gap-1",children:[l.jsx("span",{className:"text-2xl",children:""}),l.jsx("span",{children:d.reward})]})})]}),l.jsxs("div",{className:"mt-3",children:[l.jsxs("div",{className:"flex justify-between text-sm text-white/60 mb-1",children:[l.jsx("span",{children:"Progresso"}),l.jsxs("span",{children:[y,"/",d.target]})]}),l.jsx("div",{className:"w-full bg-gray-700 rounded-full h-3 overflow-hidden",children:l.jsx(E.div,{initial:{width:0},animate:{width:`${v}%`},transition:{duration:.5},className:`h-full ${d.completed?"bg-green-500":"bg-blue-500"}`})})]}),d.completed&&!d.claimed&&l.jsx(E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>c(d.id),className:"w-full mt-3 bg-green-600 hover:bg-green-500 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:" Coletar Recompensa"})]},d.id)})}),l.jsx("div",{className:"mt-6 text-center text-white/40 text-sm",children:"As misses resetam todos os dias s 00:00"})]}),l.jsx(a0,{trigger:i,message:" Todas as misses completas! ",duration:3e3})]})}function l0(){const[e,t]=x.useState([]),[n,r]=x.useState([]),[s,i]=x.useState(!0);x.useEffect(()=>{try{const h=z.resolve("achievementsService");t(h.getAchievements()),i(!1);const d=setInterval(()=>{const y=z.resolve("playerStatsService").getStats(),v=h.checkAchievements(y);v.length>0&&(t(h.getAchievements()),r(v),window.dispatchEvent(new CustomEvent("achievementsUnlocked",{detail:v})),setTimeout(()=>{r([])},5e3))},2e3);return()=>clearInterval(d)}catch{i(!1)}},[]);const o=x.useCallback(h=>{try{return z.resolve("achievementsService").getByTier(h)}catch{return[]}},[]),a=x.useCallback(()=>{try{return z.resolve("achievementsService").getUnlocked()}catch{return[]}},[]),c=x.useCallback(()=>{try{return z.resolve("achievementsService").getLocked()}catch{return[]}},[]),u=x.useCallback(()=>{try{return z.resolve("achievementsService").getStats()}catch{return null}},[]);return{achievements:e,newUnlocks:n,loading:s,getAchievementsByTier:o,getUnlocked:a,getLocked:c,getStats:u}}function rS({onClose:e}){const{achievements:t,loading:n,getStats:r,getAchievementsByTier:s}=l0(),[i,o]=x.useState("all"),a=r(),c={bronze:"from-amber-700 to-amber-900",silver:"from-gray-400 to-gray-600",gold:"from-yellow-400 to-yellow-600",platinum:"from-cyan-400 to-blue-600"},u={bronze:"",silver:"",gold:"",platinum:""},h=i==="all"?t:s(i);return n?l.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",children:l.jsx("div",{className:"text-white text-xl",children:"Carregando conquistas..."})}):l.jsx(E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:e,children:l.jsxs(E.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},className:"bg-gradient-to-br from-indigo-900/95 to-purple-900/95 rounded-2xl p-6 max-w-4xl w-full max-h-[90vh] overflow-y-auto border-2 border-white/20 shadow-2xl",onClick:d=>d.stopPropagation(),children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-3xl font-bold text-white flex items-center gap-2",children:" Conquistas"}),l.jsx("p",{className:"text-white/60 text-sm mt-1",children:"Desbloqueie conquistas para ganhar  Peixes"})]}),l.jsx("button",{onClick:e,className:"text-white/60 hover:text-white text-2xl transition-colors",children:""})]}),a&&l.jsxs("div",{className:"bg-black/30 rounded-lg p-4 mb-6",children:[l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-2xl font-bold text-white",children:[a.unlocked,"/",a.total]}),l.jsx("div",{className:"text-white/60 text-sm",children:"Desbloqueadas"})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-2xl font-bold text-green-400",children:[a.percentage,"%"]}),l.jsx("div",{className:"text-white/60 text-sm",children:"Completo"})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-2xl font-bold text-yellow-400 flex items-center justify-center gap-1",children:[" ",a.earnedRewards.toLocaleString()]}),l.jsx("div",{className:"text-white/60 text-sm",children:"Ganhos"})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-2xl font-bold text-white/40 flex items-center justify-center gap-1",children:[" ",a.totalRewards.toLocaleString()]}),l.jsx("div",{className:"text-white/60 text-sm",children:"Total"})]})]}),l.jsxs("div",{className:"flex justify-around mt-4 pt-4 border-t border-white/10",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-lg",children:""}),l.jsx("div",{className:"text-white/80 text-sm",children:a.byTier.bronze})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-lg",children:""}),l.jsx("div",{className:"text-white/80 text-sm",children:a.byTier.silver})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-lg",children:""}),l.jsx("div",{className:"text-white/80 text-sm",children:a.byTier.gold})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-lg",children:""}),l.jsx("div",{className:"text-white/80 text-sm",children:a.byTier.platinum})]})]})]}),l.jsxs("div",{className:"flex gap-2 mb-4 overflow-x-auto",children:[l.jsx("button",{onClick:()=>o("all"),className:`px-4 py-2 rounded-lg font-bold transition-colors whitespace-nowrap ${i==="all"?"bg-white text-black":"bg-white/20 text-white hover:bg-white/30"}`,children:"Todas"}),Object.keys(u).map(d=>l.jsxs("button",{onClick:()=>o(d),className:`px-4 py-2 rounded-lg font-bold transition-colors whitespace-nowrap ${i===d?`bg-gradient-to-r ${c[d]} text-white`:"bg-white/20 text-white hover:bg-white/30"}`,children:[u[d]," ",d.charAt(0).toUpperCase()+d.slice(1)]},d))]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:h.map((d,f)=>{const y=d.progress||0,v=d.requirement.value,w=Math.min(y/v*100,100);return l.jsxs(E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:f*.05},className:`bg-black/40 rounded-lg p-4 border-2 relative overflow-hidden ${d.unlocked?`border-transparent bg-gradient-to-br ${c[d.tier]}`:"border-white/10"}`,children:[d.unlocked&&l.jsx("div",{className:"absolute top-2 right-2 text-3xl",children:""}),l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:"text-4xl",children:u[d.tier]}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:`font-bold text-lg mb-1 ${d.unlocked?"text-white":"text-white/60"}`,children:d.title}),l.jsx("p",{className:`text-sm mb-2 ${d.unlocked?"text-white/90":"text-white/40"}`,children:d.description}),l.jsxs("div",{className:`flex items-center gap-1 text-sm font-bold ${d.unlocked?"text-yellow-300":"text-white/40"}`,children:[" ",d.reward]}),!d.unlocked&&l.jsxs("div",{className:"mt-2",children:[l.jsxs("div",{className:"flex justify-between text-xs text-white/40 mb-1",children:[l.jsx("span",{children:"Progresso"}),l.jsxs("span",{children:[y,"/",v]})]}),l.jsx("div",{className:"w-full bg-gray-700/50 rounded-full h-2",children:l.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${w}%`}})})]}),d.unlocked&&d.unlockedAt&&l.jsxs("div",{className:"text-xs text-white/60 mt-2",children:["Desbloqueado em ",new Date(d.unlockedAt).toLocaleDateString()]})]})]})]},d.id)})}),h.length===0&&l.jsx("div",{className:"text-center text-white/40 py-8",children:"Nenhuma conquista nesta categoria"})]})})}function sS(){const[e,t]=x.useState([]),[n,r]=x.useState(!1);x.useEffect(()=>{const o=a=>{const c=a.detail;c.some(h=>h.tier==="platinum")&&(r(!0),setTimeout(()=>r(!1),3e3)),c.forEach((h,d)=>{setTimeout(()=>{const f={id:`${h.id}_${Date.now()}`,achievement:h};t(y=>[...y,f]),setTimeout(()=>{t(y=>y.filter(v=>v.id!==f.id))},5e3)},d*500)})};return window.addEventListener("achievementsUnlocked",o),()=>{window.removeEventListener("achievementsUnlocked",o)}},[]);const s={bronze:"",silver:"",gold:"",platinum:""},i={bronze:"from-amber-700 to-amber-900",silver:"from-gray-400 to-gray-600",gold:"from-yellow-400 to-yellow-600",platinum:"from-cyan-400 to-blue-600"};return l.jsxs("div",{className:"fixed top-4 right-4 z-[9999] pointer-events-none",children:[l.jsx(xe,{children:e.map(o=>{const{achievement:a}=o;return l.jsx(E.div,{initial:{opacity:0,x:100,scale:.8},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:100,scale:.8},transition:{type:"spring",stiffness:200,damping:20},className:`bg-gradient-to-r ${i[a.tier]} rounded-lg p-4 shadow-2xl mb-3 border-2 border-white/30 pointer-events-auto max-w-sm`,children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"text-5xl",children:s[a.tier]}),l.jsxs("div",{className:"flex-1",children:[l.jsx("div",{className:"text-white/90 text-sm font-bold mb-1",children:" CONQUISTA DESBLOQUEADA!"}),l.jsx("h3",{className:"text-white font-bold text-lg",children:a.title}),l.jsx("p",{className:"text-white/80 text-sm",children:a.description}),l.jsxs("div",{className:"flex items-center gap-1 mt-2 text-yellow-200 font-bold",children:[l.jsx("span",{className:"text-xl",children:""}),l.jsxs("span",{children:["+",a.reward]})]})]})]})},o.id)})}),l.jsx(a0,{trigger:n,message:" Conquista Lendria! ",duration:3e3})]})}function iS({mode:e,aiDifficulty:t,ai1Difficulty:n,ai2Difficulty:r,onExit:s}){var b,j,k,C,P,N,A,H,Y,Q,Z,J,G,q,T,F,V,D,K,Te,je,L;const[i,o]=x.useState(null),[a,c]=x.useState(null),[u,h]=x.useState(null),[d,f]=x.useState(0),[y,v]=x.useState(0),w=x.useRef({p1:null,p2:null,ai:null,ai1:null,ai2:null}),S=x.useRef(0),p=x.useRef(null);x.useEffect(()=>{const M=new Hn(new Un,new $n,null,new gn),O=new Hn(new Un,new $n,null,new gn);let U=null,W=null,te=null;if(e==="vsAI")try{U=new fs,U.setDifficulty(t||"medium"),t==="expert"&&(O.score._fixedLevel=1)}catch{}else e==="aiVsAI"&&(W=new fs,W.setDifficulty(n||"expert"),W.setVisualMode(!0),te=new fs,te.setDifficulty(r||"expert"),te.setVisualMode(!0),(n||"expert")==="expert"&&(M.score._fixedLevel=1),(r||"expert")==="expert"&&(O.score._fixedLevel=1));return M.initializeGame(),M.isPlaying=!0,O.initializeGame(),O.isPlaying=!0,e==="vsAI"&&t==="expert"?(O._lockDelayMax=2e3,O._lockDelayMaxResets=50):e==="aiVsAI"&&((n||"expert")==="expert"&&(M._lockDelayMax=2e3,M._lockDelayMaxResets=50),(r||"expert")==="expert"&&(O._lockDelayMax=2e3,O._lockDelayMaxResets=50)),w.current={p1:M,p2:O,ai:U,ai1:W,ai2:te},o(M.getGameState()),c(O.getGameState()),()=>{p.current&&cancelAnimationFrame(p.current)}},[e,t,n,r]),x.useEffect(()=>{const M=O=>{S.current||(S.current=O);const U=O-S.current;S.current=O;const{p1:W,p2:te,ai:tt,ai1:Hs,ai2:Us}=w.current;if(!W||!te){p.current=requestAnimationFrame(M);return}if(W.gameOver||te.gameOver){W.gameOver||(W.gameOver=!0,W._markDirty()),te.gameOver||(te.gameOver=!0,te._markDirty()),W.isDirty&&(o(W.getGameState()),W.clearDirty()),te.isDirty&&(c(te.getGameState()),te.clearDirty());return}W.isPaused||W.updateGame(U),te.isPaused||te.updateGame(U);const $s=W.consumeAttack();$s>0&&!te.gameOver&&te.receiveGarbage($s);const Ws=te.consumeAttack();Ws>0&&!W.gameOver&&W.receiveGarbage(Ws);const Fr=(ne,ve)=>{if(!(!ne||ve.gameOver))try{const h0=e==="aiVsAI"?3:ne._isExpert?20:1;for(let Xc=0;Xc<h0;Xc++){const Oo=ne.decideNextMove(ve.getGameState());if(!Oo)break;switch(Oo.action){case"left":ve.movePiece("left");break;case"right":ve.movePiece("right");break;case"rotate":ve.rotatePiece();break;case"down":ve.movePiece("down");break;case"drop":ve.hardDrop();break;case"hold":ve.holdPiece();break}if(Oo.action==="drop")break}}catch{}};e==="aiVsAI"?(Fr(Hs,W),Fr(Us,te)):e==="vsAI"&&Fr(tt,te),W.isDirty&&(o(W.getGameState()),f(W.pendingGarbage),W.clearDirty()),te.isDirty&&(c(te.getGameState()),v(te.pendingGarbage),te.clearDirty()),p.current=requestAnimationFrame(M)};return p.current=requestAnimationFrame(M),()=>{p.current&&cancelAnimationFrame(p.current)}},[e]),x.useEffect(()=>{var M,O;u||!i||!a||(i.gameOver&&!a.gameOver?h("player2"):a.gameOver&&!i.gameOver?h("player1"):i.gameOver&&a.gameOver&&h((((M=i.score)==null?void 0:M.points)||0)>=(((O=a.score)==null?void 0:O.points)||0)?"player1":"player2"))},[i==null?void 0:i.gameOver,a==null?void 0:a.gameOver,u]),x.useEffect(()=>{if(u||e==="aiVsAI")return;const M=O=>{const U=w.current.p1;if(!(!U||U.gameOver))switch(O.key){case"ArrowLeft":O.preventDefault(),U.movePiece("left");break;case"ArrowRight":O.preventDefault(),U.movePiece("right");break;case"ArrowDown":O.preventDefault(),U.movePiece("down");break;case"ArrowUp":O.preventDefault(),U.rotatePiece();break;case"z":case"Z":U.rotatePiece("left");break;case"c":case"C":case"Shift":U.holdPiece();break;case" ":O.preventDefault(),U.hardDrop();break}};return window.addEventListener("keydown",M),()=>window.removeEventListener("keydown",M)},[u]);const m=ce.useMemo(()=>{var M;if(!(i!=null&&i.currentPiece)||i!=null&&i.gameOver)return null;try{return(M=w.current.p1)==null?void 0:M.getDropPreview()}catch{return null}},[(j=(b=i==null?void 0:i.currentPiece)==null?void 0:b.position)==null?void 0:j.x,(C=(k=i==null?void 0:i.currentPiece)==null?void 0:k.position)==null?void 0:C.y,(P=i==null?void 0:i.currentPiece)==null?void 0:P.type,(N=i==null?void 0:i.currentPiece)==null?void 0:N.rotationState]),g=ce.useMemo(()=>{var M;if(!(a!=null&&a.currentPiece)||a!=null&&a.gameOver)return null;try{return(M=w.current.p2)==null?void 0:M.getDropPreview()}catch{return null}},[(H=(A=a==null?void 0:a.currentPiece)==null?void 0:A.position)==null?void 0:H.x,(Q=(Y=a==null?void 0:a.currentPiece)==null?void 0:Y.position)==null?void 0:Q.y,(Z=a==null?void 0:a.currentPiece)==null?void 0:Z.type,(J=a==null?void 0:a.currentPiece)==null?void 0:J.rotationState]);return!i||!a?l.jsx("div",{className:"h-screen flex items-center justify-center bg-gradient-to-br from-purple-900 to-blue-900",children:l.jsx("div",{className:"text-white text-2xl",children:"Carregando multiplayer..."})}):l.jsxs("div",{className:"h-screen flex flex-col items-center bg-gradient-to-br from-purple-900 to-blue-900 p-2 overflow-hidden",children:[l.jsxs("div",{className:"flex justify-between items-center w-full max-w-5xl mb-2",children:[l.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-white",children:e==="aiVsAI"?" IA vs IA (Debug)":e==="vsAI"?" vs IA":" 1v1 Local"}),l.jsx("button",{onClick:s,className:"bg-red-600 hover:bg-red-700 text-white px-3 py-1.5 rounded-lg transition-colors text-sm font-bold",children:" Voltar"})]}),l.jsxs("div",{className:"flex gap-2 sm:gap-4 items-start justify-center flex-wrap",children:[l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("div",{className:"bg-blue-600 text-white px-4 py-1 rounded-t-lg font-bold text-sm sm:text-base",children:e==="aiVsAI"?` IA1 (${(n==null?void 0:n.toUpperCase())||"EXPERT"})`:e==="vsAI"?" VOC":" P1"}),l.jsx("div",{className:"bg-black/40 p-2 rounded-b-lg",children:l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx(zn,{heldPiece:i.heldPiece,canHold:i.canHold}),e!=="aiVsAI"&&l.jsxs("div",{className:"text-white/60 text-[10px] leading-tight",children:[" mover",l.jsx("br",{})," rotacionar",l.jsx("br",{}),"C segurar",l.jsx("br",{}),"Espao dropar"]})]}),l.jsx(pn,{board:i.board,currentPiece:i.currentPiece,dropPreview:m,gameOver:i.gameOver}),d>0&&l.jsx(vh,{count:d}),l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx(Gn,{pieces:i.nextPieces||[]}),l.jsx(Bn,{score:((G=i.score)==null?void 0:G.points)||0,level:((q=i.score)==null?void 0:q.level)||1,lines:((T=i.score)==null?void 0:T.lines)||0,combo:((F=i.score)==null?void 0:F.combo)||0})]})]})})]}),l.jsx("div",{className:"flex items-center justify-center self-center",children:l.jsx("div",{className:"bg-yellow-500 text-black font-bold text-2xl sm:text-3xl px-4 py-2 rounded-full shadow-2xl animate-pulse",children:"VS"})}),l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("div",{className:"bg-red-600 text-white px-4 py-1 rounded-t-lg font-bold text-sm sm:text-base",children:e==="aiVsAI"?` IA2 (${(r==null?void 0:r.toUpperCase())||"EXPERT"})`:e==="vsAI"?` IA (${(t==null?void 0:t.toUpperCase())||"MEDIUM"})`:" P2"}),l.jsx("div",{className:"bg-black/40 p-2 rounded-b-lg",children:l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx(zn,{heldPiece:a.heldPiece,canHold:a.canHold}),e==="1v1"&&l.jsxs("div",{className:"text-white/60 text-[10px] leading-tight",children:["Setas mover",l.jsx("br",{})," rotacionar",l.jsx("br",{}),"Ctrl segurar",l.jsx("br",{}),"Enter dropar"]})]}),l.jsx(pn,{board:a.board,currentPiece:a.currentPiece,dropPreview:g,gameOver:a.gameOver}),y>0&&l.jsx(vh,{count:y}),l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx(Gn,{pieces:a.nextPieces||[]}),l.jsx(Bn,{score:((V=a.score)==null?void 0:V.points)||0,level:((D=a.score)==null?void 0:D.level)||1,lines:((K=a.score)==null?void 0:K.lines)||0,combo:((Te=a.score)==null?void 0:Te.combo)||0})]})]})})]})]}),l.jsx(xe,{children:u&&l.jsx(E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/90 flex items-center justify-center z-50",children:l.jsxs(E.div,{initial:{scale:.8,y:50},animate:{scale:1,y:0},className:"bg-gradient-to-br from-yellow-500 to-orange-600 rounded-2xl p-12 text-center",children:[l.jsx("div",{className:"text-8xl mb-4",children:u==="player1"||e==="aiVsAI"?"":""}),l.jsx("h2",{className:"text-5xl font-bold text-white mb-4",children:e==="aiVsAI"?u==="player1"?"IA 1 VENCEU!":"IA 2 VENCEU!":u==="player1"?"VITRIA!":"DERROTA!"}),l.jsx("p",{className:"text-2xl text-white/80 mb-8",children:e==="aiVsAI"?`${u==="player1"?n==null?void 0:n.toUpperCase():r==null?void 0:r.toUpperCase()}  superior!`:u==="player1"?e==="vsAI"?"Voc venceu a IA!":"Player 1 venceu!":e==="vsAI"?"IA venceu!":"Player 2 venceu!"}),l.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-8 text-white",children:[l.jsxs("div",{className:"bg-black/30 rounded-lg p-4",children:[l.jsx("div",{className:"text-sm opacity-60",children:e==="aiVsAI"?`IA1 (${n})`:"Player 1"}),l.jsx("div",{className:"text-3xl font-bold",children:(((je=i.score)==null?void 0:je.points)||0).toLocaleString()})]}),l.jsxs("div",{className:"bg-black/30 rounded-lg p-4",children:[l.jsx("div",{className:"text-sm opacity-60",children:e==="aiVsAI"?`IA2 (${r})`:e==="vsAI"?"IA":"Player 2"}),l.jsx("div",{className:"text-3xl font-bold",children:(((L=a.score)==null?void 0:L.points)||0).toLocaleString()})]})]}),l.jsxs("div",{className:"flex gap-4",children:[l.jsx("button",{onClick:()=>window.location.reload(),className:"bg-green-600 hover:bg-green-700 text-white px-8 py-3 rounded-lg font-bold text-xl transition-colors",children:" Jogar Novamente"}),l.jsx("button",{onClick:s,className:"bg-gray-700 hover:bg-gray-800 text-white px-8 py-3 rounded-lg font-bold text-xl transition-colors",children:" Menu"})]})]})})})]})}function vh({count:e}){const n=Math.min(e,20);return l.jsx("div",{className:"flex flex-col-reverse justify-end w-3 rounded overflow-hidden",style:{height:"calc(var(--cell) * 22 + 22px)"},children:Array.from({length:n},(r,s)=>l.jsx("div",{className:"w-full",style:{height:`${100/20}%`,backgroundColor:e>8?"#ef4444":e>4?"#f59e0b":"#ef4444",opacity:.7+s/n*.3}},s))})}class oS{constructor(){this._actionQueue=[],this._lastPieceType=null,this._holdCooldown=0,this._comboCount=0,this.thinkingTime=0,this.lastDecision=0}setDifficulty(){}decideNextMove(t){var d;const n=Date.now();if(n-this.lastDecision<this.thinkingTime)return null;this.lastDecision=n;const{currentPiece:r,board:s,heldPiece:i,canHold:o}=t;if(!r||!s)return null;const a=r.type;if(a!==this._lastPieceType&&(this._lastPieceType=a,this._actionQueue=[],this._holdCooldown>0&&this._holdCooldown--),this._actionQueue.length>0)return this._actionQueue.shift();const c=s.length,u=((d=s[0])==null?void 0:d.length)||10,h=this._findBestMove(r,s,c,u);if(o&&this._holdCooldown<=0&&i){const f=this._findBestMove(i,s,c,u);if(f&&(!h||f.score>h.score+500))return this._holdCooldown=1,{action:"hold"}}return!h&&o&&this._holdCooldown<=0?(this._holdCooldown=1,{action:"hold"}):(h?this._actionQueue=this._buildActionSequence(r,h.rotations,h.targetX):this._actionQueue=[{action:"drop"}],this._actionQueue.shift()||{action:"drop"})}_findBestMove(t,n,r,s){let i=-1/0,o=null;for(let a=0;a<4;a++){const c=this._rotateShape(t.shape,a),u=c[0].length;for(let h=-1;h<=s-u+1;h++){const d=this._findLandingRow(c,n,h,r,s);if(d==null||d<0)continue;const f=this._placeOnBoard(c,n,h,d);if(!f)continue;const y=this._evaluate(f,n,d);y>i&&(i=y,o={rotations:a,targetX:h,score:y})}}return o}_evaluate(t,n,r){const s=t.length,i=t[0].length;let o=0;const a=this._countCompleteLines(t);a===1&&(o+=1e4),a===2&&(o+=25e3),a===3&&(o+=5e4),a>=4&&(o+=1e5);const c=this._removeCompleteLines(t);let u=0,h=0;for(let m=0;m<i;m++){let g=!1,b=0;for(let j=0;j<s;j++)c[j][m]!=null?(g=!0,b++):g&&(u++,h+=b)}o-=u*1e4,o-=h*1e3;const d=[];for(let m=0;m<i;m++){let g=0;for(let b=0;b<s;b++)if(c[b][m]!=null){g=s-b;break}d.push(g)}const f=Math.max(...d),y=d.reduce((m,g)=>m+g,0);o-=y*50,o-=f*100,f>12&&(o-=(f-12)*(f-12)*500),f>16&&(o-=1e5);let v=0;for(let m=0;m<i-1;m++)m===i-2?v+=Math.abs(d[m]-d[m+1])*.3:v+=Math.abs(d[m]-d[m+1]);o-=v*200;let w=0;for(let m=0;m<s;m++)if(c[m].filter(b=>b!=null).length!==0){for(let b=0;b<i-1;b++){const j=c[m][b]!=null,k=c[m][b+1]!=null;j!==k&&w++}c[m][0]==null&&w++,c[m][i-1]==null&&w++}o-=w*100;let S=0;for(let m=0;m<i;m++){for(let g=0;g<s-1;g++){const b=c[g][m]!=null,j=c[g+1][m]!=null;b!==j&&S++}c[s-1][m]==null&&S++}o-=S*80;const p=i-1;if(d[p]<d[p-1]){const m=d[p-1]-d[p];m>=1&&m<=4&&f<=12&&(o+=m*300)}for(let m=0;m<s;m++){const g=c[m].filter(b=>b!=null).length;g===9&&(o+=500),g===8&&(o+=200)}return o-=r>0?0:(s-r)*30,f>14&&(o+=a*5e4),o}_buildActionSequence(t,n,r){var u;const s=[],i=n%4;for(let h=0;h<i;h++)s.push({action:"rotate"});const o=((u=t.position)==null?void 0:u.x)??3,a=r-o,c=a>0?"right":"left";for(let h=0;h<Math.abs(a);h++)s.push({action:c});return s.push({action:"drop"}),s}_rotateShape(t,n){let r=t;for(let s=0;s<n%4;s++)r=r[0].map((i,o)=>r.map(a=>a[o]).reverse());return r}_findLandingRow(t,n,r,s,i){const o=t.length;for(let a=-o;a<s;a++)if(this._collides(t,n,r,a+1,s,i))return a;return s-o}_collides(t,n,r,s,i,o){for(let a=0;a<t.length;a++)for(let c=0;c<t[0].length;c++){if(!t[a][c])continue;const u=r+c,h=s+a;if(u<0||u>=o||h>=i||h>=0&&n[h][u]!=null)return!0}return!1}_placeOnBoard(t,n,r,s){const i=n.length,o=n[0].length,a=n.map(c=>[...c]);for(let c=0;c<t.length;c++)for(let u=0;u<t[0].length;u++){if(!t[c][u])continue;const h=r+u,d=s+c;if(h<0||h>=o||d<0||d>=i||a[d][h]!=null)return null;a[d][h]=1}return a}_removeCompleteLines(t){const n=t[0].length,r=t.filter(s=>!s.every(i=>i!=null));for(;r.length<t.length;)r.unshift(new Array(n).fill(null));return r}_countCompleteLines(t){return t.filter(n=>n.every(r=>r!=null)).length}_countHoles(t){let n=0;const r=t[0].length;for(let s=0;s<r;s++){let i=!1;for(let o=0;o<t.length;o++)t[o][s]!=null?i=!0:i&&n++}return n}_getMaxHeight(t){var s;const n=t.length,r=((s=t[0])==null?void 0:s.length)||10;for(let i=0;i<n;i++)for(let o=0;o<r;o++)if(t[i][o]!=null)return n-i;return 0}}const aS=50;function lS(e){const[t,n]=x.useState(null),[r,s]=x.useState({lines:0,combos:0,tetrises:0,maxCombo:0}),[i,o]=x.useState(!1),[a,c]=x.useState(!1),u=x.useRef(null),h=x.useRef(null),d=x.useRef(null),f=x.useRef(0),y=x.useRef(0),v=x.useRef({lines:0,combos:0,tetrises:0,maxCombo:0,currentCombo:0}),w=x.useCallback(()=>{const p=new Hn(new Un,new $n,null,new gn);p.initializeGame(),p.isPlaying=!0;const m=new oS;u.current=p,h.current=m,y.current=0,f.current=0,v.current.currentCombo=0,n(p.getGameState()),c(!0)},[]);x.useEffect(()=>{if(!e){d.current&&cancelAnimationFrame(d.current),u.current=null,h.current=null,c(!1),n(null),s({lines:0,combos:0,tetrises:0,maxCombo:0}),v.current={lines:0,combos:0,tetrises:0,maxCombo:0,currentCombo:0};return}w();const p=({linesCleared:g})=>{const b=v.current;b.lines+=g,b.currentCombo++,b.currentCombo>1&&(b.combos++,b.currentCombo>b.maxCombo&&(b.maxCombo=b.currentCombo),o(!0),setTimeout(()=>o(!1),600)),g>=4&&b.tetrises++,s({lines:b.lines,combos:b.combos,tetrises:b.tetrises,maxCombo:b.maxCombo})},m=({linesCleared:g})=>{g===0&&(v.current.currentCombo=0)};return R.on(B.LINE_CLEARED,p),R.on(B.PIECE_PLACED,m),()=>{d.current&&cancelAnimationFrame(d.current),R.off(B.LINE_CLEARED,p),R.off(B.PIECE_PLACED,m),u.current=null,h.current=null}},[e,w]),x.useEffect(()=>{if(!a||!u.current||!e)return;const p=m=>{f.current||(f.current=m);let g=m-f.current;f.current=m,g>200&&(g=16);const b=u.current,j=h.current;if(!(!b||!j)){if(b.gameOver){w(),d.current=requestAnimationFrame(p);return}if(b.isPlaying&&!b.isPaused&&b.updateGame(g),y.current+=g,y.current>=aS){y.current=0;try{const k=b.getGameState(),C=j.decideNextMove(k);if(C)switch(C.action){case"left":b.movePiece("left");break;case"right":b.movePiece("right");break;case"rotate":b.rotatePiece();break;case"rotateLeft":b.rotatePieceLeft();break;case"down":b.movePiece("down");break;case"drop":b.hardDrop();break;case"hold":b.holdPiece();break}n(b.getGameState())}catch{}}d.current=requestAnimationFrame(p)}};return d.current=requestAnimationFrame(p),()=>{d.current&&cancelAnimationFrame(d.current)}},[a,e,w]);const S=x.useCallback(()=>{var p;try{return((p=u.current)==null?void 0:p.getDropPreview())||null}catch{return null}},[]);return{gameState:t,stats:r,comboFlash:i,isRunning:a,getDropPreview:S}}function cS({onClose:e}){const{gameState:t,stats:n,comboFlash:r,getDropPreview:s}=lS(!0),i=x.useMemo(()=>s(),[t,s]);if(!t)return l.jsx("div",{className:"h-screen bg-gradient-to-b from-slate-950 via-violet-950 to-slate-950 flex items-center justify-center overflow-hidden",children:l.jsx("p",{className:"text-white/50 animate-pulse",children:"Preparando IA Expert..."})});const o=t.score;return l.jsxs("div",{className:"h-screen bg-gradient-to-b from-slate-950 via-violet-950 to-slate-950 flex flex-col overflow-hidden select-none",children:[l.jsx("div",{className:"absolute inset-0 pointer-events-none overflow-hidden",children:l.jsx("div",{className:"absolute top-1/3 left-1/2 -translate-x-1/2 w-[500px] h-[500px] bg-cyan-600/10 rounded-full blur-[120px]"})}),l.jsxs("div",{className:"flex items-center justify-between px-3 py-1.5 bg-black/30 backdrop-blur-sm border-b border-white/10 shrink-0 relative z-10",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:e,className:"bg-white/15 hover:bg-white/25 text-white p-1.5 rounded-lg transition-colors",children:l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"})})}),l.jsx("span",{className:"text-sm font-bold text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-400",children:" Cat Tetris AI"})]}),l.jsxs("div",{className:`flex items-center gap-3 text-xs px-3 py-1 rounded-full transition-colors duration-300 ${r?"bg-cyan-500/30 text-cyan-300":"text-white/60"}`,children:[l.jsxs("span",{className:"font-bold",children:[n.lines," linhas"]}),l.jsxs("span",{children:["T:",n.tetrises]}),l.jsxs("span",{children:["C:",n.combos]}),l.jsxs("span",{children:["Max:",n.maxCombo]})]}),l.jsxs("div",{className:"text-xs text-white/50",children:[l.jsx("span",{className:"text-yellow-400 font-bold",children:((o==null?void 0:o.points)||0).toLocaleString()}),l.jsxs("span",{className:"ml-2",children:["Nv.",(o==null?void 0:o.level)||1]})]})]}),l.jsx(xe,{children:r&&l.jsx(E.div,{initial:{opacity:0,scale:.7,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:1.2,y:-20},transition:{duration:.4,ease:"easeOut"},className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-50 pointer-events-none",children:l.jsx("div",{className:"text-5xl font-black text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 via-blue-400 to-yellow-300 drop-shadow-[0_0_30px_rgba(34,211,238,0.7)]",children:"COMBO!"})})}),l.jsx("div",{className:"flex-1 flex items-center justify-center overflow-hidden p-2 relative z-10",children:l.jsxs("div",{className:"flex gap-2 justify-center items-start",children:[l.jsx(zn,{heldPiece:t.heldPiece,canHold:t.canHold}),l.jsx(pn,{board:t.board,currentPiece:t.currentPiece,dropPreview:i,gameOver:t.gameOver}),l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx(Gn,{pieces:t.nextPieces||[]}),l.jsx(Bn,{score:(o==null?void 0:o.points)||0,level:(o==null?void 0:o.level)||1,lines:(o==null?void 0:o.lines)||0,combo:(o==null?void 0:o.combo)||0})]})]})})]})}const kr=10,Qc=20,xh=["I","O","T","S","Z","J","L"],pr={I:"#00f5ff",O:"#ffff00",T:"#a000f0",S:"#00f000",Z:"#f00000",J:"#0000f0",L:"#ff7f00",G:"#888888"},uS=[{id:"tspin-double",name:"T-Spin Double",emoji:"",desc:"Setup clssico de T-Spin Double",board:Yn(["..........","..........","..........","..........","..........","..........","..........","..........","..........","..........","..........","..........","..........","..........","..........","..........","..........","..........","GGG..GGGGG","GG..GGGGGG"]),queue:["T"],hint:"Rotacione o T para encaixar no buraco e faa um T-Spin Double!"},{id:"tspin-triple",name:"T-Spin Triple",emoji:"",desc:"Setup avanado de T-Spin Triple",board:Yn(["..........","..........","..........","..........","..........","..........","..........","..........","..........","..........","..........","..........","..........","..........","..........","..........","..........","GGG..GGGGG","GG..GGGGGG","GGG.GGGGGG"]),queue:["T"],hint:"Encaixe o T girando duas vezes para fazer um T-Spin Triple!"},{id:"tetris-well",name:"Tetris (4 linhas)",emoji:"",desc:"Pratique Tetris com poo na direita",board:Yn(["..........","..........","..........","..........","..........","..........","..........","..........","..........","..........","..........","..........","..........","..........","..........","..........","GGGGGGGGG.","GGGGGGGGG.","GGGGGGGGG.","GGGGGGGGG."]),queue:["I"],hint:"Solte a pea I no poo da direita para limpar 4 linhas!"},{id:"combo-4",name:"Combo x4",emoji:"",desc:"Pratique combos consecutivos",board:Yn(["..........","..........","..........","..........","..........","..........","..........","..........","..........","..........","..........","..........","..........","..........","..........","..........","GGGGG.GGGG","GGGGG.GGGG","GGGGG.GGGG","GGGGG.GGGG"]),queue:["I","I","I","I"],hint:"Solte as peas I uma a uma na coluna vazia para fazer combo!"},{id:"perfect-clear",name:"Perfect Clear",emoji:"",desc:"Tente limpar todo o tabuleiro",board:Yn(["..........","..........","..........","..........","..........","..........","..........","..........","..........","..........","..........","..........","..........","..........","..........","..........","..........","..........","GGGG..GGGG","GGGGGGGGGG"]),queue:["O","I"],hint:"Coloque o O no buraco e depois use I para limpar tudo!"},{id:"tspin-mini",name:"T-Spin Mini",emoji:"",desc:"T-Spin Mini setup bsico",board:Yn(["..........","..........","..........","..........","..........","..........","..........","..........","..........","..........","..........","..........","..........","..........","..........","..........","..........","..........","..........","GGG.GGGGGG"]),queue:["T"],hint:"Gire o T para encaixar no espao e limpar a linha!"},{id:"empty",name:"Tela Limpa",emoji:"",desc:"Comece do zero e crie seu setup",board:null,queue:[],hint:"Use o editor para montar o tabuleiro que quiser!"}];function Yn(e){const t=[];for(let n=0;n<Qc;n++){const r=e[n]||"..........";t.push(Array.from(r).map(s=>s==="."||s===" "?null:{type:"G",color:pr[s]||"#888888",emoji:""}))}return t}function Pa(){return Array(Qc).fill(null).map(()=>Array(kr).fill(null))}function dS({onExit:e}){var J,G,q,T,F,V,D,K,Te,je;const[t,n]=x.useState("edit"),[r,s]=x.useState(Pa),[i,o]=x.useState([]),[a,c]=x.useState("G"),[u,h]=x.useState(!0),[d,f]=x.useState(""),[y,v]=x.useState(null),[w,S]=x.useState(null),p=x.useRef(null),m=x.useRef(null),g=x.useRef(0),b=x.useCallback(L=>{s(L.board?L.board.map(M=>[...M]):Pa()),o([...L.queue]),f(L.hint||""),v(L.id),h(!1)},[]),j=x.useCallback((L,M)=>{t==="edit"&&s(O=>{const U=O.map(W=>[...W]);return U[M][L]?U[M][L]=null:U[M][L]={type:a,color:pr[a],emoji:""},U})},[t,a]),k=x.useCallback((L,M)=>{t==="edit"&&s(O=>{const U=O.map(W=>[...W]);for(let W=0;W<kr;W++)W===M?U[L][W]=null:U[L][W]={type:"G",color:pr.G,emoji:""};return U})},[t]),C=x.useCallback(L=>{t==="edit"&&s(M=>{const O=M.map(U=>[...U]);for(let U=0;U<kr;U++)O[L][U]=null;return O})},[t]),P=x.useCallback(L=>{o(M=>[...M,L])},[]),N=x.useCallback(L=>{o(M=>M.filter((O,U)=>U!==L))},[]),A=x.useCallback(()=>o([]),[]),H=x.useCallback(()=>{const L=new Hn(new Un,new $n,null,new gn);L.initializeGame(),L.isPlaying=!0;for(let M=0;M<Qc;M++)for(let O=0;O<kr;O++)r[M][O]&&L.board.setCell(O,M,r[M][O]);if(i.length>0){const M=O=>{const U=Lt[O],W=O==="I"?{x:3,y:-2}:{x:3,y:0};return new kt(O,U.shape,U.color,U.emoji,W,!1,0)};for(L.currentPiece=M(i[0]),L.nextPieces=i.slice(1).map(M);L.nextPieces.length<3;)L.nextPieces.push(L.pieceFactory.createRandomPiece())}L._markDirty(),p.current=L,S(L.getGameState()),n("play"),g.current=0},[r,i]),Y=x.useCallback(()=>{m.current&&cancelAnimationFrame(m.current),p.current=null,S(null),n("edit"),g.current=0},[]),Q=x.useCallback(()=>{m.current&&cancelAnimationFrame(m.current),g.current=0,H()},[H]);x.useEffect(()=>{if(t!=="play")return;const L=M=>{g.current||(g.current=M);const O=M-g.current;g.current=M;const U=p.current;U&&(!U.gameOver&&!U.isPaused&&U.updateGame(O),U.isDirty&&(S(U.getGameState()),U.clearDirty()),m.current=requestAnimationFrame(L))};return m.current=requestAnimationFrame(L),()=>{m.current&&cancelAnimationFrame(m.current)}},[t]),x.useEffect(()=>{if(t!=="play")return;const L=M=>{const O=p.current;if(!(!O||O.gameOver))switch(M.key){case"ArrowLeft":M.preventDefault(),O.movePiece("left");break;case"ArrowRight":M.preventDefault(),O.movePiece("right");break;case"ArrowDown":M.preventDefault(),O.movePiece("down");break;case"ArrowUp":M.preventDefault(),O.rotatePiece();break;case"z":case"Z":O.rotatePiece("left");break;case"c":case"C":case"Shift":O.holdPiece();break;case" ":M.preventDefault(),O.hardDrop();break;case"r":case"R":Q();break}};return window.addEventListener("keydown",L),()=>window.removeEventListener("keydown",L)},[t,Q]);const Z=ce.useMemo(()=>{var L;if(t!=="play"||!(w!=null&&w.currentPiece)||w!=null&&w.gameOver)return null;try{return(L=p.current)==null?void 0:L.getDropPreview()}catch{return null}},[t,(G=(J=w==null?void 0:w.currentPiece)==null?void 0:J.position)==null?void 0:G.x,(T=(q=w==null?void 0:w.currentPiece)==null?void 0:q.position)==null?void 0:T.y,(F=w==null?void 0:w.currentPiece)==null?void 0:F.type,(V=w==null?void 0:w.currentPiece)==null?void 0:V.rotationState]);return u?l.jsxs("div",{className:"h-screen bg-gradient-to-b from-slate-900 via-indigo-950 to-slate-900 flex flex-col items-center p-4 overflow-auto",children:[l.jsxs("div",{className:"flex justify-between items-center w-full max-w-lg mb-4",children:[l.jsx("h1",{className:"text-2xl font-bold text-white",children:" Modo Criador"}),l.jsx("button",{onClick:e,className:"bg-red-600 hover:bg-red-700 text-white px-3 py-1.5 rounded-lg text-sm font-bold",children:" Voltar"})]}),l.jsx("p",{className:"text-white/60 text-sm mb-4 text-center max-w-md",children:"Escolha um template para praticar ou comece do zero e crie seu prprio setup!"}),l.jsx("div",{className:"grid grid-cols-2 gap-3 w-full max-w-lg",children:uS.map(L=>l.jsxs(E.button,{whileHover:{scale:1.03},whileTap:{scale:.97},onClick:()=>b(L),className:"flex flex-col items-center p-4 rounded-xl bg-white/[0.06] hover:bg-white/[0.12] border border-white/[0.08] hover:border-white/[0.2] transition-all",children:[l.jsx("span",{className:"text-3xl mb-2",children:L.emoji}),l.jsx("span",{className:"text-white font-bold text-sm",children:L.name}),l.jsx("span",{className:"text-white/40 text-xs mt-1 text-center",children:L.desc})]},L.id))})]}):t==="play"?l.jsxs("div",{className:"h-screen bg-gradient-to-b from-slate-900 via-indigo-950 to-slate-900 flex flex-col items-center p-2 overflow-hidden",children:[l.jsxs("div",{className:"flex justify-between items-center w-full max-w-xl mb-2",children:[l.jsx("h1",{className:"text-lg font-bold text-white",children:" Criador  Jogando"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:Q,className:"bg-yellow-600 hover:bg-yellow-700 text-white px-3 py-1 rounded-lg text-sm font-bold",children:" Replay (R)"}),l.jsx("button",{onClick:Y,className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded-lg text-sm font-bold",children:" Editar"}),l.jsx("button",{onClick:e,className:"bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded-lg text-sm font-bold",children:" Sair"})]})]}),d&&l.jsx("div",{className:"bg-yellow-500/20 border border-yellow-500/40 rounded-lg px-4 py-2 mb-2 max-w-xl",children:l.jsxs("p",{className:"text-yellow-200 text-sm text-center",children:[" ",d]})}),w&&l.jsxs("div",{className:"flex gap-3 items-start justify-center",children:[l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx(zn,{heldPiece:w.heldPiece,canHold:w.canHold}),l.jsxs("div",{className:"text-white/50 text-[10px] leading-tight",children:[" mover",l.jsx("br",{})," girar",l.jsx("br",{}),"C segurar",l.jsx("br",{}),"Espao drop",l.jsx("br",{}),"R replay"]})]}),l.jsx(pn,{board:w.board,currentPiece:w.currentPiece,dropPreview:Z,gameOver:w.gameOver}),l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx(Gn,{pieces:w.nextPieces||[]}),l.jsx(Bn,{score:((D=w.score)==null?void 0:D.points)||0,level:((K=w.score)==null?void 0:K.level)||1,lines:((Te=w.score)==null?void 0:Te.lines)||0,combo:((je=w.score)==null?void 0:je.combo)||0})]})]}),(w==null?void 0:w.gameOver)&&l.jsxs("div",{className:"mt-4 flex gap-3",children:[l.jsx("button",{onClick:Q,className:"bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg font-bold text-lg",children:" Tentar Novamente"}),l.jsx("button",{onClick:Y,className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-bold text-lg",children:" Voltar ao Editor"})]})]}):l.jsxs("div",{className:"h-screen bg-gradient-to-b from-slate-900 via-indigo-950 to-slate-900 flex flex-col items-center p-3 overflow-auto",children:[l.jsxs("div",{className:"flex justify-between items-center w-full max-w-2xl mb-3",children:[l.jsx("h1",{className:"text-xl font-bold text-white",children:" Editor de Setup"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>h(!0),className:"bg-purple-600 hover:bg-purple-700 text-white px-3 py-1 rounded-lg text-sm font-bold",children:" Templates"}),l.jsx("button",{onClick:e,className:"bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded-lg text-sm font-bold",children:" Sair"})]})]}),l.jsxs("div",{className:"flex gap-4 items-start justify-center flex-wrap max-w-2xl",children:[l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx("div",{className:"text-white/60 text-xs font-semibold mb-1",children:"TABULEIRO (clique para editar)"}),l.jsx(hS,{board:r,onToggle:j,onFillRow:k,onClearRow:C}),l.jsxs("div",{className:"flex gap-1 items-center mt-1",children:[l.jsx("span",{className:"text-white/50 text-xs mr-1",children:"Cor:"}),xh.map(L=>l.jsx("button",{onClick:()=>c(L),className:`w-6 h-6 rounded border-2 transition-all ${a===L?"border-white scale-110":"border-white/20"}`,style:{backgroundColor:pr[L]},title:L},L)),l.jsx("button",{onClick:()=>c("G"),className:`w-6 h-6 rounded border-2 transition-all ${a==="G"?"border-white scale-110":"border-white/20"}`,style:{backgroundColor:pr.G},title:"Cinza"})]}),l.jsx("div",{className:"flex gap-2 mt-2",children:l.jsx("button",{onClick:()=>s(Pa()),className:"bg-red-700/60 hover:bg-red-700 text-white px-3 py-1 rounded text-xs font-semibold",children:"Limpar Tudo"})})]}),l.jsxs("div",{className:"flex flex-col gap-3 min-w-[160px]",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-white/60 text-xs font-semibold mb-2",children:"FILA DE PEAS"}),l.jsx("div",{className:"flex flex-wrap gap-1 mb-2",children:xh.map(L=>l.jsx("button",{onClick:()=>P(L),className:"flex items-center justify-center w-9 h-9 rounded-lg bg-white/10 hover:bg-white/20 border border-white/10 transition-all",title:`Adicionar ${L}`,children:l.jsx(yh,{type:L})},L))}),l.jsxs("div",{className:"flex flex-col gap-1 min-h-[60px] bg-black/30 rounded-lg p-2",children:[i.length===0?l.jsxs("span",{className:"text-white/30 text-xs text-center py-2",children:["Clique nas peas acima para montar a fila",l.jsx("br",{}),"(vazio = fila aleatria)"]}):l.jsx("div",{className:"flex flex-wrap gap-1",children:i.map((L,M)=>l.jsxs("button",{onClick:()=>N(M),className:"flex items-center justify-center w-8 h-8 rounded bg-white/10 hover:bg-red-500/30 border border-white/10 transition-all group relative",title:"Clique para remover",children:[l.jsx(yh,{type:L,size:10}),l.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-[8px] rounded-full w-3 h-3 flex items-center justify-center opacity-0 group-hover:opacity-100",children:""})]},M))}),i.length>0&&l.jsx("button",{onClick:A,className:"text-red-400 text-[10px] mt-1 hover:text-red-300",children:"Limpar fila"})]})]}),l.jsx("button",{onClick:H,className:"w-full py-3 rounded-xl bg-gradient-to-r from-emerald-500 to-green-500 hover:from-emerald-400 hover:to-green-400 text-white font-bold text-lg shadow-lg shadow-emerald-500/25 transition-all active:scale-95",children:" Jogar"}),d&&l.jsx("div",{className:"bg-yellow-500/10 border border-yellow-500/30 rounded-lg px-3 py-2",children:l.jsxs("p",{className:"text-yellow-200 text-xs",children:[" ",d]})})]})]})]})}function hS({board:e,onToggle:t,onFillRow:n,onClearRow:r}){const[s,i]=x.useState(!1),[o,a]=x.useState(null),c=22,u=(f,y)=>{i(!0);const v=!e[y][f];a(v?"place":"erase"),t(f,y)},h=(f,y)=>{if(!s)return;const v=!!e[y][f];o==="place"&&!v&&t(f,y),o==="erase"&&v&&t(f,y)},d=()=>{i(!1),a(null)};return x.useEffect(()=>(window.addEventListener("pointerup",d),()=>window.removeEventListener("pointerup",d)),[]),l.jsx("div",{className:"relative bg-black/50 rounded-lg border border-white/10 select-none",style:{width:c*kr+2,padding:1},onContextMenu:f=>f.preventDefault(),children:e.map((f,y)=>l.jsxs("div",{className:"flex",style:{height:c},children:[f.map((v,w)=>l.jsx("div",{onPointerDown:()=>u(w,y),onPointerEnter:()=>h(w,y),className:"cursor-pointer border border-white/[0.04] hover:border-white/20 transition-colors",style:{width:c,height:c,backgroundColor:v?v.color:"transparent",opacity:v?.85:1}},w)),l.jsx("button",{onClick:()=>{if(f.filter(w=>w).length>0)clearRow(y);else{const w=Math.floor(Math.random()*kr);fillRow(y,w)}},className:"ml-0.5 text-white/20 hover:text-white/60 text-[9px] w-4 flex items-center justify-center",title:f.some(v=>v)?"Limpar linha":"Preencher linha",children:f.some(v=>v)?"":"+"})]},y))})}function yh({type:e,size:t=12}){var a;const n=(a=Lt[e])==null?void 0:a.shape;if(!n)return null;const r=pr[e],i=n.filter(c=>c.some(u=>u)).map(c=>{const u=c.indexOf(1),h=c.lastIndexOf(1);return c.slice(Math.max(0,u),h+1)}),o=Math.max(...i.map(c=>c.length));return l.jsx("div",{className:"flex flex-col items-center",children:i.map((c,u)=>l.jsx("div",{className:"flex",children:Array.from({length:o},(h,d)=>l.jsx("div",{style:{width:t,height:t,backgroundColor:c[d]?r:"transparent",borderRadius:1}},d))},u))})}function c0(){const[e,t]=x.useState([]),[n,r]=x.useState(null),[s,i]=x.useState(!0);x.useEffect(()=>{try{const u=z.resolve("shopService");t(u.getAllThemes()),r(u.getEquippedTheme()),i(!1);const h=f=>{r(f.detail.theme),t(u.getAllThemes())},d=()=>{t(u.getAllThemes())};return window.addEventListener("themeEquipped",h),window.addEventListener("currencyUpdated",d),()=>{window.removeEventListener("themeEquipped",h),window.removeEventListener("currencyUpdated",d)}}catch{i(!1)}},[]);const o=x.useCallback(u=>{try{const h=z.resolve("shopService"),d=h.purchaseTheme(u);return d.success&&(t(h.getAllThemes()),window.dispatchEvent(new Event("currencyUpdated"))),d}catch(h){return{success:!1,error:h.message}}},[]),a=x.useCallback(u=>{try{const h=z.resolve("shopService"),d=h.equipTheme(u);return d.success&&(r(d.theme),t(h.getAllThemes())),d}catch(h){return{success:!1,error:h.message}}},[]),c=x.useCallback(()=>{try{return z.resolve("shopService").getStats()}catch{return null}},[]);return{themes:e,equippedTheme:n,loading:s,purchaseTheme:o,equipTheme:a,getStats:c}}function fS({onClose:e}){var y,v;const{themes:t,equippedTheme:n,loading:r,purchaseTheme:s,equipTheme:i,getStats:o}=c0(),{currency:a}=i0(),[c,u]=x.useState(null),h=o();if(r)return l.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",children:l.jsx("div",{className:"text-white text-lg",children:"Carregando loja..."})});if(!t||t.length===0)return l.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-red-900/90 text-white p-6 rounded-lg",children:[l.jsx("p",{className:"text-xl",children:" Erro ao carregar temas"}),l.jsx("button",{onClick:e,className:"mt-4 bg-white text-black px-4 py-2 rounded",children:"Fechar"})]})});const d=w=>{const S=s(w);S.success?mr(` ${S.theme.name} comprado com sucesso!`,"success"):mr(` ${S.error}`,"error")},f=w=>{const S=i(w);S.success?mr(` ${S.theme.name} equipado!`,"success"):mr(` ${S.error}`,"error")};return r?l.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",children:l.jsx("div",{className:"text-white text-xl",children:"Carregando loja..."})}):l.jsx(E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:e,children:l.jsxs(E.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},className:"bg-gradient-to-br from-pink-900/95 to-purple-900/95 rounded-2xl p-6 max-w-6xl w-full max-h-[90vh] overflow-y-auto border-2 border-white/20 shadow-2xl",onClick:w=>w.stopPropagation(),children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-3xl font-bold text-white flex items-center gap-2",children:" Loja de Temas"}),l.jsx("p",{className:"text-white/60 text-sm mt-1",children:"Personalize suas peas de Tetris"})]}),l.jsx("button",{onClick:e,className:"text-white/60 hover:text-white text-2xl transition-colors",children:""})]}),l.jsx("div",{className:"bg-black/30 rounded-lg p-4 mb-6",children:l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-2xl font-bold text-yellow-400 flex items-center justify-center gap-1",children:[" ",((y=a==null?void 0:a.fish)==null?void 0:y.toLocaleString())||0]}),l.jsx("div",{className:"text-white/60 text-sm",children:"Seus Peixes"})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-2xl font-bold text-white",children:[h==null?void 0:h.ownedThemes,"/",h==null?void 0:h.totalThemes]}),l.jsx("div",{className:"text-white/60 text-sm",children:"Temas Desbloqueados"})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-2xl font-bold text-green-400",children:[Math.floor((h==null?void 0:h.ownedThemes)/(h==null?void 0:h.totalThemes)*100),"%"]}),l.jsx("div",{className:"text-white/60 text-sm",children:"Coleo"})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-2xl font-bold text-purple-400 flex items-center justify-center gap-1",children:[" ",((v=h==null?void 0:h.totalSpent)==null?void 0:v.toLocaleString())||0]}),l.jsx("div",{className:"text-white/60 text-sm",children:"Gasto Total"})]})]})}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map((w,S)=>{const p=!w.owned&&(a==null?void 0:a.fish)>=w.price;return l.jsxs(E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:S*.05},className:`bg-black/40 rounded-lg p-4 border-2 relative ${w.equipped?"border-green-500 shadow-lg shadow-green-500/30":w.owned?"border-white/20":"border-white/10"}`,children:[w.equipped&&l.jsx("div",{className:"absolute top-2 right-2 bg-green-600 text-white text-xs px-2 py-1 rounded-full font-bold",children:" Equipado"}),w.premium&&l.jsx("div",{className:"absolute top-2 left-2 bg-gradient-to-r from-yellow-400 to-orange-500 text-white text-xs px-2 py-1 rounded-full font-bold",children:" Premium"}),l.jsxs("div",{className:"mb-4",children:[l.jsx("h3",{className:"text-white font-bold text-lg mb-1",children:w.name}),l.jsx("p",{className:"text-white/60 text-sm",children:w.description})]}),l.jsx("div",{className:"bg-black/30 rounded-lg p-3 mb-4",children:l.jsx("div",{className:"flex justify-center gap-2 flex-wrap",children:Object.entries(w.pieces).map(([m,g])=>l.jsx("div",{className:"w-12 h-12 rounded flex items-center justify-center text-2xl border border-white/10",style:{backgroundColor:g.color},children:g.emoji},m))})}),l.jsxs("div",{className:"flex gap-2",children:[w.owned?w.equipped?l.jsx("button",{disabled:!0,className:"flex-1 bg-green-600 text-white py-2 px-4 rounded-lg font-bold cursor-default",children:"Em Uso"}):l.jsx("button",{onClick:()=>f(w.id),className:"flex-1 bg-blue-600 hover:bg-blue-500 text-white py-2 px-4 rounded-lg font-bold transition-colors",children:"Equipar"}):l.jsx("button",{onClick:()=>d(w.id),disabled:!p,className:`flex-1 py-2 px-4 rounded-lg font-bold transition-colors ${p?"bg-yellow-600 hover:bg-yellow-500 text-white":"bg-gray-600 text-white/40 cursor-not-allowed"}`,children:w.default?"Gratuito":l.jsxs(l.Fragment,{children:[" ",w.price.toLocaleString()]})}),l.jsx("button",{onClick:()=>u(w),className:"bg-purple-600 hover:bg-purple-500 text-white py-2 px-4 rounded-lg font-bold transition-colors",children:""})]})]},w.id)})}),l.jsx(xe,{children:c&&l.jsx(E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/90 flex items-center justify-center z-[60]",onClick:()=>u(null),children:l.jsxs(E.div,{initial:{scale:.8},animate:{scale:1},exit:{scale:.8},className:"bg-gray-900 rounded-xl p-6 max-w-md",onClick:w=>w.stopPropagation(),children:[l.jsx("h3",{className:"text-white font-bold text-2xl mb-4",children:c.name}),l.jsx("div",{className:"grid grid-cols-4 gap-3 mb-4",children:Object.entries(c.pieces).map(([w,S])=>l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"w-16 h-16 rounded-lg flex items-center justify-center text-3xl mb-2 border-2 border-white/20",style:{backgroundColor:S.color},children:S.emoji}),l.jsx("div",{className:"text-white/60 text-xs",children:w})]},w))}),l.jsx("button",{onClick:()=>u(null),className:"w-full bg-purple-600 hover:bg-purple-500 text-white py-2 rounded-lg font-bold",children:"Fechar"})]})})})]})})}function u0(){const[e,t]=x.useState([]),[n,r]=x.useState(null),[s,i]=x.useState(null),[o,a]=x.useState(!0);x.useEffect(()=>{try{const d=z.resolve("gameModesService");t(d.getAllModes()),r(d.getCurrentMode()),i(d.getAllStats()),a(!1)}catch{a(!1)}},[]);const c=x.useCallback(d=>{try{const f=z.resolve("gameModesService"),y=f.setMode(d);return y&&(r(f.getCurrentMode()),window.dispatchEvent(new CustomEvent("gameModeChanged",{detail:{mode:f.getCurrentMode()}}))),y}catch{return!1}},[]),u=x.useCallback(d=>{try{return z.resolve("gameModesService").getModeStats(d)}catch{return null}},[]),h=x.useCallback((d,f)=>{try{const y=z.resolve("gameModesService");y.updateStats(d,f),i(y.getAllStats())}catch{}},[]);return{modes:e,currentMode:n,modeStats:s,loading:o,selectMode:c,getModeStats:u,updateStats:h}}function mS({onClose:e,onStartGame:t}){const{modes:n,currentMode:r,modeStats:s,loading:i,selectMode:o}=u0(),a=u=>{o(u),setTimeout(()=>{t(),e()},300)},c=u=>{const h=Math.floor(u/60),d=u%60;return`${h}:${d.toString().padStart(2,"0")}`};return i?l.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",children:l.jsx("div",{className:"text-white text-xl",children:"Carregando modos..."})}):!n||n.length===0?l.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-red-900/90 text-white p-6 rounded-lg",children:[l.jsx("p",{className:"text-xl",children:" Erro ao carregar modos"}),l.jsx("button",{onClick:e,className:"mt-4 bg-white text-black px-4 py-2 rounded",children:"Fechar"})]})}):l.jsx(E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:e,children:l.jsxs(E.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},className:"bg-gradient-to-br from-blue-900/95 to-indigo-900/95 rounded-2xl p-6 max-w-4xl w-full max-h-[90vh] overflow-y-auto border-2 border-white/20 shadow-2xl",onClick:u=>u.stopPropagation(),children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-3xl font-bold text-white flex items-center gap-2",children:" Modos de Jogo"}),l.jsx("p",{className:"text-white/60 text-sm mt-1",children:"Escolha seu desafio"})]}),l.jsx("button",{onClick:e,className:"text-white/60 hover:text-white text-2xl transition-colors",children:""})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:n.map((u,h)=>{const d=s[u.id],f=(r==null?void 0:r.id)===u.id;return l.jsxs(E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:h*.1},className:`bg-black/40 rounded-lg p-5 border-2 cursor-pointer transition-all hover:scale-105 ${f?"border-green-500 shadow-lg shadow-green-500/30":"border-white/10 hover:border-white/30"}`,onClick:()=>a(u.id),children:[f&&l.jsx("div",{className:"absolute top-3 right-3 bg-green-600 text-white text-xs px-2 py-1 rounded-full font-bold",children:" Selecionado"}),l.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[l.jsx("div",{className:"text-5xl",children:u.icon}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"text-white font-bold text-xl",children:u.name}),l.jsx("p",{className:"text-white/60 text-sm",children:u.description})]})]}),l.jsx("div",{className:"bg-black/30 rounded-lg p-3 mb-3",children:l.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[u.rules.lineGoal&&l.jsxs("div",{className:"text-white/80",children:[" Meta: ",u.rules.lineGoal," linhas"]}),u.rules.timeLimit&&l.jsxs("div",{className:"text-white/80",children:[" Tempo: ",c(u.rules.timeLimit)]}),u.rules.gameOver!==void 0&&l.jsx("div",{className:"text-white/80",children:u.rules.gameOver?" Game Over":" Sem Game Over"}),u.rules.speedIncrease!==void 0&&l.jsx("div",{className:"text-white/80",children:u.rules.speedIncrease?" Velocidade aumenta":" Velocidade fixa"}),u.rules.startLevel&&l.jsxs("div",{className:"text-white/80",children:[" Incio: Nvel ",u.rules.startLevel]}),u.rules.relaxed&&l.jsx("div",{className:"text-white/80",children:" Modo relaxado"})]})}),d&&d.gamesPlayed>0&&l.jsxs("div",{className:"bg-black/30 rounded-lg p-3",children:[l.jsx("div",{className:"text-white/60 text-xs mb-2",children:"Seus recordes:"}),l.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-yellow-400 font-bold",children:d.bestScore.toLocaleString()}),l.jsx("div",{className:"text-white/40 text-xs",children:"Melhor Pontuao"})]}),u.rules.lineGoal&&d.bestTime>0&&l.jsxs("div",{children:[l.jsx("div",{className:"text-green-400 font-bold",children:c(d.bestTime)}),l.jsx("div",{className:"text-white/40 text-xs",children:"Melhor Tempo"})]}),!u.rules.lineGoal&&l.jsxs("div",{children:[l.jsx("div",{className:"text-blue-400 font-bold",children:d.bestLines}),l.jsx("div",{className:"text-white/40 text-xs",children:"Mais Linhas"})]})]}),l.jsxs("div",{className:"text-white/40 text-xs mt-2",children:[d.gamesPlayed," partidas jogadas"]})]}),(!d||d.gamesPlayed===0)&&l.jsx("div",{className:"bg-black/30 rounded-lg p-3 text-center",children:l.jsx("div",{className:"text-white/40 text-sm",children:" Nenhum recorde ainda"})}),l.jsx(E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"w-full mt-3 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-500 hover:to-emerald-500 text-white font-bold py-3 rounded-lg transition-colors",children:" Jogar"})]},u.id)})})]})})}function pS(){const[e,t]=x.useState(null),[n,r]=x.useState([]),[s,i]=x.useState(null),[o,a]=x.useState(null);x.useEffect(()=>{try{const w=z.resolve("multiplayerService");a(w.getStats())}catch{}},[]);const c=x.useCallback((w,S)=>{try{const p=z.resolve("multiplayerService"),m=p.startLocalMatch(w,S);return t(m.mode),r(m.players),i(p.getMatchState()),m}catch{return null}},[]),u=x.useCallback((w,S)=>{try{const p=z.resolve("multiplayerService"),m=p.startAIMatch(w,S);return t(m.mode),r(m.players),i(p.getMatchState()),m}catch{return null}},[]),h=x.useCallback((w,S)=>{try{const p=z.resolve("multiplayerService"),m=p.startAIvsAIMatch(w,S);return t(m.mode),r(m.players),i(p.getMatchState()),m}catch{return null}},[]),d=x.useCallback((w,S)=>{try{const p=z.resolve("multiplayerService");p.updatePlayerState(w,S);const m=p.getMatchState();return i(m),r(m.players),m}catch{return null}},[]),f=x.useCallback(()=>{try{const w=z.resolve("multiplayerService"),S=w.endMatch();return t(null),r([]),i(null),a(w.getStats()),S}catch{return null}},[]),y=x.useCallback(()=>{try{return z.resolve("multiplayerService").getAvailableModes()}catch{return[]}},[]),v=x.useCallback(()=>{try{const w=z.resolve("multiplayerService");a(w.getStats())}catch{}},[]);return{currentMode:e,players:n,matchState:s,stats:o,startLocalMatch:c,startAIMatch:u,startAIvsAIMatch:h,updatePlayerState:d,endMatch:f,getAvailableModes:y,refreshStats:v}}function gS(){const[e,t]=x.useState("medium"),[n,r]=x.useState(null);x.useEffect(()=>{try{const a=z.resolve("aiOpponentService");a.setDifficulty(e),r(a)}catch{}},[e]);const s=x.useCallback(a=>{if(!n)return null;try{return n.decideNextMove(a)}catch{return null}},[n]),i=x.useCallback(a=>{t(a),n&&n.setDifficulty(a)},[n]),o=x.useCallback(()=>n?n.getDifficulties():[],[n]);return{difficulty:e,changeDifficulty:i,getNextMove:s,getDifficulties:o}}function vS({onClose:e,onStartMatch:t}){const{getAvailableModes:n,stats:r,startLocalMatch:s,startAIMatch:i,startAIvsAIMatch:o}=pS(),{getDifficulties:a}=gS(),[c,u]=x.useState(null),[h,d]=x.useState("Jogador 1");x.useState("Jogador 2");const[f,y]=x.useState("medium"),[v,w]=x.useState("expert"),[S,p]=x.useState("expert"),m=n(),g=a();if(!m||m.length===0)return l.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-red-900/90 text-white p-6 rounded-lg",children:[l.jsx("p",{className:"text-xl",children:" Erro ao carregar multiplayer"}),l.jsx("button",{onClick:e,className:"mt-4 bg-white text-black px-4 py-2 rounded",children:"Fechar"})]})});const b=k=>{k.disabled||u(k)},j=()=>{let k=null;c.id==="vs-ai"?k=i(h,f):c.id==="ai-vs-ai"&&(k=o(v,S)),k&&t&&t(k)};return l.jsx(E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:e,children:l.jsxs(E.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},className:"bg-gradient-to-br from-purple-900/95 to-indigo-900/95 rounded-2xl p-6 max-w-4xl w-full max-h-[90vh] overflow-y-auto border-2 border-white/20 shadow-2xl",onClick:k=>k.stopPropagation(),children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-3xl font-bold text-white flex items-center gap-2",children:" Multiplayer"}),l.jsx("p",{className:"text-white/60 text-sm mt-1",children:"Desafie amigos ou enfrente a IA"})]}),l.jsx("button",{onClick:e,className:"text-white/60 hover:text-white text-2xl transition-colors",children:""})]}),r&&l.jsxs("div",{className:"bg-black/30 rounded-lg p-4 mb-6 grid grid-cols-3 gap-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-white",children:r.aiMatches}),l.jsx("div",{className:"text-white/60 text-sm",children:"Partidas vs IA"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-green-400",children:r.wins}),l.jsx("div",{className:"text-white/60 text-sm",children:"Vitrias"})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-2xl font-bold text-yellow-400",children:[r.winRate,"%"]}),l.jsx("div",{className:"text-white/60 text-sm",children:"Taxa de Vitria"})]})]}),c?l.jsxs("div",{children:[l.jsx("button",{onClick:()=>u(null),className:"text-white/60 hover:text-white mb-4 flex items-center gap-2",children:" Voltar"}),l.jsxs("div",{className:"bg-black/30 rounded-lg p-6",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[l.jsx("span",{className:"text-5xl",children:c.emoji}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-2xl font-bold text-white",children:c.name}),l.jsx("p",{className:"text-white/60",children:c.description})]})]}),c.id==="vs-ai"&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-white/80 mb-2",children:"Seu Nome:"}),l.jsx("input",{type:"text",value:h,onChange:k=>d(k.target.value),className:"w-full bg-black/30 text-white px-4 py-2 rounded-lg border border-white/20 focus:border-blue-500 focus:outline-none",maxLength:20})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-white/80 mb-2",children:"Dificuldade da IA:"}),l.jsx("div",{className:"grid grid-cols-2 gap-3",children:g.map(k=>l.jsxs("button",{onClick:()=>y(k.id),className:`p-3 rounded-lg border-2 transition-all ${f===k.id?"bg-blue-600 border-blue-400":"bg-black/30 border-white/20 hover:border-white/40"}`,children:[l.jsx("div",{className:"text-2xl mb-1",children:k.emoji}),l.jsx("div",{className:"text-white font-bold",children:k.name}),l.jsx("div",{className:"text-white/60 text-xs",children:k.description})]},k.id))})]})]}),c.id==="ai-vs-ai"&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-white/80 mb-2",children:" IA 1 (Esquerda):"}),l.jsx("div",{className:"grid grid-cols-2 gap-3",children:g.map(k=>l.jsxs("button",{onClick:()=>w(k.id),className:`p-3 rounded-lg border-2 transition-all ${v===k.id?"bg-blue-600 border-blue-400":"bg-black/30 border-white/20 hover:border-white/40"}`,children:[l.jsx("div",{className:"text-2xl mb-1",children:k.emoji}),l.jsx("div",{className:"text-white font-bold",children:k.name}),l.jsx("div",{className:"text-white/60 text-xs",children:k.description})]},k.id))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-white/80 mb-2",children:" IA 2 (Direita):"}),l.jsx("div",{className:"grid grid-cols-2 gap-3",children:g.map(k=>l.jsxs("button",{onClick:()=>p(k.id),className:`p-3 rounded-lg border-2 transition-all ${S===k.id?"bg-red-600 border-red-400":"bg-black/30 border-white/20 hover:border-white/40"}`,children:[l.jsx("div",{className:"text-2xl mb-1",children:k.emoji}),l.jsx("div",{className:"text-white font-bold",children:k.name}),l.jsx("div",{className:"text-white/60 text-xs",children:k.description})]},k.id))})]})]}),l.jsx(E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:j,className:"w-full mt-6 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-400 hover:to-emerald-500 text-white font-bold py-4 px-6 rounded-lg shadow-lg transition-all",children:" Iniciar Partida"})]})]}):l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:m.map(k=>l.jsxs(E.button,{whileHover:k.disabled?{}:{scale:1.02},whileTap:k.disabled?{}:{scale:.98},onClick:()=>b(k),disabled:k.disabled,className:`p-6 rounded-xl border-2 text-left transition-all ${k.disabled?"bg-gray-800/50 border-gray-700 opacity-50 cursor-not-allowed":"bg-gradient-to-br from-blue-600/30 to-purple-600/30 border-blue-500/50 hover:border-blue-400 cursor-pointer"}`,children:[l.jsx("div",{className:"text-4xl mb-3",children:k.emoji}),l.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:k.name}),l.jsx("p",{className:"text-white/70 text-sm mb-3",children:k.description}),l.jsx("div",{className:"flex items-center gap-2 text-white/50 text-sm",children:l.jsxs("span",{children:[" ",k.players," jogador",k.players>1?"es":""]})}),k.disabled&&l.jsx("div",{className:"mt-3 text-yellow-400 text-xs font-bold",children:" EM BREVE"})]},k.id))})]})})}function xS({onComplete:e}){const[t,n]=x.useState(0),[r,s]=x.useState(!1);x.useEffect(()=>{localStorage.getItem("catTetris_tutorialCompleted")||s(!0)},[]);const i=[{title:" Bem-vindo ao Cat Tetris!",description:"Um Tetris com gatinhos e sistema de progresso viciante!",tips:[" Use as setas para mover as peas"," Seta para cima para rotacionar"," Seta para baixo para drop rpido","C para segurar pea (Hold)"]},{title:" Sistema de Moedas",description:"Ganhe Peixes () completando misses e conquistas!",tips:[" 3 misses dirias (resetam  meia-noite)"," 22 conquistas desbloqueveis"," Use  para comprar temas na loja"," Quanto mais voc joga, mais voc ganha!"]},{title:" Misses Dirias",description:"Complete desafios dirios para ganhar recompensas!",tips:[" Misso Fcil: 100"," Misso Mdia: 200"," Misso Difcil: 400"," Complete todas para celebrao especial!"]},{title:" Loja e Personalizao",description:"Customize suas peas com temas exclusivos!",tips:[" 10 temas diferentes disponveis"," Cristais e Espao so os mais caros"," Cada tema muda os emojis das peas"," Desbloqueie todos com suas moedas!"]},{title:" Ranking Global",description:"Compete com jogadores do mundo todo!",tips:[" Veja sua posio no ranking global"," 4 tipos de ranking: Global, Semanal, Pas, Ao Redor"," Compartilhe seus recordes"," Chegue ao Top 3 para medalha!"]},{title:" Pronto para Jogar!",description:"Agora voc sabe tudo. Divirta-se!",tips:[" Dica: Use a sombra da pea para planejar"," Faa combos para mais pontos"," T-Spins valem MUITO mais"," Modo Zen  perfeito para relaxar"]}],o=()=>{t<i.length-1?n(t+1):c()},a=()=>{c()},c=()=>{localStorage.setItem("catTetris_tutorialCompleted","true"),s(!1),e&&e()};if(!r)return null;const u=i[t],h=t===i.length-1;return l.jsx(E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/90 backdrop-blur-sm flex items-center justify-center z-[100] p-4",children:l.jsxs(E.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-gradient-to-br from-purple-900/95 to-indigo-900/95 rounded-2xl p-8 max-w-lg w-full border-2 border-white/20 shadow-2xl max-h-[90vh] overflow-y-auto",children:[l.jsx("div",{className:"flex gap-2 mb-6",children:i.map((d,f)=>l.jsx("div",{className:`h-2 flex-1 rounded-full transition-colors ${f<=t?"bg-green-500":"bg-white/20"}`},f))}),l.jsx(E.h2,{initial:{y:-20},animate:{y:0},className:"text-3xl font-bold text-white mb-3",children:u.title}),l.jsx(E.p,{initial:{y:-10},animate:{y:0},className:"text-white/80 text-lg mb-6",children:u.description}),l.jsx(E.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},className:"bg-black/30 rounded-lg p-4 mb-6 space-y-2",children:u.tips.map((d,f)=>l.jsxs(E.div,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.3+f*.1},className:"text-white/90 flex items-start gap-2",children:[l.jsx("span",{className:"text-green-400 mt-0.5",children:""}),l.jsx("span",{children:d})]},f))}),l.jsxs("div",{className:"flex gap-3",children:[!h&&l.jsx("button",{onClick:a,className:"flex-1 bg-white/10 hover:bg-white/20 text-white font-bold py-3 px-6 rounded-lg transition-colors",children:"Pular Tutorial"}),l.jsx("button",{onClick:o,className:"flex-1 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-400 hover:to-emerald-500 text-white font-bold py-3 px-6 rounded-lg transition-all shadow-lg",children:h?" Comear a Jogar!":"Prximo "})]}),l.jsxs("div",{className:"text-center mt-4 text-white/40 text-sm",children:["Passo ",t+1," de ",i.length]})]},t)})}function yS(e){const[t,n]=x.useState(null),[r,s]=x.useState(!1),i=x.useRef(null),o=x.useRef(0);x.useEffect(()=>{if(!e){n(null),s(!1),i.current=null,o.current=0;return}const d=new Hn(new Un,new $n,null,new gn);return d.initializeGame(),d.isPlaying=!0,o.current=0,i.current=d,n(d.getGameState()),s(!0),()=>{i.current=null,s(!1)}},[e]);const a=x.useRef(0),c=x.useRef(null);x.useEffect(()=>{if(!i.current||!r)return;a.current=0;const d=f=>{var w;a.current||(a.current=f);const y=f-a.current;a.current=f;const v=i.current;if(v){v.isPlaying&&!v.isPaused&&!v.gameOver&&v.updateGame(y);const S=v.getGameState(),p=((w=S.score)==null?void 0:w.combo)||0;p>o.current&&(o.current=p),n(S)}c.current=requestAnimationFrame(d)};return c.current=requestAnimationFrame(d),()=>{c.current&&cancelAnimationFrame(c.current)}},[r]);const u={movePiece:x.useCallback(d=>{var f;(f=i.current)==null||f.movePiece(d)},[]),rotatePiece:x.useCallback(()=>{var d;(d=i.current)==null||d.rotatePiece()},[]),rotatePieceLeft:x.useCallback(()=>{var d,f;(f=(d=i.current)==null?void 0:d.rotatePieceLeft)==null||f.call(d)},[]),hardDrop:x.useCallback(()=>{var d;(d=i.current)==null||d.hardDrop()},[]),holdPiece:x.useCallback(()=>{var d;(d=i.current)==null||d.holdPiece()},[]),pause:x.useCallback(()=>{var d;(d=i.current)==null||d.pause()},[]),resume:x.useCallback(()=>{var d;(d=i.current)==null||d.resume()},[]),restart:x.useCallback(()=>{i.current&&(i.current.restart(),o.current=0)},[]),getDropPreview:x.useCallback(()=>{var d;try{return((d=i.current)==null?void 0:d.getDropPreview())||null}catch{return null}},[])},h=x.useCallback(()=>{var d,f,y,v,w;return t?{score:((d=t.score)==null?void 0:d.points)||0,level:((f=t.score)==null?void 0:f.level)||1,linesCleared:((y=t.score)==null?void 0:y.lines)||0,currentPiece:t.currentPiece,hasCurrentPiece:!!t.currentPiece,heldPiece:t.heldPiece,hasUsedHold:!!t.heldPiece,currentCombo:((v=t.score)==null?void 0:v.combo)||0,maxCombo:o.current,backToBackActive:t.backToBack||!1,board:t.board,gameOver:t.gameOver,isPlaying:t.isPlaying,isPaused:t.isPaused,tSpins:((w=t.score)==null?void 0:w.tSpins)||0}:null},[t]);return{gameState:t,actions:u,isInitialized:r,getValidationState:h}}const wh={1:{difficulty:"easy",forceHold:!1,comboBoost:!1,label:"Movendo peas..."},2:{difficulty:"easy",forceHold:!0,comboBoost:!1,label:"Usando Hold (C)..."},3:{difficulty:"medium",forceHold:!1,comboBoost:!1,label:"Planejando jogadas..."},4:{difficulty:"medium",forceHold:!1,comboBoost:!0,label:"Buscando combos..."},5:{difficulty:"hard",forceHold:!1,comboBoost:!1,label:"Montando Tetris..."},6:{difficulty:"expert",forceHold:!0,comboBoost:!1,label:"Tentando T-Spins..."},7:{difficulty:"expert",forceHold:!0,comboBoost:!1,label:"Buscando Back-to-Back..."},8:{difficulty:"hard",forceHold:!0,comboBoost:!1,label:"Jogando no mximo..."}};function wS(e,t){const[n,r]=x.useState(null),[s,i]=x.useState(!1),[o,a]=x.useState(!1),[c,u]=x.useState(""),h=x.useRef(null),d=x.useRef(null),f=x.useRef(0),y=x.useRef(null),v=x.useRef(0),w=x.useRef(0),S=x.useRef(0),p=x.useRef(null),m=250,g=25;x.useEffect(()=>{if(!e){r(null),i(!1),a(!1),u(""),h.current=null,d.current=null,w.current=0,S.current=0,y.current&&cancelAnimationFrame(y.current);return}const j=wh[t]||wh[1];p.current=j,u(j.label);const k=new Hn(new Un,new $n,null,new gn);k.initializeGame(),k.isPlaying=!0;const C=new fs;if(C.setDifficulty(j.difficulty),C.thinkingTime=0,j.comboBoost){const P=C._evaluateBoard.bind(C);C._evaluateBoard=(N,A)=>{let H=P(N,A);for(let Y=0;Y<N.length;Y++){const Q=N[Y].filter(Z=>Z!=null).length;Q>=8&&(H+=200),Q>=9&&(H+=500)}return H}}return h.current=k,d.current=C,w.current=0,S.current=0,v.current=0,f.current=0,r(k.getGameState()),i(!0),a(!1),()=>{y.current&&cancelAnimationFrame(y.current),h.current=null,d.current=null}},[e,t]),x.useEffect(()=>{if(!h.current||!s||!e)return;f.current=0,v.current=0;let j=null;const k=C=>{var Y;f.current||(f.current=C);const P=C-f.current;f.current=C;const N=h.current,A=d.current,H=p.current;if(N&&A&&!N.gameOver){N.isPlaying&&!N.isPaused&&N.updateGame(P);const Q=N.getGameState(),Z=(Y=Q.currentPiece)==null?void 0:Y.type;if(j&&Z!==j&&(w.current++,S.current++,w.current>=g)){a(!0),r(Q);return}if(j=Z,v.current+=P,v.current>=m){if(v.current=0,H!=null&&H.forceHold&&S.current>=3&&Q.currentPiece&&Q.canHold!==!1){N.holdPiece(),S.current=0,r(N.getGameState()),y.current=requestAnimationFrame(k);return}const J=A.decideNextMove(Q);if(J)switch(J.action){case"left":N.movePiece("left");break;case"right":N.movePiece("right");break;case"rotate":N.rotatePiece();break;case"down":N.movePiece("down");break;case"drop":N.hardDrop();break;case"hold":N.holdPiece();break}}r(Q)}else if(N!=null&&N.gameOver){a(!0),r(N.getGameState());return}y.current=requestAnimationFrame(k)};return y.current=requestAnimationFrame(k),()=>{y.current&&cancelAnimationFrame(y.current)}},[s,e]);const b=x.useCallback(()=>{var j;try{return((j=h.current)==null?void 0:j.getDropPreview())||null}catch{return null}},[]);return{gameState:n,isInitialized:s,demoComplete:o,statusLabel:c,getDropPreview:b}}function d0(e,t,n=!0){const r=x.useRef(t);r.current=t;const s=x.useRef(e);s.current=e,x.useEffect(()=>{if(!(!e||!n))try{const d=z.resolve("keyboardInputService"),f=()=>{var j;return!((j=r.current)!=null&&j.gameOver)},y=()=>{f()&&s.current.movePiece("left")},v=()=>{f()&&s.current.movePiece("right")},w=()=>{f()&&s.current.movePiece("down")},S=()=>{f()&&s.current.rotatePiece()},p=()=>{var j,k;f()&&((k=(j=s.current).rotatePieceLeft)==null||k.call(j))},m=()=>{f()&&s.current.hardDrop()},g=()=>{f()&&s.current.holdPiece()},b=()=>{var j,k;(j=r.current)!=null&&j.gameOver||((k=r.current)!=null&&k.isPaused?s.current.resume():s.current.pause())};return d.registerHandler("moveLeft",y),d.registerHandler("moveRight",v),d.registerHandler("moveDown",w),d.registerHandler("rotate",S),d.registerHandler("rotateLeft",p),d.registerHandler("hardDrop",m),d.registerHandler("hold",g),d.registerHandler("pause",b),d.startListening(),()=>{d.unregisterHandler("moveLeft",y),d.unregisterHandler("moveRight",v),d.unregisterHandler("moveDown",w),d.unregisterHandler("rotate",S),d.unregisterHandler("rotateLeft",p),d.unregisterHandler("hardDrop",m),d.unregisterHandler("hold",g),d.unregisterHandler("pause",b),d.stopListening()}}catch{return()=>{}}},[n]);const i=x.useCallback((d,f)=>{try{z.resolve("keyboardInputService").setKeyMapping(d,f)}catch{}},[]),o=x.useCallback(()=>{try{return z.resolve("keyboardInputService").getKeyMappings()}catch{return{}}},[]),a=x.useCallback(d=>{try{z.resolve("keyboardInputService").setDAS(d)}catch{}},[]),c=x.useCallback(d=>{try{z.resolve("keyboardInputService").setARR(d)}catch{}},[]),u=x.useCallback(()=>{try{return z.resolve("keyboardInputService").getDAS()}catch{return 133}},[]),h=x.useCallback(()=>{try{return z.resolve("keyboardInputService").getARR()}catch{return 10}},[]);return{customizeKeyMapping:i,getKeyMappings:o,setDAS:a,setARR:c,getDAS:u,getARR:h}}function bS({show:e,onComplete:t}){const[n,r]=x.useState([]);return x.useEffect(()=>{if(!e)return;const s=Array.from({length:50},(o,a)=>({id:a,x:Math.random()*window.innerWidth,y:-20,rotation:Math.random()*360,color:["#FF6B6B","#4ECDC4","#45B7D1","#FFA07A","#98D8C8","#F7DC6F","#BB8FCE","#85C1E2"][Math.floor(Math.random()*8)],size:Math.random()*10+5,delay:Math.random()*.5,duration:Math.random()*2+2,xOffset:(Math.random()-.5)*300}));r(s);const i=setTimeout(()=>{r([]),t&&t()},4e3);return()=>clearTimeout(i)},[e,t]),!e||n.length===0?null:l.jsx("div",{className:"fixed inset-0 pointer-events-none z-50 overflow-hidden",children:n.map(s=>l.jsx(E.div,{initial:{x:s.x,y:s.y,rotate:0,opacity:1},animate:{x:s.x+s.xOffset,y:window.innerHeight+100,rotate:s.rotation+720,opacity:0},transition:{duration:s.duration,delay:s.delay,ease:"easeIn"},style:{position:"absolute",width:s.size,height:s.size,backgroundColor:s.color,borderRadius:"50%"}},s.id))})}function SS({lesson:e,onStartDemo:t,onStartPractice:n}){return l.jsxs(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"max-w-lg mx-auto",children:[l.jsxs("div",{className:"bg-white/[0.06] border border-white/[0.08] rounded-xl p-6 mb-5 text-center",children:[l.jsx("div",{className:"text-4xl mb-3",children:""}),l.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:"Objetivo"}),l.jsx("p",{className:"text-white/70 text-base leading-relaxed",children:e.practice.objective})]}),e.intro&&e.intro.length>0&&l.jsxs("div",{className:"bg-white/[0.04] border border-white/[0.06] rounded-xl p-5 mb-5",children:[l.jsx("h4",{className:"text-sm font-semibold text-white/50 uppercase tracking-wide mb-3",children:"Como funciona"}),l.jsx("div",{className:"space-y-2.5",children:e.intro.map((r,s)=>l.jsxs(E.p,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:s*.08},className:"text-white/70 text-sm leading-relaxed flex items-start gap-2",children:[l.jsxs("span",{className:"text-white/25 font-mono text-xs mt-0.5 flex-shrink-0",children:[s+1,"."]}),l.jsx("span",{children:r})]},s))})]}),e.rewards&&l.jsxs("div",{className:"flex justify-center gap-4 mb-5 text-xs text-white/30",children:[l.jsxs("span",{children:[" ",e.rewards.fishCoins]}),l.jsxs("span",{children:[" ",e.rewards.xp," XP"]})]}),l.jsxs("div",{className:"flex flex-col items-center gap-3",children:[l.jsxs(E.button,{whileHover:{scale:1.03},whileTap:{scale:.97},onClick:t,className:`bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-500 hover:to-indigo-500
                   text-white px-8 py-3 rounded-xl font-bold text-sm shadow-lg shadow-blue-900/30 transition-all
                   flex items-center gap-2`,children:[l.jsx("span",{children:""}),l.jsx("span",{children:"Ver IA Jogar Primeiro"})]}),l.jsx("button",{onClick:n,className:"text-white/30 hover:text-white/50 text-xs transition-all",children:"Ir direto para prtica "})]})]},"intro")}function kS({lesson:e,gameState:t,isInitialized:n,demoComplete:r,dropPreview:s,statusLabel:i,onSkip:o}){var c,u,h,d,f;if(!t||!n)return l.jsx("div",{className:"text-center text-white/40 text-sm py-12",children:"Preparando demonstrao..."});const a=x.useMemo(()=>{var w;if(!e.intro||e.intro.length===0)return null;const y=((w=t.score)==null?void 0:w.lines)||0,v=Math.min(Math.floor(y/2),e.intro.length-1);return e.intro[v]},[e.intro,(c=t.score)==null?void 0:c.lines]);return l.jsxs(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"text-center",children:[l.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-xl p-3 mb-3 max-w-md mx-auto",children:[l.jsxs("div",{className:"flex items-center justify-center gap-2",children:[l.jsx("span",{className:"text-lg",children:""}),l.jsx("p",{className:"text-sm font-semibold text-blue-300",children:"IA jogando  observe como ela faz!"})]}),i&&l.jsx("p",{className:"text-xs text-blue-400/70 mt-1",children:i})]}),a&&l.jsx(E.div,{initial:{opacity:0,y:-5},animate:{opacity:1,y:0},className:"bg-white/[0.04] border border-white/[0.06] rounded-lg p-2.5 mb-3 max-w-md mx-auto",children:l.jsxs("p",{className:"text-xs text-white/60",children:[" ",a]})},a),l.jsxs("div",{className:"flex gap-3 justify-center items-start",children:[l.jsx(zn,{heldPiece:t.heldPiece,canHold:t.canHold}),l.jsx(pn,{board:t.board,currentPiece:t.currentPiece,dropPreview:s,gameOver:t.gameOver}),l.jsxs("div",{className:"flex flex-col gap-3",children:[l.jsx(Gn,{pieces:t.nextPieces||[]}),l.jsx(Bn,{score:((u=t.score)==null?void 0:u.points)||0,level:((h=t.score)==null?void 0:h.level)||1,lines:((d=t.score)==null?void 0:d.lines)||0,combo:((f=t.score)==null?void 0:f.combo)||0})]})]}),l.jsx("div",{className:"mt-4",children:r?l.jsx(E.button,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},whileHover:{scale:1.03},whileTap:{scale:.97},onClick:o,className:`bg-gradient-to-r from-emerald-600 to-green-600 hover:from-emerald-500 hover:to-green-500
                     text-white px-6 py-2.5 rounded-xl font-bold text-sm shadow-lg shadow-emerald-900/30 transition-all`,children:"  Agora  sua vez!"}):l.jsx("button",{onClick:o,className:"text-white/30 hover:text-white/50 text-xs transition-all",children:"Pular demonstrao "})})]},"demo")}function jS({lesson:e,gameState:t,isInitialized:n,practiceState:r,onRestart:s,dropPreview:i}){var o,a,c,u;return!t||!n?l.jsx("div",{className:"text-center text-white/40 text-sm py-12",children:"Carregando..."}):l.jsxs(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"text-center",children:[l.jsxs("div",{className:"bg-white/[0.06] border border-white/[0.06] rounded-xl p-3 mb-3 max-w-md mx-auto",children:[l.jsxs("p",{className:"text-sm font-semibold text-white mb-2",children:[" ",e.practice.objective]}),r.progress>0&&l.jsxs("div",{children:[l.jsx("div",{className:"h-1.5 bg-white/[0.08] rounded-full overflow-hidden",children:l.jsx(E.div,{className:`h-full rounded-full ${r.complete?"bg-emerald-400":"bg-gradient-to-r from-blue-500 to-indigo-500"}`,initial:{width:0},animate:{width:`${Math.min(100,r.progress*100)}%`},transition:{duration:.3}})}),l.jsxs("div",{className:"text-white/30 text-[10px] mt-1",children:[Math.round(r.progress*100),"%"]})]})]}),l.jsxs("div",{className:"flex gap-3 justify-center items-start",children:[l.jsx(zn,{heldPiece:t.heldPiece,canHold:t.canHold}),l.jsx(pn,{board:t.board,currentPiece:t.currentPiece,dropPreview:i,gameOver:t.gameOver}),l.jsxs("div",{className:"flex flex-col gap-3",children:[l.jsx(Gn,{pieces:t.nextPieces||[]}),l.jsx(Bn,{score:((o=t.score)==null?void 0:o.points)||0,level:((a=t.score)==null?void 0:a.level)||1,lines:((c=t.score)==null?void 0:c.lines)||0,combo:((u=t.score)==null?void 0:u.combo)||0})]})]}),l.jsx("div",{className:"mt-3 text-white/20 text-[10px]",children:" Mover   Rotao   Soft Drop  Espao: Hard Drop  C: Hold"}),r.feedback&&!r.complete&&l.jsx(E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"mt-3 bg-white/[0.06] border border-white/[0.08] rounded-lg p-3 max-w-md mx-auto",children:l.jsx("p",{className:"text-sm text-white/70",children:r.feedback})},r.feedback),t.gameOver&&!r.complete&&l.jsxs(E.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"mt-4",children:[l.jsx("p",{className:"text-white/40 text-sm mb-2",children:"Game Over  tente de novo!"}),l.jsx("button",{onClick:s,className:"bg-white/[0.08] hover:bg-white/[0.12] text-white text-sm px-4 py-2 rounded-lg transition-all",children:" Recomear"})]}),r.complete&&l.jsxs(E.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",bounce:.4},className:"mt-4 bg-emerald-500/10 border border-emerald-500/20 rounded-xl p-6 max-w-sm mx-auto",children:[l.jsx("div",{className:"text-4xl mb-2",children:""}),l.jsx("h3",{className:"text-lg font-bold text-white mb-1",children:"Parabns!"}),l.jsx("p",{className:"text-emerald-300/70 text-sm",children:r.feedback})]})]},"practice")}function CS({lesson:e,onComplete:t,onExit:n}){const[r,s]=x.useState("introduction"),[i,o]=x.useState({progress:0,feedback:"",complete:!1}),[a,c]=x.useState(!1),{gameState:u,isInitialized:h,demoComplete:d,statusLabel:f,getDropPreview:y}=wS(r==="demo",e==null?void 0:e.id),v=x.useMemo(()=>r!=="demo"||!h?null:(y==null?void 0:y())||null,[r,h,y,u]),{gameState:w,actions:S,isInitialized:p,getValidationState:m}=yS(r==="practice"?e:null);d0(S,w,r==="practice"&&p);const g=x.useMemo(()=>{var P;return r!=="practice"||!p?null:((P=S.getDropPreview)==null?void 0:P.call(S))||null},[r,p,S,w]);x.useEffect(()=>{var A;if(r!=="practice"||!p||!w)return;const P=m();if(!P||!((A=e.practice)!=null&&A.validate))return;const N=e.practice.validate(P);o(H=>({...H,progress:N.progress||0,feedback:N.feedback||"",complete:N.complete||!1})),N.complete&&!i.complete&&(c(!0),setTimeout(()=>{t(e.id,{score:P.score})},2e3))},[r,p,w,e,m,i.complete,t]);const b=x.useCallback(()=>{s("demo")},[]),j=x.useCallback(()=>{s("practice"),o({progress:0,feedback:"",complete:!1})},[]),k=x.useCallback(()=>{var P;(P=S.restart)==null||P.call(S),o({progress:0,feedback:"",complete:!1})},[S]),C=r==="introduction"?" Introduo":r==="demo"?" Demonstrao":" Prtica";return l.jsxs("div",{className:"fixed inset-0 bg-gradient-to-b from-slate-900 via-indigo-950 to-slate-900 z-50 flex flex-col",children:[l.jsx("div",{className:"bg-black/30 border-b border-white/[0.06] px-4 py-2 flex-shrink-0",children:l.jsxs("div",{className:"flex items-center justify-between max-w-4xl mx-auto",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("span",{className:"text-2xl",children:e.module==="fundamentals"?"":e.module==="intermediate"?"":e.module==="advanced"?"":""}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-bold text-white",children:e.title}),l.jsx("p",{className:"text-white/40 text-xs",children:e.description})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-xs text-white/30 bg-white/[0.06] px-2 py-1 rounded",children:C}),l.jsx("button",{onClick:n,className:"text-white/40 hover:text-white/70 bg-white/[0.06] hover:bg-white/[0.1] rounded-lg px-3 py-1.5 text-sm transition-all",children:" Sair"})]})]})}),l.jsx("div",{className:"flex-1 overflow-auto p-3",children:l.jsx("div",{className:"max-w-4xl w-full mx-auto",children:l.jsxs(xe,{mode:"wait",children:[r==="introduction"&&l.jsx(SS,{lesson:e,onStartDemo:b,onStartPractice:j}),r==="demo"&&l.jsx(kS,{lesson:e,gameState:u,isInitialized:h,demoComplete:d,dropPreview:v,statusLabel:f,onSkip:j}),r==="practice"&&l.jsx(jS,{lesson:e,gameState:w,isInitialized:p,practiceState:i,onRestart:k,dropPreview:g})]})})}),l.jsx(bS,{show:a,onComplete:()=>c(!1)})]})}function PS({tutorialService:e,onClose:t,onLessonComplete:n}){const[r,s]=x.useState(null),[i,o]=x.useState(e.getProgress()),[a,c]=x.useState("fundamentals"),u=e.lessons,h=[{key:"fundamentals",icon:"",name:"Fundamentos",desc:"O bsico do Tetris"},{key:"intermediate",icon:"",name:"Intermedirio",desc:"T-spins e combos"},{key:"advanced",icon:"",name:"Avanado",desc:"Setups e estratgias"},{key:"pro",icon:"",name:"Profissional",desc:"Tcnicas PRO"}],d=u.filter(g=>g.module===a),f=g=>{const b=u.filter(k=>k.module===g).map(k=>k.id);return{done:b.filter(k=>i.completedLessons.includes(k)).length,total:b.length}},y=(g,b)=>{const j=e.completeLesson(g,b);o(e.getProgress()),s(null),n&&n(j)},v=g=>i.unlockedLessons.includes(g),w=g=>i.completedLessons.includes(g);if(r)return l.jsx(CS,{lesson:r,onComplete:y,onExit:()=>s(null)});const S=i.completedLessons.length,p=u.length,m=p>0?Math.round(S/p*100):0;return l.jsx(E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-gradient-to-b from-slate-900 via-indigo-950 to-slate-900 z-40 overflow-y-auto",children:l.jsxs("div",{className:"min-h-screen max-w-lg mx-auto px-4 py-6 flex flex-col",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-extrabold text-white",children:" Tutorial"}),l.jsx("p",{className:"text-white/40 text-sm mt-0.5",children:"Aprenda do zero ao PRO"})]}),l.jsx("button",{onClick:t,className:"text-white/40 hover:text-white/70 bg-white/[0.06] hover:bg-white/[0.1] rounded-lg px-3 py-1.5 text-sm transition-all",children:" Voltar"})]}),l.jsxs("div",{className:"mb-6",children:[l.jsxs("div",{className:"flex justify-between text-xs text-white/40 mb-1.5",children:[l.jsx("span",{children:"Progresso geral"}),l.jsxs("span",{children:[S,"/",p," (",m,"%)"]})]}),l.jsx("div",{className:"h-2 bg-white/[0.08] rounded-full overflow-hidden",children:l.jsx(E.div,{className:"h-full bg-gradient-to-r from-emerald-500 to-green-400 rounded-full",initial:{width:0},animate:{width:`${m}%`},transition:{duration:.6,ease:"easeOut"}})})]}),l.jsx("div",{className:"flex gap-1.5 mb-5 overflow-x-auto pb-1 -mx-1 px-1",children:h.map(g=>{const b=f(g.key),j=a===g.key;return l.jsx("button",{onClick:()=>c(g.key),className:`flex-shrink-0 rounded-lg px-3 py-2 text-left transition-all duration-150 ${j?"bg-white/[0.12] border border-white/[0.15]":"bg-white/[0.04] border border-transparent hover:bg-white/[0.07]"}`,children:l.jsxs("div",{className:"flex items-center gap-1.5",children:[l.jsx("span",{className:"text-base",children:g.icon}),l.jsx("span",{className:`text-xs font-semibold ${j?"text-white":"text-white/50"}`,children:g.name}),l.jsxs("span",{className:`text-[10px] ml-1 ${b.done===b.total&&b.total>0?"text-emerald-400":"text-white/30"}`,children:[b.done,"/",b.total]})]})},g.key)})}),l.jsx("div",{className:"flex-1 space-y-2",children:l.jsx(xe,{mode:"wait",children:l.jsxs(E.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},transition:{duration:.2},className:"space-y-2",children:[d.map((g,b)=>{var C,P;const j=v(g.id),k=w(g.id);return l.jsxs(E.button,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:b*.04},disabled:!j,onClick:()=>j&&s(g),className:`w-full text-left rounded-xl p-4 transition-all duration-150 flex items-center gap-3 ${j?"bg-white/[0.06] hover:bg-white/[0.1] border border-white/[0.06] hover:border-white/[0.12] active:scale-[0.99]":"bg-white/[0.02] border border-white/[0.03] opacity-40 cursor-not-allowed"} ${k?"border-emerald-500/30":""}`,children:[l.jsx("div",{className:`w-9 h-9 rounded-lg flex items-center justify-center text-sm flex-shrink-0 ${k?"bg-emerald-500/20 text-emerald-400":j?"bg-white/[0.08] text-white/60":"bg-white/[0.04] text-white/20"}`,children:k?"":j?b+1:""}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("div",{className:"text-sm font-semibold text-white truncate",children:g.title}),l.jsx("div",{className:"text-xs text-white/35 mt-0.5 truncate",children:g.description}),l.jsxs("div",{className:"flex items-center gap-3 mt-1.5 text-[10px] text-white/25",children:[l.jsxs("span",{children:[" ",g.estimatedTime]}),l.jsxs("span",{children:[" ",((C=g.rewards)==null?void 0:C.fishCoins)||0]}),l.jsxs("span",{children:[" ",((P=g.rewards)==null?void 0:P.xp)||0," XP"]})]})]}),l.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[l.jsx("span",{className:`w-2 h-2 rounded-full ${g.difficulty==="beginner"?"bg-green-400":g.difficulty==="intermediate"?"bg-yellow-400":g.difficulty==="advanced"?"bg-red-400":"bg-purple-400"}`}),j&&l.jsx("svg",{className:"w-4 h-4 text-white/20",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]},g.id)}),d.length===0&&l.jsx("div",{className:"text-center py-12 text-white/20 text-sm",children:"Nenhuma lio neste mdulo"})]},a)})}),i.badges.length>0&&l.jsxs("div",{className:"mt-6 pt-4 border-t border-white/[0.06]",children:[l.jsx("div",{className:"text-xs text-white/30 mb-2",children:"Badges conquistadas"}),l.jsx("div",{className:"flex flex-wrap gap-2",children:i.badges.map(g=>l.jsxs("span",{className:"bg-amber-500/10 text-amber-300/70 text-[10px] px-2 py-1 rounded-md font-medium",children:[" ",g.replace(/_/g," ")]},g))})]})]})})}function TS({reward:e,onClose:t}){var n,r,s;return ce.useEffect(()=>{const i=setTimeout(()=>{t()},5e3);return()=>clearTimeout(i)},[t]),e?l.jsx(E.div,{initial:{opacity:0,y:-50,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,scale:.9},className:"fixed top-24 right-6 z-[60] max-w-md",children:l.jsx("div",{className:"bg-gradient-to-br from-green-600 to-emerald-600 rounded-xl p-6 shadow-2xl border-2 border-white/20",children:l.jsxs("div",{className:"flex items-start gap-4",children:[l.jsx("div",{className:"text-4xl",children:""}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Lesson Completa!"}),e.lessonTitle&&l.jsx("p",{className:"text-white/90 text-sm mb-3",children:e.lessonTitle}),l.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[((n=e.rewards)==null?void 0:n.fishCoins)>0&&l.jsxs("div",{className:"bg-white/10 rounded-lg p-2 text-center",children:[l.jsx("div",{className:"text-xl",children:""}),l.jsxs("div",{className:"text-lg font-bold text-white",children:["+",e.rewards.fishCoins]}),l.jsx("div",{className:"text-xs text-white/70",children:"Peixes"})]}),((r=e.rewards)==null?void 0:r.xp)>0&&l.jsxs("div",{className:"bg-white/10 rounded-lg p-2 text-center",children:[l.jsx("div",{className:"text-xl",children:""}),l.jsxs("div",{className:"text-lg font-bold text-white",children:["+",e.rewards.xp]}),l.jsx("div",{className:"text-xs text-white/70",children:"XP"})]}),((s=e.rewards)==null?void 0:s.badge)&&l.jsxs("div",{className:"bg-white/10 rounded-lg p-2 text-center",children:[l.jsx("div",{className:"text-xl",children:""}),l.jsx("div",{className:"text-xs font-bold text-white mt-1",children:"Badge"}),l.jsx("div",{className:"text-xs text-white/70",children:e.rewards.badge.split("_")[0]})]})]})]}),l.jsx("button",{onClick:t,className:"text-white/60 hover:text-white transition-colors",children:""})]})})}):null}function ES(){const[e,t]=x.useState(null),n=x.useRef(null),r=x.useRef(null),s=x.useRef(0),i=x.useRef(!1),o=x.useRef(!1);x.useEffect(()=>{if(!i.current){i.current=!0;try{const b=z.resolve("gameService");n.current=b,b.initializeGame(),t(b.getGameState());const j=()=>{o.current=!0};return Object.values(B).forEach(k=>{R.on(k,j)}),()=>{Object.values(B).forEach(k=>{R.off(k,j)}),r.current&&cancelAnimationFrame(r.current)}}catch(b){throw Rt.logError("useGameService","init",b.message,{stack:b.stack}),b}}},[]),x.useEffect(()=>{if(!n.current)return;const b=j=>{s.current||(s.current=j);const k=j-s.current;s.current=j,n.current&&(n.current.isPlaying&&!n.current.isPaused&&!n.current.gameOver&&n.current.updateGame(k),o.current&&(o.current=!1,t(n.current.getGameState()))),r.current=requestAnimationFrame(b)};return r.current=requestAnimationFrame(b),()=>{r.current&&cancelAnimationFrame(r.current)}},[]);const a=x.useCallback(b=>(...j)=>{if(n.current&&typeof n.current[b]=="function")try{return n.current[b](...j)}catch(k){if(Rt.logError("useGameService",b,k.message,{stack:k.stack,args:j.map(C=>String(C).slice(0,100))}),b==="getDropPreview")return null;throw k}},[]),c=x.useCallback(a("movePiece"),[a]),u=x.useCallback(a("rotatePiece"),[a]),h=x.useCallback(a("rotatePieceLeft"),[a]),d=x.useCallback(a("hardDrop"),[a]),f=x.useCallback(a("holdPiece"),[a]),y=x.useCallback(a("getDropPreview"),[a]),v=x.useCallback(a("pause"),[a]),w=x.useCallback(a("resume"),[a]),S=x.useCallback(a("restart"),[a]),p=x.useCallback(a("saveGame"),[a]),m=x.useCallback(a("loadGame"),[a]);return{gameState:e,actions:{movePiece:c,rotatePiece:u,rotatePieceLeft:h,hardDrop:d,holdPiece:f,getDropPreview:y,pause:v,resume:w,restart:S,saveGame:p,loadGame:m}}}function NS(){const[e,t]=x.useState({volume:80,gameSpeed:"normal",soundEnabled:!0,particlesEnabled:!0,das:167,arr:33}),[n,r]=x.useState(!0),[s,i]=x.useState(null);x.useEffect(()=>{try{const h=z.resolve("settingsService").getSettings();t(h||{volume:80,gameSpeed:"normal",soundEnabled:!0,particlesEnabled:!0,das:167,arr:33}),r(!1)}catch(u){i(u.message),r(!1),t({volume:80,gameSpeed:"normal",soundEnabled:!0,particlesEnabled:!0,das:167,arr:33})}},[]);const o=x.useCallback(async u=>{try{i(null);const d=z.resolve("settingsService").saveSettings(u);return t(d),d}catch(h){throw i(h.message),h}},[]),a=x.useCallback(async(u,h)=>{try{i(null);const f=z.resolve("settingsService").updateSetting(u,h);return t(f),f}catch(d){throw i(d.message),d}},[]),c=x.useCallback(async()=>{try{i(null);const h=z.resolve("settingsService").resetSettings();return t(h),h}catch(u){throw i(u.message),u}},[]);return{settings:e,loading:n,error:s,updateSettings:o,updateSetting:a,resetSettings:c}}function _S(){const e=x.useCallback((S,p,m="sine",g=.1)=>{const b=Lr();if(b)try{const j=b.createOscillator(),k=b.createGain();j.connect(k),k.connect(b.destination),j.frequency.setValueAtTime(S,b.currentTime),j.type=m,k.gain.setValueAtTime(g,b.currentTime),k.gain.exponentialRampToValueAtTime(.001,b.currentTime+p),j.start(b.currentTime),j.stop(b.currentTime+p)}catch{}},[]),t=x.useCallback((S,p=.05)=>{const m=Lr();if(m)try{const g=m.sampleRate*S,b=m.createBuffer(1,g,m.sampleRate),j=b.getChannelData(0);for(let C=0;C<g;C++)j[C]=(Math.random()*2-1)*p;const k=m.createBufferSource();k.buffer=b,k.connect(m.destination),k.start()}catch{}},[]),n=x.useCallback(S=>{switch(S){case"I":[800,700,600,500].forEach((p,m)=>{setTimeout(()=>e(p,.1,"square",.08),m*50)});break;case"O":e(600,.1,"sine",.1),setTimeout(()=>e(600,.1,"sine",.1),80);break;case"T":e(523,.08,"triangle",.08),setTimeout(()=>e(659,.08,"triangle",.08),40),setTimeout(()=>e(523,.08,"triangle",.08),80);break;case"S":[440,494,523,587].forEach((p,m)=>{setTimeout(()=>e(p,.06,"sawtooth",.06),m*30)});break;case"Z":[587,523,494,440].forEach((p,m)=>{setTimeout(()=>e(p,.06,"sawtooth",.06),m*30)});break;case"J":[330,415,523].forEach((p,m)=>{setTimeout(()=>e(p,.15,"triangle",.07),m*20)});break;case"L":[392,494,659].forEach((p,m)=>{setTimeout(()=>e(p,.15,"sine",.08),m*30)});break;default:e(440,.1,"sine",.05)}},[e]),r=x.useCallback(S=>{switch(S){case 1:[440,494,523].forEach((p,m)=>{setTimeout(()=>e(p,.1,"triangle",.1),m*80)});break;case 2:[440,523,659,784].forEach((p,m)=>{setTimeout(()=>e(p,.12,"triangle",.1),m*60)});break;case 3:[523,659,784,1047,1319].forEach((p,m)=>{setTimeout(()=>e(p,.15,"triangle",.12),m*50)});break;case 4:t(.02),setTimeout(()=>{[262,330,392,523,659,784,1047].forEach((p,m)=>{setTimeout(()=>e(p,.2,"sawtooth",.15),m*40)})},50),setTimeout(()=>{[1047,1319,1568,2093].forEach((p,m)=>{setTimeout(()=>e(p,.3,"triangle",.2),m*30)})},350);break}},[e,t]),s=x.useCallback(()=>{[{freq:523,delay:0},{freq:659,delay:100},{freq:784,delay:200},{freq:1047,delay:300},{freq:784,delay:400},{freq:1047,delay:500},{freq:1319,delay:600},{freq:1568,delay:700}].forEach(p=>{setTimeout(()=>e(p.freq,.15,"triangle",.12),p.delay)}),setTimeout(()=>{[1047,1319,1568,2093].forEach((p,m)=>{setTimeout(()=>e(p,.4,"triangle",.15),m*50)})},800)},[e]),i=x.useCallback(()=>{e(200,.05,"square",.03),e(120,.06,"sine",.04)},[e]),o=x.useCallback(()=>{t(.04,.08),e(80,.08,"square",.12),e(60,.1,"sine",.1)},[e,t]),a=x.useCallback(()=>{t(.03,.04),[349,440,523,659,784].forEach((S,p)=>{setTimeout(()=>e(S,.2,"sawtooth",.1),p*40)}),setTimeout(()=>{e(1047,.4,"triangle",.15)},250)},[e,t]),c=x.useCallback(()=>{[660,880,1100,1320,1760].forEach((S,p)=>{setTimeout(()=>e(S,.12,"triangle",.08),p*50)})},[e]),u=x.useCallback(S=>{const p=400+S*80;e(p,.1,"triangle",.08),setTimeout(()=>e(p*1.25,.08,"triangle",.06),50)},[e]),h=x.useCallback(()=>{[523,494,440,392,349,330,294,262].forEach((p,m)=>{setTimeout(()=>e(p,.3,"sine",.1),m*150)})},[e]),d=x.useCallback(()=>{e(440,.2,"triangle",.08)},[e]),f=x.useCallback(()=>{e(523,.15,"triangle",.08),setTimeout(()=>e(659,.1,"triangle",.06),100)},[e]),y=x.useCallback(()=>{e(880,.1,"sine",.06),setTimeout(()=>e(1100,.08,"sine",.05),60)},[e]),v=x.useCallback(()=>{e(1200,.05,"square",.04)},[e]),w=x.useCallback(()=>{e(800,.03,"square",.02)},[e]);return{playPieceSound:n,playLineClear:r,playLevelUp:s,playPieceLand:i,playHardDrop:o,playTSpin:a,playBackToBack:c,playCombo:u,playGameOver:h,playPause:d,playResume:f,playHold:y,playRotate:v,playMove:w}}function AS(){const e=_S(),t=x.useRef(e);t.current=e,x.useEffect(()=>{const n=()=>t.current,r=v=>{var w;n().playPieceLand(),(w=v==null?void 0:v.piece)!=null&&w.type&&n().playPieceSound(v.piece.type)},s=v=>{(v==null?void 0:v.linesCleared)>0&&n().playLineClear(v.linesCleared)},i=()=>n().playHardDrop(),o=()=>n().playTSpin(),a=()=>n().playBackToBack(),c=v=>{(v==null?void 0:v.combo)>=2&&n().playCombo(v.combo)},u=()=>n().playHold(),h=()=>n().playRotate(),d=()=>n().playMove(),f=()=>n().playGameOver(),y=()=>n().playLevelUp();return R.on(B.PIECE_PLACED,r),R.on(B.LINE_CLEARED,s),R.on(B.HARD_DROP,i),R.on(B.T_SPIN,o),R.on(B.BACK_TO_BACK,a),R.on(B.SCORE_UPDATED,c),R.on(B.PIECE_HELD,u),R.on(B.PIECE_ROTATED,h),R.on(B.PIECE_MOVED,d),R.on(B.GAME_OVER,f),R.on(B.LEVEL_UP,y),()=>{R.off(B.PIECE_PLACED,r),R.off(B.LINE_CLEARED,s),R.off(B.HARD_DROP,i),R.off(B.T_SPIN,o),R.off(B.BACK_TO_BACK,a),R.off(B.SCORE_UPDATED,c),R.off(B.PIECE_HELD,u),R.off(B.PIECE_ROTATED,h),R.off(B.PIECE_MOVED,d),R.off(B.GAME_OVER,f),R.off(B.LEVEL_UP,y)}},[])}function MS(){const[e,t]=x.useState(!1),[n,r]=x.useState(null),s=x.useRef(null),i=x.useRef([]),o=x.useRef(null),a=x.useCallback(()=>{s.current&&(s.current.pause(),s.current.currentTime=0),i.current.forEach(f=>{try{f.stop()}catch{}}),i.current=[],o.current&&(clearTimeout(o.current),o.current=null),t(!1),r(null)},[]),c=x.useCallback(async()=>{try{a();const f=new Audio("/cat-tetris/sounds/background-music.mp3");f.loop=!0,f.volume=.3,s.current=f,await f.play(),t(!0),r("background")}catch{h()}},[a]),u=x.useCallback(async()=>{try{a();const f=new Audio("/cat-tetris/sounds/game-music.mp3");f.loop=!0,f.volume=.4,s.current=f,await f.play(),t(!0),r("game")}catch{d()}},[a]),h=x.useCallback(()=>{a();try{const f=Lr();if(!f)return;const y=[{freq:523.25,duration:.4},{freq:587.33,duration:.4},{freq:659.25,duration:.4},{freq:698.46,duration:.4},{freq:783.99,duration:.6},{freq:659.25,duration:.4},{freq:523.25,duration:.8},{freq:587.33,duration:.4},{freq:659.25,duration:.4},{freq:698.46,duration:.4},{freq:783.99,duration:.6},{freq:880,duration:.4},{freq:783.99,duration:.8},{freq:659.25,duration:.4},{freq:698.46,duration:.4},{freq:783.99,duration:.4},{freq:880,duration:.6},{freq:987.77,duration:.4},{freq:1046.5,duration:.8}];let v=f.currentTime;y.forEach((w,S)=>{const p=f.createOscillator(),m=f.createGain();if(p.connect(m),m.connect(f.destination),p.frequency.setValueAtTime(w.freq,v),p.type="sine",m.gain.setValueAtTime(0,v),m.gain.linearRampToValueAtTime(.1,v+.05),m.gain.exponentialRampToValueAtTime(.01,v+w.duration),p.start(v),p.stop(v+w.duration),i.current.push(p),S<y.length-1){const g=f.createOscillator(),b=f.createGain();g.connect(b),b.connect(f.destination),g.frequency.setValueAtTime(w.freq*1.25,v),g.type="triangle",b.gain.setValueAtTime(0,v),b.gain.linearRampToValueAtTime(.05,v+.05),b.gain.exponentialRampToValueAtTime(.01,v+w.duration),g.start(v),g.stop(v+w.duration),i.current.push(g)}v+=w.duration}),o.current=setTimeout(()=>{s.current||h()},v*1e3+1e3),t(!0),r("cheerful-fallback")}catch{}},[a]),d=x.useCallback(()=>{a();try{const f=Lr();if(!f)return;const y=[{freq:261.63,duration:.2},{freq:329.63,duration:.2},{freq:392,duration:.2},{freq:523.25,duration:.3},{freq:392,duration:.1},{freq:523.25,duration:.3},{freq:293.66,duration:.2},{freq:369.99,duration:.2},{freq:440,duration:.2},{freq:587.33,duration:.3},{freq:440,duration:.1},{freq:587.33,duration:.3},{freq:329.63,duration:.2},{freq:415.3,duration:.2},{freq:493.88,duration:.2},{freq:659.25,duration:.4},{freq:493.88,duration:.2},{freq:659.25,duration:.4}];let v=f.currentTime;y.forEach((w,S)=>{const p=f.createOscillator(),m=f.createGain();if(p.connect(m),m.connect(f.destination),p.frequency.setValueAtTime(w.freq,v),p.type="square",m.gain.setValueAtTime(0,v),m.gain.linearRampToValueAtTime(.15,v+.02),m.gain.exponentialRampToValueAtTime(.01,v+w.duration),p.start(v),p.stop(v+w.duration),i.current.push(p),S%2===0){const g=f.createOscillator(),b=f.createGain();g.connect(b),b.connect(f.destination),g.frequency.setValueAtTime(w.freq*.5,v),g.type="sawtooth",b.gain.setValueAtTime(0,v),b.gain.linearRampToValueAtTime(.08,v+.02),b.gain.exponentialRampToValueAtTime(.01,v+w.duration),g.start(v),g.stop(v+w.duration),i.current.push(g)}v+=w.duration}),o.current=setTimeout(()=>{s.current||d()},v*1e3+500),t(!0),r("energetic-fallback")}catch{}},[a]);return{isPlaying:e,currentTrack:n,startBackgroundMusic:c,startGameMusic:u,stopMusic:a,playCheerfulMelody:h,playEnergeticMelody:d}}const rt={DPAD_UP:12,DPAD_DOWN:13,DPAD_LEFT:14,DPAD_RIGHT:15,FACE_BUTTON_BOTTOM:0,FACE_BUTTON_RIGHT:1,FACE_BUTTON_LEFT:2,FACE_BUTTON_TOP:3,BUMPER_LEFT:4,BUMPER_RIGHT:5,TRIGGER_LEFT:6,TRIGGER_RIGHT:7,BUTTON_BACK:8,BUTTON_START:9,STICK_LEFT:10,STICK_RIGHT:11},LS=(e=null)=>{const[t,n]=x.useState([]),[r,s]=x.useState(!1),i=x.useRef({}),o=x.useRef(100),a=x.useRef({}),c=x.useRef({}),u=x.useRef(200);x.useEffect(()=>{const y=S=>{n(p=>[...p,S.gamepad]),s(!0),S.gamepad.vibrationActuator&&S.gamepad.vibrationActuator.playEffect("dual-rumble",{duration:200,strongMagnitude:.5,weakMagnitude:.5})},v=S=>{n(m=>m.filter(g=>g.id!==S.gamepad.id));const p=navigator.getGamepads().filter(m=>m&&m.connected);s(p.length>0)};return window.addEventListener("gamepadconnected",y),window.addEventListener("gamepaddisconnected",v),(()=>{const S=navigator.getGamepads(),p=Array.from(S).filter(m=>m&&m.connected);p.length>0&&(n(p),s(!0))})(),()=>{window.removeEventListener("gamepadconnected",y),window.removeEventListener("gamepaddisconnected",v)}},[]);const h=x.useCallback((y,v,w=.3)=>Math.abs(y)<w&&Math.abs(v)<w?null:Math.abs(y)>Math.abs(v)?y>0?"right":"left":v>0?"down":"up",[]),d=x.useCallback(()=>{var Y,Q,Z;if(!r||!e)return;const y=navigator.getGamepads(),v=Array.from(y).find(J=>J&&J.connected);if(!v)return;const w=Date.now(),{movePiece:S,rotatePiece:p,rotatePieceLeft:m,hardDrop:g,holdPiece:b,pause:j}=e;if(!S)return;const k=(J,G)=>{const q=`movement_${J}`,T=i.current[q]||0,F=c.current[q]||!1;if(G&&!F){c.current[q]=!0,i.current[q]=w,C(J);return}if(G&&F){const V=u.current,D=o.current,K=T===i.current[q]&&w-T>=V?V:D;w-T>=K&&(i.current[q]=w,C(J));return}!G&&F&&(c.current[q]=!1)},C=J=>{e.movePiece&&e.movePiece(J)},P=((Y=v.buttons[rt.DPAD_LEFT])==null?void 0:Y.pressed)||h(v.axes[0],v.axes[1])==="left",N=((Q=v.buttons[rt.DPAD_RIGHT])==null?void 0:Q.pressed)||h(v.axes[0],v.axes[1])==="right",A=((Z=v.buttons[rt.DPAD_DOWN])==null?void 0:Z.pressed)||h(v.axes[0],v.axes[1])==="down";k("left",P),k("right",N),k("down",A);const H={};[{button:rt.DPAD_UP,action:()=>g==null?void 0:g()},{button:rt.FACE_BUTTON_BOTTOM,action:()=>p==null?void 0:p()},{button:rt.FACE_BUTTON_RIGHT,action:()=>m==null?void 0:m()},{button:rt.FACE_BUTTON_LEFT,action:()=>p==null?void 0:p()},{button:rt.FACE_BUTTON_TOP,action:()=>p==null?void 0:p()},{button:rt.BUMPER_LEFT,action:()=>b==null?void 0:b()},{button:rt.BUMPER_RIGHT,action:()=>b==null?void 0:b()},{button:rt.BUTTON_START,action:()=>j==null?void 0:j()}].forEach(({button:J,action:G})=>{var F;const q=(F=v.buttons[J])==null?void 0:F.pressed,T=a.current[J];if(H[J]=q,q&&!T&&(G(),v.vibrationActuator)){const V=J===rt.DPAD_UP?.3:.1;v.vibrationActuator.playEffect("dual-rumble",{duration:50,strongMagnitude:V,weakMagnitude:V*.5})}}),a.current=H},[r,h,e]),f=x.useCallback(()=>{const y=navigator.getGamepads(),v=Array.from(y).find(w=>w&&w.connected);return v?{id:v.id,index:v.index,connected:v.connected,buttonsCount:v.buttons.length,axesCount:v.axes.length}:null},[]);return{isGamepadActive:r,connectedGamepads:t,processGamepadInput:d,getGamepadInfo:f,controllerCount:t.length}};function RS(){const[e,t]=x.useState(null),[n,r]=x.useState(!0);x.useEffect(()=>{try{const o=z.resolve("playerStatsService");t(o.getStats()),r(!1);const a=()=>{try{const c=z.resolve("statisticsService"),h=z.resolve("gameService").getGameState(),d=c.getStats(),f={score:h.score.points,level:h.score.level,linesCleared:d.linesCleared,piecesPlaced:d.piecesPlaced,tSpins:d.tSpins,backToBack:d.backToBack,maxCombo:d.maxCombo,playTime:d.playTime};o.updateAfterGame(f),t(o.getStats()),window.dispatchEvent(new Event("playerStatsUpdated"))}catch{}};return R.on(B.GAME_OVER,a),()=>{R.off(B.GAME_OVER,a)}}catch{r(!1)}},[]);const s=x.useCallback((o,a)=>{try{const c=z.resolve("playerStatsService"),u=c.updateRecord(o,a);return u&&(t(c.getStats()),window.dispatchEvent(new Event("playerStatsUpdated"))),u}catch{return!1}},[]),i=x.useCallback((o,a=1)=>{try{const c=z.resolve("playerStatsService");c.incrementStat(o,a),t(c.getStats()),window.dispatchEvent(new Event("playerStatsUpdated"))}catch{}},[]);return{playerStats:e,loading:n,updateRecord:s,incrementStat:i}}const DS=({isConnected:e,controllerCount:t,gamepadInfo:n,className:r=""})=>{const[s,i]=x.useState(!1);return e?l.jsx("div",{className:`fixed top-4 right-4 z-50 ${r}`,children:l.jsxs(E.div,{initial:{opacity:0,scale:.8,x:20},animate:{opacity:1,scale:1,x:0},exit:{opacity:0,scale:.8,x:20},transition:{duration:.3},className:"bg-gray-900/90 backdrop-blur-sm text-white p-3 rounded-lg border border-green-500/30 shadow-lg",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(E.div,{animate:{rotate:[0,-10,10,-10,0],scale:[1,1.1,1]},transition:{duration:2,repeat:1/0,repeatDelay:3},children:""}),l.jsxs("div",{className:"text-sm",children:[l.jsxs("div",{className:"text-green-400 font-semibold",children:[t," Controle",t!==1?"s":""," Conectado",t!==1?"s":""]}),l.jsx("div",{className:"text-gray-300 text-xs",children:"Pronto para jogar!"})]}),l.jsx(E.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>i(!s),className:"ml-2 text-gray-400 hover:text-white transition-colors",title:"Mostrar controles",children:l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"})})})]}),l.jsx(xe,{children:s&&l.jsx(E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},className:"mt-3 pt-3 border-t border-gray-700",children:l.jsxs("div",{className:"text-xs text-gray-300 space-y-1",children:[l.jsx("div",{className:"font-semibold text-white mb-2",children:" Controles:"}),l.jsxs("div",{className:"grid grid-cols-2 gap-1 text-xs",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-yellow-400",children:"D-Pad  "}),l.jsx("div",{className:"text-gray-400",children:"Mover"})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-yellow-400",children:"D-Pad "}),l.jsx("div",{className:"text-gray-400",children:"Acelerar"})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-yellow-400",children:"D-Pad "}),l.jsx("div",{className:"text-gray-400",children:"Hard Drop"})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-yellow-400",children:"A/B/X/Y"}),l.jsx("div",{className:"text-gray-400",children:"Girar"})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-yellow-400",children:"L/R"}),l.jsx("div",{className:"text-gray-400",children:"Guardar"})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-yellow-400",children:"Start"}),l.jsx("div",{className:"text-gray-400",children:"Pausar"})]})]}),l.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-700",children:[l.jsx("div",{className:"text-green-400 text-xs",children:" Analog Stick Esquerdo tambm funciona!"}),l.jsx("div",{className:"text-blue-400 text-xs",children:" Gatilhos L2/R2 para rotao"})]}),n&&n.length>0&&l.jsx("div",{className:"mt-2 pt-2 border-t border-gray-700",children:l.jsx("div",{className:"text-xs text-gray-400",children:n.map((o,a)=>l.jsxs("div",{className:"mb-1",children:[l.jsxs("div",{className:"font-semibold text-white",children:["Controle ",o.index+1,":"]}),l.jsx("div",{className:"text-gray-300 truncate",children:o.id.length>30?o.id.substring(0,30)+"...":o.id}),l.jsxs("div",{className:"flex gap-2 text-xs",children:[l.jsxs("span",{className:"text-blue-400",children:[o.buttons," botes"]}),l.jsxs("span",{className:"text-green-400",children:[o.axes," eixos"]}),o.vibration&&l.jsx("span",{className:"text-purple-400",children:" Vibrao"})]})]},a))})})]})})})]})}):null},IS=x.lazy(()=>Rm(()=>import("./SettingsMenu-8be29fb6.js"),[]));function OS(){return l.jsx("div",{className:"flex items-center justify-center p-8",children:l.jsx(E.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"text-4xl",children:""})})}function FS({gameState:e,actions:t,onBackToMenu:n,onRestart:r,isGamepadActive:s,controllerCount:i,getGamepadInfo:o}){var y,v,w,S,p,m;const a=ce.useMemo(()=>{if(!(e!=null&&e.currentPiece)||e!=null&&e.gameOver||e!=null&&e.isPaused)return null;try{return t.getDropPreview()}catch{return null}},[(v=(y=e==null?void 0:e.currentPiece)==null?void 0:y.position)==null?void 0:v.x,(S=(w=e==null?void 0:e.currentPiece)==null?void 0:w.position)==null?void 0:S.y,(p=e==null?void 0:e.currentPiece)==null?void 0:p.type,(m=e==null?void 0:e.currentPiece)==null?void 0:m.shape,e==null?void 0:e.gameOver,e==null?void 0:e.isPaused]),[c,u]=ce.useState({hardDrop:!1,hold:!1,pause:!1}),h=ce.useCallback(()=>{c.hardDrop||e!=null&&e.gameOver||(t.hardDrop(),u(g=>({...g,hardDrop:!0})),setTimeout(()=>{u(g=>({...g,hardDrop:!1}))},300))},[t,c.hardDrop,e==null?void 0:e.gameOver]),d=ce.useCallback(()=>{c.hold||e!=null&&e.gameOver||!(e!=null&&e.canHold)||(t.holdPiece(),u(g=>({...g,hold:!0})),setTimeout(()=>{u(g=>({...g,hold:!1}))},500))},[t,c.hold,e==null?void 0:e.gameOver,e==null?void 0:e.canHold]),f=ce.useCallback(()=>{c.pause||e!=null&&e.gameOver||(e!=null&&e.isPaused?t.resume():t.pause(),u(g=>({...g,pause:!0})),setTimeout(()=>{u(g=>({...g,pause:!1}))},300))},[t,c.pause,e==null?void 0:e.gameOver,e==null?void 0:e.isPaused]);return l.jsxs("div",{className:"h-screen cat-bg flex flex-col overflow-hidden",children:[l.jsxs("div",{className:"flex items-center justify-between px-3 py-1.5 bg-black/30 backdrop-blur-sm border-b border-white/10 shrink-0",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(E.button,{onClick:n,whileHover:{scale:1.05},whileTap:{scale:.95},className:"bg-white/15 hover:bg-white/25 text-white p-1.5 rounded-lg transition-colors",title:"Voltar ao Menu",children:l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"})})}),l.jsx("span",{className:"text-white font-bold text-sm",children:" Cat Tetris"})]}),l.jsxs("div",{className:"flex items-center gap-3 text-xs text-white/70",children:[l.jsxs("span",{className:"text-yellow-400 font-bold",children:[e.score.points.toLocaleString()," pts"]}),l.jsxs("span",{children:["Nv.",e.score.level]}),l.jsxs("span",{children:[e.score.lines," linhas"]})]}),l.jsx("div",{className:"flex items-center gap-1.5",children:l.jsx(E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:e.isPaused?t.resume:t.pause,disabled:e.gameOver,className:"bg-white/10 hover:bg-white/20 text-white px-2.5 py-1 rounded-lg text-xs transition-colors disabled:opacity-50",children:e.isPaused?"":""})})]}),l.jsxs("div",{className:"flex-1 flex items-center justify-center overflow-hidden p-2",children:[l.jsxs("div",{className:"flex flex-col lg:flex-row gap-2 items-center justify-center",children:[l.jsxs("div",{className:"hidden lg:flex flex-col lg:flex-row gap-2 items-center justify-center",children:[l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx(zn,{heldPiece:e.heldPiece,canHold:e.canHold}),l.jsx(Gn,{pieces:e.nextPieces})]}),l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx(pn,{board:e.board,currentPiece:e.currentPiece,dropPreview:a,gameOver:e.gameOver}),l.jsx(hb,{onMove:t.movePiece,onRotate:t.rotatePiece,onHardDrop:t.hardDrop,onPause:e.isPaused?t.resume:t.pause,onHold:t.holdPiece,isPaused:e.isPaused,gameOver:e.gameOver,canHold:e.canHold})]}),l.jsx("div",{className:"flex flex-col gap-2",children:l.jsx(Bn,{score:e.score.points,level:e.score.level,lines:e.score.lines,combo:e.score.combo})})]}),l.jsxs("div",{className:"flex lg:hidden flex-col w-full h-full","data-testid":"mobile-layout",children:[l.jsxs("div",{className:"flex justify-between items-center mb-2 px-2 bg-black/30 rounded-lg mx-2 py-1",children:[l.jsxs("div",{className:"text-white text-sm",children:[l.jsx("span",{className:"text-yellow-400 font-bold",children:e.score.points.toLocaleString()}),l.jsxs("span",{className:"text-white/60 ml-2",children:["Nv.",e.score.level]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[e.heldPiece&&l.jsx("div",{className:"text-xs text-white/60",children:""}),l.jsx("div",{className:"text-xs text-white/60",children:"Prxima:"}),l.jsx("div",{className:"bg-gray-800/50 p-1 rounded",children:e.nextPieces[0]?l.jsx("div",{className:"grid gap-0.5",style:{gridTemplateColumns:`repeat(${Math.max(...e.nextPieces[0].shape.map(g=>g.length))}, 8px)`,gridTemplateRows:`repeat(${e.nextPieces[0].shape.length}, 8px)`},children:e.nextPieces[0].shape.map((g,b)=>g.map((j,k)=>l.jsx("div",{className:"w-2 h-2 rounded-sm",style:{backgroundColor:j?Sr(e.nextPieces[0].color):"transparent",border:j?"1px solid rgba(255,255,255,0.3)":"none"},children:j&&e.nextPieces[0].emoji?l.jsx("span",{className:"text-[6px] leading-none block text-center",children:e.nextPieces[0].emoji}):null},`next-${k}-${b}`)))}):l.jsx("div",{className:"w-8 h-6 flex items-center justify-center",children:l.jsx("span",{className:"text-xs text-white/40",children:"?"})})})]})]}),l.jsxs("div",{className:"flex items-center justify-center flex-1 relative px-1",children:[l.jsxs("div",{className:"flex flex-col gap-1 mr-2",children:[l.jsx(E.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onTouchStart:()=>t.rotatePiece(),onClick:()=>t.rotatePiece(),disabled:e.gameOver,className:"bg-blue-500 text-white p-4 rounded-full shadow-lg hover:bg-blue-600 disabled:opacity-50 touch-manipulation text-lg",children:""}),l.jsx(E.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onTouchStart:()=>t.movePiece("left"),onClick:()=>t.movePiece("left"),disabled:e.gameOver,className:"bg-gray-600 text-white p-4 rounded-lg shadow-lg hover:bg-gray-700 disabled:opacity-50 touch-manipulation text-lg",children:""})]}),l.jsx("div",{className:"flex-shrink-0 mx-1",children:l.jsx(pn,{board:e.board,currentPiece:e.currentPiece,dropPreview:a,gameOver:e.gameOver})}),l.jsxs("div",{className:"flex flex-col gap-1 ml-2",children:[l.jsx(E.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onTouchStart:h,onClick:h,disabled:e.gameOver||c.hardDrop,className:`text-white p-4 rounded-full shadow-lg disabled:opacity-50 touch-manipulation text-lg ${c.hardDrop?"bg-red-400":"bg-red-500 hover:bg-red-600"}`,children:""}),l.jsx(E.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onTouchStart:()=>t.movePiece("right"),onClick:()=>t.movePiece("right"),disabled:e.gameOver,className:"bg-gray-600 text-white p-4 rounded-lg shadow-lg hover:bg-gray-700 disabled:opacity-50 touch-manipulation text-lg",children:""})]})]}),l.jsxs("div",{className:"flex justify-center gap-2 py-2 px-2",children:[l.jsx(E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onTouchStart:()=>t.movePiece("down"),onClick:()=>t.movePiece("down"),disabled:e.gameOver,className:"bg-gray-700 text-white px-4 py-2 rounded-lg shadow-lg hover:bg-gray-600 disabled:opacity-50 touch-manipulation",children:" Acelerar"}),e.canHold&&l.jsx(E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onTouchStart:d,onClick:d,disabled:e.gameOver||!e.canHold||c.hold,className:`text-white px-4 py-2 rounded-lg shadow-lg disabled:opacity-50 touch-manipulation ${c.hold?"bg-green-400":e.canHold?"bg-green-600 hover:bg-green-500":"bg-gray-500"}`,children:" Guardar"}),l.jsx(E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onTouchStart:f,onClick:f,disabled:e.gameOver||c.pause,className:`text-white px-4 py-2 rounded-lg shadow-lg disabled:opacity-50 touch-manipulation ${c.pause?"bg-yellow-400":"bg-yellow-500 hover:bg-yellow-600"}`,children:e.isPaused?"":""})]})]})]}),l.jsx(xe,{children:e.gameOver&&l.jsx(mb,{score:e.score,onRestart:r,onBackToMenu:n})}),l.jsx(DS,{isConnected:s,controllerCount:i,gamepadInfo:o()})]})]})}function VS(){const[e,t]=x.useState("menu"),[n,r]=x.useState(!1),[s,i]=x.useState(!1),[o,a]=x.useState(!1),[c,u]=x.useState(!1),[h,d]=x.useState(!1),[f,y]=x.useState(!1),[v,w]=x.useState(!1),[S,p]=x.useState(!1),[m,g]=x.useState(!1),[b,j]=x.useState(!0),[k,C]=x.useState(!1),[P,N]=x.useState(null),[A,H]=x.useState(null),[Y,Q]=x.useState(!1),[Z,J]=x.useState(!1),{gameState:G,actions:q}=ES();ce.useEffect(()=>{Rt.setGameStateProvider(()=>{try{return z.resolve("gameService").getGameState()}catch{return null}})},[]);const{settings:T,updateSettings:F}=NS(),{startBackgroundMusic:V,startGameMusic:D,stopMusic:K}=MS(),{isGamepadActive:Te,controllerCount:je,processGamepadInput:L,getGamepadInfo:M}=LS(q);o0(),l0(),RS(),c0(),u0(),AS();const O=e==="game",{setDAS:U,setARR:W}=d0(q,G,O);ce.useEffect(()=>{(T==null?void 0:T.das)!=null&&U(T.das),(T==null?void 0:T.arr)!=null&&W(T.arr)},[T==null?void 0:T.das,T==null?void 0:T.arr,U,W]),ce.useEffect(()=>{const ne=ve=>{try{z.resolve("gameService").setGameMode(ve.detail.mode)}catch{}};return window.addEventListener("gameModeChanged",ne),()=>window.removeEventListener("gameModeChanged",ne)},[]),ce.useEffect(()=>{G&&!G.gameOver&&G.score.points>0&&G.isPlaying?u(!0):u(!1)},[G]),ce.useEffect(()=>(V&&K&&(T!=null&&T.soundEnabled)?e==="menu"?V():e==="game"&&D():K(),()=>{K()}),[e,T==null?void 0:T.soundEnabled,V,D,K]),ce.useEffect(()=>{if(Te&&e==="game"){const ne=setInterval(()=>{L()},16);return()=>clearInterval(ne)}},[Te,e,L]),ce.useEffect(()=>{const ne=bn=>{bn.preventDefault(),a(!0)},ve=()=>{a(!1),i(!1)};return window.addEventListener("beforeinstallprompt",ne),window.addEventListener("appinstalled",ve),window.matchMedia("(display-mode: standalone)").matches&&a(!1),()=>{window.removeEventListener("beforeinstallprompt",ne),window.removeEventListener("appinstalled",ve)}},[]);const te=ne=>{F(ne),ne.das!=null&&U(ne.das),ne.arr!=null&&W(ne.arr),ne.soundEnabled?e==="menu"?V==null||V():e==="game"&&(D==null||D()):K==null||K()},tt=()=>{t("game"),T!=null&&T.soundEnabled&&(D==null||D()),G!=null&&G.gameOver?q.restart():G!=null&&G.isPaused?q.resume():G!=null&&G.isPlaying||q.restart()},Hs=()=>{t("game"),T!=null&&T.soundEnabled&&(D==null||D()),G!=null&&G.isPaused&&q.resume()},Us=()=>{t("game"),T!=null&&T.soundEnabled&&(D==null||D()),q.restart()},$s=()=>{q.restart(),t("game")},Ws=()=>{t("menu"),T!=null&&T.soundEnabled&&(V==null||V()),G&&!G.gameOver&&q.pause()},Fr=()=>{i(!0)};return Z?l.jsx(dS,{onExit:()=>J(!1)}):Y?l.jsx(cS,{onClose:()=>Q(!1)}):A?l.jsx(iS,{mode:A.mode,aiDifficulty:A.aiDifficulty,ai1Difficulty:A.ai1Difficulty,ai2Difficulty:A.ai2Difficulty,onExit:()=>{H(null),t("menu")}}):e==="menu"?l.jsxs(l.Fragment,{children:[l.jsx(Zb,{onStartGame:c?Hs:tt,onNewGame:Us,onShowSettings:()=>r(!0),onShowGameModes:()=>p(!0),onShowShop:()=>w(!0),onShowMissions:()=>d(!0),onShowAchievements:()=>y(!0),onShowMultiplayer:()=>g(!0),onShowTutorial:()=>j(!0),onShowTutorialHub:()=>C(!0),onShowAIShowcase:()=>Q(!0),onShowCreatorMode:()=>J(!0),onShowInstallPrompt:Fr,canInstallPWA:o,hasActiveGame:c,gameState:G}),l.jsx(xe,{children:m&&l.jsx(vS,{onClose:()=>g(!1),onStartMatch:ne=>{g(!1),H(ne)}})}),l.jsx(xe,{children:S&&l.jsx(mS,{onClose:()=>p(!1),onStartGame:Us})}),l.jsx(xe,{children:v&&l.jsx(fS,{onClose:()=>w(!1)})}),l.jsx(xe,{children:h&&l.jsx(nS,{onClose:()=>d(!1)})}),l.jsx(xe,{children:f&&l.jsx(rS,{onClose:()=>y(!1)})}),l.jsx(xe,{children:k&&l.jsx(PS,{tutorialService:z.resolve("tutorialService"),onClose:()=>C(!1),onLessonComplete:ne=>{if(!(!ne||!ne.rewards)){try{const ve=z.resolve("currencyService");ne.rewards.fishCoins&&ve.addFish(ne.rewards.fishCoins,`Tutorial: ${ne.lessonTitle||"Lesson"}`)}catch{}try{ne.rewards.xp&&z.resolve("playerStatsService").incrementStat("totalPlayTime",ne.rewards.xp)}catch{}try{if(ne.rewards.achievement){const ve=z.resolve("achievementsService"),bn=z.resolve("playerStatsService");ve.checkAchievements(bn.getStats())}}catch{}N(ne)}}})}),l.jsx(xe,{children:l.jsx(x.Suspense,{fallback:l.jsx(OS,{}),children:l.jsx(IS,{isOpen:n,settings:T||{},onSettingsChange:te,onClose:()=>r(!1)})})}),s&&l.jsx(eS,{onClose:()=>i(!1)}),l.jsx(sS,{}),l.jsx(xe,{children:P&&l.jsx(TS,{reward:P,onClose:()=>N(null)})})]}):G?l.jsxs(l.Fragment,{children:[l.jsx(FS,{gameState:G,actions:q,onBackToMenu:Ws,onRestart:$s,isGamepadActive:Te,controllerCount:je,getGamepadInfo:M}),l.jsx(xe,{children:b&&l.jsx(xS,{onComplete:()=>j(!1)})})]}):l.jsx("div",{className:"h-screen cat-bg flex items-center justify-center overflow-hidden",children:l.jsx("div",{className:"text-white text-xl",children:"Carregando..."})})}function BS(){return l.jsxs(xb,{children:[l.jsx(VS,{}),l.jsx(tS,{})]})}Ta.createRoot(document.getElementById("root")).render(l.jsx(BS,{}));export{xe as A,l as j,E as m,x as r};
