var S0=Object.defineProperty;var j0=(e,t,n)=>t in e?S0(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Ks=(e,t,n)=>(j0(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function k0(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ch={exports:{}},mo={},Ph={exports:{}},$={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Is=Symbol.for("react.element"),C0=Symbol.for("react.portal"),P0=Symbol.for("react.fragment"),T0=Symbol.for("react.strict_mode"),E0=Symbol.for("react.profiler"),N0=Symbol.for("react.provider"),_0=Symbol.for("react.context"),A0=Symbol.for("react.forward_ref"),M0=Symbol.for("react.suspense"),D0=Symbol.for("react.memo"),L0=Symbol.for("react.lazy"),eu=Symbol.iterator;function R0(e){return e===null||typeof e!="object"?null:(e=eu&&e[eu]||e["@@iterator"],typeof e=="function"?e:null)}var Th={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Eh=Object.assign,Nh={};function Rr(e,t,n){this.props=e,this.context=t,this.refs=Nh,this.updater=n||Th}Rr.prototype.isReactComponent={};Rr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Rr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function _h(){}_h.prototype=Rr.prototype;function Ol(e,t,n){this.props=e,this.context=t,this.refs=Nh,this.updater=n||Th}var Fl=Ol.prototype=new _h;Fl.constructor=Ol;Eh(Fl,Rr.prototype);Fl.isPureReactComponent=!0;var tu=Array.isArray,Ah=Object.prototype.hasOwnProperty,Gl={current:null},Mh={key:!0,ref:!0,__self:!0,__source:!0};function Dh(e,t,n){var r,s={},i=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)Ah.call(t,r)&&!Mh.hasOwnProperty(r)&&(s[r]=t[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var c=Array(a),u=0;u<a;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Is,type:e,key:i,ref:o,props:s,_owner:Gl.current}}function I0(e,t){return{$$typeof:Is,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Vl(e){return typeof e=="object"&&e!==null&&e.$$typeof===Is}function O0(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var nu=/\/+/g;function Bo(e,t){return typeof e=="object"&&e!==null&&e.key!=null?O0(""+e.key):t.toString(36)}function vi(e,t,n,r,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Is:case C0:o=!0}}if(o)return o=e,s=s(o),e=r===""?"."+Bo(o,0):r,tu(s)?(n="",e!=null&&(n=e.replace(nu,"$&/")+"/"),vi(s,t,n,"",function(u){return u})):s!=null&&(Vl(s)&&(s=I0(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(nu,"$&/")+"/")+e)),t.push(s)),1;if(o=0,r=r===""?".":r+":",tu(e))for(var a=0;a<e.length;a++){i=e[a];var c=r+Bo(i,a);o+=vi(i,t,n,c,s)}else if(c=R0(e),typeof c=="function")for(e=c.call(e),a=0;!(i=e.next()).done;)i=i.value,c=r+Bo(i,a++),o+=vi(i,t,n,c,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Qs(e,t,n){if(e==null)return e;var r=[],s=0;return vi(e,r,"","",function(i){return t.call(n,i,s++)}),r}function F0(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ve={current:null},yi={transition:null},G0={ReactCurrentDispatcher:Ve,ReactCurrentBatchConfig:yi,ReactCurrentOwner:Gl};function Lh(){throw Error("act(...) is not supported in production builds of React.")}$.Children={map:Qs,forEach:function(e,t,n){Qs(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Qs(e,function(){t++}),t},toArray:function(e){return Qs(e,function(t){return t})||[]},only:function(e){if(!Vl(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};$.Component=Rr;$.Fragment=P0;$.Profiler=E0;$.PureComponent=Ol;$.StrictMode=T0;$.Suspense=M0;$.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=G0;$.act=Lh;$.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Eh({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=Gl.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(c in t)Ah.call(t,c)&&!Mh.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&a!==void 0?a[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var u=0;u<c;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Is,type:e.type,key:s,ref:i,props:r,_owner:o}};$.createContext=function(e){return e={$$typeof:_0,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:N0,_context:e},e.Consumer=e};$.createElement=Dh;$.createFactory=function(e){var t=Dh.bind(null,e);return t.type=e,t};$.createRef=function(){return{current:null}};$.forwardRef=function(e){return{$$typeof:A0,render:e}};$.isValidElement=Vl;$.lazy=function(e){return{$$typeof:L0,_payload:{_status:-1,_result:e},_init:F0}};$.memo=function(e,t){return{$$typeof:D0,type:e,compare:t===void 0?null:t}};$.startTransition=function(e){var t=yi.transition;yi.transition={};try{e()}finally{yi.transition=t}};$.unstable_act=Lh;$.useCallback=function(e,t){return Ve.current.useCallback(e,t)};$.useContext=function(e){return Ve.current.useContext(e)};$.useDebugValue=function(){};$.useDeferredValue=function(e){return Ve.current.useDeferredValue(e)};$.useEffect=function(e,t){return Ve.current.useEffect(e,t)};$.useId=function(){return Ve.current.useId()};$.useImperativeHandle=function(e,t,n){return Ve.current.useImperativeHandle(e,t,n)};$.useInsertionEffect=function(e,t){return Ve.current.useInsertionEffect(e,t)};$.useLayoutEffect=function(e,t){return Ve.current.useLayoutEffect(e,t)};$.useMemo=function(e,t){return Ve.current.useMemo(e,t)};$.useReducer=function(e,t,n){return Ve.current.useReducer(e,t,n)};$.useRef=function(e){return Ve.current.useRef(e)};$.useState=function(e){return Ve.current.useState(e)};$.useSyncExternalStore=function(e,t,n){return Ve.current.useSyncExternalStore(e,t,n)};$.useTransition=function(){return Ve.current.useTransition()};$.version="18.3.1";Ph.exports=$;var v=Ph.exports;const ue=k0(v);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V0=v,B0=Symbol.for("react.element"),z0=Symbol.for("react.fragment"),H0=Object.prototype.hasOwnProperty,U0=V0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,$0={key:!0,ref:!0,__self:!0,__source:!0};function Rh(e,t,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)H0.call(t,r)&&!$0.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:B0,type:e,key:i,ref:o,props:s,_owner:U0.current}}mo.Fragment=z0;mo.jsx=Rh;mo.jsxs=Rh;Ch.exports=mo;var l=Ch.exports,Na={},Ih={exports:{}},Ze={},Oh={exports:{}},Fh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(T,_){var L=T.length;T.push(_);e:for(;0<L;){var D=L-1>>>1,V=T[D];if(0<s(V,_))T[D]=_,T[L]=V,L=D;else break e}}function n(T){return T.length===0?null:T[0]}function r(T){if(T.length===0)return null;var _=T[0],L=T.pop();if(L!==_){T[0]=L;e:for(var D=0,V=T.length,ve=V>>>1;D<ve;){var Pe=2*(D+1)-1,tt=T[Pe],je=Pe+1,Z=T[je];if(0>s(tt,L))je<V&&0>s(Z,tt)?(T[D]=Z,T[je]=L,D=je):(T[D]=tt,T[Pe]=L,D=Pe);else if(je<V&&0>s(Z,L))T[D]=Z,T[je]=L,D=je;else break e}}return _}function s(T,_){var L=T.sortIndex-_.sortIndex;return L!==0?L:T.id-_.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var c=[],u=[],h=1,d=null,f=3,y=!1,x=!1,b=!1,S=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(T){for(var _=n(u);_!==null;){if(_.callback===null)r(u);else if(_.startTime<=T)r(u),_.sortIndex=_.expirationTime,t(c,_);else break;_=n(u)}}function w(T){if(b=!1,g(T),!x)if(n(c)!==null)x=!0,F(k);else{var _=n(u);_!==null&&H(w,_.startTime-T)}}function k(T,_){x=!1,b&&(b=!1,p(P),P=-1),y=!0;var L=f;try{for(g(_),d=n(c);d!==null&&(!(d.expirationTime>_)||T&&!B());){var D=d.callback;if(typeof D=="function"){d.callback=null,f=d.priorityLevel;var V=D(d.expirationTime<=_);_=e.unstable_now(),typeof V=="function"?d.callback=V:d===n(c)&&r(c),g(_)}else r(c);d=n(c)}if(d!==null)var ve=!0;else{var Pe=n(u);Pe!==null&&H(w,Pe.startTime-_),ve=!1}return ve}finally{d=null,f=L,y=!1}}var j=!1,C=null,P=-1,E=5,M=-1;function B(){return!(e.unstable_now()-M<E)}function q(){if(C!==null){var T=e.unstable_now();M=T;var _=!0;try{_=C(!0,T)}finally{_?W():(j=!1,C=null)}}else j=!1}var W;if(typeof m=="function")W=function(){m(q)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,Q=K.port2;K.port1.onmessage=q,W=function(){Q.postMessage(null)}}else W=function(){S(q,0)};function F(T){C=T,j||(j=!0,W())}function H(T,_){P=S(function(){T(e.unstable_now())},_)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(T){T.callback=null},e.unstable_continueExecution=function(){x||y||(x=!0,F(k))},e.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<T?Math.floor(1e3/T):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(T){switch(f){case 1:case 2:case 3:var _=3;break;default:_=f}var L=f;f=_;try{return T()}finally{f=L}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(T,_){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var L=f;f=T;try{return _()}finally{f=L}},e.unstable_scheduleCallback=function(T,_,L){var D=e.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?D+L:D):L=D,T){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=L+V,T={id:h++,callback:_,priorityLevel:T,startTime:L,expirationTime:V,sortIndex:-1},L>D?(T.sortIndex=L,t(u,T),n(c)===null&&T===n(u)&&(b?(p(P),P=-1):b=!0,H(w,L-D))):(T.sortIndex=V,t(c,T),x||y||(x=!0,F(k))),T},e.unstable_shouldYield=B,e.unstable_wrapCallback=function(T){var _=f;return function(){var L=f;f=_;try{return T.apply(this,arguments)}finally{f=L}}}})(Fh);Oh.exports=Fh;var W0=Oh.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var q0=v,Ye=W0;function A(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Gh=new Set,ps={};function Kn(e,t){kr(e,t),kr(e+"Capture",t)}function kr(e,t){for(ps[e]=t,e=0;e<t.length;e++)Gh.add(t[e])}var Ft=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_a=Object.prototype.hasOwnProperty,K0=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ru={},su={};function Q0(e){return _a.call(su,e)?!0:_a.call(ru,e)?!1:K0.test(e)?su[e]=!0:(ru[e]=!0,!1)}function X0(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Y0(e,t,n,r){if(t===null||typeof t>"u"||X0(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Be(e,t,n,r,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var Ne={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ne[e]=new Be(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ne[t]=new Be(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ne[e]=new Be(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ne[e]=new Be(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ne[e]=new Be(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ne[e]=new Be(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ne[e]=new Be(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ne[e]=new Be(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ne[e]=new Be(e,5,!1,e.toLowerCase(),null,!1,!1)});var Bl=/[\-:]([a-z])/g;function zl(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Bl,zl);Ne[t]=new Be(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Bl,zl);Ne[t]=new Be(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Bl,zl);Ne[t]=new Be(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ne[e]=new Be(e,1,!1,e.toLowerCase(),null,!1,!1)});Ne.xlinkHref=new Be("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ne[e]=new Be(e,1,!1,e.toLowerCase(),null,!0,!0)});function Hl(e,t,n,r){var s=Ne.hasOwnProperty(t)?Ne[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Y0(t,n,s,r)&&(n=null),r||s===null?Q0(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Ht=q0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Xs=Symbol.for("react.element"),er=Symbol.for("react.portal"),tr=Symbol.for("react.fragment"),Ul=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Vh=Symbol.for("react.provider"),Bh=Symbol.for("react.context"),$l=Symbol.for("react.forward_ref"),Ma=Symbol.for("react.suspense"),Da=Symbol.for("react.suspense_list"),Wl=Symbol.for("react.memo"),Qt=Symbol.for("react.lazy"),zh=Symbol.for("react.offscreen"),iu=Symbol.iterator;function Vr(e){return e===null||typeof e!="object"?null:(e=iu&&e[iu]||e["@@iterator"],typeof e=="function"?e:null)}var fe=Object.assign,zo;function Xr(e){if(zo===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);zo=t&&t[1]||""}return`
`+zo+e}var Ho=!1;function Uo(e,t){if(!e||Ho)return"";Ho=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var c=`
`+s[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=a);break}}}finally{Ho=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Xr(e):""}function J0(e){switch(e.tag){case 5:return Xr(e.type);case 16:return Xr("Lazy");case 13:return Xr("Suspense");case 19:return Xr("SuspenseList");case 0:case 2:case 15:return e=Uo(e.type,!1),e;case 11:return e=Uo(e.type.render,!1),e;case 1:return e=Uo(e.type,!0),e;default:return""}}function La(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case tr:return"Fragment";case er:return"Portal";case Aa:return"Profiler";case Ul:return"StrictMode";case Ma:return"Suspense";case Da:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Bh:return(e.displayName||"Context")+".Consumer";case Vh:return(e._context.displayName||"Context")+".Provider";case $l:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Wl:return t=e.displayName||null,t!==null?t:La(e.type)||"Memo";case Qt:t=e._payload,e=e._init;try{return La(e(t))}catch{}}return null}function Z0(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return La(t);case 8:return t===Ul?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function mn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Hh(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function eg(e){var t=Hh(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ys(e){e._valueTracker||(e._valueTracker=eg(e))}function Uh(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Hh(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Di(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ra(e,t){var n=t.checked;return fe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function ou(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=mn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function $h(e,t){t=t.checked,t!=null&&Hl(e,"checked",t,!1)}function Ia(e,t){$h(e,t);var n=mn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Oa(e,t.type,n):t.hasOwnProperty("defaultValue")&&Oa(e,t.type,mn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function au(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Oa(e,t,n){(t!=="number"||Di(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Yr=Array.isArray;function xr(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+mn(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Fa(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(A(91));return fe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function lu(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(A(92));if(Yr(n)){if(1<n.length)throw Error(A(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:mn(n)}}function Wh(e,t){var n=mn(t.value),r=mn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function cu(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function qh(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ga(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?qh(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Js,Kh=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Js=Js||document.createElement("div"),Js.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Js.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function gs(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var ts={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},tg=["Webkit","ms","Moz","O"];Object.keys(ts).forEach(function(e){tg.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ts[t]=ts[e]})});function Qh(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||ts.hasOwnProperty(e)&&ts[e]?(""+t).trim():t+"px"}function Xh(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Qh(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var ng=fe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Va(e,t){if(t){if(ng[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(A(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(A(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(A(61))}if(t.style!=null&&typeof t.style!="object")throw Error(A(62))}}function Ba(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var za=null;function ql(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ha=null,vr=null,yr=null;function uu(e){if(e=Gs(e)){if(typeof Ha!="function")throw Error(A(280));var t=e.stateNode;t&&(t=yo(t),Ha(e.stateNode,e.type,t))}}function Yh(e){vr?yr?yr.push(e):yr=[e]:vr=e}function Jh(){if(vr){var e=vr,t=yr;if(yr=vr=null,uu(e),t)for(e=0;e<t.length;e++)uu(t[e])}}function Zh(e,t){return e(t)}function ef(){}var $o=!1;function tf(e,t,n){if($o)return e(t,n);$o=!0;try{return Zh(e,t,n)}finally{$o=!1,(vr!==null||yr!==null)&&(ef(),Jh())}}function xs(e,t){var n=e.stateNode;if(n===null)return null;var r=yo(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(A(231,t,typeof n));return n}var Ua=!1;if(Ft)try{var Br={};Object.defineProperty(Br,"passive",{get:function(){Ua=!0}}),window.addEventListener("test",Br,Br),window.removeEventListener("test",Br,Br)}catch{Ua=!1}function rg(e,t,n,r,s,i,o,a,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(h){this.onError(h)}}var ns=!1,Li=null,Ri=!1,$a=null,sg={onError:function(e){ns=!0,Li=e}};function ig(e,t,n,r,s,i,o,a,c){ns=!1,Li=null,rg.apply(sg,arguments)}function og(e,t,n,r,s,i,o,a,c){if(ig.apply(this,arguments),ns){if(ns){var u=Li;ns=!1,Li=null}else throw Error(A(198));Ri||(Ri=!0,$a=u)}}function Qn(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function nf(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function du(e){if(Qn(e)!==e)throw Error(A(188))}function ag(e){var t=e.alternate;if(!t){if(t=Qn(e),t===null)throw Error(A(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return du(s),e;if(i===r)return du(s),t;i=i.sibling}throw Error(A(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(A(189))}}if(n.alternate!==r)throw Error(A(190))}if(n.tag!==3)throw Error(A(188));return n.stateNode.current===n?e:t}function rf(e){return e=ag(e),e!==null?sf(e):null}function sf(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=sf(e);if(t!==null)return t;e=e.sibling}return null}var of=Ye.unstable_scheduleCallback,hu=Ye.unstable_cancelCallback,lg=Ye.unstable_shouldYield,cg=Ye.unstable_requestPaint,xe=Ye.unstable_now,ug=Ye.unstable_getCurrentPriorityLevel,Kl=Ye.unstable_ImmediatePriority,af=Ye.unstable_UserBlockingPriority,Ii=Ye.unstable_NormalPriority,dg=Ye.unstable_LowPriority,lf=Ye.unstable_IdlePriority,po=null,kt=null;function hg(e){if(kt&&typeof kt.onCommitFiberRoot=="function")try{kt.onCommitFiberRoot(po,e,void 0,(e.current.flags&128)===128)}catch{}}var gt=Math.clz32?Math.clz32:pg,fg=Math.log,mg=Math.LN2;function pg(e){return e>>>=0,e===0?32:31-(fg(e)/mg|0)|0}var Zs=64,ei=4194304;function Jr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Oi(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Jr(a):(i&=o,i!==0&&(r=Jr(i)))}else o=n&~s,o!==0?r=Jr(o):i!==0&&(r=Jr(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-gt(t),s=1<<n,r|=e[n],t&=~s;return r}function gg(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xg(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-gt(i),a=1<<o,c=s[o];c===-1?(!(a&n)||a&r)&&(s[o]=gg(a,t)):c<=t&&(e.expiredLanes|=a),i&=~a}}function Wa(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function cf(){var e=Zs;return Zs<<=1,!(Zs&4194240)&&(Zs=64),e}function Wo(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Os(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-gt(t),e[t]=n}function vg(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-gt(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}function Ql(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-gt(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var ee=0;function uf(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var df,Xl,hf,ff,mf,qa=!1,ti=[],rn=null,sn=null,on=null,vs=new Map,ys=new Map,Jt=[],yg="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function fu(e,t){switch(e){case"focusin":case"focusout":rn=null;break;case"dragenter":case"dragleave":sn=null;break;case"mouseover":case"mouseout":on=null;break;case"pointerover":case"pointerout":vs.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ys.delete(t.pointerId)}}function zr(e,t,n,r,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},t!==null&&(t=Gs(t),t!==null&&Xl(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function wg(e,t,n,r,s){switch(t){case"focusin":return rn=zr(rn,e,t,n,r,s),!0;case"dragenter":return sn=zr(sn,e,t,n,r,s),!0;case"mouseover":return on=zr(on,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return vs.set(i,zr(vs.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,ys.set(i,zr(ys.get(i)||null,e,t,n,r,s)),!0}return!1}function pf(e){var t=An(e.target);if(t!==null){var n=Qn(t);if(n!==null){if(t=n.tag,t===13){if(t=nf(n),t!==null){e.blockedOn=t,mf(e.priority,function(){hf(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function wi(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Ka(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);za=r,n.target.dispatchEvent(r),za=null}else return t=Gs(n),t!==null&&Xl(t),e.blockedOn=n,!1;t.shift()}return!0}function mu(e,t,n){wi(e)&&n.delete(t)}function bg(){qa=!1,rn!==null&&wi(rn)&&(rn=null),sn!==null&&wi(sn)&&(sn=null),on!==null&&wi(on)&&(on=null),vs.forEach(mu),ys.forEach(mu)}function Hr(e,t){e.blockedOn===t&&(e.blockedOn=null,qa||(qa=!0,Ye.unstable_scheduleCallback(Ye.unstable_NormalPriority,bg)))}function ws(e){function t(s){return Hr(s,e)}if(0<ti.length){Hr(ti[0],e);for(var n=1;n<ti.length;n++){var r=ti[n];r.blockedOn===e&&(r.blockedOn=null)}}for(rn!==null&&Hr(rn,e),sn!==null&&Hr(sn,e),on!==null&&Hr(on,e),vs.forEach(t),ys.forEach(t),n=0;n<Jt.length;n++)r=Jt[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Jt.length&&(n=Jt[0],n.blockedOn===null);)pf(n),n.blockedOn===null&&Jt.shift()}var wr=Ht.ReactCurrentBatchConfig,Fi=!0;function Sg(e,t,n,r){var s=ee,i=wr.transition;wr.transition=null;try{ee=1,Yl(e,t,n,r)}finally{ee=s,wr.transition=i}}function jg(e,t,n,r){var s=ee,i=wr.transition;wr.transition=null;try{ee=4,Yl(e,t,n,r)}finally{ee=s,wr.transition=i}}function Yl(e,t,n,r){if(Fi){var s=Ka(e,t,n,r);if(s===null)na(e,t,r,Gi,n),fu(e,r);else if(wg(s,e,t,n,r))r.stopPropagation();else if(fu(e,r),t&4&&-1<yg.indexOf(e)){for(;s!==null;){var i=Gs(s);if(i!==null&&df(i),i=Ka(e,t,n,r),i===null&&na(e,t,r,Gi,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else na(e,t,r,null,n)}}var Gi=null;function Ka(e,t,n,r){if(Gi=null,e=ql(r),e=An(e),e!==null)if(t=Qn(e),t===null)e=null;else if(n=t.tag,n===13){if(e=nf(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Gi=e,null}function gf(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ug()){case Kl:return 1;case af:return 4;case Ii:case dg:return 16;case lf:return 536870912;default:return 16}default:return 16}}var en=null,Jl=null,bi=null;function xf(){if(bi)return bi;var e,t=Jl,n=t.length,r,s="value"in en?en.value:en.textContent,i=s.length;for(e=0;e<n&&t[e]===s[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===s[i-r];r++);return bi=s.slice(e,1<r?1-r:void 0)}function Si(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ni(){return!0}function pu(){return!1}function et(e){function t(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ni:pu,this.isPropagationStopped=pu,this}return fe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ni)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ni)},persist:function(){},isPersistent:ni}),t}var Ir={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zl=et(Ir),Fs=fe({},Ir,{view:0,detail:0}),kg=et(Fs),qo,Ko,Ur,go=fe({},Fs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ec,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ur&&(Ur&&e.type==="mousemove"?(qo=e.screenX-Ur.screenX,Ko=e.screenY-Ur.screenY):Ko=qo=0,Ur=e),qo)},movementY:function(e){return"movementY"in e?e.movementY:Ko}}),gu=et(go),Cg=fe({},go,{dataTransfer:0}),Pg=et(Cg),Tg=fe({},Fs,{relatedTarget:0}),Qo=et(Tg),Eg=fe({},Ir,{animationName:0,elapsedTime:0,pseudoElement:0}),Ng=et(Eg),_g=fe({},Ir,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Ag=et(_g),Mg=fe({},Ir,{data:0}),xu=et(Mg),Dg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Lg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Rg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ig(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Rg[e])?!!t[e]:!1}function ec(){return Ig}var Og=fe({},Fs,{key:function(e){if(e.key){var t=Dg[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Si(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Lg[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ec,charCode:function(e){return e.type==="keypress"?Si(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Si(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Fg=et(Og),Gg=fe({},go,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),vu=et(Gg),Vg=fe({},Fs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ec}),Bg=et(Vg),zg=fe({},Ir,{propertyName:0,elapsedTime:0,pseudoElement:0}),Hg=et(zg),Ug=fe({},go,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),$g=et(Ug),Wg=[9,13,27,32],tc=Ft&&"CompositionEvent"in window,rs=null;Ft&&"documentMode"in document&&(rs=document.documentMode);var qg=Ft&&"TextEvent"in window&&!rs,vf=Ft&&(!tc||rs&&8<rs&&11>=rs),yu=String.fromCharCode(32),wu=!1;function yf(e,t){switch(e){case"keyup":return Wg.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wf(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var nr=!1;function Kg(e,t){switch(e){case"compositionend":return wf(t);case"keypress":return t.which!==32?null:(wu=!0,yu);case"textInput":return e=t.data,e===yu&&wu?null:e;default:return null}}function Qg(e,t){if(nr)return e==="compositionend"||!tc&&yf(e,t)?(e=xf(),bi=Jl=en=null,nr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return vf&&t.locale!=="ko"?null:t.data;default:return null}}var Xg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Xg[e.type]:t==="textarea"}function bf(e,t,n,r){Yh(r),t=Vi(t,"onChange"),0<t.length&&(n=new Zl("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var ss=null,bs=null;function Yg(e){Mf(e,0)}function xo(e){var t=ir(e);if(Uh(t))return e}function Jg(e,t){if(e==="change")return t}var Sf=!1;if(Ft){var Xo;if(Ft){var Yo="oninput"in document;if(!Yo){var Su=document.createElement("div");Su.setAttribute("oninput","return;"),Yo=typeof Su.oninput=="function"}Xo=Yo}else Xo=!1;Sf=Xo&&(!document.documentMode||9<document.documentMode)}function ju(){ss&&(ss.detachEvent("onpropertychange",jf),bs=ss=null)}function jf(e){if(e.propertyName==="value"&&xo(bs)){var t=[];bf(t,bs,e,ql(e)),tf(Yg,t)}}function Zg(e,t,n){e==="focusin"?(ju(),ss=t,bs=n,ss.attachEvent("onpropertychange",jf)):e==="focusout"&&ju()}function ex(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return xo(bs)}function tx(e,t){if(e==="click")return xo(t)}function nx(e,t){if(e==="input"||e==="change")return xo(t)}function rx(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var vt=typeof Object.is=="function"?Object.is:rx;function Ss(e,t){if(vt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!_a.call(t,s)||!vt(e[s],t[s]))return!1}return!0}function ku(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Cu(e,t){var n=ku(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ku(n)}}function kf(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?kf(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Cf(){for(var e=window,t=Di();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Di(e.document)}return t}function nc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function sx(e){var t=Cf(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&kf(n.ownerDocument.documentElement,n)){if(r!==null&&nc(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=Cu(n,i);var o=Cu(n,r);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var ix=Ft&&"documentMode"in document&&11>=document.documentMode,rr=null,Qa=null,is=null,Xa=!1;function Pu(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Xa||rr==null||rr!==Di(r)||(r=rr,"selectionStart"in r&&nc(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),is&&Ss(is,r)||(is=r,r=Vi(Qa,"onSelect"),0<r.length&&(t=new Zl("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=rr)))}function ri(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var sr={animationend:ri("Animation","AnimationEnd"),animationiteration:ri("Animation","AnimationIteration"),animationstart:ri("Animation","AnimationStart"),transitionend:ri("Transition","TransitionEnd")},Jo={},Pf={};Ft&&(Pf=document.createElement("div").style,"AnimationEvent"in window||(delete sr.animationend.animation,delete sr.animationiteration.animation,delete sr.animationstart.animation),"TransitionEvent"in window||delete sr.transitionend.transition);function vo(e){if(Jo[e])return Jo[e];if(!sr[e])return e;var t=sr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Pf)return Jo[e]=t[n];return e}var Tf=vo("animationend"),Ef=vo("animationiteration"),Nf=vo("animationstart"),_f=vo("transitionend"),Af=new Map,Tu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function wn(e,t){Af.set(e,t),Kn(t,[e])}for(var Zo=0;Zo<Tu.length;Zo++){var ea=Tu[Zo],ox=ea.toLowerCase(),ax=ea[0].toUpperCase()+ea.slice(1);wn(ox,"on"+ax)}wn(Tf,"onAnimationEnd");wn(Ef,"onAnimationIteration");wn(Nf,"onAnimationStart");wn("dblclick","onDoubleClick");wn("focusin","onFocus");wn("focusout","onBlur");wn(_f,"onTransitionEnd");kr("onMouseEnter",["mouseout","mouseover"]);kr("onMouseLeave",["mouseout","mouseover"]);kr("onPointerEnter",["pointerout","pointerover"]);kr("onPointerLeave",["pointerout","pointerover"]);Kn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Kn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Kn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Kn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Kn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Kn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lx=new Set("cancel close invalid load scroll toggle".split(" ").concat(Zr));function Eu(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,og(r,t,void 0,e),e.currentTarget=null}function Mf(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,u=a.currentTarget;if(a=a.listener,c!==i&&s.isPropagationStopped())break e;Eu(s,a,u),i=c}else for(o=0;o<r.length;o++){if(a=r[o],c=a.instance,u=a.currentTarget,a=a.listener,c!==i&&s.isPropagationStopped())break e;Eu(s,a,u),i=c}}}if(Ri)throw e=$a,Ri=!1,$a=null,e}function se(e,t){var n=t[tl];n===void 0&&(n=t[tl]=new Set);var r=e+"__bubble";n.has(r)||(Df(t,e,2,!1),n.add(r))}function ta(e,t,n){var r=0;t&&(r|=4),Df(n,e,r,t)}var si="_reactListening"+Math.random().toString(36).slice(2);function js(e){if(!e[si]){e[si]=!0,Gh.forEach(function(n){n!=="selectionchange"&&(lx.has(n)||ta(n,!1,e),ta(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[si]||(t[si]=!0,ta("selectionchange",!1,t))}}function Df(e,t,n,r){switch(gf(t)){case 1:var s=Sg;break;case 4:s=jg;break;default:s=Yl}n=s.bind(null,t,n,e),s=void 0,!Ua||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function na(e,t,n,r,s){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;a!==null;){if(o=An(a),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}a=a.parentNode}}r=r.return}tf(function(){var u=i,h=ql(n),d=[];e:{var f=Af.get(e);if(f!==void 0){var y=Zl,x=e;switch(e){case"keypress":if(Si(n)===0)break e;case"keydown":case"keyup":y=Fg;break;case"focusin":x="focus",y=Qo;break;case"focusout":x="blur",y=Qo;break;case"beforeblur":case"afterblur":y=Qo;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=gu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=Pg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=Bg;break;case Tf:case Ef:case Nf:y=Ng;break;case _f:y=Hg;break;case"scroll":y=kg;break;case"wheel":y=$g;break;case"copy":case"cut":case"paste":y=Ag;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=vu}var b=(t&4)!==0,S=!b&&e==="scroll",p=b?f!==null?f+"Capture":null:f;b=[];for(var m=u,g;m!==null;){g=m;var w=g.stateNode;if(g.tag===5&&w!==null&&(g=w,p!==null&&(w=xs(m,p),w!=null&&b.push(ks(m,w,g)))),S)break;m=m.return}0<b.length&&(f=new y(f,x,null,n,h),d.push({event:f,listeners:b}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",y=e==="mouseout"||e==="pointerout",f&&n!==za&&(x=n.relatedTarget||n.fromElement)&&(An(x)||x[Gt]))break e;if((y||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,y?(x=n.relatedTarget||n.toElement,y=u,x=x?An(x):null,x!==null&&(S=Qn(x),x!==S||x.tag!==5&&x.tag!==6)&&(x=null)):(y=null,x=u),y!==x)){if(b=gu,w="onMouseLeave",p="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(b=vu,w="onPointerLeave",p="onPointerEnter",m="pointer"),S=y==null?f:ir(y),g=x==null?f:ir(x),f=new b(w,m+"leave",y,n,h),f.target=S,f.relatedTarget=g,w=null,An(h)===u&&(b=new b(p,m+"enter",x,n,h),b.target=g,b.relatedTarget=S,w=b),S=w,y&&x)t:{for(b=y,p=x,m=0,g=b;g;g=Jn(g))m++;for(g=0,w=p;w;w=Jn(w))g++;for(;0<m-g;)b=Jn(b),m--;for(;0<g-m;)p=Jn(p),g--;for(;m--;){if(b===p||p!==null&&b===p.alternate)break t;b=Jn(b),p=Jn(p)}b=null}else b=null;y!==null&&Nu(d,f,y,b,!1),x!==null&&S!==null&&Nu(d,S,x,b,!0)}}e:{if(f=u?ir(u):window,y=f.nodeName&&f.nodeName.toLowerCase(),y==="select"||y==="input"&&f.type==="file")var k=Jg;else if(bu(f))if(Sf)k=nx;else{k=ex;var j=Zg}else(y=f.nodeName)&&y.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(k=tx);if(k&&(k=k(e,u))){bf(d,k,n,h);break e}j&&j(e,f,u),e==="focusout"&&(j=f._wrapperState)&&j.controlled&&f.type==="number"&&Oa(f,"number",f.value)}switch(j=u?ir(u):window,e){case"focusin":(bu(j)||j.contentEditable==="true")&&(rr=j,Qa=u,is=null);break;case"focusout":is=Qa=rr=null;break;case"mousedown":Xa=!0;break;case"contextmenu":case"mouseup":case"dragend":Xa=!1,Pu(d,n,h);break;case"selectionchange":if(ix)break;case"keydown":case"keyup":Pu(d,n,h)}var C;if(tc)e:{switch(e){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else nr?yf(e,n)&&(P="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(P="onCompositionStart");P&&(vf&&n.locale!=="ko"&&(nr||P!=="onCompositionStart"?P==="onCompositionEnd"&&nr&&(C=xf()):(en=h,Jl="value"in en?en.value:en.textContent,nr=!0)),j=Vi(u,P),0<j.length&&(P=new xu(P,e,null,n,h),d.push({event:P,listeners:j}),C?P.data=C:(C=wf(n),C!==null&&(P.data=C)))),(C=qg?Kg(e,n):Qg(e,n))&&(u=Vi(u,"onBeforeInput"),0<u.length&&(h=new xu("onBeforeInput","beforeinput",null,n,h),d.push({event:h,listeners:u}),h.data=C))}Mf(d,t)})}function ks(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Vi(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=xs(e,n),i!=null&&r.unshift(ks(e,i,s)),i=xs(e,t),i!=null&&r.push(ks(e,i,s))),e=e.return}return r}function Jn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Nu(e,t,n,r,s){for(var i=t._reactName,o=[];n!==null&&n!==r;){var a=n,c=a.alternate,u=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&u!==null&&(a=u,s?(c=xs(n,i),c!=null&&o.unshift(ks(n,c,a))):s||(c=xs(n,i),c!=null&&o.push(ks(n,c,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var cx=/\r\n?/g,ux=/\u0000|\uFFFD/g;function _u(e){return(typeof e=="string"?e:""+e).replace(cx,`
`).replace(ux,"")}function ii(e,t,n){if(t=_u(t),_u(e)!==t&&n)throw Error(A(425))}function Bi(){}var Ya=null,Ja=null;function Za(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var el=typeof setTimeout=="function"?setTimeout:void 0,dx=typeof clearTimeout=="function"?clearTimeout:void 0,Au=typeof Promise=="function"?Promise:void 0,hx=typeof queueMicrotask=="function"?queueMicrotask:typeof Au<"u"?function(e){return Au.resolve(null).then(e).catch(fx)}:el;function fx(e){setTimeout(function(){throw e})}function ra(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),ws(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);ws(t)}function an(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Mu(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Or=Math.random().toString(36).slice(2),St="__reactFiber$"+Or,Cs="__reactProps$"+Or,Gt="__reactContainer$"+Or,tl="__reactEvents$"+Or,mx="__reactListeners$"+Or,px="__reactHandles$"+Or;function An(e){var t=e[St];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Gt]||n[St]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Mu(e);e!==null;){if(n=e[St])return n;e=Mu(e)}return t}e=n,n=e.parentNode}return null}function Gs(e){return e=e[St]||e[Gt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ir(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(A(33))}function yo(e){return e[Cs]||null}var nl=[],or=-1;function bn(e){return{current:e}}function ie(e){0>or||(e.current=nl[or],nl[or]=null,or--)}function ne(e,t){or++,nl[or]=e.current,e.current=t}var pn={},Re=bn(pn),Ue=bn(!1),On=pn;function Cr(e,t){var n=e.type.contextTypes;if(!n)return pn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function $e(e){return e=e.childContextTypes,e!=null}function zi(){ie(Ue),ie(Re)}function Du(e,t,n){if(Re.current!==pn)throw Error(A(168));ne(Re,t),ne(Ue,n)}function Lf(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(A(108,Z0(e)||"Unknown",s));return fe({},n,r)}function Hi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||pn,On=Re.current,ne(Re,e),ne(Ue,Ue.current),!0}function Lu(e,t,n){var r=e.stateNode;if(!r)throw Error(A(169));n?(e=Lf(e,t,On),r.__reactInternalMemoizedMergedChildContext=e,ie(Ue),ie(Re),ne(Re,e)):ie(Ue),ne(Ue,n)}var Et=null,wo=!1,sa=!1;function Rf(e){Et===null?Et=[e]:Et.push(e)}function gx(e){wo=!0,Rf(e)}function Sn(){if(!sa&&Et!==null){sa=!0;var e=0,t=ee;try{var n=Et;for(ee=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Et=null,wo=!1}catch(s){throw Et!==null&&(Et=Et.slice(e+1)),of(Kl,Sn),s}finally{ee=t,sa=!1}}return null}var ar=[],lr=0,Ui=null,$i=0,it=[],ot=0,Fn=null,_t=1,At="";function Pn(e,t){ar[lr++]=$i,ar[lr++]=Ui,Ui=e,$i=t}function If(e,t,n){it[ot++]=_t,it[ot++]=At,it[ot++]=Fn,Fn=e;var r=_t;e=At;var s=32-gt(r)-1;r&=~(1<<s),n+=1;var i=32-gt(t)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,_t=1<<32-gt(t)+s|n<<s|r,At=i+e}else _t=1<<i|n<<s|r,At=e}function rc(e){e.return!==null&&(Pn(e,1),If(e,1,0))}function sc(e){for(;e===Ui;)Ui=ar[--lr],ar[lr]=null,$i=ar[--lr],ar[lr]=null;for(;e===Fn;)Fn=it[--ot],it[ot]=null,At=it[--ot],it[ot]=null,_t=it[--ot],it[ot]=null}var Xe=null,Qe=null,le=!1,pt=null;function Of(e,t){var n=at(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Ru(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Xe=e,Qe=an(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Xe=e,Qe=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Fn!==null?{id:_t,overflow:At}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=at(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Xe=e,Qe=null,!0):!1;default:return!1}}function rl(e){return(e.mode&1)!==0&&(e.flags&128)===0}function sl(e){if(le){var t=Qe;if(t){var n=t;if(!Ru(e,t)){if(rl(e))throw Error(A(418));t=an(n.nextSibling);var r=Xe;t&&Ru(e,t)?Of(r,n):(e.flags=e.flags&-4097|2,le=!1,Xe=e)}}else{if(rl(e))throw Error(A(418));e.flags=e.flags&-4097|2,le=!1,Xe=e}}}function Iu(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Xe=e}function oi(e){if(e!==Xe)return!1;if(!le)return Iu(e),le=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Za(e.type,e.memoizedProps)),t&&(t=Qe)){if(rl(e))throw Ff(),Error(A(418));for(;t;)Of(e,t),t=an(t.nextSibling)}if(Iu(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(A(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Qe=an(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Qe=null}}else Qe=Xe?an(e.stateNode.nextSibling):null;return!0}function Ff(){for(var e=Qe;e;)e=an(e.nextSibling)}function Pr(){Qe=Xe=null,le=!1}function ic(e){pt===null?pt=[e]:pt.push(e)}var xx=Ht.ReactCurrentBatchConfig;function $r(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(A(309));var r=n.stateNode}if(!r)throw Error(A(147,e));var s=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(A(284));if(!n._owner)throw Error(A(290,e))}return e}function ai(e,t){throw e=Object.prototype.toString.call(t),Error(A(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ou(e){var t=e._init;return t(e._payload)}function Gf(e){function t(p,m){if(e){var g=p.deletions;g===null?(p.deletions=[m],p.flags|=16):g.push(m)}}function n(p,m){if(!e)return null;for(;m!==null;)t(p,m),m=m.sibling;return null}function r(p,m){for(p=new Map;m!==null;)m.key!==null?p.set(m.key,m):p.set(m.index,m),m=m.sibling;return p}function s(p,m){return p=dn(p,m),p.index=0,p.sibling=null,p}function i(p,m,g){return p.index=g,e?(g=p.alternate,g!==null?(g=g.index,g<m?(p.flags|=2,m):g):(p.flags|=2,m)):(p.flags|=1048576,m)}function o(p){return e&&p.alternate===null&&(p.flags|=2),p}function a(p,m,g,w){return m===null||m.tag!==6?(m=da(g,p.mode,w),m.return=p,m):(m=s(m,g),m.return=p,m)}function c(p,m,g,w){var k=g.type;return k===tr?h(p,m,g.props.children,w,g.key):m!==null&&(m.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Qt&&Ou(k)===m.type)?(w=s(m,g.props),w.ref=$r(p,m,g),w.return=p,w):(w=Ni(g.type,g.key,g.props,null,p.mode,w),w.ref=$r(p,m,g),w.return=p,w)}function u(p,m,g,w){return m===null||m.tag!==4||m.stateNode.containerInfo!==g.containerInfo||m.stateNode.implementation!==g.implementation?(m=ha(g,p.mode,w),m.return=p,m):(m=s(m,g.children||[]),m.return=p,m)}function h(p,m,g,w,k){return m===null||m.tag!==7?(m=In(g,p.mode,w,k),m.return=p,m):(m=s(m,g),m.return=p,m)}function d(p,m,g){if(typeof m=="string"&&m!==""||typeof m=="number")return m=da(""+m,p.mode,g),m.return=p,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Xs:return g=Ni(m.type,m.key,m.props,null,p.mode,g),g.ref=$r(p,null,m),g.return=p,g;case er:return m=ha(m,p.mode,g),m.return=p,m;case Qt:var w=m._init;return d(p,w(m._payload),g)}if(Yr(m)||Vr(m))return m=In(m,p.mode,g,null),m.return=p,m;ai(p,m)}return null}function f(p,m,g,w){var k=m!==null?m.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return k!==null?null:a(p,m,""+g,w);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Xs:return g.key===k?c(p,m,g,w):null;case er:return g.key===k?u(p,m,g,w):null;case Qt:return k=g._init,f(p,m,k(g._payload),w)}if(Yr(g)||Vr(g))return k!==null?null:h(p,m,g,w,null);ai(p,g)}return null}function y(p,m,g,w,k){if(typeof w=="string"&&w!==""||typeof w=="number")return p=p.get(g)||null,a(m,p,""+w,k);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Xs:return p=p.get(w.key===null?g:w.key)||null,c(m,p,w,k);case er:return p=p.get(w.key===null?g:w.key)||null,u(m,p,w,k);case Qt:var j=w._init;return y(p,m,g,j(w._payload),k)}if(Yr(w)||Vr(w))return p=p.get(g)||null,h(m,p,w,k,null);ai(m,w)}return null}function x(p,m,g,w){for(var k=null,j=null,C=m,P=m=0,E=null;C!==null&&P<g.length;P++){C.index>P?(E=C,C=null):E=C.sibling;var M=f(p,C,g[P],w);if(M===null){C===null&&(C=E);break}e&&C&&M.alternate===null&&t(p,C),m=i(M,m,P),j===null?k=M:j.sibling=M,j=M,C=E}if(P===g.length)return n(p,C),le&&Pn(p,P),k;if(C===null){for(;P<g.length;P++)C=d(p,g[P],w),C!==null&&(m=i(C,m,P),j===null?k=C:j.sibling=C,j=C);return le&&Pn(p,P),k}for(C=r(p,C);P<g.length;P++)E=y(C,p,P,g[P],w),E!==null&&(e&&E.alternate!==null&&C.delete(E.key===null?P:E.key),m=i(E,m,P),j===null?k=E:j.sibling=E,j=E);return e&&C.forEach(function(B){return t(p,B)}),le&&Pn(p,P),k}function b(p,m,g,w){var k=Vr(g);if(typeof k!="function")throw Error(A(150));if(g=k.call(g),g==null)throw Error(A(151));for(var j=k=null,C=m,P=m=0,E=null,M=g.next();C!==null&&!M.done;P++,M=g.next()){C.index>P?(E=C,C=null):E=C.sibling;var B=f(p,C,M.value,w);if(B===null){C===null&&(C=E);break}e&&C&&B.alternate===null&&t(p,C),m=i(B,m,P),j===null?k=B:j.sibling=B,j=B,C=E}if(M.done)return n(p,C),le&&Pn(p,P),k;if(C===null){for(;!M.done;P++,M=g.next())M=d(p,M.value,w),M!==null&&(m=i(M,m,P),j===null?k=M:j.sibling=M,j=M);return le&&Pn(p,P),k}for(C=r(p,C);!M.done;P++,M=g.next())M=y(C,p,P,M.value,w),M!==null&&(e&&M.alternate!==null&&C.delete(M.key===null?P:M.key),m=i(M,m,P),j===null?k=M:j.sibling=M,j=M);return e&&C.forEach(function(q){return t(p,q)}),le&&Pn(p,P),k}function S(p,m,g,w){if(typeof g=="object"&&g!==null&&g.type===tr&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case Xs:e:{for(var k=g.key,j=m;j!==null;){if(j.key===k){if(k=g.type,k===tr){if(j.tag===7){n(p,j.sibling),m=s(j,g.props.children),m.return=p,p=m;break e}}else if(j.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Qt&&Ou(k)===j.type){n(p,j.sibling),m=s(j,g.props),m.ref=$r(p,j,g),m.return=p,p=m;break e}n(p,j);break}else t(p,j);j=j.sibling}g.type===tr?(m=In(g.props.children,p.mode,w,g.key),m.return=p,p=m):(w=Ni(g.type,g.key,g.props,null,p.mode,w),w.ref=$r(p,m,g),w.return=p,p=w)}return o(p);case er:e:{for(j=g.key;m!==null;){if(m.key===j)if(m.tag===4&&m.stateNode.containerInfo===g.containerInfo&&m.stateNode.implementation===g.implementation){n(p,m.sibling),m=s(m,g.children||[]),m.return=p,p=m;break e}else{n(p,m);break}else t(p,m);m=m.sibling}m=ha(g,p.mode,w),m.return=p,p=m}return o(p);case Qt:return j=g._init,S(p,m,j(g._payload),w)}if(Yr(g))return x(p,m,g,w);if(Vr(g))return b(p,m,g,w);ai(p,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,m!==null&&m.tag===6?(n(p,m.sibling),m=s(m,g),m.return=p,p=m):(n(p,m),m=da(g,p.mode,w),m.return=p,p=m),o(p)):n(p,m)}return S}var Tr=Gf(!0),Vf=Gf(!1),Wi=bn(null),qi=null,cr=null,oc=null;function ac(){oc=cr=qi=null}function lc(e){var t=Wi.current;ie(Wi),e._currentValue=t}function il(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function br(e,t){qi=e,oc=cr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(He=!0),e.firstContext=null)}function ct(e){var t=e._currentValue;if(oc!==e)if(e={context:e,memoizedValue:t,next:null},cr===null){if(qi===null)throw Error(A(308));cr=e,qi.dependencies={lanes:0,firstContext:e}}else cr=cr.next=e;return t}var Mn=null;function cc(e){Mn===null?Mn=[e]:Mn.push(e)}function Bf(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,cc(t)):(n.next=s.next,s.next=n),t.interleaved=n,Vt(e,r)}function Vt(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Xt=!1;function uc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function zf(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Rt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ln(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Y&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Vt(e,n)}return s=r.interleaved,s===null?(t.next=t,cc(r)):(t.next=s.next,s.next=t),r.interleaved=t,Vt(e,n)}function ji(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Ql(e,n)}}function Fu(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=t:i=i.next=t}else s=i=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ki(e,t,n,r){var s=e.updateQueue;Xt=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var c=a,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var h=e.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=u:a.next=u,h.lastBaseUpdate=c))}if(i!==null){var d=s.baseState;o=0,h=u=c=null,a=i;do{var f=a.lane,y=a.eventTime;if((r&f)===f){h!==null&&(h=h.next={eventTime:y,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var x=e,b=a;switch(f=t,y=n,b.tag){case 1:if(x=b.payload,typeof x=="function"){d=x.call(y,d,f);break e}d=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=b.payload,f=typeof x=="function"?x.call(y,d,f):x,f==null)break e;d=fe({},d,f);break e;case 2:Xt=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else y={eventTime:y,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(u=h=y,c=d):h=h.next=y,o|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(1);if(h===null&&(c=d),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=h,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);Vn|=o,e.lanes=o,e.memoizedState=d}}function Gu(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(A(191,s));s.call(r)}}}var Vs={},Ct=bn(Vs),Ps=bn(Vs),Ts=bn(Vs);function Dn(e){if(e===Vs)throw Error(A(174));return e}function dc(e,t){switch(ne(Ts,t),ne(Ps,e),ne(Ct,Vs),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ga(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ga(t,e)}ie(Ct),ne(Ct,t)}function Er(){ie(Ct),ie(Ps),ie(Ts)}function Hf(e){Dn(Ts.current);var t=Dn(Ct.current),n=Ga(t,e.type);t!==n&&(ne(Ps,e),ne(Ct,n))}function hc(e){Ps.current===e&&(ie(Ct),ie(Ps))}var ce=bn(0);function Qi(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ia=[];function fc(){for(var e=0;e<ia.length;e++)ia[e]._workInProgressVersionPrimary=null;ia.length=0}var ki=Ht.ReactCurrentDispatcher,oa=Ht.ReactCurrentBatchConfig,Gn=0,he=null,be=null,ke=null,Xi=!1,os=!1,Es=0,vx=0;function _e(){throw Error(A(321))}function mc(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!vt(e[n],t[n]))return!1;return!0}function pc(e,t,n,r,s,i){if(Gn=i,he=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ki.current=e===null||e.memoizedState===null?Sx:jx,e=n(r,s),os){i=0;do{if(os=!1,Es=0,25<=i)throw Error(A(301));i+=1,ke=be=null,t.updateQueue=null,ki.current=kx,e=n(r,s)}while(os)}if(ki.current=Yi,t=be!==null&&be.next!==null,Gn=0,ke=be=he=null,Xi=!1,t)throw Error(A(300));return e}function gc(){var e=Es!==0;return Es=0,e}function bt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ke===null?he.memoizedState=ke=e:ke=ke.next=e,ke}function ut(){if(be===null){var e=he.alternate;e=e!==null?e.memoizedState:null}else e=be.next;var t=ke===null?he.memoizedState:ke.next;if(t!==null)ke=t,be=e;else{if(e===null)throw Error(A(310));be=e,e={memoizedState:be.memoizedState,baseState:be.baseState,baseQueue:be.baseQueue,queue:be.queue,next:null},ke===null?he.memoizedState=ke=e:ke=ke.next=e}return ke}function Ns(e,t){return typeof t=="function"?t(e):t}function aa(e){var t=ut(),n=t.queue;if(n===null)throw Error(A(311));n.lastRenderedReducer=e;var r=be,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,c=null,u=i;do{var h=u.lane;if((Gn&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(a=c=d,o=r):c=c.next=d,he.lanes|=h,Vn|=h}u=u.next}while(u!==null&&u!==i);c===null?o=r:c.next=a,vt(r,t.memoizedState)||(He=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do i=s.lane,he.lanes|=i,Vn|=i,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function la(e){var t=ut(),n=t.queue;if(n===null)throw Error(A(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);vt(i,t.memoizedState)||(He=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function Uf(){}function $f(e,t){var n=he,r=ut(),s=t(),i=!vt(r.memoizedState,s);if(i&&(r.memoizedState=s,He=!0),r=r.queue,xc(Kf.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||ke!==null&&ke.memoizedState.tag&1){if(n.flags|=2048,_s(9,qf.bind(null,n,r,s,t),void 0,null),Ce===null)throw Error(A(349));Gn&30||Wf(n,t,s)}return s}function Wf(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=he.updateQueue,t===null?(t={lastEffect:null,stores:null},he.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function qf(e,t,n,r){t.value=n,t.getSnapshot=r,Qf(t)&&Xf(e)}function Kf(e,t,n){return n(function(){Qf(t)&&Xf(e)})}function Qf(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!vt(e,n)}catch{return!0}}function Xf(e){var t=Vt(e,1);t!==null&&xt(t,e,1,-1)}function Vu(e){var t=bt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ns,lastRenderedState:e},t.queue=e,e=e.dispatch=bx.bind(null,he,e),[t.memoizedState,e]}function _s(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=he.updateQueue,t===null?(t={lastEffect:null,stores:null},he.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Yf(){return ut().memoizedState}function Ci(e,t,n,r){var s=bt();he.flags|=e,s.memoizedState=_s(1|t,n,void 0,r===void 0?null:r)}function bo(e,t,n,r){var s=ut();r=r===void 0?null:r;var i=void 0;if(be!==null){var o=be.memoizedState;if(i=o.destroy,r!==null&&mc(r,o.deps)){s.memoizedState=_s(t,n,i,r);return}}he.flags|=e,s.memoizedState=_s(1|t,n,i,r)}function Bu(e,t){return Ci(8390656,8,e,t)}function xc(e,t){return bo(2048,8,e,t)}function Jf(e,t){return bo(4,2,e,t)}function Zf(e,t){return bo(4,4,e,t)}function em(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function tm(e,t,n){return n=n!=null?n.concat([e]):null,bo(4,4,em.bind(null,t,e),n)}function vc(){}function nm(e,t){var n=ut();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&mc(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function rm(e,t){var n=ut();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&mc(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function sm(e,t,n){return Gn&21?(vt(n,t)||(n=cf(),he.lanes|=n,Vn|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,He=!0),e.memoizedState=n)}function yx(e,t){var n=ee;ee=n!==0&&4>n?n:4,e(!0);var r=oa.transition;oa.transition={};try{e(!1),t()}finally{ee=n,oa.transition=r}}function im(){return ut().memoizedState}function wx(e,t,n){var r=un(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},om(e))am(t,n);else if(n=Bf(e,t,n,r),n!==null){var s=Ge();xt(n,e,r,s),lm(n,t,r)}}function bx(e,t,n){var r=un(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(om(e))am(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,vt(a,o)){var c=t.interleaved;c===null?(s.next=s,cc(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}n=Bf(e,t,s,r),n!==null&&(s=Ge(),xt(n,e,r,s),lm(n,t,r))}}function om(e){var t=e.alternate;return e===he||t!==null&&t===he}function am(e,t){os=Xi=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function lm(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Ql(e,n)}}var Yi={readContext:ct,useCallback:_e,useContext:_e,useEffect:_e,useImperativeHandle:_e,useInsertionEffect:_e,useLayoutEffect:_e,useMemo:_e,useReducer:_e,useRef:_e,useState:_e,useDebugValue:_e,useDeferredValue:_e,useTransition:_e,useMutableSource:_e,useSyncExternalStore:_e,useId:_e,unstable_isNewReconciler:!1},Sx={readContext:ct,useCallback:function(e,t){return bt().memoizedState=[e,t===void 0?null:t],e},useContext:ct,useEffect:Bu,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Ci(4194308,4,em.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ci(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ci(4,2,e,t)},useMemo:function(e,t){var n=bt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=bt();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=wx.bind(null,he,e),[r.memoizedState,e]},useRef:function(e){var t=bt();return e={current:e},t.memoizedState=e},useState:Vu,useDebugValue:vc,useDeferredValue:function(e){return bt().memoizedState=e},useTransition:function(){var e=Vu(!1),t=e[0];return e=yx.bind(null,e[1]),bt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=he,s=bt();if(le){if(n===void 0)throw Error(A(407));n=n()}else{if(n=t(),Ce===null)throw Error(A(349));Gn&30||Wf(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,Bu(Kf.bind(null,r,i,e),[e]),r.flags|=2048,_s(9,qf.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=bt(),t=Ce.identifierPrefix;if(le){var n=At,r=_t;n=(r&~(1<<32-gt(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Es++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=vx++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},jx={readContext:ct,useCallback:nm,useContext:ct,useEffect:xc,useImperativeHandle:tm,useInsertionEffect:Jf,useLayoutEffect:Zf,useMemo:rm,useReducer:aa,useRef:Yf,useState:function(){return aa(Ns)},useDebugValue:vc,useDeferredValue:function(e){var t=ut();return sm(t,be.memoizedState,e)},useTransition:function(){var e=aa(Ns)[0],t=ut().memoizedState;return[e,t]},useMutableSource:Uf,useSyncExternalStore:$f,useId:im,unstable_isNewReconciler:!1},kx={readContext:ct,useCallback:nm,useContext:ct,useEffect:xc,useImperativeHandle:tm,useInsertionEffect:Jf,useLayoutEffect:Zf,useMemo:rm,useReducer:la,useRef:Yf,useState:function(){return la(Ns)},useDebugValue:vc,useDeferredValue:function(e){var t=ut();return be===null?t.memoizedState=e:sm(t,be.memoizedState,e)},useTransition:function(){var e=la(Ns)[0],t=ut().memoizedState;return[e,t]},useMutableSource:Uf,useSyncExternalStore:$f,useId:im,unstable_isNewReconciler:!1};function ft(e,t){if(e&&e.defaultProps){t=fe({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function ol(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:fe({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var So={isMounted:function(e){return(e=e._reactInternals)?Qn(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Ge(),s=un(e),i=Rt(r,s);i.payload=t,n!=null&&(i.callback=n),t=ln(e,i,s),t!==null&&(xt(t,e,s,r),ji(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Ge(),s=un(e),i=Rt(r,s);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=ln(e,i,s),t!==null&&(xt(t,e,s,r),ji(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ge(),r=un(e),s=Rt(n,r);s.tag=2,t!=null&&(s.callback=t),t=ln(e,s,r),t!==null&&(xt(t,e,r,n),ji(t,e,r))}};function zu(e,t,n,r,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,o):t.prototype&&t.prototype.isPureReactComponent?!Ss(n,r)||!Ss(s,i):!0}function cm(e,t,n){var r=!1,s=pn,i=t.contextType;return typeof i=="object"&&i!==null?i=ct(i):(s=$e(t)?On:Re.current,r=t.contextTypes,i=(r=r!=null)?Cr(e,s):pn),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=So,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function Hu(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&So.enqueueReplaceState(t,t.state,null)}function al(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},uc(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=ct(i):(i=$e(t)?On:Re.current,s.context=Cr(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(ol(e,t,i,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&So.enqueueReplaceState(s,s.state,null),Ki(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Nr(e,t){try{var n="",r=t;do n+=J0(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function ca(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function ll(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Cx=typeof WeakMap=="function"?WeakMap:Map;function um(e,t,n){n=Rt(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Zi||(Zi=!0,vl=r),ll(e,t)},n}function dm(e,t,n){n=Rt(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){ll(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){ll(e,t),typeof r!="function"&&(cn===null?cn=new Set([this]):cn.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function Uu(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Cx;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=Gx.bind(null,e,t,n),t.then(e,e))}function $u(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Wu(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Rt(-1,1),t.tag=2,ln(n,t,1))),n.lanes|=1),e)}var Px=Ht.ReactCurrentOwner,He=!1;function Fe(e,t,n,r){t.child=e===null?Vf(t,null,n,r):Tr(t,e.child,n,r)}function qu(e,t,n,r,s){n=n.render;var i=t.ref;return br(t,s),r=pc(e,t,n,r,i,s),n=gc(),e!==null&&!He?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Bt(e,t,s)):(le&&n&&rc(t),t.flags|=1,Fe(e,t,r,s),t.child)}function Ku(e,t,n,r,s){if(e===null){var i=n.type;return typeof i=="function"&&!Pc(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,hm(e,t,i,r,s)):(e=Ni(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Ss,n(o,r)&&e.ref===t.ref)return Bt(e,t,s)}return t.flags|=1,e=dn(i,r),e.ref=t.ref,e.return=t,t.child=e}function hm(e,t,n,r,s){if(e!==null){var i=e.memoizedProps;if(Ss(i,r)&&e.ref===t.ref)if(He=!1,t.pendingProps=r=i,(e.lanes&s)!==0)e.flags&131072&&(He=!0);else return t.lanes=e.lanes,Bt(e,t,s)}return cl(e,t,n,r,s)}function fm(e,t,n){var r=t.pendingProps,s=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ne(dr,Ke),Ke|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ne(dr,Ke),Ke|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,ne(dr,Ke),Ke|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,ne(dr,Ke),Ke|=r;return Fe(e,t,s,n),t.child}function mm(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function cl(e,t,n,r,s){var i=$e(n)?On:Re.current;return i=Cr(t,i),br(t,s),n=pc(e,t,n,r,i,s),r=gc(),e!==null&&!He?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Bt(e,t,s)):(le&&r&&rc(t),t.flags|=1,Fe(e,t,n,s),t.child)}function Qu(e,t,n,r,s){if($e(n)){var i=!0;Hi(t)}else i=!1;if(br(t,s),t.stateNode===null)Pi(e,t),cm(t,n,r),al(t,n,r,s),r=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=ct(u):(u=$e(n)?On:Re.current,u=Cr(t,u));var h=n.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||c!==u)&&Hu(t,o,r,u),Xt=!1;var f=t.memoizedState;o.state=f,Ki(t,r,o,s),c=t.memoizedState,a!==r||f!==c||Ue.current||Xt?(typeof h=="function"&&(ol(t,n,h,r),c=t.memoizedState),(a=Xt||zu(t,n,a,r,f,c,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),o.props=r,o.state=c,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,zf(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:ft(t.type,a),o.props=u,d=t.pendingProps,f=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=ct(c):(c=$e(n)?On:Re.current,c=Cr(t,c));var y=n.getDerivedStateFromProps;(h=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==c)&&Hu(t,o,r,c),Xt=!1,f=t.memoizedState,o.state=f,Ki(t,r,o,s);var x=t.memoizedState;a!==d||f!==x||Ue.current||Xt?(typeof y=="function"&&(ol(t,n,y,r),x=t.memoizedState),(u=Xt||zu(t,n,u,r,f,x,c)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,x,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,x,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=x),o.props=r,o.state=x,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return ul(e,t,n,r,i,s)}function ul(e,t,n,r,s,i){mm(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return s&&Lu(t,n,!1),Bt(e,t,i);r=t.stateNode,Px.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=Tr(t,e.child,null,i),t.child=Tr(t,null,a,i)):Fe(e,t,a,i),t.memoizedState=r.state,s&&Lu(t,n,!0),t.child}function pm(e){var t=e.stateNode;t.pendingContext?Du(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Du(e,t.context,!1),dc(e,t.containerInfo)}function Xu(e,t,n,r,s){return Pr(),ic(s),t.flags|=256,Fe(e,t,n,r),t.child}var dl={dehydrated:null,treeContext:null,retryLane:0};function hl(e){return{baseLanes:e,cachePool:null,transitions:null}}function gm(e,t,n){var r=t.pendingProps,s=ce.current,i=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(s&2)!==0),a?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),ne(ce,s&1),e===null)return sl(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,i?(r=t.mode,i=t.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Co(o,r,0,null),e=In(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=hl(n),t.memoizedState=dl,e):yc(t,o));if(s=e.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return Tx(e,t,o,r,a,s,n);if(i){i=r.fallback,o=t.mode,s=e.child,a=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=dn(s,c),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=dn(a,i):(i=In(i,o,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,o=e.child.memoizedState,o=o===null?hl(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~n,t.memoizedState=dl,r}return i=e.child,e=i.sibling,r=dn(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function yc(e,t){return t=Co({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function li(e,t,n,r){return r!==null&&ic(r),Tr(t,e.child,null,n),e=yc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Tx(e,t,n,r,s,i,o){if(n)return t.flags&256?(t.flags&=-257,r=ca(Error(A(422))),li(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,s=t.mode,r=Co({mode:"visible",children:r.children},s,0,null),i=In(i,s,o,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&Tr(t,e.child,null,o),t.child.memoizedState=hl(o),t.memoizedState=dl,i);if(!(t.mode&1))return li(e,t,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(A(419)),r=ca(i,r,void 0),li(e,t,o,r)}if(a=(o&e.childLanes)!==0,He||a){if(r=Ce,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Vt(e,s),xt(r,e,s,-1))}return Cc(),r=ca(Error(A(421))),li(e,t,o,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=Vx.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,Qe=an(s.nextSibling),Xe=t,le=!0,pt=null,e!==null&&(it[ot++]=_t,it[ot++]=At,it[ot++]=Fn,_t=e.id,At=e.overflow,Fn=t),t=yc(t,r.children),t.flags|=4096,t)}function Yu(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),il(e.return,t,n)}function ua(e,t,n,r,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function xm(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(Fe(e,t,r.children,n),r=ce.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Yu(e,n,t);else if(e.tag===19)Yu(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ne(ce,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&Qi(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),ua(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Qi(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}ua(t,!0,n,null,i);break;case"together":ua(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Pi(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Bt(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Vn|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(A(153));if(t.child!==null){for(e=t.child,n=dn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=dn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Ex(e,t,n){switch(t.tag){case 3:pm(t),Pr();break;case 5:Hf(t);break;case 1:$e(t.type)&&Hi(t);break;case 4:dc(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;ne(Wi,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(ne(ce,ce.current&1),t.flags|=128,null):n&t.child.childLanes?gm(e,t,n):(ne(ce,ce.current&1),e=Bt(e,t,n),e!==null?e.sibling:null);ne(ce,ce.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return xm(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ne(ce,ce.current),r)break;return null;case 22:case 23:return t.lanes=0,fm(e,t,n)}return Bt(e,t,n)}var vm,fl,ym,wm;vm=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};fl=function(){};ym=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Dn(Ct.current);var i=null;switch(n){case"input":s=Ra(e,s),r=Ra(e,r),i=[];break;case"select":s=fe({},s,{value:void 0}),r=fe({},r,{value:void 0}),i=[];break;case"textarea":s=Fa(e,s),r=Fa(e,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Bi)}Va(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ps.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(a=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==a&&(c!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ps.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&se("scroll",e),i||a===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};wm=function(e,t,n,r){n!==r&&(t.flags|=4)};function Wr(e,t){if(!le)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ae(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Nx(e,t,n){var r=t.pendingProps;switch(sc(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ae(t),null;case 1:return $e(t.type)&&zi(),Ae(t),null;case 3:return r=t.stateNode,Er(),ie(Ue),ie(Re),fc(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(oi(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,pt!==null&&(bl(pt),pt=null))),fl(e,t),Ae(t),null;case 5:hc(t);var s=Dn(Ts.current);if(n=t.type,e!==null&&t.stateNode!=null)ym(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(A(166));return Ae(t),null}if(e=Dn(Ct.current),oi(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[St]=t,r[Cs]=i,e=(t.mode&1)!==0,n){case"dialog":se("cancel",r),se("close",r);break;case"iframe":case"object":case"embed":se("load",r);break;case"video":case"audio":for(s=0;s<Zr.length;s++)se(Zr[s],r);break;case"source":se("error",r);break;case"img":case"image":case"link":se("error",r),se("load",r);break;case"details":se("toggle",r);break;case"input":ou(r,i),se("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},se("invalid",r);break;case"textarea":lu(r,i),se("invalid",r)}Va(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&ii(r.textContent,a,e),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&ii(r.textContent,a,e),s=["children",""+a]):ps.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&se("scroll",r)}switch(n){case"input":Ys(r),au(r,i,!0);break;case"textarea":Ys(r),cu(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Bi)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=qh(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[St]=t,e[Cs]=r,vm(e,t,!1,!1),t.stateNode=e;e:{switch(o=Ba(n,r),n){case"dialog":se("cancel",e),se("close",e),s=r;break;case"iframe":case"object":case"embed":se("load",e),s=r;break;case"video":case"audio":for(s=0;s<Zr.length;s++)se(Zr[s],e);s=r;break;case"source":se("error",e),s=r;break;case"img":case"image":case"link":se("error",e),se("load",e),s=r;break;case"details":se("toggle",e),s=r;break;case"input":ou(e,r),s=Ra(e,r),se("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=fe({},r,{value:void 0}),se("invalid",e);break;case"textarea":lu(e,r),s=Fa(e,r),se("invalid",e);break;default:s=r}Va(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var c=a[i];i==="style"?Xh(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Kh(e,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&gs(e,c):typeof c=="number"&&gs(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ps.hasOwnProperty(i)?c!=null&&i==="onScroll"&&se("scroll",e):c!=null&&Hl(e,i,c,o))}switch(n){case"input":Ys(e),au(e,r,!1);break;case"textarea":Ys(e),cu(e);break;case"option":r.value!=null&&e.setAttribute("value",""+mn(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?xr(e,!!r.multiple,i,!1):r.defaultValue!=null&&xr(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Bi)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ae(t),null;case 6:if(e&&t.stateNode!=null)wm(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(A(166));if(n=Dn(Ts.current),Dn(Ct.current),oi(t)){if(r=t.stateNode,n=t.memoizedProps,r[St]=t,(i=r.nodeValue!==n)&&(e=Xe,e!==null))switch(e.tag){case 3:ii(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ii(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[St]=t,t.stateNode=r}return Ae(t),null;case 13:if(ie(ce),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(le&&Qe!==null&&t.mode&1&&!(t.flags&128))Ff(),Pr(),t.flags|=98560,i=!1;else if(i=oi(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(A(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(A(317));i[St]=t}else Pr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ae(t),i=!1}else pt!==null&&(bl(pt),pt=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||ce.current&1?Se===0&&(Se=3):Cc())),t.updateQueue!==null&&(t.flags|=4),Ae(t),null);case 4:return Er(),fl(e,t),e===null&&js(t.stateNode.containerInfo),Ae(t),null;case 10:return lc(t.type._context),Ae(t),null;case 17:return $e(t.type)&&zi(),Ae(t),null;case 19:if(ie(ce),i=t.memoizedState,i===null)return Ae(t),null;if(r=(t.flags&128)!==0,o=i.rendering,o===null)if(r)Wr(i,!1);else{if(Se!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Qi(e),o!==null){for(t.flags|=128,Wr(i,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ne(ce,ce.current&1|2),t.child}e=e.sibling}i.tail!==null&&xe()>_r&&(t.flags|=128,r=!0,Wr(i,!1),t.lanes=4194304)}else{if(!r)if(e=Qi(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Wr(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!le)return Ae(t),null}else 2*xe()-i.renderingStartTime>_r&&n!==1073741824&&(t.flags|=128,r=!0,Wr(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(n=i.last,n!==null?n.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=xe(),t.sibling=null,n=ce.current,ne(ce,r?n&1|2:n&1),t):(Ae(t),null);case 22:case 23:return kc(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Ke&1073741824&&(Ae(t),t.subtreeFlags&6&&(t.flags|=8192)):Ae(t),null;case 24:return null;case 25:return null}throw Error(A(156,t.tag))}function _x(e,t){switch(sc(t),t.tag){case 1:return $e(t.type)&&zi(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Er(),ie(Ue),ie(Re),fc(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return hc(t),null;case 13:if(ie(ce),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(A(340));Pr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ie(ce),null;case 4:return Er(),null;case 10:return lc(t.type._context),null;case 22:case 23:return kc(),null;case 24:return null;default:return null}}var ci=!1,De=!1,Ax=typeof WeakSet=="function"?WeakSet:Set,I=null;function ur(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){me(e,t,r)}else n.current=null}function ml(e,t,n){try{n()}catch(r){me(e,t,r)}}var Ju=!1;function Mx(e,t){if(Ya=Fi,e=Cf(),nc(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,u=0,h=0,d=e,f=null;t:for(;;){for(var y;d!==n||s!==0&&d.nodeType!==3||(a=o+s),d!==i||r!==0&&d.nodeType!==3||(c=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(y=d.firstChild)!==null;)f=d,d=y;for(;;){if(d===e)break t;if(f===n&&++u===s&&(a=o),f===i&&++h===r&&(c=o),(y=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=y}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ja={focusedElem:e,selectionRange:n},Fi=!1,I=t;I!==null;)if(t=I,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,I=e;else for(;I!==null;){t=I;try{var x=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var b=x.memoizedProps,S=x.memoizedState,p=t.stateNode,m=p.getSnapshotBeforeUpdate(t.elementType===t.type?b:ft(t.type,b),S);p.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var g=t.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(A(163))}}catch(w){me(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,I=e;break}I=t.return}return x=Ju,Ju=!1,x}function as(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&ml(t,n,i)}s=s.next}while(s!==r)}}function jo(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function pl(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function bm(e){var t=e.alternate;t!==null&&(e.alternate=null,bm(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[St],delete t[Cs],delete t[tl],delete t[mx],delete t[px])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Sm(e){return e.tag===5||e.tag===3||e.tag===4}function Zu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Sm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function gl(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Bi));else if(r!==4&&(e=e.child,e!==null))for(gl(e,t,n),e=e.sibling;e!==null;)gl(e,t,n),e=e.sibling}function xl(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(xl(e,t,n),e=e.sibling;e!==null;)xl(e,t,n),e=e.sibling}var Te=null,mt=!1;function Wt(e,t,n){for(n=n.child;n!==null;)jm(e,t,n),n=n.sibling}function jm(e,t,n){if(kt&&typeof kt.onCommitFiberUnmount=="function")try{kt.onCommitFiberUnmount(po,n)}catch{}switch(n.tag){case 5:De||ur(n,t);case 6:var r=Te,s=mt;Te=null,Wt(e,t,n),Te=r,mt=s,Te!==null&&(mt?(e=Te,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Te.removeChild(n.stateNode));break;case 18:Te!==null&&(mt?(e=Te,n=n.stateNode,e.nodeType===8?ra(e.parentNode,n):e.nodeType===1&&ra(e,n),ws(e)):ra(Te,n.stateNode));break;case 4:r=Te,s=mt,Te=n.stateNode.containerInfo,mt=!0,Wt(e,t,n),Te=r,mt=s;break;case 0:case 11:case 14:case 15:if(!De&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&ml(n,t,o),s=s.next}while(s!==r)}Wt(e,t,n);break;case 1:if(!De&&(ur(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){me(n,t,a)}Wt(e,t,n);break;case 21:Wt(e,t,n);break;case 22:n.mode&1?(De=(r=De)||n.memoizedState!==null,Wt(e,t,n),De=r):Wt(e,t,n);break;default:Wt(e,t,n)}}function ed(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Ax),t.forEach(function(r){var s=Bx.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function dt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:Te=a.stateNode,mt=!1;break e;case 3:Te=a.stateNode.containerInfo,mt=!0;break e;case 4:Te=a.stateNode.containerInfo,mt=!0;break e}a=a.return}if(Te===null)throw Error(A(160));jm(i,o,s),Te=null,mt=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){me(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)km(t,e),t=t.sibling}function km(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(dt(t,e),yt(e),r&4){try{as(3,e,e.return),jo(3,e)}catch(b){me(e,e.return,b)}try{as(5,e,e.return)}catch(b){me(e,e.return,b)}}break;case 1:dt(t,e),yt(e),r&512&&n!==null&&ur(n,n.return);break;case 5:if(dt(t,e),yt(e),r&512&&n!==null&&ur(n,n.return),e.flags&32){var s=e.stateNode;try{gs(s,"")}catch(b){me(e,e.return,b)}}if(r&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=n!==null?n.memoizedProps:i,a=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&$h(s,i),Ba(a,o);var u=Ba(a,i);for(o=0;o<c.length;o+=2){var h=c[o],d=c[o+1];h==="style"?Xh(s,d):h==="dangerouslySetInnerHTML"?Kh(s,d):h==="children"?gs(s,d):Hl(s,h,d,u)}switch(a){case"input":Ia(s,i);break;case"textarea":Wh(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var y=i.value;y!=null?xr(s,!!i.multiple,y,!1):f!==!!i.multiple&&(i.defaultValue!=null?xr(s,!!i.multiple,i.defaultValue,!0):xr(s,!!i.multiple,i.multiple?[]:"",!1))}s[Cs]=i}catch(b){me(e,e.return,b)}}break;case 6:if(dt(t,e),yt(e),r&4){if(e.stateNode===null)throw Error(A(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(b){me(e,e.return,b)}}break;case 3:if(dt(t,e),yt(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ws(t.containerInfo)}catch(b){me(e,e.return,b)}break;case 4:dt(t,e),yt(e);break;case 13:dt(t,e),yt(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Sc=xe())),r&4&&ed(e);break;case 22:if(h=n!==null&&n.memoizedState!==null,e.mode&1?(De=(u=De)||h,dt(t,e),De=u):dt(t,e),yt(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!h&&e.mode&1)for(I=e,h=e.child;h!==null;){for(d=I=h;I!==null;){switch(f=I,y=f.child,f.tag){case 0:case 11:case 14:case 15:as(4,f,f.return);break;case 1:ur(f,f.return);var x=f.stateNode;if(typeof x.componentWillUnmount=="function"){r=f,n=f.return;try{t=r,x.props=t.memoizedProps,x.state=t.memoizedState,x.componentWillUnmount()}catch(b){me(r,n,b)}}break;case 5:ur(f,f.return);break;case 22:if(f.memoizedState!==null){nd(d);continue}}y!==null?(y.return=f,I=y):nd(d)}h=h.sibling}e:for(h=null,d=e;;){if(d.tag===5){if(h===null){h=d;try{s=d.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=Qh("display",o))}catch(b){me(e,e.return,b)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(b){me(e,e.return,b)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:dt(t,e),yt(e),r&4&&ed(e);break;case 21:break;default:dt(t,e),yt(e)}}function yt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Sm(n)){var r=n;break e}n=n.return}throw Error(A(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(gs(s,""),r.flags&=-33);var i=Zu(e);xl(e,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Zu(e);gl(e,a,o);break;default:throw Error(A(161))}}catch(c){me(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Dx(e,t,n){I=e,Cm(e)}function Cm(e,t,n){for(var r=(e.mode&1)!==0;I!==null;){var s=I,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||ci;if(!o){var a=s.alternate,c=a!==null&&a.memoizedState!==null||De;a=ci;var u=De;if(ci=o,(De=c)&&!u)for(I=s;I!==null;)o=I,c=o.child,o.tag===22&&o.memoizedState!==null?rd(s):c!==null?(c.return=o,I=c):rd(s);for(;i!==null;)I=i,Cm(i),i=i.sibling;I=s,ci=a,De=u}td(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,I=i):td(e)}}function td(e){for(;I!==null;){var t=I;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:De||jo(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!De)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:ft(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Gu(t,i,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Gu(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&ws(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(A(163))}De||t.flags&512&&pl(t)}catch(f){me(t,t.return,f)}}if(t===e){I=null;break}if(n=t.sibling,n!==null){n.return=t.return,I=n;break}I=t.return}}function nd(e){for(;I!==null;){var t=I;if(t===e){I=null;break}var n=t.sibling;if(n!==null){n.return=t.return,I=n;break}I=t.return}}function rd(e){for(;I!==null;){var t=I;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{jo(4,t)}catch(c){me(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(c){me(t,s,c)}}var i=t.return;try{pl(t)}catch(c){me(t,i,c)}break;case 5:var o=t.return;try{pl(t)}catch(c){me(t,o,c)}}}catch(c){me(t,t.return,c)}if(t===e){I=null;break}var a=t.sibling;if(a!==null){a.return=t.return,I=a;break}I=t.return}}var Lx=Math.ceil,Ji=Ht.ReactCurrentDispatcher,wc=Ht.ReactCurrentOwner,lt=Ht.ReactCurrentBatchConfig,Y=0,Ce=null,we=null,Ee=0,Ke=0,dr=bn(0),Se=0,As=null,Vn=0,ko=0,bc=0,ls=null,ze=null,Sc=0,_r=1/0,Tt=null,Zi=!1,vl=null,cn=null,ui=!1,tn=null,eo=0,cs=0,yl=null,Ti=-1,Ei=0;function Ge(){return Y&6?xe():Ti!==-1?Ti:Ti=xe()}function un(e){return e.mode&1?Y&2&&Ee!==0?Ee&-Ee:xx.transition!==null?(Ei===0&&(Ei=cf()),Ei):(e=ee,e!==0||(e=window.event,e=e===void 0?16:gf(e.type)),e):1}function xt(e,t,n,r){if(50<cs)throw cs=0,yl=null,Error(A(185));Os(e,n,r),(!(Y&2)||e!==Ce)&&(e===Ce&&(!(Y&2)&&(ko|=n),Se===4&&Zt(e,Ee)),We(e,r),n===1&&Y===0&&!(t.mode&1)&&(_r=xe()+500,wo&&Sn()))}function We(e,t){var n=e.callbackNode;xg(e,t);var r=Oi(e,e===Ce?Ee:0);if(r===0)n!==null&&hu(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&hu(n),t===1)e.tag===0?gx(sd.bind(null,e)):Rf(sd.bind(null,e)),hx(function(){!(Y&6)&&Sn()}),n=null;else{switch(uf(r)){case 1:n=Kl;break;case 4:n=af;break;case 16:n=Ii;break;case 536870912:n=lf;break;default:n=Ii}n=Dm(n,Pm.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Pm(e,t){if(Ti=-1,Ei=0,Y&6)throw Error(A(327));var n=e.callbackNode;if(Sr()&&e.callbackNode!==n)return null;var r=Oi(e,e===Ce?Ee:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=to(e,r);else{t=r;var s=Y;Y|=2;var i=Em();(Ce!==e||Ee!==t)&&(Tt=null,_r=xe()+500,Rn(e,t));do try{Ox();break}catch(a){Tm(e,a)}while(1);ac(),Ji.current=i,Y=s,we!==null?t=0:(Ce=null,Ee=0,t=Se)}if(t!==0){if(t===2&&(s=Wa(e),s!==0&&(r=s,t=wl(e,s))),t===1)throw n=As,Rn(e,0),Zt(e,r),We(e,xe()),n;if(t===6)Zt(e,r);else{if(s=e.current.alternate,!(r&30)&&!Rx(s)&&(t=to(e,r),t===2&&(i=Wa(e),i!==0&&(r=i,t=wl(e,i))),t===1))throw n=As,Rn(e,0),Zt(e,r),We(e,xe()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(A(345));case 2:Tn(e,ze,Tt);break;case 3:if(Zt(e,r),(r&130023424)===r&&(t=Sc+500-xe(),10<t)){if(Oi(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){Ge(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=el(Tn.bind(null,e,ze,Tt),t);break}Tn(e,ze,Tt);break;case 4:if(Zt(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var o=31-gt(r);i=1<<o,o=t[o],o>s&&(s=o),r&=~i}if(r=s,r=xe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Lx(r/1960))-r,10<r){e.timeoutHandle=el(Tn.bind(null,e,ze,Tt),r);break}Tn(e,ze,Tt);break;case 5:Tn(e,ze,Tt);break;default:throw Error(A(329))}}}return We(e,xe()),e.callbackNode===n?Pm.bind(null,e):null}function wl(e,t){var n=ls;return e.current.memoizedState.isDehydrated&&(Rn(e,t).flags|=256),e=to(e,t),e!==2&&(t=ze,ze=n,t!==null&&bl(t)),e}function bl(e){ze===null?ze=e:ze.push.apply(ze,e)}function Rx(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!vt(i(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Zt(e,t){for(t&=~bc,t&=~ko,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-gt(t),r=1<<n;e[n]=-1,t&=~r}}function sd(e){if(Y&6)throw Error(A(327));Sr();var t=Oi(e,0);if(!(t&1))return We(e,xe()),null;var n=to(e,t);if(e.tag!==0&&n===2){var r=Wa(e);r!==0&&(t=r,n=wl(e,r))}if(n===1)throw n=As,Rn(e,0),Zt(e,t),We(e,xe()),n;if(n===6)throw Error(A(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Tn(e,ze,Tt),We(e,xe()),null}function jc(e,t){var n=Y;Y|=1;try{return e(t)}finally{Y=n,Y===0&&(_r=xe()+500,wo&&Sn())}}function Bn(e){tn!==null&&tn.tag===0&&!(Y&6)&&Sr();var t=Y;Y|=1;var n=lt.transition,r=ee;try{if(lt.transition=null,ee=1,e)return e()}finally{ee=r,lt.transition=n,Y=t,!(Y&6)&&Sn()}}function kc(){Ke=dr.current,ie(dr)}function Rn(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,dx(n)),we!==null)for(n=we.return;n!==null;){var r=n;switch(sc(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&zi();break;case 3:Er(),ie(Ue),ie(Re),fc();break;case 5:hc(r);break;case 4:Er();break;case 13:ie(ce);break;case 19:ie(ce);break;case 10:lc(r.type._context);break;case 22:case 23:kc()}n=n.return}if(Ce=e,we=e=dn(e.current,null),Ee=Ke=t,Se=0,As=null,bc=ko=Vn=0,ze=ls=null,Mn!==null){for(t=0;t<Mn.length;t++)if(n=Mn[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Mn=null}return e}function Tm(e,t){do{var n=we;try{if(ac(),ki.current=Yi,Xi){for(var r=he.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Xi=!1}if(Gn=0,ke=be=he=null,os=!1,Es=0,wc.current=null,n===null||n.return===null){Se=1,As=t,we=null;break}e:{var i=e,o=n.return,a=n,c=t;if(t=Ee,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var y=$u(o);if(y!==null){y.flags&=-257,Wu(y,o,a,i,t),y.mode&1&&Uu(i,u,t),t=y,c=u;var x=t.updateQueue;if(x===null){var b=new Set;b.add(c),t.updateQueue=b}else x.add(c);break e}else{if(!(t&1)){Uu(i,u,t),Cc();break e}c=Error(A(426))}}else if(le&&a.mode&1){var S=$u(o);if(S!==null){!(S.flags&65536)&&(S.flags|=256),Wu(S,o,a,i,t),ic(Nr(c,a));break e}}i=c=Nr(c,a),Se!==4&&(Se=2),ls===null?ls=[i]:ls.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var p=um(i,c,t);Fu(i,p);break e;case 1:a=c;var m=i.type,g=i.stateNode;if(!(i.flags&128)&&(typeof m.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(cn===null||!cn.has(g)))){i.flags|=65536,t&=-t,i.lanes|=t;var w=dm(i,a,t);Fu(i,w);break e}}i=i.return}while(i!==null)}_m(n)}catch(k){t=k,we===n&&n!==null&&(we=n=n.return);continue}break}while(1)}function Em(){var e=Ji.current;return Ji.current=Yi,e===null?Yi:e}function Cc(){(Se===0||Se===3||Se===2)&&(Se=4),Ce===null||!(Vn&268435455)&&!(ko&268435455)||Zt(Ce,Ee)}function to(e,t){var n=Y;Y|=2;var r=Em();(Ce!==e||Ee!==t)&&(Tt=null,Rn(e,t));do try{Ix();break}catch(s){Tm(e,s)}while(1);if(ac(),Y=n,Ji.current=r,we!==null)throw Error(A(261));return Ce=null,Ee=0,Se}function Ix(){for(;we!==null;)Nm(we)}function Ox(){for(;we!==null&&!lg();)Nm(we)}function Nm(e){var t=Mm(e.alternate,e,Ke);e.memoizedProps=e.pendingProps,t===null?_m(e):we=t,wc.current=null}function _m(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=_x(n,t),n!==null){n.flags&=32767,we=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Se=6,we=null;return}}else if(n=Nx(n,t,Ke),n!==null){we=n;return}if(t=t.sibling,t!==null){we=t;return}we=t=e}while(t!==null);Se===0&&(Se=5)}function Tn(e,t,n){var r=ee,s=lt.transition;try{lt.transition=null,ee=1,Fx(e,t,n,r)}finally{lt.transition=s,ee=r}return null}function Fx(e,t,n,r){do Sr();while(tn!==null);if(Y&6)throw Error(A(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(A(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(vg(e,i),e===Ce&&(we=Ce=null,Ee=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ui||(ui=!0,Dm(Ii,function(){return Sr(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=lt.transition,lt.transition=null;var o=ee;ee=1;var a=Y;Y|=4,wc.current=null,Mx(e,n),km(n,e),sx(Ja),Fi=!!Ya,Ja=Ya=null,e.current=n,Dx(n),cg(),Y=a,ee=o,lt.transition=i}else e.current=n;if(ui&&(ui=!1,tn=e,eo=s),i=e.pendingLanes,i===0&&(cn=null),hg(n.stateNode),We(e,xe()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Zi)throw Zi=!1,e=vl,vl=null,e;return eo&1&&e.tag!==0&&Sr(),i=e.pendingLanes,i&1?e===yl?cs++:(cs=0,yl=e):cs=0,Sn(),null}function Sr(){if(tn!==null){var e=uf(eo),t=lt.transition,n=ee;try{if(lt.transition=null,ee=16>e?16:e,tn===null)var r=!1;else{if(e=tn,tn=null,eo=0,Y&6)throw Error(A(331));var s=Y;for(Y|=4,I=e.current;I!==null;){var i=I,o=i.child;if(I.flags&16){var a=i.deletions;if(a!==null){for(var c=0;c<a.length;c++){var u=a[c];for(I=u;I!==null;){var h=I;switch(h.tag){case 0:case 11:case 15:as(8,h,i)}var d=h.child;if(d!==null)d.return=h,I=d;else for(;I!==null;){h=I;var f=h.sibling,y=h.return;if(bm(h),h===u){I=null;break}if(f!==null){f.return=y,I=f;break}I=y}}}var x=i.alternate;if(x!==null){var b=x.child;if(b!==null){x.child=null;do{var S=b.sibling;b.sibling=null,b=S}while(b!==null)}}I=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,I=o;else e:for(;I!==null;){if(i=I,i.flags&2048)switch(i.tag){case 0:case 11:case 15:as(9,i,i.return)}var p=i.sibling;if(p!==null){p.return=i.return,I=p;break e}I=i.return}}var m=e.current;for(I=m;I!==null;){o=I;var g=o.child;if(o.subtreeFlags&2064&&g!==null)g.return=o,I=g;else e:for(o=m;I!==null;){if(a=I,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:jo(9,a)}}catch(k){me(a,a.return,k)}if(a===o){I=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,I=w;break e}I=a.return}}if(Y=s,Sn(),kt&&typeof kt.onPostCommitFiberRoot=="function")try{kt.onPostCommitFiberRoot(po,e)}catch{}r=!0}return r}finally{ee=n,lt.transition=t}}return!1}function id(e,t,n){t=Nr(n,t),t=um(e,t,1),e=ln(e,t,1),t=Ge(),e!==null&&(Os(e,1,t),We(e,t))}function me(e,t,n){if(e.tag===3)id(e,e,n);else for(;t!==null;){if(t.tag===3){id(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(cn===null||!cn.has(r))){e=Nr(n,e),e=dm(t,e,1),t=ln(t,e,1),e=Ge(),t!==null&&(Os(t,1,e),We(t,e));break}}t=t.return}}function Gx(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Ge(),e.pingedLanes|=e.suspendedLanes&n,Ce===e&&(Ee&n)===n&&(Se===4||Se===3&&(Ee&130023424)===Ee&&500>xe()-Sc?Rn(e,0):bc|=n),We(e,t)}function Am(e,t){t===0&&(e.mode&1?(t=ei,ei<<=1,!(ei&130023424)&&(ei=4194304)):t=1);var n=Ge();e=Vt(e,t),e!==null&&(Os(e,t,n),We(e,n))}function Vx(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Am(e,n)}function Bx(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(A(314))}r!==null&&r.delete(t),Am(e,n)}var Mm;Mm=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ue.current)He=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return He=!1,Ex(e,t,n);He=!!(e.flags&131072)}else He=!1,le&&t.flags&1048576&&If(t,$i,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Pi(e,t),e=t.pendingProps;var s=Cr(t,Re.current);br(t,n),s=pc(null,t,r,e,s,n);var i=gc();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,$e(r)?(i=!0,Hi(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,uc(t),s.updater=So,t.stateNode=s,s._reactInternals=t,al(t,r,e,n),t=ul(null,t,r,!0,i,n)):(t.tag=0,le&&i&&rc(t),Fe(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Pi(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=Hx(r),e=ft(r,e),s){case 0:t=cl(null,t,r,e,n);break e;case 1:t=Qu(null,t,r,e,n);break e;case 11:t=qu(null,t,r,e,n);break e;case 14:t=Ku(null,t,r,ft(r.type,e),n);break e}throw Error(A(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:ft(r,s),cl(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:ft(r,s),Qu(e,t,r,s,n);case 3:e:{if(pm(t),e===null)throw Error(A(387));r=t.pendingProps,i=t.memoizedState,s=i.element,zf(e,t),Ki(t,r,null,n);var o=t.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=Nr(Error(A(423)),t),t=Xu(e,t,r,n,s);break e}else if(r!==s){s=Nr(Error(A(424)),t),t=Xu(e,t,r,n,s);break e}else for(Qe=an(t.stateNode.containerInfo.firstChild),Xe=t,le=!0,pt=null,n=Vf(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Pr(),r===s){t=Bt(e,t,n);break e}Fe(e,t,r,n)}t=t.child}return t;case 5:return Hf(t),e===null&&sl(t),r=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,Za(r,s)?o=null:i!==null&&Za(r,i)&&(t.flags|=32),mm(e,t),Fe(e,t,o,n),t.child;case 6:return e===null&&sl(t),null;case 13:return gm(e,t,n);case 4:return dc(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Tr(t,null,r,n):Fe(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:ft(r,s),qu(e,t,r,s,n);case 7:return Fe(e,t,t.pendingProps,n),t.child;case 8:return Fe(e,t,t.pendingProps.children,n),t.child;case 12:return Fe(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,ne(Wi,r._currentValue),r._currentValue=o,i!==null)if(vt(i.value,o)){if(i.children===s.children&&!Ue.current){t=Bt(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Rt(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),il(i.return,n,t),a.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(A(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),il(o,n,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Fe(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,br(t,n),s=ct(s),r=r(s),t.flags|=1,Fe(e,t,r,n),t.child;case 14:return r=t.type,s=ft(r,t.pendingProps),s=ft(r.type,s),Ku(e,t,r,s,n);case 15:return hm(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:ft(r,s),Pi(e,t),t.tag=1,$e(r)?(e=!0,Hi(t)):e=!1,br(t,n),cm(t,r,s),al(t,r,s,n),ul(null,t,r,!0,e,n);case 19:return xm(e,t,n);case 22:return fm(e,t,n)}throw Error(A(156,t.tag))};function Dm(e,t){return of(e,t)}function zx(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function at(e,t,n,r){return new zx(e,t,n,r)}function Pc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Hx(e){if(typeof e=="function")return Pc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===$l)return 11;if(e===Wl)return 14}return 2}function dn(e,t){var n=e.alternate;return n===null?(n=at(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ni(e,t,n,r,s,i){var o=2;if(r=e,typeof e=="function")Pc(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case tr:return In(n.children,s,i,t);case Ul:o=8,s|=8;break;case Aa:return e=at(12,n,t,s|2),e.elementType=Aa,e.lanes=i,e;case Ma:return e=at(13,n,t,s),e.elementType=Ma,e.lanes=i,e;case Da:return e=at(19,n,t,s),e.elementType=Da,e.lanes=i,e;case zh:return Co(n,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Vh:o=10;break e;case Bh:o=9;break e;case $l:o=11;break e;case Wl:o=14;break e;case Qt:o=16,r=null;break e}throw Error(A(130,e==null?e:typeof e,""))}return t=at(o,n,t,s),t.elementType=e,t.type=r,t.lanes=i,t}function In(e,t,n,r){return e=at(7,e,r,t),e.lanes=n,e}function Co(e,t,n,r){return e=at(22,e,r,t),e.elementType=zh,e.lanes=n,e.stateNode={isHidden:!1},e}function da(e,t,n){return e=at(6,e,null,t),e.lanes=n,e}function ha(e,t,n){return t=at(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ux(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Wo(0),this.expirationTimes=Wo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wo(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Tc(e,t,n,r,s,i,o,a,c){return e=new Ux(e,t,n,a,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=at(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},uc(i),e}function $x(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:er,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Lm(e){if(!e)return pn;e=e._reactInternals;e:{if(Qn(e)!==e||e.tag!==1)throw Error(A(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if($e(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(A(171))}if(e.tag===1){var n=e.type;if($e(n))return Lf(e,n,t)}return t}function Rm(e,t,n,r,s,i,o,a,c){return e=Tc(n,r,!0,e,s,i,o,a,c),e.context=Lm(null),n=e.current,r=Ge(),s=un(n),i=Rt(r,s),i.callback=t??null,ln(n,i,s),e.current.lanes=s,Os(e,s,r),We(e,r),e}function Po(e,t,n,r){var s=t.current,i=Ge(),o=un(s);return n=Lm(n),t.context===null?t.context=n:t.pendingContext=n,t=Rt(i,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=ln(s,t,o),e!==null&&(xt(e,s,o,i),ji(e,s,o)),o}function no(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function od(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Ec(e,t){od(e,t),(e=e.alternate)&&od(e,t)}function Wx(){return null}var Im=typeof reportError=="function"?reportError:function(e){console.error(e)};function Nc(e){this._internalRoot=e}To.prototype.render=Nc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(A(409));Po(e,t,null,null)};To.prototype.unmount=Nc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Bn(function(){Po(null,e,null,null)}),t[Gt]=null}};function To(e){this._internalRoot=e}To.prototype.unstable_scheduleHydration=function(e){if(e){var t=ff();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Jt.length&&t!==0&&t<Jt[n].priority;n++);Jt.splice(n,0,e),n===0&&pf(e)}};function _c(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Eo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function ad(){}function qx(e,t,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=no(o);i.call(u)}}var o=Rm(t,r,e,0,null,!1,!1,"",ad);return e._reactRootContainer=o,e[Gt]=o.current,js(e.nodeType===8?e.parentNode:e),Bn(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var u=no(c);a.call(u)}}var c=Tc(e,0,!1,null,null,!1,!1,"",ad);return e._reactRootContainer=c,e[Gt]=c.current,js(e.nodeType===8?e.parentNode:e),Bn(function(){Po(t,c,n,r)}),c}function No(e,t,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var c=no(o);a.call(c)}}Po(t,o,e,s)}else o=qx(n,t,e,s,r);return no(o)}df=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Jr(t.pendingLanes);n!==0&&(Ql(t,n|1),We(t,xe()),!(Y&6)&&(_r=xe()+500,Sn()))}break;case 13:Bn(function(){var r=Vt(e,1);if(r!==null){var s=Ge();xt(r,e,1,s)}}),Ec(e,1)}};Xl=function(e){if(e.tag===13){var t=Vt(e,134217728);if(t!==null){var n=Ge();xt(t,e,134217728,n)}Ec(e,134217728)}};hf=function(e){if(e.tag===13){var t=un(e),n=Vt(e,t);if(n!==null){var r=Ge();xt(n,e,t,r)}Ec(e,t)}};ff=function(){return ee};mf=function(e,t){var n=ee;try{return ee=e,t()}finally{ee=n}};Ha=function(e,t,n){switch(t){case"input":if(Ia(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=yo(r);if(!s)throw Error(A(90));Uh(r),Ia(r,s)}}}break;case"textarea":Wh(e,n);break;case"select":t=n.value,t!=null&&xr(e,!!n.multiple,t,!1)}};Zh=jc;ef=Bn;var Kx={usingClientEntryPoint:!1,Events:[Gs,ir,yo,Yh,Jh,jc]},qr={findFiberByHostInstance:An,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Qx={bundleType:qr.bundleType,version:qr.version,rendererPackageName:qr.rendererPackageName,rendererConfig:qr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ht.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=rf(e),e===null?null:e.stateNode},findFiberByHostInstance:qr.findFiberByHostInstance||Wx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var di=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!di.isDisabled&&di.supportsFiber)try{po=di.inject(Qx),kt=di}catch{}}Ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Kx;Ze.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_c(t))throw Error(A(200));return $x(e,t,null,n)};Ze.createRoot=function(e,t){if(!_c(e))throw Error(A(299));var n=!1,r="",s=Im;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Tc(e,1,!1,null,null,n,!1,r,s),e[Gt]=t.current,js(e.nodeType===8?e.parentNode:e),new Nc(t)};Ze.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(A(188)):(e=Object.keys(e).join(","),Error(A(268,e)));return e=rf(t),e=e===null?null:e.stateNode,e};Ze.flushSync=function(e){return Bn(e)};Ze.hydrate=function(e,t,n){if(!Eo(t))throw Error(A(200));return No(null,e,t,!0,n)};Ze.hydrateRoot=function(e,t,n){if(!_c(e))throw Error(A(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=Im;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=Rm(t,null,e,1,n??null,s,!1,i,o),e[Gt]=t.current,js(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new To(t)};Ze.render=function(e,t,n){if(!Eo(t))throw Error(A(200));return No(null,e,t,!1,n)};Ze.unmountComponentAtNode=function(e){if(!Eo(e))throw Error(A(40));return e._reactRootContainer?(Bn(function(){No(null,null,e,!1,function(){e._reactRootContainer=null,e[Gt]=null})}),!0):!1};Ze.unstable_batchedUpdates=jc;Ze.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Eo(n))throw Error(A(200));if(e==null||e._reactInternals===void 0)throw Error(A(38));return No(e,t,n,!1,r)};Ze.version="18.3.1-next-f1338f8080-20240426";function Om(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Om)}catch(e){console.error(e)}}Om(),Ih.exports=Ze;var Xx=Ih.exports,ld=Xx;Na.createRoot=ld.createRoot,Na.hydrateRoot=ld.hydrateRoot;const Yx="modulepreload",Jx=function(e){return"/cat-tetris/"+e},cd={},Fm=function(t,n,r){if(!n||n.length===0)return t();const s=document.getElementsByTagName("link");return Promise.all(n.map(i=>{if(i=Jx(i),i in cd)return;cd[i]=!0;const o=i.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!r)for(let h=s.length-1;h>=0;h--){const d=s[h];if(d.href===i&&(!o||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${a}`))return;const u=document.createElement("link");if(u.rel=o?"stylesheet":Yx,o||(u.as="script",u.crossOrigin=""),u.href=i,document.head.appendChild(u),o)return new Promise((h,d)=>{u.addEventListener("load",h),u.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>t()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})},Gm=v.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),_o=v.createContext({}),Ao=v.createContext(null),Mo=typeof document<"u",Ac=Mo?v.useLayoutEffect:v.useEffect,Vm=v.createContext({strict:!1}),Mc=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),Zx="framerAppearId",Bm="data-"+Mc(Zx);function ev(e,t,n,r){const{visualElement:s}=v.useContext(_o),i=v.useContext(Vm),o=v.useContext(Ao),a=v.useContext(Gm).reducedMotion,c=v.useRef();r=r||i.renderer,!c.current&&r&&(c.current=r(e,{visualState:t,parent:s,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:a}));const u=c.current;v.useInsertionEffect(()=>{u&&u.update(n,o)});const h=v.useRef(!!(n[Bm]&&!window.HandoffComplete));return Ac(()=>{u&&(u.render(),h.current&&u.animationState&&u.animationState.animateChanges())}),v.useEffect(()=>{u&&(u.updateFeatures(),!h.current&&u.animationState&&u.animationState.animateChanges(),h.current&&(h.current=!1,window.HandoffComplete=!0))}),u}function hr(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function tv(e,t,n){return v.useCallback(r=>{r&&e.mount&&e.mount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):hr(n)&&(n.current=r))},[t])}function Ms(e){return typeof e=="string"||Array.isArray(e)}function Do(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const Dc=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Lc=["initial",...Dc];function Lo(e){return Do(e.animate)||Lc.some(t=>Ms(e[t]))}function zm(e){return!!(Lo(e)||e.variants)}function nv(e,t){if(Lo(e)){const{initial:n,animate:r}=e;return{initial:n===!1||Ms(n)?n:void 0,animate:Ms(r)?r:void 0}}return e.inherit!==!1?t:{}}function rv(e){const{initial:t,animate:n}=nv(e,v.useContext(_o));return v.useMemo(()=>({initial:t,animate:n}),[ud(t),ud(n)])}function ud(e){return Array.isArray(e)?e.join(" "):e}const dd={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ds={};for(const e in dd)Ds[e]={isEnabled:t=>dd[e].some(n=>!!t[n])};function sv(e){for(const t in e)Ds[t]={...Ds[t],...e[t]}}const Rc=v.createContext({}),Hm=v.createContext({}),iv=Symbol.for("motionComponentSymbol");function ov({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:r,Component:s}){e&&sv(e);function i(a,c){let u;const h={...v.useContext(Gm),...a,layoutId:av(a)},{isStatic:d}=h,f=rv(a),y=r(a,d);if(!d&&Mo){f.visualElement=ev(s,y,h,t);const x=v.useContext(Hm),b=v.useContext(Vm).strict;f.visualElement&&(u=f.visualElement.loadFeatures(h,b,e,x))}return v.createElement(_o.Provider,{value:f},u&&f.visualElement?v.createElement(u,{visualElement:f.visualElement,...h}):null,n(s,a,tv(y,f.visualElement,c),y,d,f.visualElement))}const o=v.forwardRef(i);return o[iv]=s,o}function av({layoutId:e}){const t=v.useContext(Rc).id;return t&&e!==void 0?t+"-"+e:e}function lv(e){function t(r,s={}){return ov(e(r,s))}if(typeof Proxy>"u")return t;const n=new Map;return new Proxy(t,{get:(r,s)=>(n.has(s)||n.set(s,t(s)),n.get(s))})}const cv=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Ic(e){return typeof e!="string"||e.includes("-")?!1:!!(cv.indexOf(e)>-1||/[A-Z]/.test(e))}const ro={};function uv(e){Object.assign(ro,e)}const Bs=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Xn=new Set(Bs);function Um(e,{layout:t,layoutId:n}){return Xn.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!ro[e]||e==="opacity")}const qe=e=>!!(e&&e.getVelocity),dv={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},hv=Bs.length;function fv(e,{enableHardwareAcceleration:t=!0,allowTransformNone:n=!0},r,s){let i="";for(let o=0;o<hv;o++){const a=Bs[o];if(e[a]!==void 0){const c=dv[a]||a;i+=`${c}(${e[a]}) `}}return t&&!e.z&&(i+="translateZ(0)"),i=i.trim(),s?i=s(e,r?"":i):n&&r&&(i="none"),i}const $m=e=>t=>typeof t=="string"&&t.startsWith(e),Wm=$m("--"),Sl=$m("var(--"),mv=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,pv=(e,t)=>t&&typeof e=="number"?t.transform(e):e,gn=(e,t,n)=>Math.min(Math.max(n,e),t),Yn={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},us={...Yn,transform:e=>gn(0,1,e)},hi={...Yn,default:1},ds=e=>Math.round(e*1e5)/1e5,Ro=/(-)?([\d]*\.?[\d])+/g,qm=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,gv=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function zs(e){return typeof e=="string"}const Hs=e=>({test:t=>zs(t)&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),qt=Hs("deg"),Pt=Hs("%"),z=Hs("px"),xv=Hs("vh"),vv=Hs("vw"),hd={...Pt,parse:e=>Pt.parse(e)/100,transform:e=>Pt.transform(e*100)},fd={...Yn,transform:Math.round},Km={borderWidth:z,borderTopWidth:z,borderRightWidth:z,borderBottomWidth:z,borderLeftWidth:z,borderRadius:z,radius:z,borderTopLeftRadius:z,borderTopRightRadius:z,borderBottomRightRadius:z,borderBottomLeftRadius:z,width:z,maxWidth:z,height:z,maxHeight:z,size:z,top:z,right:z,bottom:z,left:z,padding:z,paddingTop:z,paddingRight:z,paddingBottom:z,paddingLeft:z,margin:z,marginTop:z,marginRight:z,marginBottom:z,marginLeft:z,rotate:qt,rotateX:qt,rotateY:qt,rotateZ:qt,scale:hi,scaleX:hi,scaleY:hi,scaleZ:hi,skew:qt,skewX:qt,skewY:qt,distance:z,translateX:z,translateY:z,translateZ:z,x:z,y:z,z,perspective:z,transformPerspective:z,opacity:us,originX:hd,originY:hd,originZ:z,zIndex:fd,fillOpacity:us,strokeOpacity:us,numOctaves:fd};function Oc(e,t,n,r){const{style:s,vars:i,transform:o,transformOrigin:a}=e;let c=!1,u=!1,h=!0;for(const d in t){const f=t[d];if(Wm(d)){i[d]=f;continue}const y=Km[d],x=pv(f,y);if(Xn.has(d)){if(c=!0,o[d]=x,!h)continue;f!==(y.default||0)&&(h=!1)}else d.startsWith("origin")?(u=!0,a[d]=x):s[d]=x}if(t.transform||(c||r?s.transform=fv(e.transform,n,h,r):s.transform&&(s.transform="none")),u){const{originX:d="50%",originY:f="50%",originZ:y=0}=a;s.transformOrigin=`${d} ${f} ${y}`}}const Fc=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Qm(e,t,n){for(const r in t)!qe(t[r])&&!Um(r,n)&&(e[r]=t[r])}function yv({transformTemplate:e},t,n){return v.useMemo(()=>{const r=Fc();return Oc(r,t,{enableHardwareAcceleration:!n},e),Object.assign({},r.vars,r.style)},[t])}function wv(e,t,n){const r=e.style||{},s={};return Qm(s,r,e),Object.assign(s,yv(e,t,n)),e.transformValues?e.transformValues(s):s}function bv(e,t,n){const r={},s=wv(e,t,n);return e.drag&&e.dragListener!==!1&&(r.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=s,r}const Sv=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function so(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||Sv.has(e)}let Xm=e=>!so(e);function jv(e){e&&(Xm=t=>t.startsWith("on")?!so(t):e(t))}try{jv(require("@emotion/is-prop-valid").default)}catch{}function kv(e,t,n){const r={};for(const s in e)s==="values"&&typeof e.values=="object"||(Xm(s)||n===!0&&so(s)||!t&&!so(s)||e.draggable&&s.startsWith("onDrag"))&&(r[s]=e[s]);return r}function md(e,t,n){return typeof e=="string"?e:z.transform(t+n*e)}function Cv(e,t,n){const r=md(t,e.x,e.width),s=md(n,e.y,e.height);return`${r} ${s}`}const Pv={offset:"stroke-dashoffset",array:"stroke-dasharray"},Tv={offset:"strokeDashoffset",array:"strokeDasharray"};function Ev(e,t,n=1,r=0,s=!0){e.pathLength=1;const i=s?Pv:Tv;e[i.offset]=z.transform(-r);const o=z.transform(t),a=z.transform(n);e[i.array]=`${o} ${a}`}function Gc(e,{attrX:t,attrY:n,attrScale:r,originX:s,originY:i,pathLength:o,pathSpacing:a=1,pathOffset:c=0,...u},h,d,f){if(Oc(e,u,h,f),d){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:y,style:x,dimensions:b}=e;y.transform&&(b&&(x.transform=y.transform),delete y.transform),b&&(s!==void 0||i!==void 0||x.transform)&&(x.transformOrigin=Cv(b,s!==void 0?s:.5,i!==void 0?i:.5)),t!==void 0&&(y.x=t),n!==void 0&&(y.y=n),r!==void 0&&(y.scale=r),o!==void 0&&Ev(y,o,a,c,!1)}const Ym=()=>({...Fc(),attrs:{}}),Vc=e=>typeof e=="string"&&e.toLowerCase()==="svg";function Nv(e,t,n,r){const s=v.useMemo(()=>{const i=Ym();return Gc(i,t,{enableHardwareAcceleration:!1},Vc(r),e.transformTemplate),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};Qm(i,e.style,e),s.style={...i,...s.style}}return s}function _v(e=!1){return(n,r,s,{latestValues:i},o)=>{const c=(Ic(n)?Nv:bv)(r,i,o,n),h={...kv(r,typeof n=="string",e),...c,ref:s},{children:d}=r,f=v.useMemo(()=>qe(d)?d.get():d,[d]);return v.createElement(n,{...h,children:f})}}function Jm(e,{style:t,vars:n},r,s){Object.assign(e.style,t,s&&s.getProjectionStyles(r));for(const i in n)e.style.setProperty(i,n[i])}const Zm=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function ep(e,t,n,r){Jm(e,t,void 0,r);for(const s in t.attrs)e.setAttribute(Zm.has(s)?s:Mc(s),t.attrs[s])}function Bc(e,t){const{style:n}=e,r={};for(const s in n)(qe(n[s])||t.style&&qe(t.style[s])||Um(s,e))&&(r[s]=n[s]);return r}function tp(e,t){const n=Bc(e,t);for(const r in e)if(qe(e[r])||qe(t[r])){const s=Bs.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[s]=e[r]}return n}function zc(e,t,n,r={},s={}){return typeof t=="function"&&(t=t(n!==void 0?n:e.custom,r,s)),typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"&&(t=t(n!==void 0?n:e.custom,r,s)),t}function np(e){const t=v.useRef(null);return t.current===null&&(t.current=e()),t.current}const io=e=>Array.isArray(e),Av=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),Mv=e=>io(e)?e[e.length-1]||0:e;function _i(e){const t=qe(e)?e.get():e;return Av(t)?t.toValue():t}function Dv({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:n},r,s,i){const o={latestValues:Lv(r,s,i,e),renderState:t()};return n&&(o.mount=a=>n(r,a,o)),o}const rp=e=>(t,n)=>{const r=v.useContext(_o),s=v.useContext(Ao),i=()=>Dv(e,t,r,s);return n?i():np(i)};function Lv(e,t,n,r){const s={},i=r(e,{});for(const f in i)s[f]=_i(i[f]);let{initial:o,animate:a}=e;const c=Lo(e),u=zm(e);t&&u&&!c&&e.inherit!==!1&&(o===void 0&&(o=t.initial),a===void 0&&(a=t.animate));let h=n?n.initial===!1:!1;h=h||o===!1;const d=h?a:o;return d&&typeof d!="boolean"&&!Do(d)&&(Array.isArray(d)?d:[d]).forEach(y=>{const x=zc(e,y);if(!x)return;const{transitionEnd:b,transition:S,...p}=x;for(const m in p){let g=p[m];if(Array.isArray(g)){const w=h?g.length-1:0;g=g[w]}g!==null&&(s[m]=g)}for(const m in b)s[m]=b[m]}),s}const pe=e=>e;class pd{constructor(){this.order=[],this.scheduled=new Set}add(t){if(!this.scheduled.has(t))return this.scheduled.add(t),this.order.push(t),!0}remove(t){const n=this.order.indexOf(t);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(t))}clear(){this.order.length=0,this.scheduled.clear()}}function Rv(e){let t=new pd,n=new pd,r=0,s=!1,i=!1;const o=new WeakSet,a={schedule:(c,u=!1,h=!1)=>{const d=h&&s,f=d?t:n;return u&&o.add(c),f.add(c)&&d&&s&&(r=t.order.length),c},cancel:c=>{n.remove(c),o.delete(c)},process:c=>{if(s){i=!0;return}if(s=!0,[t,n]=[n,t],n.clear(),r=t.order.length,r)for(let u=0;u<r;u++){const h=t.order[u];h(c),o.has(h)&&(a.schedule(h),e())}s=!1,i&&(i=!1,a.process(c))}};return a}const fi=["prepare","read","update","preRender","render","postRender"],Iv=40;function Ov(e,t){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=fi.reduce((d,f)=>(d[f]=Rv(()=>n=!0),d),{}),o=d=>i[d].process(s),a=()=>{const d=performance.now();n=!1,s.delta=r?1e3/60:Math.max(Math.min(d-s.timestamp,Iv),1),s.timestamp=d,s.isProcessing=!0,fi.forEach(o),s.isProcessing=!1,n&&t&&(r=!1,e(a))},c=()=>{n=!0,r=!0,s.isProcessing||e(a)};return{schedule:fi.reduce((d,f)=>{const y=i[f];return d[f]=(x,b=!1,S=!1)=>(n||c(),y.schedule(x,b,S)),d},{}),cancel:d=>fi.forEach(f=>i[f].cancel(d)),state:s,steps:i}}const{schedule:re,cancel:zt,state:Me,steps:fa}=Ov(typeof requestAnimationFrame<"u"?requestAnimationFrame:pe,!0),Fv={useVisualState:rp({scrapeMotionValuesFromProps:tp,createRenderState:Ym,onMount:(e,t,{renderState:n,latestValues:r})=>{re.read(()=>{try{n.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),re.render(()=>{Gc(n,r,{enableHardwareAcceleration:!1},Vc(t.tagName),e.transformTemplate),ep(t,n)})}})},Gv={useVisualState:rp({scrapeMotionValuesFromProps:Bc,createRenderState:Fc})};function Vv(e,{forwardMotionProps:t=!1},n,r){return{...Ic(e)?Fv:Gv,preloadedFeatures:n,useRender:_v(t),createVisualElement:r,Component:e}}function Mt(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}const sp=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function Io(e,t="page"){return{point:{x:e[t+"X"],y:e[t+"Y"]}}}const Bv=e=>t=>sp(t)&&e(t,Io(t));function It(e,t,n,r){return Mt(e,t,Bv(n),r)}const zv=(e,t)=>n=>t(e(n)),hn=(...e)=>e.reduce(zv);function ip(e){let t=null;return()=>{const n=()=>{t=null};return t===null?(t=e,n):!1}}const gd=ip("dragHorizontal"),xd=ip("dragVertical");function op(e){let t=!1;if(e==="y")t=xd();else if(e==="x")t=gd();else{const n=gd(),r=xd();n&&r?t=()=>{n(),r()}:(n&&n(),r&&r())}return t}function ap(){const e=op(!0);return e?(e(),!1):!0}class jn{constructor(t){this.isMounted=!1,this.node=t}update(){}}function vd(e,t){const n="pointer"+(t?"enter":"leave"),r="onHover"+(t?"Start":"End"),s=(i,o)=>{if(i.pointerType==="touch"||ap())return;const a=e.getProps();e.animationState&&a.whileHover&&e.animationState.setActive("whileHover",t),a[r]&&re.update(()=>a[r](i,o))};return It(e.current,n,s,{passive:!e.getProps()[r]})}class Hv extends jn{mount(){this.unmount=hn(vd(this.node,!0),vd(this.node,!1))}unmount(){}}class Uv extends jn{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=hn(Mt(this.node.current,"focus",()=>this.onFocus()),Mt(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const lp=(e,t)=>t?e===t?!0:lp(e,t.parentElement):!1;function ma(e,t){if(!t)return;const n=new PointerEvent("pointer"+e);t(n,Io(n))}class $v extends jn{constructor(){super(...arguments),this.removeStartListeners=pe,this.removeEndListeners=pe,this.removeAccessibleListeners=pe,this.startPointerPress=(t,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),i=It(window,"pointerup",(a,c)=>{if(!this.checkPressEnd())return;const{onTap:u,onTapCancel:h,globalTapTarget:d}=this.node.getProps();re.update(()=>{!d&&!lp(this.node.current,a.target)?h&&h(a,c):u&&u(a,c)})},{passive:!(r.onTap||r.onPointerUp)}),o=It(window,"pointercancel",(a,c)=>this.cancelPress(a,c),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=hn(i,o),this.startPress(t,n)},this.startAccessiblePress=()=>{const t=i=>{if(i.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||ma("up",(c,u)=>{const{onTap:h}=this.node.getProps();h&&re.update(()=>h(c,u))})};this.removeEndListeners(),this.removeEndListeners=Mt(this.node.current,"keyup",o),ma("down",(a,c)=>{this.startPress(a,c)})},n=Mt(this.node.current,"keydown",t),r=()=>{this.isPressing&&ma("cancel",(i,o)=>this.cancelPress(i,o))},s=Mt(this.node.current,"blur",r);this.removeAccessibleListeners=hn(n,s)}}startPress(t,n){this.isPressing=!0;const{onTapStart:r,whileTap:s}=this.node.getProps();s&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&re.update(()=>r(t,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!ap()}cancelPress(t,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&re.update(()=>r(t,n))}mount(){const t=this.node.getProps(),n=It(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),r=Mt(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=hn(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const jl=new WeakMap,pa=new WeakMap,Wv=e=>{const t=jl.get(e.target);t&&t(e)},qv=e=>{e.forEach(Wv)};function Kv({root:e,...t}){const n=e||document;pa.has(n)||pa.set(n,{});const r=pa.get(n),s=JSON.stringify(t);return r[s]||(r[s]=new IntersectionObserver(qv,{root:e,...t})),r[s]}function Qv(e,t,n){const r=Kv(t);return jl.set(e,n),r.observe(e),()=>{jl.delete(e),r.unobserve(e)}}const Xv={some:0,all:1};class Yv extends jn{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:i}=t,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:Xv[s]},a=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,i&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:h,onViewportLeave:d}=this.node.getProps(),f=u?h:d;f&&f(c)};return Qv(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(Jv(t,n))&&this.startObserver()}unmount(){}}function Jv({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const Zv={inView:{Feature:Yv},tap:{Feature:$v},focus:{Feature:Uv},hover:{Feature:Hv}};function cp(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function ey(e){const t={};return e.values.forEach((n,r)=>t[r]=n.get()),t}function ty(e){const t={};return e.values.forEach((n,r)=>t[r]=n.getVelocity()),t}function Oo(e,t,n){const r=e.getProps();return zc(r,t,n!==void 0?n:r.custom,ey(e),ty(e))}let ny=pe,Hc=pe;const fn=e=>e*1e3,Ot=e=>e/1e3,ry={current:!1},up=e=>Array.isArray(e)&&typeof e[0]=="number";function dp(e){return!!(!e||typeof e=="string"&&hp[e]||up(e)||Array.isArray(e)&&e.every(dp))}const es=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,hp={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:es([0,.65,.55,1]),circOut:es([.55,0,1,.45]),backIn:es([.31,.01,.66,-.59]),backOut:es([.33,1.53,.69,.99])};function fp(e){if(e)return up(e)?es(e):Array.isArray(e)?e.map(fp):hp[e]}function sy(e,t,n,{delay:r=0,duration:s,repeat:i=0,repeatType:o="loop",ease:a,times:c}={}){const u={[t]:n};c&&(u.offset=c);const h=fp(a);return Array.isArray(h)&&(u.easing=h),e.animate(u,{delay:r,duration:s,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"})}function iy(e,{repeat:t,repeatType:n="loop"}){const r=t&&n!=="loop"&&t%2===1?0:e.length-1;return e[r]}const mp=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,oy=1e-7,ay=12;function ly(e,t,n,r,s){let i,o,a=0;do o=t+(n-t)/2,i=mp(o,r,s)-e,i>0?n=o:t=o;while(Math.abs(i)>oy&&++a<ay);return o}function Us(e,t,n,r){if(e===t&&n===r)return pe;const s=i=>ly(i,0,1,e,n);return i=>i===0||i===1?i:mp(s(i),t,r)}const cy=Us(.42,0,1,1),uy=Us(0,0,.58,1),pp=Us(.42,0,.58,1),dy=e=>Array.isArray(e)&&typeof e[0]!="number",gp=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,xp=e=>t=>1-e(1-t),Uc=e=>1-Math.sin(Math.acos(e)),vp=xp(Uc),hy=gp(Uc),yp=Us(.33,1.53,.69,.99),$c=xp(yp),fy=gp($c),my=e=>(e*=2)<1?.5*$c(e):.5*(2-Math.pow(2,-10*(e-1))),py={linear:pe,easeIn:cy,easeInOut:pp,easeOut:uy,circIn:Uc,circInOut:hy,circOut:vp,backIn:$c,backInOut:fy,backOut:yp,anticipate:my},yd=e=>{if(Array.isArray(e)){Hc(e.length===4);const[t,n,r,s]=e;return Us(t,n,r,s)}else if(typeof e=="string")return py[e];return e},Wc=(e,t)=>n=>!!(zs(n)&&gv.test(n)&&n.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(n,t)),wp=(e,t,n)=>r=>{if(!zs(r))return r;const[s,i,o,a]=r.match(Ro);return{[e]:parseFloat(s),[t]:parseFloat(i),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},gy=e=>gn(0,255,e),ga={...Yn,transform:e=>Math.round(gy(e))},Ln={test:Wc("rgb","red"),parse:wp("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+ga.transform(e)+", "+ga.transform(t)+", "+ga.transform(n)+", "+ds(us.transform(r))+")"};function xy(e){let t="",n="",r="",s="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),s=e.substring(4,5),t+=t,n+=n,r+=r,s+=s),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const kl={test:Wc("#"),parse:xy,transform:Ln.transform},fr={test:Wc("hsl","hue"),parse:wp("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+Pt.transform(ds(t))+", "+Pt.transform(ds(n))+", "+ds(us.transform(r))+")"},Oe={test:e=>Ln.test(e)||kl.test(e)||fr.test(e),parse:e=>Ln.test(e)?Ln.parse(e):fr.test(e)?fr.parse(e):kl.parse(e),transform:e=>zs(e)?e:e.hasOwnProperty("red")?Ln.transform(e):fr.transform(e)},de=(e,t,n)=>-n*e+n*t+e;function xa(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function vy({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let s=0,i=0,o=0;if(!t)s=i=o=n;else{const a=n<.5?n*(1+t):n+t-n*t,c=2*n-a;s=xa(c,a,e+1/3),i=xa(c,a,e),o=xa(c,a,e-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:r}}const va=(e,t,n)=>{const r=e*e;return Math.sqrt(Math.max(0,n*(t*t-r)+r))},yy=[kl,Ln,fr],wy=e=>yy.find(t=>t.test(e));function wd(e){const t=wy(e);let n=t.parse(e);return t===fr&&(n=vy(n)),n}const bp=(e,t)=>{const n=wd(e),r=wd(t),s={...n};return i=>(s.red=va(n.red,r.red,i),s.green=va(n.green,r.green,i),s.blue=va(n.blue,r.blue,i),s.alpha=de(n.alpha,r.alpha,i),Ln.transform(s))};function by(e){var t,n;return isNaN(e)&&zs(e)&&(((t=e.match(Ro))===null||t===void 0?void 0:t.length)||0)+(((n=e.match(qm))===null||n===void 0?void 0:n.length)||0)>0}const Sp={regex:mv,countKey:"Vars",token:"${v}",parse:pe},jp={regex:qm,countKey:"Colors",token:"${c}",parse:Oe.parse},kp={regex:Ro,countKey:"Numbers",token:"${n}",parse:Yn.parse};function ya(e,{regex:t,countKey:n,token:r,parse:s}){const i=e.tokenised.match(t);i&&(e["num"+n]=i.length,e.tokenised=e.tokenised.replace(t,r),e.values.push(...i.map(s)))}function oo(e){const t=e.toString(),n={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&ya(n,Sp),ya(n,jp),ya(n,kp),n}function Cp(e){return oo(e).values}function Pp(e){const{values:t,numColors:n,numVars:r,tokenised:s}=oo(e),i=t.length;return o=>{let a=s;for(let c=0;c<i;c++)c<r?a=a.replace(Sp.token,o[c]):c<r+n?a=a.replace(jp.token,Oe.transform(o[c])):a=a.replace(kp.token,ds(o[c]));return a}}const Sy=e=>typeof e=="number"?0:e;function jy(e){const t=Cp(e);return Pp(e)(t.map(Sy))}const xn={test:by,parse:Cp,createTransformer:Pp,getAnimatableNone:jy},Tp=(e,t)=>n=>`${n>0?t:e}`;function Ep(e,t){return typeof e=="number"?n=>de(e,t,n):Oe.test(e)?bp(e,t):e.startsWith("var(")?Tp(e,t):_p(e,t)}const Np=(e,t)=>{const n=[...e],r=n.length,s=e.map((i,o)=>Ep(i,t[o]));return i=>{for(let o=0;o<r;o++)n[o]=s[o](i);return n}},ky=(e,t)=>{const n={...e,...t},r={};for(const s in n)e[s]!==void 0&&t[s]!==void 0&&(r[s]=Ep(e[s],t[s]));return s=>{for(const i in r)n[i]=r[i](s);return n}},_p=(e,t)=>{const n=xn.createTransformer(t),r=oo(e),s=oo(t);return r.numVars===s.numVars&&r.numColors===s.numColors&&r.numNumbers>=s.numNumbers?hn(Np(r.values,s.values),n):Tp(e,t)},Ls=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r},bd=(e,t)=>n=>de(e,t,n);function Cy(e){return typeof e=="number"?bd:typeof e=="string"?Oe.test(e)?bp:_p:Array.isArray(e)?Np:typeof e=="object"?ky:bd}function Py(e,t,n){const r=[],s=n||Cy(e[0]),i=e.length-1;for(let o=0;o<i;o++){let a=s(e[o],e[o+1]);if(t){const c=Array.isArray(t)?t[o]||pe:t;a=hn(c,a)}r.push(a)}return r}function Ap(e,t,{clamp:n=!0,ease:r,mixer:s}={}){const i=e.length;if(Hc(i===t.length),i===1)return()=>t[0];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=Py(t,r,s),a=o.length,c=u=>{let h=0;if(a>1)for(;h<e.length-2&&!(u<e[h+1]);h++);const d=Ls(e[h],e[h+1],u);return o[h](d)};return n?u=>c(gn(e[0],e[i-1],u)):c}function Ty(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const s=Ls(0,t,r);e.push(de(n,1,s))}}function Ey(e){const t=[0];return Ty(t,e.length-1),t}function Ny(e,t){return e.map(n=>n*t)}function _y(e,t){return e.map(()=>t||pp).splice(0,e.length-1)}function ao({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const s=dy(r)?r.map(yd):yd(r),i={done:!1,value:t[0]},o=Ny(n&&n.length===t.length?n:Ey(t),e),a=Ap(o,t,{ease:Array.isArray(s)?s:_y(t,s)});return{calculatedDuration:e,next:c=>(i.value=a(c),i.done=c>=e,i)}}function Mp(e,t){return t?e*(1e3/t):0}const Ay=5;function Dp(e,t,n){const r=Math.max(t-Ay,0);return Mp(n-e(r),t-r)}const wa=.001,My=.01,Sd=10,Dy=.05,Ly=1;function Ry({duration:e=800,bounce:t=.25,velocity:n=0,mass:r=1}){let s,i;ny(e<=fn(Sd));let o=1-t;o=gn(Dy,Ly,o),e=gn(My,Sd,Ot(e)),o<1?(s=u=>{const h=u*o,d=h*e,f=h-n,y=Cl(u,o),x=Math.exp(-d);return wa-f/y*x},i=u=>{const d=u*o*e,f=d*n+n,y=Math.pow(o,2)*Math.pow(u,2)*e,x=Math.exp(-d),b=Cl(Math.pow(u,2),o);return(-s(u)+wa>0?-1:1)*((f-y)*x)/b}):(s=u=>{const h=Math.exp(-u*e),d=(u-n)*e+1;return-wa+h*d},i=u=>{const h=Math.exp(-u*e),d=(n-u)*(e*e);return h*d});const a=5/e,c=Oy(s,i,a);if(e=fn(e),isNaN(c))return{stiffness:100,damping:10,duration:e};{const u=Math.pow(c,2)*r;return{stiffness:u,damping:o*2*Math.sqrt(r*u),duration:e}}}const Iy=12;function Oy(e,t,n){let r=n;for(let s=1;s<Iy;s++)r=r-e(r)/t(r);return r}function Cl(e,t){return e*Math.sqrt(1-t*t)}const Fy=["duration","bounce"],Gy=["stiffness","damping","mass"];function jd(e,t){return t.some(n=>e[n]!==void 0)}function Vy(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!jd(e,Gy)&&jd(e,Fy)){const n=Ry(e);t={...t,...n,mass:1},t.isResolvedFromDuration=!0}return t}function Lp({keyframes:e,restDelta:t,restSpeed:n,...r}){const s=e[0],i=e[e.length-1],o={done:!1,value:s},{stiffness:a,damping:c,mass:u,duration:h,velocity:d,isResolvedFromDuration:f}=Vy({...r,velocity:-Ot(r.velocity||0)}),y=d||0,x=c/(2*Math.sqrt(a*u)),b=i-s,S=Ot(Math.sqrt(a/u)),p=Math.abs(b)<5;n||(n=p?.01:2),t||(t=p?.005:.5);let m;if(x<1){const g=Cl(S,x);m=w=>{const k=Math.exp(-x*S*w);return i-k*((y+x*S*b)/g*Math.sin(g*w)+b*Math.cos(g*w))}}else if(x===1)m=g=>i-Math.exp(-S*g)*(b+(y+S*b)*g);else{const g=S*Math.sqrt(x*x-1);m=w=>{const k=Math.exp(-x*S*w),j=Math.min(g*w,300);return i-k*((y+x*S*b)*Math.sinh(j)+g*b*Math.cosh(j))/g}}return{calculatedDuration:f&&h||null,next:g=>{const w=m(g);if(f)o.done=g>=h;else{let k=y;g!==0&&(x<1?k=Dp(m,g,w):k=0);const j=Math.abs(k)<=n,C=Math.abs(i-w)<=t;o.done=j&&C}return o.value=o.done?i:w,o}}}function kd({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:a,max:c,restDelta:u=.5,restSpeed:h}){const d=e[0],f={done:!1,value:d},y=P=>a!==void 0&&P<a||c!==void 0&&P>c,x=P=>a===void 0?c:c===void 0||Math.abs(a-P)<Math.abs(c-P)?a:c;let b=n*t;const S=d+b,p=o===void 0?S:o(S);p!==S&&(b=p-d);const m=P=>-b*Math.exp(-P/r),g=P=>p+m(P),w=P=>{const E=m(P),M=g(P);f.done=Math.abs(E)<=u,f.value=f.done?p:M};let k,j;const C=P=>{y(f.value)&&(k=P,j=Lp({keyframes:[f.value,x(f.value)],velocity:Dp(g,P,f.value),damping:s,stiffness:i,restDelta:u,restSpeed:h}))};return C(0),{calculatedDuration:null,next:P=>{let E=!1;return!j&&k===void 0&&(E=!0,w(P),C(P)),k!==void 0&&P>k?j.next(P-k):(!E&&w(P),f)}}}const By=e=>{const t=({timestamp:n})=>e(n);return{start:()=>re.update(t,!0),stop:()=>zt(t),now:()=>Me.isProcessing?Me.timestamp:performance.now()}},Cd=2e4;function Pd(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<Cd;)t+=n,r=e.next(t);return t>=Cd?1/0:t}const zy={decay:kd,inertia:kd,tween:ao,keyframes:ao,spring:Lp};function lo({autoplay:e=!0,delay:t=0,driver:n=By,keyframes:r,type:s="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:a="loop",onPlay:c,onStop:u,onComplete:h,onUpdate:d,...f}){let y=1,x=!1,b,S;const p=()=>{S=new Promise(D=>{b=D})};p();let m;const g=zy[s]||ao;let w;g!==ao&&typeof r[0]!="number"&&(w=Ap([0,100],r,{clamp:!1}),r=[0,100]);const k=g({...f,keyframes:r});let j;a==="mirror"&&(j=g({...f,keyframes:[...r].reverse(),velocity:-(f.velocity||0)}));let C="idle",P=null,E=null,M=null;k.calculatedDuration===null&&i&&(k.calculatedDuration=Pd(k));const{calculatedDuration:B}=k;let q=1/0,W=1/0;B!==null&&(q=B+o,W=q*(i+1)-o);let K=0;const Q=D=>{if(E===null)return;y>0&&(E=Math.min(E,D)),y<0&&(E=Math.min(D-W/y,E)),P!==null?K=P:K=Math.round(D-E)*y;const V=K-t*(y>=0?1:-1),ve=y>=0?V<0:V>W;K=Math.max(V,0),C==="finished"&&P===null&&(K=W);let Pe=K,tt=k;if(i){const oe=Math.min(K,W)/q;let X=Math.floor(oe),U=oe%1;!U&&oe>=1&&(U=1),U===1&&X--,X=Math.min(X,i+1),!!(X%2)&&(a==="reverse"?(U=1-U,o&&(U-=o/q)):a==="mirror"&&(tt=j)),Pe=gn(0,1,U)*q}const je=ve?{done:!1,value:r[0]}:tt.next(Pe);w&&(je.value=w(je.value));let{done:Z}=je;!ve&&B!==null&&(Z=y>=0?K>=W:K<=0);const te=P===null&&(C==="finished"||C==="running"&&Z);return d&&d(je.value),te&&T(),je},F=()=>{m&&m.stop(),m=void 0},H=()=>{C="idle",F(),b(),p(),E=M=null},T=()=>{C="finished",h&&h(),F(),b()},_=()=>{if(x)return;m||(m=n(Q));const D=m.now();c&&c(),P!==null?E=D-P:(!E||C==="finished")&&(E=D),C==="finished"&&p(),M=E,P=null,C="running",m.start()};e&&_();const L={then(D,V){return S.then(D,V)},get time(){return Ot(K)},set time(D){D=fn(D),K=D,P!==null||!m||y===0?P=D:E=m.now()-D/y},get duration(){const D=k.calculatedDuration===null?Pd(k):k.calculatedDuration;return Ot(D)},get speed(){return y},set speed(D){D===y||!m||(y=D,L.time=Ot(K))},get state(){return C},play:_,pause:()=>{C="paused",P=K},stop:()=>{x=!0,C!=="idle"&&(C="idle",u&&u(),H())},cancel:()=>{M!==null&&Q(M),H()},complete:()=>{C="finished"},sample:D=>(E=0,Q(D))};return L}function Hy(e){let t;return()=>(t===void 0&&(t=e()),t)}const Uy=Hy(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),$y=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),mi=10,Wy=2e4,qy=(e,t)=>t.type==="spring"||e==="backgroundColor"||!dp(t.ease);function Ky(e,t,{onUpdate:n,onComplete:r,...s}){if(!(Uy()&&$y.has(t)&&!s.repeatDelay&&s.repeatType!=="mirror"&&s.damping!==0&&s.type!=="inertia"))return!1;let o=!1,a,c,u=!1;const h=()=>{c=new Promise(g=>{a=g})};h();let{keyframes:d,duration:f=300,ease:y,times:x}=s;if(qy(t,s)){const g=lo({...s,repeat:0,delay:0});let w={done:!1,value:d[0]};const k=[];let j=0;for(;!w.done&&j<Wy;)w=g.sample(j),k.push(w.value),j+=mi;x=void 0,d=k,f=j-mi,y="linear"}const b=sy(e.owner.current,t,d,{...s,duration:f,ease:y,times:x}),S=()=>{u=!1,b.cancel()},p=()=>{u=!0,re.update(S),a(),h()};return b.onfinish=()=>{u||(e.set(iy(d,s)),r&&r(),p())},{then(g,w){return c.then(g,w)},attachTimeline(g){return b.timeline=g,b.onfinish=null,pe},get time(){return Ot(b.currentTime||0)},set time(g){b.currentTime=fn(g)},get speed(){return b.playbackRate},set speed(g){b.playbackRate=g},get duration(){return Ot(f)},play:()=>{o||(b.play(),zt(S))},pause:()=>b.pause(),stop:()=>{if(o=!0,b.playState==="idle")return;const{currentTime:g}=b;if(g){const w=lo({...s,autoplay:!1});e.setWithVelocity(w.sample(g-mi).value,w.sample(g).value,mi)}p()},complete:()=>{u||b.finish()},cancel:p}}function Qy({keyframes:e,delay:t,onUpdate:n,onComplete:r}){const s=()=>(n&&n(e[e.length-1]),r&&r(),{time:0,speed:1,duration:0,play:pe,pause:pe,stop:pe,then:i=>(i(),Promise.resolve()),cancel:pe,complete:pe});return t?lo({keyframes:[0,1],duration:0,delay:t,onComplete:s}):s()}const Xy={type:"spring",stiffness:500,damping:25,restSpeed:10},Yy=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),Jy={type:"keyframes",duration:.8},Zy={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},ew=(e,{keyframes:t})=>t.length>2?Jy:Xn.has(e)?e.startsWith("scale")?Yy(t[1]):Xy:Zy,Pl=(e,t)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(xn.test(t)||t==="0")&&!t.startsWith("url(")),tw=new Set(["brightness","contrast","saturate","opacity"]);function nw(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(Ro)||[];if(!r)return e;const s=n.replace(r,"");let i=tw.has(t)?1:0;return r!==n&&(i*=100),t+"("+i+s+")"}const rw=/([a-z-]*)\(.*?\)/g,Tl={...xn,getAnimatableNone:e=>{const t=e.match(rw);return t?t.map(nw).join(" "):e}},sw={...Km,color:Oe,backgroundColor:Oe,outlineColor:Oe,fill:Oe,stroke:Oe,borderColor:Oe,borderTopColor:Oe,borderRightColor:Oe,borderBottomColor:Oe,borderLeftColor:Oe,filter:Tl,WebkitFilter:Tl},qc=e=>sw[e];function Rp(e,t){let n=qc(e);return n!==Tl&&(n=xn),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const Ip=e=>/^0[^.\s]+$/.test(e);function iw(e){if(typeof e=="number")return e===0;if(e!==null)return e==="none"||e==="0"||Ip(e)}function ow(e,t,n,r){const s=Pl(t,n);let i;Array.isArray(n)?i=[...n]:i=[null,n];const o=r.from!==void 0?r.from:e.get();let a;const c=[];for(let u=0;u<i.length;u++)i[u]===null&&(i[u]=u===0?o:i[u-1]),iw(i[u])&&c.push(u),typeof i[u]=="string"&&i[u]!=="none"&&i[u]!=="0"&&(a=i[u]);if(s&&c.length&&a)for(let u=0;u<c.length;u++){const h=c[u];i[h]=Rp(t,a)}return i}function aw({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:a,from:c,elapsed:u,...h}){return!!Object.keys(h).length}function Kc(e,t){return e[t]||e.default||e}const lw={skipAnimations:!1},Qc=(e,t,n,r={})=>s=>{const i=Kc(r,e)||{},o=i.delay||r.delay||0;let{elapsed:a=0}=r;a=a-fn(o);const c=ow(t,e,n,i),u=c[0],h=c[c.length-1],d=Pl(e,u),f=Pl(e,h);let y={keyframes:c,velocity:t.getVelocity(),ease:"easeOut",...i,delay:-a,onUpdate:x=>{t.set(x),i.onUpdate&&i.onUpdate(x)},onComplete:()=>{s(),i.onComplete&&i.onComplete()}};if(aw(i)||(y={...y,...ew(e,y)}),y.duration&&(y.duration=fn(y.duration)),y.repeatDelay&&(y.repeatDelay=fn(y.repeatDelay)),!d||!f||ry.current||i.type===!1||lw.skipAnimations)return Qy(y);if(!r.isHandoff&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const x=Ky(t,e,y);if(x)return x}return lo(y)};function co(e){return!!(qe(e)&&e.add)}const Op=e=>/^\-?\d*\.?\d+$/.test(e);function Xc(e,t){e.indexOf(t)===-1&&e.push(t)}function Yc(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class Jc{constructor(){this.subscriptions=[]}add(t){return Xc(this.subscriptions,t),()=>Yc(this.subscriptions,t)}notify(t,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,n,r);else for(let i=0;i<s;i++){const o=this.subscriptions[i];o&&o(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const cw=e=>!isNaN(parseFloat(e));class uw{constructor(t,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,s=!0)=>{this.prev=this.current,this.current=r;const{delta:i,timestamp:o}=Me;this.lastUpdated!==o&&(this.timeDelta=i,this.lastUpdated=o,re.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>re.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=cw(this.current),this.owner=n.owner}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new Jc);const r=this.events[t].add(n);return t==="change"?()=>{r(),re.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,r){this.set(n),this.prev=t,this.timeDelta=r}jump(t){this.updateAndNotify(t),this.prev=t,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?Mp(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ar(e,t){return new uw(e,t)}const Fp=e=>t=>t.test(e),dw={test:e=>e==="auto",parse:e=>e},Gp=[Yn,z,Pt,qt,vv,xv,dw],Kr=e=>Gp.find(Fp(e)),hw=[...Gp,Oe,xn],fw=e=>hw.find(Fp(e));function mw(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,Ar(n))}function pw(e,t){const n=Oo(e,t);let{transitionEnd:r={},transition:s={},...i}=n?e.makeTargetAnimatable(n,!1):{};i={...i,...r};for(const o in i){const a=Mv(i[o]);mw(e,o,a)}}function gw(e,t,n){var r,s;const i=Object.keys(t).filter(a=>!e.hasValue(a)),o=i.length;if(o)for(let a=0;a<o;a++){const c=i[a],u=t[c];let h=null;Array.isArray(u)&&(h=u[0]),h===null&&(h=(s=(r=n[c])!==null&&r!==void 0?r:e.readValue(c))!==null&&s!==void 0?s:t[c]),h!=null&&(typeof h=="string"&&(Op(h)||Ip(h))?h=parseFloat(h):!fw(h)&&xn.test(u)&&(h=Rp(c,u)),e.addValue(c,Ar(h,{owner:e})),n[c]===void 0&&(n[c]=h),h!==null&&e.setBaseTarget(c,h))}}function xw(e,t){return t?(t[e]||t.default||t).from:void 0}function vw(e,t,n){const r={};for(const s in e){const i=xw(s,t);if(i!==void 0)r[s]=i;else{const o=n.getValue(s);o&&(r[s]=o.get())}}return r}function yw({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function ww(e,t){const n=e.get();if(Array.isArray(t)){for(let r=0;r<t.length;r++)if(t[r]!==n)return!0}else return n!==t}function Vp(e,t,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:i=e.getDefaultTransition(),transitionEnd:o,...a}=e.makeTargetAnimatable(t);const c=e.getValue("willChange");r&&(i=r);const u=[],h=s&&e.animationState&&e.animationState.getState()[s];for(const d in a){const f=e.getValue(d),y=a[d];if(!f||y===void 0||h&&yw(h,d))continue;const x={delay:n,elapsed:0,...Kc(i||{},d)};if(window.HandoffAppearAnimations){const p=e.getProps()[Bm];if(p){const m=window.HandoffAppearAnimations(p,d,f,re);m!==null&&(x.elapsed=m,x.isHandoff=!0)}}let b=!x.isHandoff&&!ww(f,y);if(x.type==="spring"&&(f.getVelocity()||x.velocity)&&(b=!1),f.animation&&(b=!1),b)continue;f.start(Qc(d,f,y,e.shouldReduceMotion&&Xn.has(d)?{type:!1}:x));const S=f.animation;co(c)&&(c.add(d),S.then(()=>c.remove(d))),u.push(S)}return o&&Promise.all(u).then(()=>{o&&pw(e,o)}),u}function El(e,t,n={}){const r=Oo(e,t,n.custom);let{transition:s=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const i=r?()=>Promise.all(Vp(e,r,n)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:h,staggerDirection:d}=s;return bw(e,t,u+c,h,d,n)}:()=>Promise.resolve(),{when:a}=s;if(a){const[c,u]=a==="beforeChildren"?[i,o]:[o,i];return c().then(()=>u())}else return Promise.all([i(),o(n.delay)])}function bw(e,t,n=0,r=0,s=1,i){const o=[],a=(e.variantChildren.size-1)*r,c=s===1?(u=0)=>u*r:(u=0)=>a-u*r;return Array.from(e.variantChildren).sort(Sw).forEach((u,h)=>{u.notify("AnimationStart",t),o.push(El(u,t,{...i,delay:n+c(h)}).then(()=>u.notify("AnimationComplete",t)))}),Promise.all(o)}function Sw(e,t){return e.sortNodePosition(t)}function jw(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const s=t.map(i=>El(e,i,n));r=Promise.all(s)}else if(typeof t=="string")r=El(e,t,n);else{const s=typeof t=="function"?Oo(e,t,n.custom):t;r=Promise.all(Vp(e,s,n))}return r.then(()=>e.notify("AnimationComplete",t))}const kw=[...Dc].reverse(),Cw=Dc.length;function Pw(e){return t=>Promise.all(t.map(({animation:n,options:r})=>jw(e,n,r)))}function Tw(e){let t=Pw(e);const n=Nw();let r=!0;const s=(c,u)=>{const h=Oo(e,u);if(h){const{transition:d,transitionEnd:f,...y}=h;c={...c,...y,...f}}return c};function i(c){t=c(e)}function o(c,u){const h=e.getProps(),d=e.getVariantContext(!0)||{},f=[],y=new Set;let x={},b=1/0;for(let p=0;p<Cw;p++){const m=kw[p],g=n[m],w=h[m]!==void 0?h[m]:d[m],k=Ms(w),j=m===u?g.isActive:null;j===!1&&(b=p);let C=w===d[m]&&w!==h[m]&&k;if(C&&r&&e.manuallyAnimateOnMount&&(C=!1),g.protectedKeys={...x},!g.isActive&&j===null||!w&&!g.prevProp||Do(w)||typeof w=="boolean")continue;let E=Ew(g.prevProp,w)||m===u&&g.isActive&&!C&&k||p>b&&k,M=!1;const B=Array.isArray(w)?w:[w];let q=B.reduce(s,{});j===!1&&(q={});const{prevResolvedValues:W={}}=g,K={...W,...q},Q=F=>{E=!0,y.has(F)&&(M=!0,y.delete(F)),g.needsAnimating[F]=!0};for(const F in K){const H=q[F],T=W[F];if(x.hasOwnProperty(F))continue;let _=!1;io(H)&&io(T)?_=!cp(H,T):_=H!==T,_?H!==void 0?Q(F):y.add(F):H!==void 0&&y.has(F)?Q(F):g.protectedKeys[F]=!0}g.prevProp=w,g.prevResolvedValues=q,g.isActive&&(x={...x,...q}),r&&e.blockInitialAnimation&&(E=!1),E&&(!C||M)&&f.push(...B.map(F=>({animation:F,options:{type:m,...c}})))}if(y.size){const p={};y.forEach(m=>{const g=e.getBaseTarget(m);g!==void 0&&(p[m]=g)}),f.push({animation:p})}let S=!!f.length;return r&&(h.initial===!1||h.initial===h.animate)&&!e.manuallyAnimateOnMount&&(S=!1),r=!1,S?t(f):Promise.resolve()}function a(c,u,h){var d;if(n[c].isActive===u)return Promise.resolve();(d=e.variantChildren)===null||d===void 0||d.forEach(y=>{var x;return(x=y.animationState)===null||x===void 0?void 0:x.setActive(c,u)}),n[c].isActive=u;const f=o(h,c);for(const y in n)n[y].protectedKeys={};return f}return{animateChanges:o,setActive:a,setAnimateFunction:i,getState:()=>n}}function Ew(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!cp(t,e):!1}function kn(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Nw(){return{animate:kn(!0),whileInView:kn(),whileHover:kn(),whileTap:kn(),whileDrag:kn(),whileFocus:kn(),exit:kn()}}class _w extends jn{constructor(t){super(t),t.animationState||(t.animationState=Tw(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();this.unmount(),Do(t)&&(this.unmount=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let Aw=0;class Mw extends jn{constructor(){super(...arguments),this.id=Aw++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n,custom:r}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===s)return;const i=this.node.animationState.setActive("exit",!t,{custom:r??this.node.getProps().custom});n&&!t&&i.then(()=>n(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const Dw={animation:{Feature:_w},exit:{Feature:Mw}},Td=(e,t)=>Math.abs(e-t);function Lw(e,t){const n=Td(e.x,t.x),r=Td(e.y,t.y);return Math.sqrt(n**2+r**2)}class Bp{constructor(t,n,{transformPagePoint:r,contextWindow:s,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=Sa(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,y=Lw(d.offset,{x:0,y:0})>=3;if(!f&&!y)return;const{point:x}=d,{timestamp:b}=Me;this.history.push({...x,timestamp:b});const{onStart:S,onMove:p}=this.handlers;f||(S&&S(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),p&&p(this.lastMoveEvent,d)},this.handlePointerMove=(d,f)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=ba(f,this.transformPagePoint),re.update(this.updatePoint,!0)},this.handlePointerUp=(d,f)=>{this.end();const{onEnd:y,onSessionEnd:x,resumeAnimation:b}=this.handlers;if(this.dragSnapToOrigin&&b&&b(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const S=Sa(d.type==="pointercancel"?this.lastMoveEventInfo:ba(f,this.transformPagePoint),this.history);this.startEvent&&y&&y(d,S),x&&x(d,S)},!sp(t))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.contextWindow=s||window;const o=Io(t),a=ba(o,this.transformPagePoint),{point:c}=a,{timestamp:u}=Me;this.history=[{...c,timestamp:u}];const{onSessionStart:h}=n;h&&h(t,Sa(a,this.history)),this.removeListeners=hn(It(this.contextWindow,"pointermove",this.handlePointerMove),It(this.contextWindow,"pointerup",this.handlePointerUp),It(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),zt(this.updatePoint)}}function ba(e,t){return t?{point:t(e.point)}:e}function Ed(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Sa({point:e},t){return{point:e,delta:Ed(e,zp(t)),offset:Ed(e,Rw(t)),velocity:Iw(t,.1)}}function Rw(e){return e[0]}function zp(e){return e[e.length-1]}function Iw(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const s=zp(e);for(;n>=0&&(r=e[n],!(s.timestamp-r.timestamp>fn(t)));)n--;if(!r)return{x:0,y:0};const i=Ot(s.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const o={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function Je(e){return e.max-e.min}function Nl(e,t=0,n=.01){return Math.abs(e-t)<=n}function Nd(e,t,n,r=.5){e.origin=r,e.originPoint=de(t.min,t.max,e.origin),e.scale=Je(n)/Je(t),(Nl(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=de(n.min,n.max,e.origin)-e.originPoint,(Nl(e.translate)||isNaN(e.translate))&&(e.translate=0)}function hs(e,t,n,r){Nd(e.x,t.x,n.x,r?r.originX:void 0),Nd(e.y,t.y,n.y,r?r.originY:void 0)}function _d(e,t,n){e.min=n.min+t.min,e.max=e.min+Je(t)}function Ow(e,t,n){_d(e.x,t.x,n.x),_d(e.y,t.y,n.y)}function Ad(e,t,n){e.min=t.min-n.min,e.max=e.min+Je(t)}function fs(e,t,n){Ad(e.x,t.x,n.x),Ad(e.y,t.y,n.y)}function Fw(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?de(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?de(n,e,r.max):Math.min(e,n)),e}function Md(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function Gw(e,{top:t,left:n,bottom:r,right:s}){return{x:Md(e.x,n,s),y:Md(e.y,t,r)}}function Dd(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function Vw(e,t){return{x:Dd(e.x,t.x),y:Dd(e.y,t.y)}}function Bw(e,t){let n=.5;const r=Je(e),s=Je(t);return s>r?n=Ls(t.min,t.max-r,e.min):r>s&&(n=Ls(e.min,e.max-s,t.min)),gn(0,1,n)}function zw(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const _l=.35;function Hw(e=_l){return e===!1?e=0:e===!0&&(e=_l),{x:Ld(e,"left","right"),y:Ld(e,"top","bottom")}}function Ld(e,t,n){return{min:Rd(e,t),max:Rd(e,n)}}function Rd(e,t){return typeof e=="number"?e:e[t]||0}const Id=()=>({translate:0,scale:1,origin:0,originPoint:0}),mr=()=>({x:Id(),y:Id()}),Od=()=>({min:0,max:0}),ye=()=>({x:Od(),y:Od()});function st(e){return[e("x"),e("y")]}function Hp({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function Uw({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function $w(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function ja(e){return e===void 0||e===1}function Al({scale:e,scaleX:t,scaleY:n}){return!ja(e)||!ja(t)||!ja(n)}function En(e){return Al(e)||Up(e)||e.z||e.rotate||e.rotateX||e.rotateY}function Up(e){return Fd(e.x)||Fd(e.y)}function Fd(e){return e&&e!=="0%"}function uo(e,t,n){const r=e-n,s=t*r;return n+s}function Gd(e,t,n,r,s){return s!==void 0&&(e=uo(e,s,r)),uo(e,n,r)+t}function Ml(e,t=0,n=1,r,s){e.min=Gd(e.min,t,n,r,s),e.max=Gd(e.max,t,n,r,s)}function $p(e,{x:t,y:n}){Ml(e.x,t.translate,t.scale,t.originPoint),Ml(e.y,n.translate,n.scale,n.originPoint)}function Ww(e,t,n,r=!1){const s=n.length;if(!s)return;t.x=t.y=1;let i,o;for(let a=0;a<s;a++){i=n[a],o=i.projectionDelta;const c=i.instance;c&&c.style&&c.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&pr(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,$p(e,o)),r&&En(i.latestValues)&&pr(e,i.latestValues))}t.x=Vd(t.x),t.y=Vd(t.y)}function Vd(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function Yt(e,t){e.min=e.min+t,e.max=e.max+t}function Bd(e,t,[n,r,s]){const i=t[s]!==void 0?t[s]:.5,o=de(e.min,e.max,i);Ml(e,t[n],t[r],o,t.scale)}const qw=["x","scaleX","originX"],Kw=["y","scaleY","originY"];function pr(e,t){Bd(e.x,t,qw),Bd(e.y,t,Kw)}function Wp(e,t){return Hp($w(e.getBoundingClientRect(),t))}function Qw(e,t,n){const r=Wp(e,n),{scroll:s}=t;return s&&(Yt(r.x,s.offset.x),Yt(r.y,s.offset.y)),r}const qp=({current:e})=>e?e.ownerDocument.defaultView:null,Xw=new WeakMap;class Yw{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ye(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=h=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Io(h,"page").point)},i=(h,d)=>{const{drag:f,dragPropagation:y,onDragStart:x}=this.getProps();if(f&&!y&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=op(f),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),st(S=>{let p=this.getAxisMotionValue(S).get()||0;if(Pt.test(p)){const{projection:m}=this.visualElement;if(m&&m.layout){const g=m.layout.layoutBox[S];g&&(p=Je(g)*(parseFloat(p)/100))}}this.originPoint[S]=p}),x&&re.update(()=>x(h,d),!1,!0);const{animationState:b}=this.visualElement;b&&b.setActive("whileDrag",!0)},o=(h,d)=>{const{dragPropagation:f,dragDirectionLock:y,onDirectionLock:x,onDrag:b}=this.getProps();if(!f&&!this.openGlobalLock)return;const{offset:S}=d;if(y&&this.currentDirection===null){this.currentDirection=Jw(S),this.currentDirection!==null&&x&&x(this.currentDirection);return}this.updateAxis("x",d.point,S),this.updateAxis("y",d.point,S),this.visualElement.render(),b&&b(h,d)},a=(h,d)=>this.stop(h,d),c=()=>st(h=>{var d;return this.getAnimationState(h)==="paused"&&((d=this.getAxisMotionValue(h).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new Bp(t,{onSessionStart:s,onStart:i,onMove:o,onSessionEnd:a,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:qp(this.visualElement)})}stop(t,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:s}=n;this.startAnimation(s);const{onDragEnd:i}=this.getProps();i&&re.update(()=>i(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:s}=this.getProps();if(!r||!pi(t,s,this.currentDirection))return;const i=this.getAxisMotionValue(t);let o=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(o=Fw(o,this.constraints[t],this.elastic[t])),i.set(o)}resolveConstraints(){var t;const{dragConstraints:n,dragElastic:r}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,i=this.constraints;n&&hr(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&s?this.constraints=Gw(s.layoutBox,n):this.constraints=!1,this.elastic=Hw(r),i!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&st(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=zw(s.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!hr(t))return!1;const r=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=Qw(r,s.root,this.visualElement.getTransformPagePoint());let o=Vw(s.layout.layoutBox,i);if(n){const a=n(Uw(o));this.hasMutatedConstraints=!!a,a&&(o=Hp(a))}return o}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),c=this.constraints||{},u=st(h=>{if(!pi(h,n,this.currentDirection))return;let d=c&&c[h]||{};o&&(d={min:0,max:0});const f=s?200:1e6,y=s?40:1e7,x={type:"inertia",velocity:r?t[h]:0,bounceStiffness:f,bounceDamping:y,timeConstant:750,restDelta:1,restSpeed:10,...i,...d};return this.startAxisValueAnimation(h,x)});return Promise.all(u).then(a)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return r.start(Qc(t,r,0,n))}stopAnimation(){st(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){st(t=>{var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(t){const n="_drag"+t.toUpperCase(),r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){st(n=>{const{drag:r}=this.getProps();if(!pi(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(n);if(s&&s.layout){const{min:o,max:a}=s.layout.layoutBox[n];i.set(t[n]-de(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!hr(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};st(o=>{const a=this.getAxisMotionValue(o);if(a){const c=a.get();s[o]=Bw({min:c,max:c},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),st(o=>{if(!pi(o,t,null))return;const a=this.getAxisMotionValue(o),{min:c,max:u}=this.constraints[o];a.set(de(c,u,s[o]))})}addListeners(){if(!this.visualElement.current)return;Xw.set(this.visualElement,this);const t=this.visualElement.current,n=It(t,"pointerdown",c=>{const{drag:u,dragListener:h=!0}=this.getProps();u&&h&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();hr(c)&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),r();const o=Mt(window,"resize",()=>this.scalePositionWithinConstraints()),a=s.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(st(h=>{const d=this.getAxisMotionValue(h);d&&(this.originPoint[h]+=c[h].translate,d.set(d.get()+c[h].translate))}),this.visualElement.render())});return()=>{o(),n(),i(),a&&a()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:o=_l,dragMomentum:a=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:i,dragElastic:o,dragMomentum:a}}}function pi(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function Jw(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class Zw extends jn{constructor(t){super(t),this.removeGroupControls=pe,this.removeListeners=pe,this.controls=new Yw(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||pe}unmount(){this.removeGroupControls(),this.removeListeners()}}const zd=e=>(t,n)=>{e&&re.update(()=>e(t,n))};class e1 extends jn{constructor(){super(...arguments),this.removePointerDownListener=pe}onPointerDown(t){this.session=new Bp(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:qp(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:zd(t),onStart:zd(n),onMove:r,onEnd:(i,o)=>{delete this.session,s&&re.update(()=>s(i,o))}}}mount(){this.removePointerDownListener=It(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function t1(){const e=v.useContext(Ao);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:n,register:r}=e,s=v.useId();return v.useEffect(()=>r(s),[]),!t&&n?[!1,()=>n&&n(s)]:[!0]}const Ai={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Hd(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Qr={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(z.test(e))e=parseFloat(e);else return e;const n=Hd(e,t.target.x),r=Hd(e,t.target.y);return`${n}% ${r}%`}},n1={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,s=xn.parse(e);if(s.length>5)return r;const i=xn.createTransformer(e),o=typeof s[0]!="number"?1:0,a=n.x.scale*t.x,c=n.y.scale*t.y;s[0+o]/=a,s[1+o]/=c;const u=de(a,c,.5);return typeof s[2+o]=="number"&&(s[2+o]/=u),typeof s[3+o]=="number"&&(s[3+o]/=u),i(s)}};class r1 extends ue.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:i}=t;uv(s1),i&&(n.group&&n.group.add(i),r&&r.register&&s&&r.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Ai.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:s,isPresent:i}=this.props,o=r.projection;return o&&(o.isPresent=i,s||t.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?o.promote():o.relegate()||re.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),queueMicrotask(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=t;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function Kp(e){const[t,n]=t1(),r=v.useContext(Rc);return ue.createElement(r1,{...e,layoutGroup:r,switchLayoutGroup:v.useContext(Hm),isPresent:t,safeToRemove:n})}const s1={borderRadius:{...Qr,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Qr,borderTopRightRadius:Qr,borderBottomLeftRadius:Qr,borderBottomRightRadius:Qr,boxShadow:n1},Qp=["TopLeft","TopRight","BottomLeft","BottomRight"],i1=Qp.length,Ud=e=>typeof e=="string"?parseFloat(e):e,$d=e=>typeof e=="number"||z.test(e);function o1(e,t,n,r,s,i){s?(e.opacity=de(0,n.opacity!==void 0?n.opacity:1,a1(r)),e.opacityExit=de(t.opacity!==void 0?t.opacity:1,0,l1(r))):i&&(e.opacity=de(t.opacity!==void 0?t.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<i1;o++){const a=`border${Qp[o]}Radius`;let c=Wd(t,a),u=Wd(n,a);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||$d(c)===$d(u)?(e[a]=Math.max(de(Ud(c),Ud(u),r),0),(Pt.test(u)||Pt.test(c))&&(e[a]+="%")):e[a]=u}(t.rotate||n.rotate)&&(e.rotate=de(t.rotate||0,n.rotate||0,r))}function Wd(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const a1=Xp(0,.5,vp),l1=Xp(.5,.95,pe);function Xp(e,t,n){return r=>r<e?0:r>t?1:n(Ls(e,t,r))}function qd(e,t){e.min=t.min,e.max=t.max}function nt(e,t){qd(e.x,t.x),qd(e.y,t.y)}function Kd(e,t,n,r,s){return e-=t,e=uo(e,1/n,r),s!==void 0&&(e=uo(e,1/s,r)),e}function c1(e,t=0,n=1,r=.5,s,i=e,o=e){if(Pt.test(t)&&(t=parseFloat(t),t=de(o.min,o.max,t/100)-o.min),typeof t!="number")return;let a=de(i.min,i.max,r);e===i&&(a-=t),e.min=Kd(e.min,t,n,a,s),e.max=Kd(e.max,t,n,a,s)}function Qd(e,t,[n,r,s],i,o){c1(e,t[n],t[r],t[s],t.scale,i,o)}const u1=["x","scaleX","originX"],d1=["y","scaleY","originY"];function Xd(e,t,n,r){Qd(e.x,t,u1,n?n.x:void 0,r?r.x:void 0),Qd(e.y,t,d1,n?n.y:void 0,r?r.y:void 0)}function Yd(e){return e.translate===0&&e.scale===1}function Yp(e){return Yd(e.x)&&Yd(e.y)}function h1(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}function Jp(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function Jd(e){return Je(e.x)/Je(e.y)}class f1{constructor(){this.members=[]}add(t){Xc(this.members,t),t.scheduleRender()}remove(t){if(Yc(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(s=>t===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Zd(e,t,n){let r="";const s=e.x.translate/t.x,i=e.y.translate/t.y;if((s||i)&&(r=`translate3d(${s}px, ${i}px, 0) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{rotate:c,rotateX:u,rotateY:h}=n;c&&(r+=`rotate(${c}deg) `),u&&(r+=`rotateX(${u}deg) `),h&&(r+=`rotateY(${h}deg) `)}const o=e.x.scale*t.x,a=e.y.scale*t.y;return(o!==1||a!==1)&&(r+=`scale(${o}, ${a})`),r||"none"}const m1=(e,t)=>e.depth-t.depth;class p1{constructor(){this.children=[],this.isDirty=!1}add(t){Xc(this.children,t),this.isDirty=!0}remove(t){Yc(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(m1),this.isDirty=!1,this.children.forEach(t)}}function g1(e,t){const n=performance.now(),r=({timestamp:s})=>{const i=s-n;i>=t&&(zt(r),e(i-t))};return re.read(r,!0),()=>zt(r)}function x1(e){window.MotionDebug&&window.MotionDebug.record(e)}function v1(e){return e instanceof SVGElement&&e.tagName!=="svg"}function y1(e,t,n){const r=qe(e)?e:Ar(e);return r.start(Qc("",r,t,n)),r.animation}const eh=["","X","Y","Z"],w1={visibility:"hidden"},th=1e3;let b1=0;const Nn={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function Zp({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(o={},a=t==null?void 0:t()){this.id=b1++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Nn.totalNodes=Nn.resolvedTargetDeltas=Nn.recalculatedProjection=0,this.nodes.forEach(k1),this.nodes.forEach(N1),this.nodes.forEach(_1),this.nodes.forEach(C1),x1(Nn)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new p1)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Jc),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const c=this.eventHandlers.get(o);c&&c.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=v1(o),this.instance=o;const{layoutId:c,layout:u,visualElement:h}=this.options;if(h&&!h.current&&h.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(u||c)&&(this.isLayoutDirty=!0),e){let d;const f=()=>this.root.updateBlockedByResize=!1;e(o,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=g1(f,250),Ai.hasAnimatedSinceResize&&(Ai.hasAnimatedSinceResize=!1,this.nodes.forEach(rh))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&h&&(c||u)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:f,hasRelativeTargetChanged:y,layout:x})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const b=this.options.transition||h.getDefaultTransition()||R1,{onLayoutAnimationStart:S,onLayoutAnimationComplete:p}=h.getProps(),m=!this.targetLayout||!Jp(this.targetLayout,x)||y,g=!f&&y;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||g||f&&(m||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,g);const w={...Kc(b,"layout"),onPlay:S,onComplete:p};(h.shouldReduceMotion||this.options.layoutRoot)&&(w.delay=0,w.type=!1),this.startAnimation(w)}else f||rh(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=x})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,zt(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(A1),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const d=this.path[h];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:a,layout:c}=this.options;if(a===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(nh);return}this.isUpdating||this.nodes.forEach(T1),this.isUpdating=!1,this.nodes.forEach(E1),this.nodes.forEach(S1),this.nodes.forEach(j1),this.clearAllSnapshots();const a=performance.now();Me.delta=gn(0,1e3/60,a-Me.timestamp),Me.timestamp=a,Me.isProcessing=!0,fa.update.process(Me),fa.preRender.process(Me),fa.render.process(Me),Me.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(P1),this.sharedNodes.forEach(M1)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,re.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){re.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ye(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:r(this.instance),offset:n(this.instance)})}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform,a=this.projectionDelta&&!Yp(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,h=u!==this.prevTransformTemplateValue;o&&(a||En(this.latestValues)||h)&&(s(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let c=this.removeElementScroll(a);return o&&(c=this.removeTransform(c)),I1(c),{animationId:this.root.animationId,measuredBox:a,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return ye();const a=o.measureViewportBox(),{scroll:c}=this.root;return c&&(Yt(a.x,c.offset.x),Yt(a.y,c.offset.y)),a}removeElementScroll(o){const a=ye();nt(a,o);for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:h,options:d}=u;if(u!==this.root&&h&&d.layoutScroll){if(h.isRoot){nt(a,o);const{scroll:f}=this.root;f&&(Yt(a.x,-f.offset.x),Yt(a.y,-f.offset.y))}Yt(a.x,h.offset.x),Yt(a.y,h.offset.y)}}return a}applyTransform(o,a=!1){const c=ye();nt(c,o);for(let u=0;u<this.path.length;u++){const h=this.path[u];!a&&h.options.layoutScroll&&h.scroll&&h!==h.root&&pr(c,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),En(h.latestValues)&&pr(c,h.latestValues)}return En(this.latestValues)&&pr(c,this.latestValues),c}removeTransform(o){const a=ye();nt(a,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!En(u.latestValues))continue;Al(u.latestValues)&&u.updateSnapshot();const h=ye(),d=u.measurePageBox();nt(h,d),Xd(a,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,h)}return En(this.latestValues)&&Xd(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Me.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==c;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:d,layoutId:f}=this.options;if(!(!this.layout||!(d||f))){if(this.resolvedRelativeTargetAt=Me.timestamp,!this.targetDelta&&!this.relativeTarget){const y=this.getClosestProjectingParent();y&&y.layout&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ye(),this.relativeTargetOrigin=ye(),fs(this.relativeTargetOrigin,this.layout.layoutBox,y.layout.layoutBox),nt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=ye(),this.targetWithTransforms=ye()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Ow(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):nt(this.target,this.layout.layoutBox),$p(this.target,this.targetDelta)):nt(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const y=this.getClosestProjectingParent();y&&!!y.resumingFrom==!!this.resumingFrom&&!y.options.layoutScroll&&y.target&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ye(),this.relativeTargetOrigin=ye(),fs(this.relativeTargetOrigin,this.target,y.target),nt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Nn.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Al(this.parent.latestValues)||Up(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),c=!!this.resumingFrom||this!==a;let u=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(u=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===Me.timestamp&&(u=!1),u)return;const{layout:h,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||d))return;nt(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,y=this.treeScale.y;Ww(this.layoutCorrected,this.treeScale,this.path,c),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox);const{target:x}=a;if(!x){this.projectionTransform&&(this.projectionDelta=mr(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=mr(),this.projectionDeltaWithTransform=mr());const b=this.projectionTransform;hs(this.projectionDelta,this.layoutCorrected,x,this.latestValues),this.projectionTransform=Zd(this.projectionDelta,this.treeScale),(this.projectionTransform!==b||this.treeScale.x!==f||this.treeScale.y!==y)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",x)),Nn.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,a=!1){const c=this.snapshot,u=c?c.latestValues:{},h={...this.latestValues},d=mr();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const f=ye(),y=c?c.source:void 0,x=this.layout?this.layout.source:void 0,b=y!==x,S=this.getStack(),p=!S||S.members.length<=1,m=!!(b&&!p&&this.options.crossfade===!0&&!this.path.some(L1));this.animationProgress=0;let g;this.mixTargetDelta=w=>{const k=w/1e3;sh(d.x,o.x,k),sh(d.y,o.y,k),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(fs(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),D1(this.relativeTarget,this.relativeTargetOrigin,f,k),g&&h1(this.relativeTarget,g)&&(this.isProjectionDirty=!1),g||(g=ye()),nt(g,this.relativeTarget)),b&&(this.animationValues=h,o1(h,u,this.latestValues,k,m,p)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=k},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(zt(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=re.update(()=>{Ai.hasAnimatedSinceResize=!0,this.currentAnimation=y1(0,th,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(th),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:c,layout:u,latestValues:h}=o;if(!(!a||!c||!u)){if(this!==o&&this.layout&&u&&e0(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||ye();const d=Je(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+d;const f=Je(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+f}nt(a,c),pr(a,h),hs(this.projectionDeltaWithTransform,this.layoutCorrected,a,h)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new f1),this.sharedNodes.get(o).add(a);const u=a.options.initialPromotionConfig;a.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:c}=o;if((c.rotate||c.rotateX||c.rotateY||c.rotateZ)&&(a=!0),!a)return;const u={};for(let h=0;h<eh.length;h++){const d="rotate"+eh[h];c[d]&&(u[d]=c[d],o.setStaticValue(d,0))}o.render();for(const h in u)o.setStaticValue(h,u[h]);o.scheduleRender()}getProjectionStyles(o){var a,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return w1;const u={visibility:""},h=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=_i(o==null?void 0:o.pointerEvents)||"",u.transform=h?h(this.latestValues,""):"none",u;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const b={};return this.options.layoutId&&(b.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,b.pointerEvents=_i(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!En(this.latestValues)&&(b.transform=h?h({},""):"none",this.hasProjected=!1),b}const f=d.animationValues||d.latestValues;this.applyTransformsToTarget(),u.transform=Zd(this.projectionDeltaWithTransform,this.treeScale,f),h&&(u.transform=h(f,u.transform));const{x:y,y:x}=this.projectionDelta;u.transformOrigin=`${y.origin*100}% ${x.origin*100}% 0`,d.animationValues?u.opacity=d===this?(c=(a=f.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:u.opacity=d===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const b in ro){if(f[b]===void 0)continue;const{correct:S,applyTo:p}=ro[b],m=u.transform==="none"?f[b]:S(f[b],d);if(p){const g=p.length;for(let w=0;w<g;w++)u[p[w]]=m}else u[b]=m}return this.options.layoutId&&(u.pointerEvents=d===this?_i(o==null?void 0:o.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(nh),this.root.sharedNodes.clear()}}}function S1(e){e.updateLayout()}function j1(e){var t;const n=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=e.layout,{animationType:i}=e.options,o=n.source!==e.layout.source;i==="size"?st(d=>{const f=o?n.measuredBox[d]:n.layoutBox[d],y=Je(f);f.min=r[d].min,f.max=f.min+y}):e0(i,n.layoutBox,r)&&st(d=>{const f=o?n.measuredBox[d]:n.layoutBox[d],y=Je(r[d]);f.max=f.min+y,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[d].max=e.relativeTarget[d].min+y)});const a=mr();hs(a,r,n.layoutBox);const c=mr();o?hs(c,e.applyTransform(s,!0),n.measuredBox):hs(c,r,n.layoutBox);const u=!Yp(a);let h=!1;if(!e.resumeFrom){const d=e.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:f,layout:y}=d;if(f&&y){const x=ye();fs(x,n.layoutBox,f.layoutBox);const b=ye();fs(b,r,y.layoutBox),Jp(x,b)||(h=!0),d.options.layoutRoot&&(e.relativeTarget=b,e.relativeTargetOrigin=x,e.relativeParent=d)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:c,layoutDelta:a,hasLayoutChanged:u,hasRelativeTargetChanged:h})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function k1(e){Nn.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function C1(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function P1(e){e.clearSnapshot()}function nh(e){e.clearMeasurements()}function T1(e){e.isLayoutDirty=!1}function E1(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function rh(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function N1(e){e.resolveTargetDelta()}function _1(e){e.calcProjection()}function A1(e){e.resetRotation()}function M1(e){e.removeLeadSnapshot()}function sh(e,t,n){e.translate=de(t.translate,0,n),e.scale=de(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function ih(e,t,n,r){e.min=de(t.min,n.min,r),e.max=de(t.max,n.max,r)}function D1(e,t,n,r){ih(e.x,t.x,n.x,r),ih(e.y,t.y,n.y,r)}function L1(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const R1={duration:.45,ease:[.4,0,.1,1]},oh=e=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(e),ah=oh("applewebkit/")&&!oh("chrome/")?Math.round:pe;function lh(e){e.min=ah(e.min),e.max=ah(e.max)}function I1(e){lh(e.x),lh(e.y)}function e0(e,t,n){return e==="position"||e==="preserve-aspect"&&!Nl(Jd(t),Jd(n),.2)}const O1=Zp({attachResizeListener:(e,t)=>Mt(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),ka={current:void 0},t0=Zp({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!ka.current){const e=new O1({});e.mount(window),e.setOptions({layoutScroll:!0}),ka.current=e}return ka.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),F1={pan:{Feature:e1},drag:{Feature:Zw,ProjectionNode:t0,MeasureLayout:Kp}},G1=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function V1(e){const t=G1.exec(e);if(!t)return[,];const[,n,r]=t;return[n,r]}function Dl(e,t,n=1){const[r,s]=V1(e);if(!r)return;const i=window.getComputedStyle(t).getPropertyValue(r);if(i){const o=i.trim();return Op(o)?parseFloat(o):o}else return Sl(s)?Dl(s,t,n+1):s}function B1(e,{...t},n){const r=e.current;if(!(r instanceof Element))return{target:t,transitionEnd:n};n&&(n={...n}),e.values.forEach(s=>{const i=s.get();if(!Sl(i))return;const o=Dl(i,r);o&&s.set(o)});for(const s in t){const i=t[s];if(!Sl(i))continue;const o=Dl(i,r);o&&(t[s]=o,n||(n={}),n[s]===void 0&&(n[s]=i))}return{target:t,transitionEnd:n}}const z1=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),n0=e=>z1.has(e),H1=e=>Object.keys(e).some(n0),ch=e=>e===Yn||e===z,uh=(e,t)=>parseFloat(e.split(", ")[t]),dh=(e,t)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const s=r.match(/^matrix3d\((.+)\)$/);if(s)return uh(s[1],t);{const i=r.match(/^matrix\((.+)\)$/);return i?uh(i[1],e):0}},U1=new Set(["x","y","z"]),$1=Bs.filter(e=>!U1.has(e));function W1(e){const t=[];return $1.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t.length&&e.render(),t}const Mr={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:dh(4,13),y:dh(5,14)};Mr.translateX=Mr.x;Mr.translateY=Mr.y;const q1=(e,t,n)=>{const r=t.measureViewportBox(),s=t.current,i=getComputedStyle(s),{display:o}=i,a={};o==="none"&&t.setStaticValue("display",e.display||"block"),n.forEach(u=>{a[u]=Mr[u](r,i)}),t.render();const c=t.measureViewportBox();return n.forEach(u=>{const h=t.getValue(u);h&&h.jump(a[u]),e[u]=Mr[u](c,i)}),e},K1=(e,t,n={},r={})=>{t={...t},r={...r};const s=Object.keys(t).filter(n0);let i=[],o=!1;const a=[];if(s.forEach(c=>{const u=e.getValue(c);if(!e.hasValue(c))return;let h=n[c],d=Kr(h);const f=t[c];let y;if(io(f)){const x=f.length,b=f[0]===null?1:0;h=f[b],d=Kr(h);for(let S=b;S<x&&f[S]!==null;S++)y?Hc(Kr(f[S])===y):y=Kr(f[S])}else y=Kr(f);if(d!==y)if(ch(d)&&ch(y)){const x=u.get();typeof x=="string"&&u.set(parseFloat(x)),typeof f=="string"?t[c]=parseFloat(f):Array.isArray(f)&&y===z&&(t[c]=f.map(parseFloat))}else d!=null&&d.transform&&(y!=null&&y.transform)&&(h===0||f===0)?h===0?u.set(y.transform(h)):t[c]=d.transform(f):(o||(i=W1(e),o=!0),a.push(c),r[c]=r[c]!==void 0?r[c]:t[c],u.jump(f))}),a.length){const c=a.indexOf("height")>=0?window.pageYOffset:null,u=q1(t,e,a);return i.length&&i.forEach(([h,d])=>{e.getValue(h).set(d)}),e.render(),Mo&&c!==null&&window.scrollTo({top:c}),{target:u,transitionEnd:r}}else return{target:t,transitionEnd:r}};function Q1(e,t,n,r){return H1(t)?K1(e,t,n,r):{target:t,transitionEnd:r}}const X1=(e,t,n,r)=>{const s=B1(e,t,r);return t=s.target,r=s.transitionEnd,Q1(e,t,n,r)},Ll={current:null},r0={current:!1};function Y1(){if(r0.current=!0,!!Mo)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Ll.current=e.matches;e.addListener(t),t()}else Ll.current=!1}function J1(e,t,n){const{willChange:r}=t;for(const s in t){const i=t[s],o=n[s];if(qe(i))e.addValue(s,i),co(r)&&r.add(s);else if(qe(o))e.addValue(s,Ar(i,{owner:e})),co(r)&&r.remove(s);else if(o!==i)if(e.hasValue(s)){const a=e.getValue(s);!a.hasAnimated&&a.set(i)}else{const a=e.getStaticValue(s);e.addValue(s,Ar(a!==void 0?a:i,{owner:e}))}}for(const s in n)t[s]===void 0&&e.removeValue(s);return t}const hh=new WeakMap,s0=Object.keys(Ds),Z1=s0.length,fh=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],eb=Lc.length;class tb{constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:s,visualState:i},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>re.render(this.render,!1,!0);const{latestValues:a,renderState:c}=i;this.latestValues=a,this.baseTarget={...a},this.initialValues=n.initial?{...a}:{},this.renderState=c,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=o,this.isControllingVariants=Lo(n),this.isVariantNode=zm(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:u,...h}=this.scrapeMotionValuesFromProps(n,{});for(const d in h){const f=h[d];a[d]!==void 0&&qe(f)&&(f.set(a[d],!1),co(u)&&u.add(d))}}scrapeMotionValuesFromProps(t,n){return{}}mount(t){this.current=t,hh.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),r0.current||Y1(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Ll.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){hh.delete(this.current),this.projection&&this.projection.unmount(),zt(this.notifyUpdate),zt(this.render),this.valueSubscriptions.forEach(t=>t()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features)this.features[t].unmount();this.current=null}bindToMotionValue(t,n){const r=Xn.has(t),s=n.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&re.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),i=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,()=>{s(),i()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}loadFeatures({children:t,...n},r,s,i){let o,a;for(let c=0;c<Z1;c++){const u=s0[c],{isEnabled:h,Feature:d,ProjectionNode:f,MeasureLayout:y}=Ds[u];f&&(o=f),h(n)&&(!this.features[u]&&d&&(this.features[u]=new d(this)),y&&(a=y))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:c,layout:u,drag:h,dragConstraints:d,layoutScroll:f,layoutRoot:y}=n;this.projection.setOptions({layoutId:c,layout:u,alwaysMeasureLayout:!!h||d&&hr(d),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof u=="string"?u:"both",initialPromotionConfig:i,layoutScroll:f,layoutRoot:y})}return a}updateFeatures(){for(const t in this.features){const n=this.features[t];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ye()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}makeTargetAnimatable(t,n=!0){return this.makeTargetAnimatableFromInstance(t,this.props,n)}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<fh.length;r++){const s=fh[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i=t["on"+s];i&&(this.propEventSubscriptions[s]=this.on(s,i))}this.prevMotionValues=J1(this,this.scrapeMotionValuesFromProps(t,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(t=!1){if(t)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const n={};for(let r=0;r<eb;r++){const s=Lc[r],i=this.props[s];(Ms(i)||i===!1)&&(n[s]=i)}return n}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){n!==this.values.get(t)&&(this.removeValue(t),this.bindToMotionValue(t,n)),this.values.set(t,n),this.latestValues[t]=n.get()}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=Ar(n,{owner:this}),this.addValue(t,r)),r}readValue(t){var n;return this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(n=this.getBaseTargetFromProps(this.props,t))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,t,this.options)}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var n;const{initial:r}=this.props,s=typeof r=="string"||typeof r=="object"?(n=zc(this.props,r))===null||n===void 0?void 0:n[t]:void 0;if(r&&s!==void 0)return s;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!qe(i)?i:this.initialValues[t]!==void 0&&s===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new Jc),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class i0 extends tb{sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}makeTargetAnimatableFromInstance({transition:t,transitionEnd:n,...r},{transformValues:s},i){let o=vw(r,t||{},this);if(s&&(n&&(n=s(n)),r&&(r=s(r)),o&&(o=s(o))),i){gw(this,r,o);const a=X1(this,r,o,n);n=a.transitionEnd,r=a.target}return{transition:t,transitionEnd:n,...r}}}function nb(e){return window.getComputedStyle(e)}class rb extends i0{constructor(){super(...arguments),this.type="html"}readValueFromInstance(t,n){if(Xn.has(n)){const r=qc(n);return r&&r.default||0}else{const r=nb(t),s=(Wm(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(t,{transformPagePoint:n}){return Wp(t,n)}build(t,n,r,s){Oc(t,n,r,s.transformTemplate)}scrapeMotionValuesFromProps(t,n){return Bc(t,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;qe(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(t,n,r,s){Jm(t,n,r,s)}}class sb extends i0{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(Xn.has(n)){const r=qc(n);return r&&r.default||0}return n=Zm.has(n)?n:Mc(n),t.getAttribute(n)}measureInstanceViewportBox(){return ye()}scrapeMotionValuesFromProps(t,n){return tp(t,n)}build(t,n,r,s){Gc(t,n,r,this.isSVGTag,s.transformTemplate)}renderInstance(t,n,r,s){ep(t,n,r,s)}mount(t){this.isSVGTag=Vc(t.tagName),super.mount(t)}}const ib=(e,t)=>Ic(e)?new sb(t,{enableHardwareAcceleration:!1}):new rb(t,{enableHardwareAcceleration:!0}),ob={layout:{ProjectionNode:t0,MeasureLayout:Kp}},ab={...Dw,...Zv,...F1,...ob},N=lv((e,t)=>Vv(e,t,ab,ib));function o0(){const e=v.useRef(!1);return Ac(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function lb(){const e=o0(),[t,n]=v.useState(0),r=v.useCallback(()=>{e.current&&n(t+1)},[t]);return[v.useCallback(()=>re.postRender(r),[r]),t]}class cb extends v.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function ub({children:e,isPresent:t}){const n=v.useId(),r=v.useRef(null),s=v.useRef({width:0,height:0,top:0,left:0});return v.useInsertionEffect(()=>{const{width:i,height:o,top:a,left:c}=s.current;if(t||!r.current||!i||!o)return;r.current.dataset.motionPopId=n;const u=document.createElement("style");return document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${i}px !important;
            height: ${o}px !important;
            top: ${a}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[t]),v.createElement(cb,{isPresent:t,childRef:r,sizeRef:s},v.cloneElement(e,{ref:r}))}const Ca=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:i,mode:o})=>{const a=np(db),c=v.useId(),u=v.useMemo(()=>({id:c,initial:t,isPresent:n,custom:s,onExitComplete:h=>{a.set(h,!0);for(const d of a.values())if(!d)return;r&&r()},register:h=>(a.set(h,!1),()=>a.delete(h))}),i?void 0:[n]);return v.useMemo(()=>{a.forEach((h,d)=>a.set(d,!1))},[n]),v.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),o==="popLayout"&&(e=v.createElement(ub,{isPresent:n},e)),v.createElement(Ao.Provider,{value:u},e)};function db(){return new Map}function hb(e){return v.useEffect(()=>()=>e(),[])}const _n=e=>e.key||"";function fb(e,t){e.forEach(n=>{const r=_n(n);t.set(r,n)})}function mb(e){const t=[];return v.Children.forEach(e,n=>{v.isValidElement(n)&&t.push(n)}),t}const ge=({children:e,custom:t,initial:n=!0,onExitComplete:r,exitBeforeEnter:s,presenceAffectsLayout:i=!0,mode:o="sync"})=>{const a=v.useContext(Rc).forceRender||lb()[0],c=o0(),u=mb(e);let h=u;const d=v.useRef(new Map).current,f=v.useRef(h),y=v.useRef(new Map).current,x=v.useRef(!0);if(Ac(()=>{x.current=!1,fb(u,y),f.current=h}),hb(()=>{x.current=!0,y.clear(),d.clear()}),x.current)return v.createElement(v.Fragment,null,h.map(m=>v.createElement(Ca,{key:_n(m),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:i,mode:o},m)));h=[...h];const b=f.current.map(_n),S=u.map(_n),p=b.length;for(let m=0;m<p;m++){const g=b[m];S.indexOf(g)===-1&&!d.has(g)&&d.set(g,void 0)}return o==="wait"&&d.size&&(h=[]),d.forEach((m,g)=>{if(S.indexOf(g)!==-1)return;const w=y.get(g);if(!w)return;const k=b.indexOf(g);let j=m;if(!j){const C=()=>{d.delete(g);const P=Array.from(y.keys()).filter(E=>!S.includes(E));if(P.forEach(E=>y.delete(E)),f.current=u.filter(E=>{const M=_n(E);return M===g||P.includes(M)}),!d.size){if(c.current===!1)return;a(),r&&r()}};j=v.createElement(Ca,{key:_n(w),isPresent:!1,onExitComplete:C,custom:t,presenceAffectsLayout:i,mode:o},w),d.set(g,j)}h.splice(k,0,j)}),h=h.map(m=>{const g=m.key;return d.has(g)?m:v.createElement(Ca,{key:_n(m),isPresent:!0,presenceAffectsLayout:i,mode:o},m)}),v.createElement(v.Fragment,null,d.size?h:h.map(m=>v.cloneElement(m)))},Cn={I:"I",O:"O",T:"T",S:"S",Z:"Z",J:"J",L:"L"},a0={[Cn.I]:{shape:[[0,0,0,0],[1,1,1,1],[0,0,0,0],[0,0,0,0]],color:"#00f5ff",emoji:"",name:"I-Piece"},[Cn.O]:{shape:[[1,1],[1,1]],color:"#ffff00",emoji:"",name:"O-Piece"},[Cn.T]:{shape:[[0,1,0],[1,1,1],[0,0,0]],color:"#a000f0",emoji:"",name:"T-Piece"},[Cn.S]:{shape:[[0,1,1],[1,1,0],[0,0,0]],color:"#00f000",emoji:"",name:"S-Piece"},[Cn.Z]:{shape:[[1,1,0],[0,1,1],[0,0,0]],color:"#f00000",emoji:"",name:"Z-Piece"},[Cn.J]:{shape:[[1,0,0],[1,1,1],[0,0,0]],color:"#0000f0",emoji:"",name:"J-Piece"},[Cn.L]:{shape:[[0,0,1],[1,1,1],[0,0,0]],color:"#ff7f00",emoji:"",name:"L-Piece"}};let Dt={...a0};function mh(e){if(!e||!e.pieces){Dt={...a0};return}Object.keys(Dt).forEach(t=>{e.pieces[t]&&(Dt[t]={...Dt[t],color:e.pieces[t].color,emoji:e.pieces[t].emoji})})}if(typeof window<"u"){window.addEventListener("themeEquipped",e=>{mh(e.detail.theme)});try{const e=localStorage.getItem("cat-tetris-shopInventory");if(e){const n=JSON.parse(e).equippedTheme;Fm(()=>Promise.resolve().then(()=>eS),void 0).then(({PIECE_THEMES:r})=>{r[n]&&mh(r[n])})}}catch{}}function jr(e){return{"#00f5ff":"#00f5ff","#ffff00":"#ffff00","#a000f0":"#a000f0","#00f000":"#00f000","#f00000":"#f00000","#0000f0":"#0000f0","#ff7f00":"#ff7f00"}[e]||e}class pb{constructor(){this.events={}}on(t,n){this.events[t]||(this.events[t]=[]),this.events[t].push(n)}off(t,n){this.events[t]&&(this.events[t]=this.events[t].filter(r=>r!==n))}emit(t,n){this.events[t]&&this.events[t].forEach(r=>{try{r(n)}catch(s){typeof window<"u"&&window.__ERROR_LOGGER__&&window.__ERROR_LOGGER__.logError("EventEmitter",`emit:${t}`,s.message,{event:t,stack:s.stack})}})}clear(){this.events={}}}const R=new pb,O={GAME_INITIALIZED:"game_initialized",PIECE_MOVED:"piece_moved",PIECE_ROTATED:"piece_rotated",PIECE_PLACED:"piece_placed",PIECE_HELD:"piece_held",HARD_DROP:"hard_drop",LINE_CLEARED:"line_cleared",T_SPIN:"t_spin",BACK_TO_BACK:"back_to_back",SCORE_UPDATED:"score_updated",LEVEL_UP:"level_up",GAME_OVER:"game_over",GAME_PAUSED:"game_paused",GAME_RESUMED:"game_resumed"},Mi=2;function gb({text:e,color:t,id:n}){return l.jsx(N.div,{initial:{opacity:1,y:0,scale:.5},animate:{opacity:0,y:-60,scale:1.3},exit:{opacity:0},transition:{duration:1.2,ease:"easeOut"},className:"absolute left-1/2 top-1/3 -translate-x-1/2 pointer-events-none font-black text-lg drop-shadow-lg whitespace-nowrap",style:{color:t,zIndex:50,textShadow:`0 0 12px ${t}`},children:e},n)}function xb({lines:e}){const t=v.useMemo(()=>{const n=[];return e.forEach(r=>{for(let s=0;s<14;s++)n.push({id:`${r}-${s}`,startX:Math.random()*220,startY:(r+Mi)*21+10,endX:(Math.random()-.5)*300,endY:-(Math.random()*120+40),size:Math.random()*5+2,color:["#FFD700","#FF6B6B","#4ECDC4","#A78BFA","#F472B6","#34D399"][Math.floor(Math.random()*6)],delay:Math.random()*.15})}),n},[e]);return l.jsx("div",{className:"absolute inset-0 pointer-events-none overflow-visible",style:{zIndex:35},children:t.map(n=>l.jsx(N.div,{initial:{x:n.startX,y:n.startY,scale:1,opacity:1},animate:{x:n.startX+n.endX,y:n.startY+n.endY,scale:0,opacity:0},transition:{duration:.8,delay:n.delay,ease:"easeOut"},className:"absolute rounded-full",style:{width:n.size,height:n.size,backgroundColor:n.color,boxShadow:`0 0 ${n.size+4}px ${n.color}`}},n.id))})}const vb=({board:e,currentPiece:t,dropPreview:n,gameOver:r})=>{var b;const[s,i]=v.useState([]),[o,a]=v.useState([]),[c,u]=v.useState(0),h=v.useRef(0),d=v.useRef(null),f=((b=e==null?void 0:e[0])==null?void 0:b.length)||10,y=v.useMemo(()=>[...Array(Mi).fill(null).map(()=>Array(f).fill(null)),...e],[e,f]);v.useEffect(()=>{const S=()=>{u(.12),setTimeout(()=>u(0),150)};return R.on("hard_drop",S),()=>R.off("hard_drop",S)},[]),v.useEffect(()=>{const S=[];for(let p=0;p<e.length;p++)e[p]&&e[p].every(m=>m!==null)&&S.push(p);S.length>0&&(i(S),u(S.length>=4?.3:.18),setTimeout(()=>u(0),250),setTimeout(()=>i([]),800))},[e]),v.useEffect(()=>{const S=p=>{const m=(p==null?void 0:p.linesCleared)||0;if(m<=0)return;let g,w;m===1?(g="Single",w="#4ECDC4"):m===2?(g="Double!",w="#A78BFA"):m===3?(g="Triple!!",w="#F472B6"):(g=" TETRIS!! ",w="#FFD700");const k=++h.current;a(j=>[...j,{id:k,text:g,color:w}]),setTimeout(()=>a(j=>j.filter(C=>C.id!==k)),1400)};return R.on("line_cleared",S),()=>R.off("line_cleared",S)},[]),v.useEffect(()=>{const S=p=>{const m=(p==null?void 0:p.combo)||0;if(m>=2){const g=++h.current;a(w=>[...w,{id:g,text:`${m}x Combo! `,color:"#FF6B6B"}]),setTimeout(()=>a(w=>w.filter(k=>k.id!==g)),1400)}};return R.on("score_updated",S),()=>R.off("score_updated",S)},[]),v.useEffect(()=>{const S=()=>{const p=++h.current;a(m=>[...m,{id:p,text:" Back-to-Back!",color:"#FBBF24"}]),setTimeout(()=>a(m=>m.filter(g=>g.id!==p)),1400)};return R.on("back_to_back",S),()=>R.off("back_to_back",S)},[]),v.useEffect(()=>{const S=()=>{const p=++h.current;a(m=>[...m,{id:p,text:"T-SPIN!",color:"#C084FC"}]),setTimeout(()=>a(m=>m.filter(g=>g.id!==p)),1400)};return R.on("t_spin",S),()=>R.off("t_spin",S)},[]);const x=v.useCallback((S,p,m,g)=>{let w=null,k=null;const j=s.includes(m);if(t){const{position:{x:C,y:P},shape:E}=t;for(let M=0;M<E.length;M++){for(let B=0;B<E[M].length;B++)E[M][B]&&C+B===p&&P+M===m&&(w=t);if(w)break}}if(n&&n!==t){const{position:{x:C,y:P},shape:E}=n;for(let M=0;M<E.length;M++){for(let B=0;B<E[M].length;B++)E[M][B]&&C+B===p&&P+M===m&&(k=n);if(k)break}}if(w){const C=jr(w.color);return l.jsx("div",{className:"tetris-cell rounded-sm flex items-center justify-center border border-white/40",style:{backgroundColor:C,boxShadow:`0 0 6px ${C}80, inset 0 1px 0 rgba(255,255,255,0.3)`},children:l.jsx("span",{className:"text-xs drop-shadow",children:w.emoji})},`${p}-${m}`)}if(k){const C=jr(k.color);return l.jsx("div",{className:"tetris-cell rounded-sm flex items-center justify-center border-2 border-dashed",style:{borderColor:C+"50",backgroundColor:C+"12"},children:l.jsx("span",{className:"text-xs opacity-30",children:k.emoji})},`${p}-${m}`)}if(S){const C=jr(S.color);return l.jsx("div",{className:`cat-block tetris-cell rounded-sm flex items-center justify-center ${j?"line-clearing":""}`,style:{backgroundColor:j?"#fff":C,borderColor:"rgba(255, 255, 255, 0.35)",boxShadow:j?`0 0 20px #fff, 0 0 40px ${C}`:"inset 0 1px 0 rgba(255,255,255,0.25), 0 1px 3px rgba(0,0,0,0.3)",transform:j?"scale(1.1)":void 0,transition:"all 0.15s ease-out",zIndex:j?10:1},children:l.jsx("span",{className:`text-xs ${j?"opacity-0":""}`,children:S.emoji})},`${p}-${m}`)}return l.jsx("div",{className:`tetris-cell rounded-sm ${g?"bg-gray-900/30 border border-gray-500/10":"border border-white/[0.06] bg-white/[0.02]"}`},`${p}-${m}`)},[t,n,s]);return l.jsx("div",{className:"flex flex-col items-center",children:l.jsx("div",{className:"relative bg-gray-900/60 p-3 rounded-xl border-2 border-white/15 shadow-2xl overflow-hidden flex-shrink-0",ref:d,style:{width:"fit-content"},children:l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"tetris-grid",children:y.map((S,p)=>{const m=p-Mi,g=p<Mi;return S.map((w,k)=>x(w,k,m,g))})}),s.length>0&&l.jsx(l.Fragment,{children:l.jsx(xb,{lines:s})}),l.jsx(ge,{children:c>0&&l.jsx(N.div,{initial:{opacity:c},animate:{opacity:0},exit:{opacity:0},transition:{duration:.3},className:"absolute inset-0 rounded-lg pointer-events-none",style:{background:"white",zIndex:20}},"flash")}),l.jsx(ge,{children:o.map(S=>l.jsx(gb,{id:S.id,text:S.text,color:S.color},S.id))}),r&&l.jsx(N.div,{initial:{opacity:0},animate:{opacity:1},className:"absolute inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center rounded-lg",style:{zIndex:50},children:l.jsxs(N.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",damping:12},className:"text-center",children:[l.jsx("div",{className:"text-5xl mb-2",children:""}),l.jsx("div",{className:"text-white font-black text-xl drop-shadow-lg",children:"Game Over!"})]})})]})})})},vn=ue.memo(vb);class yb{constructor(){this.HIGH_SCORE_KEY="tetris_high_score"}getHighScore(){try{const t=localStorage.getItem(this.HIGH_SCORE_KEY);return t?parseInt(t,10):0}catch{return 0}}saveHighScore(t){try{const n=this.getHighScore();return t>n?(localStorage.setItem(this.HIGH_SCORE_KEY,t.toString()),!0):!1}catch{return!1}}clearHighScore(){try{localStorage.removeItem(this.HIGH_SCORE_KEY)}catch{}}}const ph=new yb,wb=({score:e,level:t,lines:n,combo:r})=>{const[s,i]=v.useState(0);return v.useEffect(()=>{i(ph.getHighScore())},[]),v.useEffect(()=>{ph.saveHighScore(e)&&i(e)},[e]),l.jsxs("div",{className:"bg-gray-900/50 p-2 rounded-xl border-2 border-white/20 shadow-2xl w-28",children:[l.jsx("h2",{className:"text-xs font-bold text-white mb-1 text-center",children:" Pontuao"}),l.jsxs("div",{className:"space-y-0.5 text-xs",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-white/70",children:"Pontos:"}),l.jsx("span",{className:"text-yellow-400 font-bold",children:e.toLocaleString()})]}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-white/70",children:"Recorde:"}),l.jsx("span",{className:"text-green-400 font-bold",children:s.toLocaleString()})]}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-white/70",children:"Nvel:"}),l.jsx("span",{className:"text-blue-400 font-bold",children:t})]}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-white/70",children:"Linhas:"}),l.jsx("span",{className:"text-purple-400 font-bold",children:n})]}),r>0&&l.jsxs("div",{className:"flex justify-between items-center bg-orange-500/20 px-1.5 py-0.5 rounded border border-orange-400/30 mt-0.5",children:[l.jsx("span",{className:"text-white/90",children:"Combo:"}),l.jsxs("span",{className:"text-orange-400 font-bold",children:[r,"x"]})]})]})]})},zn=ue.memo(wb),bb=({onMove:e,onRotate:t,onHardDrop:n,onPause:r,onHold:s,isPaused:i,gameOver:o,canHold:a})=>{const c=u=>{if(!o)switch(u){case"left":e("left");break;case"right":e("right");break;case"down":e("down");break;case"rotate":t();break;case"hardDrop":n();break;case"hold":s();break;case"pause":r();break}};return l.jsxs("div",{className:"flex flex-col items-center gap-1",children:[l.jsx("div",{className:"hidden lg:block",children:l.jsx("div",{className:"text-center text-white/50 text-[11px]",children:l.jsx("p",{children:"  mover |  girar |  soft | Espao = hard drop | C = hold"})})}),l.jsxs("div",{className:"lg:hidden",children:[l.jsxs("div",{className:"grid grid-cols-3 gap-3 max-w-xs",children:[l.jsx("div",{}),l.jsx(N.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>c("rotate"),disabled:o,className:"bg-blue-500 text-white p-4 rounded-full shadow-lg hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed",children:""}),l.jsx("div",{}),l.jsx(N.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>c("left"),disabled:o,className:"bg-gray-600 text-white p-4 rounded-full shadow-lg hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:""}),l.jsx(N.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>c("down"),disabled:o,className:"bg-gray-600 text-white p-4 rounded-full shadow-lg hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:""}),l.jsx(N.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>c("right"),disabled:o,className:"bg-gray-600 text-white p-4 rounded-full shadow-lg hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed",children:""}),l.jsx(N.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>c("hardDrop"),disabled:o,className:"bg-red-500 text-white p-4 rounded-full shadow-lg hover:bg-red-600 disabled:opacity-50 disabled:cursor-not-allowed",children:""}),l.jsx(N.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>c("hold"),disabled:o||!a,className:`p-4 rounded-full shadow-lg disabled:opacity-50 disabled:cursor-not-allowed ${a?"bg-green-500 text-white hover:bg-green-600":"bg-gray-500 text-white"}`,children:""})]}),l.jsx("div",{className:"mt-4 flex justify-center",children:l.jsx(N.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>c("pause"),disabled:o,className:"bg-yellow-500 text-white px-6 py-3 rounded-lg shadow-lg hover:bg-yellow-600 disabled:opacity-50 disabled:cursor-not-allowed",children:i?" Continuar":" Pausar"})}),l.jsxs("div",{className:"mt-4 text-center text-white/60 text-xs",children:[l.jsx("p",{children:" Controles touch-friendly"}),l.jsx("p",{children:" Use a sombra para planejar!"})]})]})]})};function Sb({scoreData:e,onClose:t}){const[n,r]=v.useState(!1),s=` Cat Tetris!
 ${e.score.toLocaleString()} pontos
 Nvel ${e.level}
 ${e.lines} linhas

Consegue me superar? `,i=async()=>{try{await navigator.clipboard.writeText(s),r(!0),setTimeout(()=>r(!1),2e3)}catch{}},o=async()=>{if(navigator.share)try{await navigator.share({title:"Minha pontuao no Cat Tetris",text:s})}catch(u){u.name}},a=()=>{const u=`https://twitter.com/intent/tweet?text=${encodeURIComponent(s)}`;window.open(u,"_blank","width=600,height=400")},c=()=>{const u=`https://wa.me/?text=${encodeURIComponent(s)}`;window.open(u,"_blank")};return l.jsxs(N.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-black/40 rounded-lg p-4 mt-4",children:[l.jsx("div",{className:"text-white/80 text-sm mb-3 text-center",children:"Compartilhe sua pontuao:"}),l.jsxs("div",{className:"flex flex-wrap gap-2 justify-center",children:[navigator.share&&l.jsx(N.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:o,className:"bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-lg font-bold flex items-center gap-2 transition-colors",children:" Compartilhar"}),l.jsx(N.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:i,className:`${n?"bg-green-600":"bg-gray-600 hover:bg-gray-500"} text-white px-4 py-2 rounded-lg font-bold flex items-center gap-2 transition-colors`,children:n?" Copiado!":" Copiar"}),l.jsx(N.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:a,className:"bg-[#1DA1F2] hover:bg-[#1a8cd8] text-white px-4 py-2 rounded-lg font-bold flex items-center gap-2 transition-colors",children:" Twitter"}),l.jsx(N.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:c,className:"bg-[#25D366] hover:bg-[#20bd5a] text-white px-4 py-2 rounded-lg font-bold flex items-center gap-2 transition-colors",children:" WhatsApp"})]}),t&&l.jsx("div",{className:"text-center mt-3",children:l.jsx("button",{onClick:t,className:"text-white/60 hover:text-white text-sm transition-colors",children:"Fechar"})})]})}const jb=({score:e,onRestart:t,onBackToMenu:n})=>{const r=typeof e=="number"?e:e.points,s=typeof e=="object"?e.level:1,i=typeof e=="object"?e.lines:0,o=c=>c<1e3?"No desista! Cada tentativa te torna melhor! ":c<5e3?"Bom trabalho! Continue praticando! ":c<1e4?"Excelente! Voc est ficando muito bom! ":"Incrvel! Voc  um mestre do Cat Tetris! ",a=c=>c<1e3?"":c<5e3?"":c<1e4?"":"";return l.jsx(N.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",children:l.jsx(N.div,{initial:{scale:.8,y:20},animate:{scale:1,y:0},transition:{type:"spring",damping:15},className:"bg-gray-900/90 p-8 rounded-2xl border-2 border-white/20 shadow-2xl max-w-md w-full mx-4 max-h-[90vh] overflow-y-auto",children:l.jsxs("div",{className:"text-center",children:[l.jsx(N.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring"},className:"text-6xl mb-4",children:a(r)}),l.jsx(N.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"text-3xl font-cat font-bold text-white mb-2",children:"Game Over!"}),l.jsxs(N.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-gradient-to-r from-yellow-400 to-orange-400 text-gray-900 font-bold text-xl p-3 rounded-lg mb-4",children:[r.toLocaleString()," pontos"]}),l.jsx(N.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"text-white/80 mb-6 text-lg",children:o(r)}),l.jsx(N.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.55},children:l.jsx(Sb,{scoreData:{score:r,level:s,lines:i}})}),l.jsxs(N.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"space-y-3 mt-4",children:[l.jsx(N.button,{onClick:c=>{c.stopPropagation(),t()},whileHover:{scale:1.05},whileTap:{scale:.95},className:"w-full bg-gradient-to-r from-green-500 to-emerald-600 text-white font-bold py-3 px-6 rounded-lg hover:from-green-400 hover:to-emerald-500 transition-all duration-300 shadow-lg",children:" Jogar Novamente"}),l.jsx(N.button,{onClick:c=>{c.stopPropagation(),n()},whileHover:{scale:1.05},whileTap:{scale:.95},className:"w-full bg-gradient-to-r from-blue-500 to-cyan-600 text-white font-bold py-3 px-6 rounded-lg hover:from-blue-400 hover:to-cyan-500 transition-all duration-300 shadow-lg",children:" Voltar ao Menu"})]}),l.jsxs(N.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},className:"mt-6 text-center text-white/60 text-sm",children:[l.jsx("p",{children:" Dica: Use a sombra para planejar melhor!"}),l.jsx("p",{children:" Tente fazer combos para mais pontos!"})]})]})})})},kb=({pieces:e})=>{const t=(n,r)=>{if(!n)return null;const s=Math.max(...n.shape.map(o=>o.length)),i=n.shape.length;return l.jsx("div",{className:"bg-gray-800/50 p-1.5 rounded-lg border border-white/20",children:l.jsx("div",{className:"flex justify-center",children:l.jsx("div",{className:"grid gap-1",style:{gridTemplateColumns:`repeat(${s}, 1fr)`,gridTemplateRows:`repeat(${i}, 1fr)`},children:n.shape.map((o,a)=>o.map((c,u)=>l.jsx("div",{className:`w-5 h-5 rounded-sm flex items-center justify-center ${c?"border border-white/40 shadow-sm":""}`,style:{backgroundColor:c?jr(n.color):"transparent"},children:c&&c!==0?l.jsx("span",{className:"text-xs leading-none",children:n.emoji}):null},`${u}-${a}`)))})})},r)};return l.jsxs("div",{className:"bg-gray-900/50 p-2 rounded-xl border-2 border-white/20 shadow-2xl w-24",children:[l.jsxs("h2",{className:"text-xs font-bold text-white mb-1 text-center flex items-center justify-center gap-1",children:[l.jsx("span",{children:""}),l.jsx("span",{className:"hidden lg:inline",children:"Prximas"})]}),l.jsx("div",{className:"space-y-1.5",children:e.map((n,r)=>t(n,r))})]})},Hn=ue.memo(kb),Cb=({heldPiece:e,canHold:t})=>{const n=()=>{if(!e)return l.jsx("div",{className:"bg-gray-800/50 p-2 lg:p-4 rounded-lg border-2 border-dashed border-white/20 flex items-center justify-center",children:l.jsx("span",{className:"text-white/40 text-xs lg:text-sm",children:"Vazio"})});const r=Math.max(...e.shape.map(i=>i.length)),s=e.shape.length;return l.jsx("div",{className:"bg-gray-800/50 p-1.5 rounded-lg border border-white/20",children:l.jsx("div",{className:"flex justify-center",children:l.jsx("div",{className:"grid gap-1",style:{gridTemplateColumns:`repeat(${r}, 1fr)`,gridTemplateRows:`repeat(${s}, 1fr)`},children:e.shape.map((i,o)=>i.map((a,c)=>l.jsx("div",{className:`w-5 h-5 rounded-sm flex items-center justify-center ${a?"border border-white/40 shadow-sm":""}`,style:{backgroundColor:a?jr(e.color):"transparent"},children:a&&a!==0?l.jsx("span",{className:"text-xs leading-none",children:e.emoji}):null},`${c}-${o}`)))})})})};return l.jsxs("div",{className:"bg-gray-900/50 p-2 rounded-xl border-2 border-white/20 shadow-2xl w-24",children:[l.jsxs("h2",{className:"text-xs font-bold text-white mb-1 text-center flex items-center justify-center gap-1",children:[l.jsx("span",{children:""}),l.jsx("span",{className:"hidden lg:inline",children:"Guardada"})]}),l.jsx("div",{children:n()})]})},Un=ue.memo(Cb),gh=500,Pa="cat_tetris_error_log";class Pb{constructor(){this.logs=this._loadLogs(),this.sessionId=`session_${Date.now()}_${Math.random().toString(36).substr(2,6)}`,this._gameStateProvider=null,this._setupGlobalHandlers()}_loadLogs(){try{const t=localStorage.getItem(Pa);return t?JSON.parse(t):[]}catch{return[]}}_saveLogs(){try{this.logs.length>gh&&(this.logs=this.logs.slice(-gh)),localStorage.setItem(Pa,JSON.stringify(this.logs))}catch{this.logs=this.logs.slice(-50);try{localStorage.setItem(Pa,JSON.stringify(this.logs))}catch{}}}_setupGlobalHandlers(){typeof window>"u"||(window.addEventListener("error",t=>{var n;this.logError("window","uncaughtError",t.message,{filename:t.filename,lineno:t.lineno,colno:t.colno,stack:(n=t.error)==null?void 0:n.stack})}),window.addEventListener("unhandledrejection",t=>{var n;this.logError("window","unhandledRejection",String(t.reason),{stack:(n=t.reason)==null?void 0:n.stack,type:typeof t.reason})}))}setGameStateProvider(t){this._gameStateProvider=t}_getGameStateSnapshot(){var t,n,r,s,i,o;if(!this._gameStateProvider)return null;try{const a=this._gameStateProvider();return a?{isPlaying:a.isPlaying,isPaused:a.isPaused,gameOver:a.gameOver,score:(t=a.score)==null?void 0:t.points,level:(n=a.score)==null?void 0:n.level,lines:(r=a.score)==null?void 0:r.lines,currentPiece:(s=a.currentPiece)==null?void 0:s.type,gameMode:((i=a.gameMode)==null?void 0:i.id)||((o=a.gameMode)==null?void 0:o.name)||null}:null}catch(a){return{snapshotError:a.message}}}logError(t,n,r,s=null){const i={id:`${Date.now()}_${Math.random().toString(36).substr(2,4)}`,timestamp:new Date().toISOString(),sessionId:this.sessionId,level:"error",source:t,action:n,message:r,details:s,gameState:this._getGameStateSnapshot()};return this.logs.push(i),this._saveLogs(),i}logWarn(t,n,r,s=null){const i={id:`${Date.now()}_${Math.random().toString(36).substr(2,4)}`,timestamp:new Date().toISOString(),sessionId:this.sessionId,level:"warn",source:t,action:n,message:r,details:s,gameState:this._getGameStateSnapshot()};return this.logs.push(i),this._saveLogs(),i}getErrors(){return this.logs.filter(t=>t.level==="error")}clearLogs(){this.logs=[],this._saveLogs()}}const Lt=new Pb;class Tb extends ue.Component{constructor(t){super(t),this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,n){Lt.logError("ErrorBoundary","componentDidCatch",t.message,{stack:t.stack,componentStack:n==null?void 0:n.componentStack}),Lt.saveForExternalAccess()}render(){return this.state.hasError?l.jsx("div",{className:"min-h-screen cat-bg flex items-center justify-center p-4",children:l.jsxs("div",{className:"game-container rounded-2xl p-6 shadow-2xl text-center",children:[l.jsx("h1",{className:"text-3xl font-cat font-bold text-white mb-4",children:" Ops! Algo deu errado"}),l.jsx("p",{className:"text-white/80 mb-4",children:"O jogo encontrou um problema inesperado."}),l.jsx("button",{onClick:()=>window.location.reload(),className:"bg-gradient-to-r from-cat-green to-cat-blue text-white font-bold py-3 px-6 rounded-xl hover:from-cat-blue hover:to-cat-green transition-all duration-200 border-2 border-white/30",children:" Reiniciar Jogo "}),!1]})}):this.props.children}}let Nt=null,xh=!1;function Eb(){Nt&&Nt.state==="suspended"&&Nt.resume().catch(()=>{})}function Nb(){xh||(xh=!0,["click","touchstart","keydown"].forEach(e=>{document.addEventListener(e,Eb,{once:!1,passive:!0})}))}function Dr(){if(Nt)return Nt.state==="suspended"&&Nt.resume().catch(()=>{}),Nt;try{return Nt=new(window.AudioContext||window.webkitAudioContext),Nb(),Nt}catch{return null}}function _b(){const e=v.useCallback((a,c,u="sine")=>{const h=Dr();if(h)try{const d=h.createOscillator(),f=h.createGain();d.connect(f),f.connect(h.destination),d.frequency.setValueAtTime(a,h.currentTime),d.type=u,f.gain.setValueAtTime(.1,h.currentTime),f.gain.exponentialRampToValueAtTime(.001,h.currentTime+c),d.start(h.currentTime),d.stop(h.currentTime+c)}catch{}},[]),t=v.useCallback(()=>{e(523,.1)},[e]),n=v.useCallback(()=>{e(659,.2),setTimeout(()=>e(784,.15),50)},[e]),r=v.useCallback(()=>{e(440,.15),setTimeout(()=>e(330,.1),80)},[e]),s=v.useCallback(()=>{e(392,.1),setTimeout(()=>e(494,.1),100),setTimeout(()=>e(588,.15),200)},[e]),i=v.useCallback(()=>{const a=Dr();if(a)try{((h,d,f=.3)=>{h.forEach(y=>{const x=a.createOscillator(),b=a.createGain();x.connect(b),b.connect(a.destination),x.frequency.setValueAtTime(y,a.currentTime),x.type="triangle",b.gain.setValueAtTime(.05,a.currentTime+d),b.gain.exponentialRampToValueAtTime(.001,a.currentTime+d+f),x.start(a.currentTime+d),x.stop(a.currentTime+d+f)})})([523,659,784,1047],0,.5)}catch{}},[]),o=v.useCallback(()=>{e(698,.15),setTimeout(()=>e(880,.15),100),setTimeout(()=>e(1047,.2),200)},[e]);return{playMenuHover:t,playMenuSelect:n,playMenuBack:r,playMenuOpen:s,playGameStart:i,playPWAInstall:o}}class Ab{constructor(){this.services=new Map,this.singletons=new Map}register(t,n,r={}){this.services.set(t,{factory:n,singleton:r.singleton||!1,dependencies:r.dependencies||[]})}resolve(t){const n=this.services.get(t);if(!n)throw new Error(`Service '${t}' not found in container`);if(n.singleton&&this.singletons.has(t))return this.singletons.get(t);const r=n.dependencies.map(i=>this.resolve(i)),s=n.factory(...r);return n.singleton&&this.singletons.set(t,s),s}registerSingleton(t,n,r=[]){this.register(t,n,{singleton:!0,dependencies:r})}registerTransient(t,n,r=[]){this.register(t,n,{singleton:!1,dependencies:r})}has(t){return this.services.has(t)}clear(){this.services.clear(),this.singletons.clear()}}class Mb{initializeGame(){throw new Error("Must be implemented")}movePiece(t){throw new Error("Must be implemented")}rotatePiece(){throw new Error("Must be implemented")}rotatePieceLeft(){throw new Error("Must be implemented")}placePiece(){throw new Error("Must be implemented")}holdPiece(){throw new Error("Must be implemented")}hardDrop(){throw new Error("Must be implemented")}updateGame(t){throw new Error("Must be implemented")}pause(){throw new Error("Must be implemented")}resume(){throw new Error("Must be implemented")}restart(){throw new Error("Must be implemented")}getDropPreview(){throw new Error("Must be implemented")}}class ho{constructor(t=10,n=20){this.width=t,this.height=n,this.bufferHeight=4,this.grid=this.createEmptyGrid(),this._buffer=this.createEmptyBuffer()}createEmptyGrid(){return Array(this.height).fill(null).map(()=>Array(this.width).fill(null))}createEmptyBuffer(){return Array(this.bufferHeight).fill(null).map(()=>Array(this.width).fill(null))}clone(){const t=new ho(this.width,this.height);return t.grid=this.grid.map(n=>[...n]),t._buffer=this._buffer.map(n=>[...n]),t}isWithinBounds(t,n){return t>=0&&t<this.width&&n>=-this.bufferHeight&&n<this.height}getCell(t,n){if(!(t<0||t>=this.width)&&!(n<-this.bufferHeight||n>=this.height))return n<0?this._buffer[this.bufferHeight+n][t]:this.grid[n][t]}setCell(t,n,r){return t<0||t>=this.width||n<-this.bufferHeight||n>=this.height?!1:n<0?(this._buffer[this.bufferHeight+n][t]=r,!0):(this.grid[n][t]=r,!0)}clearCell(t,n){return this.setCell(t,n,null)}placePiece(t){t.getCells().forEach(r=>{this.setCell(r.x,r.y,{type:r.type,color:r.color,emoji:r.emoji})})}canPlacePiece(t){return t.getCells().every(r=>r.x<0||r.x>=this.width||r.y>=this.height||r.y<-this.bufferHeight?!1:this.getCell(r.x,r.y)===null)}clearLines(){const t=[...this._buffer,...this.grid],n=[];let r=0;for(let s=t.length-1;s>=0;s--)t[s].every(o=>o!==null)?r++:n.unshift(t[s]);for(;n.length<t.length;)n.unshift(Array(this.width).fill(null));return this._buffer=n.slice(0,this.bufferHeight),this.grid=n.slice(this.bufferHeight),r}getFilledRows(){const t=[];for(let n=0;n<this.height;n++)this.grid[n].every(r=>r!==null)&&t.push(n);return t}isGameOver(){return this._buffer.some(t=>t.some(n=>n!==null))}getBoardState(){return this.grid.map(t=>[...t])}setBoardState(t){this.grid=t.map(n=>[...n]),this._buffer=this.createEmptyBuffer()}clear(){this.grid=this.createEmptyGrid(),this._buffer=this.createEmptyBuffer()}addGarbageLines(t,n=-1){if(t<=0)return!1;const r=n>=0?n:Math.floor(Math.random()*this.width),s=[];for(let c=0;c<t;c++){const u=Array(this.width).fill(null).map((h,d)=>d===r?null:{type:"garbage",color:"#808080",emoji:""});s.push(u)}const i=this.grid.splice(0,t),o=this._buffer.splice(0,t);return this._buffer.push(...i),this.grid.push(...s),o.some(c=>c.some(u=>u!==null))}}class fo{constructor(){this.points=0,this.level=1,this.lines=0,this.combo=0,this.tSpins=0,this.backToBack=0,this.tetrisCount=0,this._fixedLevel=null}addPoints(t){this.points+=t}addLines(t){this.lines+=t,this.updateLevel()}incrementCombo(){this.combo++}resetCombo(){this.combo=0}addTSpin(){this.tSpins++}addBackToBack(){this.backToBack++}addTetris(){this.tetrisCount++}updateLevel(){this._fixedLevel||(this.level=Math.min(15,Math.floor(this.lines/10)+1))}getLevel(){return this.level}getDropTime(){const t=this._fixedLevel||this.level;return[1e3,793,618,473,355,262,190,135,94,64,43,28,18,11,7][Math.min(t,15)-1]||7}reset(){this.points=0,this.level=1,this.lines=0,this.combo=0,this.tSpins=0,this.backToBack=0,this.tetrisCount=0,this._fixedLevel=null}clone(){const t=new fo;return t.points=this.points,t.level=this.level,t.lines=this.lines,t.combo=this.combo,t.tSpins=this.tSpins,t.backToBack=this.backToBack,t.tetrisCount=this.tetrisCount,t}toJSON(){return{points:this.points,level:this.level,lines:this.lines,combo:this.combo,tSpins:this.tSpins,backToBack:this.backToBack,tetrisCount:this.tetrisCount}}}class jt{constructor(t,n,r,s,i,o=!1,a=0){this.type=t,this.shape=n,this.color=r,this.emoji=s,this.position=i,this.isTSpin=o,this.rotationState=a}move(t,n){return new jt(this.type,this.shape,this.color,this.emoji,{x:this.position.x+t,y:this.position.y+n},this.isTSpin,this.rotationState)}rotate(){const t=this.shape[0].map((n,r)=>this.shape.map(s=>s[r]).reverse());return new jt(this.type,t,this.color,this.emoji,this.position,this.isTSpin,(this.rotationState+1)%4)}setTSpin(t){return new jt(this.type,this.shape,this.color,this.emoji,this.position,t,this.rotationState)}clone(){return new jt(this.type,this.shape.map(t=>[...t]),this.color,this.emoji,{...this.position},this.isTSpin,this.rotationState)}reset(t,n,r,s,i,o=!1){return this.type=t,this.shape=n,this.color=r,this.emoji=s,this.position=i,this.isTSpin=o,this.rotationState=0,this}getWidth(){var t;return((t=this.shape[0])==null?void 0:t.length)||0}getHeight(){return this.shape.length||0}getCells(){const t=[];return this.shape.forEach((n,r)=>{n.forEach((s,i)=>{s&&t.push({x:this.position.x+i,y:this.position.y+r,type:this.type,color:this.color,emoji:this.emoji})})}),t}}class Db{calculateScore(t,n,r,s,i){throw new Error("Must be implemented")}calculateSoftDropPoints(){throw new Error("Must be implemented")}calculateTSpinBonus(t){throw new Error("Must be implemented")}calculateBackToBackBonus(t){throw new Error("Must be implemented")}calculateComboBonus(t){throw new Error("Must be implemented")}}class yn extends Db{calculateScore(t,n,r,s,i){let o=this.getBasePoints(t);return s&&(o=this.calculateTSpinBonus(t)),i&&(o=this.calculateBackToBackBonus(o)),o*=n,o+=this.calculateComboBonus(r),o}calculateSoftDropPoints(){return 1}calculateTSpinBonus(t){return[0,800,1200,1600,2e3][t]||0}calculateBackToBackBonus(t){return Math.floor(t*1.5)}calculateComboBonus(t){return t*50}getBasePoints(t){return[0,100,300,500,800][t]||0}}const Le={BOARD_WIDTH:10,BOARD_HEIGHT:20,BUFFER_ROWS:4,INITIAL_DROP_TIME:1e3,LOCK_DELAY:500,SOFT_DROP_MULTIPLIER:20,NEXT_PIECES_COUNT:3,BAG_SIZE:7,KICK_OFFSETS:[{x:-1,y:0},{x:1,y:0},{x:0,y:-1},{x:-1,y:-1},{x:1,y:-1}],SRS_KICKS_CW:{"0>1":[{x:-1,y:0},{x:-1,y:-1},{x:0,y:2},{x:-1,y:2}],"1>2":[{x:1,y:0},{x:1,y:1},{x:0,y:-2},{x:1,y:-2}],"2>3":[{x:1,y:0},{x:1,y:-1},{x:0,y:2},{x:1,y:2}],"3>0":[{x:-1,y:0},{x:-1,y:1},{x:0,y:-2},{x:-1,y:-2}]},SRS_KICKS_CCW:{"1>0":[{x:1,y:0},{x:1,y:1},{x:0,y:-2},{x:1,y:-2}],"2>1":[{x:-1,y:0},{x:-1,y:-1},{x:0,y:2},{x:-1,y:2}],"3>2":[{x:-1,y:0},{x:-1,y:1},{x:0,y:-2},{x:-1,y:-2}],"0>3":[{x:1,y:0},{x:1,y:-1},{x:0,y:2},{x:1,y:2}]},DROP_TIMES:[1e3,850,700,600,500,400,350,300,250,200,150,100,80,60,50],LEVEL_LINES_REQUIREMENT:10,MAX_LEVEL:15};class $n extends Mb{constructor(t,n,r,s=new yn){super(),this.pieceFactory=t,this.movementStrategyFactory=n,this.gameRepository=r,this.scoringService=s,this.board=new ho(Le.BOARD_WIDTH,Le.BOARD_HEIGHT),this.score=new fo,this.currentPiece=null,this.nextPieces=[],this.heldPiece=null,this.canHold=!0,this.isPlaying=!1,this.isPaused=!1,this.gameOver=!1,this.lastDropTime=0,this.backToBack=!1,this._lockDelayActive=!1,this._lockDelayElapsed=0,this._lockDelayResets=0,this._lockDelayMax=Le.LOCK_DELAY,this._lockDelayMaxResets=15,this.gameMode=null,this.modeTimeElapsed=0,this.modeStartTime=0,this.pendingGarbage=0,this._lastAttack=0,this._dirty=!0,this._cachedState=null}_markDirty(){this._dirty=!0,this._cachedState=null}get isDirty(){return this._dirty}clearDirty(){this._dirty=!1}initializeGame(){this.pieceFactory.resetBag(),this.board=new ho(Le.BOARD_WIDTH,Le.BOARD_HEIGHT),this.score=new fo,this.currentPiece=this.pieceFactory.createRandomPiece(),this.nextPieces=this.pieceFactory.createNextPieces(Le.NEXT_PIECES_COUNT),this.heldPiece=null,this.canHold=!0,this.isPlaying=!1,this.isPaused=!1,this.gameOver=!1,this.lastDropTime=0,this.backToBack=!1,this._lockDelayActive=!1,this._lockDelayElapsed=0,this._lockDelayResets=0,this.modeTimeElapsed=0,this.modeStartTime=Date.now(),this.pendingGarbage=0,this._lastAttack=0,this.applyGameMode(),R.emit(O.GAME_INITIALIZED),this._markDirty()}setGameMode(t){this.gameMode=t}applyGameMode(){if(!this.gameMode||!this.gameMode.rules)return;const t=this.gameMode.rules;t.startLevel&&(this.score.level=t.startLevel),t.fixedLevel?this.score._fixedLevel=t.fixedLevel:this.score._fixedLevel=null,this._modeRules=t}movePiece(t){var n,r;if(!(!this.currentPiece||this.gameOver||this.isPaused))try{const s=this.movementStrategyFactory.createStrategy(t),i=s.execute(this.currentPiece,this.board.grid);if(i!==this.currentPiece){if(this.currentPiece=i,this._markDirty(),t==="down"){if(this._lockDelayActive=!1,this._lockDelayElapsed=0,this.lastDropTime=0,s.getSoftDropPoints){const o=this.scoringService.calculateSoftDropPoints();this.score.addPoints(o)}}else(t==="left"||t==="right")&&(this._resetLockDelay(),this._checkUngrounded());R.emit(O.PIECE_MOVED,{direction:t,piece:i})}else t==="down"&&(this._markDirty(),this._lockDelayActive||(this._lockDelayActive=!0,this._lockDelayElapsed=0,this._lockDelayResets=0))}catch(s){Lt.logError("GameService","movePiece",s.message,{direction:t,pieceType:(n=this.currentPiece)==null?void 0:n.type,piecePos:(r=this.currentPiece)==null?void 0:r.position,stack:s.stack})}}rotatePiece(){var t,n;if(!(!this.currentPiece||this.gameOver||this.isPaused))try{const s=this.movementStrategyFactory.createStrategy("rotate").execute(this.currentPiece,this.board.grid);s!==this.currentPiece&&(this.currentPiece=s,this._markDirty(),this._resetLockDelay(),this._checkUngrounded(),R.emit(O.PIECE_ROTATED,{piece:s}))}catch(r){Lt.logError("GameService","rotatePiece",r.message,{pieceType:(t=this.currentPiece)==null?void 0:t.type,piecePos:(n=this.currentPiece)==null?void 0:n.position,stack:r.stack})}}rotatePieceLeft(){if(!this.currentPiece||this.gameOver||this.isPaused)return;const n=this.movementStrategyFactory.createStrategy("rotateLeft").execute(this.currentPiece,this.board.grid);n!==this.currentPiece&&(this.currentPiece=n,this._markDirty(),this._resetLockDelay(),this._checkUngrounded(),R.emit(O.PIECE_ROTATED,{piece:n}))}placePiece(){var n,r;if(!this.currentPiece)return;this._markDirty(),this._lockDelayActive=!1,this._lockDelayElapsed=0,this._lockDelayResets=0,this._lastAttack=0,this.board.placePiece(this.currentPiece);const t=this.board.clearLines();if(t>0){this.score.addLines(t),this.score.incrementCombo();const s=this.currentPiece.isTSpin,i=this.scoringService.calculateScore(t,this.score.getLevel(),this.score.combo,s,this.backToBack);if(this.score.addPoints(i),s||t===4?(this.backToBack&&R.emit(O.BACK_TO_BACK),this.backToBack=!0,s&&(this.score.addTSpin(),R.emit(O.T_SPIN,{linesCleared:t}))):this.backToBack=!1,R.emit(O.LINE_CLEARED,{linesCleared:t}),R.emit(O.SCORE_UPDATED,{score:this.score.points,level:this.score.level,combo:this.score.combo,points:i,isTSpin:s}),this._lastAttack=this._calculateAttack(t,s,this.score.combo,this.backToBack),this._lastAttack>0&&this.pendingGarbage>0){const o=Math.min(this._lastAttack,this.pendingGarbage);this._lastAttack-=o,this.pendingGarbage-=o}}else this.score.resetCombo();if(R.emit(O.PIECE_PLACED,{piece:this.currentPiece,linesCleared:t}),this.pendingGarbage>0){const s=this.board.addGarbageLines(this.pendingGarbage);if(this.pendingGarbage=0,s&&this.board.isGameOver()){this.gameOver=!0,R.emit(O.GAME_OVER);return}}if(this.getNextPiece(),this.canHold=!0,(n=this._modeRules)!=null&&n.lineGoal&&this.score.lines>=this._modeRules.lineGoal){this.gameOver=!0,R.emit(O.GAME_OVER);return}if(((r=this._modeRules)==null?void 0:r.gameOver)===!1){if(this.board.isGameOver()){this.board._buffer=this.board.createEmptyBuffer();for(let s=0;s<4;s++)for(let i=0;i<this.board.width;i++)this.board.clearCell(i,s)}}else this.board.isGameOver()&&(this.gameOver=!0,R.emit(O.GAME_OVER))}_calculateAttack(t,n,r,s){if(t===0)return 0;let i=0;if(n?i=[0,2,4,6][t]||0:i=[0,0,1,2,4][t]||0,s&&(n||t===4)&&(i+=1),r>=1){const a=[0,0,1,1,2,2,3,3,4,4];i+=a[Math.min(r,a.length-1)]||4}return this.board.grid.every(a=>a.every(c=>c===null))&&(i=10),i}receiveGarbage(t){t>0&&(this.pendingGarbage+=t,this._markDirty())}consumeAttack(){const t=this._lastAttack;return this._lastAttack=0,t}holdPiece(){var t,n;if(!(!this.canHold||!this.currentPiece)){this._lockDelayActive=!1,this._lockDelayElapsed=0,this._lockDelayResets=0;try{const r=this.heldPiece,s=this.currentPiece.type,i=Dt[s];if(this.heldPiece=new jt(s,i.shape,i.color,i.emoji,{x:3,y:0},!1,0),r){const o=r.type==="I"?{x:3,y:-2}:{x:3,y:0},a=Dt[r.type];this.currentPiece=new jt(r.type,a.shape,a.color,a.emoji,o,!1,0)}else this.getNextPiece();this.canHold=!1,this._markDirty(),R.emit(O.PIECE_HELD,{heldPiece:this.heldPiece})}catch(r){Lt.logError("GameService","holdPiece",r.message,{currentPieceType:(t=this.currentPiece)==null?void 0:t.type,heldPieceType:(n=this.heldPiece)==null?void 0:n.type,stack:r.stack})}}}hardDrop(){var t,n;if(!(!this.currentPiece||this.gameOver||this.isPaused))try{this._lockDelayActive=!1,this._lockDelayElapsed=0;const s=this.movementStrategyFactory.createStrategy("hardDrop").execute(this.currentPiece,this.board.grid);this.currentPiece=s.piece,this.score.addPoints(s.dropDistance),this._markDirty();const i=this.currentPiece;R.emit(O.HARD_DROP,{dropDistance:s.dropDistance}),R.emit(O.PIECE_MOVED,{direction:"hardDrop",piece:i}),this.placePiece()}catch(r){Lt.logError("GameService","hardDrop",r.message,{pieceType:(t=this.currentPiece)==null?void 0:t.type,piecePos:(n=this.currentPiece)==null?void 0:n.position,stack:r.stack})}}updateGame(t){var n;if(!(!this.isPlaying||this.gameOver||this.isPaused)){if((n=this._modeRules)!=null&&n.timeLimit&&(this.modeTimeElapsed=(Date.now()-this.modeStartTime)/1e3,this.modeTimeElapsed>=this._modeRules.timeLimit)){this.gameOver=!0,this._markDirty(),R.emit(O.GAME_OVER);return}if(this._lockDelayActive){if(this._lockDelayElapsed+=t,this._lockDelayElapsed>=this._lockDelayMax){this._lockDelayActive=!1,this._lockDelayElapsed=0,this.placePiece(),this.lastDropTime=0;return}return}this.lastDropTime+=t,this.lastDropTime>=this.score.getDropTime()&&(this.movePiece("down"),this.lastDropTime=0)}}_resetLockDelay(){this._lockDelayActive&&this._lockDelayResets<this._lockDelayMaxResets&&(this._lockDelayElapsed=0,this._lockDelayResets++)}_checkUngrounded(){if(!this._lockDelayActive||!this.currentPiece)return;this.board.canPlacePiece(this.currentPiece.move(0,1))&&(this._lockDelayActive=!1,this._lockDelayElapsed=0,this._lockDelayResets=0)}pause(){this.isPaused=!0,this._markDirty(),R.emit(O.GAME_PAUSED)}resume(){this.isPaused=!1,this.isPlaying=!0,this._markDirty(),R.emit(O.GAME_RESUMED)}restart(){this.initializeGame(),this.isPlaying=!0,this.isPaused=!1,this.modeStartTime=Date.now(),this._markDirty()}getDropPreview(){if(!this.currentPiece)return null;let t=this.currentPiece,n=0;const r=20;for(;n<r&&this.board.canPlacePiece(t.move(0,1));)t=t.move(0,1),n++;return t}getNextPiece(){const t=this.nextPieces.shift();this.nextPieces.push(this.pieceFactory.createRandomPiece()),this.currentPiece=t,this.currentPiece&&!this.board.canPlacePiece(this.currentPiece)&&(this.gameOver=!0,this._markDirty(),R.emit(O.GAME_OVER))}getGameState(){var t;return this._cachedState&&!this._dirty?this._cachedState:(this._cachedState={board:this.board.grid.map(n=>[...n]),currentPiece:this.currentPiece,nextPieces:[...this.nextPieces],heldPiece:this.heldPiece,canHold:this.canHold,score:this.score.toJSON(),isPlaying:this.isPlaying,isPaused:this.isPaused,gameOver:this.gameOver,backToBack:this.backToBack,gameMode:this.gameMode,modeTimeElapsed:(t=this._modeRules)!=null&&t.timeLimit?Math.max(0,this._modeRules.timeLimit-(Date.now()-this.modeStartTime)/1e3):null},this._cachedState)}setGameState(t){this.board.setBoardState(t.board),this.currentPiece=t.currentPiece,this.nextPieces=t.nextPieces,this.heldPiece=t.heldPiece,this.canHold=t.canHold,this.isPlaying=t.isPlaying,this.isPaused=t.isPaused,this.gameOver=t.gameOver,this.backToBack=t.backToBack,Object.assign(this.score,t.score)}}class Lb{saveHighScore(t){throw new Error("Must be implemented")}getHighScore(){throw new Error("Must be implemented")}saveSettings(t){throw new Error("Must be implemented")}getSettings(){throw new Error("Must be implemented")}saveGameState(t){throw new Error("Must be implemented")}getGameState(){throw new Error("Must be implemented")}clearGameState(){throw new Error("Must be implemented")}}class Rb extends Lb{constructor(){super(),this.highScoreKey="cat-tetris-high-score",this.settingsKey="cat-tetris-settings",this.gameStateKey="cat-tetris-game-state"}saveHighScore(t){localStorage.setItem(this.highScoreKey,t.toString())}getHighScore(){return parseInt(localStorage.getItem(this.highScoreKey)||"0")}saveSettings(t){localStorage.setItem(this.settingsKey,JSON.stringify(t))}getSettings(){const t=localStorage.getItem(this.settingsKey);return t?JSON.parse(t):{volume:80,gameSpeed:"normal",soundEnabled:!0,particlesEnabled:!0}}saveGameState(t){localStorage.setItem(this.gameStateKey,JSON.stringify(t))}getGameState(){const t=localStorage.getItem(this.gameStateKey);return t?JSON.parse(t):null}clearGameState(){localStorage.removeItem(this.gameStateKey)}load(t){const n=localStorage.getItem(`cat-tetris-${t}`);return n?JSON.parse(n):null}save(t,n){localStorage.setItem(`cat-tetris-${t}`,JSON.stringify(n))}remove(t){localStorage.removeItem(`cat-tetris-${t}`)}}class Ib{createPiece(t,n){throw new Error("Must be implemented")}createRandomPiece(){throw new Error("Must be implemented")}createNextPieces(t){throw new Error("Must be implemented")}}class Ob{execute(t,n){throw new Error("Must be implemented")}}class Fr extends Ob{execute(t,n){throw new Error("execute method must be implemented")}movePiece(t,n,r,s){if(!t||!n||!Array.isArray(n))return t;const i={x:t.position.x+r,y:t.position.y+s};return this.isValidMove(t,n,i)?t.move(r,s):t}isValidMove(t,n,r){return!t||!t.shape||!n||!Array.isArray(n)?!1:t.shape.every((s,i)=>Array.isArray(s)?s.every((o,a)=>{if(!o)return!0;const c=r.x+a,u=r.y+i;return c<0||c>=Le.BOARD_WIDTH||u>=Le.BOARD_HEIGHT?!1:u<0?!0:n[u]&&Array.isArray(n[u])&&!n[u][c]}):!0)}}class Fb extends Fr{execute(t,n){return this.movePiece(t,n,-1,0)}}class Gb extends Fr{execute(t,n){return this.movePiece(t,n,1,0)}}class Vb extends Fr{execute(t,n){if(!t||!n)return t;const r={x:t.position.x,y:t.position.y+1};return this.isValidMove(t,n,r)?t.move(0,1):t}getSoftDropPoints(){return 1}}class Bb extends Fr{execute(t,n){var u;if(!t||!t.shape||!n)return t;const r=this.rotatePiece(t);let s=!1;if(this.isValidMove(r,n,r.position))return s=this.detectTSpin(r,n),r.setTSpin(s);const i=t.rotationState??0,o=(i+1)%4,a=`${i}>${o}`,c=((u=Le.SRS_KICKS_CW)==null?void 0:u[a])||Le.KICK_OFFSETS;for(const h of c){const d={x:r.position.x+h.x,y:r.position.y+h.y};if(this.isValidMove(r,n,d)){const f=r.move(h.x,h.y);return s=this.detectTSpin(f,n),f.setTSpin(s)}}return t}detectTSpin(t,n){return t.type!=="T"?!1:this.getCornerPositions(t).filter(o=>o.x<0||o.x>=Le.BOARD_WIDTH||o.y<0||o.y>=Le.BOARD_HEIGHT||n[o.y]&&n[o.y][o.x]).length>=3}getCornerPositions(t){const n=[],r=t.position.x,s=t.position.y;return n.push({x:r,y:s}),n.push({x:r+2,y:s}),n.push({x:r,y:s+2}),n.push({x:r+2,y:s+2}),n}rotatePiece(t){return!t||!t.shape||!Array.isArray(t.shape)||t.shape.length===0?t:t.rotate()}}class zb extends Fr{execute(t,n){var u;if(!t||!t.shape||!n)return t;const r=this.rotatePieceLeft(t);let s=!1;if(this.isValidMove(r,n,r.position))return s=this.detectTSpin(r,n),r.setTSpin(s);const i=t.rotationState??0,o=(i+3)%4,a=`${i}>${o}`,c=((u=Le.SRS_KICKS_CCW)==null?void 0:u[a])||Le.KICK_OFFSETS;for(const h of c){const d={x:r.position.x+h.x,y:r.position.y+h.y};if(this.isValidMove(r,n,d)){const f=r.move(h.x,h.y);return s=this.detectTSpin(f,n),f.setTSpin(s)}}return t}detectTSpin(t,n){return t.type!=="T"?!1:this.getCornerPositions(t).filter(o=>o.x<0||o.x>=Le.BOARD_WIDTH||o.y<0||o.y>=Le.BOARD_HEIGHT||n[o.y]&&n[o.y][o.x]).length>=3}getCornerPositions(t){const n=[],r=t.position.x,s=t.position.y;return n.push({x:r,y:s}),n.push({x:r+2,y:s}),n.push({x:r,y:s+2}),n.push({x:r+2,y:s+2}),n}rotatePieceLeft(t){if(!t||!t.shape||!Array.isArray(t.shape)||t.shape.length===0)return t;const n=t.shape[0].map((r,s)=>t.shape.map(i=>i[i.length-1-s]));return new jt(t.type,n,t.color,t.emoji,t.position,t.isTSpin,(t.rotationState+3)%4)}}class Hb extends Fr{execute(t,n){if(!t||!n)return{piece:t,dropDistance:0};let r=t,s=0;for(;;){const i={x:r.position.x,y:r.position.y+1};if(this.isValidMove(r,n,i))r=r.move(0,1),s++;else break}return{piece:r,dropDistance:s}}}class vh{constructor(){this.reset()}reset(){return this.piece={type:null,shape:[],color:"#000000",emoji:"",position:{x:3,y:0},isTSpin:!1},this}setType(t){return this.piece.type=t,this}setShape(t){return this.piece.shape=t,this}setColor(t){return this.piece.color=t,this}setEmoji(t){return this.piece.emoji=t,this}setPosition(t,n){return this.piece.position={x:t,y:n},this}setTSpin(t){return this.piece.isTSpin=t,this}build(){const t=new jt(this.piece.type,this.piece.shape,this.piece.color,this.piece.emoji,this.piece.position,this.piece.isTSpin);return this.reset(),t}}class Wn extends Ib{constructor(){super(),this.pieceConfigs=Dt,this._bag=[],this._bagIndex=0}_refillBag(){this._bag=Object.keys(this.pieceConfigs);for(let t=this._bag.length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1));[this._bag[t],this._bag[n]]=[this._bag[n],this._bag[t]]}this._bagIndex=0}resetBag(){this._bag=[],this._bagIndex=0}_getNextType(){return this._bagIndex>=this._bag.length&&this._refillBag(),this._bag[this._bagIndex++]}createPiece(t,n={x:3,y:0}){const r=this.pieceConfigs[t];if(!r)throw new Error(`Tipo de pea invlido: ${t}`);return new vh().setType(t).setShape(r.shape).setColor(r.color).setEmoji(r.emoji).setPosition(n.x,n.y).build()}createRandomPiece(){const t=this._getNextType(),n=this.pieceConfigs[t];let r={x:3,y:0};return t==="I"&&(r={x:3,y:-2}),new vh().setType(t).setShape(n.shape).setColor(n.color).setEmoji(n.emoji).setPosition(r.x,r.y).build()}createNextPieces(t=3){const n=[];for(let r=0;r<t;r++)n.push(this.createRandomPiece());return n}registerPieceType(t,n){this.pieceConfigs[t]=n}getPieceTypes(){return Object.keys(this.pieceConfigs)}}class qn{constructor(){this.strategies=new Map,this.registerDefaultStrategies()}registerDefaultStrategies(){this.strategies.set("left",()=>new Fb),this.strategies.set("right",()=>new Gb),this.strategies.set("down",()=>new Vb),this.strategies.set("rotate",()=>new Bb),this.strategies.set("rotateLeft",()=>new zb),this.strategies.set("hardDrop",()=>new Hb)}createStrategy(t){const n=this.strategies.get(t);if(!n)throw new Error(`Strategy type '${t}' not found`);return n()}registerStrategy(t,n){if(typeof n!="function")throw new Error("Strategy factory must be a function");this.strategies.set(t,n)}unregisterStrategy(t){this.strategies.delete(t)}getAvailableStrategies(){return Array.from(this.strategies.keys())}hasStrategy(t){return this.strategies.has(t)}}class Ub{getSettings(){throw new Error("Method getSettings must be implemented")}saveSettings(t){throw new Error("Method saveSettings must be implemented")}updateSetting(t,n){throw new Error("Method updateSetting must be implemented")}resetSettings(){throw new Error("Method resetSettings must be implemented")}}class $b extends Ub{constructor(){super(),this.storageKey="cat-tetris-settings",this.defaultSettings={volume:80,gameSpeed:"normal",soundEnabled:!0,particlesEnabled:!0}}getSettings(){try{const t=localStorage.getItem(this.storageKey);return t?{...this.defaultSettings,...JSON.parse(t)}:this.defaultSettings}catch{return this.defaultSettings}}saveSettings(t){try{const n={...this.defaultSettings,...t};return localStorage.setItem(this.storageKey,JSON.stringify(n)),n}catch{throw new Error("Failed to save settings")}}resetSettings(){try{return localStorage.removeItem(this.storageKey),this.defaultSettings}catch{throw new Error("Failed to reset settings")}}updateSetting(t,n){const s={...this.getSettings(),[t]:n};return this.saveSettings(s)}}class Wb{getStats(){throw new Error("Method getStats must be implemented")}incrementPlayTime(){throw new Error("Method incrementPlayTime must be implemented")}incrementPiecesPlaced(){throw new Error("Method incrementPiecesPlaced must be implemented")}addLinesCleared(t){throw new Error("Method addLinesCleared must be implemented")}incrementTSpins(){throw new Error("Method incrementTSpins must be implemented")}updateMaxCombo(t){throw new Error("Method updateMaxCombo must be implemented")}reset(){throw new Error("Method reset must be implemented")}}class qb extends Wb{constructor(){super(),this.stats={playTime:0,piecesPlaced:0,linesCleared:0,tSpins:0,backToBack:0,maxCombo:0,tetrisCount:0,linesPerSecond:0},this.sessionStartTime=Date.now()}getStats(){return{...this.stats}}incrementPlayTime(){this.stats.playTime+=1,this.calculateLinesPerSecond()}incrementPiecesPlaced(){this.stats.piecesPlaced+=1}addLinesCleared(t){this.stats.linesCleared+=t,t===4&&(this.stats.tetrisCount+=1),this.calculateLinesPerSecond()}incrementTSpins(){this.stats.tSpins+=1}incrementBackToBack(){this.stats.backToBack+=1}updateMaxCombo(t){t>this.stats.maxCombo&&(this.stats.maxCombo=t)}calculateLinesPerSecond(){this.stats.playTime>0?this.stats.linesPerSecond=this.stats.linesCleared/this.stats.playTime:this.stats.linesPerSecond=0}reset(){this.stats={playTime:0,piecesPlaced:0,linesCleared:0,tSpins:0,backToBack:0,maxCombo:0,tetrisCount:0,linesPerSecond:0},this.sessionStartTime=Date.now()}getSessionDuration(){return Date.now()-this.sessionStartTime}}class Kb{registerHandler(t,n){throw new Error("Method registerHandler must be implemented")}unregisterHandler(t,n){throw new Error("Method unregisterHandler must be implemented")}startListening(){throw new Error("Method startListening must be implemented")}stopListening(){throw new Error("Method stopListening must be implemented")}setKeyMapping(t,n){throw new Error("Method setKeyMapping must be implemented")}getKeyMappings(){throw new Error("Method getKeyMappings must be implemented")}}class Qb extends Kb{constructor(){super();Ks(this,"_handleKeyDown",n=>{if(this.preventDefaultKeys.includes(n.key)&&n.preventDefault(),n.repeat)return;const r=this.keyMappings[n.key];r&&(this._fireAction(r),this._dasActions.has(r)&&this._pressedKeys.set(n.key,{action:r,dasTimer:0,arrTimer:0,dasTriggered:!1}))});Ks(this,"_handleKeyUp",n=>{this._pressedKeys.delete(n.key)});Ks(this,"_handleBlur",()=>{this._pressedKeys.clear()});this.keyMappings={ArrowLeft:"moveLeft",ArrowRight:"moveRight",ArrowDown:"moveDown",ArrowUp:"rotate",x:"rotate",X:"rotate",z:"rotateLeft",Z:"rotateLeft"," ":"hardDrop",c:"hold",C:"hold",Shift:"hold",p:"pause",P:"pause",Escape:"pause"},this.preventDefaultKeys=["ArrowLeft","ArrowRight","ArrowDown","ArrowUp"," "],this.handlers=new Map,this.isListening=!1,this.das=167,this.arr=33,this.sdf=5,this._dasActions=new Set(["moveLeft","moveRight","moveDown"]),this._pressedKeys=new Map,this._rafId=null,this._lastTime=0}setDAS(n){this.das=Math.max(0,n)}setARR(n){this.arr=Math.max(0,n)}getDAS(){return this.das}getARR(){return this.arr}registerHandler(n,r){this.handlers.has(n)||this.handlers.set(n,[]),this.handlers.get(n).push(r)}unregisterHandler(n,r){if(this.handlers.has(n)){const s=this.handlers.get(n),i=s.indexOf(r);i>-1&&s.splice(i,1)}}_fireAction(n){this.handlers.has(n)&&this.handlers.get(n).forEach(r=>{try{r()}catch{}})}startListening(){this.isListening||(window.addEventListener("keydown",this._handleKeyDown),window.addEventListener("keyup",this._handleKeyUp),window.addEventListener("blur",this._handleBlur),this.isListening=!0,this._startLoop())}stopListening(){this.isListening&&(window.removeEventListener("keydown",this._handleKeyDown),window.removeEventListener("keyup",this._handleKeyUp),window.removeEventListener("blur",this._handleBlur),this.isListening=!1,this._stopLoop(),this._pressedKeys.clear())}_startLoop(){this._lastTime=performance.now();const n=r=>{const s=r-this._lastTime;this._lastTime=r,this._updateDAS(s),this._rafId=requestAnimationFrame(n)};this._rafId=requestAnimationFrame(n)}_stopLoop(){this._rafId&&(cancelAnimationFrame(this._rafId),this._rafId=null)}_updateDAS(n){for(const[r,s]of this._pressedKeys)if(s.dasTriggered)if(s.arrTimer+=n,this.arr===0){for(let i=0;i<20;i++)this._fireAction(s.action);s.arrTimer=0}else for(;s.arrTimer>=this.arr;)s.arrTimer-=this.arr,this._fireAction(s.action);else if(s.dasTimer+=n,s.dasTimer>=this.das)if(s.dasTriggered=!0,s.arrTimer=0,this.arr===0)for(let i=0;i<20;i++)this._fireAction(s.action);else this._fireAction(s.action)}setKeyMapping(n,r){this.keyMappings[n]=r}removeKeyMapping(n){delete this.keyMappings[n]}getKeyMappings(){return{...this.keyMappings}}clear(){this.handlers.clear(),this.stopListening()}}class Xb{constructor(t){this.gameRepository=t,this.currency=this.loadCurrency()}loadCurrency(){return this.gameRepository.load("playerCurrency")||{fish:0,totalEarned:0,totalSpent:0}}save(){this.gameRepository.save("playerCurrency",this.currency)}getFish(){return this.currency.fish}getCurrency(){return{...this.currency}}addFish(t,n="unknown"){return t<=0?!1:(this.currency.fish+=t,this.currency.totalEarned+=t,this.save(),!0)}spendFish(t,n="unknown"){return t<=0||this.currency.fish<t?!1:(this.currency.fish-=t,this.currency.totalSpent+=t,this.save(),!0)}canAfford(t){return this.currency.fish>=t}reset(){this.currency={fish:0,totalEarned:0,totalSpent:0},this.save()}getStats(){return{currentFish:this.currency.fish,totalEarned:this.currency.totalEarned,totalSpent:this.currency.totalSpent,netWorth:this.currency.totalEarned-this.currency.totalSpent}}}const ae={CLEAR_LINES:"clear_lines",T_SPINS:"t_spins",COMBOS:"combos",SURVIVE_TIME:"survive_time",REACH_LEVEL:"reach_level",SCORE_POINTS:"score_points",PLACE_PIECES:"place_pieces",BACK_TO_BACK:"back_to_back",TETRIS_CLEAR:"tetris_clear"},Ta=[{type:ae.CLEAR_LINES,target:20,reward:100,difficulty:"easy",title:"Limpeza Bsica",description:"Limpe 20 linhas"},{type:ae.PLACE_PIECES,target:30,reward:100,difficulty:"easy",title:"Gato Trabalhador",description:"Coloque 30 peas"},{type:ae.SURVIVE_TIME,target:180,reward:120,difficulty:"easy",title:"Sobrevivente",description:"Sobreviva por 3 minutos"},{type:ae.SCORE_POINTS,target:5e3,reward:150,difficulty:"easy",title:"Fazendo Pontos",description:"Alcance 5.000 pontos"},{type:ae.CLEAR_LINES,target:40,reward:200,difficulty:"medium",title:"Limpeza Profunda",description:"Limpe 40 linhas em uma partida"},{type:ae.T_SPINS,target:3,reward:250,difficulty:"medium",title:"Mestre do T-Spin",description:"Faa 3 T-Spins"},{type:ae.COMBOS,target:7,reward:200,difficulty:"medium",title:"Combo Felino",description:"Alcance um combo de 7x"},{type:ae.REACH_LEVEL,target:8,reward:180,difficulty:"medium",title:"Subindo de Nvel",description:"Alcance o nvel 8"},{type:ae.TETRIS_CLEAR,target:2,reward:220,difficulty:"medium",title:"Tetris Duplo",description:"Faa 2 Tetris (4 linhas)"},{type:ae.T_SPINS,target:5,reward:350,difficulty:"hard",title:"Ninja T-Spin",description:"Faa 5 T-Spins em uma partida"},{type:ae.COMBOS,target:10,reward:300,difficulty:"hard",title:"Combo Insano",description:"Alcance um combo de 10x"},{type:ae.SURVIVE_TIME,target:600,reward:400,difficulty:"hard",title:"Resistncia Felina",description:"Sobreviva por 10 minutos"},{type:ae.REACH_LEVEL,target:12,reward:350,difficulty:"hard",title:"Mestre dos Gatos",description:"Alcance o nvel 12"},{type:ae.SCORE_POINTS,target:5e4,reward:400,difficulty:"hard",title:"Pontuao Lendria",description:"Alcance 50.000 pontos"},{type:ae.BACK_TO_BACK,target:3,reward:380,difficulty:"hard",title:"Back-to-Back Master",description:"Faa 3 back-to-backs"}];class Yb{constructor(t,n){this.gameRepository=t,this.currencyService=n,this.missions=this.loadMissions(),this.checkAndResetDaily()}loadMissions(){return this.gameRepository.load("dailyMissions")||this.generateNewMissions()}save(){this.gameRepository.save("dailyMissions",this.missions)}checkAndResetDaily(){const n=new Date().toDateString();this.missions.lastResetDate!==n&&(this.missions=this.generateNewMissions(),this.save())}generateNewMissions(){const t=Ta.filter(o=>o.difficulty==="easy"),n=Ta.filter(o=>o.difficulty==="medium"),r=Ta.filter(o=>o.difficulty==="hard"),s=[this.selectRandomMission(t),this.selectRandomMission(n),this.selectRandomMission(r)],i=new Date;return{lastResetDate:i.toDateString(),missions:s.map((o,a)=>({id:`mission_${i.getTime()}_${a}`,...o,progress:0,completed:!1,claimed:!1}))}}selectRandomMission(t){return t[Math.floor(Math.random()*t.length)]}getMissions(){return this.checkAndResetDaily(),this.missions.missions}updateProgress(t,n){let r=!1;return this.missions.missions.forEach(s=>{s.type===t&&!s.completed&&(s.progress=Math.max(s.progress,n),s.progress>=s.target&&(s.completed=!0,r=!0))}),r&&this.save(),r}incrementProgress(t,n=1){let r=!1;return this.missions.missions.forEach(s=>{s.type===t&&!s.completed&&(s.progress+=n,s.progress>=s.target&&(s.completed=!0,r=!0))}),r&&this.save(),r}claimReward(t){const n=this.missions.missions.find(r=>r.id===t);return n?n.completed?n.claimed?{success:!1,error:"Already claimed"}:(n.claimed=!0,this.currencyService.addFish(n.reward,`Mission: ${n.title}`),this.save(),{success:!0,reward:n.reward,title:n.title}):{success:!1,error:"Mission not completed"}:{success:!1,error:"Mission not found"}}getStats(){const t=this.missions.missions.length,n=this.missions.missions.filter(o=>o.completed).length,r=this.missions.missions.filter(o=>o.claimed).length,s=this.missions.missions.reduce((o,a)=>o+a.reward,0),i=this.missions.missions.filter(o=>o.claimed).reduce((o,a)=>o+a.reward,0);return{total:t,completed:n,claimed:r,totalRewards:s,claimedRewards:i,allCompleted:n===t,allClaimed:r===t}}reset(){this.missions=this.generateNewMissions(),this.save()}}const Ea=[{id:"first_line",title:" Primeira Linha",description:"Limpe sua primeira linha",requirement:{type:"lines_total",value:1},reward:50,tier:"bronze"},{id:"first_game",title:" Primeira Partida",description:"Complete sua primeira partida",requirement:{type:"games_played",value:1},reward:50,tier:"bronze"},{id:"scorer",title:" Pontuador",description:"Alcance 10.000 pontos em uma partida",requirement:{type:"score_single",value:1e4},reward:100,tier:"bronze"},{id:"combo_starter",title:" Combo Starter",description:"Alcance um combo de 5x",requirement:{type:"max_combo",value:5},reward:150,tier:"silver"},{id:"tspin_novice",title:" Aprendiz T-Spin",description:"Faa seu primeiro T-Spin",requirement:{type:"tspins_total",value:1},reward:150,tier:"silver"},{id:"survivor",title:" Sobrevivente",description:"Sobreviva por 5 minutos",requirement:{type:"survive_time",value:300},reward:150,tier:"silver"},{id:"level_5",title:" Nvel 5",description:"Alcance o nvel 5",requirement:{type:"max_level",value:5},reward:100,tier:"silver"},{id:"line_clearer",title:" Limpador",description:"Limpe 100 linhas no total",requirement:{type:"lines_total",value:100},reward:200,tier:"silver"},{id:"combo_master",title:" Combo Master",description:"Alcance um combo de 10x",requirement:{type:"max_combo",value:10},reward:300,tier:"gold"},{id:"tspin_master",title:" Mestre T-Spin",description:"Faa 50 T-Spins no total",requirement:{type:"tspins_total",value:50},reward:400,tier:"gold"},{id:"speed_demon",title:" Speed Demon",description:"Alcance o nvel 15",requirement:{type:"max_level",value:15},reward:350,tier:"gold"},{id:"high_scorer",title:" Alto Pontuador",description:"Alcance 100.000 pontos em uma partida",requirement:{type:"score_single",value:1e5},reward:400,tier:"gold"},{id:"dedicated",title:" Dedicado",description:"Jogue 50 partidas",requirement:{type:"games_played",value:50},reward:300,tier:"gold"},{id:"marathon",title:" Maratonista",description:"Limpe 500 linhas no total",requirement:{type:"lines_total",value:500},reward:350,tier:"gold"},{id:"cat_king",title:" Rei dos Gatos",description:"Alcance 1.000.000 de pontos em uma partida",requirement:{type:"score_single",value:1e6},reward:1e3,tier:"platinum"},{id:"immortal",title:" Imortal",description:"Alcance o nvel 20",requirement:{type:"max_level",value:20},reward:800,tier:"platinum"},{id:"combo_legend",title:" Lenda do Combo",description:"Alcance um combo de 15x",requirement:{type:"max_combo",value:15},reward:700,tier:"platinum"},{id:"tspin_legend",title:" Lenda T-Spin",description:"Faa 200 T-Spins no total",requirement:{type:"tspins_total",value:200},reward:800,tier:"platinum"},{id:"veteran",title:" Veterano",description:"Jogue 200 partidas",requirement:{type:"games_played",value:200},reward:600,tier:"platinum"},{id:"ultimate_cleaner",title:" Limpador Supremo",description:"Limpe 2.000 linhas no total",requirement:{type:"lines_total",value:2e3},reward:700,tier:"platinum"}];class Jb{constructor(t,n,r){this.gameRepository=t,this.currencyService=n,this.statisticsService=r,this.achievements=this.loadAchievements()}loadAchievements(){const t=this.gameRepository.load("achievements");if(!t)return Ea.map(r=>({...r,unlocked:!1,unlockedAt:null,progress:0}));const n=new Map(t.map(r=>[r.id,r]));return Ea.map(r=>n.get(r.id)||{...r,unlocked:!1,unlockedAt:null,progress:0})}save(){this.gameRepository.save("achievements",this.achievements)}getAchievements(){return[...this.achievements]}getUnlocked(){return this.achievements.filter(t=>t.unlocked)}getLocked(){return this.achievements.filter(t=>!t.unlocked)}getByTier(t){return this.achievements.filter(n=>n.tier===t)}checkAchievements(t){const n=[];return this.achievements.forEach(r=>{if(r.unlocked)return;const{type:s,value:i}=r.requirement;let o=0;switch(s){case"lines_total":o=t.linesCleared||0;break;case"games_played":o=t.gamesPlayed||0;break;case"score_single":o=t.highScore||0;break;case"max_combo":o=t.maxCombo||0;break;case"tspins_total":o=t.tSpins||0;break;case"survive_time":o=t.longestGame||0;break;case"max_level":o=t.maxLevel||0;break}r.progress=Math.min(o,i),o>=i&&(r.unlocked=!0,r.unlockedAt=new Date().toISOString(),this.currencyService.addFish(r.reward,`Achievement: ${r.title}`),n.push(r))}),n.length>0&&this.save(),n}getStats(){const t=this.achievements.length,n=this.achievements.filter(o=>o.unlocked).length,r=this.achievements.reduce((o,a)=>o+a.reward,0),s=this.achievements.filter(o=>o.unlocked).reduce((o,a)=>o+a.reward,0),i={bronze:this.getByTier("bronze").filter(o=>o.unlocked).length,silver:this.getByTier("silver").filter(o=>o.unlocked).length,gold:this.getByTier("gold").filter(o=>o.unlocked).length,platinum:this.getByTier("platinum").filter(o=>o.unlocked).length};return{total:t,unlocked:n,percentage:Math.floor(n/t*100),totalRewards:r,earnedRewards:s,byTier:i}}reset(){this.achievements=Ea.map(t=>({...t,unlocked:!1,unlockedAt:null,progress:0})),this.save()}}class Zb{constructor(t){this.gameRepository=t,this.stats=this.loadStats()}loadStats(){return this.gameRepository.load("playerStats")||{gamesPlayed:0,linesCleared:0,piecesPlaced:0,tSpins:0,backToBack:0,totalPlayTime:0,highScore:0,maxLevel:0,maxCombo:0,longestGame:0,mostLinesInGame:0,lastUpdated:new Date().toISOString(),lastPlayedDate:null,currentStreak:0,longestStreak:0}}save(){this.stats.lastUpdated=new Date().toISOString(),this.gameRepository.save("playerStats",this.stats)}getStats(){return{...this.stats}}updateAfterGame(t){this.stats.gamesPlayed+=1,this.stats.linesCleared+=t.linesCleared||0,this.stats.piecesPlaced+=t.piecesPlaced||0,this.stats.tSpins+=t.tSpins||0,this.stats.backToBack+=t.backToBack||0,this.stats.totalPlayTime+=t.playTime||0,t.score>this.stats.highScore&&(this.stats.highScore=t.score),t.level>this.stats.maxLevel&&(this.stats.maxLevel=t.level),t.maxCombo>this.stats.maxCombo&&(this.stats.maxCombo=t.maxCombo),t.playTime>this.stats.longestGame&&(this.stats.longestGame=t.playTime),t.linesCleared>this.stats.mostLinesInGame&&(this.stats.mostLinesInGame=t.linesCleared),this.updateStreak(),this.save()}updateStreak(){const t=new Date().toDateString(),n=this.stats.lastPlayedDate;if(n!==t){if(!n)this.stats.currentStreak=1,this.stats.longestStreak=1;else{const r=new Date(n),s=new Date(t);Math.floor((s-r)/(1e3*60*60*24))===1?(this.stats.currentStreak+=1,this.stats.currentStreak>this.stats.longestStreak&&(this.stats.longestStreak=this.stats.currentStreak)):this.stats.currentStreak=1}this.stats.lastPlayedDate=t}}incrementStat(t,n=1){this.stats.hasOwnProperty(t)&&(this.stats[t]+=n,this.save())}updateRecord(t,n){return this.stats.hasOwnProperty(t)&&n>this.stats[t]?(this.stats[t]=n,this.save(),!0):!1}reset(){this.stats={gamesPlayed:0,linesCleared:0,piecesPlaced:0,tSpins:0,backToBack:0,totalPlayTime:0,highScore:0,maxLevel:0,maxCombo:0,longestGame:0,mostLinesInGame:0,lastUpdated:new Date().toISOString(),lastPlayedDate:null,currentStreak:0,longestStreak:0},this.save()}}const Kt={classic:{id:"classic",name:" Tetris Clssico",description:"Cores oficiais do Tetris",price:0,default:!0,pieces:{I:{emoji:"",color:"#00F0F0"},O:{emoji:"",color:"#F0F000"},T:{emoji:"",color:"#A000F0"},S:{emoji:"",color:"#00F000"},Z:{emoji:"",color:"#F00000"},J:{emoji:"",color:"#0000F0"},L:{emoji:"",color:"#F0A000"}}},cats:{id:"cats",name:" Gatos Clssicos",description:"Os gatinhos originais do Cat Tetris",price:0,default:!0,pieces:{I:{emoji:"",color:"#00f0f0"},O:{emoji:"",color:"#f0f000"},T:{emoji:"",color:"#a000f0"},S:{emoji:"",color:"#00f000"},Z:{emoji:"",color:"#f00000"},J:{emoji:"",color:"#f0a000"},L:{emoji:"",color:"#ffc0cb"}}},dogs:{id:"dogs",name:" Cachorros Felizes",description:"Amigos caninos adorveis",price:500,pieces:{I:{emoji:"",color:"#8B4513"},O:{emoji:"",color:"#D2691E"},T:{emoji:"",color:"#CD853F"},S:{emoji:"",color:"#DEB887"},Z:{emoji:"",color:"#F4A460"},J:{emoji:"",color:"#FFDEAD"},L:{emoji:"",color:"#FFE4B5"}}},pandas:{id:"pandas",name:" Pandas Fofos",description:"Ursinhos preto e branco",price:600,pieces:{I:{emoji:"",color:"#000000"},O:{emoji:"",color:"#808080"},T:{emoji:"",color:"#A0A0A0"},S:{emoji:"",color:"#FFFFFF"},Z:{emoji:"",color:"#D3D3D3"},J:{emoji:"",color:"#90EE90"},L:{emoji:"",color:"#98FB98"}}},foxes:{id:"foxes",name:" Raposas Astutas",description:"Raposinhas espertas e geis",price:700,pieces:{I:{emoji:"",color:"#FF4500"},O:{emoji:"",color:"#FF6347"},T:{emoji:"",color:"#FF7F50"},S:{emoji:"",color:"#CD5C5C"},Z:{emoji:"",color:"#D2691E"},J:{emoji:"",color:"#8B4513"},L:{emoji:"",color:"#DAA520"}}},unicorns:{id:"unicorns",name:" Unicrnios Mgicos",description:"Criaturas msticas e coloridas",price:900,pieces:{I:{emoji:"",color:"#FF00FF"},O:{emoji:"",color:"#FFD700"},T:{emoji:"",color:"#87CEEB"},S:{emoji:"",color:"#FF69B4"},Z:{emoji:"",color:"#9370DB"},J:{emoji:"",color:"#DA70D6"},L:{emoji:"",color:"#FFC0CB"}}},robots:{id:"robots",name:" Robs Futuristas",description:"Tecnologia do futuro",price:800,pieces:{I:{emoji:"",color:"#708090"},O:{emoji:"",color:"#778899"},T:{emoji:"",color:"#4682B4"},S:{emoji:"",color:"#5F9EA0"},Z:{emoji:"",color:"#00CED1"},J:{emoji:"",color:"#1E90FF"},L:{emoji:"",color:"#4169E1"}}},foods:{id:"foods",name:" Comidas Deliciosas",description:"Para quem joga com fome",price:750,pieces:{I:{emoji:"",color:"#FF6347"},O:{emoji:"",color:"#FFD700"},T:{emoji:"",color:"#FFA500"},S:{emoji:"",color:"#FF4500"},Z:{emoji:"",color:"#FFB6C1"},J:{emoji:"",color:"#DDA0DD"},L:{emoji:"",color:"#D2691E"}}},crystals:{id:"crystals",name:" Cristais Brilhantes",description:"Gemas preciosas reluzentes",price:1e3,premium:!0,pieces:{I:{emoji:"",color:"#00FFFF"},O:{emoji:"",color:"#FFD700"},T:{emoji:"",color:"#9370DB"},S:{emoji:"",color:"#00FF00"},Z:{emoji:"",color:"#FF0000"},J:{emoji:"",color:"#FFA500"},L:{emoji:"",color:"#FF1493"}}},ocean:{id:"ocean",name:" Mundo Marinho",description:"Criaturas do oceano",price:850,pieces:{I:{emoji:"",color:"#1E90FF"},O:{emoji:"",color:"#00CED1"},T:{emoji:"",color:"#4682B4"},S:{emoji:"",color:"#87CEEB"},Z:{emoji:"",color:"#5F9EA0"},J:{emoji:"",color:"#6495ED"},L:{emoji:"",color:"#FF6347"}}},space:{id:"space",name:" Espao Sideral",description:"Explorao espacial",price:950,pieces:{I:{emoji:"",color:"#4169E1"},O:{emoji:"",color:"#00FFFF"},T:{emoji:"",color:"#32CD32"},S:{emoji:"",color:"#FFD700"},Z:{emoji:"",color:"#FFFF00"},J:{emoji:"",color:"#FF8C00"},L:{emoji:"",color:"#FF4500"}}}};class l0{constructor(t,n){this.gameRepository=t,this.currencyService=n,this.inventory=this.loadInventory()}loadInventory(){const t=this.gameRepository.load("shopInventory");if(t){const n=Object.values(Kt).filter(s=>s.price===0).map(s=>s.id);let r=!1;for(const s of n)t.ownedThemes.includes(s)||(t.ownedThemes.push(s),r=!0);return r&&this.gameRepository.save("shopInventory",t),t}return{ownedThemes:["cats","classic"],equippedTheme:"cats",purchaseHistory:[]}}save(){this.gameRepository.save("shopInventory",this.inventory)}getAllThemes(){return Object.values(Kt).map(t=>({...t,owned:this.inventory.ownedThemes.includes(t.id),equipped:this.inventory.equippedTheme===t.id}))}getOwnedThemes(){return this.inventory.ownedThemes.map(t=>Kt[t])}getEquippedTheme(){return Kt[this.inventory.equippedTheme]}ownsTheme(t){return this.inventory.ownedThemes.includes(t)}purchaseTheme(t){const n=Kt[t];return n?this.ownsTheme(t)?{success:!1,error:"Already owned"}:this.currencyService.canAfford(n.price)?this.currencyService.spendFish(n.price,`Theme: ${n.name}`)?(this.inventory.ownedThemes.push(t),this.inventory.purchaseHistory.push({themeId:t,purchasedAt:new Date().toISOString(),price:n.price}),this.save(),{success:!0,theme:n}):{success:!1,error:"Purchase failed"}:{success:!1,error:"Insufficient funds"}:{success:!1,error:"Theme not found"}}equipTheme(t){if(!this.ownsTheme(t))return{success:!1,error:"Theme not owned"};this.inventory.equippedTheme=t,this.save();const n=Kt[t];return window.dispatchEvent(new CustomEvent("themeEquipped",{detail:{themeId:t,theme:n}})),{success:!0,theme:n}}getStats(){return{totalThemes:Object.keys(Kt).length,ownedThemes:this.inventory.ownedThemes.length,totalSpent:this.inventory.purchaseHistory.reduce((t,n)=>t+n.price,0),equippedTheme:this.inventory.equippedTheme}}reset(){this.inventory={ownedThemes:["cats"],equippedTheme:"cats",purchaseHistory:[]},this.save()}}const eS=Object.freeze(Object.defineProperty({__proto__:null,PIECE_THEMES:Kt,ShopService:l0},Symbol.toStringTag,{value:"Module"})),ht={CLASSIC:{id:"classic",name:" Clssico",description:"O Tetris tradicional",icon:"",rules:{gameOver:!0,timeLimit:!1,lineGoal:!1,speedIncrease:!0}},SPRINT:{id:"sprint",name:" Sprint 40",description:"Limpe 40 linhas o mais rpido possvel",icon:"",rules:{gameOver:!1,timeLimit:!1,lineGoal:40,speedIncrease:!1,fixedLevel:1}},ULTRA:{id:"ultra",name:" Ultra 3min",description:"Mximo de pontos em 3 minutos",icon:"",rules:{gameOver:!1,timeLimit:180,lineGoal:!1,speedIncrease:!0}},ZEN:{id:"zen",name:" Zen",description:"Jogue sem presso, sem game over",icon:"",rules:{gameOver:!1,timeLimit:!1,lineGoal:!1,speedIncrease:!1,fixedLevel:1,relaxed:!0}},SURVIVAL:{id:"survival",name:" Sobrevivncia",description:"Comece no nvel 10, quanto tempo aguenta?",icon:"",rules:{gameOver:!0,timeLimit:!1,lineGoal:!1,speedIncrease:!0,startLevel:10}}};class tS{constructor(t){this.gameRepository=t,this.currentMode=ht.CLASSIC,this.modeStats=this.loadModeStats()}loadModeStats(){return this.gameRepository.load("gameModesStats")||this.initializeStats()}initializeStats(){const t={};return Object.keys(ht).forEach(n=>{const r=ht[n];t[r.id]={gamesPlayed:0,bestScore:0,bestTime:r.rules.timeLimit?r.rules.timeLimit:0,bestLines:0,totalGames:0}}),t}save(){this.gameRepository.save("gameModesStats",this.modeStats)}getAllModes(){return Object.values(ht)}getCurrentMode(){return this.currentMode}setMode(t){const n=Object.values(ht).find(r=>r.id===t);return n?(this.currentMode=n,!0):!1}getModeStats(t){return this.modeStats[t]||null}getAllStats(){return{...this.modeStats}}updateStats(t,n){if(!this.modeStats[t])return;const r=this.modeStats[t];r.gamesPlayed+=1,r.totalGames+=1,n.score>r.bestScore&&(r.bestScore=n.score),n.time&&(r.bestTime===0||n.time<r.bestTime)&&(r.bestTime=n.time),n.lines>r.bestLines&&(r.bestLines=n.lines),this.save()}checkGoal(t,n){return t.rules?t.rules.lineGoal?n.score.lines>=t.rules.lineGoal:(t.rules.timeLimit,!1):!1}getRecommendedOrder(){return[ht.CLASSIC,ht.ZEN,ht.SPRINT,ht.ULTRA,ht.SURVIVAL]}reset(){this.modeStats=this.initializeStats(),this.currentMode=ht.CLASSIC,this.save()}}const yh=[{id:"bot1",name:"MeowMaster",score:25e4,level:18,lines:120,country:"BR"},{id:"bot2",name:"NyanCat",score:18e4,level:15,lines:95,country:"US"},{id:"bot3",name:"FelixPro",score:15e4,level:14,lines:85,country:"JP"},{id:"bot4",name:"WhiskerKing",score:12e4,level:12,lines:75,country:"KR"},{id:"bot5",name:"PawsGaming",score:1e5,level:11,lines:68,country:"FR"},{id:"bot6",name:"CatNinja",score:85e3,level:10,lines:60,country:"DE"},{id:"bot7",name:"TigerClaw",score:7e4,level:9,lines:55,country:"BR"},{id:"bot8",name:"LionHeart",score:65e3,level:8,lines:50,country:"UK"},{id:"bot9",name:"CheetahSpeed",score:55e3,level:8,lines:45,country:"ES"},{id:"bot10",name:"PantherShadow",score:5e4,level:7,lines:42,country:"IT"},{id:"bot11",name:"JaguarForce",score:45e3,level:7,lines:40,country:"MX"},{id:"bot12",name:"LynxSwift",score:4e4,level:6,lines:38,country:"CA"},{id:"bot13",name:"OcelotPro",score:35e3,level:6,lines:35,country:"AR"},{id:"bot14",name:"BobcatGamer",score:3e4,level:5,lines:32,country:"AU"},{id:"bot15",name:"CougarRush",score:28e3,level:5,lines:30,country:"NZ"}];class nS{constructor(t,n){this.gameRepository=t,this.playerStatsService=n,this.playerName=this.loadPlayerName(),this.playerId=this.loadPlayerId()}loadPlayerName(){const t=this.gameRepository.load("playerProfile");return(t==null?void 0:t.name)||"Jogador"}loadPlayerId(){let t=this.gameRepository.load("playerProfile");return(!t||!t.id)&&(t={...t,id:`player_${Date.now()}_${Math.random().toString(36).substr(2,9)}`},this.gameRepository.save("playerProfile",t)),t.id}setPlayerName(t){const n=this.gameRepository.load("playerProfile")||{};n.name=t,n.id=this.playerId,this.gameRepository.save("playerProfile",n),this.playerName=t}getPlayerName(){return this.playerName}getGlobalLeaderboard(t=100){const n=this.playerStatsService.getStats(),r={id:this.playerId,name:this.playerName,score:n.highScore,level:n.maxLevel,lines:n.linesCleared,country:"BR",isPlayer:!0},s=[...yh,r];return s.sort((i,o)=>o.score-i.score),s.slice(0,t)}getWeeklyLeaderboard(t=50){return this.getGlobalLeaderboard(t)}getCountryLeaderboard(t="BR",n=50){return this.getGlobalLeaderboard(200).filter(s=>s.country===t).slice(0,n)}getPlayerRank(){const t=this.getGlobalLeaderboard(1e3),n=t.findIndex(r=>r.id===this.playerId);return n===-1?{rank:t.length+1,total:t.length,percentile:0}:{rank:n+1,total:t.length,percentile:Math.floor((t.length-n)/t.length*100)}}getAroundPlayer(t=5){const n=this.getGlobalLeaderboard(1e3),r=n.findIndex(o=>o.id===this.playerId);if(r===-1)return[];const s=Math.max(0,r-t),i=Math.min(n.length,r+t+1);return n.slice(s,i)}submitScore(t){return Promise.resolve({success:!0})}getModeLeaderboard(t,n=50){return this.getGlobalLeaderboard(n)}getFriendsLeaderboard(){return yh.slice(0,5)}getLeaderboardStats(){const t=this.getPlayerRank(),n=this.playerStatsService.getStats();return{playerName:this.playerName,rank:t.rank,total:t.total,percentile:t.percentile,score:n.highScore,level:n.maxLevel,lines:n.linesCleared}}}class rS{constructor(t){this.playerStatsService=t}generateShareText(t){const{score:n,level:r,lines:s,mode:i}=t;return` Cat Tetris${i?` no modo ${i}`:""}!
 Pontuao: ${n.toLocaleString()}
 Nvel: ${r}
 Linhas: ${s}

Consegue me superar? `}generateShareURL(t){const n=window.location.origin+window.location.pathname,r=new URLSearchParams({score:t.score,level:t.level,lines:t.lines});return`${n}?${r.toString()}`}async copyToClipboard(t){try{return await navigator.clipboard.writeText(t),{success:!0}}catch(n){return{success:!1,error:n.message}}}async shareNative(t){if(!navigator.share)return{success:!1,error:"Web Share API not supported"};try{const n=this.generateShareText(t),r=this.generateShareURL(t);return await navigator.share({title:"Minha pontuao no Cat Tetris",text:n,url:r}),{success:!0}}catch(n){return n.name==="AbortError"?{success:!1,error:"Share cancelled"}:{success:!1,error:n.message}}}shareToTwitter(t){const n=this.generateShareText(t),r=this.generateShareURL(t),s=`https://twitter.com/intent/tweet?text=${encodeURIComponent(n)}&url=${encodeURIComponent(r)}`;return window.open(s,"_blank","width=600,height=400"),{success:!0}}shareToFacebook(t){const n=this.generateShareURL(t),r=`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(n)}`;return window.open(r,"_blank","width=600,height=400"),{success:!0}}shareToWhatsApp(t){const n=this.generateShareText(t),r=this.generateShareURL(t),s=`${n}

${r}`,i=`https://wa.me/?text=${encodeURIComponent(s)}`;return window.open(i,"_blank"),{success:!0}}async takeScreenshot(t){return{success:!1,error:"Not implemented"}}getAvailableMethods(){return{native:!!navigator.share,clipboard:!!navigator.clipboard,twitter:!0,facebook:!0,whatsapp:!0}}}class ms{constructor(){this.difficulty="medium",this.thinkingTime=100,this.lastDecision=Date.now(),this._actionQueue=[],this._isExpert=!1,this._visualMode=!1,this._visualActionDelay=40}setDifficulty(t){switch(this.difficulty=t,this._isExpert=t.startsWith("expert"),t){case"easy":this.thinkingTime=250;break;case"medium":this.thinkingTime=120;break;case"hard":this.thinkingTime=60;break;case"expert":this.thinkingTime=40;break;default:this.thinkingTime=120}}setVisualMode(t){this._visualMode=t}decideNextMove(t){const n=Date.now(),r=this._visualMode?this._visualActionDelay:this.thinkingTime;if(this._actionQueue.length>0)return n-this.lastDecision<r?null:(this.lastDecision=n,this._actionQueue.shift());if(!this._isExpert&&n-this.lastDecision<r||this._visualMode&&n-this.lastDecision<r)return null;this.lastDecision=n;const{currentPiece:s,board:i,heldPiece:o,canHold:a,nextPieces:c}=t;if(!s)return null;try{const u=(c==null?void 0:c[0])||null;let h=this._findBestMoveWithLookahead(s,i,u),d=!1;if(a){const f=o||u;if(f&&f.type!==s.type){const y=o?u:(c==null?void 0:c[1])||null,x=this._findBestMoveWithLookahead(f,i,y);x&&(!h||x.score>h.score)&&(h=x,d=!0)}}if(!h)this._actionQueue=[{action:"drop"}];else{const f=[];d&&f.push({action:"hold"});const y=d?o||(c==null?void 0:c[0]):s;f.push(...this._buildActionSequence(y,h.rotations,h.targetX,d)),this._actionQueue=f}}catch{this._actionQueue=[{action:"drop"}]}return this._actionQueue.length>0?this._actionQueue.shift():{action:"down"}}_findBestMoveWithLookahead(t,n,r){var u;let s=-1/0,i=null;const o=n.length,a=((u=n[0])==null?void 0:u.length)||10,c=this._isExpert&&r;for(let h=0;h<4;h++){const d=this._rotateShape(t.shape,h),f=d[0].length;for(let y=-2;y<=a-f+2;y++){const x=this._findLandingRow(d,n,y,o,a);if(x===null||x<0)continue;const b=this._placeOnBoard(d,n,y,x);if(!b)continue;const{board:S}=this._simulateClear(b);let p=this._evaluate(b,t);if(c){let m=-1/0;for(let g=0;g<4;g++){const w=this._rotateShape(r.shape,g),k=w[0].length;for(let j=-2;j<=a-k+2;j++){const C=this._findLandingRow(w,S,j,o,a);if(C===null||C<0)continue;const P=this._placeOnBoard(w,S,j,C);if(!P)continue;const E=this._evaluate(P,r);E>m&&(m=E)}}m>-1/0&&(p=p*(1-.45)+m*.45)}this.difficulty==="easy"?p+=(Math.random()-.5)*1200:this.difficulty==="medium"&&Math.random()<.2&&(p+=(Math.random()-.5)*500),p>s&&(s=p,i={rotations:h,targetX:y,score:s})}}return i}_evaluate(t,n){switch(this.difficulty){case"expert":return this._evalSurvival(t,n);default:return this._evalDefault(t,n)}}_simulateClear(t){const n=t[0].length,r=[];let s=0;for(const i of t)i.every(o=>o!=null)?s++:r.push([...i]);for(;r.length<t.length;)r.unshift(new Array(n).fill(null));return{board:r,cleared:s}}_evalDefault(t,n){const{board:r,cleared:s}=this._simulateClear(t);let i=0;return i+=s*800,i-=this._getHeight(r)*45,i-=this._countHoles(r)*400,i-=this._getBumpiness(r)*35,i-=this._getRowTransitions(r)*15,i-=this._getColTransitions(r)*10,this.difficulty==="hard"&&(i+=s>=2?s*400:0,i-=this._countHoles(r)*200,i-=this._getCoveredHoles(r)*100,i-=this._getHeight(r)*30,this._countHoles(r)===0&&(i+=300),this._getHeight(r)<=6&&(i+=200)),i}_evalSurvival(t){const{board:n,cleared:r}=this._simulateClear(t),s=this._getHeight(n),i=this._countHoles(n),o=this._getBumpiness(n),a=this._getCoveredHoles(n),c=this._getColumnHeights(n),u=Math.max(...c),h=Math.min(...c),d=this._getRowTransitions(n),f=this._getColTransitions(n),y=this._getWellDepths(n);let x=0;x+=r*5e3,r>=2&&(x+=r*r*1500),r===3&&(x+=8e3),r===4&&(x+=25e3),s>10&&(x+=r*8e3,r>=2&&(x+=r*5e3)),s>14&&(x+=r*2e4),x-=s*s*25,x-=s*300,x-=u*u*15,x-=i*4e3,x-=i*i*500,x-=a*1200,x-=o*250;const b=c.reduce((g,w)=>g+w,0)/c.length,S=c.reduce((g,w)=>g+(w-b)**2,0)/c.length;x-=S*80;const p=u-h;p>4&&(x-=(p-4)*800),p>6&&(x-=(p-6)*1500),x-=d*60,x-=f*50,x-=y*200,s===0?x+=15e3:s<=2?x+=6e3:s<=4?x+=3e3:s<=6&&(x+=1500),i===0&&(x+=5e3),i===0&&s<=4&&(x+=3e3),o<=1?x+=2e3:o<=3&&(x+=800),s>10&&(x-=(s-10)*2e3),s>12&&(x-=(s-12)*(s-12)*800),s>14&&(x-=(s-14)*(s-14)*1500),s>16&&(x-=6e4),s>18&&(x-=2e5);const m=this._countNearCompleteLines(n);return s>8&&(x+=m*1500),x}_evalCombo(t,n){const{board:r,cleared:s}=this._simulateClear(t),i=r[0].length,o=this._getHeight(r),a=this._countHoles(r),c=this._getBumpiness(r),u=this._getCoveredHoles(r);let h=0;s===1?h+=6e3:s===2?h+=3500:s===3?h+=2500:s===4&&(h+=2e3);let d=0,f=0,y=0;const x={};for(let S=r.length-1;S>=0;S--){let p=0,m=-1;for(let g=0;g<i;g++)r[S][g]!=null?p++:m=g;p===i-1?(d++,f++,y=Math.max(y,f),m>=0&&(x[m]=(x[m]||0)+1)):p>=i-2?(d+=.5,f++,y=Math.max(y,f)):f=0}h+=d*2500,h+=y*y*600;let b=0;for(const S in x)x[S]>b&&(b=x[S]);return b>=2&&(h+=b*b*500),h-=a*2500,h-=u*700,h-=o*100,h-=c*120,h-=this._getRowTransitions(r)*35,h-=this._getColTransitions(r)*25,a===0&&(h+=1500),o<=6&&(h+=600),o>12&&(h-=(o-12)*800),o>15&&(h-=(o-15)*2e3),o>18&&(h-=25e3),h}_evalTetris(t,n){const{board:r,cleared:s}=this._simulateClear(t),i=r[0].length,o=r.length,a=this._getColumnHeights(r);this._getHeight(r);const c=this._countHoles(r),u=this._getCoveredHoles(r);let h=0;const d=i-1;s===4?h+=2e5:s>0&&(h-=s*15e3);let f=0;for(let w=0;w<o;w++)r[w][d]!=null&&f++;h-=f*6e3;const y=[];for(let w=0;w<i;w++)w!==d&&y.push(a[w]);const x=y.reduce((w,k)=>w+k,0)/y.length,b=x-a[d];h+=Math.max(0,b)*600,b>=4?h+=25e3:b>=3?h+=12e3:b>=2?h+=5e3:b>=1&&(h+=1e3);let S=0;for(let w=0;w<y.length-1;w++)S+=Math.abs(y[w]-y[w+1]);h-=S*500;const p=y.reduce((w,k)=>w+(k-x)**2,0)/y.length;h-=p*150,S===0?h+=6e3:S<=1?h+=2500:S<=2&&(h+=800);const m=this._countNearFullLinesExcluding(r,d);h+=m*5e3,m>=4?h+=2e4:m>=3?h+=8e3:m>=2&&(h+=3e3);for(let w=0;w<i;w++){if(w===d)continue;const k=a[w],j=w>0?a[w-1]:o,C=w<i-1?a[w+1]:o,P=Math.min(j,C)-k;P>1&&(h-=P*2e3)}n.type==="I"&&(s===4?h+=5e4:b<4&&(h-=2e4)),h-=c*5e3,h-=u*2e3,h-=this._getRowTransitions(r)*40,h-=this._getColTransitions(r)*30;const g=Math.max(...y);return g>14&&(h-=(g-14)*3e3),g>16&&(h-=(g-16)*6e3),g>18&&(h-=4e4),c===0&&(h+=4e3),x<=6&&(h+=1500),h}_countLines(t){let n=0;for(const r of t)r.every(s=>s!=null)&&n++;return n}_getHeight(t){for(let n=0;n<t.length;n++)if(t[n].some(r=>r!=null))return t.length-n;return 0}_countHoles(t){let n=0;const r=t[0].length;for(let s=0;s<r;s++){let i=!1;for(let o=0;o<t.length;o++)t[o][s]!=null?i=!0:i&&n++}return n}_getBumpiness(t){const n=this._getColumnHeights(t);let r=0;for(let s=0;s<n.length-1;s++)r+=Math.abs(n[s]-n[s+1]);return r}_getBumpinessExcluding(t,n){const r=this._getColumnHeights(t);let s=0;for(let i=0;i<r.length-1;i++)i===n||i+1===n||(s+=Math.abs(r[i]-r[i+1]));return s}_getColumnHeights(t){const n=t[0].length,r=[];for(let s=0;s<n;s++){let i=!1;for(let o=0;o<t.length;o++)if(t[o][s]!=null){r.push(t.length-o),i=!0;break}i||r.push(0)}return r}_getFlatness(t){const n=this._getColumnHeights(t),r=n.reduce((i,o)=>i+o,0)/n.length,s=n.reduce((i,o)=>i+(o-r)**2,0)/n.length;return Math.max(0,100-s)}_getWellDepths(t){const n=this._getColumnHeights(t);let r=0;for(let s=0;s<n.length;s++){const i=s>0?n[s-1]:20,o=s<n.length-1?n[s+1]:20,a=Math.min(i,o)-n[s];a>0&&(r+=a)}return r}_getRowTransitions(t){let n=0;const r=t[0].length;for(let s=0;s<t.length;s++){for(let i=0;i<r-1;i++){const o=t[s][i]!=null,a=t[s][i+1]!=null;o!==a&&n++}t[s][0]==null&&n++,t[s][r-1]==null&&n++}return n}_getColTransitions(t){let n=0;const r=t[0].length;for(let s=0;s<r;s++){for(let i=0;i<t.length-1;i++){const o=t[i][s]!=null,a=t[i+1][s]!=null;o!==a&&n++}t[t.length-1][s]==null&&n++}return n}_getCoveredHoles(t){let n=0;const r=t[0].length;for(let s=0;s<r;s++){let i=0;for(let o=0;o<t.length;o++)t[o][s]!=null?i++:i>0&&(n+=i)}return n}_countNearCompleteLines(t){let n=0;for(const r of t){const s=r.filter(i=>i!=null).length;s>=r.length-1&&s<r.length&&n++}return n}_countNearFullLinesExcluding(t,n){let r=0;for(const s of t){let i=0,o=-1;for(let a=0;a<s.length;a++)s[a]==null&&(i++,o=a);i===1&&o===n&&r++}return r}_buildActionSequence(t,n,r,s){var h;const i=[],o=n%4;for(let d=0;d<o;d++)i.push({action:"rotate"});const a=s?3:((h=t.position)==null?void 0:h.x)??3,c=r-a,u=c>0?"right":"left";for(let d=0;d<Math.abs(c);d++)i.push({action:u});return i.push({action:"drop"}),i}_rotateShape(t,n){let r=t;for(let s=0;s<n%4;s++)r=r[0].map((i,o)=>r.map(a=>a[o]).reverse());return r}_findLandingRow(t,n,r,s,i){for(let o=-t.length;o<s;o++)if(this._collides(t,n,r,o+1,s,i))return o;return s-t.length}_collides(t,n,r,s,i,o){for(let a=0;a<t.length;a++)for(let c=0;c<t[0].length;c++){if(!t[a][c])continue;const u=r+c,h=s+a;if(u<0||u>=o||h>=i||h>=0&&n[h][u]!=null)return!0}return!1}_placeOnBoard(t,n,r,s){const i=n.length,o=n[0].length,a=n.map(c=>[...c]);for(let c=0;c<t.length;c++)for(let u=0;u<t[0].length;u++){if(!t[c][u])continue;const h=r+u,d=s+c;if(h<0||h>=o||d<0||d>=i||a[d][h]!=null)return null;a[d][h]=1}return a}getDifficulties(){return[{id:"easy",name:"Fcil",emoji:"",description:"IA iniciante"},{id:"medium",name:"Mdio",emoji:"",description:"IA intermediria"},{id:"hard",name:"Difcil",emoji:"",description:"IA avanada"},{id:"expert",name:"Expert",emoji:"",description:"Mantm o board o mais baixo possvel"}]}}class sS{constructor(t){this.gameRepository=t,this.currentMode=null,this.players=[],this.matchState=null}startLocalMatch(t="Jogador 1",n="Jogador 2"){return this.currentMode="1v1-local",this.players=[{id:"p1",name:t,score:0,level:1,lines:0,gameState:null,alive:!0},{id:"p2",name:n,score:0,level:1,lines:0,gameState:null,alive:!0}],this.matchState={startTime:Date.now(),status:"playing",winner:null},{mode:this.currentMode,players:this.players,matchId:`local_${Date.now()}`}}startAIMatch(t="Jogador",n="medium"){return this.currentMode="vs-ai",this.players=[{id:"p1",name:t,score:0,level:1,lines:0,gameState:null,alive:!0,isHuman:!0},{id:"ai",name:this.getAIName(n),score:0,level:1,lines:0,gameState:null,alive:!0,isAI:!0,difficulty:n}],this.matchState={startTime:Date.now(),status:"playing",winner:null,aiDifficulty:n},{mode:"vsAI",aiDifficulty:n,players:this.players,matchId:`ai_${Date.now()}`}}updatePlayerState(t,n){var s,i;const r=this.players.find(o=>o.id===t);r&&(r.gameState=n,r.score=((s=n.score)==null?void 0:s.points)||0,r.level=((i=n.score)==null?void 0:i.level)||1,r.lines=n.linesCleared||0,r.alive=!n.gameOver,this.checkWinCondition())}checkWinCondition(){const t=this.players.filter(n=>n.alive);return t.length===1?(this.matchState.status="finished",this.matchState.winner=t[0],this.matchState.endTime=Date.now(),this.matchState.duration=this.matchState.endTime-this.matchState.startTime,this.saveMatchResult(),{hasWinner:!0,winner:this.matchState.winner}):{hasWinner:!1}}saveMatchResult(){const t=this.gameRepository.load("multiplayerStats")||{localMatches:0,aiMatches:0,wins:0,losses:0,draws:0,totalTime:0};this.currentMode==="1v1-local"?t.localMatches++:this.currentMode==="vs-ai"&&(t.aiMatches++,this.matchState.winner.isHuman?t.wins++:this.matchState.winner.isAI&&t.losses++),t.totalTime+=this.matchState.duration,this.gameRepository.save("multiplayerStats",t)}getStats(){const t=this.gameRepository.load("multiplayerStats")||{localMatches:0,aiMatches:0,wins:0,losses:0,draws:0,totalTime:0};return{...t,winRate:t.aiMatches>0?(t.wins/t.aiMatches*100).toFixed(1):0,avgMatchTime:t.localMatches+t.aiMatches>0?Math.floor(t.totalTime/(t.localMatches+t.aiMatches)/1e3):0}}getMatchState(){return{...this.matchState,players:this.players,mode:this.currentMode}}endMatch(){const t={mode:this.currentMode,players:this.players,winner:this.matchState.winner,duration:Date.now()-this.matchState.startTime};return this.currentMode=null,this.players=[],this.matchState=null,t}startAIvsAIMatch(t="expert",n="expert"){return this.currentMode="ai-vs-ai",this.players=[{id:"ai1",name:this.getAIName(t),score:0,level:1,lines:0,gameState:null,alive:!0,isAI:!0,difficulty:t},{id:"ai2",name:this.getAIName(n),score:0,level:1,lines:0,gameState:null,alive:!0,isAI:!0,difficulty:n}],this.matchState={startTime:Date.now(),status:"playing",winner:null,ai1Difficulty:t,ai2Difficulty:n},{mode:"aiVsAI",ai1Difficulty:t,ai2Difficulty:n,players:this.players,matchId:`aivai_${Date.now()}`}}getAIName(t){return{easy:" MeowBot Iniciante",medium:" CatAI Intermedirio",hard:" FelineBot Avanado",expert:" NyanMaster Survival"}[t]||"IA"}getAvailableModes(){return[{id:"vs-ai",name:"vs IA",emoji:"",description:"Enfrente o bot",players:1,type:"ai",difficulties:["easy","medium","hard","expert"]},{id:"ai-vs-ai",name:"IA vs IA",emoji:"",description:"Assista duas IAs se enfrentando (debug)",players:0,type:"debug"}]}}const wt={FUNDAMENTALS:"fundamentals",INTERMEDIATE:"intermediate",ADVANCED:"advanced",PRO:"pro"};class iS{constructor(t){this.gameRepository=t,this.lessons=this._buildLessons(),this.progress=this._loadProgress()}_buildLessons(){return[{id:1,module:wt.FUNDAMENTALS,title:"Movimentao",description:"Mover, rotacionar e dropar peas",difficulty:"beginner",estimatedTime:"2 min",intro:["   Setas movem a pea para os lados","  Seta para cima rotaciona a pea","  Seta para baixo = soft drop (desce rpido)","  Espao = hard drop (cai instantaneamente)","A sombra mostra onde a pea vai pousar"],practice:{objective:"Limpe 3 linhas usando os controles",validate:t=>{const n=t.linesCleared||0;return{complete:n>=3,progress:Math.min(1,n/3),feedback:n>=3?" timo! Voc dominou os controles!":`${n}/3 linhas`}}},rewards:{fishCoins:100,xp:50,badge:"first_move",unlocks:[2]}},{id:2,module:wt.FUNDAMENTALS,title:"Hold Piece",description:"Segure uma pea para usar depois",difficulty:"beginner",estimatedTime:"2 min",intro:["Aperte C ou Shift para guardar a pea atual","A pea guardada aparece no canto esquerdo","Voc pode trocar 1 vez por turno","Dica: guarde peas valiosas como I e T","Isso ajuda quando a pea atual no encaixa bem"],practice:{objective:"Use o hold e limpe 3 linhas",validate:t=>{const n=t.hasUsedHold,r=t.linesCleared||0;return n?{complete:r>=3,progress:Math.min(1,r/3),feedback:r>=3?" Hold dominado!":` Hold usado! ${r}/3 linhas`}:{complete:!1,progress:0,feedback:"Aperte C para segurar a pea!"}}},rewards:{fishCoins:100,xp:50,badge:"hold_learner",unlocks:[3]}},{id:3,module:wt.FUNDAMENTALS,title:"Planejamento",description:"Use o painel Next para planejar jogadas",difficulty:"beginner",estimatedTime:"3 min",intro:["O painel NEXT mostra as prximas peas","Olhe as prximas 2-3 peas antes de agir","Se vem uma pea I, deixe espao vertical","Pensar  frente = menos buracos = mais linhas","Tente limpar muitas linhas sem criar buracos!"],practice:{objective:"Limpe 8 linhas (planeje bem!)",validate:t=>{const n=t.linesCleared||0;return{complete:n>=8,progress:Math.min(1,n/8),feedback:n>=8?" Excelente planejamento!":`${n}/8 linhas`}}},rewards:{fishCoins:150,xp:75,badge:"planner",unlocks:[4]}},{id:4,module:wt.INTERMEDIATE,title:"Combos",description:"Limpe linhas consecutivas para bnus",difficulty:"intermediate",estimatedTime:"4 min",intro:["Combo = limpar linhas em peas consecutivas","Cada combo seguido d +50 pontos de bnus","Combo 5x = +250 pontos extras!","Dica: empilhe baixo e limpe 1 linha por vez","Foque em manter o ritmo, sem pausas"],practice:{objective:"Consiga um combo de 3 ou mais",validate:t=>{const n=t.currentCombo||0,r=t.maxCombo||n,s=Math.max(n,r);return{complete:s>=3,progress:Math.min(1,s/3),feedback:s>=3?" Combo master!":`Melhor combo: ${s}x (precisa 3)`}}},rewards:{fishCoins:200,xp:100,badge:"combo_starter",unlocks:[5]}},{id:5,module:wt.INTERMEDIATE,title:"Tetris (4 linhas)",description:"Limpe 4 linhas de uma vez para 800pts",difficulty:"intermediate",estimatedTime:"5 min",intro:["Tetris = limpar 4 linhas ao mesmo tempo","Vale 800 pontos  o clear mais valioso!","Deixe uma coluna vazia (geralmente a da direita)","Preencha as outras 9 colunas em 4 linhas","Use a pea I (barra) para completar o Tetris"],practice:{objective:"Alcance 2.000 pontos",validate:t=>{const n=t.score||0;return{complete:n>=2e3,progress:Math.min(1,n/2e3),feedback:n>=2e3?" Pontuao alta!":`${n.toLocaleString()}/2.000 pts`}}},rewards:{fishCoins:250,xp:125,badge:"tetris_scorer",unlocks:[6]}},{id:6,module:wt.ADVANCED,title:"T-Spin",description:"Rotacione o T no ltimo momento para bnus",difficulty:"advanced",estimatedTime:"6 min",intro:["T-Spin = rotacionar a pea T em espao apertado","Vale pontos extras e ativa back-to-back!",'Crie um buraco em forma de "T" na pilha',"Deslize a pea T para dentro e rotacione"," difcil, mas d muitos pontos!"],practice:{objective:"Faa pelo menos 1 T-Spin e 4.000 pontos",validate:t=>{const n=t.tSpins||0,r=t.score||0;return n===0?{complete:!1,progress:Math.min(.5,r/8e3),feedback:"Tente rotacionar o T em espao apertado!"}:{complete:r>=4e3,progress:Math.min(1,r/4e3),feedback:r>=4e3?` T-Spin pro! (${n} T-Spins)`:` T-Spin! ${r.toLocaleString()}/4.000 pts`}}},rewards:{fishCoins:400,xp:250,badge:"tspin_learner",unlocks:[7]}},{id:7,module:wt.ADVANCED,title:"Back-to-Back",description:"Tetris ou T-Spin seguidos do 50% bnus",difficulty:"advanced",estimatedTime:"6 min",intro:["Back-to-Back = dois clears difceis seguidos","Conta como: Tetris (4 linhas) ou T-Spin","Cada B2B seguido d +50% de pontos!","Limpar 1-3 linhas normais quebra a cadeia","Combine T-Spins e Tetris para pontuao mxima"],practice:{objective:"Alcance 6.000 pontos com back-to-back",validate:t=>{const n=t.score||0,r=t.backToBackActive;return{complete:n>=6e3,progress:Math.min(1,n/6e3),feedback:n>=6e3?" Back-to-back dominado!":r?` B2B ativo! ${n.toLocaleString()}/6.000 pts`:`${n.toLocaleString()}/6.000 pts`}}},rewards:{fishCoins:500,xp:300,badge:"b2b_learner",unlocks:[8]}},{id:8,module:wt.PRO,title:"Desafio Final",description:"Prove que domina o Tetris!",difficulty:"pro",estimatedTime:"10 min",intro:["Use TUDO que aprendeu at aqui","Movimentao, hold, combos, T-Spins, B2B...","O objetivo  alcanar uma pontuao alta","No tenha pressa  planeje cada jogada","Boa sorte, mestre! "],practice:{objective:"Alcance 15.000 pontos",validate:t=>{const n=t.score||0;return{complete:n>=15e3,progress:Math.min(1,n/15e3),feedback:n>=15e3?" MESTRE DO TETRIS!":`${n.toLocaleString()}/15.000 pts`}}},rewards:{fishCoins:1e3,xp:500,badge:"tetris_master",unlocks:[]}}]}_loadProgress(){var n,r;return((r=(n=this.gameRepository)==null?void 0:n.load)==null?void 0:r.call(n,"tutorialProgress"))||{completedLessons:[],unlockedLessons:[1],badges:[],totalXP:0,currentModule:wt.FUNDAMENTALS}}_saveProgress(){var t,n;(n=(t=this.gameRepository)==null?void 0:t.save)==null||n.call(t,"tutorialProgress",this.progress)}getProgress(){return this.progress}getLessonById(t){return this.lessons.find(n=>n.id===t)}getAvailableLessons(){return this.lessons.filter(t=>this.progress.unlockedLessons.includes(t.id))}completeLesson(t,n){var s;const r=this.getLessonById(t);return r?(this.progress.completedLessons.includes(t)||this.progress.completedLessons.push(t),(r.rewards.unlocks||[]).forEach(i=>{this.progress.unlockedLessons.includes(i)||this.progress.unlockedLessons.push(i)}),r.rewards.badge&&!this.progress.badges.includes(r.rewards.badge)&&this.progress.badges.push(r.rewards.badge),this.progress.totalXP+=r.rewards.xp||0,this._saveProgress(),{completed:!0,lessonId:t,lessonTitle:r.title,rewards:r.rewards,nextLesson:((s=r.rewards.unlocks)==null?void 0:s[0])||null,performance:n}):null}resetProgress(){this.progress={completedLessons:[],unlockedLessons:[1],badges:[],totalXP:0,currentModule:wt.FUNDAMENTALS},this._saveProgress()}}function oS(e=new Ab){return e.registerSingleton("gameRepository",()=>new Rb),e.registerSingleton("settingsService",()=>new $b),e.registerSingleton("statisticsService",()=>new qb),e.registerSingleton("scoringService",()=>new yn),e.registerSingleton("pieceFactory",()=>new Wn),e.registerSingleton("movementStrategyFactory",()=>new qn),e.registerSingleton("keyboardInputService",()=>new Qb),e.registerSingleton("playerStatsService",t=>new Zb(t),["gameRepository"]),e.registerSingleton("currencyService",t=>new Xb(t),["gameRepository"]),e.registerSingleton("missionsService",(t,n)=>new Yb(t,n),["gameRepository","currencyService"]),e.registerSingleton("achievementsService",(t,n,r)=>new Jb(t,n,r),["gameRepository","currencyService","playerStatsService"]),e.registerSingleton("shopService",(t,n)=>new l0(t,n),["gameRepository","currencyService"]),e.registerSingleton("gameModesService",t=>new tS(t),["gameRepository"]),e.registerSingleton("leaderboardService",(t,n)=>new nS(t,n),["gameRepository","playerStatsService"]),e.registerSingleton("shareService",t=>new rS(t),["playerStatsService"]),e.registerSingleton("aiOpponentService",()=>new ms),e.registerSingleton("multiplayerService",t=>new sS(t),["gameRepository"]),e.registerSingleton("tutorialService",t=>new iS(t),["gameRepository"]),e.registerSingleton("gameService",(t,n,r,s)=>new $n(t,n,r,s),["pieceFactory","movementStrategyFactory","gameRepository","scoringService"]),e}const G=oS();function c0(){const[e,t]=v.useState(null),[n,r]=v.useState(!0);v.useEffect(()=>{try{const a=G.resolve("currencyService");t(a.getCurrency()),r(!1);const c=()=>{t(a.getCurrency())};return window.addEventListener("currencyUpdated",c),()=>{window.removeEventListener("currencyUpdated",c)}}catch{r(!1)}},[]);const s=v.useCallback((a,c)=>{try{const u=G.resolve("currencyService"),h=u.addFish(a,c);return h&&(t(u.getCurrency()),window.dispatchEvent(new Event("currencyUpdated"))),h}catch{return!1}},[]),i=v.useCallback((a,c)=>{try{const u=G.resolve("currencyService"),h=u.spendFish(a,c);return h&&(t(u.getCurrency()),window.dispatchEvent(new Event("currencyUpdated"))),h}catch{return!1}},[]),o=v.useCallback(a=>{try{return G.resolve("currencyService").canAfford(a)}catch{return!1}},[]);return{currency:e,loading:n,addFish:s,spendFish:i,canAfford:o}}function aS({className:e=""}){const{currency:t,loading:n}=c0();return n||!t?l.jsxs("div",{className:`flex items-center gap-2 ${e}`,children:[l.jsx("div",{className:"text-2xl",children:""}),l.jsx("div",{className:"text-white/60",children:"..."})]}):l.jsxs(N.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:`flex items-center gap-2 bg-black/30 px-4 py-2 rounded-lg backdrop-blur-sm ${e}`,children:[l.jsx("span",{className:"text-2xl",children:""}),l.jsx(N.span,{initial:{scale:1.2,color:"#fbbf24"},animate:{scale:1,color:"#ffffff"},transition:{duration:.3},className:"text-xl font-bold",children:t.fish.toLocaleString()},t.fish)]})}function lS({onStartGame:e,onNewGame:t,onShowSettings:n,onShowShop:r,onShowMissions:s,onShowAchievements:i,onShowMultiplayer:o,onShowTutorial:a,onShowTutorialHub:c,onShowAIShowcase:u,onShowCreatorMode:h,onShowInstallPrompt:d,canInstallPWA:f,hasActiveGame:y,gameState:x}){var w,k;const[b,S]=v.useState(!0),p=_b(),m=v.useCallback(j=>{var C;b&&((C=p.playMenuSelect)==null||C.call(p)),j==null||j()},[b,p]);v.useEffect(()=>{const j=C=>{C.key==="Enter"&&(C.preventDefault(),m(e))};return window.addEventListener("keydown",j),()=>window.removeEventListener("keydown",j)},[m,e]);const g=(j=0)=>({initial:{opacity:0,y:16},animate:{opacity:1,y:0},transition:{duration:.35,delay:j,ease:"easeOut"}});return l.jsxs("div",{className:"h-screen bg-gradient-to-b from-slate-900 via-purple-950 to-slate-900 flex flex-col items-center justify-center p-4 relative overflow-hidden",children:[l.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[l.jsx("div",{className:"absolute top-1/4 -left-32 w-64 h-64 bg-purple-600/10 rounded-full blur-3xl"}),l.jsx("div",{className:"absolute bottom-1/4 -right-32 w-64 h-64 bg-blue-600/10 rounded-full blur-3xl"})]}),l.jsx("div",{className:"fixed top-3 right-3 z-50",children:l.jsx(aS,{})}),l.jsxs("div",{className:"w-full max-w-sm relative z-10 flex flex-col items-center",children:[l.jsxs(N.div,{...g(0),className:"text-center mb-4",children:[l.jsx("h1",{className:"text-4xl font-extrabold text-white tracking-tight drop-shadow-lg select-none",children:" Cat Tetris"}),l.jsx("p",{className:"text-white/50 text-xs mt-1",children:"Empilhe blocos com seus amigos felinos"})]}),l.jsx(N.div,{...g(.1),className:"w-full space-y-2 mb-4",children:y?l.jsxs(l.Fragment,{children:[l.jsxs("button",{onClick:()=>m(e),className:"w-full py-4 rounded-xl bg-emerald-500 hover:bg-emerald-400 active:scale-[0.98] text-white font-bold text-lg shadow-lg shadow-emerald-500/20 transition-all duration-150",children:[" Continuar",l.jsxs("span",{className:"block text-emerald-100/70 text-xs font-normal mt-0.5",children:["Nvel ",((w=x==null?void 0:x.score)==null?void 0:w.level)||1,"  ",(((k=x==null?void 0:x.score)==null?void 0:k.points)||0).toLocaleString()," pts"]})]}),l.jsx("button",{onClick:()=>m(t),className:"w-full py-3 rounded-xl bg-white/10 hover:bg-white/15 active:scale-[0.98] text-white font-semibold text-base border border-white/10 transition-all duration-150",children:"Novo Jogo"})]}):l.jsx("button",{onClick:()=>m(e),className:"w-full py-5 rounded-xl bg-gradient-to-r from-emerald-500 to-green-500 hover:from-emerald-400 hover:to-green-400 active:scale-[0.98] text-white font-bold text-xl shadow-lg shadow-emerald-500/25 transition-all duration-150",children:" Jogar"})}),l.jsxs(N.div,{...g(.18),className:"w-full grid grid-cols-2 gap-2 mb-4",children:[l.jsx(gi,{icon:"",label:"VS IA",sub:"Desafie o bot",onClick:()=>m(o)}),l.jsx(gi,{icon:"",label:"Tutorial",sub:"Aprenda a jogar",onClick:()=>m(c)}),l.jsx(gi,{icon:"",label:"Criador",sub:"Treine T-Spins",onClick:()=>m(h)}),l.jsx(gi,{icon:"",label:"IA Expert",sub:"Assista a IA jogar",onClick:()=>m(u)})]}),l.jsxs(N.div,{...g(.25),className:"w-full grid grid-cols-4 gap-1 mb-4",children:[l.jsx(xi,{icon:"",label:"Loja",onClick:()=>m(r)}),l.jsx(xi,{icon:"",label:"Misses",onClick:()=>m(s)}),l.jsx(xi,{icon:"",label:"Conquistas",onClick:()=>m(i)}),l.jsx(xi,{icon:"",label:"Config",onClick:()=>m(n)})]}),l.jsxs(N.div,{...g(.3),className:"flex items-center gap-3 text-xs text-white/25",children:[l.jsx("button",{onClick:()=>S(!b),className:"hover:text-white/50 transition-colors",children:b?"":""}),f&&l.jsx("button",{onClick:()=>m(d),className:"hover:text-white/50 transition-colors",children:" Instalar"}),l.jsx("span",{className:"select-none",children:"v1.0"})]})]})]})}function gi({icon:e,label:t,sub:n,onClick:r}){return l.jsxs("button",{onClick:r,className:"flex flex-col items-center text-center p-3 rounded-xl bg-white/[0.06] hover:bg-white/[0.1] border border-white/[0.06] hover:border-white/[0.12] active:scale-[0.97] transition-all duration-150",children:[l.jsx("span",{className:"text-2xl mb-1",children:e}),l.jsx("span",{className:"text-white font-semibold text-sm leading-tight",children:t}),l.jsx("span",{className:"text-white/40 text-[10px] mt-0.5 leading-tight",children:n})]})}function xi({icon:e,label:t,onClick:n}){return l.jsxs("button",{onClick:n,className:"flex flex-col items-center gap-1 px-2 py-2 rounded-lg hover:bg-white/[0.07] active:scale-95 transition-all duration-150",children:[l.jsx("span",{className:"text-lg",children:e}),l.jsx("span",{className:"text-white/40 text-[10px] leading-none",children:t})]})}function cS({onClose:e}){const[t,n]=v.useState(null),[r,s]=v.useState(!0),[i,o]=v.useState(!1);v.useEffect(()=>{const u=d=>{d.preventDefault(),n(d)},h=()=>{o(!0),s(!1),n(null),localStorage.setItem("cat-tetris-installed","true"),e&&e()};return window.addEventListener("beforeinstallprompt",u),window.addEventListener("appinstalled",h),window.matchMedia("(display-mode: standalone)").matches&&(o(!0),e&&e()),()=>{window.removeEventListener("beforeinstallprompt",u),window.removeEventListener("appinstalled",h)}},[e]);const a=async()=>{if(!t)return;t.prompt();const{outcome:u}=await t.userChoice;u==="accepted"&&(s(!1),e&&e()),localStorage.setItem("cat-tetris-install-prompt-seen","true"),n(null)},c=()=>{s(!1),localStorage.setItem("cat-tetris-install-prompt-seen","true"),e&&e()};return i?null:t?l.jsx(ge,{children:r&&l.jsx(N.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:l.jsx(N.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},className:"bg-gradient-to-br from-purple-900 to-blue-900 rounded-2xl p-6 max-w-md w-full shadow-2xl border-2 border-purple-500/30",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-6xl mb-4",children:""}),l.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Instalar Cat Tetris"}),l.jsx("p",{className:"text-purple-200 mb-6",children:"Instale o Cat Tetris na sua tela inicial para jogar offline a qualquer momento! Funciona como um app nativo."}),l.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-6 text-sm",children:[l.jsxs("div",{className:"bg-white/10 rounded-lg p-3",children:[l.jsx("div",{className:"text-green-400 mb-1",children:" Acesso Rpido"}),l.jsx("div",{className:"text-purple-200",children:"cone na tela inicial"})]}),l.jsxs("div",{className:"bg-white/10 rounded-lg p-3",children:[l.jsx("div",{className:"text-green-400 mb-1",children:" Offline"}),l.jsx("div",{className:"text-purple-200",children:"Jogue sem internet"})]}),l.jsxs("div",{className:"bg-white/10 rounded-lg p-3",children:[l.jsx("div",{className:"text-green-400 mb-1",children:" Performance"}),l.jsx("div",{className:"text-purple-200",children:"Carregamento instantneo"})]}),l.jsxs("div",{className:"bg-white/10 rounded-lg p-3",children:[l.jsx("div",{className:"text-green-400 mb-1",children:" Experincia"}),l.jsx("div",{className:"text-purple-200",children:"Como app nativo"})]})]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx(N.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:c,className:"flex-1 bg-gray-600 hover:bg-gray-700 text-white py-3 px-4 rounded-xl font-semibold transition-colors",children:"Agora no"}),l.jsx(N.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:a,className:"flex-1 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white py-3 px-4 rounded-xl font-semibold transition-all shadow-lg",children:" Instalar"})]})]})})})}):l.jsx(N.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:l.jsx(N.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},className:"bg-gradient-to-br from-purple-900 to-blue-900 rounded-2xl p-6 max-w-md w-full shadow-2xl border-2 border-purple-500/30",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-6xl mb-4",children:""}),l.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"PWA no disponvel"}),l.jsx("p",{className:"text-purple-200 mb-6",children:"Este dispositivo no suporta instalao de PWA ou o app j est instalado."}),l.jsx(N.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:c,className:"w-full bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white py-3 px-4 rounded-xl font-semibold transition-all shadow-lg",children:" Entendi"})]})})})}function u0(){const[e,t]=v.useState([]),[n,r]=v.useState(!0);v.useEffect(()=>{try{const o=G.resolve("missionsService");t(o.getMissions()),r(!1);const a=()=>{t(o.getMissions())},c=({linesCleared:y})=>{o.incrementProgress(ae.CLEAR_LINES,y),y===4&&o.incrementProgress(ae.TETRIS_CLEAR,1),a()},u=()=>{o.incrementProgress(ae.T_SPINS,1),a()},h=()=>{o.incrementProgress(ae.PLACE_PIECES,1),a()},d=({score:y,level:x,combo:b})=>{y&&o.updateProgress(ae.SCORE_POINTS,y),x&&o.updateProgress(ae.REACH_LEVEL,x),b&&o.updateProgress(ae.COMBOS,b),a()},f=()=>{o.incrementProgress(ae.BACK_TO_BACK,1),a()};return R.on(O.LINE_CLEARED,c),R.on(O.T_SPIN,u),R.on(O.PIECE_PLACED,h),R.on(O.SCORE_UPDATED,d),R.on(O.BACK_TO_BACK,f),()=>{R.off(O.LINE_CLEARED,c),R.off(O.T_SPIN,u),R.off(O.PIECE_PLACED,h),R.off(O.SCORE_UPDATED,d),R.off(O.BACK_TO_BACK,f)}}catch{r(!1)}},[]),v.useEffect(()=>{if(n)return;const o=setInterval(()=>{try{const a=G.resolve("missionsService"),u=G.resolve("statisticsService").getStats();u.playTime>0&&(a.updateProgress(ae.SURVIVE_TIME,u.playTime),t(a.getMissions()))}catch{}},1e3);return()=>clearInterval(o)},[n]);const s=v.useCallback(o=>{try{const a=G.resolve("missionsService"),c=a.claimReward(o);return c.success&&(t(a.getMissions()),window.dispatchEvent(new Event("currencyUpdated"))),c}catch(a){return{success:!1,error:a.message}}},[]),i=v.useCallback(()=>{try{return G.resolve("missionsService").getStats()}catch{return null}},[]);return{missions:e,loading:n,claimReward:s,getMissionsStats:i}}function d0({trigger:e,duration:t=3e3,message:n}){const[r,s]=v.useState(!1),[i,o]=v.useState([]);return v.useEffect(()=>{if(e){s(!0);const a=[];for(let c=0;c<50;c++)a.push({id:c,x:Math.random()*100,y:-10,rotation:Math.random()*360,color:["#FFD700","#FF6B6B","#4ECDC4","#45B7D1","#FFA07A","#98D8C8"][Math.floor(Math.random()*6)],size:Math.random()*10+5,delay:Math.random()*.5});o(a),setTimeout(()=>{s(!1),o([])},t)}},[e,t]),r?l.jsxs("div",{className:"fixed inset-0 pointer-events-none z-[9999] overflow-hidden",children:[i.map(a=>l.jsx(N.div,{initial:{x:`${a.x}vw`,y:a.y,rotate:a.rotation,opacity:1},animate:{y:"110vh",rotate:a.rotation+720,opacity:0},transition:{duration:2+Math.random(),delay:a.delay,ease:"easeIn"},style:{position:"absolute",width:a.size,height:a.size,backgroundColor:a.color,borderRadius:Math.random()>.5?"50%":"0"}},a.id)),n&&l.jsx(N.div,{initial:{scale:0,y:"50vh"},animate:{scale:1,y:"40vh"},exit:{scale:0,opacity:0},transition:{type:"spring",stiffness:200,damping:20},className:"absolute inset-x-0 flex justify-center",children:l.jsx("div",{className:"bg-gradient-to-r from-yellow-400 to-orange-500 text-white font-bold text-4xl px-8 py-4 rounded-2xl shadow-2xl border-4 border-white",children:n})}),l.jsx(N.div,{initial:{opacity:0},animate:{opacity:[0,1,0]},transition:{duration:1,repeat:3},className:"absolute inset-0 bg-gradient-to-b from-yellow-400/20 via-transparent to-transparent"})]}):null}function uS(){const[e,t]=v.useState([]);v.useEffect(()=>{const s=i=>{const{message:o,type:a="info",duration:c=3e3}=i.detail,u={id:`toast_${Date.now()}_${Math.random()}`,message:o,type:a,duration:c};t(h=>[...h,u]),setTimeout(()=>{t(h=>h.filter(d=>d.id!==u.id))},c)};return window.addEventListener("showToast",s),()=>window.removeEventListener("showToast",s)},[]);const n=s=>{switch(s){case"success":return"from-green-600 to-emerald-600 border-green-400";case"error":return"from-red-600 to-rose-600 border-red-400";case"warning":return"from-yellow-600 to-amber-600 border-yellow-400";case"info":default:return"from-blue-600 to-cyan-600 border-blue-400"}},r=s=>{switch(s){case"success":return"";case"error":return"";case"warning":return"";case"info":default:return""}};return l.jsx("div",{className:"fixed top-4 right-4 z-[9999] flex flex-col gap-2 pointer-events-none",children:l.jsx(ge,{children:e.map(s=>l.jsx(N.div,{initial:{opacity:0,x:100,scale:.8},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:100,scale:.8},className:`bg-gradient-to-r ${n(s.type)} border-2 rounded-lg px-4 py-3 shadow-2xl min-w-[250px] max-w-[400px] pointer-events-auto`,children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("span",{className:"text-white text-xl font-bold",children:r(s.type)}),l.jsx("span",{className:"text-white font-medium flex-1",children:s.message})]})},s.id))})})}function gr(e,t="info",n=3e3){window.dispatchEvent(new CustomEvent("showToast",{detail:{message:e,type:t,duration:n}}))}function dS({onClose:e}){const{missions:t,loading:n,claimReward:r,getMissionsStats:s}=u0(),[i,o]=ue.useState(!1),a=s(),c=d=>{const f=r(d);f.success?(gr(` Recompensa coletada: +${f.reward} `,"success"),s().allClaimed&&(o(!0),setTimeout(()=>o(!1),3e3))):gr(` ${f.error}`,"error")},u=d=>{switch(d){case"easy":return"text-green-400";case"medium":return"text-yellow-400";case"hard":return"text-red-400";default:return"text-white"}},h=d=>{switch(d){case"easy":return" Fcil";case"medium":return" Mdio";case"hard":return" Difcil";default:return d}};return n?l.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",children:l.jsx("div",{className:"text-white text-xl",children:"Carregando misses..."})}):l.jsxs(N.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:e,children:[l.jsxs(N.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},className:"bg-gradient-to-br from-purple-900/95 to-blue-900/95 rounded-2xl p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto border-2 border-white/20 shadow-2xl",onClick:d=>d.stopPropagation(),children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-3xl font-bold text-white flex items-center gap-2",children:" Misses Dirias"}),l.jsx("p",{className:"text-white/60 text-sm mt-1",children:"Complete misses para ganhar  Peixes"})]}),l.jsx("button",{onClick:e,className:"text-white/60 hover:text-white text-2xl transition-colors",children:""})]}),a&&l.jsxs("div",{className:"bg-black/30 rounded-lg p-4 mb-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"text-white/80",children:"Progresso Dirio:"}),l.jsxs("span",{className:"text-white font-bold",children:[a.completed,"/",a.total," completas"]})]}),l.jsxs("div",{className:"flex justify-between items-center mt-2",children:[l.jsx("span",{className:"text-white/80",children:"Recompensas Disponveis:"}),l.jsxs("span",{className:"text-yellow-400 font-bold flex items-center gap-1",children:[" ",a.claimedRewards,"/",a.totalRewards]})]})]}),l.jsx("div",{className:"space-y-4",children:t.map((d,f)=>{const y=Math.min(d.progress,d.target),x=y/d.target*100;return l.jsxs(N.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:f*.1},className:`bg-black/40 rounded-lg p-4 border-2 ${d.completed?"border-green-500/50":"border-white/10"}`,children:[l.jsxs("div",{className:"flex justify-between items-start mb-2",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx("h3",{className:"text-white font-bold text-lg",children:d.title}),d.completed&&!d.claimed&&l.jsx("span",{className:"text-green-400 text-xl animate-pulse",children:""}),d.claimed&&l.jsx("span",{className:"text-white/40 text-sm",children:"(Coletado)"})]}),l.jsx("p",{className:"text-white/60 text-sm",children:d.description}),l.jsx("span",{className:`text-xs ${u(d.difficulty)}`,children:h(d.difficulty)})]}),l.jsx("div",{className:"text-right",children:l.jsxs("div",{className:"text-yellow-400 font-bold flex items-center gap-1",children:[l.jsx("span",{className:"text-2xl",children:""}),l.jsx("span",{children:d.reward})]})})]}),l.jsxs("div",{className:"mt-3",children:[l.jsxs("div",{className:"flex justify-between text-sm text-white/60 mb-1",children:[l.jsx("span",{children:"Progresso"}),l.jsxs("span",{children:[y,"/",d.target]})]}),l.jsx("div",{className:"w-full bg-gray-700 rounded-full h-3 overflow-hidden",children:l.jsx(N.div,{initial:{width:0},animate:{width:`${x}%`},transition:{duration:.5},className:`h-full ${d.completed?"bg-green-500":"bg-blue-500"}`})})]}),d.completed&&!d.claimed&&l.jsx(N.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>c(d.id),className:"w-full mt-3 bg-green-600 hover:bg-green-500 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:" Coletar Recompensa"})]},d.id)})}),l.jsx("div",{className:"mt-6 text-center text-white/40 text-sm",children:"As misses resetam todos os dias s 00:00"})]}),l.jsx(d0,{trigger:i,message:" Todas as misses completas! ",duration:3e3})]})}function h0(){const[e,t]=v.useState([]),[n,r]=v.useState([]),[s,i]=v.useState(!0);v.useEffect(()=>{try{const h=G.resolve("achievementsService");t(h.getAchievements()),i(!1);const d=setInterval(()=>{const y=G.resolve("playerStatsService").getStats(),x=h.checkAchievements(y);x.length>0&&(t(h.getAchievements()),r(x),window.dispatchEvent(new CustomEvent("achievementsUnlocked",{detail:x})),setTimeout(()=>{r([])},5e3))},2e3);return()=>clearInterval(d)}catch{i(!1)}},[]);const o=v.useCallback(h=>{try{return G.resolve("achievementsService").getByTier(h)}catch{return[]}},[]),a=v.useCallback(()=>{try{return G.resolve("achievementsService").getUnlocked()}catch{return[]}},[]),c=v.useCallback(()=>{try{return G.resolve("achievementsService").getLocked()}catch{return[]}},[]),u=v.useCallback(()=>{try{return G.resolve("achievementsService").getStats()}catch{return null}},[]);return{achievements:e,newUnlocks:n,loading:s,getAchievementsByTier:o,getUnlocked:a,getLocked:c,getStats:u}}function hS({onClose:e}){const{achievements:t,loading:n,getStats:r,getAchievementsByTier:s}=h0(),[i,o]=v.useState("all"),a=r(),c={bronze:"from-amber-700 to-amber-900",silver:"from-gray-400 to-gray-600",gold:"from-yellow-400 to-yellow-600",platinum:"from-cyan-400 to-blue-600"},u={bronze:"",silver:"",gold:"",platinum:""},h=i==="all"?t:s(i);return n?l.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",children:l.jsx("div",{className:"text-white text-xl",children:"Carregando conquistas..."})}):l.jsx(N.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:e,children:l.jsxs(N.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},className:"bg-gradient-to-br from-indigo-900/95 to-purple-900/95 rounded-2xl p-6 max-w-4xl w-full max-h-[90vh] overflow-y-auto border-2 border-white/20 shadow-2xl",onClick:d=>d.stopPropagation(),children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-3xl font-bold text-white flex items-center gap-2",children:" Conquistas"}),l.jsx("p",{className:"text-white/60 text-sm mt-1",children:"Desbloqueie conquistas para ganhar  Peixes"})]}),l.jsx("button",{onClick:e,className:"text-white/60 hover:text-white text-2xl transition-colors",children:""})]}),a&&l.jsxs("div",{className:"bg-black/30 rounded-lg p-4 mb-6",children:[l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-2xl font-bold text-white",children:[a.unlocked,"/",a.total]}),l.jsx("div",{className:"text-white/60 text-sm",children:"Desbloqueadas"})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-2xl font-bold text-green-400",children:[a.percentage,"%"]}),l.jsx("div",{className:"text-white/60 text-sm",children:"Completo"})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-2xl font-bold text-yellow-400 flex items-center justify-center gap-1",children:[" ",a.earnedRewards.toLocaleString()]}),l.jsx("div",{className:"text-white/60 text-sm",children:"Ganhos"})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-2xl font-bold text-white/40 flex items-center justify-center gap-1",children:[" ",a.totalRewards.toLocaleString()]}),l.jsx("div",{className:"text-white/60 text-sm",children:"Total"})]})]}),l.jsxs("div",{className:"flex justify-around mt-4 pt-4 border-t border-white/10",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-lg",children:""}),l.jsx("div",{className:"text-white/80 text-sm",children:a.byTier.bronze})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-lg",children:""}),l.jsx("div",{className:"text-white/80 text-sm",children:a.byTier.silver})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-lg",children:""}),l.jsx("div",{className:"text-white/80 text-sm",children:a.byTier.gold})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-lg",children:""}),l.jsx("div",{className:"text-white/80 text-sm",children:a.byTier.platinum})]})]})]}),l.jsxs("div",{className:"flex gap-2 mb-4 overflow-x-auto",children:[l.jsx("button",{onClick:()=>o("all"),className:`px-4 py-2 rounded-lg font-bold transition-colors whitespace-nowrap ${i==="all"?"bg-white text-black":"bg-white/20 text-white hover:bg-white/30"}`,children:"Todas"}),Object.keys(u).map(d=>l.jsxs("button",{onClick:()=>o(d),className:`px-4 py-2 rounded-lg font-bold transition-colors whitespace-nowrap ${i===d?`bg-gradient-to-r ${c[d]} text-white`:"bg-white/20 text-white hover:bg-white/30"}`,children:[u[d]," ",d.charAt(0).toUpperCase()+d.slice(1)]},d))]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:h.map((d,f)=>{const y=d.progress||0,x=d.requirement.value,b=Math.min(y/x*100,100);return l.jsxs(N.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:f*.05},className:`bg-black/40 rounded-lg p-4 border-2 relative overflow-hidden ${d.unlocked?`border-transparent bg-gradient-to-br ${c[d.tier]}`:"border-white/10"}`,children:[d.unlocked&&l.jsx("div",{className:"absolute top-2 right-2 text-3xl",children:""}),l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("div",{className:"text-4xl",children:u[d.tier]}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:`font-bold text-lg mb-1 ${d.unlocked?"text-white":"text-white/60"}`,children:d.title}),l.jsx("p",{className:`text-sm mb-2 ${d.unlocked?"text-white/90":"text-white/40"}`,children:d.description}),l.jsxs("div",{className:`flex items-center gap-1 text-sm font-bold ${d.unlocked?"text-yellow-300":"text-white/40"}`,children:[" ",d.reward]}),!d.unlocked&&l.jsxs("div",{className:"mt-2",children:[l.jsxs("div",{className:"flex justify-between text-xs text-white/40 mb-1",children:[l.jsx("span",{children:"Progresso"}),l.jsxs("span",{children:[y,"/",x]})]}),l.jsx("div",{className:"w-full bg-gray-700/50 rounded-full h-2",children:l.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${b}%`}})})]}),d.unlocked&&d.unlockedAt&&l.jsxs("div",{className:"text-xs text-white/60 mt-2",children:["Desbloqueado em ",new Date(d.unlockedAt).toLocaleDateString()]})]})]})]},d.id)})}),h.length===0&&l.jsx("div",{className:"text-center text-white/40 py-8",children:"Nenhuma conquista nesta categoria"})]})})}function fS(){const[e,t]=v.useState([]),[n,r]=v.useState(!1);v.useEffect(()=>{const o=a=>{const c=a.detail;c.some(h=>h.tier==="platinum")&&(r(!0),setTimeout(()=>r(!1),3e3)),c.forEach((h,d)=>{setTimeout(()=>{const f={id:`${h.id}_${Date.now()}`,achievement:h};t(y=>[...y,f]),setTimeout(()=>{t(y=>y.filter(x=>x.id!==f.id))},5e3)},d*500)})};return window.addEventListener("achievementsUnlocked",o),()=>{window.removeEventListener("achievementsUnlocked",o)}},[]);const s={bronze:"",silver:"",gold:"",platinum:""},i={bronze:"from-amber-700 to-amber-900",silver:"from-gray-400 to-gray-600",gold:"from-yellow-400 to-yellow-600",platinum:"from-cyan-400 to-blue-600"};return l.jsxs("div",{className:"fixed top-4 right-4 z-[9999] pointer-events-none",children:[l.jsx(ge,{children:e.map(o=>{const{achievement:a}=o;return l.jsx(N.div,{initial:{opacity:0,x:100,scale:.8},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:100,scale:.8},transition:{type:"spring",stiffness:200,damping:20},className:`bg-gradient-to-r ${i[a.tier]} rounded-lg p-4 shadow-2xl mb-3 border-2 border-white/30 pointer-events-auto max-w-sm`,children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"text-5xl",children:s[a.tier]}),l.jsxs("div",{className:"flex-1",children:[l.jsx("div",{className:"text-white/90 text-sm font-bold mb-1",children:" CONQUISTA DESBLOQUEADA!"}),l.jsx("h3",{className:"text-white font-bold text-lg",children:a.title}),l.jsx("p",{className:"text-white/80 text-sm",children:a.description}),l.jsxs("div",{className:"flex items-center gap-1 mt-2 text-yellow-200 font-bold",children:[l.jsx("span",{className:"text-xl",children:""}),l.jsxs("span",{children:["+",a.reward]})]})]})]})},o.id)})}),l.jsx(d0,{trigger:n,message:" Conquista Lendria! ",duration:3e3})]})}function mS({mode:e,aiDifficulty:t,ai1Difficulty:n,ai2Difficulty:r,onExit:s}){var k,j,C,P,E,M,B,q,W,K,Q,F,H,T,_,L,D,V,ve,Pe,tt,je;const[i,o]=v.useState(null),[a,c]=v.useState(null),[u,h]=v.useState(null),[d,f]=v.useState(0),[y,x]=v.useState(0),b=v.useRef({p1:null,p2:null,ai:null,ai1:null,ai2:null}),S=v.useRef(0),p=v.useRef(null),m=v.useRef(null);v.useEffect(()=>{const Z=new $n(new Wn,new qn,null,new yn),te=new $n(new Wn,new qn,null,new yn);let oe=null,X=null,U=null;if(e==="vsAI")try{oe=new ms,oe.setDifficulty(t||"medium"),t==="expert"&&(te.score._fixedLevel=1)}catch{}else e==="aiVsAI"&&(X=new ms,X.setDifficulty(n||"expert"),X.setVisualMode(!0),U=new ms,U.setDifficulty(r||"expert"),U.setVisualMode(!0),(n||"expert")==="expert"&&(Z.score._fixedLevel=1),(r||"expert")==="expert"&&(te.score._fixedLevel=1));return Z.initializeGame(),Z.isPlaying=!0,te.initializeGame(),te.isPlaying=!0,e==="vsAI"&&t==="expert"?(te._lockDelayMax=2e3,te._lockDelayMaxResets=50):e==="aiVsAI"&&((n||"expert")==="expert"&&(Z._lockDelayMax=2e3,Z._lockDelayMaxResets=50),(r||"expert")==="expert"&&(te._lockDelayMax=2e3,te._lockDelayMaxResets=50)),b.current={p1:Z,p2:te,ai:oe,ai1:X,ai2:U},o(Z.getGameState()),c(te.getGameState()),()=>{p.current&&cancelAnimationFrame(p.current)}},[e,t,n,r]),v.useEffect(()=>{const Z=te=>{var Ie,Ut;S.current||(S.current=te);const oe=te-S.current;S.current=te;const{p1:X,p2:U,ai:Gr,ai1:$s,ai2:Fo}=b.current;if(!X||!U){p.current=requestAnimationFrame(Z);return}if(X.gameOver||U.gameOver){m.current||(X.gameOver&&!U.gameOver?m.current="player2":!X.gameOver&&U.gameOver?m.current="player1":m.current=(((Ie=X.score)==null?void 0:Ie.points)||0)>=(((Ut=U.score)==null?void 0:Ut.points)||0)?"player1":"player2",h(m.current)),X.gameOver||(X.gameOver=!0,X._markDirty()),U.gameOver||(U.gameOver=!0,U._markDirty()),X.isDirty&&(o(X.getGameState()),X.clearDirty()),U.isDirty&&(c(U.getGameState()),U.clearDirty());return}X.isPaused||X.updateGame(oe),U.isPaused||U.updateGame(oe);const Ws=X.consumeAttack();Ws>0&&!U.gameOver&&U.receiveGarbage(Ws);const qs=U.consumeAttack();qs>0&&!X.gameOver&&X.receiveGarbage(qs);const J=(Go,$t)=>{if(!(!Go||$t.gameOver))try{const b0=e==="aiVsAI"||Go._isExpert?3:1;for(let Zc=0;Zc<b0;Zc++){const Vo=Go.decideNextMove($t.getGameState());if(!Vo)break;switch(Vo.action){case"left":$t.movePiece("left");break;case"right":$t.movePiece("right");break;case"rotate":$t.rotatePiece();break;case"down":$t.movePiece("down");break;case"drop":$t.hardDrop();break;case"hold":$t.holdPiece();break}if(Vo.action==="drop")break}}catch{}};e==="aiVsAI"?(J($s,X),J(Fo,U)):e==="vsAI"&&J(Gr,U),X.isDirty&&(o(X.getGameState()),f(X.pendingGarbage),X.clearDirty()),U.isDirty&&(c(U.getGameState()),x(U.pendingGarbage),U.clearDirty()),p.current=requestAnimationFrame(Z)};return p.current=requestAnimationFrame(Z),()=>{p.current&&cancelAnimationFrame(p.current)}},[e]),v.useEffect(()=>{if(u||e==="aiVsAI")return;const Z=te=>{const oe=b.current.p1;if(!(!oe||oe.gameOver))switch(te.key){case"ArrowLeft":te.preventDefault(),oe.movePiece("left");break;case"ArrowRight":te.preventDefault(),oe.movePiece("right");break;case"ArrowDown":te.preventDefault(),oe.movePiece("down");break;case"ArrowUp":te.preventDefault(),oe.rotatePiece();break;case"z":case"Z":oe.rotatePiece("left");break;case"c":case"C":case"Shift":oe.holdPiece();break;case" ":te.preventDefault(),oe.hardDrop();break}};return window.addEventListener("keydown",Z),()=>window.removeEventListener("keydown",Z)},[u]);const g=ue.useMemo(()=>{var Z;if(!(i!=null&&i.currentPiece)||i!=null&&i.gameOver)return null;try{return(Z=b.current.p1)==null?void 0:Z.getDropPreview()}catch{return null}},[(j=(k=i==null?void 0:i.currentPiece)==null?void 0:k.position)==null?void 0:j.x,(P=(C=i==null?void 0:i.currentPiece)==null?void 0:C.position)==null?void 0:P.y,(E=i==null?void 0:i.currentPiece)==null?void 0:E.type,(M=i==null?void 0:i.currentPiece)==null?void 0:M.rotationState]),w=ue.useMemo(()=>{var Z;if(!(a!=null&&a.currentPiece)||a!=null&&a.gameOver)return null;try{return(Z=b.current.p2)==null?void 0:Z.getDropPreview()}catch{return null}},[(q=(B=a==null?void 0:a.currentPiece)==null?void 0:B.position)==null?void 0:q.x,(K=(W=a==null?void 0:a.currentPiece)==null?void 0:W.position)==null?void 0:K.y,(Q=a==null?void 0:a.currentPiece)==null?void 0:Q.type,(F=a==null?void 0:a.currentPiece)==null?void 0:F.rotationState]);return!i||!a?l.jsx("div",{className:"h-screen flex items-center justify-center bg-gradient-to-br from-purple-900 to-blue-900",children:l.jsx("div",{className:"text-white text-2xl",children:"Carregando multiplayer..."})}):l.jsxs("div",{className:"h-screen flex flex-col items-center bg-gradient-to-br from-purple-900 to-blue-900 p-2 overflow-hidden",children:[l.jsxs("div",{className:"flex justify-between items-center w-full max-w-5xl mb-2",children:[l.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-white",children:e==="aiVsAI"?" IA vs IA (Debug)":e==="vsAI"?" vs IA":" 1v1 Local"}),l.jsx("button",{onClick:s,className:"bg-red-600 hover:bg-red-700 text-white px-3 py-1.5 rounded-lg transition-colors text-sm font-bold",children:" Voltar"})]}),l.jsxs("div",{className:"flex gap-2 sm:gap-4 items-start justify-center flex-wrap",children:[l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("div",{className:"bg-blue-600 text-white px-4 py-1 rounded-t-lg font-bold text-sm sm:text-base",children:e==="aiVsAI"?` IA1 (${(n==null?void 0:n.toUpperCase())||"EXPERT"})`:e==="vsAI"?" VOC":" P1"}),l.jsx("div",{className:"bg-black/40 p-2 rounded-b-lg",children:l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx(Un,{heldPiece:i.heldPiece,canHold:i.canHold}),e!=="aiVsAI"&&l.jsxs("div",{className:"text-white/60 text-[10px] leading-tight",children:[" mover",l.jsx("br",{})," rotacionar",l.jsx("br",{}),"C segurar",l.jsx("br",{}),"Espao dropar"]})]}),l.jsx(vn,{board:i.board,currentPiece:i.currentPiece,dropPreview:g,gameOver:i.gameOver}),d>0&&l.jsx(wh,{count:d}),l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx(Hn,{pieces:i.nextPieces||[]}),l.jsx(zn,{score:((H=i.score)==null?void 0:H.points)||0,level:((T=i.score)==null?void 0:T.level)||1,lines:((_=i.score)==null?void 0:_.lines)||0,combo:((L=i.score)==null?void 0:L.combo)||0})]})]})})]}),l.jsx("div",{className:"flex items-center justify-center self-center",children:l.jsx("div",{className:"bg-yellow-500 text-black font-bold text-2xl sm:text-3xl px-4 py-2 rounded-full shadow-2xl animate-pulse",children:"VS"})}),l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("div",{className:"bg-red-600 text-white px-4 py-1 rounded-t-lg font-bold text-sm sm:text-base",children:e==="aiVsAI"?` IA2 (${(r==null?void 0:r.toUpperCase())||"EXPERT"})`:e==="vsAI"?` IA (${(t==null?void 0:t.toUpperCase())||"MEDIUM"})`:" P2"}),l.jsx("div",{className:"bg-black/40 p-2 rounded-b-lg",children:l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx(Un,{heldPiece:a.heldPiece,canHold:a.canHold}),e==="1v1"&&l.jsxs("div",{className:"text-white/60 text-[10px] leading-tight",children:["Setas mover",l.jsx("br",{})," rotacionar",l.jsx("br",{}),"Ctrl segurar",l.jsx("br",{}),"Enter dropar"]})]}),l.jsx(vn,{board:a.board,currentPiece:a.currentPiece,dropPreview:w,gameOver:a.gameOver}),y>0&&l.jsx(wh,{count:y}),l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx(Hn,{pieces:a.nextPieces||[]}),l.jsx(zn,{score:((D=a.score)==null?void 0:D.points)||0,level:((V=a.score)==null?void 0:V.level)||1,lines:((ve=a.score)==null?void 0:ve.lines)||0,combo:((Pe=a.score)==null?void 0:Pe.combo)||0})]})]})})]})]}),l.jsx(ge,{children:u&&l.jsx(N.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/90 flex items-center justify-center z-50",children:l.jsxs(N.div,{initial:{scale:.8,y:50},animate:{scale:1,y:0},className:"bg-gradient-to-br from-yellow-500 to-orange-600 rounded-2xl p-12 text-center",children:[l.jsx("div",{className:"text-8xl mb-4",children:u==="player1"||e==="aiVsAI"?"":""}),l.jsx("h2",{className:"text-5xl font-bold text-white mb-4",children:e==="aiVsAI"?u==="player1"?"IA 1 VENCEU!":"IA 2 VENCEU!":u==="player1"?"VITRIA!":"DERROTA!"}),l.jsx("p",{className:"text-2xl text-white/80 mb-8",children:e==="aiVsAI"?`${u==="player1"?n==null?void 0:n.toUpperCase():r==null?void 0:r.toUpperCase()}  superior!`:u==="player1"?e==="vsAI"?"Voc venceu a IA!":"Player 1 venceu!":e==="vsAI"?"IA venceu!":"Player 2 venceu!"}),l.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-8 text-white",children:[l.jsxs("div",{className:"bg-black/30 rounded-lg p-4",children:[l.jsx("div",{className:"text-sm opacity-60",children:e==="aiVsAI"?`IA1 (${n})`:"Player 1"}),l.jsx("div",{className:"text-3xl font-bold",children:(((tt=i.score)==null?void 0:tt.points)||0).toLocaleString()})]}),l.jsxs("div",{className:"bg-black/30 rounded-lg p-4",children:[l.jsx("div",{className:"text-sm opacity-60",children:e==="aiVsAI"?`IA2 (${r})`:e==="vsAI"?"IA":"Player 2"}),l.jsx("div",{className:"text-3xl font-bold",children:(((je=a.score)==null?void 0:je.points)||0).toLocaleString()})]})]}),l.jsxs("div",{className:"flex gap-4",children:[l.jsx("button",{onClick:()=>window.location.reload(),className:"bg-green-600 hover:bg-green-700 text-white px-8 py-3 rounded-lg font-bold text-xl transition-colors",children:" Jogar Novamente"}),l.jsx("button",{onClick:s,className:"bg-gray-700 hover:bg-gray-800 text-white px-8 py-3 rounded-lg font-bold text-xl transition-colors",children:" Menu"})]})]})})})]})}function wh({count:e}){const n=Math.min(e,20);return l.jsx("div",{className:"flex flex-col-reverse justify-end w-3 rounded overflow-hidden",style:{height:"calc(var(--cell) * 22 + 22px)"},children:Array.from({length:n},(r,s)=>l.jsx("div",{className:"w-full",style:{height:`${100/20}%`,backgroundColor:e>8?"#ef4444":e>4?"#f59e0b":"#ef4444",opacity:.7+s/n*.3}},s))})}class pS{constructor(){this._actionQueue=[],this._lastPieceType=null,this._holdCooldown=0,this._comboCount=0,this.thinkingTime=0,this.lastDecision=0}setDifficulty(){}decideNextMove(t){var d;const n=Date.now();if(n-this.lastDecision<this.thinkingTime)return null;this.lastDecision=n;const{currentPiece:r,board:s,heldPiece:i,canHold:o}=t;if(!r||!s)return null;const a=r.type;if(a!==this._lastPieceType&&(this._lastPieceType=a,this._actionQueue=[],this._holdCooldown>0&&this._holdCooldown--),this._actionQueue.length>0)return this._actionQueue.shift();const c=s.length,u=((d=s[0])==null?void 0:d.length)||10,h=this._findBestMove(r,s,c,u);if(o&&this._holdCooldown<=0&&i){const f=this._findBestMove(i,s,c,u);if(f&&(!h||f.score>h.score+500))return this._holdCooldown=1,{action:"hold"}}return!h&&o&&this._holdCooldown<=0?(this._holdCooldown=1,{action:"hold"}):(h?this._actionQueue=this._buildActionSequence(r,h.rotations,h.targetX):this._actionQueue=[{action:"drop"}],this._actionQueue.shift()||{action:"drop"})}_findBestMove(t,n,r,s){let i=-1/0,o=null;for(let a=0;a<4;a++){const c=this._rotateShape(t.shape,a),u=c[0].length;for(let h=-1;h<=s-u+1;h++){const d=this._findLandingRow(c,n,h,r,s);if(d==null||d<0)continue;const f=this._placeOnBoard(c,n,h,d);if(!f)continue;const y=this._evaluate(f,n,d);y>i&&(i=y,o={rotations:a,targetX:h,score:y})}}return o}_evaluate(t,n,r){const s=t.length,i=t[0].length;let o=0;const a=this._countCompleteLines(t);a===1&&(o+=1e4),a===2&&(o+=25e3),a===3&&(o+=5e4),a>=4&&(o+=1e5);const c=this._removeCompleteLines(t);let u=0,h=0;for(let m=0;m<i;m++){let g=!1,w=0;for(let k=0;k<s;k++)c[k][m]!=null?(g=!0,w++):g&&(u++,h+=w)}o-=u*1e4,o-=h*1e3;const d=[];for(let m=0;m<i;m++){let g=0;for(let w=0;w<s;w++)if(c[w][m]!=null){g=s-w;break}d.push(g)}const f=Math.max(...d),y=d.reduce((m,g)=>m+g,0);o-=y*50,o-=f*100,f>12&&(o-=(f-12)*(f-12)*500),f>16&&(o-=1e5);let x=0;for(let m=0;m<i-1;m++)m===i-2?x+=Math.abs(d[m]-d[m+1])*.3:x+=Math.abs(d[m]-d[m+1]);o-=x*200;let b=0;for(let m=0;m<s;m++)if(c[m].filter(w=>w!=null).length!==0){for(let w=0;w<i-1;w++){const k=c[m][w]!=null,j=c[m][w+1]!=null;k!==j&&b++}c[m][0]==null&&b++,c[m][i-1]==null&&b++}o-=b*100;let S=0;for(let m=0;m<i;m++){for(let g=0;g<s-1;g++){const w=c[g][m]!=null,k=c[g+1][m]!=null;w!==k&&S++}c[s-1][m]==null&&S++}o-=S*80;const p=i-1;if(d[p]<d[p-1]){const m=d[p-1]-d[p];m>=1&&m<=4&&f<=12&&(o+=m*300)}for(let m=0;m<s;m++){const g=c[m].filter(w=>w!=null).length;g===9&&(o+=500),g===8&&(o+=200)}return o-=r>0?0:(s-r)*30,f>14&&(o+=a*5e4),o}_buildActionSequence(t,n,r){var u;const s=[],i=n%4;for(let h=0;h<i;h++)s.push({action:"rotate"});const o=((u=t.position)==null?void 0:u.x)??3,a=r-o,c=a>0?"right":"left";for(let h=0;h<Math.abs(a);h++)s.push({action:c});return s.push({action:"drop"}),s}_rotateShape(t,n){let r=t;for(let s=0;s<n%4;s++)r=r[0].map((i,o)=>r.map(a=>a[o]).reverse());return r}_findLandingRow(t,n,r,s,i){const o=t.length;for(let a=-o;a<s;a++)if(this._collides(t,n,r,a+1,s,i))return a;return s-o}_collides(t,n,r,s,i,o){for(let a=0;a<t.length;a++)for(let c=0;c<t[0].length;c++){if(!t[a][c])continue;const u=r+c,h=s+a;if(u<0||u>=o||h>=i||h>=0&&n[h][u]!=null)return!0}return!1}_placeOnBoard(t,n,r,s){const i=n.length,o=n[0].length,a=n.map(c=>[...c]);for(let c=0;c<t.length;c++)for(let u=0;u<t[0].length;u++){if(!t[c][u])continue;const h=r+u,d=s+c;if(h<0||h>=o||d<0||d>=i||a[d][h]!=null)return null;a[d][h]=1}return a}_removeCompleteLines(t){const n=t[0].length,r=t.filter(s=>!s.every(i=>i!=null));for(;r.length<t.length;)r.unshift(new Array(n).fill(null));return r}_countCompleteLines(t){return t.filter(n=>n.every(r=>r!=null)).length}_countHoles(t){let n=0;const r=t[0].length;for(let s=0;s<r;s++){let i=!1;for(let o=0;o<t.length;o++)t[o][s]!=null?i=!0:i&&n++}return n}_getMaxHeight(t){var s;const n=t.length,r=((s=t[0])==null?void 0:s.length)||10;for(let i=0;i<n;i++)for(let o=0;o<r;o++)if(t[i][o]!=null)return n-i;return 0}}const gS=50;function xS(e){const[t,n]=v.useState(null),[r,s]=v.useState({lines:0,combos:0,tetrises:0,maxCombo:0}),[i,o]=v.useState(!1),[a,c]=v.useState(!1),u=v.useRef(null),h=v.useRef(null),d=v.useRef(null),f=v.useRef(0),y=v.useRef(0),x=v.useRef({lines:0,combos:0,tetrises:0,maxCombo:0,currentCombo:0}),b=v.useCallback(()=>{const p=new $n(new Wn,new qn,null,new yn);p.initializeGame(),p.isPlaying=!0;const m=new pS;u.current=p,h.current=m,y.current=0,f.current=0,x.current.currentCombo=0,n(p.getGameState()),c(!0)},[]);v.useEffect(()=>{if(!e){d.current&&cancelAnimationFrame(d.current),u.current=null,h.current=null,c(!1),n(null),s({lines:0,combos:0,tetrises:0,maxCombo:0}),x.current={lines:0,combos:0,tetrises:0,maxCombo:0,currentCombo:0};return}b();const p=({linesCleared:g})=>{const w=x.current;w.lines+=g,w.currentCombo++,w.currentCombo>1&&(w.combos++,w.currentCombo>w.maxCombo&&(w.maxCombo=w.currentCombo),o(!0),setTimeout(()=>o(!1),600)),g>=4&&w.tetrises++,s({lines:w.lines,combos:w.combos,tetrises:w.tetrises,maxCombo:w.maxCombo})},m=({linesCleared:g})=>{g===0&&(x.current.currentCombo=0)};return R.on(O.LINE_CLEARED,p),R.on(O.PIECE_PLACED,m),()=>{d.current&&cancelAnimationFrame(d.current),R.off(O.LINE_CLEARED,p),R.off(O.PIECE_PLACED,m),u.current=null,h.current=null}},[e,b]),v.useEffect(()=>{if(!a||!u.current||!e)return;const p=m=>{f.current||(f.current=m);let g=m-f.current;f.current=m,g>200&&(g=16);const w=u.current,k=h.current;if(!(!w||!k)){if(w.gameOver){b(),d.current=requestAnimationFrame(p);return}if(w.isPlaying&&!w.isPaused&&w.updateGame(g),y.current+=g,y.current>=gS){y.current=0;try{const j=w.getGameState(),C=k.decideNextMove(j);if(C)switch(C.action){case"left":w.movePiece("left");break;case"right":w.movePiece("right");break;case"rotate":w.rotatePiece();break;case"rotateLeft":w.rotatePieceLeft();break;case"down":w.movePiece("down");break;case"drop":w.hardDrop();break;case"hold":w.holdPiece();break}n(w.getGameState())}catch{}}d.current=requestAnimationFrame(p)}};return d.current=requestAnimationFrame(p),()=>{d.current&&cancelAnimationFrame(d.current)}},[a,e,b]);const S=v.useCallback(()=>{var p;try{return((p=u.current)==null?void 0:p.getDropPreview())||null}catch{return null}},[]);return{gameState:t,stats:r,comboFlash:i,isRunning:a,getDropPreview:S}}function vS({onClose:e}){const{gameState:t,stats:n,comboFlash:r,getDropPreview:s}=xS(!0),i=v.useMemo(()=>s(),[t,s]);if(!t)return l.jsx("div",{className:"h-screen bg-gradient-to-b from-slate-950 via-violet-950 to-slate-950 flex items-center justify-center overflow-hidden",children:l.jsx("p",{className:"text-white/50 animate-pulse",children:"Preparando IA Expert..."})});const o=t.score;return l.jsxs("div",{className:"h-screen bg-gradient-to-b from-slate-950 via-violet-950 to-slate-950 flex flex-col overflow-hidden select-none",children:[l.jsx("div",{className:"absolute inset-0 pointer-events-none overflow-hidden",children:l.jsx("div",{className:"absolute top-1/3 left-1/2 -translate-x-1/2 w-[500px] h-[500px] bg-cyan-600/10 rounded-full blur-[120px]"})}),l.jsxs("div",{className:"flex items-center justify-between px-3 py-1.5 bg-black/30 backdrop-blur-sm border-b border-white/10 shrink-0 relative z-10",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(N.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:e,className:"bg-white/15 hover:bg-white/25 text-white p-1.5 rounded-lg transition-colors",children:l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"})})}),l.jsx("span",{className:"text-sm font-bold text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-400",children:" Cat Tetris AI"})]}),l.jsxs("div",{className:`flex items-center gap-3 text-xs px-3 py-1 rounded-full transition-colors duration-300 ${r?"bg-cyan-500/30 text-cyan-300":"text-white/60"}`,children:[l.jsxs("span",{className:"font-bold",children:[n.lines," linhas"]}),l.jsxs("span",{children:["T:",n.tetrises]}),l.jsxs("span",{children:["C:",n.combos]}),l.jsxs("span",{children:["Max:",n.maxCombo]})]}),l.jsxs("div",{className:"text-xs text-white/50",children:[l.jsx("span",{className:"text-yellow-400 font-bold",children:((o==null?void 0:o.points)||0).toLocaleString()}),l.jsxs("span",{className:"ml-2",children:["Nv.",(o==null?void 0:o.level)||1]})]})]}),l.jsx(ge,{children:r&&l.jsx(N.div,{initial:{opacity:0,scale:.7,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:1.2,y:-20},transition:{duration:.4,ease:"easeOut"},className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-50 pointer-events-none",children:l.jsx("div",{className:"text-5xl font-black text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 via-blue-400 to-yellow-300 drop-shadow-[0_0_30px_rgba(34,211,238,0.7)]",children:"COMBO!"})})}),l.jsx("div",{className:"flex-1 flex items-center justify-center overflow-hidden p-2 relative z-10",children:l.jsxs("div",{className:"flex gap-2 justify-center items-start",children:[l.jsx(Un,{heldPiece:t.heldPiece,canHold:t.canHold}),l.jsx(vn,{board:t.board,currentPiece:t.currentPiece,dropPreview:i,gameOver:t.gameOver}),l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx(Hn,{pieces:t.nextPieces||[]}),l.jsx(zn,{score:(o==null?void 0:o.points)||0,level:(o==null?void 0:o.level)||1,lines:(o==null?void 0:o.lines)||0,combo:(o==null?void 0:o.combo)||0})]})]})})]})}const Lr=10,Rs=20,bh=["I","O","T","S","Z","J","L"],nn={I:"#00f5ff",O:"#ffff00",T:"#a000f0",S:"#00f000",Z:"#f00000",J:"#0000f0",L:"#ff7f00",G:"#888888"},f0=[{id:"tss",name:"T-Spin Single",emoji:"",desc:"O T-Spin mais simples  limpa 1 linha",board:Zn(18,["GGG..GGGGG","GGG...GGGG"]),queue:["T"],isDefault:!0},{id:"tsd-right",name:"T-Spin Double (Direita)",emoji:"",desc:"O clssico TSD  limpa 2 linhas",board:Zn(17,["GGG..GGGGG","GGG...GGGG","GGGG.GGGGG"]),queue:["T"],isDefault:!0},{id:"tsd-left",name:"T-Spin Double (Esquerda)",emoji:"",desc:"TSD espelhado  limpa 2 linhas",board:Zn(17,["GGGGG..GGG","GGGG...GGG","GGGGG.GGGG"]),queue:["T"],isDefault:!0},{id:"tsd-chain",name:"TSD em Cadeia",emoji:"",desc:"Dois T-Spin Doubles seguidos  Back-to-Back!",board:Zn(12,["G....GGGGG","G...GGGGGG","GGG..GGGGG","GGG...GGGG","GGGG.GGGGG","GGG..GGGGG","GGG...GGGG","GGGG.GGGGG"]),queue:["T","T"],isDefault:!0},{id:"dt-cannon",name:"DT Cannon",emoji:"",desc:"TSD + TST combinados!",board:Zn(13,["G...GGGGGG","G....GGGGG","GGGG.GGGGG","GGG..GGGGG","GGG...GGGG","GGGG.GGGGG","GGGG.GGGGG"]),queue:["T","T"],isDefault:!0},{id:"stsd",name:"Super T-Spin Double",emoji:"",desc:"STSD  usa wall kick avanado pra entrar na cavidade!",board:Zn(13,["GGG..GGGGG","GGG..GGGGG","GGG..GGGGG","GGG...GGGG","GGGGG.GGGG","GGGG..GGGG","GGGG..GGGG"]),queue:["T","T"],isDefault:!0}];function Zn(e,t){const n=[];for(let r=0;r<Rs;r++)r>=e&&r<e+t.length?n.push(t[r-e]):n.push("..........");return n}function yS(e){return e.map(t=>Array.from(t).map(n=>n==="."||n===" "?null:{type:"G",color:nn[n]||"#888",emoji:""}))}function Rl(){return Array(Rs).fill(null).map(()=>Array(Lr).fill(null))}function m0(e){return e.map(t=>t.map(n=>n?{...n}:null))}const Il="cattetris_all_setups";function p0(e){return e.map(t=>t.map(n=>n?n.type||"G":".").join(""))}function wS(e){return e.map(t=>Array.from(t).map(n=>n==="."?null:{type:n,color:nn[n]||"#888",emoji:""}))}function g0(e){return{id:e.id,name:e.name,emoji:e.emoji||"",desc:e.desc||"",board:Array.isArray(e.board)&&typeof e.board[0]=="string"?e.board:p0(e.board||[]),queue:e.queue||[],steps:e.steps||[],isDefault:e.isDefault||!1}}function bS(){try{const t=localStorage.getItem(Il);if(t){const n=JSON.parse(t);if(Array.isArray(n)&&n.length>0)return n}}catch{}const e=f0.map(g0);return localStorage.setItem(Il,JSON.stringify(e)),e}function SS(e){localStorage.setItem(Il,JSON.stringify(e))}function Sh(e){const t=JSON.stringify(e,null,2),n=new Blob([t],{type:"application/json"}),r=URL.createObjectURL(n),s=document.createElement("a");s.href=r,s.download="cat-tetris-setups.json",s.click(),URL.revokeObjectURL(r)}function jS(e){return new Promise((t,n)=>{const r=new FileReader;r.onload=s=>{try{const i=JSON.parse(s.target.result);if(!Array.isArray(i))throw new Error("not array");const o=i.filter(a=>a.name&&a.board&&Array.isArray(a.board)&&Array.isArray(a.queue));t(o.map(a=>({...a,id:a.id||"imp_"+Date.now()+"_"+Math.random().toString(36).slice(2,6)})))}catch(i){n(i)}},r.onerror=n,r.readAsText(e)})}function kS(e,t){const n=new $n(new Wn,new qn,null,new yn);n.initializeGame(),n.isPlaying=!0;for(let r=0;r<Rs;r++)for(let s=0;s<Lr;s++)e[r][s]&&n.board.setCell(s,r,e[r][s]);if(t.length>0){const r=s=>{const i=Dt[s],o=s==="I"?{x:3,y:-2}:{x:3,y:0};return new jt(s,i.shape,i.color,i.emoji,o,!1,0)};for(n.currentPiece=r(t[0]),n.nextPieces=t.slice(1).map(r);n.nextPieces.length<3;)n.nextPieces.push(n.pieceFactory.createRandomPiece())}return n._markDirty(),n}function CS({onExit:e}){const[t,n]=v.useState("menu"),[r,s]=v.useState(null),[i,o]=v.useState(()=>bS()),[a,c]=v.useState(null),[u,h]=v.useState(null),[d,f]=v.useState(Rl),[y,x]=v.useState([]),[b,S]=v.useState(""),[p,m]=v.useState(""),[g,w]=v.useState(""),[k,j]=v.useState("G"),C=v.useRef(null),P=v.useCallback(_=>{o(_),SS(_)},[]),E=v.useCallback(_=>{s(_),n("play")},[]),M=v.useCallback(()=>{s({id:"custom_preview",name:b||"Setup Personalizado",emoji:p,board:null,queue:[...y],_rawBoard:m0(d)}),n("play")},[d,y,b,p]),B=v.useCallback(()=>{c(null),f(Rl()),x([]),S(""),m(""),w(""),n("editor")},[]),q=v.useCallback(_=>{c(_),f(wS(_.board)),x([..._.queue]),S(_.name),m(_.emoji||""),w(_.desc||""),n("editor")},[]),W=v.useCallback(()=>{const _=b.trim()||"Meu Setup",L=p0(d);if(a){const D=i.map(V=>V.id===a.id?{...V,name:_,emoji:p,desc:g,board:L,queue:[...y]}:V);P(D)}else{const D={id:"custom_"+Date.now(),name:_,emoji:p,desc:g,board:L,queue:[...y],steps:[],isDefault:!1};P([...i,D])}n("menu")},[d,y,b,p,g,a,i,P]),K=v.useCallback(_=>{P(i.filter(L=>L.id!==_))},[i,P]),Q=v.useCallback(()=>{const _=f0.map(g0),L=i.filter(D=>!D.isDefault);P([..._,...L])},[i,P]),F=v.useCallback(async _=>{var D;const L=(D=_.target.files)==null?void 0:D[0];if(L){try{const V=await jS(L);if(V.length===0){h("Nenhum setup vlido no arquivo.");return}P([...i,...V]),h(`${V.length} setup(s) importado(s)!`),setTimeout(()=>h(null),3e3)}catch{h("Erro ao ler o arquivo JSON."),setTimeout(()=>h(null),3e3)}_.target.value=""}},[i,P]),H=v.useCallback(()=>{i.length!==0&&Sh(i)},[i]),T=v.useCallback((_,L)=>{const D=i.findIndex(Pe=>Pe.id===_);if(D<0)return;const V=D+L;if(V<0||V>=i.length)return;const ve=[...i];[ve[D],ve[V]]=[ve[V],ve[D]],P(ve)},[i,P]);return t==="play"&&r?l.jsx(ES,{template:r,onBack:()=>n("menu"),onExit:e}):t==="editor"?l.jsx(NS,{board:d,setBoard:f,queue:y,setQueue:x,name:b,setName:S,emoji:p,setEmoji:m,desc:g,setDesc:w,selectedColor:k,setSelectedColor:j,onPlay:M,onSave:W,isEditing:!!a,onBack:()=>n("menu"),onExit:e}):l.jsxs("div",{className:"h-screen bg-gradient-to-b from-slate-900 via-indigo-950 to-slate-900 flex flex-col items-center p-4 overflow-auto",children:[l.jsxs("div",{className:"flex justify-between items-center w-full max-w-lg mb-4",children:[l.jsx("h1",{className:"text-2xl font-bold text-white",children:" Modo Criador"}),l.jsx("button",{onClick:e,className:"bg-red-600 hover:bg-red-700 text-white px-3 py-1.5 rounded-lg text-sm font-bold",children:" Voltar"})]}),l.jsx("p",{className:"text-white/50 text-sm mb-4 text-center max-w-md",children:"Crie, edite e organize seus setups de treino!"}),l.jsxs("div",{className:"flex gap-2 w-full max-w-lg mb-4 flex-wrap justify-center",children:[l.jsxs(N.button,{whileHover:{scale:1.03},whileTap:{scale:.97},onClick:B,className:"flex-1 min-w-[140px] p-3 rounded-xl bg-gradient-to-r from-violet-600/30 to-fuchsia-600/30 hover:from-violet-600/40 hover:to-fuchsia-600/40 border border-violet-500/30 hover:border-violet-500/50 transition-all flex items-center gap-3",children:[l.jsx("span",{className:"text-2xl",children:""}),l.jsxs("div",{className:"text-left",children:[l.jsx("div",{className:"text-white font-bold text-sm",children:"Criar Novo"}),l.jsx("div",{className:"text-white/40 text-[10px]",children:"Monte do zero"})]})]}),l.jsx("button",{onClick:()=>{var _;return(_=C.current)==null?void 0:_.click()},className:"bg-green-600/40 hover:bg-green-600/60 text-white px-4 py-3 rounded-xl text-xs font-bold transition-colors border border-green-500/20",children:" Importar"}),l.jsx("button",{onClick:H,className:"bg-blue-600/40 hover:bg-blue-600/60 text-white px-4 py-3 rounded-xl text-xs font-bold transition-colors border border-blue-500/20",disabled:i.length===0,children:" Exportar"}),l.jsx("button",{onClick:Q,className:"bg-orange-600/40 hover:bg-orange-600/60 text-white px-4 py-3 rounded-xl text-xs font-bold transition-colors border border-orange-500/20",children:" Resetar Padro"})]}),l.jsx("input",{ref:C,type:"file",accept:".json",onChange:F,className:"hidden"}),u&&l.jsx("div",{className:"w-full max-w-lg mb-3 px-4 py-2 rounded-lg bg-blue-500/20 border border-blue-500/30 text-blue-200 text-xs text-center font-medium",children:u}),l.jsxs("div",{className:"text-white/40 text-xs font-semibold uppercase tracking-wide mb-2",children:["Todos os Setups (",i.length,")"]}),l.jsxs("div",{className:"grid grid-cols-1 gap-2 w-full max-w-lg pb-8",children:[i.map((_,L)=>l.jsx(PS,{setup:_,onPlay:()=>E(_),onEdit:()=>q(_),onDelete:()=>K(_.id),onExport:()=>Sh([_]),onMoveUp:L>0?()=>T(_.id,-1):null,onMoveDown:L<i.length-1?()=>T(_.id,1):null},_.id)),i.length===0&&l.jsx("div",{className:"text-center py-8 text-white/30 text-sm",children:'Nenhum setup. Clique em "Criar Novo" ou "Resetar Padro".'})]})]})}function PS({setup:e,onPlay:t,onEdit:n,onDelete:r,onExport:s,onMoveUp:i,onMoveDown:o}){const[a,c]=v.useState(!1),u=e.isDefault;return l.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl border transition-all ${u?"bg-white/[0.04] border-white/[0.06] hover:bg-white/[0.07]":"bg-violet-500/[0.06] border-violet-500/[0.12] hover:bg-violet-500/[0.1]"}`,children:[l.jsx("div",{className:"flex flex-col items-center min-w-[44px]",children:l.jsx(TS,{boardRows:e.board})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-center gap-1.5",children:[l.jsx("span",{className:"text-lg",children:e.emoji||""}),l.jsx("span",{className:"text-white font-bold text-sm truncate",children:e.name}),u&&l.jsx("span",{className:"text-[9px] px-1.5 py-0.5 rounded bg-blue-500/20 text-blue-300 border border-blue-500/20 shrink-0",children:"padro"})]}),e.desc&&l.jsx("p",{className:"text-white/40 text-[11px] mt-0.5 leading-tight truncate",children:e.desc}),l.jsxs("div",{className:"flex items-center gap-1.5 mt-1",children:[l.jsx("span",{className:"text-white/30 text-[10px]",children:"Peas:"}),(e.queue||[]).map((h,d)=>l.jsx("span",{className:"inline-block w-3.5 h-3.5 rounded",style:{backgroundColor:nn[h]},title:h},d)),(!e.queue||e.queue.length===0)&&l.jsx("span",{className:"text-white/20 text-[10px]",children:"aleatria"})]})]}),l.jsxs("div",{className:"flex flex-col gap-1 shrink-0",children:[l.jsxs("div",{className:"flex gap-1",children:[l.jsx("button",{onClick:t,className:"bg-emerald-600 hover:bg-emerald-500 text-white px-2.5 py-1 rounded text-[10px] font-bold transition-colors",title:"Jogar",children:""}),l.jsx("button",{onClick:n,className:"bg-blue-600 hover:bg-blue-500 text-white px-2.5 py-1 rounded text-[10px] font-bold transition-colors",title:"Editar",children:""}),l.jsx("button",{onClick:s,className:"bg-slate-600 hover:bg-slate-500 text-white px-2.5 py-1 rounded text-[10px] font-bold transition-colors",title:"Exportar",children:""})]}),l.jsxs("div",{className:"flex gap-1",children:[i&&l.jsx("button",{onClick:i,className:"bg-white/10 hover:bg-white/20 text-white px-2 py-1 rounded text-[10px] font-bold flex-1",title:"Mover pra cima",children:""}),o&&l.jsx("button",{onClick:o,className:"bg-white/10 hover:bg-white/20 text-white px-2 py-1 rounded text-[10px] font-bold flex-1",title:"Mover pra baixo",children:""})]}),a?l.jsxs("div",{className:"flex gap-1",children:[l.jsx("button",{onClick:()=>{r(),c(!1)},className:"bg-red-600 hover:bg-red-500 text-white px-2 py-1 rounded text-[9px] font-bold flex-1",children:"Sim"}),l.jsx("button",{onClick:()=>c(!1),className:"bg-slate-600 hover:bg-slate-500 text-white px-2 py-1 rounded text-[9px] font-bold flex-1",children:"No"})]}):l.jsx("button",{onClick:()=>c(!0),className:"bg-red-700/40 hover:bg-red-700/70 text-red-300 px-2.5 py-1 rounded text-[10px] font-bold transition-colors w-full",children:" Excluir"})]})]})}function TS({boardRows:e}){const n=e.findIndex(s=>s!==".........."),r=e.slice(Math.max(n>=0?n:Rs-4,Rs-6));return l.jsx("div",{className:"bg-black/40 rounded border border-white/10 p-0.5",children:r.map((s,i)=>l.jsx("div",{className:"flex",children:Array.from(s).map((o,a)=>l.jsx("div",{style:{width:3,height:3,backgroundColor:o!=="."?"#888":"transparent"}},a))},i))})}function ES({template:e,onBack:t,onExit:n}){var y,x,b,S,p,m,g,w,k,j;const[r,s]=v.useState(null),[i,o]=v.useState(0),a=v.useRef(null),c=v.useRef(null),u=v.useRef(0),h=v.useMemo(()=>e._rawBoard?m0(e._rawBoard):yS(e.board),[e]),d=v.useCallback(()=>{c.current&&cancelAnimationFrame(c.current);const C=kS(h,e.queue);a.current=C,s(C.getGameState()),u.current=0,o(P=>P+1)},[h,e.queue]);v.useEffect(()=>{d()},[d]),v.useEffect(()=>{const C=P=>{u.current||(u.current=P);const E=P-u.current;u.current=P;const M=a.current;M&&(!M.gameOver&&!M.isPaused&&M.updateGame(E),M.isDirty&&(s(M.getGameState()),M.clearDirty()),c.current=requestAnimationFrame(C))};return c.current=requestAnimationFrame(C),()=>{c.current&&cancelAnimationFrame(c.current)}},[i]),v.useEffect(()=>{const C=P=>{const E=a.current;if(!(!E||E.gameOver))switch(P.key){case"ArrowLeft":P.preventDefault(),E.movePiece("left");break;case"ArrowRight":P.preventDefault(),E.movePiece("right");break;case"ArrowDown":P.preventDefault(),E.movePiece("down");break;case"ArrowUp":P.preventDefault(),E.rotatePiece();break;case"z":case"Z":E.rotatePieceLeft();break;case"c":case"C":case"Shift":E.holdPiece();break;case" ":P.preventDefault(),E.hardDrop();break;case"r":case"R":d();break}};return window.addEventListener("keydown",C),()=>window.removeEventListener("keydown",C)},[d]);const f=v.useMemo(()=>{var C;if(!(r!=null&&r.currentPiece)||r!=null&&r.gameOver)return null;try{return(C=a.current)==null?void 0:C.getDropPreview()}catch{return null}},[(x=(y=r==null?void 0:r.currentPiece)==null?void 0:y.position)==null?void 0:x.x,(S=(b=r==null?void 0:r.currentPiece)==null?void 0:b.position)==null?void 0:S.y,(p=r==null?void 0:r.currentPiece)==null?void 0:p.type,(m=r==null?void 0:r.currentPiece)==null?void 0:m.rotationState]);return l.jsxs("div",{className:"h-screen bg-gradient-to-b from-slate-900 via-indigo-950 to-slate-900 flex flex-col items-center p-2 overflow-hidden",children:[l.jsxs("div",{className:"flex justify-between items-center w-full max-w-xl mb-2",children:[l.jsxs("h1",{className:"text-lg font-bold text-white truncate",children:[e.emoji," ",e.name]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:d,className:"bg-yellow-600 hover:bg-yellow-700 text-white px-3 py-1 rounded-lg text-xs font-bold",children:" Replay"}),l.jsx("button",{onClick:t,className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded-lg text-xs font-bold",children:" Voltar"}),l.jsx("button",{onClick:n,className:"bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded-lg text-xs font-bold",children:"Sair"})]})]}),r&&l.jsxs("div",{className:"flex gap-3 items-start justify-center",children:[l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx(Un,{heldPiece:r.heldPiece,canHold:r.canHold}),l.jsxs("div",{className:"text-white/50 text-[10px] leading-tight",children:[" mover",l.jsx("br",{})," girar",l.jsx("br",{}),"C hold",l.jsx("br",{}),"Espao drop",l.jsx("br",{}),"R replay"]})]}),l.jsx(vn,{board:r.board,currentPiece:r.currentPiece,dropPreview:f,gameOver:r.gameOver}),l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx(Hn,{pieces:r.nextPieces||[]}),l.jsx(zn,{score:((g=r.score)==null?void 0:g.points)||0,level:((w=r.score)==null?void 0:w.level)||1,lines:((k=r.score)==null?void 0:k.lines)||0,combo:((j=r.score)==null?void 0:j.combo)||0})]})]}),(r==null?void 0:r.gameOver)&&l.jsxs("div",{className:"mt-4 flex gap-3",children:[l.jsx("button",{onClick:d,className:"bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg font-bold text-lg",children:" Tentar Novamente"}),l.jsx("button",{onClick:t,className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-bold text-lg",children:" Voltar"})]})]})}function NS({board:e,setBoard:t,queue:n,setQueue:r,name:s,setName:i,emoji:o,setEmoji:a,desc:c,setDesc:u,selectedColor:h,setSelectedColor:d,onPlay:f,onSave:y,isEditing:x,onBack:b,onExit:S}){const p=v.useCallback((w,k)=>{t(j=>{const C=j.map(P=>[...P]);return C[k][w]=C[k][w]?null:{type:h,color:nn[h],emoji:""},C})},[h,t]),m=v.useCallback((w,k)=>{t(j=>{const C=j.map(P=>[...P]);for(let P=0;P<Lr;P++)C[w][P]=P===k?null:{type:"G",color:nn.G,emoji:""};return C})},[t]),g=v.useCallback(w=>{t(k=>{const j=k.map(C=>[...C]);for(let C=0;C<Lr;C++)j[w][C]=null;return j})},[t]);return l.jsxs("div",{className:"h-screen bg-gradient-to-b from-slate-900 via-indigo-950 to-slate-900 flex flex-col items-center p-3 overflow-auto",children:[l.jsxs("div",{className:"flex justify-between items-center w-full max-w-2xl mb-3",children:[l.jsx("h1",{className:"text-xl font-bold text-white",children:x?" Editar Setup":" Criar Meu Setup"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:b,className:"bg-slate-600 hover:bg-slate-700 text-white px-3 py-1 rounded-lg text-sm font-bold",children:" Voltar"}),l.jsx("button",{onClick:S,className:"bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded-lg text-sm font-bold",children:"Sair"})]})]}),l.jsxs("div",{className:"flex gap-4 items-start justify-center flex-wrap max-w-2xl",children:[l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx("div",{className:"text-white/60 text-xs font-semibold mb-1",children:"TABULEIRO (clique para editar)"}),l.jsx(_S,{board:e,onToggle:p,onFillRow:m,onClearRow:g}),l.jsxs("div",{className:"flex gap-1 items-center mt-1",children:[l.jsx("span",{className:"text-white/50 text-xs mr-1",children:"Cor:"}),bh.map(w=>l.jsx("button",{onClick:()=>d(w),className:`w-6 h-6 rounded border-2 transition-all ${h===w?"border-white scale-110":"border-white/20"}`,style:{backgroundColor:nn[w]},title:w},w)),l.jsx("button",{onClick:()=>d("G"),className:`w-6 h-6 rounded border-2 transition-all ${h==="G"?"border-white scale-110":"border-white/20"}`,style:{backgroundColor:nn.G},title:"Cinza"})]}),l.jsx("button",{onClick:()=>t(Rl()),className:"bg-red-700/60 hover:bg-red-700 text-white px-3 py-1 rounded text-xs font-semibold mt-1 w-fit",children:"Limpar Tudo"})]}),l.jsxs("div",{className:"flex flex-col gap-3 min-w-[160px]",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-white/60 text-xs font-semibold mb-2",children:"FILA DE PEAS"}),l.jsx("div",{className:"flex flex-wrap gap-1 mb-2",children:bh.map(w=>l.jsx("button",{onClick:()=>r(k=>[...k,w]),className:"flex items-center justify-center w-9 h-9 rounded-lg bg-white/10 hover:bg-white/20 border border-white/10 transition-all",title:`Adicionar ${w}`,children:l.jsx(jh,{type:w})},w))}),l.jsxs("div",{className:"flex flex-col gap-1 min-h-[60px] bg-black/30 rounded-lg p-2",children:[n.length===0?l.jsxs("span",{className:"text-white/30 text-xs text-center py-2",children:["Clique nas peas acima",l.jsx("br",{}),"(vazio = fila aleatria)"]}):l.jsx("div",{className:"flex flex-wrap gap-1",children:n.map((w,k)=>l.jsxs("button",{onClick:()=>r(j=>j.filter((C,P)=>P!==k)),className:"flex items-center justify-center w-8 h-8 rounded bg-white/10 hover:bg-red-500/30 border border-white/10 transition-all group relative",title:"Remover",children:[l.jsx(jh,{type:w,size:10}),l.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-[8px] rounded-full w-3 h-3 flex items-center justify-center opacity-0 group-hover:opacity-100",children:""})]},k))}),n.length>0&&l.jsx("button",{onClick:()=>r([]),className:"text-red-400 text-[10px] mt-1 hover:text-red-300",children:"Limpar fila"})]})]}),l.jsxs("div",{children:[l.jsx("div",{className:"text-white/60 text-xs font-semibold mb-2",children:"DETALHES"}),l.jsxs("div",{className:"flex gap-2 mb-2",children:[l.jsx("input",{type:"text",value:o,onChange:w=>a(w.target.value),placeholder:"",maxLength:4,className:"w-14 px-2 py-2 rounded-lg bg-black/30 border border-white/10 text-white text-center text-lg focus:border-violet-500/50 focus:outline-none",title:"Emoji"}),l.jsx("input",{type:"text",value:s,onChange:w=>i(w.target.value),placeholder:"Nome do setup",maxLength:40,className:"flex-1 px-3 py-2 rounded-lg bg-black/30 border border-white/10 text-white text-sm placeholder-white/20 focus:border-violet-500/50 focus:outline-none"})]}),l.jsx("input",{type:"text",value:c,onChange:w=>u(w.target.value),placeholder:"Descrio (opcional)",maxLength:80,className:"w-full px-3 py-2 rounded-lg bg-black/30 border border-white/10 text-white text-xs placeholder-white/20 focus:border-violet-500/50 focus:outline-none mb-3"})]}),l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx("button",{onClick:y,className:"w-full py-3 rounded-xl bg-gradient-to-r from-violet-500 to-purple-500 hover:from-violet-400 hover:to-purple-400 text-white font-bold text-base shadow-lg shadow-violet-500/25 transition-all active:scale-95",children:x?" Salvar Alteraes":" Salvar Setup"}),l.jsx("button",{onClick:f,className:"w-full py-2.5 rounded-xl bg-gradient-to-r from-emerald-500 to-green-500 hover:from-emerald-400 hover:to-green-400 text-white font-bold text-sm shadow-lg shadow-emerald-500/25 transition-all active:scale-95",children:" Testar (sem salvar)"})]})]})]})]})}function _S({board:e,onToggle:t,onFillRow:n,onClearRow:r}){const[s,i]=v.useState(!1),[o,a]=v.useState(null),c=22,u=(f,y)=>{i(!0),a(e[y][f]?"erase":"place"),t(f,y)},h=(f,y)=>{s&&(o==="place"&&!e[y][f]&&t(f,y),o==="erase"&&e[y][f]&&t(f,y))},d=()=>{i(!1),a(null)};return v.useEffect(()=>(window.addEventListener("pointerup",d),()=>window.removeEventListener("pointerup",d)),[]),l.jsx("div",{className:"relative bg-black/50 rounded-lg border border-white/10 select-none",style:{width:c*Lr+2,padding:1},onContextMenu:f=>f.preventDefault(),children:e.map((f,y)=>l.jsxs("div",{className:"flex",style:{height:c},children:[f.map((x,b)=>l.jsx("div",{onPointerDown:()=>u(b,y),onPointerEnter:()=>h(b,y),className:"cursor-pointer border border-white/[0.04] hover:border-white/20 transition-colors",style:{width:c,height:c,backgroundColor:x?x.color:"transparent",opacity:x?.85:1}},b)),l.jsx("button",{onClick:()=>f.some(x=>x)?r(y):n(y,Math.floor(Math.random()*Lr)),className:"ml-0.5 text-white/20 hover:text-white/60 text-[9px] w-4 flex items-center justify-center",title:f.some(x=>x)?"Limpar linha":"Preencher linha",children:f.some(x=>x)?"":"+"})]},y))})}function jh({type:e,size:t=12}){var u;const n=(u=Dt[e])==null?void 0:u.shape;if(!n)return null;const r=nn[e],s=n.filter(h=>h.some(d=>d));let i=1/0,o=-1;for(const h of s)for(let d=0;d<h.length;d++)h[d]&&(i=Math.min(i,d),o=Math.max(o,d));if(o<0)return null;const a=s.map(h=>h.slice(i,o+1)),c=o-i+1;return l.jsx("div",{className:"flex flex-col items-center",children:a.map((h,d)=>l.jsx("div",{className:"flex",children:Array.from({length:c},(f,y)=>l.jsx("div",{style:{width:t,height:t,backgroundColor:h[y]?r:"transparent",borderRadius:1}},y))},d))})}function x0(){const[e,t]=v.useState([]),[n,r]=v.useState(null),[s,i]=v.useState(!0);v.useEffect(()=>{try{const u=G.resolve("shopService");t(u.getAllThemes()),r(u.getEquippedTheme()),i(!1);const h=f=>{r(f.detail.theme),t(u.getAllThemes())},d=()=>{t(u.getAllThemes())};return window.addEventListener("themeEquipped",h),window.addEventListener("currencyUpdated",d),()=>{window.removeEventListener("themeEquipped",h),window.removeEventListener("currencyUpdated",d)}}catch{i(!1)}},[]);const o=v.useCallback(u=>{try{const h=G.resolve("shopService"),d=h.purchaseTheme(u);return d.success&&(t(h.getAllThemes()),window.dispatchEvent(new Event("currencyUpdated"))),d}catch(h){return{success:!1,error:h.message}}},[]),a=v.useCallback(u=>{try{const h=G.resolve("shopService"),d=h.equipTheme(u);return d.success&&(r(d.theme),t(h.getAllThemes())),d}catch(h){return{success:!1,error:h.message}}},[]),c=v.useCallback(()=>{try{return G.resolve("shopService").getStats()}catch{return null}},[]);return{themes:e,equippedTheme:n,loading:s,purchaseTheme:o,equipTheme:a,getStats:c}}function AS({onClose:e}){var y,x;const{themes:t,equippedTheme:n,loading:r,purchaseTheme:s,equipTheme:i,getStats:o}=x0(),{currency:a}=c0(),[c,u]=v.useState(null),h=o();if(r)return l.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",children:l.jsx("div",{className:"text-white text-lg",children:"Carregando loja..."})});if(!t||t.length===0)return l.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-red-900/90 text-white p-6 rounded-lg",children:[l.jsx("p",{className:"text-xl",children:" Erro ao carregar temas"}),l.jsx("button",{onClick:e,className:"mt-4 bg-white text-black px-4 py-2 rounded",children:"Fechar"})]})});const d=b=>{const S=s(b);S.success?gr(` ${S.theme.name} comprado com sucesso!`,"success"):gr(` ${S.error}`,"error")},f=b=>{const S=i(b);S.success?gr(` ${S.theme.name} equipado!`,"success"):gr(` ${S.error}`,"error")};return r?l.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",children:l.jsx("div",{className:"text-white text-xl",children:"Carregando loja..."})}):l.jsx(N.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:e,children:l.jsxs(N.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},className:"bg-gradient-to-br from-pink-900/95 to-purple-900/95 rounded-2xl p-6 max-w-6xl w-full max-h-[90vh] overflow-y-auto border-2 border-white/20 shadow-2xl",onClick:b=>b.stopPropagation(),children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-3xl font-bold text-white flex items-center gap-2",children:" Loja de Temas"}),l.jsx("p",{className:"text-white/60 text-sm mt-1",children:"Personalize suas peas de Tetris"})]}),l.jsx("button",{onClick:e,className:"text-white/60 hover:text-white text-2xl transition-colors",children:""})]}),l.jsx("div",{className:"bg-black/30 rounded-lg p-4 mb-6",children:l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-2xl font-bold text-yellow-400 flex items-center justify-center gap-1",children:[" ",((y=a==null?void 0:a.fish)==null?void 0:y.toLocaleString())||0]}),l.jsx("div",{className:"text-white/60 text-sm",children:"Seus Peixes"})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-2xl font-bold text-white",children:[h==null?void 0:h.ownedThemes,"/",h==null?void 0:h.totalThemes]}),l.jsx("div",{className:"text-white/60 text-sm",children:"Temas Desbloqueados"})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-2xl font-bold text-green-400",children:[Math.floor((h==null?void 0:h.ownedThemes)/(h==null?void 0:h.totalThemes)*100),"%"]}),l.jsx("div",{className:"text-white/60 text-sm",children:"Coleo"})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-2xl font-bold text-purple-400 flex items-center justify-center gap-1",children:[" ",((x=h==null?void 0:h.totalSpent)==null?void 0:x.toLocaleString())||0]}),l.jsx("div",{className:"text-white/60 text-sm",children:"Gasto Total"})]})]})}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map((b,S)=>{const p=!b.owned&&(a==null?void 0:a.fish)>=b.price;return l.jsxs(N.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:S*.05},className:`bg-black/40 rounded-lg p-4 border-2 relative ${b.equipped?"border-green-500 shadow-lg shadow-green-500/30":b.owned?"border-white/20":"border-white/10"}`,children:[b.equipped&&l.jsx("div",{className:"absolute top-2 right-2 bg-green-600 text-white text-xs px-2 py-1 rounded-full font-bold",children:" Equipado"}),b.premium&&l.jsx("div",{className:"absolute top-2 left-2 bg-gradient-to-r from-yellow-400 to-orange-500 text-white text-xs px-2 py-1 rounded-full font-bold",children:" Premium"}),l.jsxs("div",{className:"mb-4",children:[l.jsx("h3",{className:"text-white font-bold text-lg mb-1",children:b.name}),l.jsx("p",{className:"text-white/60 text-sm",children:b.description})]}),l.jsx("div",{className:"bg-black/30 rounded-lg p-3 mb-4",children:l.jsx("div",{className:"flex justify-center gap-2 flex-wrap",children:Object.entries(b.pieces).map(([m,g])=>l.jsx("div",{className:"w-12 h-12 rounded flex items-center justify-center text-2xl border border-white/10",style:{backgroundColor:g.color},children:g.emoji},m))})}),l.jsxs("div",{className:"flex gap-2",children:[b.owned?b.equipped?l.jsx("button",{disabled:!0,className:"flex-1 bg-green-600 text-white py-2 px-4 rounded-lg font-bold cursor-default",children:"Em Uso"}):l.jsx("button",{onClick:()=>f(b.id),className:"flex-1 bg-blue-600 hover:bg-blue-500 text-white py-2 px-4 rounded-lg font-bold transition-colors",children:"Equipar"}):l.jsx("button",{onClick:()=>d(b.id),disabled:!p,className:`flex-1 py-2 px-4 rounded-lg font-bold transition-colors ${p?"bg-yellow-600 hover:bg-yellow-500 text-white":"bg-gray-600 text-white/40 cursor-not-allowed"}`,children:b.default?"Gratuito":l.jsxs(l.Fragment,{children:[" ",b.price.toLocaleString()]})}),l.jsx("button",{onClick:()=>u(b),className:"bg-purple-600 hover:bg-purple-500 text-white py-2 px-4 rounded-lg font-bold transition-colors",children:""})]})]},b.id)})}),l.jsx(ge,{children:c&&l.jsx(N.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/90 flex items-center justify-center z-[60]",onClick:()=>u(null),children:l.jsxs(N.div,{initial:{scale:.8},animate:{scale:1},exit:{scale:.8},className:"bg-gray-900 rounded-xl p-6 max-w-md",onClick:b=>b.stopPropagation(),children:[l.jsx("h3",{className:"text-white font-bold text-2xl mb-4",children:c.name}),l.jsx("div",{className:"grid grid-cols-4 gap-3 mb-4",children:Object.entries(c.pieces).map(([b,S])=>l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"w-16 h-16 rounded-lg flex items-center justify-center text-3xl mb-2 border-2 border-white/20",style:{backgroundColor:S.color},children:S.emoji}),l.jsx("div",{className:"text-white/60 text-xs",children:b})]},b))}),l.jsx("button",{onClick:()=>u(null),className:"w-full bg-purple-600 hover:bg-purple-500 text-white py-2 rounded-lg font-bold",children:"Fechar"})]})})})]})})}function v0(){const[e,t]=v.useState([]),[n,r]=v.useState(null),[s,i]=v.useState(null),[o,a]=v.useState(!0);v.useEffect(()=>{try{const d=G.resolve("gameModesService");t(d.getAllModes()),r(d.getCurrentMode()),i(d.getAllStats()),a(!1)}catch{a(!1)}},[]);const c=v.useCallback(d=>{try{const f=G.resolve("gameModesService"),y=f.setMode(d);return y&&(r(f.getCurrentMode()),window.dispatchEvent(new CustomEvent("gameModeChanged",{detail:{mode:f.getCurrentMode()}}))),y}catch{return!1}},[]),u=v.useCallback(d=>{try{return G.resolve("gameModesService").getModeStats(d)}catch{return null}},[]),h=v.useCallback((d,f)=>{try{const y=G.resolve("gameModesService");y.updateStats(d,f),i(y.getAllStats())}catch{}},[]);return{modes:e,currentMode:n,modeStats:s,loading:o,selectMode:c,getModeStats:u,updateStats:h}}function MS({onClose:e,onStartGame:t}){const{modes:n,currentMode:r,modeStats:s,loading:i,selectMode:o}=v0(),a=u=>{o(u),setTimeout(()=>{t(),e()},300)},c=u=>{const h=Math.floor(u/60),d=u%60;return`${h}:${d.toString().padStart(2,"0")}`};return i?l.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",children:l.jsx("div",{className:"text-white text-xl",children:"Carregando modos..."})}):!n||n.length===0?l.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-red-900/90 text-white p-6 rounded-lg",children:[l.jsx("p",{className:"text-xl",children:" Erro ao carregar modos"}),l.jsx("button",{onClick:e,className:"mt-4 bg-white text-black px-4 py-2 rounded",children:"Fechar"})]})}):l.jsx(N.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:e,children:l.jsxs(N.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},className:"bg-gradient-to-br from-blue-900/95 to-indigo-900/95 rounded-2xl p-6 max-w-4xl w-full max-h-[90vh] overflow-y-auto border-2 border-white/20 shadow-2xl",onClick:u=>u.stopPropagation(),children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-3xl font-bold text-white flex items-center gap-2",children:" Modos de Jogo"}),l.jsx("p",{className:"text-white/60 text-sm mt-1",children:"Escolha seu desafio"})]}),l.jsx("button",{onClick:e,className:"text-white/60 hover:text-white text-2xl transition-colors",children:""})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:n.map((u,h)=>{const d=s[u.id],f=(r==null?void 0:r.id)===u.id;return l.jsxs(N.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:h*.1},className:`bg-black/40 rounded-lg p-5 border-2 cursor-pointer transition-all hover:scale-105 ${f?"border-green-500 shadow-lg shadow-green-500/30":"border-white/10 hover:border-white/30"}`,onClick:()=>a(u.id),children:[f&&l.jsx("div",{className:"absolute top-3 right-3 bg-green-600 text-white text-xs px-2 py-1 rounded-full font-bold",children:" Selecionado"}),l.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[l.jsx("div",{className:"text-5xl",children:u.icon}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"text-white font-bold text-xl",children:u.name}),l.jsx("p",{className:"text-white/60 text-sm",children:u.description})]})]}),l.jsx("div",{className:"bg-black/30 rounded-lg p-3 mb-3",children:l.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[u.rules.lineGoal&&l.jsxs("div",{className:"text-white/80",children:[" Meta: ",u.rules.lineGoal," linhas"]}),u.rules.timeLimit&&l.jsxs("div",{className:"text-white/80",children:[" Tempo: ",c(u.rules.timeLimit)]}),u.rules.gameOver!==void 0&&l.jsx("div",{className:"text-white/80",children:u.rules.gameOver?" Game Over":" Sem Game Over"}),u.rules.speedIncrease!==void 0&&l.jsx("div",{className:"text-white/80",children:u.rules.speedIncrease?" Velocidade aumenta":" Velocidade fixa"}),u.rules.startLevel&&l.jsxs("div",{className:"text-white/80",children:[" Incio: Nvel ",u.rules.startLevel]}),u.rules.relaxed&&l.jsx("div",{className:"text-white/80",children:" Modo relaxado"})]})}),d&&d.gamesPlayed>0&&l.jsxs("div",{className:"bg-black/30 rounded-lg p-3",children:[l.jsx("div",{className:"text-white/60 text-xs mb-2",children:"Seus recordes:"}),l.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-yellow-400 font-bold",children:d.bestScore.toLocaleString()}),l.jsx("div",{className:"text-white/40 text-xs",children:"Melhor Pontuao"})]}),u.rules.lineGoal&&d.bestTime>0&&l.jsxs("div",{children:[l.jsx("div",{className:"text-green-400 font-bold",children:c(d.bestTime)}),l.jsx("div",{className:"text-white/40 text-xs",children:"Melhor Tempo"})]}),!u.rules.lineGoal&&l.jsxs("div",{children:[l.jsx("div",{className:"text-blue-400 font-bold",children:d.bestLines}),l.jsx("div",{className:"text-white/40 text-xs",children:"Mais Linhas"})]})]}),l.jsxs("div",{className:"text-white/40 text-xs mt-2",children:[d.gamesPlayed," partidas jogadas"]})]}),(!d||d.gamesPlayed===0)&&l.jsx("div",{className:"bg-black/30 rounded-lg p-3 text-center",children:l.jsx("div",{className:"text-white/40 text-sm",children:" Nenhum recorde ainda"})}),l.jsx(N.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"w-full mt-3 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-500 hover:to-emerald-500 text-white font-bold py-3 rounded-lg transition-colors",children:" Jogar"})]},u.id)})})]})})}function DS(){const[e,t]=v.useState(null),[n,r]=v.useState([]),[s,i]=v.useState(null),[o,a]=v.useState(null);v.useEffect(()=>{try{const b=G.resolve("multiplayerService");a(b.getStats())}catch{}},[]);const c=v.useCallback((b,S)=>{try{const p=G.resolve("multiplayerService"),m=p.startLocalMatch(b,S);return t(m.mode),r(m.players),i(p.getMatchState()),m}catch{return null}},[]),u=v.useCallback((b,S)=>{try{const p=G.resolve("multiplayerService"),m=p.startAIMatch(b,S);return t(m.mode),r(m.players),i(p.getMatchState()),m}catch{return null}},[]),h=v.useCallback((b,S)=>{try{const p=G.resolve("multiplayerService"),m=p.startAIvsAIMatch(b,S);return t(m.mode),r(m.players),i(p.getMatchState()),m}catch{return null}},[]),d=v.useCallback((b,S)=>{try{const p=G.resolve("multiplayerService");p.updatePlayerState(b,S);const m=p.getMatchState();return i(m),r(m.players),m}catch{return null}},[]),f=v.useCallback(()=>{try{const b=G.resolve("multiplayerService"),S=b.endMatch();return t(null),r([]),i(null),a(b.getStats()),S}catch{return null}},[]),y=v.useCallback(()=>{try{return G.resolve("multiplayerService").getAvailableModes()}catch{return[]}},[]),x=v.useCallback(()=>{try{const b=G.resolve("multiplayerService");a(b.getStats())}catch{}},[]);return{currentMode:e,players:n,matchState:s,stats:o,startLocalMatch:c,startAIMatch:u,startAIvsAIMatch:h,updatePlayerState:d,endMatch:f,getAvailableModes:y,refreshStats:x}}function LS(){const[e,t]=v.useState("medium"),[n,r]=v.useState(null);v.useEffect(()=>{try{const a=G.resolve("aiOpponentService");a.setDifficulty(e),r(a)}catch{}},[e]);const s=v.useCallback(a=>{if(!n)return null;try{return n.decideNextMove(a)}catch{return null}},[n]),i=v.useCallback(a=>{t(a),n&&n.setDifficulty(a)},[n]),o=v.useCallback(()=>n?n.getDifficulties():[],[n]);return{difficulty:e,changeDifficulty:i,getNextMove:s,getDifficulties:o}}function RS({onClose:e,onStartMatch:t}){const{getAvailableModes:n,stats:r,startLocalMatch:s,startAIMatch:i,startAIvsAIMatch:o}=DS(),{getDifficulties:a}=LS(),[c,u]=v.useState(null),[h,d]=v.useState("Jogador 1");v.useState("Jogador 2");const[f,y]=v.useState("medium"),[x,b]=v.useState("expert"),[S,p]=v.useState("expert"),m=n(),g=a();if(!m||m.length===0)return l.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-red-900/90 text-white p-6 rounded-lg",children:[l.jsx("p",{className:"text-xl",children:" Erro ao carregar multiplayer"}),l.jsx("button",{onClick:e,className:"mt-4 bg-white text-black px-4 py-2 rounded",children:"Fechar"})]})});const w=j=>{j.disabled||u(j)},k=()=>{let j=null;c.id==="vs-ai"?j=i(h,f):c.id==="ai-vs-ai"&&(j=o(x,S)),j&&t&&t(j)};return l.jsx(N.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:e,children:l.jsxs(N.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},className:"bg-gradient-to-br from-purple-900/95 to-indigo-900/95 rounded-2xl p-6 max-w-4xl w-full max-h-[90vh] overflow-y-auto border-2 border-white/20 shadow-2xl",onClick:j=>j.stopPropagation(),children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-3xl font-bold text-white flex items-center gap-2",children:" Multiplayer"}),l.jsx("p",{className:"text-white/60 text-sm mt-1",children:"Desafie amigos ou enfrente a IA"})]}),l.jsx("button",{onClick:e,className:"text-white/60 hover:text-white text-2xl transition-colors",children:""})]}),r&&l.jsxs("div",{className:"bg-black/30 rounded-lg p-4 mb-6 grid grid-cols-3 gap-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-white",children:r.aiMatches}),l.jsx("div",{className:"text-white/60 text-sm",children:"Partidas vs IA"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-2xl font-bold text-green-400",children:r.wins}),l.jsx("div",{className:"text-white/60 text-sm",children:"Vitrias"})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-2xl font-bold text-yellow-400",children:[r.winRate,"%"]}),l.jsx("div",{className:"text-white/60 text-sm",children:"Taxa de Vitria"})]})]}),c?l.jsxs("div",{children:[l.jsx("button",{onClick:()=>u(null),className:"text-white/60 hover:text-white mb-4 flex items-center gap-2",children:" Voltar"}),l.jsxs("div",{className:"bg-black/30 rounded-lg p-6",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[l.jsx("span",{className:"text-5xl",children:c.emoji}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-2xl font-bold text-white",children:c.name}),l.jsx("p",{className:"text-white/60",children:c.description})]})]}),c.id==="vs-ai"&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-white/80 mb-2",children:"Seu Nome:"}),l.jsx("input",{type:"text",value:h,onChange:j=>d(j.target.value),className:"w-full bg-black/30 text-white px-4 py-2 rounded-lg border border-white/20 focus:border-blue-500 focus:outline-none",maxLength:20})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-white/80 mb-2",children:"Dificuldade da IA:"}),l.jsx("div",{className:"grid grid-cols-2 gap-3",children:g.map(j=>l.jsxs("button",{onClick:()=>y(j.id),className:`p-3 rounded-lg border-2 transition-all ${f===j.id?"bg-blue-600 border-blue-400":"bg-black/30 border-white/20 hover:border-white/40"}`,children:[l.jsx("div",{className:"text-2xl mb-1",children:j.emoji}),l.jsx("div",{className:"text-white font-bold",children:j.name}),l.jsx("div",{className:"text-white/60 text-xs",children:j.description})]},j.id))})]})]}),c.id==="ai-vs-ai"&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-white/80 mb-2",children:" IA 1 (Esquerda):"}),l.jsx("div",{className:"grid grid-cols-2 gap-3",children:g.map(j=>l.jsxs("button",{onClick:()=>b(j.id),className:`p-3 rounded-lg border-2 transition-all ${x===j.id?"bg-blue-600 border-blue-400":"bg-black/30 border-white/20 hover:border-white/40"}`,children:[l.jsx("div",{className:"text-2xl mb-1",children:j.emoji}),l.jsx("div",{className:"text-white font-bold",children:j.name}),l.jsx("div",{className:"text-white/60 text-xs",children:j.description})]},j.id))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-white/80 mb-2",children:" IA 2 (Direita):"}),l.jsx("div",{className:"grid grid-cols-2 gap-3",children:g.map(j=>l.jsxs("button",{onClick:()=>p(j.id),className:`p-3 rounded-lg border-2 transition-all ${S===j.id?"bg-red-600 border-red-400":"bg-black/30 border-white/20 hover:border-white/40"}`,children:[l.jsx("div",{className:"text-2xl mb-1",children:j.emoji}),l.jsx("div",{className:"text-white font-bold",children:j.name}),l.jsx("div",{className:"text-white/60 text-xs",children:j.description})]},j.id))})]})]}),l.jsx(N.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:k,className:"w-full mt-6 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-400 hover:to-emerald-500 text-white font-bold py-4 px-6 rounded-lg shadow-lg transition-all",children:" Iniciar Partida"})]})]}):l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:m.map(j=>l.jsxs(N.button,{whileHover:j.disabled?{}:{scale:1.02},whileTap:j.disabled?{}:{scale:.98},onClick:()=>w(j),disabled:j.disabled,className:`p-6 rounded-xl border-2 text-left transition-all ${j.disabled?"bg-gray-800/50 border-gray-700 opacity-50 cursor-not-allowed":"bg-gradient-to-br from-blue-600/30 to-purple-600/30 border-blue-500/50 hover:border-blue-400 cursor-pointer"}`,children:[l.jsx("div",{className:"text-4xl mb-3",children:j.emoji}),l.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:j.name}),l.jsx("p",{className:"text-white/70 text-sm mb-3",children:j.description}),l.jsx("div",{className:"flex items-center gap-2 text-white/50 text-sm",children:l.jsxs("span",{children:[" ",j.players," jogador",j.players>1?"es":""]})}),j.disabled&&l.jsx("div",{className:"mt-3 text-yellow-400 text-xs font-bold",children:" EM BREVE"})]},j.id))})]})})}function IS({onComplete:e}){const[t,n]=v.useState(0),[r,s]=v.useState(!1);v.useEffect(()=>{localStorage.getItem("catTetris_tutorialCompleted")||s(!0)},[]);const i=[{title:" Bem-vindo ao Cat Tetris!",description:"Um Tetris com gatinhos e sistema de progresso viciante!",tips:[" Use as setas para mover as peas"," Seta para cima para rotacionar"," Seta para baixo para drop rpido","C para segurar pea (Hold)"]},{title:" Sistema de Moedas",description:"Ganhe Peixes () completando misses e conquistas!",tips:[" 3 misses dirias (resetam  meia-noite)"," 22 conquistas desbloqueveis"," Use  para comprar temas na loja"," Quanto mais voc joga, mais voc ganha!"]},{title:" Misses Dirias",description:"Complete desafios dirios para ganhar recompensas!",tips:[" Misso Fcil: 100"," Misso Mdia: 200"," Misso Difcil: 400"," Complete todas para celebrao especial!"]},{title:" Loja e Personalizao",description:"Customize suas peas com temas exclusivos!",tips:[" 10 temas diferentes disponveis"," Cristais e Espao so os mais caros"," Cada tema muda os emojis das peas"," Desbloqueie todos com suas moedas!"]},{title:" Ranking Global",description:"Compete com jogadores do mundo todo!",tips:[" Veja sua posio no ranking global"," 4 tipos de ranking: Global, Semanal, Pas, Ao Redor"," Compartilhe seus recordes"," Chegue ao Top 3 para medalha!"]},{title:" Pronto para Jogar!",description:"Agora voc sabe tudo. Divirta-se!",tips:[" Dica: Use a sombra da pea para planejar"," Faa combos para mais pontos"," T-Spins valem MUITO mais"," Modo Zen  perfeito para relaxar"]}],o=()=>{t<i.length-1?n(t+1):c()},a=()=>{c()},c=()=>{localStorage.setItem("catTetris_tutorialCompleted","true"),s(!1),e&&e()};if(!r)return null;const u=i[t],h=t===i.length-1;return l.jsx(N.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/90 backdrop-blur-sm flex items-center justify-center z-[100] p-4",children:l.jsxs(N.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-gradient-to-br from-purple-900/95 to-indigo-900/95 rounded-2xl p-8 max-w-lg w-full border-2 border-white/20 shadow-2xl max-h-[90vh] overflow-y-auto",children:[l.jsx("div",{className:"flex gap-2 mb-6",children:i.map((d,f)=>l.jsx("div",{className:`h-2 flex-1 rounded-full transition-colors ${f<=t?"bg-green-500":"bg-white/20"}`},f))}),l.jsx(N.h2,{initial:{y:-20},animate:{y:0},className:"text-3xl font-bold text-white mb-3",children:u.title}),l.jsx(N.p,{initial:{y:-10},animate:{y:0},className:"text-white/80 text-lg mb-6",children:u.description}),l.jsx(N.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},className:"bg-black/30 rounded-lg p-4 mb-6 space-y-2",children:u.tips.map((d,f)=>l.jsxs(N.div,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},transition:{delay:.3+f*.1},className:"text-white/90 flex items-start gap-2",children:[l.jsx("span",{className:"text-green-400 mt-0.5",children:""}),l.jsx("span",{children:d})]},f))}),l.jsxs("div",{className:"flex gap-3",children:[!h&&l.jsx("button",{onClick:a,className:"flex-1 bg-white/10 hover:bg-white/20 text-white font-bold py-3 px-6 rounded-lg transition-colors",children:"Pular Tutorial"}),l.jsx("button",{onClick:o,className:"flex-1 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-400 hover:to-emerald-500 text-white font-bold py-3 px-6 rounded-lg transition-all shadow-lg",children:h?" Comear a Jogar!":"Prximo "})]}),l.jsxs("div",{className:"text-center mt-4 text-white/40 text-sm",children:["Passo ",t+1," de ",i.length]})]},t)})}function OS(e){const[t,n]=v.useState(null),[r,s]=v.useState(!1),i=v.useRef(null),o=v.useRef(0);v.useEffect(()=>{if(!e){n(null),s(!1),i.current=null,o.current=0;return}const d=new $n(new Wn,new qn,null,new yn);return d.initializeGame(),d.isPlaying=!0,o.current=0,i.current=d,n(d.getGameState()),s(!0),()=>{i.current=null,s(!1)}},[e]);const a=v.useRef(0),c=v.useRef(null);v.useEffect(()=>{if(!i.current||!r)return;a.current=0;const d=f=>{var b;a.current||(a.current=f);const y=f-a.current;a.current=f;const x=i.current;if(x){x.isPlaying&&!x.isPaused&&!x.gameOver&&x.updateGame(y);const S=x.getGameState(),p=((b=S.score)==null?void 0:b.combo)||0;p>o.current&&(o.current=p),n(S)}c.current=requestAnimationFrame(d)};return c.current=requestAnimationFrame(d),()=>{c.current&&cancelAnimationFrame(c.current)}},[r]);const u={movePiece:v.useCallback(d=>{var f;(f=i.current)==null||f.movePiece(d)},[]),rotatePiece:v.useCallback(()=>{var d;(d=i.current)==null||d.rotatePiece()},[]),rotatePieceLeft:v.useCallback(()=>{var d,f;(f=(d=i.current)==null?void 0:d.rotatePieceLeft)==null||f.call(d)},[]),hardDrop:v.useCallback(()=>{var d;(d=i.current)==null||d.hardDrop()},[]),holdPiece:v.useCallback(()=>{var d;(d=i.current)==null||d.holdPiece()},[]),pause:v.useCallback(()=>{var d;(d=i.current)==null||d.pause()},[]),resume:v.useCallback(()=>{var d;(d=i.current)==null||d.resume()},[]),restart:v.useCallback(()=>{i.current&&(i.current.restart(),o.current=0)},[]),getDropPreview:v.useCallback(()=>{var d;try{return((d=i.current)==null?void 0:d.getDropPreview())||null}catch{return null}},[])},h=v.useCallback(()=>{var d,f,y,x,b;return t?{score:((d=t.score)==null?void 0:d.points)||0,level:((f=t.score)==null?void 0:f.level)||1,linesCleared:((y=t.score)==null?void 0:y.lines)||0,currentPiece:t.currentPiece,hasCurrentPiece:!!t.currentPiece,heldPiece:t.heldPiece,hasUsedHold:!!t.heldPiece,currentCombo:((x=t.score)==null?void 0:x.combo)||0,maxCombo:o.current,backToBackActive:t.backToBack||!1,board:t.board,gameOver:t.gameOver,isPlaying:t.isPlaying,isPaused:t.isPaused,tSpins:((b=t.score)==null?void 0:b.tSpins)||0}:null},[t]);return{gameState:t,actions:u,isInitialized:r,getValidationState:h}}const kh={1:{difficulty:"easy",forceHold:!1,comboBoost:!1,label:"Movendo peas..."},2:{difficulty:"easy",forceHold:!0,comboBoost:!1,label:"Usando Hold (C)..."},3:{difficulty:"medium",forceHold:!1,comboBoost:!1,label:"Planejando jogadas..."},4:{difficulty:"medium",forceHold:!1,comboBoost:!0,label:"Buscando combos..."},5:{difficulty:"hard",forceHold:!1,comboBoost:!1,label:"Montando Tetris..."},6:{difficulty:"expert",forceHold:!0,comboBoost:!1,label:"Tentando T-Spins..."},7:{difficulty:"expert",forceHold:!0,comboBoost:!1,label:"Buscando Back-to-Back..."},8:{difficulty:"hard",forceHold:!0,comboBoost:!1,label:"Jogando no mximo..."}};function FS(e,t){const[n,r]=v.useState(null),[s,i]=v.useState(!1),[o,a]=v.useState(!1),[c,u]=v.useState(""),h=v.useRef(null),d=v.useRef(null),f=v.useRef(0),y=v.useRef(null),x=v.useRef(0),b=v.useRef(0),S=v.useRef(0),p=v.useRef(null),m=250,g=25;v.useEffect(()=>{if(!e){r(null),i(!1),a(!1),u(""),h.current=null,d.current=null,b.current=0,S.current=0,y.current&&cancelAnimationFrame(y.current);return}const k=kh[t]||kh[1];p.current=k,u(k.label);const j=new $n(new Wn,new qn,null,new yn);j.initializeGame(),j.isPlaying=!0;const C=new ms;if(C.setDifficulty(k.difficulty),C.thinkingTime=0,k.comboBoost){const P=C._evaluateBoard.bind(C);C._evaluateBoard=(E,M)=>{let B=P(E,M);for(let q=0;q<E.length;q++){const W=E[q].filter(K=>K!=null).length;W>=8&&(B+=200),W>=9&&(B+=500)}return B}}return h.current=j,d.current=C,b.current=0,S.current=0,x.current=0,f.current=0,r(j.getGameState()),i(!0),a(!1),()=>{y.current&&cancelAnimationFrame(y.current),h.current=null,d.current=null}},[e,t]),v.useEffect(()=>{if(!h.current||!s||!e)return;f.current=0,x.current=0;let k=null;const j=C=>{var q;f.current||(f.current=C);const P=C-f.current;f.current=C;const E=h.current,M=d.current,B=p.current;if(E&&M&&!E.gameOver){E.isPlaying&&!E.isPaused&&E.updateGame(P);const W=E.getGameState(),K=(q=W.currentPiece)==null?void 0:q.type;if(k&&K!==k&&(b.current++,S.current++,b.current>=g)){a(!0),r(W);return}if(k=K,x.current+=P,x.current>=m){if(x.current=0,B!=null&&B.forceHold&&S.current>=3&&W.currentPiece&&W.canHold!==!1){E.holdPiece(),S.current=0,r(E.getGameState()),y.current=requestAnimationFrame(j);return}const Q=M.decideNextMove(W);if(Q)switch(Q.action){case"left":E.movePiece("left");break;case"right":E.movePiece("right");break;case"rotate":E.rotatePiece();break;case"down":E.movePiece("down");break;case"drop":E.hardDrop();break;case"hold":E.holdPiece();break}}r(W)}else if(E!=null&&E.gameOver){a(!0),r(E.getGameState());return}y.current=requestAnimationFrame(j)};return y.current=requestAnimationFrame(j),()=>{y.current&&cancelAnimationFrame(y.current)}},[s,e]);const w=v.useCallback(()=>{var k;try{return((k=h.current)==null?void 0:k.getDropPreview())||null}catch{return null}},[]);return{gameState:n,isInitialized:s,demoComplete:o,statusLabel:c,getDropPreview:w}}function y0(e,t,n=!0){const r=v.useRef(t);r.current=t;const s=v.useRef(e);s.current=e,v.useEffect(()=>{if(!(!e||!n))try{const d=G.resolve("keyboardInputService"),f=()=>{var k;return!((k=r.current)!=null&&k.gameOver)},y=()=>{f()&&s.current.movePiece("left")},x=()=>{f()&&s.current.movePiece("right")},b=()=>{f()&&s.current.movePiece("down")},S=()=>{f()&&s.current.rotatePiece()},p=()=>{var k,j;f()&&((j=(k=s.current).rotatePieceLeft)==null||j.call(k))},m=()=>{f()&&s.current.hardDrop()},g=()=>{f()&&s.current.holdPiece()},w=()=>{var k,j;(k=r.current)!=null&&k.gameOver||((j=r.current)!=null&&j.isPaused?s.current.resume():s.current.pause())};return d.registerHandler("moveLeft",y),d.registerHandler("moveRight",x),d.registerHandler("moveDown",b),d.registerHandler("rotate",S),d.registerHandler("rotateLeft",p),d.registerHandler("hardDrop",m),d.registerHandler("hold",g),d.registerHandler("pause",w),d.startListening(),()=>{d.unregisterHandler("moveLeft",y),d.unregisterHandler("moveRight",x),d.unregisterHandler("moveDown",b),d.unregisterHandler("rotate",S),d.unregisterHandler("rotateLeft",p),d.unregisterHandler("hardDrop",m),d.unregisterHandler("hold",g),d.unregisterHandler("pause",w),d.stopListening()}}catch{return()=>{}}},[n]);const i=v.useCallback((d,f)=>{try{G.resolve("keyboardInputService").setKeyMapping(d,f)}catch{}},[]),o=v.useCallback(()=>{try{return G.resolve("keyboardInputService").getKeyMappings()}catch{return{}}},[]),a=v.useCallback(d=>{try{G.resolve("keyboardInputService").setDAS(d)}catch{}},[]),c=v.useCallback(d=>{try{G.resolve("keyboardInputService").setARR(d)}catch{}},[]),u=v.useCallback(()=>{try{return G.resolve("keyboardInputService").getDAS()}catch{return 133}},[]),h=v.useCallback(()=>{try{return G.resolve("keyboardInputService").getARR()}catch{return 10}},[]);return{customizeKeyMapping:i,getKeyMappings:o,setDAS:a,setARR:c,getDAS:u,getARR:h}}function GS({show:e,onComplete:t}){const[n,r]=v.useState([]);return v.useEffect(()=>{if(!e)return;const s=Array.from({length:50},(o,a)=>({id:a,x:Math.random()*window.innerWidth,y:-20,rotation:Math.random()*360,color:["#FF6B6B","#4ECDC4","#45B7D1","#FFA07A","#98D8C8","#F7DC6F","#BB8FCE","#85C1E2"][Math.floor(Math.random()*8)],size:Math.random()*10+5,delay:Math.random()*.5,duration:Math.random()*2+2,xOffset:(Math.random()-.5)*300}));r(s);const i=setTimeout(()=>{r([]),t&&t()},4e3);return()=>clearTimeout(i)},[e,t]),!e||n.length===0?null:l.jsx("div",{className:"fixed inset-0 pointer-events-none z-50 overflow-hidden",children:n.map(s=>l.jsx(N.div,{initial:{x:s.x,y:s.y,rotate:0,opacity:1},animate:{x:s.x+s.xOffset,y:window.innerHeight+100,rotate:s.rotation+720,opacity:0},transition:{duration:s.duration,delay:s.delay,ease:"easeIn"},style:{position:"absolute",width:s.size,height:s.size,backgroundColor:s.color,borderRadius:"50%"}},s.id))})}function VS({lesson:e,onStartDemo:t,onStartPractice:n}){return l.jsxs(N.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"max-w-lg mx-auto",children:[l.jsxs("div",{className:"bg-white/[0.06] border border-white/[0.08] rounded-xl p-6 mb-5 text-center",children:[l.jsx("div",{className:"text-4xl mb-3",children:""}),l.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:"Objetivo"}),l.jsx("p",{className:"text-white/70 text-base leading-relaxed",children:e.practice.objective})]}),e.intro&&e.intro.length>0&&l.jsxs("div",{className:"bg-white/[0.04] border border-white/[0.06] rounded-xl p-5 mb-5",children:[l.jsx("h4",{className:"text-sm font-semibold text-white/50 uppercase tracking-wide mb-3",children:"Como funciona"}),l.jsx("div",{className:"space-y-2.5",children:e.intro.map((r,s)=>l.jsxs(N.p,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:s*.08},className:"text-white/70 text-sm leading-relaxed flex items-start gap-2",children:[l.jsxs("span",{className:"text-white/25 font-mono text-xs mt-0.5 flex-shrink-0",children:[s+1,"."]}),l.jsx("span",{children:r})]},s))})]}),e.rewards&&l.jsxs("div",{className:"flex justify-center gap-4 mb-5 text-xs text-white/30",children:[l.jsxs("span",{children:[" ",e.rewards.fishCoins]}),l.jsxs("span",{children:[" ",e.rewards.xp," XP"]})]}),l.jsxs("div",{className:"flex flex-col items-center gap-3",children:[l.jsxs(N.button,{whileHover:{scale:1.03},whileTap:{scale:.97},onClick:t,className:`bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-500 hover:to-indigo-500
                   text-white px-8 py-3 rounded-xl font-bold text-sm shadow-lg shadow-blue-900/30 transition-all
                   flex items-center gap-2`,children:[l.jsx("span",{children:""}),l.jsx("span",{children:"Ver IA Jogar Primeiro"})]}),l.jsx("button",{onClick:n,className:"text-white/30 hover:text-white/50 text-xs transition-all",children:"Ir direto para prtica "})]})]},"intro")}function BS({lesson:e,gameState:t,isInitialized:n,demoComplete:r,dropPreview:s,statusLabel:i,onSkip:o}){var c,u,h,d,f;if(!t||!n)return l.jsx("div",{className:"text-center text-white/40 text-sm py-12",children:"Preparando demonstrao..."});const a=v.useMemo(()=>{var b;if(!e.intro||e.intro.length===0)return null;const y=((b=t.score)==null?void 0:b.lines)||0,x=Math.min(Math.floor(y/2),e.intro.length-1);return e.intro[x]},[e.intro,(c=t.score)==null?void 0:c.lines]);return l.jsxs(N.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"text-center",children:[l.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-xl p-3 mb-3 max-w-md mx-auto",children:[l.jsxs("div",{className:"flex items-center justify-center gap-2",children:[l.jsx("span",{className:"text-lg",children:""}),l.jsx("p",{className:"text-sm font-semibold text-blue-300",children:"IA jogando  observe como ela faz!"})]}),i&&l.jsx("p",{className:"text-xs text-blue-400/70 mt-1",children:i})]}),a&&l.jsx(N.div,{initial:{opacity:0,y:-5},animate:{opacity:1,y:0},className:"bg-white/[0.04] border border-white/[0.06] rounded-lg p-2.5 mb-3 max-w-md mx-auto",children:l.jsxs("p",{className:"text-xs text-white/60",children:[" ",a]})},a),l.jsxs("div",{className:"flex gap-3 justify-center items-start",children:[l.jsx(Un,{heldPiece:t.heldPiece,canHold:t.canHold}),l.jsx(vn,{board:t.board,currentPiece:t.currentPiece,dropPreview:s,gameOver:t.gameOver}),l.jsxs("div",{className:"flex flex-col gap-3",children:[l.jsx(Hn,{pieces:t.nextPieces||[]}),l.jsx(zn,{score:((u=t.score)==null?void 0:u.points)||0,level:((h=t.score)==null?void 0:h.level)||1,lines:((d=t.score)==null?void 0:d.lines)||0,combo:((f=t.score)==null?void 0:f.combo)||0})]})]}),l.jsx("div",{className:"mt-4",children:r?l.jsx(N.button,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},whileHover:{scale:1.03},whileTap:{scale:.97},onClick:o,className:`bg-gradient-to-r from-emerald-600 to-green-600 hover:from-emerald-500 hover:to-green-500
                     text-white px-6 py-2.5 rounded-xl font-bold text-sm shadow-lg shadow-emerald-900/30 transition-all`,children:"  Agora  sua vez!"}):l.jsx("button",{onClick:o,className:"text-white/30 hover:text-white/50 text-xs transition-all",children:"Pular demonstrao "})})]},"demo")}function zS({lesson:e,gameState:t,isInitialized:n,practiceState:r,onRestart:s,dropPreview:i}){var o,a,c,u;return!t||!n?l.jsx("div",{className:"text-center text-white/40 text-sm py-12",children:"Carregando..."}):l.jsxs(N.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"text-center",children:[l.jsxs("div",{className:"bg-white/[0.06] border border-white/[0.06] rounded-xl p-3 mb-3 max-w-md mx-auto",children:[l.jsxs("p",{className:"text-sm font-semibold text-white mb-2",children:[" ",e.practice.objective]}),r.progress>0&&l.jsxs("div",{children:[l.jsx("div",{className:"h-1.5 bg-white/[0.08] rounded-full overflow-hidden",children:l.jsx(N.div,{className:`h-full rounded-full ${r.complete?"bg-emerald-400":"bg-gradient-to-r from-blue-500 to-indigo-500"}`,initial:{width:0},animate:{width:`${Math.min(100,r.progress*100)}%`},transition:{duration:.3}})}),l.jsxs("div",{className:"text-white/30 text-[10px] mt-1",children:[Math.round(r.progress*100),"%"]})]})]}),l.jsxs("div",{className:"flex gap-3 justify-center items-start",children:[l.jsx(Un,{heldPiece:t.heldPiece,canHold:t.canHold}),l.jsx(vn,{board:t.board,currentPiece:t.currentPiece,dropPreview:i,gameOver:t.gameOver}),l.jsxs("div",{className:"flex flex-col gap-3",children:[l.jsx(Hn,{pieces:t.nextPieces||[]}),l.jsx(zn,{score:((o=t.score)==null?void 0:o.points)||0,level:((a=t.score)==null?void 0:a.level)||1,lines:((c=t.score)==null?void 0:c.lines)||0,combo:((u=t.score)==null?void 0:u.combo)||0})]})]}),l.jsx("div",{className:"mt-3 text-white/20 text-[10px]",children:" Mover   Rotao   Soft Drop  Espao: Hard Drop  C: Hold"}),r.feedback&&!r.complete&&l.jsx(N.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"mt-3 bg-white/[0.06] border border-white/[0.08] rounded-lg p-3 max-w-md mx-auto",children:l.jsx("p",{className:"text-sm text-white/70",children:r.feedback})},r.feedback),t.gameOver&&!r.complete&&l.jsxs(N.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"mt-4",children:[l.jsx("p",{className:"text-white/40 text-sm mb-2",children:"Game Over  tente de novo!"}),l.jsx("button",{onClick:s,className:"bg-white/[0.08] hover:bg-white/[0.12] text-white text-sm px-4 py-2 rounded-lg transition-all",children:" Recomear"})]}),r.complete&&l.jsxs(N.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",bounce:.4},className:"mt-4 bg-emerald-500/10 border border-emerald-500/20 rounded-xl p-6 max-w-sm mx-auto",children:[l.jsx("div",{className:"text-4xl mb-2",children:""}),l.jsx("h3",{className:"text-lg font-bold text-white mb-1",children:"Parabns!"}),l.jsx("p",{className:"text-emerald-300/70 text-sm",children:r.feedback})]})]},"practice")}function HS({lesson:e,onComplete:t,onExit:n}){const[r,s]=v.useState("introduction"),[i,o]=v.useState({progress:0,feedback:"",complete:!1}),[a,c]=v.useState(!1),{gameState:u,isInitialized:h,demoComplete:d,statusLabel:f,getDropPreview:y}=FS(r==="demo",e==null?void 0:e.id),x=v.useMemo(()=>r!=="demo"||!h?null:(y==null?void 0:y())||null,[r,h,y,u]),{gameState:b,actions:S,isInitialized:p,getValidationState:m}=OS(r==="practice"?e:null);y0(S,b,r==="practice"&&p);const g=v.useMemo(()=>{var P;return r!=="practice"||!p?null:((P=S.getDropPreview)==null?void 0:P.call(S))||null},[r,p,S,b]);v.useEffect(()=>{var M;if(r!=="practice"||!p||!b)return;const P=m();if(!P||!((M=e.practice)!=null&&M.validate))return;const E=e.practice.validate(P);o(B=>({...B,progress:E.progress||0,feedback:E.feedback||"",complete:E.complete||!1})),E.complete&&!i.complete&&(c(!0),setTimeout(()=>{t(e.id,{score:P.score})},2e3))},[r,p,b,e,m,i.complete,t]);const w=v.useCallback(()=>{s("demo")},[]),k=v.useCallback(()=>{s("practice"),o({progress:0,feedback:"",complete:!1})},[]),j=v.useCallback(()=>{var P;(P=S.restart)==null||P.call(S),o({progress:0,feedback:"",complete:!1})},[S]),C=r==="introduction"?" Introduo":r==="demo"?" Demonstrao":" Prtica";return l.jsxs("div",{className:"fixed inset-0 bg-gradient-to-b from-slate-900 via-indigo-950 to-slate-900 z-50 flex flex-col",children:[l.jsx("div",{className:"bg-black/30 border-b border-white/[0.06] px-4 py-2 flex-shrink-0",children:l.jsxs("div",{className:"flex items-center justify-between max-w-4xl mx-auto",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("span",{className:"text-2xl",children:e.module==="fundamentals"?"":e.module==="intermediate"?"":e.module==="advanced"?"":""}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-bold text-white",children:e.title}),l.jsx("p",{className:"text-white/40 text-xs",children:e.description})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-xs text-white/30 bg-white/[0.06] px-2 py-1 rounded",children:C}),l.jsx("button",{onClick:n,className:"text-white/40 hover:text-white/70 bg-white/[0.06] hover:bg-white/[0.1] rounded-lg px-3 py-1.5 text-sm transition-all",children:" Sair"})]})]})}),l.jsx("div",{className:"flex-1 overflow-auto p-3",children:l.jsx("div",{className:"max-w-4xl w-full mx-auto",children:l.jsxs(ge,{mode:"wait",children:[r==="introduction"&&l.jsx(VS,{lesson:e,onStartDemo:w,onStartPractice:k}),r==="demo"&&l.jsx(BS,{lesson:e,gameState:u,isInitialized:h,demoComplete:d,dropPreview:x,statusLabel:f,onSkip:k}),r==="practice"&&l.jsx(zS,{lesson:e,gameState:b,isInitialized:p,practiceState:i,onRestart:j,dropPreview:g})]})})}),l.jsx(GS,{show:a,onComplete:()=>c(!1)})]})}function US({tutorialService:e,onClose:t,onLessonComplete:n}){const[r,s]=v.useState(null),[i,o]=v.useState(e.getProgress()),[a,c]=v.useState("fundamentals"),u=e.lessons,h=[{key:"fundamentals",icon:"",name:"Fundamentos",desc:"O bsico do Tetris"},{key:"intermediate",icon:"",name:"Intermedirio",desc:"T-spins e combos"},{key:"advanced",icon:"",name:"Avanado",desc:"Setups e estratgias"},{key:"pro",icon:"",name:"Profissional",desc:"Tcnicas PRO"}],d=u.filter(g=>g.module===a),f=g=>{const w=u.filter(j=>j.module===g).map(j=>j.id);return{done:w.filter(j=>i.completedLessons.includes(j)).length,total:w.length}},y=(g,w)=>{const k=e.completeLesson(g,w);o(e.getProgress()),s(null),n&&n(k)},x=g=>i.unlockedLessons.includes(g),b=g=>i.completedLessons.includes(g);if(r)return l.jsx(HS,{lesson:r,onComplete:y,onExit:()=>s(null)});const S=i.completedLessons.length,p=u.length,m=p>0?Math.round(S/p*100):0;return l.jsx(N.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-gradient-to-b from-slate-900 via-indigo-950 to-slate-900 z-40 overflow-y-auto",children:l.jsxs("div",{className:"min-h-screen max-w-lg mx-auto px-4 py-6 flex flex-col",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-extrabold text-white",children:" Tutorial"}),l.jsx("p",{className:"text-white/40 text-sm mt-0.5",children:"Aprenda do zero ao PRO"})]}),l.jsx("button",{onClick:t,className:"text-white/40 hover:text-white/70 bg-white/[0.06] hover:bg-white/[0.1] rounded-lg px-3 py-1.5 text-sm transition-all",children:" Voltar"})]}),l.jsxs("div",{className:"mb-6",children:[l.jsxs("div",{className:"flex justify-between text-xs text-white/40 mb-1.5",children:[l.jsx("span",{children:"Progresso geral"}),l.jsxs("span",{children:[S,"/",p," (",m,"%)"]})]}),l.jsx("div",{className:"h-2 bg-white/[0.08] rounded-full overflow-hidden",children:l.jsx(N.div,{className:"h-full bg-gradient-to-r from-emerald-500 to-green-400 rounded-full",initial:{width:0},animate:{width:`${m}%`},transition:{duration:.6,ease:"easeOut"}})})]}),l.jsx("div",{className:"flex gap-1.5 mb-5 overflow-x-auto pb-1 -mx-1 px-1",children:h.map(g=>{const w=f(g.key),k=a===g.key;return l.jsx("button",{onClick:()=>c(g.key),className:`flex-shrink-0 rounded-lg px-3 py-2 text-left transition-all duration-150 ${k?"bg-white/[0.12] border border-white/[0.15]":"bg-white/[0.04] border border-transparent hover:bg-white/[0.07]"}`,children:l.jsxs("div",{className:"flex items-center gap-1.5",children:[l.jsx("span",{className:"text-base",children:g.icon}),l.jsx("span",{className:`text-xs font-semibold ${k?"text-white":"text-white/50"}`,children:g.name}),l.jsxs("span",{className:`text-[10px] ml-1 ${w.done===w.total&&w.total>0?"text-emerald-400":"text-white/30"}`,children:[w.done,"/",w.total]})]})},g.key)})}),l.jsx("div",{className:"flex-1 space-y-2",children:l.jsx(ge,{mode:"wait",children:l.jsxs(N.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},transition:{duration:.2},className:"space-y-2",children:[d.map((g,w)=>{var C,P;const k=x(g.id),j=b(g.id);return l.jsxs(N.button,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:w*.04},disabled:!k,onClick:()=>k&&s(g),className:`w-full text-left rounded-xl p-4 transition-all duration-150 flex items-center gap-3 ${k?"bg-white/[0.06] hover:bg-white/[0.1] border border-white/[0.06] hover:border-white/[0.12] active:scale-[0.99]":"bg-white/[0.02] border border-white/[0.03] opacity-40 cursor-not-allowed"} ${j?"border-emerald-500/30":""}`,children:[l.jsx("div",{className:`w-9 h-9 rounded-lg flex items-center justify-center text-sm flex-shrink-0 ${j?"bg-emerald-500/20 text-emerald-400":k?"bg-white/[0.08] text-white/60":"bg-white/[0.04] text-white/20"}`,children:j?"":k?w+1:""}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("div",{className:"text-sm font-semibold text-white truncate",children:g.title}),l.jsx("div",{className:"text-xs text-white/35 mt-0.5 truncate",children:g.description}),l.jsxs("div",{className:"flex items-center gap-3 mt-1.5 text-[10px] text-white/25",children:[l.jsxs("span",{children:[" ",g.estimatedTime]}),l.jsxs("span",{children:[" ",((C=g.rewards)==null?void 0:C.fishCoins)||0]}),l.jsxs("span",{children:[" ",((P=g.rewards)==null?void 0:P.xp)||0," XP"]})]})]}),l.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[l.jsx("span",{className:`w-2 h-2 rounded-full ${g.difficulty==="beginner"?"bg-green-400":g.difficulty==="intermediate"?"bg-yellow-400":g.difficulty==="advanced"?"bg-red-400":"bg-purple-400"}`}),k&&l.jsx("svg",{className:"w-4 h-4 text-white/20",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]},g.id)}),d.length===0&&l.jsx("div",{className:"text-center py-12 text-white/20 text-sm",children:"Nenhuma lio neste mdulo"})]},a)})}),i.badges.length>0&&l.jsxs("div",{className:"mt-6 pt-4 border-t border-white/[0.06]",children:[l.jsx("div",{className:"text-xs text-white/30 mb-2",children:"Badges conquistadas"}),l.jsx("div",{className:"flex flex-wrap gap-2",children:i.badges.map(g=>l.jsxs("span",{className:"bg-amber-500/10 text-amber-300/70 text-[10px] px-2 py-1 rounded-md font-medium",children:[" ",g.replace(/_/g," ")]},g))})]})]})})}function $S({reward:e,onClose:t}){var n,r,s;return ue.useEffect(()=>{const i=setTimeout(()=>{t()},5e3);return()=>clearTimeout(i)},[t]),e?l.jsx(N.div,{initial:{opacity:0,y:-50,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,scale:.9},className:"fixed top-24 right-6 z-[60] max-w-md",children:l.jsx("div",{className:"bg-gradient-to-br from-green-600 to-emerald-600 rounded-xl p-6 shadow-2xl border-2 border-white/20",children:l.jsxs("div",{className:"flex items-start gap-4",children:[l.jsx("div",{className:"text-4xl",children:""}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Lesson Completa!"}),e.lessonTitle&&l.jsx("p",{className:"text-white/90 text-sm mb-3",children:e.lessonTitle}),l.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[((n=e.rewards)==null?void 0:n.fishCoins)>0&&l.jsxs("div",{className:"bg-white/10 rounded-lg p-2 text-center",children:[l.jsx("div",{className:"text-xl",children:""}),l.jsxs("div",{className:"text-lg font-bold text-white",children:["+",e.rewards.fishCoins]}),l.jsx("div",{className:"text-xs text-white/70",children:"Peixes"})]}),((r=e.rewards)==null?void 0:r.xp)>0&&l.jsxs("div",{className:"bg-white/10 rounded-lg p-2 text-center",children:[l.jsx("div",{className:"text-xl",children:""}),l.jsxs("div",{className:"text-lg font-bold text-white",children:["+",e.rewards.xp]}),l.jsx("div",{className:"text-xs text-white/70",children:"XP"})]}),((s=e.rewards)==null?void 0:s.badge)&&l.jsxs("div",{className:"bg-white/10 rounded-lg p-2 text-center",children:[l.jsx("div",{className:"text-xl",children:""}),l.jsx("div",{className:"text-xs font-bold text-white mt-1",children:"Badge"}),l.jsx("div",{className:"text-xs text-white/70",children:e.rewards.badge.split("_")[0]})]})]})]}),l.jsx("button",{onClick:t,className:"text-white/60 hover:text-white transition-colors",children:""})]})})}):null}function WS(){const[e,t]=v.useState(null),n=v.useRef(null),r=v.useRef(null),s=v.useRef(0),i=v.useRef(!1),o=v.useRef(!1);v.useEffect(()=>{if(!i.current){i.current=!0;try{const w=G.resolve("gameService");n.current=w,w.initializeGame(),t(w.getGameState());const k=()=>{o.current=!0};return Object.values(O).forEach(j=>{R.on(j,k)}),()=>{Object.values(O).forEach(j=>{R.off(j,k)}),r.current&&cancelAnimationFrame(r.current)}}catch(w){throw Lt.logError("useGameService","init",w.message,{stack:w.stack}),w}}},[]),v.useEffect(()=>{if(!n.current)return;const w=k=>{s.current||(s.current=k);const j=k-s.current;s.current=k,n.current&&(n.current.isPlaying&&!n.current.isPaused&&!n.current.gameOver&&n.current.updateGame(j),o.current&&(o.current=!1,t(n.current.getGameState()))),r.current=requestAnimationFrame(w)};return r.current=requestAnimationFrame(w),()=>{r.current&&cancelAnimationFrame(r.current)}},[]);const a=v.useCallback(w=>(...k)=>{if(n.current&&typeof n.current[w]=="function")try{return n.current[w](...k)}catch(j){if(Lt.logError("useGameService",w,j.message,{stack:j.stack,args:k.map(C=>String(C).slice(0,100))}),w==="getDropPreview")return null;throw j}},[]),c=v.useCallback(a("movePiece"),[a]),u=v.useCallback(a("rotatePiece"),[a]),h=v.useCallback(a("rotatePieceLeft"),[a]),d=v.useCallback(a("hardDrop"),[a]),f=v.useCallback(a("holdPiece"),[a]),y=v.useCallback(a("getDropPreview"),[a]),x=v.useCallback(a("pause"),[a]),b=v.useCallback(a("resume"),[a]),S=v.useCallback(a("restart"),[a]),p=v.useCallback(a("saveGame"),[a]),m=v.useCallback(a("loadGame"),[a]);return{gameState:e,actions:{movePiece:c,rotatePiece:u,rotatePieceLeft:h,hardDrop:d,holdPiece:f,getDropPreview:y,pause:x,resume:b,restart:S,saveGame:p,loadGame:m}}}function qS(){const[e,t]=v.useState({volume:80,gameSpeed:"normal",soundEnabled:!0,particlesEnabled:!0,das:167,arr:33}),[n,r]=v.useState(!0),[s,i]=v.useState(null);v.useEffect(()=>{try{const h=G.resolve("settingsService").getSettings();t(h||{volume:80,gameSpeed:"normal",soundEnabled:!0,particlesEnabled:!0,das:167,arr:33}),r(!1)}catch(u){i(u.message),r(!1),t({volume:80,gameSpeed:"normal",soundEnabled:!0,particlesEnabled:!0,das:167,arr:33})}},[]);const o=v.useCallback(async u=>{try{i(null);const d=G.resolve("settingsService").saveSettings(u);return t(d),d}catch(h){throw i(h.message),h}},[]),a=v.useCallback(async(u,h)=>{try{i(null);const f=G.resolve("settingsService").updateSetting(u,h);return t(f),f}catch(d){throw i(d.message),d}},[]),c=v.useCallback(async()=>{try{i(null);const h=G.resolve("settingsService").resetSettings();return t(h),h}catch(u){throw i(u.message),u}},[]);return{settings:e,loading:n,error:s,updateSettings:o,updateSetting:a,resetSettings:c}}function KS(){const e=v.useCallback((S,p,m="sine",g=.1)=>{const w=Dr();if(w)try{const k=w.createOscillator(),j=w.createGain();k.connect(j),j.connect(w.destination),k.frequency.setValueAtTime(S,w.currentTime),k.type=m,j.gain.setValueAtTime(g,w.currentTime),j.gain.exponentialRampToValueAtTime(.001,w.currentTime+p),k.start(w.currentTime),k.stop(w.currentTime+p)}catch{}},[]),t=v.useCallback((S,p=.05)=>{const m=Dr();if(m)try{const g=m.sampleRate*S,w=m.createBuffer(1,g,m.sampleRate),k=w.getChannelData(0);for(let C=0;C<g;C++)k[C]=(Math.random()*2-1)*p;const j=m.createBufferSource();j.buffer=w,j.connect(m.destination),j.start()}catch{}},[]),n=v.useCallback(S=>{switch(S){case"I":[800,700,600,500].forEach((p,m)=>{setTimeout(()=>e(p,.1,"square",.08),m*50)});break;case"O":e(600,.1,"sine",.1),setTimeout(()=>e(600,.1,"sine",.1),80);break;case"T":e(523,.08,"triangle",.08),setTimeout(()=>e(659,.08,"triangle",.08),40),setTimeout(()=>e(523,.08,"triangle",.08),80);break;case"S":[440,494,523,587].forEach((p,m)=>{setTimeout(()=>e(p,.06,"sawtooth",.06),m*30)});break;case"Z":[587,523,494,440].forEach((p,m)=>{setTimeout(()=>e(p,.06,"sawtooth",.06),m*30)});break;case"J":[330,415,523].forEach((p,m)=>{setTimeout(()=>e(p,.15,"triangle",.07),m*20)});break;case"L":[392,494,659].forEach((p,m)=>{setTimeout(()=>e(p,.15,"sine",.08),m*30)});break;default:e(440,.1,"sine",.05)}},[e]),r=v.useCallback(S=>{switch(S){case 1:[440,494,523].forEach((p,m)=>{setTimeout(()=>e(p,.1,"triangle",.1),m*80)});break;case 2:[440,523,659,784].forEach((p,m)=>{setTimeout(()=>e(p,.12,"triangle",.1),m*60)});break;case 3:[523,659,784,1047,1319].forEach((p,m)=>{setTimeout(()=>e(p,.15,"triangle",.12),m*50)});break;case 4:t(.02),setTimeout(()=>{[262,330,392,523,659,784,1047].forEach((p,m)=>{setTimeout(()=>e(p,.2,"sawtooth",.15),m*40)})},50),setTimeout(()=>{[1047,1319,1568,2093].forEach((p,m)=>{setTimeout(()=>e(p,.3,"triangle",.2),m*30)})},350);break}},[e,t]),s=v.useCallback(()=>{[{freq:523,delay:0},{freq:659,delay:100},{freq:784,delay:200},{freq:1047,delay:300},{freq:784,delay:400},{freq:1047,delay:500},{freq:1319,delay:600},{freq:1568,delay:700}].forEach(p=>{setTimeout(()=>e(p.freq,.15,"triangle",.12),p.delay)}),setTimeout(()=>{[1047,1319,1568,2093].forEach((p,m)=>{setTimeout(()=>e(p,.4,"triangle",.15),m*50)})},800)},[e]),i=v.useCallback(()=>{e(200,.05,"square",.03),e(120,.06,"sine",.04)},[e]),o=v.useCallback(()=>{t(.04,.08),e(80,.08,"square",.12),e(60,.1,"sine",.1)},[e,t]),a=v.useCallback(()=>{t(.03,.04),[349,440,523,659,784].forEach((S,p)=>{setTimeout(()=>e(S,.2,"sawtooth",.1),p*40)}),setTimeout(()=>{e(1047,.4,"triangle",.15)},250)},[e,t]),c=v.useCallback(()=>{[660,880,1100,1320,1760].forEach((S,p)=>{setTimeout(()=>e(S,.12,"triangle",.08),p*50)})},[e]),u=v.useCallback(S=>{const p=400+S*80;e(p,.1,"triangle",.08),setTimeout(()=>e(p*1.25,.08,"triangle",.06),50)},[e]),h=v.useCallback(()=>{[523,494,440,392,349,330,294,262].forEach((p,m)=>{setTimeout(()=>e(p,.3,"sine",.1),m*150)})},[e]),d=v.useCallback(()=>{e(440,.2,"triangle",.08)},[e]),f=v.useCallback(()=>{e(523,.15,"triangle",.08),setTimeout(()=>e(659,.1,"triangle",.06),100)},[e]),y=v.useCallback(()=>{e(880,.1,"sine",.06),setTimeout(()=>e(1100,.08,"sine",.05),60)},[e]),x=v.useCallback(()=>{e(1200,.05,"square",.04)},[e]),b=v.useCallback(()=>{e(800,.03,"square",.02)},[e]);return{playPieceSound:n,playLineClear:r,playLevelUp:s,playPieceLand:i,playHardDrop:o,playTSpin:a,playBackToBack:c,playCombo:u,playGameOver:h,playPause:d,playResume:f,playHold:y,playRotate:x,playMove:b}}function QS(){const e=KS(),t=v.useRef(e);t.current=e,v.useEffect(()=>{const n=()=>t.current,r=x=>{var b;n().playPieceLand(),(b=x==null?void 0:x.piece)!=null&&b.type&&n().playPieceSound(x.piece.type)},s=x=>{(x==null?void 0:x.linesCleared)>0&&n().playLineClear(x.linesCleared)},i=()=>n().playHardDrop(),o=()=>n().playTSpin(),a=()=>n().playBackToBack(),c=x=>{(x==null?void 0:x.combo)>=2&&n().playCombo(x.combo)},u=()=>n().playHold(),h=()=>n().playRotate(),d=()=>n().playMove(),f=()=>n().playGameOver(),y=()=>n().playLevelUp();return R.on(O.PIECE_PLACED,r),R.on(O.LINE_CLEARED,s),R.on(O.HARD_DROP,i),R.on(O.T_SPIN,o),R.on(O.BACK_TO_BACK,a),R.on(O.SCORE_UPDATED,c),R.on(O.PIECE_HELD,u),R.on(O.PIECE_ROTATED,h),R.on(O.PIECE_MOVED,d),R.on(O.GAME_OVER,f),R.on(O.LEVEL_UP,y),()=>{R.off(O.PIECE_PLACED,r),R.off(O.LINE_CLEARED,s),R.off(O.HARD_DROP,i),R.off(O.T_SPIN,o),R.off(O.BACK_TO_BACK,a),R.off(O.SCORE_UPDATED,c),R.off(O.PIECE_HELD,u),R.off(O.PIECE_ROTATED,h),R.off(O.PIECE_MOVED,d),R.off(O.GAME_OVER,f),R.off(O.LEVEL_UP,y)}},[])}function XS(){const[e,t]=v.useState(!1),[n,r]=v.useState(null),s=v.useRef(null),i=v.useRef([]),o=v.useRef(null),a=v.useCallback(()=>{s.current&&(s.current.pause(),s.current.currentTime=0),i.current.forEach(f=>{try{f.stop()}catch{}}),i.current=[],o.current&&(clearTimeout(o.current),o.current=null),t(!1),r(null)},[]),c=v.useCallback(async()=>{try{a();const f=new Audio("/cat-tetris/sounds/background-music.mp3");f.loop=!0,f.volume=.3,s.current=f,await f.play(),t(!0),r("background")}catch{h()}},[a]),u=v.useCallback(async()=>{try{a();const f=new Audio("/cat-tetris/sounds/game-music.mp3");f.loop=!0,f.volume=.4,s.current=f,await f.play(),t(!0),r("game")}catch{d()}},[a]),h=v.useCallback(()=>{a();try{const f=Dr();if(!f)return;const y=[{freq:523.25,duration:.4},{freq:587.33,duration:.4},{freq:659.25,duration:.4},{freq:698.46,duration:.4},{freq:783.99,duration:.6},{freq:659.25,duration:.4},{freq:523.25,duration:.8},{freq:587.33,duration:.4},{freq:659.25,duration:.4},{freq:698.46,duration:.4},{freq:783.99,duration:.6},{freq:880,duration:.4},{freq:783.99,duration:.8},{freq:659.25,duration:.4},{freq:698.46,duration:.4},{freq:783.99,duration:.4},{freq:880,duration:.6},{freq:987.77,duration:.4},{freq:1046.5,duration:.8}];let x=f.currentTime;y.forEach((b,S)=>{const p=f.createOscillator(),m=f.createGain();if(p.connect(m),m.connect(f.destination),p.frequency.setValueAtTime(b.freq,x),p.type="sine",m.gain.setValueAtTime(0,x),m.gain.linearRampToValueAtTime(.1,x+.05),m.gain.exponentialRampToValueAtTime(.01,x+b.duration),p.start(x),p.stop(x+b.duration),i.current.push(p),S<y.length-1){const g=f.createOscillator(),w=f.createGain();g.connect(w),w.connect(f.destination),g.frequency.setValueAtTime(b.freq*1.25,x),g.type="triangle",w.gain.setValueAtTime(0,x),w.gain.linearRampToValueAtTime(.05,x+.05),w.gain.exponentialRampToValueAtTime(.01,x+b.duration),g.start(x),g.stop(x+b.duration),i.current.push(g)}x+=b.duration}),o.current=setTimeout(()=>{s.current||h()},x*1e3+1e3),t(!0),r("cheerful-fallback")}catch{}},[a]),d=v.useCallback(()=>{a();try{const f=Dr();if(!f)return;const y=[{freq:261.63,duration:.2},{freq:329.63,duration:.2},{freq:392,duration:.2},{freq:523.25,duration:.3},{freq:392,duration:.1},{freq:523.25,duration:.3},{freq:293.66,duration:.2},{freq:369.99,duration:.2},{freq:440,duration:.2},{freq:587.33,duration:.3},{freq:440,duration:.1},{freq:587.33,duration:.3},{freq:329.63,duration:.2},{freq:415.3,duration:.2},{freq:493.88,duration:.2},{freq:659.25,duration:.4},{freq:493.88,duration:.2},{freq:659.25,duration:.4}];let x=f.currentTime;y.forEach((b,S)=>{const p=f.createOscillator(),m=f.createGain();if(p.connect(m),m.connect(f.destination),p.frequency.setValueAtTime(b.freq,x),p.type="square",m.gain.setValueAtTime(0,x),m.gain.linearRampToValueAtTime(.15,x+.02),m.gain.exponentialRampToValueAtTime(.01,x+b.duration),p.start(x),p.stop(x+b.duration),i.current.push(p),S%2===0){const g=f.createOscillator(),w=f.createGain();g.connect(w),w.connect(f.destination),g.frequency.setValueAtTime(b.freq*.5,x),g.type="sawtooth",w.gain.setValueAtTime(0,x),w.gain.linearRampToValueAtTime(.08,x+.02),w.gain.exponentialRampToValueAtTime(.01,x+b.duration),g.start(x),g.stop(x+b.duration),i.current.push(g)}x+=b.duration}),o.current=setTimeout(()=>{s.current||d()},x*1e3+500),t(!0),r("energetic-fallback")}catch{}},[a]);return{isPlaying:e,currentTrack:n,startBackgroundMusic:c,startGameMusic:u,stopMusic:a,playCheerfulMelody:h,playEnergeticMelody:d}}const rt={DPAD_UP:12,DPAD_DOWN:13,DPAD_LEFT:14,DPAD_RIGHT:15,FACE_BUTTON_BOTTOM:0,FACE_BUTTON_RIGHT:1,FACE_BUTTON_LEFT:2,FACE_BUTTON_TOP:3,BUMPER_LEFT:4,BUMPER_RIGHT:5,TRIGGER_LEFT:6,TRIGGER_RIGHT:7,BUTTON_BACK:8,BUTTON_START:9,STICK_LEFT:10,STICK_RIGHT:11},YS=(e=null)=>{const[t,n]=v.useState([]),[r,s]=v.useState(!1),i=v.useRef({}),o=v.useRef(100),a=v.useRef({}),c=v.useRef({}),u=v.useRef(200);v.useEffect(()=>{const y=S=>{n(p=>[...p,S.gamepad]),s(!0),S.gamepad.vibrationActuator&&S.gamepad.vibrationActuator.playEffect("dual-rumble",{duration:200,strongMagnitude:.5,weakMagnitude:.5})},x=S=>{n(m=>m.filter(g=>g.id!==S.gamepad.id));const p=navigator.getGamepads().filter(m=>m&&m.connected);s(p.length>0)};return window.addEventListener("gamepadconnected",y),window.addEventListener("gamepaddisconnected",x),(()=>{const S=navigator.getGamepads(),p=Array.from(S).filter(m=>m&&m.connected);p.length>0&&(n(p),s(!0))})(),()=>{window.removeEventListener("gamepadconnected",y),window.removeEventListener("gamepaddisconnected",x)}},[]);const h=v.useCallback((y,x,b=.3)=>Math.abs(y)<b&&Math.abs(x)<b?null:Math.abs(y)>Math.abs(x)?y>0?"right":"left":x>0?"down":"up",[]),d=v.useCallback(()=>{var q,W,K;if(!r||!e)return;const y=navigator.getGamepads(),x=Array.from(y).find(Q=>Q&&Q.connected);if(!x)return;const b=Date.now(),{movePiece:S,rotatePiece:p,rotatePieceLeft:m,hardDrop:g,holdPiece:w,pause:k}=e;if(!S)return;const j=(Q,F)=>{const H=`movement_${Q}`,T=i.current[H]||0,_=c.current[H]||!1;if(F&&!_){c.current[H]=!0,i.current[H]=b,C(Q);return}if(F&&_){const L=u.current,D=o.current,V=T===i.current[H]&&b-T>=L?L:D;b-T>=V&&(i.current[H]=b,C(Q));return}!F&&_&&(c.current[H]=!1)},C=Q=>{e.movePiece&&e.movePiece(Q)},P=((q=x.buttons[rt.DPAD_LEFT])==null?void 0:q.pressed)||h(x.axes[0],x.axes[1])==="left",E=((W=x.buttons[rt.DPAD_RIGHT])==null?void 0:W.pressed)||h(x.axes[0],x.axes[1])==="right",M=((K=x.buttons[rt.DPAD_DOWN])==null?void 0:K.pressed)||h(x.axes[0],x.axes[1])==="down";j("left",P),j("right",E),j("down",M);const B={};[{button:rt.DPAD_UP,action:()=>g==null?void 0:g()},{button:rt.FACE_BUTTON_BOTTOM,action:()=>p==null?void 0:p()},{button:rt.FACE_BUTTON_RIGHT,action:()=>m==null?void 0:m()},{button:rt.FACE_BUTTON_LEFT,action:()=>p==null?void 0:p()},{button:rt.FACE_BUTTON_TOP,action:()=>p==null?void 0:p()},{button:rt.BUMPER_LEFT,action:()=>w==null?void 0:w()},{button:rt.BUMPER_RIGHT,action:()=>w==null?void 0:w()},{button:rt.BUTTON_START,action:()=>k==null?void 0:k()}].forEach(({button:Q,action:F})=>{var _;const H=(_=x.buttons[Q])==null?void 0:_.pressed,T=a.current[Q];if(B[Q]=H,H&&!T&&(F(),x.vibrationActuator)){const L=Q===rt.DPAD_UP?.3:.1;x.vibrationActuator.playEffect("dual-rumble",{duration:50,strongMagnitude:L,weakMagnitude:L*.5})}}),a.current=B},[r,h,e]),f=v.useCallback(()=>{const y=navigator.getGamepads(),x=Array.from(y).find(b=>b&&b.connected);return x?{id:x.id,index:x.index,connected:x.connected,buttonsCount:x.buttons.length,axesCount:x.axes.length}:null},[]);return{isGamepadActive:r,connectedGamepads:t,processGamepadInput:d,getGamepadInfo:f,controllerCount:t.length}};function JS(){const[e,t]=v.useState(null),[n,r]=v.useState(!0);v.useEffect(()=>{try{const o=G.resolve("playerStatsService");t(o.getStats()),r(!1);const a=()=>{try{const c=G.resolve("statisticsService"),h=G.resolve("gameService").getGameState(),d=c.getStats(),f={score:h.score.points,level:h.score.level,linesCleared:d.linesCleared,piecesPlaced:d.piecesPlaced,tSpins:d.tSpins,backToBack:d.backToBack,maxCombo:d.maxCombo,playTime:d.playTime};o.updateAfterGame(f),t(o.getStats()),window.dispatchEvent(new Event("playerStatsUpdated"))}catch{}};return R.on(O.GAME_OVER,a),()=>{R.off(O.GAME_OVER,a)}}catch{r(!1)}},[]);const s=v.useCallback((o,a)=>{try{const c=G.resolve("playerStatsService"),u=c.updateRecord(o,a);return u&&(t(c.getStats()),window.dispatchEvent(new Event("playerStatsUpdated"))),u}catch{return!1}},[]),i=v.useCallback((o,a=1)=>{try{const c=G.resolve("playerStatsService");c.incrementStat(o,a),t(c.getStats()),window.dispatchEvent(new Event("playerStatsUpdated"))}catch{}},[]);return{playerStats:e,loading:n,updateRecord:s,incrementStat:i}}const ZS=({isConnected:e,controllerCount:t,gamepadInfo:n,className:r=""})=>{const[s,i]=v.useState(!1);return e?l.jsx("div",{className:`fixed top-4 right-4 z-50 ${r}`,children:l.jsxs(N.div,{initial:{opacity:0,scale:.8,x:20},animate:{opacity:1,scale:1,x:0},exit:{opacity:0,scale:.8,x:20},transition:{duration:.3},className:"bg-gray-900/90 backdrop-blur-sm text-white p-3 rounded-lg border border-green-500/30 shadow-lg",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(N.div,{animate:{rotate:[0,-10,10,-10,0],scale:[1,1.1,1]},transition:{duration:2,repeat:1/0,repeatDelay:3},children:""}),l.jsxs("div",{className:"text-sm",children:[l.jsxs("div",{className:"text-green-400 font-semibold",children:[t," Controle",t!==1?"s":""," Conectado",t!==1?"s":""]}),l.jsx("div",{className:"text-gray-300 text-xs",children:"Pronto para jogar!"})]}),l.jsx(N.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>i(!s),className:"ml-2 text-gray-400 hover:text-white transition-colors",title:"Mostrar controles",children:l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"})})})]}),l.jsx(ge,{children:s&&l.jsx(N.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},className:"mt-3 pt-3 border-t border-gray-700",children:l.jsxs("div",{className:"text-xs text-gray-300 space-y-1",children:[l.jsx("div",{className:"font-semibold text-white mb-2",children:" Controles:"}),l.jsxs("div",{className:"grid grid-cols-2 gap-1 text-xs",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-yellow-400",children:"D-Pad  "}),l.jsx("div",{className:"text-gray-400",children:"Mover"})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-yellow-400",children:"D-Pad "}),l.jsx("div",{className:"text-gray-400",children:"Acelerar"})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-yellow-400",children:"D-Pad "}),l.jsx("div",{className:"text-gray-400",children:"Hard Drop"})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-yellow-400",children:"A/B/X/Y"}),l.jsx("div",{className:"text-gray-400",children:"Girar"})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-yellow-400",children:"L/R"}),l.jsx("div",{className:"text-gray-400",children:"Guardar"})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-yellow-400",children:"Start"}),l.jsx("div",{className:"text-gray-400",children:"Pausar"})]})]}),l.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-700",children:[l.jsx("div",{className:"text-green-400 text-xs",children:" Analog Stick Esquerdo tambm funciona!"}),l.jsx("div",{className:"text-blue-400 text-xs",children:" Gatilhos L2/R2 para rotao"})]}),n&&n.length>0&&l.jsx("div",{className:"mt-2 pt-2 border-t border-gray-700",children:l.jsx("div",{className:"text-xs text-gray-400",children:n.map((o,a)=>l.jsxs("div",{className:"mb-1",children:[l.jsxs("div",{className:"font-semibold text-white",children:["Controle ",o.index+1,":"]}),l.jsx("div",{className:"text-gray-300 truncate",children:o.id.length>30?o.id.substring(0,30)+"...":o.id}),l.jsxs("div",{className:"flex gap-2 text-xs",children:[l.jsxs("span",{className:"text-blue-400",children:[o.buttons," botes"]}),l.jsxs("span",{className:"text-green-400",children:[o.axes," eixos"]}),o.vibration&&l.jsx("span",{className:"text-purple-400",children:" Vibrao"})]})]},a))})})]})})})]})}):null},ej=v.lazy(()=>Fm(()=>import("./SettingsMenu-51cb6d42.js"),[]));function tj(){return l.jsx("div",{className:"flex items-center justify-center p-8",children:l.jsx(N.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"text-4xl",children:""})})}function nj({gameState:e,actions:t,onBackToMenu:n,onRestart:r,isGamepadActive:s,controllerCount:i,getGamepadInfo:o}){var y,x,b,S,p,m;const a=ue.useMemo(()=>{if(!(e!=null&&e.currentPiece)||e!=null&&e.gameOver||e!=null&&e.isPaused)return null;try{return t.getDropPreview()}catch{return null}},[(x=(y=e==null?void 0:e.currentPiece)==null?void 0:y.position)==null?void 0:x.x,(S=(b=e==null?void 0:e.currentPiece)==null?void 0:b.position)==null?void 0:S.y,(p=e==null?void 0:e.currentPiece)==null?void 0:p.type,(m=e==null?void 0:e.currentPiece)==null?void 0:m.shape,e==null?void 0:e.gameOver,e==null?void 0:e.isPaused]),[c,u]=ue.useState({hardDrop:!1,hold:!1,pause:!1}),h=ue.useCallback(()=>{c.hardDrop||e!=null&&e.gameOver||(t.hardDrop(),u(g=>({...g,hardDrop:!0})),setTimeout(()=>{u(g=>({...g,hardDrop:!1}))},300))},[t,c.hardDrop,e==null?void 0:e.gameOver]),d=ue.useCallback(()=>{c.hold||e!=null&&e.gameOver||!(e!=null&&e.canHold)||(t.holdPiece(),u(g=>({...g,hold:!0})),setTimeout(()=>{u(g=>({...g,hold:!1}))},500))},[t,c.hold,e==null?void 0:e.gameOver,e==null?void 0:e.canHold]),f=ue.useCallback(()=>{c.pause||e!=null&&e.gameOver||(e!=null&&e.isPaused?t.resume():t.pause(),u(g=>({...g,pause:!0})),setTimeout(()=>{u(g=>({...g,pause:!1}))},300))},[t,c.pause,e==null?void 0:e.gameOver,e==null?void 0:e.isPaused]);return l.jsxs("div",{className:"h-screen cat-bg flex flex-col overflow-hidden",children:[l.jsxs("div",{className:"flex items-center justify-between px-3 py-1.5 bg-black/30 backdrop-blur-sm border-b border-white/10 shrink-0",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(N.button,{onClick:n,whileHover:{scale:1.05},whileTap:{scale:.95},className:"bg-white/15 hover:bg-white/25 text-white p-1.5 rounded-lg transition-colors",title:"Voltar ao Menu",children:l.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"})})}),l.jsx("span",{className:"text-white font-bold text-sm",children:" Cat Tetris"})]}),l.jsxs("div",{className:"flex items-center gap-3 text-xs text-white/70",children:[l.jsxs("span",{className:"text-yellow-400 font-bold",children:[e.score.points.toLocaleString()," pts"]}),l.jsxs("span",{children:["Nv.",e.score.level]}),l.jsxs("span",{children:[e.score.lines," linhas"]})]}),l.jsx("div",{className:"flex items-center gap-1.5",children:l.jsx(N.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:e.isPaused?t.resume:t.pause,disabled:e.gameOver,className:"bg-white/10 hover:bg-white/20 text-white px-2.5 py-1 rounded-lg text-xs transition-colors disabled:opacity-50",children:e.isPaused?"":""})})]}),l.jsxs("div",{className:"flex-1 flex items-center justify-center overflow-hidden p-2",children:[l.jsxs("div",{className:"flex flex-col lg:flex-row gap-2 items-center justify-center",children:[l.jsxs("div",{className:"hidden lg:flex flex-col lg:flex-row gap-2 items-center justify-center",children:[l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx(Un,{heldPiece:e.heldPiece,canHold:e.canHold}),l.jsx(Hn,{pieces:e.nextPieces})]}),l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx(vn,{board:e.board,currentPiece:e.currentPiece,dropPreview:a,gameOver:e.gameOver}),l.jsx(bb,{onMove:t.movePiece,onRotate:t.rotatePiece,onHardDrop:t.hardDrop,onPause:e.isPaused?t.resume:t.pause,onHold:t.holdPiece,isPaused:e.isPaused,gameOver:e.gameOver,canHold:e.canHold})]}),l.jsx("div",{className:"flex flex-col gap-2",children:l.jsx(zn,{score:e.score.points,level:e.score.level,lines:e.score.lines,combo:e.score.combo})})]}),l.jsxs("div",{className:"flex lg:hidden flex-col w-full h-full","data-testid":"mobile-layout",children:[l.jsxs("div",{className:"flex justify-between items-center mb-2 px-2 bg-black/30 rounded-lg mx-2 py-1",children:[l.jsxs("div",{className:"text-white text-sm",children:[l.jsx("span",{className:"text-yellow-400 font-bold",children:e.score.points.toLocaleString()}),l.jsxs("span",{className:"text-white/60 ml-2",children:["Nv.",e.score.level]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[e.heldPiece&&l.jsx("div",{className:"text-xs text-white/60",children:""}),l.jsx("div",{className:"text-xs text-white/60",children:"Prxima:"}),l.jsx("div",{className:"bg-gray-800/50 p-1 rounded",children:e.nextPieces[0]?l.jsx("div",{className:"grid gap-0.5",style:{gridTemplateColumns:`repeat(${Math.max(...e.nextPieces[0].shape.map(g=>g.length))}, 8px)`,gridTemplateRows:`repeat(${e.nextPieces[0].shape.length}, 8px)`},children:e.nextPieces[0].shape.map((g,w)=>g.map((k,j)=>l.jsx("div",{className:"w-2 h-2 rounded-sm",style:{backgroundColor:k?jr(e.nextPieces[0].color):"transparent",border:k?"1px solid rgba(255,255,255,0.3)":"none"},children:k&&e.nextPieces[0].emoji?l.jsx("span",{className:"text-[6px] leading-none block text-center",children:e.nextPieces[0].emoji}):null},`next-${j}-${w}`)))}):l.jsx("div",{className:"w-8 h-6 flex items-center justify-center",children:l.jsx("span",{className:"text-xs text-white/40",children:"?"})})})]})]}),l.jsxs("div",{className:"flex items-center justify-center flex-1 relative px-1",children:[l.jsxs("div",{className:"flex flex-col gap-1 mr-2",children:[l.jsx(N.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onTouchStart:()=>t.rotatePiece(),onClick:()=>t.rotatePiece(),disabled:e.gameOver,className:"bg-blue-500 text-white p-4 rounded-full shadow-lg hover:bg-blue-600 disabled:opacity-50 touch-manipulation text-lg",children:""}),l.jsx(N.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onTouchStart:()=>t.movePiece("left"),onClick:()=>t.movePiece("left"),disabled:e.gameOver,className:"bg-gray-600 text-white p-4 rounded-lg shadow-lg hover:bg-gray-700 disabled:opacity-50 touch-manipulation text-lg",children:""})]}),l.jsx("div",{className:"flex-shrink-0 mx-1",children:l.jsx(vn,{board:e.board,currentPiece:e.currentPiece,dropPreview:a,gameOver:e.gameOver})}),l.jsxs("div",{className:"flex flex-col gap-1 ml-2",children:[l.jsx(N.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onTouchStart:h,onClick:h,disabled:e.gameOver||c.hardDrop,className:`text-white p-4 rounded-full shadow-lg disabled:opacity-50 touch-manipulation text-lg ${c.hardDrop?"bg-red-400":"bg-red-500 hover:bg-red-600"}`,children:""}),l.jsx(N.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onTouchStart:()=>t.movePiece("right"),onClick:()=>t.movePiece("right"),disabled:e.gameOver,className:"bg-gray-600 text-white p-4 rounded-lg shadow-lg hover:bg-gray-700 disabled:opacity-50 touch-manipulation text-lg",children:""})]})]}),l.jsxs("div",{className:"flex justify-center gap-2 py-2 px-2",children:[l.jsx(N.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onTouchStart:()=>t.movePiece("down"),onClick:()=>t.movePiece("down"),disabled:e.gameOver,className:"bg-gray-700 text-white px-4 py-2 rounded-lg shadow-lg hover:bg-gray-600 disabled:opacity-50 touch-manipulation",children:" Acelerar"}),e.canHold&&l.jsx(N.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onTouchStart:d,onClick:d,disabled:e.gameOver||!e.canHold||c.hold,className:`text-white px-4 py-2 rounded-lg shadow-lg disabled:opacity-50 touch-manipulation ${c.hold?"bg-green-400":e.canHold?"bg-green-600 hover:bg-green-500":"bg-gray-500"}`,children:" Guardar"}),l.jsx(N.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onTouchStart:f,onClick:f,disabled:e.gameOver||c.pause,className:`text-white px-4 py-2 rounded-lg shadow-lg disabled:opacity-50 touch-manipulation ${c.pause?"bg-yellow-400":"bg-yellow-500 hover:bg-yellow-600"}`,children:e.isPaused?"":""})]})]})]}),l.jsx(ge,{children:e.gameOver&&l.jsx(jb,{score:e.score,onRestart:r,onBackToMenu:n})}),l.jsx(ZS,{isConnected:s,controllerCount:i,gamepadInfo:o()})]})]})}function rj(){const[e,t]=v.useState("menu"),[n,r]=v.useState(!1),[s,i]=v.useState(!1),[o,a]=v.useState(!1),[c,u]=v.useState(!1),[h,d]=v.useState(!1),[f,y]=v.useState(!1),[x,b]=v.useState(!1),[S,p]=v.useState(!1),[m,g]=v.useState(!1),[w,k]=v.useState(!0),[j,C]=v.useState(!1),[P,E]=v.useState(null),[M,B]=v.useState(null),[q,W]=v.useState(!1),[K,Q]=v.useState(!1),{gameState:F,actions:H}=WS();ue.useEffect(()=>{Lt.setGameStateProvider(()=>{try{return G.resolve("gameService").getGameState()}catch{return null}})},[]);const{settings:T,updateSettings:_}=qS(),{startBackgroundMusic:L,startGameMusic:D,stopMusic:V}=XS(),{isGamepadActive:ve,controllerCount:Pe,processGamepadInput:tt,getGamepadInfo:je}=YS(H);u0(),h0(),JS(),x0(),v0(),QS();const Z=e==="game",{setDAS:te,setARR:oe}=y0(H,F,Z);ue.useEffect(()=>{(T==null?void 0:T.das)!=null&&te(T.das),(T==null?void 0:T.arr)!=null&&oe(T.arr)},[T==null?void 0:T.das,T==null?void 0:T.arr,te,oe]),ue.useEffect(()=>{const J=Ie=>{try{G.resolve("gameService").setGameMode(Ie.detail.mode)}catch{}};return window.addEventListener("gameModeChanged",J),()=>window.removeEventListener("gameModeChanged",J)},[]),ue.useEffect(()=>{F&&!F.gameOver&&F.score.points>0&&F.isPlaying?u(!0):u(!1)},[F]),ue.useEffect(()=>(L&&V&&(T!=null&&T.soundEnabled)?e==="menu"?L():e==="game"&&D():V(),()=>{V()}),[e,T==null?void 0:T.soundEnabled,L,D,V]),ue.useEffect(()=>{if(ve&&e==="game"){const J=setInterval(()=>{tt()},16);return()=>clearInterval(J)}},[ve,e,tt]),ue.useEffect(()=>{const J=Ut=>{Ut.preventDefault(),a(!0)},Ie=()=>{a(!1),i(!1)};return window.addEventListener("beforeinstallprompt",J),window.addEventListener("appinstalled",Ie),window.matchMedia("(display-mode: standalone)").matches&&a(!1),()=>{window.removeEventListener("beforeinstallprompt",J),window.removeEventListener("appinstalled",Ie)}},[]);const X=J=>{_(J),J.das!=null&&te(J.das),J.arr!=null&&oe(J.arr),J.soundEnabled?e==="menu"?L==null||L():e==="game"&&(D==null||D()):V==null||V()},U=()=>{t("game"),T!=null&&T.soundEnabled&&(D==null||D()),F!=null&&F.gameOver?H.restart():F!=null&&F.isPaused?H.resume():F!=null&&F.isPlaying||H.restart()},Gr=()=>{t("game"),T!=null&&T.soundEnabled&&(D==null||D()),F!=null&&F.isPaused&&H.resume()},$s=()=>{t("game"),T!=null&&T.soundEnabled&&(D==null||D()),H.restart()},Fo=()=>{H.restart(),t("game")},Ws=()=>{t("menu"),T!=null&&T.soundEnabled&&(L==null||L()),F&&!F.gameOver&&H.pause()},qs=()=>{i(!0)};return K?l.jsx(CS,{onExit:()=>Q(!1)}):q?l.jsx(vS,{onClose:()=>W(!1)}):M?l.jsx(mS,{mode:M.mode,aiDifficulty:M.aiDifficulty,ai1Difficulty:M.ai1Difficulty,ai2Difficulty:M.ai2Difficulty,onExit:()=>{B(null),t("menu")}}):e==="menu"?l.jsxs(l.Fragment,{children:[l.jsx(lS,{onStartGame:c?Gr:U,onNewGame:$s,onShowSettings:()=>r(!0),onShowGameModes:()=>p(!0),onShowShop:()=>b(!0),onShowMissions:()=>d(!0),onShowAchievements:()=>y(!0),onShowMultiplayer:()=>g(!0),onShowTutorial:()=>k(!0),onShowTutorialHub:()=>C(!0),onShowAIShowcase:()=>W(!0),onShowCreatorMode:()=>Q(!0),onShowInstallPrompt:qs,canInstallPWA:o,hasActiveGame:c,gameState:F}),l.jsx(ge,{children:m&&l.jsx(RS,{onClose:()=>g(!1),onStartMatch:J=>{g(!1),B(J)}})}),l.jsx(ge,{children:S&&l.jsx(MS,{onClose:()=>p(!1),onStartGame:$s})}),l.jsx(ge,{children:x&&l.jsx(AS,{onClose:()=>b(!1)})}),l.jsx(ge,{children:h&&l.jsx(dS,{onClose:()=>d(!1)})}),l.jsx(ge,{children:f&&l.jsx(hS,{onClose:()=>y(!1)})}),l.jsx(ge,{children:j&&l.jsx(US,{tutorialService:G.resolve("tutorialService"),onClose:()=>C(!1),onLessonComplete:J=>{if(!(!J||!J.rewards)){try{const Ie=G.resolve("currencyService");J.rewards.fishCoins&&Ie.addFish(J.rewards.fishCoins,`Tutorial: ${J.lessonTitle||"Lesson"}`)}catch{}try{J.rewards.xp&&G.resolve("playerStatsService").incrementStat("totalPlayTime",J.rewards.xp)}catch{}try{if(J.rewards.achievement){const Ie=G.resolve("achievementsService"),Ut=G.resolve("playerStatsService");Ie.checkAchievements(Ut.getStats())}}catch{}E(J)}}})}),l.jsx(ge,{children:l.jsx(v.Suspense,{fallback:l.jsx(tj,{}),children:l.jsx(ej,{isOpen:n,settings:T||{},onSettingsChange:X,onClose:()=>r(!1)})})}),s&&l.jsx(cS,{onClose:()=>i(!1)}),l.jsx(fS,{}),l.jsx(ge,{children:P&&l.jsx($S,{reward:P,onClose:()=>E(null)})})]}):F?l.jsxs(l.Fragment,{children:[l.jsx(nj,{gameState:F,actions:H,onBackToMenu:Ws,onRestart:Fo,isGamepadActive:ve,controllerCount:Pe,getGamepadInfo:je}),l.jsx(ge,{children:w&&l.jsx(IS,{onComplete:()=>k(!1)})})]}):l.jsx("div",{className:"h-screen cat-bg flex items-center justify-center overflow-hidden",children:l.jsx("div",{className:"text-white text-xl",children:"Carregando..."})})}function sj(){return l.jsxs(Tb,{children:[l.jsx(rj,{}),l.jsx(uS,{})]})}Na.createRoot(document.getElementById("root")).render(l.jsx(sj,{}));export{ge as A,l as j,N as m,v as r};
