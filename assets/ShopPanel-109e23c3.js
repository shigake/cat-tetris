import{z as C,C as S,r as T,u as q,d as j,j as e,m as c,A as z,D as x}from"./index-d5856a23.js";function L({onClose:d}){var u,b;const{themes:r,equippedTheme:P,loading:h,purchaseTheme:w,equipTheme:N,getStats:v}=C(),{currency:n}=S(),[o,a]=T.useState(null),{t:l}=q(),i=v(),p=t=>{const s=w(t);s.success?x(l("shop.purchaseSuccess",{name:s.theme.name}),"success"):x(`âŒ ${s.error}`,"error")},m=t=>{const s=N(t);s.success?x(l("shop.equipSuccess",{name:s.theme.name}),"success"):x(`âŒ ${s.error}`,"error")},{selectedIndex:y}=j({itemCount:(r==null?void 0:r.length)||0,onConfirm:t=>{const s=r[t];s&&(s.owned?s.equipped||m(s.id):p(s.id))},onBack:d,active:!o&&!h,wrap:!0});return j({itemCount:1,onConfirm:()=>a(null),onBack:()=>a(null),active:!!o}),h?e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsx("div",{className:"text-white text-lg",children:l("shop.loading")})}):!r||r.length===0?e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-red-900/90 text-white p-6 rounded-lg",children:[e.jsx("p",{className:"text-xl",children:l("shop.errorLoading")}),e.jsx("button",{onClick:d,className:"mt-4 bg-white text-black px-4 py-2 rounded",children:l("shop.close")})]})}):e.jsx(c.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:d,children:e.jsxs(c.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},className:"bg-gradient-to-br from-pink-900/95 to-purple-900/95 rounded-2xl p-6 max-w-6xl w-full max-h-[90vh] overflow-y-auto border-2 border-white/20 shadow-2xl",onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-white flex items-center gap-2",children:l("shop.title")}),e.jsx("p",{className:"text-white/60 text-sm mt-1",children:l("shop.subtitle")})]}),e.jsx("button",{onClick:d,className:"text-white/60 hover:text-white text-2xl transition-colors",children:"âœ•"})]}),e.jsx("div",{className:"bg-black/30 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-yellow-400 flex items-center justify-center gap-1",children:["ðŸŸ ",((u=n==null?void 0:n.fish)==null?void 0:u.toLocaleString())||0]}),e.jsx("div",{className:"text-white/60 text-sm",children:l("shop.yourFish")})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-white",children:[i==null?void 0:i.ownedThemes,"/",i==null?void 0:i.totalThemes]}),e.jsx("div",{className:"text-white/60 text-sm",children:l("shop.themesUnlocked")})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-green-400",children:[i!=null&&i.totalThemes?Math.floor(i.ownedThemes/i.totalThemes*100):0,"%"]}),e.jsx("div",{className:"text-white/60 text-sm",children:l("shop.collection")})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-purple-400 flex items-center justify-center gap-1",children:["ðŸŸ ",((b=i==null?void 0:i.totalSpent)==null?void 0:b.toLocaleString())||0]}),e.jsx("div",{className:"text-white/60 text-sm",children:l("shop.totalSpent")})]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.map((t,s)=>{const g=!t.owned&&(n==null?void 0:n.fish)>=t.price;return e.jsxs(c.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:s*.05},className:`bg-black/40 rounded-lg p-4 border-2 relative ${t.equipped?"border-green-500 shadow-lg shadow-green-500/30":t.owned?"border-white/20":"border-white/10"} ${s===y?"ring-2 ring-yellow-400 ring-offset-2 ring-offset-purple-900 scale-[1.02]":""}`,children:[t.equipped&&e.jsx("div",{className:"absolute top-2 right-2 bg-green-600 text-white text-xs px-2 py-1 rounded-full font-bold",children:l("shop.equipped")}),t.premium&&e.jsx("div",{className:"absolute top-2 left-2 bg-gradient-to-r from-yellow-400 to-orange-500 text-white text-xs px-2 py-1 rounded-full font-bold",children:l("shop.premium")}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-white font-bold text-lg mb-1",children:t.name}),e.jsx("p",{className:"text-white/60 text-sm",children:t.description})]}),e.jsx("div",{className:"bg-black/30 rounded-lg p-3 mb-4",children:e.jsx("div",{className:"flex justify-center gap-2 flex-wrap",children:Object.entries(t.pieces).map(([k,f])=>e.jsx("div",{className:"w-12 h-12 rounded flex items-center justify-center text-2xl border border-white/10",style:{backgroundColor:f.color},children:f.emoji},k))})}),e.jsxs("div",{className:"flex gap-2",children:[t.owned?t.equipped?e.jsx("button",{disabled:!0,className:"flex-1 bg-green-600 text-white py-2 px-4 rounded-lg font-bold cursor-default",children:l("shop.inUse")}):e.jsx("button",{onClick:()=>m(t.id),className:"flex-1 bg-blue-600 hover:bg-blue-500 text-white py-2 px-4 rounded-lg font-bold transition-colors",children:l("shop.equip")}):e.jsx("button",{onClick:()=>p(t.id),disabled:!g,className:`flex-1 py-2 px-4 rounded-lg font-bold transition-colors ${g?"bg-yellow-600 hover:bg-yellow-500 text-white":"bg-gray-600 text-white/40 cursor-not-allowed"}`,children:t.default?l("shop.free"):e.jsxs(e.Fragment,{children:["ðŸŸ ",t.price.toLocaleString()]})}),e.jsx("button",{onClick:()=>a(t),className:"bg-purple-600 hover:bg-purple-500 text-white py-2 px-4 rounded-lg font-bold transition-colors",children:"ðŸ‘ï¸"})]})]},t.id)})}),e.jsx(z,{children:o&&e.jsx(c.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/90 flex items-center justify-center z-[60]",onClick:()=>a(null),children:e.jsxs(c.div,{initial:{scale:.8},animate:{scale:1},exit:{scale:.8},className:"bg-gray-900 rounded-xl p-6 max-w-md",onClick:t=>t.stopPropagation(),children:[e.jsx("h3",{className:"text-white font-bold text-2xl mb-4",children:o.name}),e.jsx("div",{className:"grid grid-cols-4 gap-3 mb-4",children:Object.entries(o.pieces).map(([t,s])=>e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-lg flex items-center justify-center text-3xl mb-2 border-2 border-white/20",style:{backgroundColor:s.color},children:s.emoji}),e.jsx("div",{className:"text-white/60 text-xs",children:t})]},t))}),e.jsx("button",{onClick:()=>a(null),className:"w-full bg-purple-600 hover:bg-purple-500 text-white py-2 rounded-lg font-bold",children:l("shop.close")})]})})})]})})}export{L as default};
